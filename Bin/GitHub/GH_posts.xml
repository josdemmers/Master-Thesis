<?xml version="1.0" encoding="utf-8"?>
<!--ggplot2 1152 issues.-->
<Topics>
  <Topic Id="1" Title="facet_grid free space calculations incorrect">
    <Messages>
      <Message Id="0" ParentId="1" UserId="4196" Date="12/02/2009 20:15:28" Content="    da &lt;- data.frame(&#xA;      x = rep(1:5,  2), &#xA;      y = c(1+(0:4),  1+(0:4)/10), &#xA;      z = rep(1:2,  each=5))&#xA;&#xA;    qplot(x,  y,  data=da,  group=z,  geom=&quot;line&quot;) +&#xA;      facet_grid(z ~ .,  scales=&quot;free_y&quot;,  space=&quot;free&quot;)&#xA;&#xA;Panel two is about half the size it should be&#xA;&#xA;" />
      <Message Id="87950" ParentId="1" UserId="4196" Date="12/09/2009 04:56:28" Content="Panel 1 has height 4.4 null units,  and panel two has height 0.44 null units,  so there's something I don't understand about how the grid layout works." />
      <Message Id="89233" ParentId="1" UserId="4196" Date="12/11/2009 04:43:24" Content="Fixed in d3870669f98ff35920d67c53cb729903116b8bbb" />
    </Messages>
  </Topic>
  <Topic Id="2" Title="facet_wrap messes up data order">
    <Messages>
      <Message Id="0" ParentId="2" UserId="4196" Date="12/02/2009 20:16:11" Content="Because of use of merge.  Replace with join function from devel version of plyr." />
      <Message Id="87727" ParentId="2" UserId="4196" Date="12/08/2009 22:38:16" Content="Reordering bug fixed in 04c8b1d0f570ba2323977be33ddb65cf67f27d5e" />
    </Messages>
  </Topic>
  <Topic Id="3" Title="Facetting doesn't work with partial margins">
    <Messages>
      <Message Id="0" ParentId="3" UserId="4196" Date="12/02/2009 20:16:52" Content="    qplot(mpg,  wt,  data = mtcars) + facet_grid(vs ~ am,  margins = &quot;grand_col&quot;)" />
      <Message Id="89249" ParentId="3" UserId="4196" Date="12/11/2009 05:24:27" Content="This will probably have to wait until I've reworked the data structures for facetting.  reshape::stamp currently doesn't give enough control (or maybe is buggy - is adding all margins when add.missing = T)" />
      <Message Id="2992758" ParentId="3" UserId="4196" Date="12/02/2011 17:06:15" Content="Works in devel." />
      <Message Id="4488826" ParentId="3" UserId="463252" Date="03/13/2012 23:24:25" Content="Putting a breadcrumb here in case anyone else is looking at/for this.&#xD;&#xA;&#xD;&#xA;Format is different than listed in the initial issue. Working format is:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + facet_grid(vs ~ am,  margins = &quot;am&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;`margins` can be a character vector of variable names across which margins should be made." />
    </Messages>
  </Topic>
  <Topic Id="4" Title="coord_map should apply same transformation as coord_equal">
    <Messages>
      <Message Id="0" ParentId="4" UserId="4196" Date="12/02/2009 20:17:34" Content="To ensure that map aspect ratios are correct" />
      <Message Id="89235" ParentId="4" UserId="4196" Date="12/11/2009 04:46:38" Content="Fixed in ee57525e814582a7a9613443a7c8ab6545ad0a0e" />
    </Messages>
  </Topic>
  <Topic Id="5" Title="legend should respect layer data subset">
    <Messages>
      <Message Id="0" ParentId="5" UserId="4196" Date="12/02/2009 20:20:41" Content="In this example,  points and lines are used for both values.&#xD;&#xA;&#xD;&#xA;    df.actual &lt;- data.frame(x = 1:10,  y = 1:10)&#xD;&#xA;    df.approx &lt;- data.frame(x = 1:15,  y = 1:15 + rnorm(15,  sd = 3))&#xD;&#xA;    ggplot(df.actual,  aes(x,  y)) +&#xD;&#xA;      geom_point(aes(colour=&quot;Actual&quot;)) +&#xD;&#xA;      geom_line(aes(colour=&quot;Approximate&quot;),  data=df.approx)" />
      <Message Id="85071" ParentId="5" UserId="4196" Date="12/03/2009 22:49:41" Content="Another example:&#xD;&#xA;&#xD;&#xA;    time &lt;- 1:20&#xD;&#xA;    d &lt;- data.frame( &#xD;&#xA;      t = rep(time, 2),  &#xD;&#xA;      type = rep(c(&quot;sin&quot;, &quot;cos&quot;), each = 20), &#xD;&#xA;      value= c(sin(time * 2*pi/100),  cos(time * 2*pi/100)))&#xD;&#xA;    ggplot(d,  aes(t,  value,  colour = type)) + &#xD;&#xA;      geom_line() + &#xD;&#xA;      geom_line(subset = .(type == &quot;sin&quot;),  linetype = 3,  size = 2)&#xD;&#xA;" />
      <Message Id="85099" ParentId="5" UserId="4196" Date="12/03/2009 23:22:37" Content="And possibly this one too:&#xD;&#xA;&#xD;&#xA;    set.seed(123)&#xD;&#xA;    x &lt;- paste(&quot;a&quot;,  1:16,  sep=&quot;&quot;)&#xD;&#xA;    y &lt;- gl(2,  8,  labels = c(&quot;Control&quot;,  &quot;Treat&quot;))&#xD;&#xA;    z &lt;- runif(16) * 5&#xD;&#xA;    df &lt;- data.frame(x, y, z)&#xD;&#xA;&#xD;&#xA;    ggplot(df,  aes(z,  x,  color=y)) + &#xD;&#xA;      geom_point()&#xD;&#xA;    last_plot() + geom_vline(xintercept = 1)&#xD;&#xA;" />
      <Message Id="316797" ParentId="5" UserId="4196" Date="07/18/2010 10:53:31" Content="And one more:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    dat &lt;- structure(list(x = c(1.9999999,  1.9999998,  1.9999997,  1.9999996,  &#xD;&#xA;    14.0000001,  14.0000002,  14.0000003,  14.0000004),  y = c(567.385,  &#xD;&#xA;    569.415,  560.28,  570.43,  501.41,  499.38,  503.44,  504.455)),  .Names = c(&quot;x&quot;,  &#xD;&#xA;    &quot;y&quot;),  row.names = c(NA,  -8L),  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;    ggplot(dat,  aes(x, y)) + &#xD;&#xA;      geom_point(aes(colour = &quot;measurement&quot;)) + &#xD;&#xA;      stat_smooth(aes(colour =  &quot;smooth&quot;),  method = lm) + &#xD;&#xA;      geom_hline(aes(colour = &quot;mean&quot;,  yintercept=480))&#xD;&#xA;" />
      <Message Id="2992752" ParentId="5" UserId="4196" Date="12/02/2011 17:05:58" Content="Another one for you :)" />
      <Message Id="2995665" ParentId="5" UserId="227097" Date="12/02/2011 20:54:01" Content="Maybe I will rewrite the legend-layer-scale mapping. see also https://github.com/hadley/ggplot2/issues/225#issuecomment-2995523&#xD;&#xA;So this is in my todo list." />
      <Message Id="35938045" ParentId="5" UserId="4196" Date="02/24/2014 21:11:17" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="6" Title="Break names should be used as labels">
    <Messages>
      <Message Id="0" ParentId="6" UserId="4196" Date="12/02/2009 20:21:17" Content="If breaks is a named vector,  the names should be used as labels." />
      <Message Id="87823" ParentId="6" UserId="4196" Date="12/09/2009 00:22:59" Content="Implemented in 08d4538ee9efd2bf0236c70c79443746a6d6ece5" />
    </Messages>
  </Topic>
  <Topic Id="7" Title="geom_contour">
    <Messages>
      <Message Id="0" ParentId="7" UserId="4196" Date="12/02/2009 20:23:30" Content="geom_contour generates errors and does not correctly draw contours for density_2d&#xD;&#xA;&#xD;&#xA;    qplot(rating,  length,  data = movies,  geom = &quot;density2d&quot;, &#xD;&#xA;      colour = factor(Comedy),  ylim = c(0,  150))&#xD;&#xA;" />
      <Message Id="87690" ParentId="7" UserId="4196" Date="12/08/2009 21:44:31" Content="Fixed in c296b7aad5a45179f906eeb5ffe58555a0ca1353" />
    </Messages>
  </Topic>
  <Topic Id="8" Title="scale_colour_gradientn ignores labels">
    <Messages>
      <Message Id="0" ParentId="8" UserId="4196" Date="12/02/2009 20:24:28" Content="" />
      <Message Id="86894" ParentId="8" UserId="4196" Date="12/07/2009 21:13:37" Content="Fixed in 5fc99a892252fddb84d05f03cd1eac843a1590ab" />
    </Messages>
  </Topic>
  <Topic Id="9" Title="should be able to set n in stat_density_2d">
    <Messages>
      <Message Id="0" ParentId="9" UserId="4196" Date="12/02/2009 20:24:48" Content="" />
      <Message Id="87696" ParentId="9" UserId="4196" Date="12/08/2009 21:52:36" Content="Implemented in 02e42363254cd6960fb47e0dd80fa89a8f36dc58" />
    </Messages>
  </Topic>
  <Topic Id="10" Title="Transformations of scale_colour_gradient don't work">
    <Messages>
      <Message Id="0" ParentId="10" UserId="4196" Date="12/02/2009 20:27:15" Content="The following two plots are identical:&#xD;&#xA;&#xD;&#xA;    qplot(carat,  price,  data = diamonds,  geom = &quot;bin2d&quot;) +&#xD;&#xA;      scale_colour_gradient()&#xD;&#xA;  &#xD;&#xA;    qplot(carat,  price,  data = diamonds,  geom = &quot;bin2d&quot;) +&#xD;&#xA;      scale_colour_gradient(trans = &quot;log10&quot;)" />
      <Message Id="87952" ParentId="10" UserId="4196" Date="12/09/2009 05:14:15" Content="Problem seems to be that default isn't being overridden when function is called - if you manually change the default it works ok.  Something wrong with the auto-built accessors?" />
      <Message Id="87953" ParentId="10" UserId="4196" Date="12/09/2009 05:16:03" Content="Gah,  it does work - need to modify fill,  not colour,  scale!" />
    </Messages>
  </Topic>
  <Topic Id="11" Title="facet_grid doesn't work with multiple variables ">
    <Messages>
      <Message Id="0" ParentId="11" UserId="4196" Date="12/03/2009 02:48:13" Content="     qplot(mpg,  wt,  data = mtcars) + facet_grid(vs + am ~ .)" />
      <Message Id="89240" ParentId="11" UserId="4196" Date="12/11/2009 05:10:59" Content="Fixed in 94919e2f87f923119c6b7baff9e9177df6bdc72c" />
    </Messages>
  </Topic>
  <Topic Id="12" Title="Scales don't train on set values">
    <Messages>
      <Message Id="0" ParentId="12" UserId="4196" Date="12/03/2009 02:49:32" Content="&#xD;&#xA;    qplot(mpg,  wt,  data=mtcars) + geom_point(x = 0)&#xD;&#xA;    qplot(mpg,  wt,  data=mtcars) + geom_point(x = 20)&#xD;&#xA;" />
      <Message Id="88562" ParentId="12" UserId="4196" Date="12/10/2009 01:57:34" Content="This is not a bug - this is how things should work." />
    </Messages>
  </Topic>
  <Topic Id="13" Title="coord_equal does not work with log scales">
    <Messages>
      <Message Id="0" ParentId="13" UserId="4196" Date="12/03/2009 02:53:08" Content="    df &lt;- data.frame(a = 2 ^ (1:10),  b = 3 ^ (1:10))&#xD;&#xA;    myplot &lt;- ggplot(df,  aes(a, b)) + &#xD;&#xA;      geom_line() + &#xD;&#xA;      scale_x_log10() + scale_y_log10()&#xD;&#xA;&#xD;&#xA;    myplot&#xD;&#xA;    myplot + coord_equal()" />
      <Message Id="85051" ParentId="13" UserId="4196" Date="12/03/2009 22:24:13" Content="Or with reverse scales...&#xD;&#xA;&#xD;&#xA;    qplot(mpg,  wt,  data=mtcars) + coord_equal() + scale_x_reverse()" />
      <Message Id="88915" ParentId="13" UserId="4196" Date="12/10/2009 18:17:52" Content="Fixed in 8693604f5a6c402eaf28d2c7ecec7216c5226289" />
    </Messages>
  </Topic>
  <Topic Id="14" Title="coord_trans doesn't respect expand">
    <Messages>
      <Message Id="0" ParentId="14" UserId="4196" Date="12/03/2009 02:57:22" Content="    qplot(rlnorm(100),  rlnorm(100)) + &#xD;&#xA;      coord_trans(x=&quot;log&quot;) + &#xD;&#xA;      scale_y_continuous(limits=c(0, 10), expand=c(0, 0))" />
      <Message Id="88918" ParentId="14" UserId="4196" Date="12/10/2009 18:21:48" Content="Fixed in 0c047a7a4bcbaf2fd469f4a2f43e6b17dac1ff66" />
    </Messages>
  </Topic>
  <Topic Id="15" Title="coord_equal does not use space efficiently">
    <Messages>
      <Message Id="0" ParentId="15" UserId="4196" Date="12/03/2009 22:26:31" Content="In the following example,  it expands the y-axis too much - it should change the aspect ratio instead.&#xD;&#xA;&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) + coord_equal()&#xD;&#xA;" />
      <Message Id="88583" ParentId="15" UserId="4196" Date="12/10/2009 03:20:39" Content="First attempt in cd11888cf8407f536276fa71c64006ab5b51a6ff" />
      <Message Id="89234" ParentId="15" UserId="4196" Date="12/11/2009 04:43:59" Content="And completely fixed in d3870669f98ff35920d67c53cb729903116b8bbb" />
    </Messages>
  </Topic>
  <Topic Id="16" Title="scales should generate compatible legend keys">
    <Messages>
      <Message Id="0" ParentId="16" UserId="4196" Date="12/03/2009 22:27:04" Content="    set.seed(1)&#xD;&#xA;    d = data.frame(x=1:10,  y=runif(10),  z=runif(10))&#xD;&#xA;    ggplot(d) + geom_point(aes(x, y,  size=z,  colour=z)) + scale_area()&#xD;&#xA;    # fails&#xD;&#xA;&#xD;&#xA;    set.seed(7)&#xD;&#xA;    d = data.frame(x=1:10,  y=runif(10),  z=runif(10))&#xD;&#xA;    ggplot(d) + geom_point(aes(x, y,  size=z,  colour=z)) + scale_area()&#xD;&#xA;    # works" />
      <Message Id="88349" ParentId="16" UserId="4196" Date="12/09/2009 19:35:31" Content="Fixed in 6f8e2bff56d94a8c9fdb4d49615145faace111e2" />
    </Messages>
  </Topic>
  <Topic Id="17" Title="coord_cartesian and non-linear scales">
    <Messages>
      <Message Id="0" ParentId="17" UserId="4196" Date="12/03/2009 22:28:25" Content="xlim and ylim should be specified in the original data units,  and use the scales to transform them into plotted units." />
      <Message Id="88922" ParentId="17" UserId="4196" Date="12/10/2009 18:24:29" Content="    # No data displayed&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) + &#xD;&#xA;      scale_x_log10() + &#xD;&#xA;      coord_cartesian(xlim = c(15,  30))&#xD;&#xA;  &#xD;&#xA;    # Have to manually transform the limits&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) + &#xD;&#xA;      scale_x_log10() + &#xD;&#xA;      coord_cartesian(xlim = log10(c(15,  30)))" />
      <Message Id="88929" ParentId="17" UserId="4196" Date="12/10/2009 18:36:16" Content="Fixed in c4a39813e85a724df0e0f3a7f8fedcb1e01a2e35" />
    </Messages>
  </Topic>
  <Topic Id="18" Title="geom_rect and geom_line should support infinite coordinates">
    <Messages>
      <Message Id="0" ParentId="18" UserId="4196" Date="12/03/2009 22:42:05" Content="This would be useful for annotations,  and for geom_vline and geom_hline.  The main complication would be ensuring correct translation in coordinate systems.&#xD;&#xA;&#xD;&#xA;      ggplot(data.frame(x=0:1, y=0:1)) +&#xD;&#xA;        geom_rect(aes(x=x, y=y), xmin=.1, xmax=.2, ymin=-Inf, ymax=Inf)" />
      <Message Id="88951" ParentId="18" UserId="4196" Date="12/10/2009 19:27:45" Content="Fixed in 1f37b8db0fb6114bb2fc37a58a27bd51e62f75f5" />
    </Messages>
  </Topic>
  <Topic Id="19" Title="Legend with three constraints doesn't work">
    <Messages>
      <Message Id="0" ParentId="19" UserId="4196" Date="12/03/2009 22:43:32" Content="    data &lt;- data.frame(x = 1:10,  y1 = 1:10,  y2 = 1:10)&#xD;&#xA;    ggplot(data=data,  aes(x=x)) + geom_smooth(aes(y=y1,  linetype=&quot;y1&quot;))&#xD;&#xA;    ggplot(data=data,  aes(x=x)) + geom_smooth(aes(y=y1,  color=&quot;y1&quot;))&#xD;&#xA;    ggplot(data=data,  aes(x=x)) + geom_smooth(aes(y=y1,  color=&quot;a&quot;,  linetype=&quot;b&quot;))" />
      <Message Id="88365" ParentId="19" UserId="4196" Date="12/09/2009 20:05:33" Content="Fixed in b25b52b8b0f46807186ae51992a9ade67df8f7f6" />
    </Messages>
  </Topic>
  <Topic Id="20" Title="Should be possible to set right = FALSE in stat_bin">
    <Messages>
      <Message Id="0" ParentId="20" UserId="4196" Date="12/03/2009 22:44:26" Content="" />
      <Message Id="87771" ParentId="20" UserId="4196" Date="12/08/2009 23:18:04" Content="Implemented in df77b32b244077702abd51490cf392a4ccd12d86" />
    </Messages>
  </Topic>
  <Topic Id="21" Title="scale_date and scale_datetime should warn if dates not in correct format">
    <Messages>
      <Message Id="0" ParentId="21" UserId="4196" Date="12/03/2009 23:01:09" Content="" />
    </Messages>
  </Topic>
  <Topic Id="22" Title="scale_***_  should not have trans argument">
    <Messages>
      <Message Id="0" ParentId="22" UserId="4196" Date="12/03/2009 23:01:43" Content="Because setting it is confusing." />
      <Message Id="87954" ParentId="22" UserId="4196" Date="12/09/2009 05:21:04" Content="Should remove all scales that are just variants on scale continuous with trans set.  `scale_(x|y)_*` should be built by the accessor builders." />
      <Message Id="2992744" ParentId="22" UserId="4196" Date="12/02/2011 17:05:23" Content="Done in devel." />
    </Messages>
  </Topic>
  <Topic Id="23" Title="only display diagonal line on rect border if size or colour varies">
    <Messages>
      <Message Id="0" ParentId="23" UserId="4196" Date="12/03/2009 23:03:01" Content="" />
      <Message Id="2992741" ParentId="23" UserId="4196" Date="12/02/2011 17:05:13" Content="@Koshke,  another one for you to look at.  " />
      <Message Id="2994633" ParentId="23" UserId="227097" Date="12/02/2011 19:31:11" Content="Is there a simple example?" />
      <Message Id="2995096" ParentId="23" UserId="4196" Date="12/02/2011 20:09:44" Content="Hmmm,  actually I think I might have already fixed this!" />
    </Messages>
  </Topic>
  <Topic Id="24" Title="geom_path &amp; geom_line should have lineEnd parameter">
    <Messages>
      <Message Id="0" ParentId="24" UserId="4196" Date="12/03/2009 23:04:36" Content="To give control over low-level grid params." />
      <Message Id="87704" ParentId="24" UserId="4196" Date="12/08/2009 22:02:58" Content="Fixed in fcbbfc916110adcd8893500a1f114ca1138cbedf." />
    </Messages>
  </Topic>
  <Topic Id="25" Title="facet_wrap needs labeller parameter like facet_grid">
    <Messages>
      <Message Id="0" ParentId="25" UserId="4196" Date="12/03/2009 23:05:07" Content="" />
      <Message Id="5961605" ParentId="25" UserId="78918" Date="05/28/2012 09:10:08" Content="bump?  I would love to have this ... should I try to dig in and write it myself or is it likely to be tricky?" />
      <Message Id="6082283" ParentId="25" UserId="4196" Date="06/03/2012 01:58:10" Content="Hmmm,  it shouldn't be too hard if you follow a parallel path to `facet_grid`.   One roadblock is figuring out what arguments the function should accept." />
      <Message Id="7786039" ParentId="25" UserId="411740" Date="08/16/2012 13:57:38" Content="I'm trying to implent this. However,  I cannot figure out why it doesn't render the parsed labels,  instead I get expression(...).&#xA;Here's my modified code:&#xA;facet_strips.wrap &lt;- function(facet,  panel,  theme) { &#xA;  labeller &lt;- match.fun(facet$labeller)&#xA;  &#xA;  labels_df &lt;- panel$layout[ names(facet$facets) ]&#xA;  labels_df[  ] &lt;- llply(labels_df,  function(df) labeller(names(df),  df))&#xA;  &#xA;  labels &lt;- apply(labels_df,  1,  paste,  collapse=&quot;,  &quot;)&#xA;&#xA;  list(t = llply(labels,  ggstrip,  theme = theme))&#xA; }&#xA;&#xA;What am I missing?" />
      <Message Id="19740953" ParentId="25" UserId="4586120" Date="06/20/2013 09:54:33" Content="Bump.. facet_wrap indeed needs a labeller parameter like facet_grid..." />
      <Message Id="24484768" ParentId="25" UserId="437233" Date="09/16/2013 01:13:45" Content="If +1 is of any value,  +1.  If not,  NULL" />
      <Message Id="26926010" ParentId="25" UserId="682795" Date="10/23/2013 17:37:09" Content=" : +1: " />
      <Message Id="35938636" ParentId="25" UserId="4196" Date="02/24/2014 21:14:40" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="26" Title="hcl colour scale">
    <Messages>
      <Message Id="0" ParentId="26" UserId="4196" Date="12/03/2009 23:05:39" Content="That takes hue,  chroma and luminance as inputs and outputs colour." />
      <Message Id="35938616" ParentId="26" UserId="4196" Date="02/24/2014 21:14:35" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="27" Title="scale should have option not to produce legend">
    <Messages>
      <Message Id="0" ParentId="27" UserId="4196" Date="12/03/2009 23:40:48" Content="" />
      <Message Id="87819" ParentId="27" UserId="4196" Date="12/09/2009 00:13:47" Content="Implemented in 241bc5ce1fd7ddda4d91a866ce43869f25d7e074" />
    </Messages>
  </Topic>
  <Topic Id="28" Title="Store labels in options">
    <Messages>
      <Message Id="0" ParentId="28" UserId="4196" Date="12/03/2009 23:43:27" Content="By default,  scale names should be stored in options.  This will allow simplification of the current default scale production so that scales only need to be added when the plot is drawn,  and fix the following bugs:&#xD;&#xA;&#xD;&#xA; * can not use ylab() to set the label for histograms&#xD;&#xA; * annotate overrides the scale defaults" />
      <Message Id="88296" ParentId="28" UserId="4196" Date="12/09/2009 18:19:02" Content="Implemented in 46d7a80dd00c3ebe6751b608a5fd7b3c2f759ff1" />
    </Messages>
  </Topic>
  <Topic Id="29" Title="Ordinal scales">
    <Messages>
      <Message Id="0" ParentId="29" UserId="4196" Date="12/03/2009 23:45:03" Content="For integers with limited range and ordered factors,  ggplot2 should use ordinal scales.  In particular,  colour should default to an sequential brewer palette,  and shape should use shapes with increasing number of edges." />
      <Message Id="35938606" ParentId="29" UserId="4196" Date="02/24/2014 21:14:33" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="30" Title="coord_flip and geom_hline/geom_vline">
    <Messages>
      <Message Id="0" ParentId="30" UserId="4196" Date="12/03/2009 23:47:58" Content="    qplot(mpg,  wt,  data = mtcars) + geom_vline(xintercept = 20) + coord_flip()&#xA;    qplot(mpg,  wt,  data = mtcars) + geom_hline(yintercept = 5) + coord_flip()" />
      <Message Id="88950" ParentId="30" UserId="4196" Date="12/10/2009 19:27:40" Content="Fixed in 1f37b8db0fb6114bb2fc37a58a27bd51e62f75f5" />
    </Messages>
  </Topic>
  <Topic Id="31" Title="For data,  NULL != data.frame()">
    <Messages>
      <Message Id="0" ParentId="31" UserId="4196" Date="12/03/2009 23:53:45" Content="For example, &#xD;&#xA;&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) + &#xD;&#xA;      geom_point(data = data.frame(),  colour = &quot;red&quot;)&#xD;&#xA;&#xD;&#xA;should display black points.&#xD;&#xA;&#xD;&#xA;This can occur when subsetting and is annoying." />
      <Message Id="5162506" ParentId="31" UserId="86978" Date="04/16/2012 21:08:04" Content="The `map_layout()` function in `panel.r` assumes that if it gets an empty data frame,  then the data should be inherited from `plot_data`. The problem is that there's no way to tell whether the empty data frame is passed in,  or if it was just not specified in the layer. When the geom is not specified,  this is what happens: `layer$new` calls `fortify.NULL()`,  which returns `data.frame()`,  and it's this data frame that can't be distinguished from an empty data frame passed in to the layer.&#xD;&#xA;&#xD;&#xA;One possible solution is to make `fortify.NULL()` add an attribute to the data frame,  and then test for that attribute in `map_layout()`." />
      <Message Id="5163404" ParentId="31" UserId="86978" Date="04/16/2012 21:47:31" Content="The fix I've submitted works for this,  although you need to set `inherit.aes = FALSE`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + geom_point(data = data.frame(),  colour = &quot;red&quot;,  inherit.aes = FALSE)&#xD;&#xA;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="32" Title="Layer with all coordinates set does not work">
    <Messages>
      <Message Id="0" ParentId="32" UserId="4196" Date="12/03/2009 23:55:35" Content="    ggplot(mtcars,  aes(mpg,  wt)) + &#xD;&#xA;      geom_point() + &#xD;&#xA;      geom_rect(xmin = 15,  xmax = 20,  ymin = 3,  ymax = 5)&#xD;&#xA;&#xD;&#xA;vs.&#xD;&#xA;&#xD;&#xA;    ggplot() + &#xD;&#xA;      geom_point(aes(mpg,  wt),  data = mtcars) + &#xD;&#xA;      geom_rect(xmin = 15,  xmax = 20,  ymin = 3,  ymax = 5)" />
      <Message Id="89081" ParentId="32" UserId="4196" Date="12/10/2009 22:39:51" Content="Same underlying issue as #31 - ggplot doesn't know how to work out whether or not there's enough data in the layer for it to display successfully." />
      <Message Id="3031288" ParentId="32" UserId="4196" Date="12/06/2011 11:54:25" Content="Works for me in devel version." />
    </Messages>
  </Topic>
  <Topic Id="33" Title="Ordering across geoms is inconsistent">
    <Messages>
      <Message Id="0" ParentId="33" UserId="4196" Date="12/04/2009 00:01:59" Content="    df &lt;- data.frame( &#xD;&#xA;      FRAME = factor(c(&quot;Loss&quot;,  &quot;Gain&quot;,  &quot;Loss&quot;,  &quot;Gain&quot;)),  &#xD;&#xA;      Mean = c(5.28,  5.23,  4.95,  5.12),  &#xD;&#xA;      FOCUS = factor(c(&quot;Prevention&quot;,  &quot;Prevention&quot;,  &quot;Promotion&quot;,  &quot;Promotion&quot;))&#xD;&#xA;    )&#xD;&#xA;&#xD;&#xA;    dodge &lt;- position_dodge(width=0.90)&#xD;&#xA;    base &lt;- ggplot(df,  aes(FOCUS,  Mean,  fill=FRAME,  colour=FRAME)) + &#xD;&#xA;      geom_point(position=dodge,  size = 4)&#xD;&#xA;&#xD;&#xA;    # Do work:&#xD;&#xA;    base + geom_text(aes(label = Mean),  position = dodge)&#xD;&#xA;    base + geom_bar(position=dodge,  stat=&quot;identity&quot;)&#xD;&#xA;    # Don't work&#xD;&#xA;    base + geom_bar(position=dodge)&#xD;&#xA;    base + geom_boxplot(position=dodge)&#xD;&#xA;" />
      <Message Id="87491" ParentId="33" UserId="4196" Date="12/08/2009 17:19:09" Content="Fixed in d5a04b3a6c77abc3f7609ca5718d40667482957c" />
    </Messages>
  </Topic>
  <Topic Id="34" Title="Order aesthetic does not affect order of dodged groups">
    <Messages>
      <Message Id="0" ParentId="34" UserId="4196" Date="12/04/2009 00:03:14" Content="In the following example,  the groups should be displayed in alphabetical order: gain on the left and loss on the right.&#xD;&#xA;&#xD;&#xA;    df &lt;- data.frame( &#xD;&#xA;      FRAME = factor(c(&quot;Loss&quot;,  &quot;Gain&quot;,  &quot;Loss&quot;,  &quot;Gain&quot;)),  &#xD;&#xA;      Mean = c(5.28,  5.23,  4.95,  5.12),  &#xD;&#xA;      FOCUS = factor(c(&quot;Prevention&quot;,  &quot;Prevention&quot;,  &quot;Promotion&quot;,  &quot;Promotion&quot;))&#xD;&#xA;    )&#xD;&#xA;&#xD;&#xA;    dodge &lt;- position_dodge(width=0.90)&#xD;&#xA;    ggplot(df,  aes(FOCUS,  Mean,  order=FRAME,  colour=FRAME)) + &#xD;&#xA;      geom_point(position=dodge,  size = 4)&#xD;&#xA;" />
      <Message Id="87492" ParentId="34" UserId="4196" Date="12/08/2009 17:19:44" Content="Fixed in d5a04b3a6c77abc3f7609ca5718d40667482957c" />
    </Messages>
  </Topic>
  <Topic Id="35" Title="Faster stat_smooth">
    <Messages>
      <Message Id="0" ParentId="35" UserId="4196" Date="12/04/2009 02:21:33" Content="Exercise 11 of chapter 4 of Simon Woods' GAM book -  having obtained the model matrix and penalty for the smooth from the object returned by e.g. `smooth.construct2(s(x, bs=&quot;cr&quot;), data=list(x=x), knots=NULL)`&#xA;&#xA;Should be faster for the special case needed for `stat_smooth`." />
      <Message Id="35938590" ParentId="35" UserId="4196" Date="02/24/2014 21:14:29" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="36" Title="stat_ecdf">
    <Messages>
      <Message Id="0" ParentId="36" UserId="4196" Date="12/04/2009 02:22:48" Content="Create stat for computing ecdf.  Work with geom_step to create plot of ecdf." />
    </Messages>
  </Topic>
  <Topic Id="37" Title="Add geom_curve to match book">
    <Messages>
      <Message Id="0" ParentId="37" UserId="4196" Date="12/04/2009 02:26:38" Content="Should be `geom_line` + `stat_function`" />
      <Message Id="35938580" ParentId="37" UserId="4196" Date="02/24/2014 21:14:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="38" Title="Legend size calculated incorrectly">
    <Messages>
      <Message Id="0" ParentId="38" UserId="4196" Date="12/04/2009 14:47:02" Content="    dummy &lt;- data.frame(&#xA;           x = rnorm(1000), &#xA;           y = rnorm(1000), &#xA;           z = gl(2,  500,  labels = c(&quot;A rather long label&quot;,  &quot;An even longer&#xA;    label than the first label&quot;))&#xA;    )&#xA;    ggplot(dummy,  aes(x = x,  y = y,  colour = z)) + geom_point()&#xA;    last_plot() + theme_gray(base_size = 4)&#xA;&#xA;Reported by Thierry Onkelinx" />
      <Message Id="88557" ParentId="38" UserId="4196" Date="12/10/2009 01:47:07" Content="Fixed in 2e159380220c975fadbe44b4498f911585412c22" />
    </Messages>
  </Topic>
  <Topic Id="39" Title="coord_polar incorrectly combines expression tick marks">
    <Messages>
      <Message Id="0" ParentId="39" UserId="4196" Date="12/05/2009 17:20:22" Content="    df &lt;- data.frame(x = runif(10) * 2 * pi)&#xD;&#xA;&#xD;&#xA;    base &lt;- ggplot(df,  aes(x,  1)) + &#xD;&#xA;      geom_point() + &#xD;&#xA;      ylim(0, 1.1) + &#xD;&#xA;      coord_polar()&#xD;&#xA;&#xD;&#xA;    breaks &lt;- seq(0,  2 * pi,  pi/2)&#xD;&#xA;    base + scale_x_continuous(limits = range(breaks),  breaks = breaks)&#xD;&#xA;&#xD;&#xA;    labels &lt;- c(&quot;0&quot;,  expression(frac(pi, 2)),  expression(pi), &#xD;&#xA;       expression(frac(3*pi, 2)),  expression(pi))&#xD;&#xA;    base + scale_x_continuous(limits = range(breaks),  &#xD;&#xA;      breaks = breaks,  labels = labels)&#xD;&#xA;    # 0 point converted to string&#xD;&#xA;" />
      <Message Id="89252" ParentId="39" UserId="4196" Date="12/11/2009 05:33:01" Content="Fixed in 6b9da20cc91200c3141ce9aab3f991f57d773a0e" />
    </Messages>
  </Topic>
  <Topic Id="40" Title="scale does not throw error if length of breaks and labels different">
    <Messages>
      <Message Id="0" ParentId="40" UserId="4196" Date="12/05/2009 17:20:57" Content="e.g. `scale_x_continuous(breaks = 1:4,  labels = 1:2)`" />
      <Message Id="87813" ParentId="40" UserId="4196" Date="12/09/2009 00:01:38" Content="Implemented in 08d4538ee9efd2bf0236c70c79443746a6d6ece5" />
    </Messages>
  </Topic>
  <Topic Id="41" Title="Problem with coord_polar,  geom_path and x limits">
    <Messages>
      <Message Id="0" ParentId="41" UserId="4196" Date="12/05/2009 17:31:53" Content="    x &lt;- seq(-5, 5, by=0.1)&#xD;&#xA;    d &lt;- data.frame(x = x,  y = dnorm(x))&#xD;&#xA;&#xD;&#xA;    base &lt;- ggplot(d,  aes(x,  y)) + geom_path() + geom_point() + ylim(0,  0.4)&#xD;&#xA;&#xD;&#xA;    base + coord_polar()&#xD;&#xA;    base + coord_polar() + xlim(-1,  1)&#xD;&#xA;" />
      <Message Id="89255" ParentId="41" UserId="4196" Date="12/11/2009 05:47:16" Content="Key is to drop missing values appropriately.  But what does that mean for lines (drop missing values at start and end?) and how to implement efficiently?" />
      <Message Id="89419" ParentId="41" UserId="4196" Date="12/11/2009 15:12:08" Content="Fixed in 6e27542dc457a7f10f8ef8f233b584f35b38615d" />
    </Messages>
  </Topic>
  <Topic Id="42" Title="Problem with end collision detection in coord_polar">
    <Messages>
      <Message Id="0" ParentId="42" UserId="4196" Date="12/05/2009 17:36:48" Content="    df &lt;- data.frame(x = runif(100) * 360,  y = runif(100))&#xD;&#xA;    base &lt;- ggplot(df,  aes(x,  y)) + geom_point() + coord_polar()&#xD;&#xA;&#xD;&#xA;    base&#xD;&#xA;    base + scale_x_continuous(breaks = c(0,  180,  270))" />
      <Message Id="86440" ParentId="42" UserId="4196" Date="12/07/2009 05:49:37" Content="Fixed in 22744e248584c5f58fd7df8596b0df2ba5efd362" />
    </Messages>
  </Topic>
  <Topic Id="43" Title="coord_polar should have theta and r limits">
    <Messages>
      <Message Id="0" ParentId="43" UserId="4196" Date="12/05/2009 17:37:23" Content="" />
      <Message Id="35938558" ParentId="43" UserId="4196" Date="02/24/2014 21:14:21" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="44" Title="coord_map and geom_tile">
    <Messages>
      <Message Id="0" ParentId="44" UserId="4196" Date="12/05/2009 17:44:32" Content="    library(maps)&#xD;&#xA;    data &lt;- data.frame(&#xD;&#xA;      lat = c(-41, -42, -41, -42), &#xD;&#xA;      lon = c(170, 170, 171, 171), &#xD;&#xA;      var = c(1, 2, 3, 4))&#xD;&#xA;    coast &lt;- data.frame(map(&quot;nz&quot;,  plot=FALSE)[ c(&quot;x&quot;, &quot;y&quot;) ])&#xD;&#xA;&#xD;&#xA;    plot &lt;- ggplot(data, aes(lon,  lat)) + &#xD;&#xA;      geom_tile(aes(fill = var)) +&#xD;&#xA;      geom_polygon(data = coast, aes(x,  y))&#xD;&#xA;    plot #OK&#xD;&#xA;    plot + coord_equal() #OK&#xD;&#xA;    plot + coord_map()" />
      <Message Id="286511" ParentId="44" UserId="18445" Date="06/24/2010 09:49:49" Content="Here is a fix for this and for geom_segment:&#xD;&#xA;&#xD;&#xA;    diff --git a/R/coord-map.r b/R/coord-map.r&#xD;&#xA;    index e62aa2a..b728458 100644&#xD;&#xA;    --- a/R/coord-map.r&#xD;&#xA;    +++ b/R/coord-map.r&#xD;&#xA;    @@ -16, 11 +16, 30 @@ CoordMap &lt;- proto(Coord,  { &#xD;&#xA;       muncher &lt;- function(.) !.$fast&#xD;&#xA;   &#xD;&#xA;       transform &lt;- function(.,  data,  details) { &#xD;&#xA;    -    trans &lt;- .$mproject(data$x,  data$y,  details$orientation)&#xD;&#xA;    -    out &lt;- cunion(trans[ c(&quot;x&quot;,  &quot;y&quot;) ],  data)&#xD;&#xA;    -    &#xD;&#xA;    -    out$x &lt;- rescale(out$x,  0:1,  details$x.range,  clip = FALSE)&#xD;&#xA;    -    out$y &lt;- rescale(out$y,  0:1,  details$y.range,  clip = FALSE)&#xD;&#xA;    +&#xD;&#xA;    +    project_and_scale &lt;- function(xname,  yname,  data,  details) { &#xD;&#xA;    +      trans &lt;- .$mproject(data[ , xname ],  data[ , yname ],  details$orientation)&#xD;&#xA;    +      trans &lt;- rename(trans,  c(x=xname,  y=yname))&#xD;&#xA;    +      out &lt;- cunion(trans[ c(xname, yname) ],  data)&#xD;&#xA;    +&#xD;&#xA;    +      out[ , xname ] &lt;- rescale(out[ , xname ],  0:1,  details$x.range,  clip = FALSE)&#xD;&#xA;    +      out[ , yname ] &lt;- rescale(out[ , yname ],  0:1,  details$y.range,  clip = FALSE)&#xD;&#xA;    +&#xD;&#xA;    +      out&#xD;&#xA;    +     }&#xD;&#xA;    +&#xD;&#xA;    +    # always scale at least x and y&#xD;&#xA;    +    out &lt;- project_and_scale(x=&quot;x&quot;,  y=&quot;y&quot;,  data=data,  details=details)&#xD;&#xA;    +&#xD;&#xA;    +    # aesthetics for other geoms (segment,  tile,  etc.)&#xD;&#xA;    +    if (all(c(&quot;xend&quot;, &quot;yend&quot;) %in% names(data))) { &#xD;&#xA;    +      out &lt;- project_and_scale(x=&quot;xend&quot;,  y=&quot;yend&quot;,  data=out,  details=details)&#xD;&#xA;    +     } else if (all(c(&quot;xmin&quot;, &quot;xmax&quot;, &quot;ymin&quot;, &quot;ymax&quot;) %in% names(data))) { &#xD;&#xA;    +      out &lt;- project_and_scale(x=&quot;xmin&quot;,  y=&quot;ymin&quot;,  data=out,  details=details)&#xD;&#xA;    +      out &lt;- project_and_scale(x=&quot;xmax&quot;,  y=&quot;ymax&quot;,  data=out,  details=details)&#xD;&#xA;    +     }&#xD;&#xA;    +    # should also scale xintercept and yintercept for geom_vline and geom_hline&#xD;&#xA;    +&#xD;&#xA;         out&#xD;&#xA;        }&#xD;&#xA;   &#xD;&#xA;&#xD;&#xA;" />
      <Message Id="286516" ParentId="44" UserId="18445" Date="06/24/2010 09:53:51" Content="NB: for geom_tile it stills plots rectangles when it should plot polygons if the projection bends parallels and meridians. e.g. from the example above&#xA;&#xA;    plot + coord_map(project='azequalarea', orientation=c(-36.92, 174.6, 0))&#xA;&#xA;But this is because geom_tile uses GeomRect internally when it should use polygonGrob (I think)" />
      <Message Id="286643" ParentId="44" UserId="4196" Date="06/24/2010 13:27:33" Content="Have you tried `coord_map(fast = FALSE)`?  I think this will resolve the problems you are seeing." />
      <Message Id="286645" ParentId="44" UserId="18445" Date="06/24/2010 13:29:04" Content="It does,  but with nothing but the simplest maps,  it is unbearably slow." />
      <Message Id="286647" ParentId="44" UserId="4196" Date="06/24/2010 13:31:00" Content="Well that seems to have some bugs in it,  but in principle it should work.  The problem here is that the munching code is not very sophisticated,  simply breaking each line segment into 50 pieces.  This isn't so helpful for maps since they tend to have very fine resolution already,  and so it's turned off by default - but this causes problems for other geoms. `fast = F` should turn on munching,  but obviously has some bugs associated with it." />
      <Message Id="286658" ParentId="44" UserId="4196" Date="06/24/2010 13:35:42" Content="I think the key to a solution here is to improve the munching code to break into pieces depending on the length of the line.  Looking at `Coord$munch` also shows some considerable room for optimisation." />
      <Message Id="286661" ParentId="44" UserId="18445" Date="06/24/2010 13:36:33" Content="This makes me realize,  however,  that the correct way to go with non-square projections is indeed `fast=FALSE` because even transforming the four corners of a polygon or the end points of a line would not be sufficient (the boundaries need to be curved also).&#xD;&#xA;&#xD;&#xA;The map I am trying to plot has 4800 points so it is not surprising that breaking all those segments in 50 is slow. Maybe munching could be made a bit clever and cut only large segments. Ideally it it should decide on the number of cuts based on the length of the segment." />
      <Message Id="286663" ParentId="44" UserId="18445" Date="06/24/2010 13:37:01" Content="oh,  ok,  you were faster." />
      <Message Id="287589" ParentId="44" UserId="4196" Date="06/25/2010 03:40:16" Content="Fixed in 85c12ac4f7b3527aa1775b4979bfdb87a31112c6 (although other bugs were introduced :( )" />
      <Message Id="287655" ParentId="44" UserId="18445" Date="06/25/2010 06:22:02" Content="&#xD;&#xA;Looks like it's working,  fast enough. There is a small backward compatibility problem though:&#xD;&#xA;&#xD;&#xA;	library(maps)&#xD;&#xA;	data &lt;- data.frame(&#xD;&#xA;	  lat = c(-41, -42, -41, -42), &#xD;&#xA;	  lon = c(170, 170, 171, 171), &#xD;&#xA;	  var = c(1, 2, 3, 4))&#xD;&#xA;	coast &lt;- data.frame(map(&quot;nz&quot;,  plot=FALSE)[ c(&quot;x&quot;, &quot;y&quot;) ])&#xD;&#xA;&#xD;&#xA;	plot &lt;- ggplot(data, aes(lon,  lat)) + &#xD;&#xA;	  geom_tile(aes(fill = var)) +&#xD;&#xA;	  geom_polygon(data = coast, aes(x,  y))&#xD;&#xA;	plot + coord_map() # OK&#xD;&#xA;	plot + coord_map(fast=FALSE)&#xD;&#xA;	&#xD;&#xA;gives&#xD;&#xA;&#xD;&#xA;	Error in mapproject(list(x = c(165.787780761719,  166.060911840322,  166.334042918925,   : &#xD;&#xA;	  mercator projection requires 0 parameter&#xD;&#xA;	&#xD;&#xA;The problem is similar for other projections." />
      <Message Id="287659" ParentId="44" UserId="18445" Date="06/25/2010 06:33:51" Content="It does not breaks segments apart though:&#xA;&#xA;	library(maps)&#xA;	coast &lt;- data.frame(map(&quot;nz&quot;,  plot=FALSE)[ c(&quot;x&quot;, &quot;y&quot;) ])&#xA;	data &lt;- data.frame(&#xA;	  lat = c(-41, -42, -41, -42), &#xA;	  lon = c(170, 170, 171, 171), &#xA;	  var = c(1, 2, 3, 4)&#xA;	)&#xA;&#xA;	plot &lt;- ggplot(data, aes(x=lon,  y=lat)) + &#xA;	  geom_segment(aes(xend=lon+1,  yend=lat+1)) +&#xA;	  geom_polygon(data = coast, aes(x,  y))&#xA;	plot #OK&#xA;	plot + coord_map() # joined segments&#xA;	ggplot(data, aes(x=lon,  y=lat)) + &#xA;	  geom_segment(aes(xend=lon+1,  yend=lat+1,  colour=factor(var))) +&#xA;	  geom_polygon(data = coast, aes(x,  y)) +&#xA;	  coord_map() # this works&#xA;&#xA;It looks like the segment geoms needs to set the groups." />
      <Message Id="289643" ParentId="44" UserId="4196" Date="06/27/2010 13:58:49" Content="Both of these problems are now fixed.  988292903dd76982dd0bc3b5e7d3cc64bf7c9b20 and cea2369c85f8a5d87b55f32973e52ec017a42f14." />
    </Messages>
  </Topic>
  <Topic Id="45" Title="coord_flip and free scales don't work">
    <Messages>
      <Message Id="0" ParentId="45" UserId="4196" Date="12/05/2009 17:45:16" Content="Although in principle it should be fairly straightforward." />
      <Message Id="501756" ParentId="45" UserId="112610" Date="10/29/2010 10:13:58" Content="Hi Hadley,  &#xD;&#xA;&#xD;&#xA;I was wondering if you could offer any work-arounds for this issue. I found myself multiple times in this situation.&#xD;&#xA;&#xD;&#xA;thanks, &#xD;&#xA;eli" />
      <Message Id="505115" ParentId="45" UserId="4196" Date="10/30/2010 23:51:19" Content="Currently no work around sorry - it requires a rather large rewrite of the layout system." />
      <Message Id="2992727" ParentId="45" UserId="4196" Date="12/02/2011 17:04:07" Content="Duplicate of #95" />
    </Messages>
  </Topic>
  <Topic Id="46" Title="geom_abline doesn't work with scale_log10">
    <Messages>
      <Message Id="0" ParentId="46" UserId="4196" Date="12/05/2009 17:50:50" Content="    myd &lt;- data.frame(&#xD;&#xA;      myvar = c(1, 5, 10, 50, 100, 500, 1000, 5000, 10000), &#xD;&#xA;      myvarb = c(1:9)&#xD;&#xA;    )&#xD;&#xA;&#xD;&#xA;    base &lt;- ggplot(myd,  aes(myvarb,  myvar))+&#xD;&#xA;      geom_point()+&#xD;&#xA;      geom_abline(intercept = 1,  slope = 100)&#xD;&#xA;&#xD;&#xA;    base + scale_y_log10()&#xD;&#xA;" />
      <Message Id="89085" ParentId="46" UserId="4196" Date="12/10/2009 22:43:52" Content="I'm not even really sure what it should display - i.e. should it display a curved line? The slope parameter doesn't really have a lot of meaning in log coordinates.  Similarly the default intercept of 0 is not very useful." />
      <Message Id="5253037" ParentId="46" UserId="86978" Date="04/20/2012 21:00:24" Content="It works with `coord_trans(y=&quot;log10&quot;)` :&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;base + coord_trans(y=&quot;log10&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I agree,  this is poorly defined for scales. Maybe it should give a warning message." />
      <Message Id="7639051" ParentId="46" UserId="1786188" Date="08/10/2012 10:40:31" Content="Could `slope` not be interpreted as `x*slope`,  thus resulting in the curved line `y~log(slope*x)`" />
      <Message Id="35938541" ParentId="46" UserId="4196" Date="02/24/2014 21:14:18" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="47" Title="scale_shape and scale_size are named inconsistently">
    <Messages>
      <Message Id="0" ParentId="47" UserId="4196" Date="12/05/2009 17:58:58" Content="This makes it impossible to set defaults `set_default_scale(&quot;shape&quot;, &quot;discrete&quot;,  &quot;manual&quot;, value=c(1))` and adds ugly special case code to `Scales$add_defaults`." />
      <Message Id="88310" ParentId="47" UserId="4196" Date="12/09/2009 18:47:23" Content="Fixed in 00d01986e0dadd98ee0a9dc6400ece7c41be66f3" />
    </Messages>
  </Topic>
  <Topic Id="48" Title="Dates not correctly transformed when used as colour scale">
    <Messages>
      <Message Id="0" ParentId="48" UserId="4196" Date="12/05/2009 18:00:22" Content="    a &lt;- structure(list(date = structure(c(1227633710,  1227633725,  1227633740,  &#xD;&#xA;    1227633756,  1227633771,  1227633786,  1227633802,  1227633818,  1227633833,  &#xD;&#xA;    1227633848,  1227633863,  1227633878),  class = c(&quot;POSIXt&quot;,  &quot;POSIXct&quot;&#xD;&#xA;    ),  tzone = &quot;&quot;),  x = c(10.2516422,  11.1053127,  11.6594761,  13.2709195,  &#xD;&#xA;    14.0127093,  14.7598268,  14.6802017,  15.2590637,  15.5089719,  15.5101305,  &#xD;&#xA;    15.1716798,  14.9050077),  y = c(-11.5090033,  -10.8087639,  -10.0120475,  &#xD;&#xA;    -7.9856268,  -6.5551218,  -5.1593914,  -4.1750486,  -2.3780065,  -0.5245896,  &#xD;&#xA;    1.3263083,  3.3031301,  4.5791333)),  .Names = c(&quot;date&quot;,  &quot;x&quot;,  &quot;y&quot;&#xD;&#xA;    ),  row.names = c(NA,  -12L),  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;    ggplot(a) + geom_point(aes(x=x,  y=y,  colour=date))" />
    </Messages>
  </Topic>
  <Topic Id="49" Title="Better interaction with theme font size and pointsize">
    <Messages>
      <Message Id="0" ParentId="49" UserId="4196" Date="12/05/2009 18:06:54" Content="I'm not sure what to do here,  but it should at least be documented.&#xD;&#xA;&#xD;&#xA;    p = qplot(runif(5), runif(5)) + opts(title=&quot;A dumb plot&quot;)&#xD;&#xA;&#xD;&#xA;    # this is the default&#xD;&#xA;    theme_set(theme_grey(12))&#xD;&#xA;    quartz(width=5,  height=4,  pointsize=12)&#xD;&#xA;    p&#xD;&#xA;&#xD;&#xA;    # this has display issues (overwriting in legends etc.) because the&#xD;&#xA;    # font size is too large compared to what the device &quot;expects&quot;&#xD;&#xA;    theme_set(theme_grey(25))&#xD;&#xA;    quartz(width=5,  height=4,  pointsize=8)&#xD;&#xA;    p&#xD;&#xA;&#xD;&#xA;    # when the pointsize is set accordingly,  the proportions are&#xD;&#xA;    # &quot;harmonious&quot; again (well,  it still does not look great that's because&#xD;&#xA;    # 25 is much to big for this size of plot)&#xD;&#xA;    theme_set(theme_grey(25))&#xD;&#xA;    quartz(width=5,  height=4,  pointsize=25)&#xD;&#xA;    p&#xD;&#xA;&#xD;&#xA;    # Ahhh,  that's better&#xD;&#xA;    theme_set(theme_grey(10))&#xD;&#xA;    quartz(width=5,  height=4,  pointsize=10)&#xD;&#xA;    p" />
      <Message Id="35938528" ParentId="49" UserId="4196" Date="02/24/2014 21:14:14" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="50" Title="geom_text should be able to produce expressions by parsing text">
    <Messages>
      <Message Id="0" ParentId="50" UserId="4196" Date="12/05/2009 18:12:51" Content="    mydata &lt;- data.frame(x = 1:10,  y = 1:10)&#xD;&#xA;&#xD;&#xA;    ggplot(mydata,  aes(x,  y)) +&#xD;&#xA;      geom_point() +&#xD;&#xA;      annotate(&quot;text&quot;,  x = 6,  y = 7,  label = &quot;beta[ 1 ] == 1&quot;,  parse = T)&#xD;&#xA;" />
      <Message Id="87654" ParentId="50" UserId="4196" Date="12/08/2009 20:54:44" Content="Implemented in f284e5189b65dd130dd995de98d4334daaa683a3" />
    </Messages>
  </Topic>
  <Topic Id="51" Title="Better legends for logical variables">
    <Messages>
      <Message Id="0" ParentId="51" UserId="4196" Date="12/05/2009 18:14:04" Content="E.g. weekday and !weekday,  instead of Weekday: TRUE &amp; FALSE." />
      <Message Id="35938512" ParentId="51" UserId="4196" Date="02/24/2014 21:14:10" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="52" Title="Should be able to select font family in theme">
    <Messages>
      <Message Id="0" ParentId="52" UserId="4196" Date="12/05/2009 18:16:16" Content="" />
      <Message Id="2992709" ParentId="52" UserId="4196" Date="12/02/2011 17:02:41" Content="Fixed in devel." />
    </Messages>
  </Topic>
  <Topic Id="53" Title="Facetting by variable with same name as aesthetic">
    <Messages>
      <Message Id="0" ParentId="53" UserId="4196" Date="12/05/2009 18:19:09" Content="For example:&#xA;&#xA;    mtcars$size &lt;- mtcars$cyl&#xA;    qplot(mpg,  wt,  data = mtcars) + facet_wrap(~ size)" />
      <Message Id="1714094" ParentId="53" UserId="463252" Date="08/02/2011 23:09:46" Content="Looks like this one is fixed in the develop branch.  &#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;mtcars$size &lt;- mtcars$cyl&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + facet_wrap(~ size)&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + facet_wrap(~ cyl)&#xD;&#xA;&#xD;&#xA;gbs &lt;- ggplot_build(qplot(mpg,  wt,  data=mtcars) + facet_wrap(~ size))&#xD;&#xA;gbc &lt;- ggplot_build(qplot(mpg,  wt,  data=mtcars) + facet_wrap(~ cyl))&#xD;&#xA;all.equal(gbs,  gbc)&#xD;&#xA;gbs[ [ 2 ] ][ [ 1 ] ]&#xD;&#xA;gbc[ [ 2 ] ][ [ 1 ] ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;give two plots that look alike and&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; mtcars$size &lt;- mtcars$cyl&#xD;&#xA;&gt; qplot(mpg,  wt,  data = mtcars) + facet_wrap(~ size)&#xD;&#xA;&gt; qplot(mpg,  wt,  data = mtcars) + facet_wrap(~ cyl)&#xD;&#xA;&gt; &#xD;&#xA;&gt; gbs &lt;- ggplot_build(qplot(mpg,  wt,  data=mtcars) + facet_wrap(~ size))&#xD;&#xA;&gt; gbc &lt;- ggplot_build(qplot(mpg,  wt,  data=mtcars) + facet_wrap(~ cyl))&#xD;&#xA;&gt; all.equal(gbs,  gbc)&#xD;&#xA;[ 1 ] &quot;Component 2: Component 1: Names: 1 string mismatch&quot;&#xD;&#xA;&gt; gbs[ [ 2 ] ][ [ 1 ] ]&#xD;&#xA;  PANEL ROW COL size SCALE_X SCALE_Y AXIS_X AXIS_Y&#xD;&#xA;2     1   1   1    4       1       1   TRUE   TRUE&#xD;&#xA;1     2   1   2    6       1       1   TRUE  FALSE&#xD;&#xA;3     3   1   3    8       1       1   TRUE  FALSE&#xD;&#xA;&gt; gbc[ [ 2 ] ][ [ 1 ] ]&#xD;&#xA;  PANEL ROW COL cyl SCALE_X SCALE_Y AXIS_X AXIS_Y&#xD;&#xA;2     1   1   1   4       1       1   TRUE   TRUE&#xD;&#xA;1     2   1   2   6       1       1   TRUE  FALSE&#xD;&#xA;3     3   1   3   8       1       1   TRUE  FALSE&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think this bug can be closed." />
      <Message Id="1726175" ParentId="53" UserId="4196" Date="08/04/2011 11:31:41" Content="Good point - this was one of the reasons for the big facetting rewrite." />
    </Messages>
  </Topic>
  <Topic Id="54" Title="geom_contour should create polygons">
    <Messages>
      <Message Id="0" ParentId="54" UserId="4196" Date="12/08/2009 21:44:50" Content="" />
      <Message Id="87697" ParentId="54" UserId="4196" Date="12/08/2009 21:53:26" Content="Currently it creates lines,  which means that you can't use them to create a filled contour plot." />
      <Message Id="6815679" ParentId="54" UserId="4196" Date="07/06/2012 20:37:41" Content="http://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-points-are-in-clockwise-order" />
      <Message Id="35938498" ParentId="54" UserId="4196" Date="02/24/2014 21:14:07" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="55" Title="Should throw error if any set aesthetics are of length &gt; 1">
    <Messages>
      <Message Id="0" ParentId="55" UserId="4196" Date="12/09/2009 05:43:56" Content="It would prevent a lot of potential errors" />
      <Message Id="88314" ParentId="55" UserId="4196" Date="12/09/2009 18:53:43" Content="Implemented in 20a8a4714fe7f545270846cc7e11a4b171036c8f" />
      <Message Id="17949478" ParentId="55" UserId="463252" Date="05/15/2013 16:21:26" Content="At least in some circumstance,  aesthetics can still be set with length greater than 1 without an error being thrown. See,  for instance,  the answers surrounding this StackOverflow question involving `geom_hline`:&#xD;&#xA;http://stackoverflow.com/q/16567279/892313&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="56" Title="Some times try_require doesn't work.">
    <Messages>
      <Message Id="0" ParentId="56" UserId="4196" Date="12/10/2009 22:02:34" Content="e.g. in my documentation script,  and for Indrek Seppo on ubuntu." />
      <Message Id="89093" ParentId="56" UserId="165816" Date="12/10/2009 22:47:39" Content="I changed the quietly=TRUE to FALSE in try_require and tracebacked the error. Cant really read anything out of it myself though.&#xA;&lt;pre&gt;&lt;&lt;code&gt; &#xA;&gt; try_require&#xA;function (package)&#xA;{ &#xA;available &lt;- suppressMessages(suppressWarnings(sapply(package, &#xA;  require,  quietly = FALSE,  character.only = TRUE,  warn.conflicts = FALSE)))&#xA; missing &lt;- package[ !available ]&#xA; if (length(missing) &gt; 0)&#xA; stop(paste(package,  collapse = &quot;,  &quot;),  &quot; package required for this functionality.  Please install and try again.&quot;, &#xA;  call. = FALSE)&#xA; }&#xA;&gt; msamp &lt;- movies[ sample(nrow(movies),  1000),   ]&#xA;&gt; m &lt;- ggplot(msamp,  aes(y=rating,  x=year)) + geom_point()&#xA;&gt; m + stat_quantile()&#xA;Error in do.call(&quot;layer&quot;,  list(mapping = mapping,  data = data,  geom = geom,   :&#xA;  object 'rq' not found&#xA;&gt; traceback()&#xA;4: do.call(&quot;layer&quot;,  list(mapping = mapping,  data = data,  geom = geom, &#xA; stat = .,  position = position,  ...))&#xA;3: get(&quot;new&quot;,  env = StatQuantile,  inherits = TRUE)(StatQuantile, &#xA;  ...)&#xA;2: StatQuantile$new(mapping = mapping,  data = data,  geom = geom, &#xA; position = position,  quantiles = quantiles,  formula = formula, &#xA; method = method,  na.rm = na.rm,  ...)&#xA;1: stat_quantile()&#xA;&#xA;&lt;/code&gt; &lt;/pre&gt;&#xA;&gt;" />
      <Message Id="89095" ParentId="56" UserId="4196" Date="12/10/2009 22:51:06" Content="That's just the can't find package error,  so it's not really helpful." />
      <Message Id="2992700" ParentId="56" UserId="4196" Date="12/02/2011 17:02:07" Content="Not reproducible,  and haven't seen it lately,  so closing." />
    </Messages>
  </Topic>
  <Topic Id="57" Title="Use usual text labels with log scales">
    <Messages>
      <Message Id="0" ParentId="57" UserId="4196" Date="12/10/2009 22:26:25" Content="Should be able to tell the transformer not to use fancy expressions,  just regular numbers." />
      <Message Id="671791" ParentId="57" UserId="557951" Date="01/12/2011 13:36:51" Content="I think it is a bug,  not a feature(-request). The formatter function is actually called but gets a NULL argument instead of the breaks. Thus it has nothing to format..." />
      <Message Id="671818" ParentId="57" UserId="4196" Date="01/12/2011 13:52:29" Content="This is fixed in the devel version." />
    </Messages>
  </Topic>
  <Topic Id="58" Title="stat_smooth fails when not enough data">
    <Messages>
      <Message Id="0" ParentId="58" UserId="4196" Date="12/22/2009 11:58:45" Content="    data &lt;- data.frame(&#xD;&#xA;      x = rnorm(20),  &#xD;&#xA;      y = rnorm(20),  &#xD;&#xA;      g = factor(c(rep(&quot;A&quot;,  2),  rep(&quot;B&quot;,  17),  &quot;C&quot;)))&#xD;&#xA;  &#xD;&#xA;    ggplot(data,  aes(x,  y)) + &#xD;&#xA;      geom_point() +&#xD;&#xA;      geom_smooth(method=&quot;lm&quot;,  se=FALSE) +&#xD;&#xA;      facet_grid(. ~ g)&#xD;&#xA;" />
      <Message Id="291597" ParentId="58" UserId="4196" Date="06/29/2010 01:05:27" Content="Works in devel branch." />
      <Message Id="377544" ParentId="58" UserId="379847" Date="08/29/2010 16:26:56" Content="Is it supposed to be fixed in release 0.8.7?" />
      <Message Id="379373" ParentId="58" UserId="4196" Date="08/30/2010 18:50:49" Content="It'll be fixed in 0.8.9" />
    </Messages>
  </Topic>
  <Topic Id="59" Title="Text labels no longer left aligned (0.8.5)">
    <Messages>
      <Message Id="0" ParentId="59" UserId="4196" Date="12/28/2009 09:41:48" Content="" />
      <Message Id="97973" ParentId="59" UserId="4196" Date="12/28/2009 09:42:19" Content="    dsmall &lt;- diamonds[ sample(nrow(diamonds),  100),   ]&#xD;&#xA;    (d &lt;- qplot(carat,  price,  data=dsmall,  shape=cut))" />
      <Message Id="102313" ParentId="59" UserId="4196" Date="01/05/2010 21:34:52" Content="Fixed in b306970685263f7f5b29a686d01571bfcb7b5c00" />
    </Messages>
  </Topic>
  <Topic Id="60" Title="geom_text should support all grid.text parameters">
    <Messages>
      <Message Id="0" ParentId="60" UserId="4196" Date="01/02/2010 21:59:01" Content="e.g. fontfamily,  fontface,  lineheight" />
      <Message Id="837151" ParentId="60" UserId="227097" Date="03/05/2011 06:37:09" Content="For CJK locale,  this feature,  especially fonfamily,  is necessary because we have no way to change the font so as to correctly display CJK characters other than grid.gedit after plot.&#xD;&#xA;&#xD;&#xA;Now I am just implementing this.&#xD;&#xA;One problem is that available fontfamilies depends on devices.&#xD;&#xA;So,  basically there are two alternatives:&#xD;&#xA;1) user need directly specifies the name of fontfamily&#xD;&#xA;2) support some automatic look up.&#xD;&#xA;&#xD;&#xA;In the case of 1),  data need includes family name like this:&#xD;&#xA;d &lt;- data.frame(x=1:3,  y=1:3,  fn=c(&quot;mono&quot;,  &quot;sans&quot;,  &quot;serif&quot;))&#xD;&#xA;this is similar to &quot;label&quot; param.&#xD;&#xA;&#xD;&#xA;In the case of 2),  some default mapping &#xD;&#xA;d &lt;- data.frame(x=1:3,  y=1:3,  fn=1:3)&#xD;&#xA;and like this:&#xD;&#xA;scale_family &lt;- function(...) { &#xD;&#xA;  nfamily &lt;- length(quartzFonts())&#xD;&#xA;  namesfamily &lt;- names(quartzFonts())&#xD;&#xA;  discrete_scale(&quot;family&quot;,  &quot;family_d&quot;,  function(n)namesfamily[ (1:n)%%nfamily+1 ])&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;this is similar to &quot;shape&quot; param,  but need look up valid device.&#xD;&#xA;&#xD;&#xA;Do you have any idea?&#xD;&#xA;&#xD;&#xA;Thanks, &#xD;&#xA;&#xD;&#xA;kohske&#xD;&#xA;" />
      <Message Id="839911" ParentId="60" UserId="4196" Date="03/06/2011 15:12:38" Content="I'd recommend going with 1 - whatever the user supplies is directly passed on to grid.text." />
    </Messages>
  </Topic>
  <Topic Id="61" Title="Tick marks placed incorrectly with coord_equal">
    <Messages>
      <Message Id="0" ParentId="61" UserId="4196" Date="01/02/2010 22:48:42" Content="    graafikuks&lt;-data.frame(x=c(0:5),  y=c(5:0))&#xD;&#xA;    p &lt;- ggplot(graafikuks,  aes(x,  y))&#xD;&#xA;    p &lt;- p +geom_point()&#xD;&#xA;    p &lt;- p + coord_equal()&#xD;&#xA;    p" />
      <Message Id="102320" ParentId="61" UserId="4196" Date="01/05/2010 21:42:33" Content="Fixed in 72fcf4173d0bf1cf54bcba5b4246c7c0d1614875" />
    </Messages>
  </Topic>
  <Topic Id="62" Title="coord_map should have xlim and ylim parameters">
    <Messages>
      <Message Id="0" ParentId="62" UserId="4196" Date="01/06/2010 21:45:38" Content="" />
      <Message Id="286488" ParentId="62" UserId="18445" Date="06/24/2010 09:32:00" Content="I think this can be closed: they are in since 8e46b93a9f890f58b8957c52a313a332955b1d47&#xD;&#xA;&#xD;&#xA;Cool!" />
      <Message Id="286619" ParentId="62" UserId="4196" Date="06/24/2010 12:57:43" Content="Good point!" />
    </Messages>
  </Topic>
  <Topic Id="63" Title="grid.newpage() does not work with cairo_pdf">
    <Messages>
      <Message Id="0" ParentId="63" UserId="177541" Date="01/07/2010 12:36:12" Content="When writing multiple pages to a cairo_pdf device and paginating with grid.newpage() only the last page is retained in the pdf file.  Workaround: use the pdf device (some functionality may be lost).&#xD;&#xA;&#xD;&#xA;require(&quot;ggplot2&quot;)&#xD;&#xA;x&lt;-1:10&#xD;&#xA;y&lt;-x^2&#xD;&#xA;df&lt;-data.frame(x, y)&#xD;&#xA;&#xD;&#xA;cairo_pdf(&quot;cairo_pdf.pdf&quot;,  width=5,  height=5)&#xD;&#xA;ggplot(df) + aes(x, y) + geom_point() + opts(title=&quot;plot 1&quot;)&#xD;&#xA;grid.newpage()&#xD;&#xA;ggplot(df) + aes(x, y) + geom_point() + opts(title=&quot;plot 2&quot;)&#xD;&#xA;grid.newpage()&#xD;&#xA;ggplot(df) + aes(x, y) + geom_point() + opts(title=&quot;plot 3&quot;)&#xD;&#xA;dev.off()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;pdf(&quot;pdf_pdf.pdf&quot;,  width=5,  height=5)&#xD;&#xA;ggplot(df) + aes(x, y) + geom_point() + opts(title=&quot;plot 1&quot;)&#xD;&#xA;grid.newpage()&#xD;&#xA;ggplot(df) + aes(x, y) + geom_point() + opts(title=&quot;plot 2&quot;)&#xD;&#xA;grid.newpage()&#xD;&#xA;ggplot(df) + aes(x, y) + geom_point() + opts(title=&quot;plot 3&quot;)&#xD;&#xA;dev.off()&#xD;&#xA;" />
      <Message Id="104307" ParentId="63" UserId="177541" Date="01/07/2010 12:51:01" Content="R version 2.9.0 (2009-04-17) &#xD;&#xA;x86_64-unknown-linux-gnu &#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=C;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 8 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.8.5 digest_0.4.2  reshape_0.8.3 plyr_0.1.9    proto_0.3-8  &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] tools_2.9.0&#xD;&#xA;" />
      <Message Id="104396" ParentId="63" UserId="4196" Date="01/07/2010 15:36:21" Content="Hi Mark, &#xA;&#xA;This isn't a ggplot2 bug.  I'd recommend sending to r-devel since it seems like a bug with cairo_pdf&#xA;&#xA;Hadley" />
      <Message Id="104428" ParentId="63" UserId="177541" Date="01/07/2010 16:29:10" Content="Sorry about that!  For some reason I was thinking grid was part of ggplot2.  Maybe another step in your reproducibility process;-)" />
    </Messages>
  </Topic>
  <Topic Id="64" Title="Non-finite position fails to plot / causes spurious warnings">
    <Messages>
      <Message Id="0" ParentId="64" UserId="4196" Date="01/08/2010 19:33:28" Content="Presumably related to calculating &#xD;&#xA;&#xD;&#xA;    nber.dates &lt;- structure(list(Start = structure(c(1430,  3683,  4230,  7517,  11413,  13879),  class = &quot;Date&quot;),  End = structure(c(1915,  3864,  4716,  7759,  11656,  NA),  class = &quot;Date&quot;)),  .Names = c (&quot;Start&quot;,  &quot;End&quot;),  row.names = 28:33,  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;    # Doesn't plot&#xD;&#xA;    ggplot(aes(date,  unemploy),  data = economics) + &#xD;&#xA;      geom_rect(aes(NULL,  NULL,  xmin = Start,  xmax = End,  &#xD;&#xA;        ymin = -Inf,  ymax = Inf),  data = nber.dates)&#xD;&#xA;    &#xD;&#xA;    # Produces spurious warnings&#xD;&#xA;    last_plot() + geom_line()" />
      <Message Id="106262" ParentId="64" UserId="4196" Date="01/08/2010 19:34:07" Content="Second case fixed in 9d77372931dfe634d6c128def51eeb7ae494d532" />
      <Message Id="2992690" ParentId="64" UserId="4196" Date="12/02/2011 17:01:18" Content="Works in devel version." />
      <Message Id="4513539" ParentId="64" UserId="73663" Date="03/15/2012 04:01:12" Content="This has started to happen again after upgrading to 0.9.0,  although now,  adding `geom_blank` before `geom_rect` no longer suppresses the warnings." />
      <Message Id="5249075" ParentId="64" UserId="4196" Date="04/20/2012 17:24:58" Content="Now I don't see think the first case should work - the position scales only see data as it is rendered by the layers and there is no x data on that plot.  Adding `geom_blank` should make it work without errors though - I'll look into that." />
      <Message Id="5249302" ParentId="64" UserId="4196" Date="04/20/2012 17:37:56" Content="Fixed in https://github.com/hadley/scales/commit/9ede0c2c1e6e1cd0c357ec5a1a304b0d200c1f4a" />
    </Messages>
  </Topic>
  <Topic Id="65" Title="Incorrect facet_grid labels">
    <Messages>
      <Message Id="0" ParentId="65" UserId="4196" Date="01/08/2010 19:38:25" Content="    d &lt;- data.frame(&#xD;&#xA;      a = rep(c(&quot;a&quot;,  &quot;A&quot;),  4),  &#xD;&#xA;      b = rep(c(&quot;b&quot;,  &quot;B&quot;),  each = 4),  &#xD;&#xA;      c = rep(c(&quot;c&quot;,  &quot;c&quot;,  &quot;C&quot;,  &quot;C&quot;),   2),   &#xD;&#xA;      x = 1:8,  &#xD;&#xA;      y = 1:8)&#xD;&#xA;    qplot(x,  y,  data = d) + facet_grid(a+b~c)" />
      <Message Id="542993" ParentId="65" UserId="4196" Date="11/15/2010 17:44:29" Content="Fixed,  thanks to Koshke." />
    </Messages>
  </Topic>
  <Topic Id="66" Title="Use grDevices::n2mfrow to compute default nrow and ncol in facet_wrap">
    <Messages>
      <Message Id="0" ParentId="66" UserId="4196" Date="01/11/2010 14:45:18" Content="Thanks to Baptiste for the suggestion." />
      <Message Id="240166" ParentId="66" UserId="4196" Date="05/13/2010 13:05:55" Content="Fixed in 5c9cffe306268d789b4b6e6153edfda4dd97f80d" />
    </Messages>
  </Topic>
  <Topic Id="67" Title="Extract breaks computation out of bin()">
    <Messages>
      <Message Id="0" ParentId="67" UserId="4196" Date="01/11/2010 15:11:16" Content="So you can run it yourself to see what the breaks are." />
      <Message Id="2992686" ParentId="67" UserId="4196" Date="12/02/2011 17:00:52" Content="See densityVis package" />
    </Messages>
  </Topic>
  <Topic Id="68" Title="scale_x_log10 silently dropping invalid values">
    <Messages>
      <Message Id="0" ParentId="68" UserId="4196" Date="01/11/2010 15:16:38" Content="    df &lt;- data.frame(x = 0:10)&#xD;&#xA;    ggplot(df,  aes(x,  1)) + geom_point() + scale_x_log10()&#xD;&#xA;    ggplot(df,  aes(x,  1)) + geom_bar(binwidth = 1) + scale_x_log10()" />
      <Message Id="35938483" ParentId="68" UserId="4196" Date="02/24/2014 21:14:02" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="69" Title="Missing data in ggplot() causes error">
    <Messages>
      <Message Id="0" ParentId="69" UserId="4196" Date="01/20/2010 15:03:17" Content="    df.actual &lt;- data.frame(x=1:100,  y=(1:100)*2)&#xD;&#xA;    df.approx &lt;- data.frame(x=1:150,  y=(1:150)*2 + 5 + rnorm(150,  mean=3))&#xD;&#xA;    ggplot(mapping = aes(x,  y)) +&#xD;&#xA;      geom_point(aes(colour=&quot;Actual&quot;),  data=df.actual) +&#xD;&#xA;      geom_line(aes(colour=&quot;Approximate&quot;),  data=df.approx)&#xD;&#xA;" />
      <Message Id="125465" ParentId="69" UserId="4196" Date="02/03/2010 23:58:47" Content="Fixed in 97260d363f2c4cfb54c982cbc485db0c418c4366" />
    </Messages>
  </Topic>
  <Topic Id="70" Title="Geom_area doesn't respect order">
    <Messages>
      <Message Id="0" ParentId="70" UserId="4196" Date="01/26/2010 16:16:33" Content="    library(ggplot2)&#xD;&#xA;    cf1 = structure(list(dur = c(10L,  10L,  10L,  10L,  10L,  150L,  150L, &#xD;&#xA;    150L,  150L,  150L),  score = structure(c(3L,  1L,  4L,  5L,  2L,  3L, &#xD;&#xA;    1L,  4L,  5L,  2L),  .Label = c(&quot;none&quot;,  &quot;weak&quot;,  &quot;moderate&quot;,  &quot;severe&quot;, &#xD;&#xA;    &quot;verysevere&quot;),  class = c(&quot;ordered&quot;,  &quot;factor&quot;)),  p = c(0.04,  0.02, &#xD;&#xA;    0.26,  0.6,  0.07,  0.07,  0.05,  0.33,  0.42,  0.14)),  .Names = c(&quot;dur&quot;, &#xD;&#xA;    &quot;score&quot;,  &quot;p&quot;),  class = c(&quot;cast_df&quot;,  &quot;data.frame&quot;))&#xD;&#xA;    cf1 &lt;- as.data.frame(as.list(cf1))&#xD;&#xA;&#xD;&#xA;    qplot(factor(dur), weight=p, data=cf1,  fill=score,  geom = &quot;bar&quot;,  order = rev(score))&#xD;&#xA;    qplot(dur, p, data=cf1,  fill=score,  order = rev(score),  geom = &quot;area&quot;)" />
      <Message Id="125459" ParentId="70" UserId="4196" Date="02/03/2010 23:45:34" Content="Basic problem seems to be that ordering occurs after position adjustment,  so it is too late to affect the display of geom_area.  I'm at a loss to explain why it works for geom_bar though - perhaps due to internal reordering during binning." />
      <Message Id="125460" ParentId="70" UserId="4196" Date="02/03/2010 23:45:40" Content="Fixed in 2cc78f4f5d3ace2aea7d14e3643fd71f75748b1f" />
    </Messages>
  </Topic>
  <Topic Id="71" Title="Legend box overlaps panel">
    <Messages>
      <Message Id="0" ParentId="71" UserId="18445" Date="01/28/2010 20:56:33" Content="    qplot(0, 0) + geom_point(aes(colour=&quot;red&quot;))&#xD;&#xA;    ggsave(&quot;test.png&quot;)&#xD;&#xA;&#xD;&#xA;The white rectangle under the legend eats a few pixels on the right of the panel." />
      <Message Id="120698" ParentId="71" UserId="18970" Date="01/28/2010 21:18:33" Content="The small overlap with the plot area is only of half a line width (lines extend symmetrically about their central position,  hence the small overlap for such snug fit)." />
      <Message Id="291599" ParentId="71" UserId="4196" Date="06/29/2010 01:08:28" Content="Fixed in 75fced7e50d6b3eb21118cb449530d559c0881fb" />
    </Messages>
  </Topic>
  <Topic Id="72" Title="stat_bin doesn't work with zero weights">
    <Messages>
      <Message Id="0" ParentId="72" UserId="4196" Date="02/01/2010 02:02:02" Content="    df &lt;- data.frame(&#xD;&#xA;      x = c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;,  &quot;d&quot;), &#xD;&#xA;      weight = c(0,  1), &#xD;&#xA;      z = rep(c(&quot;a&quot;,  &quot;b&quot;),  2)&#xD;&#xA;    )&#xD;&#xA;&#xD;&#xA;    ggplot(df,  aes(x)) + geom_bar()&#xD;&#xA;    ggplot(df,  aes(x)) + geom_bar(aes(weight = weight))&#xD;&#xA;    last_plot() + facet_grid(. ~ z)&#xD;&#xA;" />
      <Message Id="126730" ParentId="72" UserId="4196" Date="02/05/2010 16:25:42" Content="Fixed in 0072cf4c48616ae36d57eae06dee6a4eb10f6fc6" />
    </Messages>
  </Topic>
  <Topic Id="73" Title="Continuous colour scale with single observation does not work">
    <Messages>
      <Message Id="0" ParentId="73" UserId="4196" Date="02/02/2010 16:39:47" Content="    df &lt;- data.frame(x = 1:10,  y = 1:10,  z = 1)&#xD;&#xA;    qplot(x,  y,  data=df,  colour=z)&#xD;&#xA;&#xD;&#xA;Reported by Xie Chao" />
      <Message Id="298757" ParentId="73" UserId="18970" Date="07/04/2010 16:48:40" Content="library(ggplot2)&#xD;&#xA;&#xD;&#xA;d1 &lt;- data.frame(x=1:10,  y=rnorm(10),  f=1)&#xD;&#xA;d2 &lt;- data.frame(x=1:10,  y=rnorm(10),  f=&quot;1&quot;)&#xD;&#xA;d3 &lt;- data.frame(x=1:10,  y=rnorm(10),  f=rep(1:2,  each=5))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(d1) +&#xD;&#xA;  geom_point(aes(x, y)) &#xD;&#xA;&#xD;&#xA;p1 &lt;- p + aes(colour=f) # points disappear&#xD;&#xA;p2 &lt;- p1 %+% d2 # OK for discrete variable&#xD;&#xA;p3 &lt;- p1 %+% d3 # OK for multiple continuous variables&#xD;&#xA;p4 &lt;- p + aes(shape=f) # OK for shape_continuous but note the legend disappears&#xD;&#xA;p5 &lt;- p1 + aes(shape=f) # points also disappear for colour and shape with continuous variable&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="298793" ParentId="73" UserId="18970" Date="07/04/2010 17:15:40" Content="OK,  this line is wrong in ScaleGradient$map, &#xD;&#xA;&#xD;&#xA;x &lt;- (x - domain[ 1 ]) / diff(domain)&#xD;&#xA;&#xD;&#xA;if the domain has only one value,  we get 0/0,  i.e. NaN and nothing gets plotted. &#xD;&#xA;" />
      <Message Id="300687" ParentId="73" UserId="4196" Date="07/05/2010 22:42:32" Content="Colour problem fixed in 827e73be6e26455a8c30e821d550fbb1dc26b0b0.  The shape problem is something different and is new bug #122" />
    </Messages>
  </Topic>
  <Topic Id="74" Title="position_stack no longer works with geom_line">
    <Messages>
      <Message Id="0" ParentId="74" UserId="4196" Date="02/15/2010 19:36:20" Content="    library(ggplot2)&#xD;&#xA;    data.set &lt;- data.frame(&#xD;&#xA;     Time = c(rep(1,  4), rep(2,  4),  rep(3,  4),  rep(4,  4)), &#xD;&#xA;     Type = rep(c('a',  'b',  'c',  'd'),  4), &#xD;&#xA;     Value = c(10,  12,  14,  16,  14,  14,  20,  18,  18,  16,  22,  20,  26,  20,  24,  26)&#xD;&#xA;    )&#xD;&#xA;&#xD;&#xA;    ggplot(data.set,  aes(x = Time,  y = Value,  colour = Type)) +&#xD;&#xA;      geom_line(position = 'stack')" />
      <Message Id="291616" ParentId="74" UserId="4196" Date="06/29/2010 01:28:16" Content="Fixed in d6fd7369b2fe3cabaf20bcb04e806d12b58db27a" />
    </Messages>
  </Topic>
  <Topic Id="75" Title="coord_trans changes limits on discrete axes">
    <Messages>
      <Message Id="0" ParentId="75" UserId="4196" Date="02/15/2010 19:43:10" Content="    df &lt;- data.frame(a = abs(rnorm(26)), letters)&#xA;    plot &lt;- ggplot(df, aes(a, letters)) + geom_point() &#xA;&#xA;    plot + coord_trans(x = &quot;log10&quot;)&#xA;    plot + coord_trans(x = &quot;sqrt&quot;)&#xA;    plot + coord_trans(x = &quot;sqrt&quot;,  y = &quot;inverse&quot;)" />
      <Message Id="291595" ParentId="75" UserId="4196" Date="06/29/2010 01:03:47" Content="Need warning message when applying transform to discrete scale,  and then just ignore." />
      <Message Id="1191044" ParentId="75" UserId="4196" Date="05/17/2011 15:28:39" Content="Not sure what fixed this,  but it's now working in bf0052e23bdfae164a2a72c0c79d42a1bf06478e" />
    </Messages>
  </Topic>
  <Topic Id="76" Title="lineend (and other gpar) not respected in the legend grob">
    <Messages>
      <Message Id="0" ParentId="76" UserId="18970" Date="02/19/2010 12:42:22" Content="Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(x,  y,  data=data.frame(x=1:2,  y=1:2),  colour=x)+&#xD;&#xA;  geom_path(size=10,  lineend=&quot;round&quot;) +&#xD;&#xA;  scale_size_identity()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The legend grob doesn't use these settings, &#xD;&#xA;&#xD;&#xA;  draw_legend &lt;- function(.,  data,  ...) { &#xD;&#xA;    data$arrow &lt;- NULL&#xD;&#xA;    data &lt;- aesdefaults(data,  .$default_aes(),  list(...))&#xD;&#xA;&#xD;&#xA;    with(data,  &#xD;&#xA;      ggname(.$my_name(),  segmentsGrob(0.1,  0.5,  0.9,  0.5,  default.units=&quot;npc&quot;, &#xD;&#xA;      gp=gpar(col=alpha(colour,  alpha),  lwd=size * .pt,  &#xD;&#xA;        lty=linetype,  lineend=&quot;butt&quot;)))&#xD;&#xA;    )&#xD;&#xA;   }" />
      <Message Id="2992678" ParentId="76" UserId="4196" Date="12/02/2011 17:00:24" Content="That was deliberate - round butts look weird in the legend." />
    </Messages>
  </Topic>
  <Topic Id="77" Title="geom_line doesn't accept lineend (and other gpar)">
    <Messages>
      <Message Id="0" ParentId="77" UserId="18970" Date="02/19/2010 13:25:08" Content="Compare:&#xD;&#xA;&#xD;&#xA;p &lt;- &#xD;&#xA;qplot(x,  y,  data=data.frame(x=1:2,  y=1:2),  geom=&quot;blank&quot;)&#xD;&#xA;&#xD;&#xA;p + geom_line(size=10,  lineend=&quot;round&quot;)&#xD;&#xA;p + geom_path(size=10,  lineend=&quot;round&quot;)&#xD;&#xA;" />
      <Message Id="18539146" ParentId="77" UserId="1146990" Date="05/28/2013 09:11:55" Content="This is an old bug,  and it is still present in ggplot 0.9.3.1.&#xD;&#xA;This bug was marked as closed by Hadley as part of issue #24 (geom_path &amp; geom_line should have lineEnd parameter),  but only geom_path is currently working as expected." />
      <Message Id="35938465" ParentId="77" UserId="4196" Date="02/24/2014 21:13:58" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="78" Title="axis.line drawn behind panel.background">
    <Messages>
      <Message Id="0" ParentId="78" UserId="4196" Date="02/24/2010 16:20:04" Content="e.g.&#xD;&#xA;&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) + &#xD;&#xA;      opts(axis.line = theme_segment())" />
      <Message Id="2992662" ParentId="78" UserId="4196" Date="12/02/2011 16:59:03" Content="@Kohske would you mind taking a look?  " />
      <Message Id="2996278" ParentId="78" UserId="227097" Date="12/02/2011 21:44:27" Content="fixed,  but somewhat quick way.&#xD;&#xA;Note for further improvement.&#xD;&#xA;&#xD;&#xA;This is relevant to z-index problem.&#xD;&#xA;Now,  there is no *explicit* way to specify the order of drawing in a gtable.&#xD;&#xA;So,  two way to do this:&#xD;&#xA;1) add the geom in the order that you want to draw. rule: fifo.&#xD;&#xA;2) change the order of gtable$layout and gtable$geom.&#xD;&#xA;&#xD;&#xA;The 2 maybe sufficient but maybe it is better if gtable as a methods to do this.&#xD;&#xA;&#xD;&#xA;a) gtable$layout might have &quot;z-index&quot; column: the notion is from opengl.&#xD;&#xA;b) gtable$layout might have &quot;order&quot; column. In this case,  the difficulty is that a new child is added to the existing gtable in the middle of drawing order.&#xD;&#xA;" />
      <Message Id="3002180" ParentId="78" UserId="4196" Date="12/03/2011 18:40:13" Content="Thanks.  I think z-order would be the way to go.  Would you minding filing an issue so we remember to do that?  1.0 is probably a good milestone for that (and gtable needs to get spun off into own package)" />
    </Messages>
  </Topic>
  <Topic Id="79" Title="stat_density2d should support weights">
    <Messages>
      <Message Id="0" ParentId="79" UserId="4196" Date="02/24/2010 16:27:59" Content="See e.g. kde2d.weighted:&#xD;&#xA;http://web.mit.edu/piantado/www/blog/nonindep-density.R. " />
      <Message Id="2992659" ParentId="79" UserId="4196" Date="12/02/2011 16:58:40" Content="Part of densityVis" />
      <Message Id="5390048" ParentId="79" UserId="417363" Date="04/27/2012 20:51:04" Content="I am sorry if this I am missing something,  I haven't found anything online related. Has this feature been implemented? Thanks very much." />
      <Message Id="35938441" ParentId="79" UserId="4196" Date="02/24/2014 21:13:53" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="80" Title="coord_polar should have wrap argument">
    <Messages>
      <Message Id="0" ParentId="80" UserId="4196" Date="03/02/2010 15:25:19" Content="So that the two ends of the line in this example are joined together:&#xD;&#xA;&#xD;&#xA;    d &lt;- structure(list(angle = c(0,  22.5,  45,  67.5,  90,  112.5,  135,  157.5, &#xD;&#xA;    180,  202.5,  225,  247.5,  270,  292.5,  315,  337.5),  value = c(4.465849387, &#xD;&#xA;    1.22591944,  1.22591944,  1.663747811,  1.663747811,  0.963222417, &#xD;&#xA;    1.838879159,  3.327495622,  4.028021016,  0.963222417,  0.788091068, &#xD;&#xA;    0.175131349,  0.963222417,  1.576182137,  4.378283713,  4.553415061&#xD;&#xA;    )),  .Names = c(&quot;angle&quot;,  &quot;value&quot;),  class = &quot;data.frame&quot;,  row.names = c(NA, &#xD;&#xA;    16L))&#xD;&#xA;    ggplot(d,  aes(x=angle,  y=value)) + &#xD;&#xA;      geom_line() + geom_point() + coord_polar() +&#xD;&#xA;      scale_x_continuous(limits = c(0,  360))&#xD;&#xA;" />
      <Message Id="35938424" ParentId="80" UserId="4196" Date="02/24/2014 21:13:48" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="81" Title="geom_smooth doesn't work with facets,  if one of the facets has too few points to calculate loess">
    <Messages>
      <Message Id="0" ParentId="81" UserId="14500" Date="03/04/2010 17:36:01" Content="if you use geom_smooth and facets on a dataset,  and one of the facets would contains too few points to calculate the smoothing,  the command fail and I don't get any plot,  not even for the other facets that have enough point to calculate it." />
      <Message Id="2992645" ParentId="81" UserId="4196" Date="12/02/2011 16:58:12" Content="Fixed in devel version." />
    </Messages>
  </Topic>
  <Topic Id="82" Title="geom_bar default stat">
    <Messages>
      <Message Id="0" ParentId="82" UserId="216319" Date="03/05/2010 04:57:31" Content="geom_bar has as default stat=&quot;bin&quot;,  which is kind of counter intuitive:&#xA;&#xA;According to the documentation,  geom_histogram is an alias for geom_bar + stat_bin,  hence they are the same. Furthermore,  geom_bar does not work when both x and y are mapped to a data variable,  which is not exactly what you would expect from a bar geom.&#xA;&#xA;I think geom_bar with default stat=&quot;identity&quot;,  and maybe position=&quot;dodge&quot; would deliver the most intuitive result.&#xA;&#xA;consider this super simple example:&#xA;&#xA;year &lt;- 2001:2010;&#xA;inflation&lt;- runif(10);&#xA;qplot(year,  inflation, geom=&quot;bar&quot;); #returns error&#xA;qplot(year,  inflation, geom=&quot;bar&quot;, stat=&quot;identity&quot;); #makes more sense." />
      <Message Id="2992643" ParentId="82" UserId="4196" Date="12/02/2011 16:58:03" Content="Intuition is arguable here.  I think changing now would cause even more confusion.  A future version might separate into different geoms." />
    </Messages>
  </Topic>
  <Topic Id="83" Title="support plots on multiple pages">
    <Messages>
      <Message Id="0" ParentId="83" UserId="14500" Date="03/05/2010 14:27:25" Content="On lattice,  many plotting functions accept an option called 'layout' that allows to define in many rows,  columns and pages a plot should be drawn.&#xA;For example,  if you give 'layout=c(3, 4)' the plots will contain 3x4 facets,  and if there are more than 3 or 4 groups the plots will be plotted in a new page,  which is particularly useful when you are plotting to a pdf.&#xA;I couldn't find any equivalent in ggplot.. do you plan to introduce this functionality in the future? Thanks" />
      <Message Id="2992635" ParentId="83" UserId="4196" Date="12/02/2011 16:57:09" Content="Duplicate of #86" />
    </Messages>
  </Topic>
  <Topic Id="84" Title="geom_vline should work with non-numeric scales">
    <Messages>
      <Message Id="0" ParentId="84" UserId="4196" Date="03/17/2010 22:16:51" Content="e.g. date and character" />
      <Message Id="2237400" ParentId="84" UserId="130809" Date="09/29/2011 13:02:35" Content="Here here! &#xD;&#xA;&#xD;&#xA;For dates,  the workaround is to wrap the Date with as.numeric,  ala: geom_vline(xintercept=as.numeric(Sys.Date))&#xD;&#xA;" />
      <Message Id="2992630" ParentId="84" UserId="4196" Date="12/02/2011 16:56:36" Content="@HarlanH would you mind contributing a couple of reproducible examples?" />
      <Message Id="3041287" ParentId="84" UserId="463252" Date="12/07/2011 00:20:53" Content="```r&#xD;&#xA;DF &lt;- data.frame(dt = as.Date(&quot;2000-01-01&quot;)+0:20,  val=0:20)&#xD;&#xA;&#xD;&#xA;ggplot(DF,  aes(x=dt,  y=val)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(xintercept=as.Date(&quot;2000-01-10&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(DF,  aes(x=dt,  y=val)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(xintercept=as.numeric(as.Date(&quot;2000-01-10&quot;)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The first does not have a vertical line; the second does,  at the expected location.  This was run with 0.8.9.  This is not up to a testable example,  but it is a start.&#xD;&#xA;&#xD;&#xA;If you are going to handle non-numeric scales,  then this should work as well&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(iris,  aes(x=Species,  y=Sepal.Length)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(xintercept=&quot;setosa&quot;)&#xD;&#xA;```" />
      <Message Id="8341032" ParentId="84" UserId="58398" Date="09/06/2012 17:47:40" Content="I know this issue is more than 2 years old but I figured I'd add a comment.&#xA;&#xA;When using the following code (DF from above in this case):&#xA;```r&#xA;ggplot(DF,  aes(x=dt,  y=val)) +&#xA;    geom_point() +&#xA;    geom_vline(&#xA;        xintercept = as.numeric(as.Date(&quot;2001-01-10&quot;)))&#xA;```&#xA;&#xA;One has to be careful that the values used for the x-axis date-values are formatted using the same standard.&#xA;&#xA;For instance,  if your data-frame `DF` contains dates formatted using `as.POSIXct` instead of `as.Date` your plot will look quite weird. e.g.:&#xA;```R&#xA;DF &lt;- data.frame(dt = as.POSIXct(&quot;2000-01-01&quot;)+0:20,  val=0:20)&#xA;&#xA;ggplot(DF,  aes(x=dt,  y=val)) +&#xA;  geom_point() +&#xA;  geom_vline(xintercept=as.Date(&quot;2000-01-10&quot;))&#xA;&#xA;ggplot(DF,  aes(x=dt,  y=val)) +&#xA;  geom_point() +&#xA;  geom_vline(xintercept=as.numeric(as.Date(&quot;2000-01-10&quot;)))&#xA;```&#xA;&#xA;For instance,  the `as.numeric` values for the date &quot;2000-01-10&quot; is the following:&#xA;&#xA;- `as.POSIXct(&quot;2000-01-10&quot;)`: 979084800&#xA;- `as.Date(&quot;2000-01-10&quot;)`: 11332&#xA;&#xA;This example is trivial since we know that `DF` has been defined with `as.Date` but I've encountered larger codebases where the likes of :&#xA;```R&#xA;format(as.POSIXct(&quot;2001-01-10&quot;),  format=&quot;%Y-%m-%d&quot;)&#xA;```&#xA;made it a lot more annoying to process when generating plots.&#xA;&#xA;It is a really simple tip however if you are running larger sequential list of intercepts and your dataset is large,  your memory will burst in tears straight through the roof." />
      <Message Id="35938408" ParentId="84" UserId="4196" Date="02/24/2014 21:13:45" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="85" Title="stat_hline may have broken arguments">
    <Messages>
      <Message Id="0" ParentId="85" UserId="54181" Date="03/21/2010 00:38:29" Content="I can't seem to correctly specify the arguments to `stat_hline()`&#xD;&#xA;&#xD;&#xA;    stat_hline( yintercept = 35 )&#xD;&#xA;    Error in do.call(&quot;layer&quot;,  list(mapping = mapping,  data = data,  geom = geom,   : &#xD;&#xA;    argument &quot;intercept&quot; is missing,  with no default&#xD;&#xA;&#xD;&#xA;Switching to:&#xD;&#xA;&#xD;&#xA;    stat_hline( intercept = 35 )&#xD;&#xA;&#xD;&#xA;Or:&#xD;&#xA;&#xD;&#xA;    stat_hline( intercept = 35,  yintercept = 35 )&#xD;&#xA;&#xD;&#xA;Causes an error when a plot is printed:&#xD;&#xA;&#xD;&#xA;    Error in get(&quot;calculate&quot;,  env = .,  inherits = TRUE)(.,  ...) : &#xD;&#xA;    stat_hline now uses yintercept instead of intercept&#xD;&#xA;" />
      <Message Id="164603" ParentId="85" UserId="4196" Date="03/21/2010 00:42:05" Content="`stat_hline` is not designed to be used directly.  Please use `geom_hline`" />
    </Messages>
  </Topic>
  <Topic Id="86" Title="Allow facets to span multiple pages">
    <Messages>
      <Message Id="0" ParentId="86" UserId="4196" Date="03/21/2010 22:47:49" Content="Proposed syntax: `page.layout = c(rows,  cols)`" />
      <Message Id="338256" ParentId="86" UserId="149211" Date="08/02/2010 20:29:59" Content="This would be awesome." />
      <Message Id="496037" ParentId="86" UserId="137024" Date="10/27/2010 06:25:18" Content="I would definitely appreciate this feature as well." />
      <Message Id="667322" ParentId="86" UserId="4196" Date="01/10/2011 20:45:15" Content="Probably should be different for `facet_wrap` and `facet_grid` - suggestion from David Cooper:&#xD;&#xA;&#xD;&#xA;    + facet_grid(cyl ~ drv,  by = manufacturer)&#xD;&#xA;    + facet_grid(manufacturer ~ cyl ~ drv)" />
      <Message Id="9260169" ParentId="86" UserId="1855080" Date="10/09/2012 13:22:40" Content="This would be very awesome. Seems like an obvious,  missing feature of ggplot. " />
      <Message Id="31918165" ParentId="86" UserId="1317927" Date="01/09/2014 10:24:05" Content="I'd like to use ggplot to draw this figure,  2x2 per page into multiple pages.&#xD;&#xA;&#xD;&#xA;xyplot(price ~ carat | clarity,  diamonds,  layout = c(2,  2)) " />
      <Message Id="34095719" ParentId="86" UserId="2743628" Date="02/04/2014 19:15:59" Content="Yes please!  I would love to have a layout option for facet_wrap and facet_grid.  It seems less obvious how to do this for facet_grid,  but for sure,  I would use facet_wrap(layout) all the time.  It is one of the main (only?) things that keeps me from switching from lattice." />
      <Message Id="35938385" ParentId="86" UserId="4196" Date="02/24/2014 21:13:40" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="87" Title="facet_grid labels incorrect">
    <Messages>
      <Message Id="0" ParentId="87" UserId="4196" Date="03/21/2010 22:51:32" Content="    fac1 &lt;- gl(2,  4,  labels = c(&quot;fac1A&quot;,  &quot;fac1B&quot;) )&#xD;&#xA;    fac2 &lt;- factor(rep(rep(1:2,  c(2,  2) ),  2),  labels = c(&quot;fac2C&quot;, &#xD;&#xA;    &quot;fac2D&quot;) )&#xD;&#xA;    fac3 &lt;- factor(rep(1:2,  4),  labels = c(&quot;fac3E&quot;,  &quot;fac3F&quot;) )&#xD;&#xA;    dummy &lt;- data.frame(x = rnorm(4),  y = rnorm(4),  fac1,  fac2,  fac3)&#xD;&#xA;    qplot(x,  y,  data = dummy,  facets = fac1 ~ fac2 + fac3)&#xD;&#xA;&#xD;&#xA;Possible fix,  from takahashi kohske &#xD;&#xA;&#xD;&#xA;    In FacetGrid$add_guides: (in facet-grid-.r)&#xD;&#xA;&#xD;&#xA;    # Strips&#xD;&#xA;    labels &lt;- .$labels_default(.$shape,  theme)&#xD;&#xA;&#xD;&#xA;    # add these two lines:&#xD;&#xA;    labels$v&lt;-matrix(c(t(labels$v)), nrow=nrow(labels$v),  ncol=ncol(labels$v))&#xD;&#xA;    labels$h&lt;-matrix(c(t(labels$h)), nrow=nrow(labels$h),  ncol=ncol(labels$h))&#xD;&#xA;" />
      <Message Id="250595" ParentId="87" UserId="18445" Date="05/23/2010 09:38:51" Content="Duplicate of #65 it seems" />
      <Message Id="250596" ParentId="87" UserId="18445" Date="05/23/2010 09:41:42" Content="Another fact that makes this bug all the more annoying: facet_grid does not seem to allow one to do computations with the data.frame columns,  as geoms do. For example,  one could,  for now,  compute the interaction manually; but this has to be done outside the ggplot call to work currently:&#xA;&#xA;	library(&quot;ggplot2&quot;)&#xA;&#xA;	d &lt;- data.frame(a=rep(c(&quot;foo&quot;,  &quot;bar&quot;),  each=10),  b=rep(c(&quot;a&quot;,  &quot;b&quot;),  each=5,  times=2),  x=runif(10),  y=runif(10))&#xA;	ldply(d,  class)&#xA;	# .id      V1&#xA;	#   a  factor&#xA;	#   b  factor&#xA;	#   x numeric&#xA;	#   y numeric&#xA;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~a+b)&#xA;	# correct plot but incorrect labels&#xA;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~a:b)&#xA;	# Error: Casting formula contains variables not found in molten data: a:b&#xA;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~interaction(a:b))&#xA;	# Error: Casting formula contains variables not found in molten data: interaction(a:b)&#xA;&#xA;	d$inter &lt;- d$a:d$b&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~inter)&#xA;	# OK&#xA;" />
      <Message Id="542992" ParentId="87" UserId="4196" Date="11/15/2010 17:44:06" Content="Fixed,  thanks to Koshke." />
    </Messages>
  </Topic>
  <Topic Id="88" Title="Legend drawn in wrong viewport">
    <Messages>
      <Message Id="0" ParentId="88" UserId="4196" Date="03/21/2010 23:02:50" Content="    library(ggplot2)&#xD;&#xA;    p &lt;- qplot(cty,  hwy,  data = mpg,  colour = displ)&#xD;&#xA;&#xD;&#xA;    p + opts(legend.justification = c(&quot;right&quot;,  &quot;top&quot;),  &#xD;&#xA;             legend.position = c(1,  1))&#xD;&#xA;         &#xD;&#xA;    p + opts(legend.justification = c(&quot;left&quot;,  &quot;bottom&quot;),  &#xD;&#xA;            legend.position = c(0,  0))&#xD;&#xA;&#xD;&#xA;Should be drawn in panels viewport" />
      <Message Id="291619" ParentId="88" UserId="4196" Date="06/29/2010 01:29:52" Content="This is difficult to do because viewports need to be defined once and then have stuff put in them." />
      <Message Id="2992618" ParentId="88" UserId="4196" Date="12/02/2011 16:55:59" Content="Fixed in devel." />
    </Messages>
  </Topic>
  <Topic Id="89" Title="coord_trans should not modify infinite values">
    <Messages>
      <Message Id="0" ParentId="89" UserId="4196" Date="03/24/2010 13:04:38" Content="    require(ggplot2)&#xD;&#xA;    data &lt;- data.frame(x = 1:10,  y = exp(0:9))&#xD;&#xA;    ggplot(data,  aes(x,  y)) + geom_point() +&#xD;&#xA;       geom_hline(yintercept = 9) + geom_vline(xintercept = 2)&#xD;&#xA;    last_plot() + coord_trans(y = 'log')&#xD;&#xA;" />
      <Message Id="5252994" ParentId="89" UserId="86978" Date="04/20/2012 20:58:07" Content="Is this one fixed now? I'm not sure what the bug is." />
      <Message Id="5253028" ParentId="89" UserId="4196" Date="04/20/2012 20:59:53" Content="The bug is that the vertical line disappears,  probably because somewhere `log(-Inf)` is being calculated" />
      <Message Id="35938361" ParentId="89" UserId="4196" Date="02/24/2014 21:13:34" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="90" Title="implement a cutoff value for stat_smooth">
    <Messages>
      <Message Id="0" ParentId="90" UserId="14500" Date="03/31/2010 15:16:30" Content="This is related to http://github.com/hadley/ggplot2/issuesearch?state=open&amp;q=dalloliogm#issue/3&#xD;&#xA;&#xD;&#xA;It would be good if stat_smooth had a cutoff parameter,  so the smoothing line is not plotted if there are fewer points that its value.&#xD;&#xA;&#xD;&#xA;Sometimes,  when you create facetted plot,  some of the panels contains only few points,  so the smoothing line that is plotted is weird and tends to have big peaks. It would be useful to be able to say to stat_smooth to only plot a line when there is a customizable number of points to calculate it." />
      <Message Id="179281" ParentId="90" UserId="4196" Date="04/06/2010 15:26:34" Content="I'm not terribly willing to add more data manipulation functions to ggplot2.  This is already pretty easy to do with a prefiltering step." />
      <Message Id="182392" ParentId="90" UserId="14500" Date="04/09/2010 08:55:33" Content="It won't be so easy to prefilter the data,  as it seems. The problem is that I want to plot all the datasets with geom_point,  and apply stat_smooth to some of them. It would require to modify the smoothing function directly.&#xD;&#xA;&#xD;&#xA;Let's say you have a dataset with two groups of data,  where the first group contains many points and the second one only 4. Then,  you want to apply geom_point to all the groups (with facets by group),  and geom_smooth only to the groups with enough points to plot a nice line. You can't remove any dataset because then you won't be able to plot them with geom_point. " />
      <Message Id="183379" ParentId="90" UserId="4196" Date="04/10/2010 18:36:29" Content="Could you please send a small reproducible example to the mailing list,  and I'll show you how you can do what you want." />
      <Message Id="217153" ParentId="90" UserId="14500" Date="04/22/2010 12:55:03" Content="I managed to solve this: you just have to give to geom_smooth a subset of the data,  something like:&#xD;&#xA;&#xD;&#xA;&gt; qplot(x, y,  data=d) + geom_smooth(data=subset(d,  ...)) + ...&#xD;&#xA;&#xD;&#xA;I am not sure on how to define the subset condition in order to remove all the groups with a small number of rows,  but I'll figure it out.." />
    </Messages>
  </Topic>
  <Topic Id="91" Title="coord_equal should accept one of xlim and ylim">
    <Messages>
      <Message Id="0" ParentId="91" UserId="4196" Date="04/19/2010 15:38:34" Content="    df &lt;- data.frame( a=c( 1, 4, 9, 10 ),  b=c( 2, 3, 3.5, 8 ) )&#xA;    base &lt;- ggplot( df,  aes(a,  b)) + geom_point()&#xA;&#xA;    base + coord_equal( xlim=c( 6, 11 ) )&#xA;&#xA;    # Instead of &#xA;    base + coord_cartesian(xlim = c(6,  11),  ylim = c(6,  11)) + &#xA;      opts(aspect.ratio = 1)&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="92" Title="Better ways to select ticks">
    <Messages>
      <Message Id="0" ParentId="92" UserId="4196" Date="04/19/2010 15:42:36" Content="Should be able to specify: number,  distance between,  range,  etc." />
      <Message Id="2992604" ParentId="92" UserId="4196" Date="12/02/2011 16:54:58" Content="Moved to https://github.com/hadley/scales/issues/8" />
    </Messages>
  </Topic>
  <Topic Id="93" Title="Labels order does not match breaks order">
    <Messages>
      <Message Id="0" ParentId="93" UserId="4196" Date="04/19/2010 16:10:19" Content="    df &lt;- data.frame(x = c(&quot;a&quot;,  &quot;b&quot;),  y = 1:2)&#xD;&#xA;&#xD;&#xA;    base &lt;- ggplot(df,  aes(x,  y)) + geom_point()&#xD;&#xA;    base&#xD;&#xA;    base + scale_x_discrete(breaks = c(&quot;b&quot;,  &quot;a&quot;),  &#xD;&#xA;      labels = c(&quot;beta&quot;,  &quot;alpha&quot;))&#xD;&#xA;" />
      <Message Id="3101017" ParentId="93" UserId="4196" Date="12/12/2011 01:08:16" Content="Working in devel version." />
    </Messages>
  </Topic>
  <Topic Id="94" Title="Should be able to set specific breaks in scale_date and scale_datetime">
    <Messages>
      <Message Id="0" ParentId="94" UserId="4196" Date="04/22/2010 01:51:10" Content="" />
      <Message Id="1540511" ParentId="94" UserId="327935" Date="07/10/2011 02:04:40" Content="Do you need any help in implementing this?" />
      <Message Id="1542321" ParentId="94" UserId="4196" Date="07/10/2011 16:55:41" Content="This is implemented in the development version.  It could probably do with more examples in the docs though." />
    </Messages>
  </Topic>
  <Topic Id="95" Title="Free scales on facets should take coord_flip into account">
    <Messages>
      <Message Id="0" ParentId="95" UserId="18445" Date="04/29/2010 17:50:36" Content="Let's consider this data	&#xD;&#xA;&#xD;&#xA;	d &lt;- data.frame(x=1:5,  y=c(runif(5),  runif(5)+5),  a=rep(c(&quot;foo&quot;, &quot;bar&quot;),  each=5))&#xD;&#xA;&#xD;&#xA;The scale for y should be free. Faceting along the horizontal makes it impossible since there should only be one y scale:&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~a,  scales=&quot;free_y&quot;)&#xD;&#xA;&#xD;&#xA;This makes sense but a warning would be welcome (&quot;Warning: The y scale cannot be free in this faceting configuration&quot;)&#xD;&#xA;&#xD;&#xA;Now faceting along the vertical or switching the coordinates allows a free scale&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(a~.,  scales=&quot;free_y&quot;)&#xD;&#xA;	ggplot(d) + geom_point(aes(x=y,  y=x)) + facet_grid(.~a,  scales=&quot;free_x&quot;)&#xD;&#xA;&#xD;&#xA;But flipping the coordinate system does not,  while there are now two different axes for y&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~a,  scales=&quot;free_y&quot;) + coord_flip()&#xD;&#xA;&#xD;&#xA;I would expect this last plot to look just like the previous one." />
      <Message Id="2893811" ParentId="95" UserId="35070" Date="11/28/2011 07:29:17" Content="Hi, &#xD;&#xA;&#xD;&#xA;I've also encountered this problem. I wanted to use free scales so that elements that appear only in one facet won't appear in the axes of another (using a discrete scale). I couldn't use the above workaround,  as I wanted to use geom_bar,  so I had to use geom_rect instead,  and reverse the coordinates manually." />
      <Message Id="2992585" ParentId="95" UserId="4196" Date="12/02/2011 16:53:48" Content="Free scales aren't going to be working with non-Cartesian coordinates systems for a long time :/" />
      <Message Id="15215660" ParentId="95" UserId="379357" Date="03/21/2013 02:08:05" Content="Just to clarify: coord_flip = non-Cartesian?" />
      <Message Id="35938326" ParentId="95" UserId="4196" Date="02/24/2014 21:13:27" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="49398170" ParentId="95" UserId="167164" Date="07/18/2014 06:01:12" Content="I guess this is basically the same bug as the one that doesn't allow `scales=free_y` to play nicely with `scale_y_log10()`.&#xD;&#xA;&#xD;&#xA;Backreferencing other related bugs:&#xD;&#xA;&#xD;&#xA;* https://github.com/hadley/ggplot2/issues/673&#xD;&#xA;* https://github.com/hadley/ggplot2/pull/675&#xD;&#xA;* https://github.com/hadley/ggplot2/issues/971&#xD;&#xA;* (maybe?) https://github.com/hadley/ggplot2/issues/601" />
    </Messages>
  </Topic>
  <Topic Id="96" Title="faceting and geom_v/hline">
    <Messages>
      <Message Id="0" ParentId="96" UserId="18445" Date="05/03/2010 23:42:23" Content="	d &lt;- data.frame(a=letters[ 1:2 ],  x=runif(100),  y=runif(100))&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~.)&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~.) + geom_vline(xintercept=0.5)&#xD;&#xA;	# OK&#xD;&#xA;&#xD;&#xA;Now,  if faceting factors have to be recomputed,  geom_hline or vline add some factor levels:&#xD;&#xA;&#xD;&#xA;	d$a &lt;- as.character(d$a) # so that factors have to be recomputed&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~.) + geom_vline(xintercept=0.5)&#xD;&#xA;	# -&gt; two extra factor levels&#xD;&#xA;	# try to specify the location completely&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~.) + geom_vline(aes(xintercept=x),  data=data.frame(a=&quot;b&quot;,  x=0.5))&#xD;&#xA;	# -&gt; still not working&#xD;&#xA;&#xD;&#xA;	# faceting direction does not mater&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(.~a) + geom_vline(aes(xintercept=x),  data=data.frame(a=&quot;b&quot;,  x=0.5))&#xD;&#xA;	# -&gt; still not working&#xD;&#xA;&#xD;&#xA;	# geom_hline is affected similarly&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(.~a) + geom_hline(yintercept=0.5)&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~.) + geom_hline(yintercept=0.5)&#xD;&#xA;" />
      <Message Id="230813" ParentId="96" UserId="4196" Date="05/05/2010 19:56:30" Content="Could you please elucidate what you mean by not working?" />
      <Message Id="230838" ParentId="96" UserId="18445" Date="05/05/2010 20:41:56" Content="I get extra factor levels. See: http://dl.dropbox.com/u/1047321/ggplot/geom_vline.pdf for all the plots above." />
      <Message Id="230910" ParentId="96" UserId="4196" Date="05/05/2010 21:54:33" Content="Oh,  I see it now. Thanks for the bug report!" />
      <Message Id="2992579" ParentId="96" UserId="4196" Date="12/02/2011 16:53:23" Content="Works for me in devel." />
    </Messages>
  </Topic>
  <Topic Id="97" Title="Simplify the use of scale_*_gradient*">
    <Messages>
      <Message Id="0" ParentId="97" UserId="18445" Date="05/06/2010 14:53:35" Content="For the sake of simplicity in the future&#xD;&#xA;&#xD;&#xA;- make gradient behave as gradientn i.e. add a colours argument&#xD;&#xA;- give a &quot;deprecated&quot;  warning when gradient2,  gradientn or the options high and low in gradient are used&#xD;&#xA;- ultimately,  keep gradient2 and gradientn active for backward compatibility but do not expose them in the package&#xD;&#xA;" />
      <Message Id="2992573" ParentId="97" UserId="4196" Date="12/02/2011 16:52:43" Content="That's basically how it works in the devel version.  But I think it's worth keeping gradient2 around because it automatically deals with a zero point." />
    </Messages>
  </Topic>
  <Topic Id="98" Title="alpha needs a scale and a legend even with discrete variables">
    <Messages>
      <Message Id="0" ParentId="98" UserId="18445" Date="05/08/2010 16:53:31" Content="Consider this use case,  where I plot a series over rectangles which represent a binary response&#xA;&#xA;    d &lt;- data.frame(x=1:50,  y=runif(50),  z=rep(c(T, F, T, T, F),  each=10))&#xA;    ggplot(d) + geom_rect(aes(xmin=x-0.5,  xmax=x+0.5,  ymin=-Inf,  ymax=Inf,  fill=z)) + geom_path(aes(x=x,  y=y))&#xA;    &#xA;Rather than the color,  I would prefer to have &quot;something&quot; when z is TRUE et nothing when z is FALSE (simpler,  clearer,  etc.). So:&#xA;    &#xA;    ggplot(d) + geom_rect(aes(xmin=x-0.5,  xmax=x+0.5,  ymin=-Inf,  ymax=Inf,  alpha=z)) + geom_path(aes(x=x,  y=y))&#xA;&#xA;but then I have no way of knowing which is which because there is no legend... So I did:&#xA;&#xA;    ggplot(d) + geom_rect(aes(xmin=x-0.5,  xmax=x+0.5,  ymin=-Inf,  ymax=Inf,  fill=z,  alpha=z)) + geom_path(aes(x=x,  y=y))&#xA;&#xA;But even then,  the legend does not reflect the transparency of the FALSE parts." />
      <Message Id="233481" ParentId="98" UserId="18445" Date="05/08/2010 17:16:27" Content="&#xD;&#xA;This seems related to the fact that there is no scale_alpha_discrete,  which is also a problem. Consider that,  in the example above,  I want the TRUE parts (those that show) to be half transparent so that the grid can still be seen underneath. I would do:&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_rect(aes(xmin=x-0.5,  xmax=x+0.5,  ymin=-Inf,  ymax=Inf,  alpha=z)) + geom_path(aes(x=x,  y=y)) + scale_alpha_continuous(to=c(0, 0.5))&#xD;&#xA;&#xD;&#xA;But this results in:&#xD;&#xA;    &#xD;&#xA;**Error: Non-continuous variable supplied to scale_alpha_alpha_continuous.**&#xD;&#xA;&#xD;&#xA;First note the two &quot;alpha&quot; above. Then I should have been able to use scale_alpha_discrete in this case." />
      <Message Id="500557" ParentId="98" UserId="458361" Date="10/28/2010 20:47:29" Content="The ggExtra package provides a scale_alpha_manual,  which may be able to do what you want." />
      <Message Id="2992563" ParentId="98" UserId="4196" Date="12/02/2011 16:51:57" Content="Works for me in devel." />
    </Messages>
  </Topic>
  <Topic Id="99" Title="geom_point should have fill and colour">
    <Messages>
      <Message Id="0" ParentId="99" UserId="18445" Date="05/08/2010 17:26:33" Content="    D &lt;- data.frame(x=1:100,  y=runif(100))&#xA;     ggplot(D) + geom_point(aes(x=x,  y=y,  fill=y))&#xA;&#xA;fill shows up in the legend but not in the plot." />
      <Message Id="250862" ParentId="99" UserId="18445" Date="05/23/2010 18:03:52" Content="Actually,  the issue is even more general (hence the change of title): sometimes it is useful to have points with a stroke. For example,  when superposing points to compare them:&#xD;&#xA;	D &lt;- data.frame(x=1:10,  y=runif(10),  z1=runif(10),  z2=runif(10))&#xD;&#xA;	# Example:&#xD;&#xA;	# x and y are locations in space,  z1 and z2 are the abundances of two species of interest&#xD;&#xA;	D &lt;- melt(D,  id=c(&quot;x&quot;, &quot;y&quot;))&#xD;&#xA;&#xD;&#xA;	# I want to compare both abundances spatially now I can do:&#xD;&#xA;	ggplot(D) + geom_point(aes(x=x,  y=y,  size=value)) + facet_wrap(~variable)&#xD;&#xA;	# but,  while it allows to tell which is abundant where,  it makes it difficult to compare the abundances at each point&#xD;&#xA;&#xD;&#xA;	# To do that,  I would rather plot both on the same plot and use transparency&#xD;&#xA;	ggplot(D) + geom_point(aes(x=x,  y=y,  colour=variable,  size=value),  alpha=0.5)&#xD;&#xA;	# but while this makes points in which z2 is less than z1 conspicuous,  it does not show every well how much z1 is inferior to z2 on the others&#xD;&#xA;	# Having a dark stroke on each point would help,  but this&#xD;&#xA;	ggplot(D) + geom_point(aes(x=x,  y=y,  fill=variable,  size=value),  alpha=0.5)&#xD;&#xA;	# works only in the legend,  as shown above already&#xD;&#xA;&#xD;&#xA;	# NB: maybe this&#xD;&#xA;	ggplot(D,  aes(x=x,  y=y,  size=value)) + geom_point(data=D[ , -3 ],  colour=&quot;grey40&quot;) +  geom_point() + facet_grid(~variable)&#xD;&#xA;	# is the best solution to this particular problem; but it is a bit more convoluted to explain and does not solve the general issue that a point can have a fill and a stroke.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="397258" ParentId="99" UserId="393256" Date="09/09/2010 12:31:35" Content="For me this looks like a bug,  since it works in the legend as expected but not in the plot." />
      <Message Id="397322" ParentId="99" UserId="393256" Date="09/09/2010 13:24:30" Content="It works in the plot too if you specify a shape out of c(21, 22, 23, 24, 25). Looks like the legend takes a different default shape than the plot." />
      <Message Id="2992553" ParentId="99" UserId="4196" Date="12/02/2011 16:51:12" Content="I think since legends automatically pick up the shape,  the bug is the autodetecting in the legend code.  Kohske,  would you mind taking a look please?" />
      <Message Id="2995622" ParentId="99" UserId="227097" Date="12/02/2011 20:50:48" Content="This is because geom_point$draw_legend automatically detect if the legend is filled or not.&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/geom-point-.r#L136&#xD;&#xA;&#xD;&#xA;This looks like designed behavior but I'm not sure.&#xD;&#xA;@Hadley,  Do you remember this?&#xD;&#xA;" />
      <Message Id="2995755" ParentId="99" UserId="4196" Date="12/02/2011 21:01:22" Content="Yeah,  I think I did that deliberately a long time ago,  but it's no longer necessary." />
      <Message Id="2995761" ParentId="99" UserId="227097" Date="12/02/2011 21:02:09" Content="fixed in https://github.com/hadley/ggplot2/commit/b551d115f23ff964d8f3bc89587cc745c31693a4" />
      <Message Id="3011902" ParentId="99" UserId="227097" Date="12/05/2011 07:02:13" Content="This issue can be closed." />
      <Message Id="3097410" ParentId="99" UserId="4196" Date="12/11/2011 14:24:12" Content="Closed - note that if you put `fixed #99` in your commit message it will be automatically closed." />
      <Message Id="3097793" ParentId="99" UserId="227097" Date="12/11/2011 15:49:37" Content="Good to hear about that. I will do that in future commits." />
      <Message Id="3102147" ParentId="99" UserId="330036" Date="12/12/2011 05:04:11" Content="@kohske - There are a number of keywords you can put in your commit messages that perform operations on github:&#xD;&#xA;&#xD;&#xA;&gt; We support a number of synonyms:&#xD;&#xA;&gt; &#xD;&#xA;&gt; `fixes #xxx`&#xD;&#xA;&gt; `fixed #xxx`&#xD;&#xA;&gt; `fix #xxx`&#xD;&#xA;&gt; `closes #xxx`&#xD;&#xA;&gt; `close #xxx`&#xD;&#xA;&gt; `closed #xxx`&#xD;&#xA;&#xD;&#xA;If you want to refer to an issue without closing it,  you can also use `refs #xxx` in your commit message as well. Github will automatically make the issue number a hyperlink. ([ example ][ 1 ]).&#xD;&#xA;&#xD;&#xA;**Source**: https://github.com/blog/831-issues-2-0-the-next-generation&#xD;&#xA;&#xD;&#xA;[ 1 ]: https://github.com/briandk/granovaGG/commit/0ae8f524d9e8b6f5e6c66936a80d5381d851dfbd" />
      <Message Id="3102479" ParentId="99" UserId="227097" Date="12/12/2011 06:07:13" Content="@briandk Thanks a lot!!" />
    </Messages>
  </Topic>
  <Topic Id="100" Title="Legend=FALSE should remove the legend box if there is nothing in it">
    <Messages>
      <Message Id="0" ParentId="100" UserId="18445" Date="05/19/2010 16:27:06" Content="E.g.&#xD;&#xA;&#xD;&#xA;     ggplot(mtcars,  aes(wt,  mpg)) + geom_point(aes(colour=mpg),  legend=F)&#xD;&#xA;&#xD;&#xA;should be equivalent to&#xD;&#xA;&#xD;&#xA;    ggplot(mtcars,  aes(wt,  mpg)) + geom_point(aes(colour=mpg)) + opts(legend.position=&quot;none&quot;)" />
      <Message Id="2992526" ParentId="100" UserId="4196" Date="12/02/2011 16:49:53" Content="@Kohske,  can you please check this works?" />
      <Message Id="3011900" ParentId="100" UserId="227097" Date="12/05/2011 07:01:58" Content="This issue can be closed." />
    </Messages>
  </Topic>
  <Topic Id="101" Title="geom_smooth() does not work with loess anymore">
    <Messages>
      <Message Id="0" ParentId="101" UserId="18445" Date="05/20/2010 17:00:36" Content="&#xA;It seems that predict.loess() changed the syntax of what is it returning and geom_smooth chokes on it with the error:&#xA;&#xA;    Error in names(fit) &lt;- c(&quot;y&quot;,  &quot;ymin&quot;,  &quot;ymax&quot;) : &#xA;       'names' attribute [ 3 ] must be the same length as the vector [ 1 ]&#xA;&#xA;The patch below adds a new predictdf.loess method for loess results. The confidence interval is computed as fit +/- se and I don't know if it matches what was done before.&#xA;&#xA;	diff --git a/R/stat-smooth-methods.r b/R/stat-smooth-methods.r&#xA;	index 76473a8..2207d0f 100644&#xA;	--- a/R/stat-smooth-methods.r&#xA;	+++ b/R/stat-smooth-methods.r&#xA;	@@ -19, 6 +19, 20 @@ predictdf.default &lt;- function(model,  xseq,  se,  level) { &#xA;	    } &#xA;	  }&#xA; &#xA;	+predictdf.loess &lt;- function(model,  xseq,  se,  level) { &#xA;	+  pred &lt;- stats::predict(model,  newdata = data.frame(x = xseq),  se = se, &#xA;	+    level = level,  interval = if(se) &quot;confidence&quot; else &quot;none&quot;)&#xA;	+&#xA;	+  if (se) { &#xA;	+	y = pred$fit&#xA;	+	ymin = y - pred$se.fit&#xA;	+	ymax = y + pred$se.fit&#xA;	+    data.frame(x = xseq,  y,  ymin,  ymax,  se = pred$se.fit)&#xA;	+   } else { &#xA;	+    data.frame(x = xseq,  y = as.vector(pred))&#xA;	+   }&#xA;	+ }&#xA;	+&#xA;	 predictdf.glm &lt;- function(model,  xseq,  se,  level) { &#xA;	   pred &lt;- stats::predict(model,  newdata = data.frame(x = xseq),  se = se,  &#xA;	     type = &quot;link&quot;)&#xA;" />
      <Message Id="291623" ParentId="101" UserId="4196" Date="06/29/2010 01:32:27" Content="Fixed in f3addc62a1a65331d4b3835189fb90fa0a6bfbd5.  Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="102" Title="stat_bin should handle a number of bins in addition to binwidth and breaks">
    <Messages>
      <Message Id="0" ParentId="102" UserId="18445" Date="05/21/2010 12:54:12" Content="&#xD;&#xA;Use case: when plotting the histograms of several variables at once,  the user wants some control over the fineness of the breaks but cannot provide breaks of binwidth because the units of the variables are very different.&#xD;&#xA;&#xD;&#xA;	library(ggplot2)&#xD;&#xA;	d = data.frame(id=1:100,  a=runif(100),  b=runif(100)*20,  c=runif(100)-10)&#xD;&#xA;	d = melt(d,  id=&quot;id&quot;)&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=value)) + facet_wrap(~variable,  scales=&quot;free&quot;)&#xD;&#xA;" />
      <Message Id="2992522" ParentId="102" UserId="4196" Date="12/02/2011 16:49:34" Content="Will be done as part of densityVis package." />
      <Message Id="35938301" ParentId="102" UserId="4196" Date="02/24/2014 21:13:20" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="41273679" ParentId="102" UserId="1741643" Date="04/24/2014 12:27:09" Content="Would a pull request that offers a `bincount` parameter make it into 1.0? Thanks for considering." />
      <Message Id="41273679" ParentId="102" UserId="1741643" Date="04/24/2014 12:27:09" Content="Would a pull request that offers a `bincount` parameter make it into 1.0? Thanks for considering." />
      <Message Id="41274106" ParentId="102" UserId="4196" Date="04/24/2014 12:32:11" Content="No,  it's too late now. I need to fix the last R CMD problem and then start publicising the release candidate." />
      <Message Id="41288819" ParentId="102" UserId="1741643" Date="04/24/2014 14:47:35" Content="OK. Anyway,  it should probably be `bins`,  as in `stat_contour`." />
    </Messages>
  </Topic>
  <Topic Id="103" Title="scale_area should work with negative values">
    <Messages>
      <Message Id="0" ParentId="103" UserId="18445" Date="05/23/2010 17:19:46" Content="&#xD;&#xA;Currently scale_area removes negative values:&#xD;&#xA;&#xD;&#xA;	library(&quot;ggplot2&quot;)&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=runif(10),  y=runif(10),  z=rnorm(10)*10)&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y,  size=z))&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y,  size=z)) + scale_area()&#xD;&#xA;    # Warning messages:&#xD;&#xA;    # 1: In match.fun(get(&quot;.transform&quot;,  .))(values) : NaNs produced&#xD;&#xA;    # 2: Removed 6 rows containing missing values (geom_point). &#xD;&#xA;    # removes negative values&#xD;&#xA;&#xD;&#xA;This is because it just computes the sqrt of the original values. The side effect of this,  by the way,  it that the visual difference between scale_size and scale_area depends on the range of the data which square root is being computed,  which seems wrong. Indeed,  the sqrt transformation here should happen on the radius of the points on the graph,  because it is that area we are concerned about (this is tricky,  I hope I am being clear).&#xD;&#xA;&#xD;&#xA;So in fact,  scale_area should *map* the original values to the domain defined by the 'to' argument (e.g. 1 to 6) and then compute the sqrt of that. It would solve both problems at once. The patch below transforms the data to be all positive but I don't see a way to define the inverse transformation and therefore get correct legend labels.&#xD;&#xA;&#xD;&#xA;    diff --git a/R/trans-.r b/R/trans-.r&#xD;&#xA;    index f02e163..c180a2d 100644&#xD;&#xA;    --- a/R/trans-.r&#xD;&#xA;    +++ b/R/trans-.r&#xD;&#xA;    @@ -107, 6 +107, 7 @@ TransLog1p &lt;- Trans$new(&quot;log1p&quot;,  &quot;log1p&quot;,  &quot;expm1&quot;,  function(x) bquote(e^.(x+1)))&#xD;&#xA;     TransPow10 &lt;- Trans$new(&quot;pow10&quot;, function(x) 10^x,  &quot;log10&quot;,  function(x) log10(x))&#xD;&#xA;     TransReverse &lt;- Trans$new(&quot;reverse&quot;,  function(x) -x,  function(x) -x,  function(x) bquote(.(-x)))&#xD;&#xA;     TransSqrt &lt;- Trans$new(&quot;sqrt&quot;,  &quot;sqrt&quot;,  function(x) x^2,  function(x) x^2)&#xD;&#xA;    +TransArea &lt;- Trans$new(&quot;area&quot;,  function(x) sqrt(x+abs(min(x))),  function(x) x^2,  function(x) x^2)&#xD;&#xA;&#xD;&#xA;     TransDate &lt;- Trans$new(&quot;date&quot;,  &quot;as.numeric&quot;,  &quot;to_date&quot;)&#xD;&#xA;     TransDatetime &lt;- Trans$new(&quot;datetime&quot;,  &quot;as.numeric&quot;,  &quot;to_time&quot;)&#xD;&#xA;    diff --git a/R/trans-scales.r b/R/trans-scales.r&#xD;&#xA;    index c918896..0fa79e8 100644&#xD;&#xA;    --- a/R/trans-scales.r&#xD;&#xA;    +++ b/R/trans-scales.r&#xD;&#xA;    @@ -7, 7 +7, 7 @@ ScaleArea &lt;- proto(&#xD;&#xA;       doc = FALSE, &#xD;&#xA;       new = function(.,  name=NULL,  limits=NULL,  breaks=NULL,  labels=NULL,  to = c(1,  6),  legend = TRUE) { &#xD;&#xA;         .super$new(.,  name = name,  limits = limits,  breaks = breaks,  &#xD;&#xA;    -       labels = labels,  trans=&quot;sqrt&quot;,  to = to,  legend = legend)&#xD;&#xA;    +       labels = labels,  trans=&quot;area&quot;,  to = to,  legend = legend)&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;     )&#xD;&#xA;" />
      <Message Id="2992517" ParentId="103" UserId="4196" Date="12/02/2011 16:49:14" Content="Works for me in devel.  Probably as result of scales clean up." />
    </Messages>
  </Topic>
  <Topic Id="104" Title="Use an actual gradient for the gradient scale">
    <Messages>
      <Message Id="0" ParentId="104" UserId="18445" Date="05/29/2010 14:09:55" Content="squares of color for continuous scales are misleading: virtually everyone interprets them as the fact that ggplot is doing n discrete classes of data/color and using only those in the plot (and this is reinforced by the fact that the legend looks exactly like the discrete colour legend). In addition,  people are troubled by the fact that the min and max of the scale do not necessarily match the min and max in the data.&#xD;&#xA;&#xD;&#xA;I think that a gradient of color with numbers placed on the side (determined by the breaks argument) would be more appropriate. The gradient should go from the actual min to the actual max.&#xD;&#xA;&#xD;&#xA;I guess it is impossible to actually make a gradient in grid but 10 or so squares of color would readily give the illusion of a gradient. Anyhow,  as long as there are at least one additional square between two breaks,  people will understand that the scale is continuous.&#xD;&#xA;&#xD;&#xA;For more complex scales where both size and colour are mapped to a continuous variable,  shapes could be superposed to the gradient. Such as in this example:&#xD;&#xA;&#xD;&#xA;http://dl.dropbox.com/u/1047321/ggplot/scale_gradient_ggplot2.pdf&#xD;&#xA;http://dl.dropbox.com/u/1047321/ggplot/scale_gradient_ggplot2.svg&#xD;&#xA;&#xD;&#xA;Here is a bit of code to test this:&#xD;&#xA;&#xD;&#xA;	D = data.frame(x=runif(10),  y=runif(10),  z=runif(10))&#xD;&#xA;&#xD;&#xA;	ggplot(D) + geom_point(aes(x=x,  y=y,  colour=z,  size=z))" />
      <Message Id="257599" ParentId="104" UserId="18445" Date="05/29/2010 14:18:42" Content="I added the behaviour I think would be desirable with unevenly spaced breaks to the PDF example.&#xD;&#xA;&#xD;&#xA;Code:&#xD;&#xA;&#xD;&#xA;	D = data.frame(x=runif(10),  y=runif(10),  z=runif(10))&#xD;&#xA;	ggplot(D) + geom_point(aes(x=x,  y=y,  colour=z,  size=z))&#xD;&#xA;	last_plot() + scale_colour_gradient(breaks=c(0.1,  0.2,  0.7))" />
      <Message Id="758292" ParentId="104" UserId="209031" Date="02/10/2011 07:31:07" Content="I think a good visualization of a color scale that is extended by intermediate values is:&#xD;&#xA;the color gradient scale,  fully interpolated along the whole data range,  and then the breaks as tick marks along the scale." />
      <Message Id="2992513" ParentId="104" UserId="4196" Date="12/02/2011 16:48:45" Content="Done in devel with guide = &quot;colorbar&quot;" />
    </Messages>
  </Topic>
  <Topic Id="105" Title="xend and yend not transformed when no munching (geom_segment and coord_map)">
    <Messages>
      <Message Id="0" ParentId="105" UserId="18445" Date="06/01/2010 16:11:50" Content="This bug appears in coord_map where munching can be turned on or off&#xD;&#xA;&#xD;&#xA;	D &lt;- data.frame(x=rnorm(10),  y=rnorm(10))&#xD;&#xA;	ggplot(D) + geom_segment(aes(x=x,  y=y,  xend=x+0.3,  yend=y+0.2))&#xD;&#xA;	ggplot(D) + geom_segment(aes(x=x,  y=y,  xend=x+0.3,  yend=y+0.2)) + coord_equal()&#xD;&#xA;	ggplot(D) + geom_segment(aes(x=x,  y=y,  xend=x+0.3,  yend=y+0.2)) + coord_map()&#xD;&#xA;	ggplot(D) + geom_segment(aes(x=x,  y=y,  xend=x+0.3,  yend=y+0.2)) + coord_map(fast=F)" />
      <Message Id="260202" ParentId="105" UserId="18445" Date="06/01/2010 16:15:46" Content="This can also be reproduced in coord_polar() by turning munching off at line 68 and using geom_segment (which is what I was doing initially)." />
      <Message Id="260265" ParentId="105" UserId="18445" Date="06/01/2010 17:16:07" Content="This also affects x/ymin and x/ymax in geom_tile:&#xD;&#xA;&#xD;&#xA;	x=1:5&#xD;&#xA;	y=1:5&#xD;&#xA;	D &lt;- expand.grid(x=x,  y=y)&#xD;&#xA;	D$z &lt;- runif(nrow(D))&#xD;&#xA;	ggplot(D) + geom_tile(aes(x=x,  y=y,  fill=z))&#xD;&#xA;	ggplot(D) + geom_tile(aes(x=x,  y=y,  fill=z)) + coord_map()&#xD;&#xA;	ggplot(D) + geom_tile(aes(x=x,  y=y,  fill=z)) + coord_map(fast=F)&#xD;&#xA;" />
      <Message Id="286485" ParentId="105" UserId="18445" Date="06/24/2010 09:29:35" Content="This is actually the same as issue #44 with more details." />
      <Message Id="289636" ParentId="105" UserId="4196" Date="06/27/2010 13:51:01" Content="Munching can no longer be turned off in `coord_map`,  avoiding this problem." />
    </Messages>
  </Topic>
  <Topic Id="106" Title="Let the user control munching for coords">
    <Messages>
      <Message Id="0" ParentId="106" UserId="18445" Date="06/03/2010 13:03:11" Content="Allowing access to munch = T or F would allow to plot straight lines in coord_polar or coord_map for example. For coord_map this is already done through the &quot;fast&quot; argument. This request is for a similar feature in coord_polar (at least,  I cannot see other uses in other coords but you might).&#xA;&#xA;However for this to work,  issue #105 should be resolved." />
      <Message Id="289645" ParentId="106" UserId="4196" Date="06/27/2010 14:04:40" Content="I think we can now do this on a per layer basis by setting segment_length to Inf.  I'll need to think about how to parameterise it though." />
      <Message Id="6213599" ParentId="106" UserId="4196" Date="06/08/2012 21:35:35" Content="This is going to be a huge amount of work to add to the current API,  but should be relatively straightforward once the geom/stat rewrite is complete.  I'm moving the milestone to 0.9.3 which is when (hopefully) that will occur." />
      <Message Id="35938281" ParentId="106" UserId="4196" Date="02/24/2014 21:13:13" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="107" Title="Better control over strip labels">
    <Messages>
      <Message Id="0" ParentId="107" UserId="4196" Date="06/04/2010 12:13:54" Content="Facets should have:&#xD;&#xA;&#xD;&#xA;  * `strips = T` to always show labels&#xD;&#xA;  * `strips = F` to never show labels&#xD;&#xA;  * `strips = NA` to show labels when possibility of confusion" />
      <Message Id="764513" ParentId="107" UserId="613671" Date="02/11/2011 23:06:58" Content="This would be great!&#xD;&#xA;" />
      <Message Id="35938253" ParentId="107" UserId="4196" Date="02/24/2014 21:12:59" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="108" Title="Incorrect hinge calculation in stat_boxplot for v. small datasets">
    <Messages>
      <Message Id="0" ParentId="108" UserId="4196" Date="06/11/2010 14:31:10" Content="    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    DF &lt;- data.frame(&#xD;&#xA;      time = factor(c(7, 21, 49, 70, 7, 21, 49, 70, 7, 21, 49, 70, 7, 21, 49, 70)), &#xD;&#xA;      value = c(2, 4, 6, 3, 1, 5, 9, 5, 1, 6, 8, 2, 1, 7, 8, 4))&#xD;&#xA;&#xD;&#xA;    ggplot(DF,  aes(time,  value)) +&#xD;&#xA;      geom_boxplot(fill = NA)" />
      <Message Id="3056558" ParentId="108" UserId="86978" Date="12/08/2011 01:30:25" Content="It looks like there are two issues going into this problem:&#xD;&#xA;&#xD;&#xA;* `quantile()` (used by `stat_boxplot`) doesn't do exactly the same thing as `boxplot.stats` (used by `boxplot`).&#xD;&#xA;* The whisker calculation in `stat_boxplot` is off. For example,  if there are 4 data points,  it draws the lower whisker to the second-lowest data point,  but that data point may be higher than the lower hinge.&#xD;&#xA;&#xD;&#xA;Here's an adapted version of the example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(plyr)&#xD;&#xA;&#xD;&#xA;DF &lt;- data &lt;- read.table(header=TRUE,  con &lt;- textConnection('&#xD;&#xA; time value&#xD;&#xA;    7     2&#xD;&#xA;    7     1&#xD;&#xA;    7     1&#xD;&#xA;    7     1&#xD;&#xA;   21     4&#xD;&#xA;   21     5&#xD;&#xA;   21     6&#xD;&#xA;   21     7&#xD;&#xA;   49     6&#xD;&#xA;   49     9&#xD;&#xA;   49     8&#xD;&#xA;   49     8.2&#xD;&#xA;   70     3&#xD;&#xA;   70     5&#xD;&#xA;   70     2&#xD;&#xA;   70     4&#xD;&#xA; '))&#xD;&#xA;close(con)&#xD;&#xA;&#xD;&#xA;DF$time &lt;- factor(DF$time)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Compare the output from ggplot and boxplot. The hinges for some of the boxes are in different places&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(DF,  aes(time,  value)) + geom_boxplot(fill = NA) + geom_point(shape=21,  colour=&quot;red&quot;,  position=position_jitter(width=.1,  height=0))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;boxplot(value ~ time,  DF)&#xD;&#xA;points(jitter(as.numeric(DF$time), .3),  DF$value)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;We can look at the data for the third box,  and compare the output of `boxplot.stats` to the output of `quantile`,  as called by `stat_boxplot`. The middle three numbers should be the same,  but they're not. (The first and last numbers aren't necessarily the same between the two methods,  because they represent different things.)&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;x &lt;- c(6,  8,  8.2,  9)&#xD;&#xA;&#xD;&#xA;boxplot.stats(x)$stats&#xD;&#xA;# 6.0 7.0 8.1 8.6 9.0&#xD;&#xA;&#xD;&#xA;qs &lt;- c(0,  0.25,  0.5,  0.75,  1)&#xD;&#xA;quantile(x,  qs)&#xD;&#xA;#  0%  25%  50%  75% 100% &#xD;&#xA;# 6.0  7.5  8.1  8.4  9.0 &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Here's what the help file for `boxplot.stats` says:&#xD;&#xA;&#xD;&#xA;&gt; The two ‘hinges’ are versions of the first and third quartile,  i.e.,  close to ‘quantile(x,  c(1, 3)/4)’.  The hinges equal the quartiles for odd n (where ‘n &lt;- length(x)’) and differ for even n.  Whereas the quartiles only equal observations for ‘n %% 4 == 1’ (n = 1 mod 4),  the hinges do so _additionally_ for ‘n %% 4 == 2’ (n = 2 mod 4),  and are in the middle of two observations otherwise.    &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;A look into the code shows that `boxplot.stats` uses the `fivenum` function to get the box plot summary values. &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;fivenum(x)&#xD;&#xA;# 6.0 7.0 8.1 8.6 9.0&#xD;&#xA;```&#xD;&#xA;This function could also be used in `stat_boxplot`,  but I'm not sure how to generalize it to weighted box plots,  because it references discrete data points (e.g.,  every fourth data point,  do X). This could be simulated,  but only if the weights are all integers." />
      <Message Id="3056674" ParentId="108" UserId="86978" Date="12/08/2011 01:44:45" Content="Apparently someone has written a replacement for fivenum that can deal with weighted values.&#xD;&#xA;http://www.stat.cmu.edu/~hseltman/files/WeightedBoxplot.R&#xD;&#xA;&#xD;&#xA;It's in the function `wboxplot.stats`. I don't know how it works,  though -- and I don't know if effectively it's any different from the method used in `stat_boxplot`." />
      <Message Id="3070549" ParentId="108" UserId="4196" Date="12/08/2011 21:47:28" Content="That code would need a lot of work.  We might be able to adapt the code from lvplot: https://github.com/hadley/lvplot/blob/master/R/calculate.r" />
      <Message Id="3070733" ParentId="108" UserId="86978" Date="12/08/2011 22:03:02" Content="I actually don't think it would be horribly difficult. I think this block is effectively a replacement for `fivenum`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    # stats &lt;- stats::fivenum(x,  na.rm = TRUE)&#xD;&#xA;    xw=cbind(x, weights)&#xD;&#xA;    xw=xw[ nna,  ]&#xD;&#xA;    if (length(xw)==0) { &#xD;&#xA;      stats=rep.int(NA,  5)&#xD;&#xA;     } else { &#xD;&#xA;      xw=xw[ order(xw[ , 1 ]),  ]&#xD;&#xA;      cs=c(0, cumsum(xw[ , 2 ])/sum(xw[ , 2 ]))&#xD;&#xA;      x0=c(xw[ 1, 1 ], xw[ , 1 ])&#xD;&#xA;      n=length(x0)&#xD;&#xA;      stats=c(x0[ 1 ], NA, NA, NA, x0[ n ])&#xD;&#xA;      for (i in 2:4) { &#xD;&#xA;        pr=c(NA, 0.25, 0.5, 0.75)[ i ]&#xD;&#xA;        v1=x0[ cs==pr ]&#xD;&#xA;        if (length(v1)==1) { &#xD;&#xA;          stats[ i ]=v1&#xD;&#xA;         } else { &#xD;&#xA;          n1=max((1:n)[ cs&lt;pr ])&#xD;&#xA;          n2=min((1:n)[ cs&gt;pr ])&#xD;&#xA;          pr1=cs[ n1 ]; pr2=cs[ n2 ]&#xD;&#xA;          v1=x0[ n1 ]; v2=x0[ n2 ]&#xD;&#xA;          stats[ i ]=v1+(pr-pr1)/(pr2-pr1)*(v2-v1)&#xD;&#xA;         }&#xD;&#xA;       }&#xD;&#xA;     }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;So for unweighted boxplots,  you could just use `fivenum`,  and for weighted boxplots you could use this code (assuming no licensing issues). This assumes that this code does what you want -- I don't what's supposed to be correct for a weighted boxplot,  so I'm not able to make that evaluation..." />
      <Message Id="3074080" ParentId="108" UserId="4196" Date="12/09/2011 01:20:04" Content="That block of code makes my eyes bleed :/ " />
      <Message Id="3215602" ParentId="108" UserId="86978" Date="12/20/2011 07:31:00" Content="I've issued a pull request for a fix of the inverted whiskers. The other problem is still present.&#xD;&#xA;&#xD;&#xA;After some more investigation,  I don't think it's possible to make a function based on weighted quartiles give exactly the same output as `fivenum` (or by extension `boxplot()`). According to the docs for `boxplot.stats`:&#xD;&#xA;&#xD;&#xA;&gt;  The hinges equal the quartiles for odd n (where `n &lt;- length(x)`) and differ for even n. Whereas the quartiles only equal observations for `n %% 4 == 1`,  the hinges do so _additionally_ for `n %% 4 == 2`&#xD;&#xA;&#xD;&#xA;In other words,  quartiles and hinges don't always line up,  and it depends on the exact number of observations. This example code illustrates:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qs &lt;- c(0,  0.25,  0.5,  0.75,  1)&#xD;&#xA;x &lt;- c(1,  2,  3)&#xD;&#xA;&#xD;&#xA;fivenum(x)&#xD;&#xA;# [ 1 ] 1.0 1.5 2.0 2.5 3.0&#xD;&#xA;as.numeric(quantile(x,  qs))&#xD;&#xA;# [ 1 ] 1.0 1.5 2.0 2.5 3.0&#xD;&#xA;&#xD;&#xA;fivenum(c(x,  x))&#xD;&#xA;# [ 1 ] 1 1 2 3 3&#xD;&#xA;as.numeric(quantile(c(x,  x),  qs))&#xD;&#xA;# [ 1 ] 1.00 1.25 2.00 2.75 3.00&#xD;&#xA;&#xD;&#xA;fivenum(c(x,  x,  x))&#xD;&#xA;# [ 1 ] 1 1 2 3 3&#xD;&#xA;as.numeric(quantile(c(x,  x,  x),  qs))&#xD;&#xA;# [ 1 ] 1 1 2 3 3&#xD;&#xA;``` &#xD;&#xA;&#xD;&#xA;I think there are two options:&#xD;&#xA;&#xD;&#xA;1. Use `fivenum` for unweighted data and cases where the weights have whole number values. For other cases,  (where weights are non-integers),  use the current quantreg method. Also make a note of it in the documentation.&#xD;&#xA;2. Always use quartiles.&#xD;&#xA;&#xD;&#xA;I'm inclined toward 2,  mostly because I haven't been able to find any information saying that the method used in `fivenum` is better than using actual quartiles.&#xD;&#xA;&#xD;&#xA;On top of all that,  there apparently exist at least nine different ways out there of computing quartiles,  so maybe it's not so important to get results that are consistent with any particular method.&#xD;&#xA;http://www.amstat.org/publications/jse/v14n3/langford.html" />
      <Message Id="3218884" ParentId="108" UserId="4196" Date="12/20/2011 13:42:52" Content="I think we should use quantiles,  and then mention that in the documentation." />
    </Messages>
  </Topic>
  <Topic Id="109" Title="Should be able to override legend aesthetics">
    <Messages>
      <Message Id="0" ParentId="109" UserId="4196" Date="06/11/2010 14:38:14" Content="Maybe something like:&#xD;&#xA;&#xD;&#xA;    test_data &lt;- data.frame(&#xD;&#xA;      x = rnorm(100),  &#xD;&#xA;      y = rnorm(100),  &#xD;&#xA;      cat1 = factor(rep(c(1,  2),  times = c(50,  50))),  &#xD;&#xA;      cat2 = rnorm(100))&#xD;&#xA;    ggplot(test_data,  aes(x,  y)) +&#xD;&#xA;      geom_point(aes(colour = cat1,  size = cat2),  alpha = 1/2) + &#xD;&#xA;      scale_size(alpha = 1) + &#xD;&#xA;      scale_colour(alpha = 1)" />
      <Message Id="2992511" ParentId="109" UserId="4196" Date="12/02/2011 16:48:12" Content="Done in devel." />
    </Messages>
  </Topic>
  <Topic Id="110" Title="Facet_wrap should support margins">
    <Messages>
      <Message Id="0" ParentId="110" UserId="4196" Date="06/11/2010 15:10:52" Content="" />
      <Message Id="340352" ParentId="110" UserId="81310" Date="08/04/2010 02:16:11" Content="absolutely needed" />
      <Message Id="35938248" ParentId="110" UserId="4196" Date="02/24/2014 21:12:55" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="111" Title="fails to reproduce geom_histogram example for coord_trans">
    <Messages>
      <Message Id="0" ParentId="111" UserId="303360" Date="06/12/2010 06:59:05" Content="reproduce: &#xA;1. grab ggplot2 from cran&#xA;2. do the following &#xA;&#xA;m &lt;- ggplot(movies,  aes(x=votes))&#xA;m + geom_histogram() + coord_trans(x=&quot;log10&quot;)&#xA;&#xA;works ok. But&#xA;&#xA;m + geom_histogram() + coord_trans(y=&quot;log10&quot;)&#xA;&#xA;gives &#xA;&#xA;Error in if (length(from) == 1 || length(to) == 1 || from[ 1 ] == from[ 2 ] ||  :&#xA;  missing value where TRUE/FALSE needed" />
      <Message Id="273634" ParentId="111" UserId="4196" Date="06/13/2010 17:17:07" Content="Needs to give a more informative error message." />
      <Message Id="5252866" ParentId="111" UserId="86978" Date="04/20/2012 20:51:01" Content="It looks like neither of the graphs work anymore." />
    </Messages>
  </Topic>
  <Topic Id="112" Title="Problem with data munching in geom_ribbon (revealed by coord_polar)">
    <Messages>
      <Message Id="0" ParentId="112" UserId="18445" Date="06/21/2010 17:28:28" Content="Here is an example:&#xA;&#xA;	library(ggplot2)&#xA;	d &lt;- data.frame(x=runif(10),  y=rnorm(10))&#xA;	ggplot(d) + geom_ribbon(aes(x=x,  ymin=y,  ymax=y+1))&#xA;	last_plot() + coord_polar(theta=&quot;x&quot;)&#xA;&#xA;Which results in&#xA;&#xA;	Error in validDetails.polygon(x) : &#xA;	  'x' and 'y' and 'id' must all be same length&#xA;&#xA;And this is caused by commit a3c640bee846580c238f3d5c3ae2ba3ab70713bc&#xA;&#xA;	Author: hadley &lt;h.wickham@gmail.com&gt;&#xA;	Date:   Fri Jun 11 10:25:37 2010 -0500&#xA; 	   Manually incorporate patch for geom_smooth&#xA;&#xA;which introduced poly_ids,  which are not munched,  hence do not have the same length as x and y in coord_polar(). The following patch seems to fix it. I used ..ids.. as a new variable name to mimic what stats do when they produce new variables but maybe this not desirable.&#xA;&#xA;    diff --git a/R/geom-ribbon-.r b/R/geom-ribbon-.r&#xA;    index c889746..9254cb0 100644&#xA;    --- a/R/geom-ribbon-.r&#xA;    +++ b/R/geom-ribbon-.r&#xA;    @@ -16, 8 +16, 8 @@ GeomRibbon &lt;- proto(Geom,  { &#xA;        # has distinct polygon numbers for sequences of non-NA values and NA&#xA;        # for NA values in the original data.  Example: c(NA,  2,  2,  2,  NA,  NA, &#xA;        # 4,  4,  4,  NA)&#xA;    -    poly_ids &lt;- cumsum(!complete.cases(data[ required_aes ])) + 1&#xA;    -    poly_ids[ !complete.cases(data[ required_aes ]) ] &lt;- NA&#xA;    +    data$..ids.. &lt;- cumsum(!complete.cases(data[ required_aes ])) + 1&#xA;    +    data$..ids..[ !complete.cases(data[ required_aes ]) ] &lt;- NA&#xA; &#xA;        tb &lt;- with(data, &#xA;          coordinates$munch(data.frame(x=c(x,  rev(x)),  y=c(ymax,  rev(ymin))),  scales)&#xA;    @@ -25, 12 +25, 12 @@ GeomRibbon &lt;- proto(Geom,  { &#xA; &#xA;        with(data,  ggname(.$my_name(),  gTree(children=gList(&#xA;          ggname(&quot;fill&quot;,  polygonGrob(&#xA;    -        tb$x,  tb$y,  id=c(poly_ids,  rev(poly_ids)), &#xA;    +        tb$x,  tb$y,  tb$..ids.., &#xA;            default.units=&quot;native&quot;, &#xA;            gp=gpar(fill=alpha(fill,  alpha),  col=NA) &#xA;          )), &#xA;          ggname(&quot;outline&quot;,  polygonGrob(&#xA;    -        tb$x,  tb$y,  id=c(poly_ids,  rev(poly_ids)), &#xA;    +        tb$x,  tb$y,  tb$..ids.., &#xA;            default.units=&quot;native&quot;, &#xA;            gp=gpar(fill=NA,  col=colour,  lwd=size * .pt,  lty=linetype)&#xA;          ))&#xA;" />
      <Message Id="284174" ParentId="112" UserId="4196" Date="06/22/2010 16:14:04" Content="Something is wrong with my entire approach here.  I'll need to think about this a bit." />
      <Message Id="284198" ParentId="112" UserId="4196" Date="06/22/2010 16:41:58" Content="Fixed in 96ac4424f1638aff53f31213e9becffdb7089b05. Hopefully the code is now more clear so I don't get confused in the future." />
      <Message Id="287218" ParentId="112" UserId="18445" Date="06/24/2010 20:41:14" Content="That works indeed. I think this can be closed." />
    </Messages>
  </Topic>
  <Topic Id="113" Title="Finish fixing coord_equal">
    <Messages>
      <Message Id="0" ParentId="113" UserId="18445" Date="06/21/2010 18:10:37" Content="&#xD;&#xA;Here is a suggested patch:&#xD;&#xA;&#xD;&#xA;	diff --git a/R/coord-cartesian-equal.r b/R/coord-cartesian-equal.r&#xD;&#xA;	index 2ed54dc..d9e59fa 100644&#xD;&#xA;	--- a/R/coord-cartesian-equal.r&#xD;&#xA;	+++ b/R/coord-cartesian-equal.r&#xD;&#xA;	@@ -11, 7 +11, 7 @@ CoordFixed &lt;- proto(CoordCartesian,  { &#xD;&#xA;	   # Documentation -----------------------------------------------&#xD;&#xA; &#xD;&#xA;	   objname &lt;- &quot;fixed&quot;&#xD;&#xA;	-  alias &lt;- &quot;equal&quot;&#xD;&#xA;	+  aliases &lt;- &quot;equal&quot;&#xD;&#xA;	   desc &lt;- &quot;Cartesian coordinates with fixed relationship between x and y scales.&quot;&#xD;&#xA;	   icon &lt;- function(.) textGrob(&quot;=&quot;,  gp = gpar(cex=3))  &#xD;&#xA;   &#xD;&#xA;	diff --git a/R/xxx.r b/R/xxx.r&#xD;&#xA;	index 8df71c9..cd129a2 100644&#xD;&#xA;	--- a/R/xxx.r&#xD;&#xA;	+++ b/R/xxx.r&#xD;&#xA;	@@ -1, 5 +1, 5 @@&#xD;&#xA;	 coord_cartesian &lt;- CoordCartesian$build_accessor()&#xD;&#xA;	-coord_equal &lt;- CoordEqual$build_accessor()&#xD;&#xA;	+coord_fixed &lt;- CoordFixed$build_accessor()&#xD;&#xA;	 coord_flip &lt;- CoordFlip$build_accessor()&#xD;&#xA;	 coord_map &lt;- CoordMap$build_accessor()&#xD;&#xA;	 coord_polar &lt;- CoordPolar$build_accessor()&#xD;&#xA;" />
      <Message Id="284162" ParentId="113" UserId="4196" Date="06/22/2010 16:01:33" Content="Ooops,  fixed in 6ab3e74e55205bba568c62fcae3da5708ba488ab.  Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="114" Title="geom_boxplot broken">
    <Messages>
      <Message Id="0" ParentId="114" UserId="18445" Date="06/21/2010 18:13:32" Content="For example:&#xA;&#xA;	library(ggplot2)&#xA;	ggplot(data.frame(x=rep(c(&quot;A&quot;,  &quot;B&quot;),  each=50),  y=runif(100))) + geom_boxplot(aes(x=x,  y=y))&#xA;&#xA;returns:&#xA;&#xA;	Error in data.frame(ymin = c(0.00276190647855401,  0.00336029147729278),   : &#xA;	  arguments imply differing number of rows: 2,  0,  1&#xA;&#xA;on my machine with latest ggplot (commit 4c1a47efd0a75c8f25aa063f5a2e74417df0122c). Yet geom_boxplot hasn't been touched since 9b4c6ae0a566cdc5dca09e95e9beae213786e532,  Mon Jun 8 15:44:54 2009 ...)&#xA;" />
      <Message Id="284659" ParentId="114" UserId="4196" Date="06/22/2010 21:53:14" Content="Works for me.  May be plyr related." />
      <Message Id="287221" ParentId="114" UserId="18445" Date="06/24/2010 20:43:15" Content="Still does not work for me with latest ggplot (b23dc71a6348a918b5e1aea47113f58d40f3ea46) and latest plyr (cfcdd4cd3c7f02821734607dd0454bdeeabde289)" />
      <Message Id="297750" ParentId="114" UserId="4196" Date="07/03/2010 13:17:43" Content="Fixed,  but I forgot which commit :(" />
    </Messages>
  </Topic>
  <Topic Id="115" Title="Variable name not recognized in facet_wrap">
    <Messages>
      <Message Id="0" ParentId="115" UserId="18445" Date="06/21/2010 20:03:59" Content="Example:&#xD;&#xA;&#xD;&#xA;	dat &lt;- data.frame(a=rep(c(&quot;a&quot;, &quot;b&quot;),  each=10),  x=runif(20),  y=runif(20))&#xD;&#xA;	ggplot(dat) + geom_point(aes(x=x,  y=y)) + facet_grid(.~a)&#xD;&#xA;	# OK&#xD;&#xA;	ggplot(dat) + geom_point(aes(x=x,  y=y)) + facet_wrap(~a)&#xD;&#xA;	# Error in eval(expr,  envir,  enclos) : object 'a' not found&#xD;&#xA;	ggplot(dat) + geom_point(aes(x=x,  y=y)) + facet_wrap(.~a)&#xD;&#xA;	# Error in eval(expr,  envir,  enclos) : object 'a' not found&#xD;&#xA;&#xD;&#xA;it seems related to as.quoted in plyr." />
      <Message Id="291624" ParentId="115" UserId="4196" Date="06/29/2010 01:33:24" Content="Was namespace problem with plyr. Now fixed." />
    </Messages>
  </Topic>
  <Topic Id="116" Title="facet_wrap needs split_labels">
    <Messages>
      <Message Id="0" ParentId="116" UserId="18445" Date="06/24/2010 10:30:08" Content="With latest ggplot (6ab3e74e55205bba568c62fcae3da5708ba488ab)&#xD;&#xA;&#xD;&#xA;	library(ggplot2)&#xD;&#xA;	ggplot(diamonds) + geom_point(aes(x=x,  y=y)) + facet_wrap(~cut)&#xD;&#xA;&#xD;&#xA;does not find split_labels. When split_labels is correctly exported form plyr,  this still gives:&#xD;&#xA;&#xD;&#xA;	Error in rep.int(1L,  nrow(.variables)) : &#xD;&#xA;	  incorrect type for second argument&#xD;&#xA;" />
      <Message Id="291423" ParentId="116" UserId="4196" Date="06/28/2010 22:29:54" Content="I've fixed the first problem by exporting split_labels from plyr,  but I can't reproduce the second problem (I get a different error).  I'll try and fix it this evening." />
      <Message Id="291592" ParentId="116" UserId="4196" Date="06/29/2010 00:58:17" Content="Fixed in ff7346cba7051e389b00861fe226692db969191d - another namespace issue." />
    </Messages>
  </Topic>
  <Topic Id="117" Title="coord_map suppresses arrows on segments">
    <Messages>
      <Message Id="0" ParentId="117" UserId="18445" Date="06/29/2010 18:00:58" Content="	qplot(0, 1, xend=1, yend=2,  geom=&quot;segment&quot;,  arrow=arrow(length=unit(1, &quot;cm&quot;))) &#xD;&#xA;	last_plot() + coord_map()&#xD;&#xA;&#xD;&#xA;Similar with arrows in &quot;native&quot;,  &quot;npc&quot;,  &quot;in&quot;." />
      <Message Id="292494" ParentId="117" UserId="18445" Date="06/29/2010 18:16:20" Content="I add that this is fairly recent. It used to work a couple of days ago." />
      <Message Id="294109" ParentId="117" UserId="4196" Date="06/30/2010 19:35:19" Content="It looks like a new bug,  but only because coord_map now always munches - it would have also been a problem with coord_polar.  Fixed in b25dec5a40c59e3b7b6532e6764251b112c8a0d2" />
    </Messages>
  </Topic>
  <Topic Id="118" Title="Extra axes labels when zooming in coord_map and using facets ">
    <Messages>
      <Message Id="0" ParentId="118" UserId="18445" Date="06/29/2010 18:21:55" Content="All labels that are within the plotting window are plotted even if they do not correspond to a plotting area anymore.&#xD;&#xA;&#xD;&#xA;	d &lt;- data.frame(x=runif(20),  y=runif(20),  a=rep(c(&quot;a&quot;, &quot;b&quot;), 10))&#xD;&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~.)&#xD;&#xA;	last_plot() + coord_map()&#xD;&#xA;	last_plot() + coord_map(ylim=c(0.39, 0.59))&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="294136" ParentId="118" UserId="4196" Date="06/30/2010 19:50:06" Content="I don't know how to solve this - I basically need to check if the locations on the ticks fall inside the projected bounding box.  It's probably really simple." />
      <Message Id="3090933" ParentId="118" UserId="4196" Date="12/10/2011 14:01:10" Content="Also currently a problem with legends,  and zooming with coord_cartesian.  Need to write tests to ensure it's fixed." />
      <Message Id="3091214" ParentId="118" UserId="227097" Date="12/10/2011 15:03:46" Content="@hadley do you have a simple example of this problem w.r.t. zooming and legends?" />
      <Message Id="3091273" ParentId="118" UserId="4196" Date="12/10/2011 15:15:26" Content="Here's a simple plot that illustrates both problems:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(displ,  hwy,  data =mpg,  colour = hwy) + &#xD;&#xA;  coord_cartesian(xlim = c(2.1, 4.9)) + &#xD;&#xA;  scale_colour_gradient(breaks = seq(0,  40,  by = 10))&#xD;&#xA;```" />
      <Message Id="3091406" ParentId="118" UserId="227097" Date="12/10/2011 15:46:42" Content="Thanks.&#xD;&#xA;&#xD;&#xA;This may be fixed by improving guides.&#xD;&#xA;Now I'm improving the guides that are sensitive to the apparence of data like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d1 &lt;- data.frame(x = rep(1:5,  2),  y = c(1:5,  2:6),  g = gl(2,  5,  labels = 1:2))&#xD;&#xA;d2 &lt;- data.frame(x = rep(1:5,  2),  y = c(1:5,  2:6)+0.5,  g = gl(2,  5,  labels = 3:4))&#xD;&#xA;ggplot(d1,  aes(x,  y,  colour = g,  size=g)) + geom_line() + geom_point(data = d2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and the output is like this: https://skitch.com/e-kohske/gxe9d/quartz-2&#xD;&#xA;&#xD;&#xA;My idea is similar than yours.&#xD;&#xA;For the discrete scales,  unused level will be dropped.&#xD;&#xA;For the continuous scales,  the out-of-range will be dropped.&#xD;&#xA;And the guides include both positional and non-positional guides.&#xD;&#xA;&#xD;&#xA;But anyway,  not easy.&#xD;&#xA;So,  a quick fix is preferable for the next release." />
      <Message Id="3095603" ParentId="118" UserId="227097" Date="12/11/2011 04:29:15" Content="here is a quick test code (testthat is preferable).&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;l(ggplot2,  T)&#xD;&#xA;qplot(displ,  hwy,  data =mpg,  colour = hwy) + coord_cartesian(xlim = c(2.1, 4.9),  ylim = c(20,  50)) + scale_colour_gradient(breaks = seq(0,  40,  by=10))&#xD;&#xA;&#xD;&#xA;qplot(displ,  hwy,  data =mpg,  colour = hwy) + coord_cartesian(xlim = c(2.1, 4.9),  ylim = c(20,  50),  wise=T) + scale_colour_gradient(breaks = seq(0,  40,  by=10))&#xD;&#xA;&#xD;&#xA;qplot(displ*10,  hwy,  data =mpg,  colour = hwy) + coord_map(xlim = c(21, 49),  ylim = c(20,  50)) + scale_colour_gradient(breaks = seq(0,  40,  by=10))&#xD;&#xA;&#xD;&#xA;# coord_map does not support wisely zooming&#xD;&#xA;#qplot(displ*10,  hwy,  data =mpg,  colour = hwy) + coord_map(xlim = c(21, 49),  ylim = c(20,  50),  wise = T) + scale_colour_gradient(breaks = seq(0,  40,  by=10))&#xD;&#xA;&#xD;&#xA;# coord_polar does not support manual limints&#xD;&#xA;# qplot(displ,  hwy,  data =mpg,  colour = hwy) + coord_polar() + scale_colour_gradient(breaks = seq(0,  40,  by=10))&#xD;&#xA;&#xD;&#xA;qplot(displ,  hwy,  data =mpg,  colour = hwy,  size = hwy) + scale_colour_gradient(breaks = seq(0,  40,  by=10)) + scale_size(breaks = seq(0,  40,  by=10))&#xD;&#xA;qplot(displ,  hwy,  data =mpg,  colour = hwy,  size = hwy)&#xD;&#xA;```" />
      <Message Id="3145358" ParentId="118" UserId="227097" Date="12/14/2011 17:57:01" Content="I want to make clear how the legend should handle `NA`s.&#xD;&#xA;&#xD;&#xA;At the moment,  all `break`s outside the data limits will not be drawn,  since it doesn't have values.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(1:3,  1:3,  col = 1:3) + scale_colour_continuous(breaks = 0:4)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;so,  drops `0` and `4` from the legend.&#xD;&#xA;&#xD;&#xA;However,  sometimes,  `NA` should be drawn. e.g.:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(1:3,  1:3,  fill = c(1,  NA,  2)) + geom_tile()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This plot will visualize which data has missing column. In this case,  maybe `NA` should be drawn. In this view,  all out-of-range but `NA` breaks should be dropped.&#xD;&#xA;&#xD;&#xA;However,  however,  if `breaks = NA` is passed to scale,  the breaks should not be drawn.&#xD;&#xA;&#xD;&#xA;So,  finally,  my stragety is like that:&#xD;&#xA;1. out-of-bounds breaks are dropped even if it is explicitly specified.&#xD;&#xA;2. if data includes `NA` and `na.value` of the scale is not `NA` (i.e.,  colour and fill),  the `NA` appears in the legend,  since it will show where `NA` is in the data.&#xD;&#xA;3. if `breaks=NA`,  then the legend itself is dropped.&#xD;&#xA;&#xD;&#xA;Does this make sense?" />
      <Message Id="3234419" ParentId="118" UserId="4196" Date="12/21/2011 14:44:38" Content="Yes,  that strategy makes sense to me. " />
      <Message Id="3234430" ParentId="118" UserId="4196" Date="12/21/2011 14:45:24" Content="I wonder if that strategy should be implemented by `scale_breaks`" />
      <Message Id="3234451" ParentId="118" UserId="4196" Date="12/21/2011 14:46:46" Content="And perhaps the default value for breaks should be `waiver()` so that then `NULL` would suppress breaks altogether." />
      <Message Id="3236128" ParentId="118" UserId="227097" Date="12/21/2011 16:47:37" Content="I agree with using `waiver()`. Basically using `NA` for some flags is confusing.&#xD;&#xA;Will you fix this?" />
      <Message Id="3236378" ParentId="118" UserId="4196" Date="12/21/2011 17:05:06" Content="Let's do that later - see #313" />
      <Message Id="3236480" ParentId="118" UserId="227097" Date="12/21/2011 17:11:53" Content="OK.&#xD;&#xA;What about this https://github.com/hadley/ggplot2/pull/306/files#diff-10 ?&#xD;&#xA;It is easy to fix so that `scale_breaks` returns `NULL` when `scale_XXX(breaks = NA)`, &#xD;&#xA;but maybe this change will introduce unexpected bugs. Not sure.&#xD;&#xA;&#xD;&#xA;It may be better to fix this with moving `waiver`." />
      <Message Id="3236534" ParentId="118" UserId="4196" Date="12/21/2011 17:15:42" Content="Fixed with Kohske's latest patch." />
      <Message Id="3236588" ParentId="118" UserId="4196" Date="12/21/2011 17:20:17" Content="Yes,  let's fix that as part of a wider move to using waiver." />
    </Messages>
  </Topic>
  <Topic Id="119" Title="scale_identity doesn't display legend even when labels set">
    <Messages>
      <Message Id="0" ParentId="119" UserId="4196" Date="06/30/2010 16:13:38" Content="    colour &lt;- c(&quot;red&quot;,  &quot;green&quot;,  &quot;blue&quot;,  &quot;yellow&quot;)&#xD;&#xA;    qplot(1:4,  1:4,  fill = colour,  geom = &quot;tile&quot;) +&#xD;&#xA;      scale_fill_identity(&quot;trt&quot;,  labels = letters[ 1:4 ],  breaks = colour)&#xD;&#xA;" />
      <Message Id="542927" ParentId="119" UserId="4196" Date="11/15/2010 17:34:56" Content="Fixed by Koshke - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="120" Title="Annotation does not appear unless fill is set">
    <Messages>
      <Message Id="0" ParentId="120" UserId="4196" Date="07/03/2010 13:14:30" Content="    labs &lt;- expression( ,  NC==17,  PG,  PG==13,  R)&#xD;&#xA;    ggplot(data = movies,  aes(x = rating,  fill = NA)) +&#xD;&#xA;      geom_density(alpha = I(0.2),  aes_string(fill = &quot;mpaa&quot;)) +&#xD;&#xA;      scale_fill_discrete(name = &quot;mpaa&quot;,  breaks = levels(movies$mpaa), &#xD;&#xA;         labels = labs,  formatter = parse) +&#xD;&#xA;      geom_text(x = Inf,  y = Inf,  label = &quot;Test&quot;,  hjust = 1,  vjust = 1)&#xD;&#xA;&#xD;&#xA;    # Annotation in top-right corner disappears&#xD;&#xA;    ggplot(data = movies,  aes(x = rating)) +&#xD;&#xA;      geom_density(alpha = I(0.2),  aes_string(fill = &quot;mpaa&quot;)) +&#xD;&#xA;      scale_fill_discrete(name = &quot;mpaa&quot;,  breaks = levels(movies$mpaa), &#xD;&#xA;         labels = labs,  formatter = parse) +&#xD;&#xA;      geom_text(x = Inf,  y = Inf,  label = &quot;Test&quot;,  hjust = 1,  vjust = 1)" />
      <Message Id="3101018" ParentId="120" UserId="4196" Date="12/12/2011 01:08:19" Content="Better test case is&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;ggplot(data = mtcars,  aes(x = mpg,  fill = NA)) +&#xD;&#xA;  geom_density(alpha = 0.2,  aes(fill = factor(vs))) +&#xD;&#xA;  geom_text(x = Inf,  y = Inf,  label = &quot;Test&quot;,  hjust = 1,  vjust = 1)&#xD;&#xA;&#xD;&#xA;ggplot(data = mtcars,  aes(x = mpg)) +&#xD;&#xA;  geom_density(alpha = 0.2,  aes(fill = factor(vs))) +&#xD;&#xA;  geom_text(x = Inf,  y = Inf,  label = &quot;Test&quot;,  hjust = 1,  vjust = 1)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;(and would be even better to use annotate to avoid duplication of text labels)&#xD;&#xA;&#xD;&#xA;which works for me in the current dev version." />
    </Messages>
  </Topic>
  <Topic Id="121" Title="statistics should be able to &quot;shrink&quot; scales">
    <Messages>
      <Message Id="0" ParentId="121" UserId="4196" Date="07/05/2010 15:34:53" Content="    x &lt;- runif(100,  1,  80)&#xD;&#xA;    y &lt;- runif(100,  15,  110)&#xD;&#xA;    z &lt;- runif(100,  35,  180)&#xD;&#xA;    dfr &lt;- melt(data.frame(x,  y,  z))&#xD;&#xA;    ggplot(dfr,   aes(variable,   value)) + stat_summary(fun.data=&quot;mean_cl_boot&quot;)&#xD;&#xA;&#xD;&#xA;This requires adding some kind of position limits reset to plot-build after the statistics have been computed." />
      <Message Id="2992482" ParentId="121" UserId="4196" Date="12/02/2011 16:46:11" Content="Done in devel." />
    </Messages>
  </Topic>
  <Topic Id="122" Title="scale_shape doesn't warn about continuous values">
    <Messages>
      <Message Id="0" ParentId="122" UserId="4196" Date="07/05/2010 22:41:37" Content="    df &lt;- data.frame(x = 1:10,  y = 1:10,  z = 1)&#xD;&#xA;    qplot(x,  y,  data = df,  shape = z)&#xD;&#xA;" />
      <Message Id="2992467" ParentId="122" UserId="4196" Date="12/02/2011 16:45:12" Content="Fixed in devel version." />
    </Messages>
  </Topic>
  <Topic Id="123" Title="geom_hline + facet_wrap bug">
    <Messages>
      <Message Id="0" ParentId="123" UserId="4196" Date="07/16/2010 10:05:22" Content="    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    mydata &lt;- structure(list(Group = structure(c(&quot;AA&quot;,  &quot;AA&quot;,  &quot;AA&quot;,  &quot;AA&quot;,  &quot;BB&quot;, &#xD;&#xA;    &quot;BB&quot;,  &quot;BB&quot;,  &quot;BB&quot;,  &quot;CC&quot;,  &quot;CC&quot;,  &quot;CC&quot;,  &quot;CC&quot;),  .Dim = 12L),  Date = structure(c(14072, &#xD;&#xA;    14079,  14086,  14091,  14072,  14079,  14086,  14091,  14072,  14079, &#xD;&#xA;    14086,  14091),  class = &quot;Date&quot;),  Value = structure(c(1.07,  1.05, &#xD;&#xA;    0.98,  0.95,  1.04,  0.99,  1.13,  0.98,  1.3,  1.12,  1.25,  1.12),  .Dim = 12L)),  .Names = c(&quot;Group&quot;, &#xD;&#xA;    &quot;Date&quot;,  &quot;Value&quot;),  row.names = c(NA,  -12L),  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;    qplot(Date,  Value,  data=mydata,  facets = Group ~ .) + &#xD;&#xA;      geom_hline(yintercept=1.0)&#xD;&#xA;" />
      <Message Id="320565" ParentId="123" UserId="54434" Date="07/21/2010 05:45:04" Content="#also happens with facet_grid...&#xD;&#xA;library(ggplot2)&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + facet_grid(vs ~ am, margins=T)" />
      <Message Id="2992459" ParentId="123" UserId="4196" Date="12/02/2011 16:44:53" Content="On happens with `facet_grid` in devel version" />
      <Message Id="5252788" ParentId="123" UserId="86978" Date="04/20/2012 20:46:25" Content="Is this one fixed now? It looks ok to me." />
      <Message Id="5252827" ParentId="123" UserId="4196" Date="04/20/2012 20:48:34" Content="Yup,  looks good to me." />
    </Messages>
  </Topic>
  <Topic Id="124" Title="Mixed text and expression legend labels">
    <Messages>
      <Message Id="0" ParentId="124" UserId="4196" Date="07/16/2010 10:10:45" Content="    ggplot(mtcars,  aes(x=mpg, y=hp, colour=factor(cyl))) +&#xD;&#xA;      geom_point() +&#xD;&#xA;      scale_colour_manual('cyl', &#xD;&#xA;         values=c('red', 'blue', 'green'), &#xD;&#xA;         breaks=c(4, 6, 8), &#xD;&#xA;         labels=expression(italic('four'), 'six', 'eight'))&#xD;&#xA;     &#xD;&#xA;    ggplot(mtcars,  aes(x=mpg, y=hp, colour=factor(cyl))) +&#xD;&#xA;     geom_point() +&#xD;&#xA;     scale_colour_manual('cyl', &#xD;&#xA;        breaks=c(4, 6, 8), &#xD;&#xA;        labels=expression(italic('four'), 'six', 'eight'))" />
      <Message Id="1209073" ParentId="124" UserId="600374" Date="05/20/2011 09:57:39" Content="If you use a pure text expression like 'six' it will give the error: &quot; 'pairlist' object cannot be coerced to type&#xA;'double' &quot;. However if you type it in the expression like 'si'*'x' you will not get the error and just get the expected output." />
      <Message Id="3977059" ParentId="124" UserId="78048" Date="02/15/2012 09:05:51" Content="Any update on the bug? I created scale labels by using:&#xD;&#xA;&#xD;&#xA;substitute(paste(value,  mu,  &quot;V&quot;),  list(value = breaks[ 1 ]))&#xD;&#xA;&#xD;&#xA;with breaks being a numeric vector. Submitting this as a label gives me the above-mentioned pairlist coercion error. There must be an as.double() somewhere in the code that trips over pairlist objects." />
      <Message Id="35938221" ParentId="124" UserId="4196" Date="02/24/2014 21:12:40" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="125" Title="scales should shrink to maximum extent of stat transformed data">
    <Messages>
      <Message Id="0" ParentId="125" UserId="4196" Date="07/16/2010 11:54:52" Content="    x&lt;-runif(100, 1, 80)&#xA;    y&lt;-runif(100, 15, 110)&#xA;    z&lt;-runif(100, 35, 180)&#xA;    dfr&lt;-melt(data.frame(x, y, z))&#xA;    iqr2 &lt;- function(df) transform(df,  ymin = quantile(x,  0.25),  ymax = quantile(x,  0.75),  y = median(x))&#xA;    ggplot(dfr,  aes(variable, value)) + stat_summary(fun.data=iqr2)&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="126" Title="Legend doesn't work with multiple custom aesthetics">
    <Messages>
      <Message Id="0" ParentId="126" UserId="4196" Date="07/16/2010 12:21:21" Content="    df &lt;- data.frame(x=1:2,  y=1:2)&#xD;&#xA;&#xD;&#xA;    # Doesn't work&#xD;&#xA;    ggplot(df,  aes(x,  y)) + geom_point(aes(colour = &quot;a&quot;,  shape = &quot;b&quot;))&#xD;&#xA;    # Works&#xD;&#xA;    ggplot(df,  aes(x,  y,  colour = &quot;a&quot;,  shape = &quot;b&quot;)) + geom_point()" />
      <Message Id="314938" ParentId="126" UserId="4196" Date="07/16/2010 12:22:44" Content="Fixed in 87b7474ef47ec99cf68cedbb379a22fb0d8b70b8" />
    </Messages>
  </Topic>
  <Topic Id="127" Title="Change of order of factors when plotting">
    <Messages>
      <Message Id="0" ParentId="127" UserId="18445" Date="07/16/2010 13:21:13" Content="This code&#xD;&#xA;&#xD;&#xA;	data.frame(a=c(&quot;foo 1&quot;,  &quot;foo 2&quot;,  &quot;foo 10&quot;),  b=1:3)&#xD;&#xA;	D=data.frame(a=c(&quot;foo 1&quot;,  &quot;foo 2&quot;,  &quot;foo 10&quot;),  b=1:3)&#xD;&#xA;	ggplot(D) + geom_bar(aes(x=a, y=b))&#xD;&#xA;&#xD;&#xA;used to produce the three bars in the order of the original data.frame. It now reorders the bars in alphabetical order. Is this a bug? Is this intended?" />
      <Message Id="315396" ParentId="127" UserId="4196" Date="07/16/2010 18:22:14" Content="Did it really?  `a` is a factor and ggplot2 respects factor ordering." />
      <Message Id="315436" ParentId="127" UserId="18445" Date="07/16/2010 18:45:09" Content="Sorry,  my use case was actually:&#xD;&#xA;&#xD;&#xA;	D = data.frame(a=c(&quot;foo 1&quot;,  &quot;foo 2&quot;,  &quot;foo 10&quot;),  b=1:3,  stringsAsFactors=F)&#xD;&#xA;	ldply(D,  class)&#xD;&#xA;	ggplot(D) + geom_bar(aes(x=a, y=b))&#xD;&#xA;&#xD;&#xA;as of July 1st,  at least,  it used to keep the order that was in the data.frame in this scenario. Now it converts `a` into a factor and sorts it alphabetically." />
      <Message Id="315458" ParentId="127" UserId="4196" Date="07/16/2010 19:03:56" Content="I don't see any way of preserving the order of the data frame because it is only unambiguous in a very few circumstances.  You don't expect the order of the data frame to affect the display of continuous variables,  so why should it affect discrete variables?" />
      <Message Id="315462" ParentId="127" UserId="18445" Date="07/16/2010 19:10:58" Content="I think that,  if the column is explicitly kept as character,  rather than converted into a factor which is done automatically most the time,  then it might be for a specific reason. Maybe converting it to as factor with:&#xD;&#xA;&#xD;&#xA;	D$a = factor(D$a,  levels=D$a)&#xD;&#xA;&#xD;&#xA;would work. Anyhow,  I don't know what changed but I am rather sure that it worked without reordering on July 1st,  with the dev. versions of plyr and ggplot at that date (I used it at that time)." />
      <Message Id="315463" ParentId="127" UserId="18445" Date="07/16/2010 19:11:57" Content="PS: I will work around it for now but it does not feel natural (nor does the code to work around it)." />
      <Message Id="315542" ParentId="127" UserId="4196" Date="07/16/2010 20:26:28" Content="Using the data order only works in two situation - when you have exactly one observation per x position,  or you have multiple observation and you have ordered the dataset.  But dataset order only affects display - it does not affect any other type of graphic and it doesn't affect modelling.  It just doesn't seem like a general principle to me." />
      <Message Id="318370" ParentId="127" UserId="18445" Date="07/19/2010 18:45:59" Content="I understand completely the point that the order does not affect any statistical properties of the data,  so it should not affect the display. I think an exception could (should?) be made for the first scenario: when there is exactly one observation per x position.&#xD;&#xA;&#xD;&#xA;In this case,  the variable used as x is not directly part of the &quot;statistical analysis&quot; (a dataset with only one observation per case won't get you far) but is more &quot;illustrating&quot;. A common scenario would be that of pre-summarised data. In that particular case,  if x is a character vector (not a factor) I think it would be useful to keep the order in the data.frame,  because the order in which the data was spit-out by the previous analysis might be meaningful. My particular use case,  for example,  was the variance explained by the successive axes of a PCA,  which are noted &quot;Dim 1&quot;,  &quot;Dim2&quot;,  ...,  &quot;Dim 10&quot; and should be kept in that order.&#xD;&#xA;&#xD;&#xA;Moreover,  it would be consistent with the way barplot works:&#xD;&#xA;&#xD;&#xA;	d &lt;- data.frame(a=c(&quot;foo 1&quot;,  &quot;foo 2&quot;,  &quot;foo 10&quot;),  b=1:3,  stringsAsFactors=F)&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=a,  y=b))&#xD;&#xA;&#xD;&#xA;	b &lt;- d$b&#xD;&#xA;	names(b) &lt;- d$a&#xD;&#xA;	barplot(b)&#xD;&#xA;&#xD;&#xA;But maybe that stems from a more profound difference between barplot and geom_bar. geom_bar seems to be meant to make histograms while barplot is just a way to represent a bar instead of a point,  a line,  etc.:&#xD;&#xA;&#xD;&#xA;	d &lt;- data.frame(a=c(&quot;foo 1&quot;,  &quot;foo 2&quot;,  &quot;foo 10&quot;,  &quot;foo 1&quot;),  b=1:4,  stringsAsFactors=F)&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=a,  y=b),  stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;	b &lt;- d$b&#xD;&#xA;	names(b) &lt;- d$a&#xD;&#xA;	barplot(b)&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="128" Title="opts(axis.text.x=theme_text(angle=60,  hjust=1.2,  )) by default">
    <Messages>
      <Message Id="0" ParentId="128" UserId="14500" Date="07/20/2010 10:42:29" Content="When the X axis labels are text strings,  it happens often that they cluster together and they become very difficult to read.&#xD;&#xA;For this reason,  I usually have to use an option like + opts(axis.text.x=theme_text(angle=60,  hjust=1.2,  )) in order to draw them horizontally and make them more readable.&#xD;&#xA;&#xD;&#xA;Consider making this the default behaviour for when the X axis labels are long strings. One of the strongest points of ggplot2 is that it has very nice default options,  so this will improve the readibility of a ggplot2 figure." />
      <Message Id="2992445" ParentId="128" UserId="4196" Date="12/02/2011 16:43:42" Content="It should be possible for a nicely design axis guide to this automatically,  particularly if it could use Justin Talbot's algorithms.  I've assigned to Kohske,  but marked it as a long term to do." />
      <Message Id="35938200" ParentId="128" UserId="4196" Date="02/24/2014 21:12:32" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="129" Title="locfit and geom_smooth">
    <Messages>
      <Message Id="0" ParentId="129" UserId="4196" Date="07/27/2010 01:55:34" Content="Figure out why they don't work together&#xD;&#xA;&#xD;&#xA;    library(locfit)&#xD;&#xA;    qplot(hwy,  cty,  data=mpg) + &#xD;&#xA;      geom_smooth(method=&quot;locfit&quot;)&#xD;&#xA;" />
      <Message Id="542939" ParentId="129" UserId="4196" Date="11/15/2010 17:35:56" Content="Fixed by Koshke - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="130" Title="facet_wrap sometimes does not honor the aspect ratio set by coord_map">
    <Messages>
      <Message Id="0" ParentId="130" UserId="18445" Date="07/27/2010 12:58:17" Content="This works&#xA;&#xA;	library(&quot;maps&quot;)&#xA;	library(&quot;ggplot2&quot;)&#xA;	nz &lt;- map(&quot;nz&quot;,  plot=FALSE)&#xA;	nz &lt;- data.frame(lon=nz$x,  lat=nz$y)&#xA;	&#xA;	d &lt;- data.frame(foo=rep(1:5,  each=2))&#xA;&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=nz)&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=nz) + coord_map()&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=nz) + coord_map() + facet_wrap(~foo)&#xA;	&#xA;This does not&#xA;&#xA;	library(&quot;ggplot2&quot;)&#xA;	coast &lt;- read.table(&quot;http://dl.dropbox.com/u/1047321/ggplot/one_tree-reef.csv&quot;,  head=T,  sep=&quot;, &quot;)&#xA;&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=coast) + coord_map()&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=coast) + coord_map() + facet_wrap(~foo)&#xA;&#xA;It only affects facet_wrap,  facet_grid is OK:&#xA;&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=coast) + coord_map() + facet_grid(.~foo)&#xA;	ggplot(d) + geom_path(aes(x=lon,  y=lat),  data=coast) + coord_map() + facet_grid(foo~.)&#xA;&#xA;I am not sure what the difference is: number of points,  distance between points?" />
      <Message Id="2055093" ParentId="130" UserId="463252" Date="09/09/2011 19:51:02" Content="See also #153" />
      <Message Id="2992427" ParentId="130" UserId="4196" Date="12/02/2011 16:42:20" Content="Works for me in devel version." />
    </Messages>
  </Topic>
  <Topic Id="131" Title="Arrow heads incorrectly oriented with geom_map() - munching issues">
    <Messages>
      <Message Id="0" ParentId="131" UserId="18445" Date="07/27/2010 13:17:21" Content="	library(&quot;maps&quot;)&#xA;	library(&quot;ggplot2&quot;)&#xA;	nz &lt;- map(&quot;nz&quot;,  plot=FALSE)&#xA;	nz &lt;- data.frame(lon=nz$x,  lat=nz$y)&#xA;	&#xA;	d &lt;- data.frame(lon=165:174,  lonEnd=164:173,  lat=-44:-35,  latEnd=-43:-34)&#xA;&#xA;	ggplot(d,  aes(x=lon,  y=lat)) + geom_path(data=nz) + geom_segment(aes(xend=lonEnd,  yend=latEnd),  arrow=arrow(length=unit(0.1, &quot;cm&quot;)))&#xA;	ggplot(d,  aes(x=lon,  y=lat)) + geom_path(data=nz) + geom_segment(aes(xend=lonEnd,  yend=latEnd),  arrow=arrow(length=unit(0.1, &quot;cm&quot;)))  + coord_map()&#xA;&#xA;The arrow head is correct only on the last segment." />
      <Message Id="335258" ParentId="131" UserId="4196" Date="07/30/2010 20:28:43" Content="This is probably happening because the lines are getting broken up into such short pieces that the arrow head on the last piece can't correctly orient (or it may suggest that the last piece incorrectly has length 0)." />
      <Message Id="339363" ParentId="131" UserId="18445" Date="08/03/2010 14:47:56" Content="Related to that,  all my maps are now huge in PDF and slow to render. I suppose this is related to the segment_length in coord_munch. In what units are x and y when they are provided to coord_munch?&#xD;&#xA;&#xD;&#xA;In any case,  it would be most appropriate to make segment_length user-visible through an argument of the other coord_* functions,  so that one can adjust it to its needs. Not every plot requires the same amount of precision in the transformation: polar coordinate plots which transform straight lines in curves would need many extra points while maps which are often very little &quot;deformed&quot; by coord_map would need few." />
      <Message Id="340594" ParentId="131" UserId="18445" Date="08/04/2010 07:59:58" Content="My own testing shows that x and y are passed to munch_data in their *original* units. So of course,  segment_length=0.01 is sometimes completely inappropriate. Rather than trying to adapt segment_length to every case,  it would make more sense to have x and y in relative units/plotting units (i.e. between 0 and 1) and compute distances on that. In this case,  [ 0, 1 ] would be a sensible range for segment_length (the longest segment would be the diagonal which would be of length sqrt(2) = 1.4).&#xD;&#xA;&#xD;&#xA;More related to this bug,  setting segment_length = 10 in this case&#xD;&#xA;&#xD;&#xA;    d = data.frame(x=c(145.5,  145.6),  y=c(45.5,  45.6),  xend=c(145.6,  145.8),  yend=c(45.6,  45.7))&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_segment(aes(x=x,  y=y,  xend=xend,  yend=yend),  arrow=arrow(length=unit(0.01, &quot;npc&quot;))) + coord_map()&#xD;&#xA;&#xD;&#xA;still shows the bug with the arrow head,  while the distances are `17.77646       NA 28.10705` and the number of extra points `2 1 3`.&#xD;&#xA;&#xD;&#xA;Finally,  setting segment_length to +Inf should prevent any munching. Indeed,  `extra = 1 1 1` in this case. However,  this makes the second segment disappear." />
      <Message Id="908233" ParentId="131" UserId="18445" Date="03/23/2011 16:07:48" Content="I am still hit by the issue and it does not seem to be a problem of too short pieces since it works for the last segment in the original example (and because of my comments above).&#xD;&#xA;&#xD;&#xA;Any idea where to start to debug this further. I have a map with many many arrows and I don't want to be rotating all the arrow heads manually in Inkscape." />
      <Message Id="931027" ParentId="131" UserId="4196" Date="03/29/2011 13:56:51" Content="My vague memory is that something is going wrong with how the pieces are being chopped up,  and we're getting lines with length zero. `munch_data` is probably where the bug is." />
      <Message Id="35938183" ParentId="131" UserId="4196" Date="02/24/2014 21:12:24" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="132" Title="Ensure all stats list the variables they create">
    <Messages>
      <Message Id="0" ParentId="132" UserId="4196" Date="08/06/2010 20:03:27" Content="e.g. `stat_bin2d`" />
      <Message Id="3213479" ParentId="132" UserId="4196" Date="12/20/2011 02:50:27" Content="Done in dev version." />
      <Message Id="15260134" ParentId="132" UserId="321235" Date="03/21/2013 19:28:37" Content="stat_bin2d (still? again?) does not document the variables it creates." />
      <Message Id="35509034" ParentId="132" UserId="4540215" Date="02/19/2014 15:18:59" Content="Come here following a stackoverflow discussion on the special variables and find the values of stat_bin2d is still undocumented. " />
    </Messages>
  </Topic>
  <Topic Id="133" Title="Rendering math in facet labels">
    <Messages>
      <Message Id="0" ParentId="133" UserId="150781" Date="08/09/2010 15:57:31" Content="The following code used to render nice latex-like math symbols in the facet labels,  but as of v0.8.8,  it simply renders the literal text supplied as labels to the facetting variable.&#xA;&#xA;	temp1 = expression(paste(Delta, 'dB Effect (0', Delta, 'dB')%-&gt;%paste('+', Delta, 'dB)'))&#xA;	temp2 = expression('Design Effect (NCD'%-&gt;%'CD)')&#xA;	temp = data.frame( x = 1:2,  y = 1:2,  z = 1:2 )&#xA;	temp$z = factor(temp$z, labels=c(temp1, temp2))&#xA;	ggplot(temp)+&#xA;	geom_point(&#xA;		mapping = aes(&#xA;			x = x&#xA;			,  y = y&#xA;		)&#xA;	)+&#xA;	facet_grid(.~z)&#xA;" />
      <Message Id="347356" ParentId="133" UserId="4196" Date="08/09/2010 16:53:18" Content="Have a look at ?label_parsed" />
      <Message Id="347357" ParentId="133" UserId="4196" Date="08/09/2010 16:54:15" Content="`last_plot() + facet_grid(. ~ z,  labeller = &quot;label_parsed&quot;)`" />
    </Messages>
  </Topic>
  <Topic Id="134" Title="Themes should accept colour as well as color">
    <Messages>
      <Message Id="0" ParentId="134" UserId="4196" Date="08/22/2010 00:05:01" Content="" />
      <Message Id="3677695" ParentId="134" UserId="88556" Date="01/26/2012 22:03:19" Content="Not sure if this should be a new issue or not (pretty new to ggplot).&#xD;&#xA;&#xD;&#xA;If I do the following,  everything works&#xD;&#xA;&#xD;&#xA;     p &lt;- qplot(mpg,  wt,  data = mtcars,  colour = cyl)&#xD;&#xA;     p + labs(colour = &quot;Cylinders&quot;)&#xD;&#xA;&#xD;&#xA;but not when I do&#xD;&#xA;&#xD;&#xA;     p &lt;- qplot(mpg,  wt,  data = mtcars,  color = cyl)&#xD;&#xA;     p + labs(color = &quot;Cylinders&quot;)&#xD;&#xA;&#xD;&#xA;Even though the plot works with `color=cyl`,  the label is not applied. &#xD;&#xA;&#xD;&#xA; &#xD;&#xA;Cheers &#xD;&#xA;&#xD;&#xA;" />
      <Message Id="7462361" ParentId="134" UserId="86978" Date="08/02/2012 17:34:08" Content="@hadley do you mean the (new) `element_xx` functions should accept both? They do now. For example,  `element_line()` is defined as:&#xA;&#xA;```R&#xA;function(colour = NULL,  size = NULL,  linetype = NULL,  lineend = NULL,  color = NULL) { &#xA;  if (!is.null(color))  colour &lt;- color&#xA;  ...&#xA; }&#xA;&#xA;```" />
      <Message Id="7462980" ParentId="134" UserId="4196" Date="08/02/2012 17:54:42" Content="Ok,  then this is an old issue and can just be closed." />
    </Messages>
  </Topic>
  <Topic Id="135" Title="order aesthetics doesn't affect bars">
    <Messages>
      <Message Id="0" ParentId="135" UserId="4196" Date="08/22/2010 00:34:41" Content="    diamonds$cut &lt;- factor(diamonds$cut,  levels = rev(unique(diamonds$cut)))&#xD;&#xA;    ggplot(diamonds,  aes(clarity,  fill = cut)) + geom_bar()&#xD;&#xA;    ggplot(diamonds,  aes(clarity,  fill = cut,  order = desc(cut))) + geom_bar()&#xD;&#xA;" />
      <Message Id="418373" ParentId="135" UserId="201835" Date="09/20/2010 18:34:07" Content="Here's a version of the third line that works for me:&#xD;&#xA;    ggplot(diamonds,  aes(clarity,  fill = cut,  order = -as.numeric(cut))) + geom_bar()&#xD;&#xA;&#xD;&#xA;It looks like `order`  is also broken in `geom_area()`:&#xD;&#xA;&#xD;&#xA;    ggplot(ddply(subset(baseball,  lg %in% c('NL', 'AL')),  .(year, lg),  summarise,  homers=sum(hr)),  aes(x=year,  y=homers,  group = lg,  fill=lg,  order=-as.numeric(lg))) + geom_area()&#xD;&#xA;    ggplot(ddply(subset(baseball,  lg %in% c('NL', 'AL')),  .(year, lg),  summarise,  homers=sum(hr)),  aes(x=year,  y=homers,  group = lg,  fill=lg,  order=as.numeric(lg))) + geom_area()" />
      <Message Id="1817094" ParentId="135" UserId="86275" Date="08/16/2011 15:07:50" Content="`geom_area()` with ggplot2 version 0.8.9 and osx 10.6.8 is still broken:-(. Any idea how to fix this or do a workaround?" />
      <Message Id="1817157" ParentId="135" UserId="4196" Date="08/16/2011 15:14:23" Content="I've added it to the 0.9 milestone so it will get fixed in the next release.  I should also now be able to write an automated tests to ensure that it doesn't break again in the future." />
      <Message Id="1817180" ParentId="135" UserId="86275" Date="08/16/2011 15:16:27" Content="@hadley: great. is there already a roadmap,  when version 0.9 should come out?" />
      <Message Id="1817225" ParentId="135" UserId="4196" Date="08/16/2011 15:20:06" Content="No,  but hopefully in the next month or so." />
    </Messages>
  </Topic>
  <Topic Id="136" Title="size and width argument does not work for geom_errorbarh">
    <Messages>
      <Message Id="0" ParentId="136" UserId="373643" Date="08/23/2010 16:57:05" Content="I cannot set the width of horizontal errorbars to zero. Try this:&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(trt = factor(c(1,  1,  2,  2)),  &#xD;&#xA;resp = c(1,  5,  3,  4),  &#xD;&#xA;group = factor(c(1,  2,  1,  2)),  &#xD;&#xA;se = c(0.1,  0.3,  0.3,  0.2)) &#xD;&#xA;p &lt;- ggplot(df,  aes(resp,  trt,  fill = group))+geom_point()&#xD;&#xA;p + geom_errorbarh(aes(xmax = resp + se,  xmin = resp - se),  width=0)" />
      <Message Id="379426" ParentId="136" UserId="4196" Date="08/30/2010 19:19:28" Content="You want height,  not width." />
    </Messages>
  </Topic>
  <Topic Id="137" Title="`facet_wrap(drop = FALSE)` dropping empty levels">
    <Messages>
      <Message Id="0" ParentId="137" UserId="4196" Date="08/30/2010 19:25:16" Content="    mpg2 &lt;- transform(mpg,  &#xD;&#xA;      cyl = factor(cyl,  levels = c(2,  4,  5,  6,  8,  10))&#xD;&#xA;    qplot(displ,  hwy,  data = mpg,  main = &quot;drop = FALSE&quot;) + &#xD;&#xA;      facet_wrap(~ cyl2,  drop = FALSE)&#xD;&#xA;    # Missing panel for 10" />
      <Message Id="2992407" ParentId="137" UserId="4196" Date="12/02/2011 16:40:23" Content="Duplicate of #163" />
    </Messages>
  </Topic>
  <Topic Id="138" Title="plyr v1.2 breaks ggplot2 v0.8.8">
    <Messages>
      <Message Id="0" ParentId="138" UserId="150781" Date="09/10/2010 16:21:08" Content="&gt; p &lt;- ggplot(mtcars,  aes(factor(cyl),  mpg)) &#xD;&#xA;&gt; p + geom_boxplot() &#xD;&#xA;Error in 1:ncol(strip_widths) : argument of length 0&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(carat,  ..density..)) + geom_histogram(binwidth = 0.2)&#xD;&#xA;&gt; p + facet_grid(. ~ cut) &#xD;&#xA;Error in 1:ncol(strip_widths) : argument of length 0&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Etc. &#xD;&#xA;&#xD;&#xA;Seems to track back to line 95 in facet-grid-.r" />
      <Message Id="2992400" ParentId="138" UserId="4196" Date="12/02/2011 16:39:30" Content="Not relevant any more." />
    </Messages>
  </Topic>
  <Topic Id="139" Title="Default legend order for stacked barplot backwards">
    <Messages>
      <Message Id="0" ParentId="139" UserId="394973" Date="09/10/2010 21:16:13" Content="As pointed out:&#xA;http://groups.google.com/group/ggplot2/browse_thread/thread/d6fe322090aae4bd/0201c67637ab1e9f&#xA;and&#xA;http://groups.google.com/group/ggplot2/browse_thread/thread/5e4cb9d6d3b36b2f/31f69c8fc32f2558&#xA;&lt;pre&gt;&#xA;qplot(cut,  data=diamonds,  geom=&quot;bar&quot;, fill=color)&#xA;&lt;/pre&gt;&#xA;Bars are stacked from D/bottom to J/top,  but the legend is stacked from J/bottom to D/top. &#xA;&#xA;As pointed out in the group,  this appears to only affect stacked barplots and can be fixed by setting the breaks manually. I am suggesting that the default legend order for a stacked barplot be a reversal of the stack order. &#xA;&#xA;&lt;pre&gt;&#xA;qplot(cut,  data=diamonds,  geom=&quot;bar&quot;, fill=color) + &#xA;scale_fill_discrete(breaks = rev(levels(diamonds$color)))  &#xA;&lt;/pre&gt;" />
      <Message Id="2992396" ParentId="139" UserId="4196" Date="12/02/2011 16:39:19" Content="This is unfortunate,  but I'm not willing/able to change the order of legend labels for special cases.  I'd put this under polishing plots for presentation,  which largely needs to be done by hand." />
    </Messages>
  </Topic>
  <Topic Id="140" Title="Debian package for ggplot2?">
    <Messages>
      <Message Id="0" ParentId="140" UserId="22509" Date="09/19/2010 18:20:17" Content="Will we see ggplot2 in debain repository in the near future?&#xD;&#xA;&#xD;&#xA;Many thanks&#xD;&#xA;Matteo&#xD;&#xA;http://www.redaelli.org/matteo/" />
      <Message Id="417476" ParentId="140" UserId="4196" Date="09/20/2010 12:37:29" Content="I thought all R packages were being built automatically for debian.  You might try asking on R-SIG-debian" />
    </Messages>
  </Topic>
  <Topic Id="141" Title="scale_y_continuous() does not report error when passed invalid arguments">
    <Messages>
      <Message Id="0" ParentId="141" UserId="421859" Date="09/30/2010 05:44:48" Content="For example: &#xD;&#xA;&#xD;&#xA;scale_y_continuous(&quot;&quot;,  formater=&quot;percent&quot;)  ## No error,  but also not formatting" />
      <Message Id="2992383" ParentId="141" UserId="4196" Date="12/02/2011 16:38:11" Content="Fixed in development version." />
    </Messages>
  </Topic>
  <Topic Id="142" Title="Ggplot 0.8.9">
    <Messages>
      <Message Id="0" ParentId="142" UserId="227097" Date="10/15/2010 13:38:28" Content="first and third commits are bug fix.&#xD;&#xA;as for 77a308d7 commit,  please see http://groups.google.com/group/ggplot2/browse_thread/thread/2b939820d687cca2&#xD;&#xA;&#xD;&#xA;In second commit,  I implemented the ability to specify legend in more detail.&#xD;&#xA;I think this is useful,  but I don't know if this is necessary for ggplot2.&#xD;&#xA;So,  please merge this only when you think this is really improvement.&#xD;&#xA;&#xD;&#xA;thanks a lot.&#xD;&#xA;&#xD;&#xA;kohske&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="470677" ParentId="142" UserId="4196" Date="10/15/2010 13:54:25" Content="Looks fantastic overall - if you wouldn't mind fixing the small niggles I pointed out,  I'd be happy to accept the commit." />
      <Message Id="470701" ParentId="142" UserId="227097" Date="10/15/2010 14:04:22" Content="Thanks,  please fix them.&#xD;&#xA;&#xD;&#xA;and as for coding style,  okey,  I will follow you guidelines.&#xD;&#xA;I want to know your developing environment.&#xD;&#xA;I'm using ESS and emacs,  but indent style cannot match your guideline...&#xD;&#xA;Probably customizing ESS will make this better,  but it is easy for me if I know your developing environment.&#xD;&#xA;&#xD;&#xA;thanks,  anyway. it's my great pleasure.&#xD;&#xA;" />
      <Message Id="472295" ParentId="142" UserId="227097" Date="10/16/2010 01:42:50" Content="Now I realized that I misunderstood your comment. Ok,  I will fix them by myself in a few days. Thanks!" />
      <Message Id="542889" ParentId="142" UserId="4196" Date="11/15/2010 17:32:05" Content="Finally got around to pulling in all this code - thanks!  However,  in the future,  could you please do a separate pull request for each feature?  That will make it easier for me to check the code and provide feedback." />
    </Messages>
  </Topic>
  <Topic Id="143" Title="Ggplot 0.8.9">
    <Messages>
      <Message Id="0" ParentId="143" UserId="227097" Date="10/19/2010 05:47:34" Content="Hi Hadley&#xD;&#xA;&#xD;&#xA;I have small changes in position-collide.r,  removing a bug and following your coding style.&#xD;&#xA;facet-grid.r remains the previous commit.&#xD;&#xA;&#xD;&#xA;In works of legend,  I made a change on behavior.&#xD;&#xA;When legend.direction is vertical,  then there is no change from the original one.&#xD;&#xA;When legend.direction is horizontal,  all legends are centre-aligned horizontally.&#xD;&#xA;I put some example code on the head of guide_legends_box.&#xD;&#xA;&#xD;&#xA;I hope I'm using github and pull request system in correct way...&#xD;&#xA;&#xD;&#xA;Thanks.&#xD;&#xA;&#xD;&#xA;Kohske" />
    </Messages>
  </Topic>
  <Topic Id="144" Title="fortify for glht objects">
    <Messages>
      <Message Id="0" ParentId="144" UserId="446636" Date="10/20/2010 09:37:17" Content="Here is a suggestion for objects from the confint.glht class (multcomp package)&#xA;&#xA;    fortify.confint.glht &lt;- function(CI){ &#xA;	data &lt;- as.data.frame(CI$confint)&#xA;	data$.contrast &lt;- rownames(gCI)&#xA;	data&#xA;     }&#xA;" />
      <Message Id="483941" ParentId="144" UserId="4196" Date="10/21/2010 15:52:11" Content="Could you please provide a small example too?" />
      <Message Id="485554" ParentId="144" UserId="446636" Date="10/22/2010 09:02:36" Content="Here is an example and a small fix in the code&#xA;    #fixed code&#xA;    fortify.confint.glht &lt;- function(CI){ &#xA;        CI &lt;- as.data.frame(CI$confint)&#xA;        CI$.contrast &lt;- rownames(CI)&#xA;        CI&#xA;     }&#xA;&#xA;    #working example&#xA;    library(multcomp)&#xA;    library(ggplot2)&#xA;    amod &lt;- aov(breaks ~ wool + tension,  data = warpbreaks)&#xA;    wht &lt;- glht(amod,  linfct = mcp(tension = &quot;Tukey&quot;))&#xA;    CI &lt;- confint(wht)&#xA;    ggplot(CI,  aes(x = .contrast,  y = Estimate,  ymin = lwr,  ymax = upr)) + geom_pointrange()&#xA;" />
      <Message Id="3101016" ParentId="144" UserId="4196" Date="12/12/2011 01:08:13" Content="Also provide fortify functions for `cld`,  `glht` (use `coef` component),  and `summary` (use `test` component)" />
    </Messages>
  </Topic>
  <Topic Id="145" Title="Ggplot 0.8.9">
    <Messages>
      <Message Id="0" ParentId="145" UserId="227097" Date="10/29/2010 05:22:41" Content="hi hadley&#xD;&#xA;&#xD;&#xA;this is a bug fix of coord_polor.&#xD;&#xA;I made sure that this code works well for all example in help file.&#xD;&#xA;and also,  probably you can see the difference by&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(x = factor(1),  fill = factor(cyl))) + geom_bar(width = 1) + coord_polar()&#xD;&#xA;&#xD;&#xA;I can find s small blank on around (356,  360) deg.&#xD;&#xA;probably this is a bug in interp function.&#xD;&#xA;&#xD;&#xA;and now I rewrote the calculation how many vertices are drawn by using the cartesian distance of polar coordinate. please find the distance() in coord-polar.r &#xD;&#xA;&#xD;&#xA;thanks.&#xD;&#xA;&#xD;&#xA;kohske&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="505116" ParentId="145" UserId="4196" Date="10/30/2010 23:52:49" Content="All looks good - just need some free time to give it a thorough testing.  Hopefully in the next couple of weeks.  Thanks again for all the help!" />
    </Messages>
  </Topic>
  <Topic Id="146" Title="outlier.colour in geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="146" UserId="446636" Date="10/29/2010 12:53:35" Content="outlier.colour from geom_boxplot() does not work with mapping&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    dataset &lt;- expand.grid(x = factor(c(&quot;A&quot;,  &quot;B&quot;)),  y = c(rep(1,  50),  10),  z = factor(c(&quot;C&quot;,  &quot;D&quot;)))&#xD;&#xA;    dataset$y &lt;- rnorm(nrow(dataset),  mean = with(dataset,  y * as.numeric(x)),  sd = as.numeric(dataset$z))&#xD;&#xA;    ggplot(dataset,  aes(x = x,  y = y,  colour = z)) + geom_boxplot()&#xD;&#xA;    ggplot(dataset,  aes(x = x,  y = y,  colour = z)) + geom_boxplot(outlier.colour = &quot;red&quot;)&#xD;&#xA;    ggplot(dataset,  aes(x = x,  y = y,  colour = z)) + geom_boxplot(aes(outlier.colour = z))&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="2992370" ParentId="146" UserId="4196" Date="12/02/2011 16:37:18" Content="I'd suggest that when outlier.colour = NULL it defaults to the same colour as the boxes." />
      <Message Id="3869094" ParentId="146" UserId="348591" Date="02/08/2012 15:12:19" Content="I also have come across the issue of colouring the outliers according to aesthetics.&#xD;&#xA;I was able to figure out that it could be done with outlier.colour = NULL only by looking at the source code.&#xD;&#xA;&#xD;&#xA;If not supporting outlier.* in the aesthetics,  it would be nice to have the current behaviour be documented in geom_boxplot() help.&#xD;&#xA;Also,  maybe NULL should be the default value for outlier.* params?&#xD;&#xA;The minor note: unlike colour/color,  the outlier.color does not work.&#xD;&#xA;" />
      <Message Id="35938174" ParentId="146" UserId="4196" Date="02/24/2014 21:12:20" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="67564180" ParentId="146" UserId="3058558" Date="12/18/2014 21:58:09" Content="Not sure if this has been updated but ggplot(dataset,  aes(x = x,  y = y,  colour = z)) + geom_boxplot(aes(outlier.colour = NULL)) no longer updates the outlier colours." />
      <Message Id="71178111" ParentId="146" UserId="266740" Date="01/23/2015 11:00:46" Content="This ticket is confusing. There are answers on stack exchange,  such as http://stackoverflow.com/a/16035956,  that suggest this feature has been available in the past. But at least in the current 1.0.0 version it does not work for me,  and hadley's comment above indicates that no work has been done on this feature." />
    </Messages>
  </Topic>
  <Topic Id="147" Title="Limits adjustment based on output ranges">
    <Messages>
      <Message Id="0" ParentId="147" UserId="227097" Date="10/29/2010 23:01:27" Content="&lt;pre&gt;&lt;code&gt;d&amp;lt;-data.frame(x=rep(1:5, 2), y=100+c(1:5, (2:-2)*2))&#xD;&#xA;ggplot(d, aes(x, y))+stat_summary(fun.y=mean,  geom=&quot;point&quot;)&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xD;&#xA;&#xD;&#xA;what is the best way to fit the plot area to the actual plot range based on output value (i.e.,  mean in this case) ?" />
      <Message Id="503661" ParentId="147" UserId="227097" Date="10/30/2010 00:54:28" Content="this is a duplicate of #121" />
    </Messages>
  </Topic>
  <Topic Id="148" Title="na.colour not appearing correctly on legend">
    <Messages>
      <Message Id="0" ParentId="148" UserId="4196" Date="11/09/2010 02:35:20" Content="    base &lt;- ggplot(choro, aes(long, lat, group=group, fill=bin)) + geom_polygon()&#xD;&#xA; &#xD;&#xA;    base + scale_x_continuous(&quot;&quot;) + scale_y_continuous(&quot;&quot;) +&#xD;&#xA;      scale_fill_brewer(&quot;Population&quot;, pal=1, type=&quot;seq&quot;, na.colour = &quot;red&quot;, &#xD;&#xA;    labels=c(&quot;&lt; 1000&quot; = &quot;&lt; 1000&quot; ,  &quot;&lt; 1e4&quot; = &quot;&lt; 10, 000&quot;,  &quot;&lt; 1e5&quot; = &quot;&lt; 100, 000&quot;, &#xD;&#xA;    &quot;&lt; 1e6&quot; = &quot;&lt; 1, 000, 000&quot;,  &quot;&lt; 1e7&quot; = &quot;1, 000, 000+&quot;, &quot;NA&quot;=&quot;Missing&quot;))" />
      <Message Id="2992356" ParentId="148" UserId="4196" Date="12/02/2011 16:36:15" Content="No reproducible code." />
    </Messages>
  </Topic>
  <Topic Id="149" Title="hjust = 0 doesn't change text position">
    <Messages>
      <Message Id="0" ParentId="149" UserId="4196" Date="11/09/2010 02:49:35" Content="    test.dat &lt;- data.frame(&#xD;&#xA;      desc=c(&quot;A very long name&quot;,  &quot;Another very long name&quot;), &#xD;&#xA;      value=c(2, 3))&#xD;&#xA;    qplot(x=value,  y=desc,  data=test.dat) + &#xD;&#xA;      opts(axis.text.y=theme_text(hjust=0))&#xD;&#xA;" />
      <Message Id="542920" ParentId="149" UserId="4196" Date="11/15/2010 17:34:23" Content="Fixed by Kohske - thanks!" />
      <Message Id="544334" ParentId="149" UserId="227097" Date="11/16/2010 03:38:33" Content="I forgot to refer this in the commit log and NEWS...&#xD;&#xA;Now hjust and vjust in axis would work as user expects." />
    </Messages>
  </Topic>
  <Topic Id="150" Title="full-range drawing">
    <Messages>
      <Message Id="0" ParentId="150" UserId="227097" Date="11/19/2010 01:06:40" Content="Here is a test code with some comments.&#xD;&#xA;I'd better to send separate pull-requests for this two commits...&#xD;&#xA;Now I know that pull-request cannot choose commits,  instead all updates are inevitably included.&#xD;&#xA;So in future,  I will do commit-pull-request phase for each commit.&#xD;&#xA;&lt;code&gt;&lt;pre&gt;# full-range draw example&#xD;&#xA;#&#xD;&#xA;# this code tries to draw a panel on full-range,  but fails in ggplot2-0.8.8&#xD;&#xA;#&#xD;&#xA;# commit in grob-null.r&#xD;&#xA;#&#xD;&#xA;# Previously,  it failed to draw a panel on full-range.&#xD;&#xA;# This is becausae is.zero wrongly return false when grob is zeroGrob.&#xD;&#xA;# This is ggname() adds a prefix to zeroGrob,  so identical() in is.zero() returns false.&#xD;&#xA;# Now,  zeroGrob is determined if it inherits &quot;zeroGrob&quot;.&#xD;&#xA;# Hence,  it fixed the extra margin problem&#xD;&#xA;#&#xD;&#xA;# commit in guides-axis.r&#xD;&#xA;#&#xD;&#xA;# Previously,  axis tried to draw zeroGrob of axis labels and ticks on zero-size viewport.&#xD;&#xA;# This bug emerges my recent modification,  which imprement axis label justification by using frameGrob.&#xD;&#xA;# Now guides-axis does not draw (i.e.,  put it on the frame),  if they are zeroGrob.&#xD;&#xA;# I think,  hopefully,  it is preferable not to draw zeroGrob if it is placed on the frame, &#xD;&#xA;# since it keep from extra if-then dispatch.&#xD;&#xA;# But I have not yet figure out how to implement this.&#xD;&#xA;# .zeroGrob &amp;lt;- grob(cl = &quot;zeroGrob&quot;,  name = &quot;NULL&quot;,  draw = FALSE) did not work.&#xD;&#xA;#&#xD;&#xA;&#xD;&#xA;qplot(x=1:2, y=1:2)+&#xD;&#xA;  opts( &#xD;&#xA;    legend.position = &quot;none&quot;, &#xD;&#xA;    panel.grid.major = theme_blank(), &#xD;&#xA;    panel.grid.minor = theme_blank(), &#xD;&#xA;    panel.margin = unit(0, &quot;null&quot;), &#xD;&#xA;    plot.margin = rep(unit(0, &quot;null&quot;), 4), &#xD;&#xA;    axis.ticks = theme_blank(), &#xD;&#xA;    axis.text.x = theme_blank(), &#xD;&#xA;    axis.text.y = theme_blank(), &#xD;&#xA;    axis.title.x = theme_blank(), &#xD;&#xA;    axis.title.y = theme_blank(), &#xD;&#xA;    axis.ticks.length = unit(0, &quot;null&quot;), &#xD;&#xA;    axis.ticks.margin = unit(0, &quot;null&quot;)&#xD;&#xA;  )&#xD;&#xA;&lt;/pre&gt;&lt;/code&gt;" />
      <Message Id="565823" ParentId="150" UserId="227097" Date="11/25/2010 03:52:09" Content="Another two commits.&#xD;&#xA;&#xD;&#xA;I wonder what is the best way to use pull request...&#xD;&#xA;New push appeared in old pull-request.&#xD;&#xA;Sorry if you have an inconvenience for merging these commits.&#xD;&#xA;&#xD;&#xA;The first one implements a new feature,  and the second one is a bug fix.&#xD;&#xA;Re: the new feature&#xD;&#xA;http://groups.google.com/group/ggplot2/browse_thread/thread/7c5454dcc04bc7b8/9b5a308a18d5b145?lnk=gst&amp;q=relative#9b5a308a18d5b145&#xD;&#xA;&#xD;&#xA;and&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/4205764/adjusting-the-relative-space-of-facets-without-regard-to-coordinate-space&#xD;&#xA;&#xD;&#xA;Both are on facet-grid-.r.&#xD;&#xA;&#xD;&#xA;Test codes:&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;&lt;code&gt;# manually specifies the size of each column and row in facet_grid&#xD;&#xA;# facet_grid accepts the parameter widths and heights&#xD;&#xA;&#xD;&#xA;nr &amp;lt;- 16&#xD;&#xA;fac1 &amp;lt;- gl(2,  1,  nr,  labels = c(&quot;1A&quot;,  &quot;1B&quot;) )&#xD;&#xA;fac2 &amp;lt;- gl(2,  2,  nr,  labels = c(&quot;2C&quot;,  &quot;2D&quot;) )&#xD;&#xA;fac3 &amp;lt;- gl(2,  4,  nr,  labels = c(&quot;3E&quot;,  &quot;3F&quot;) )&#xD;&#xA;fac4 &amp;lt;- gl(2,  8,  nr,  labels = c(&quot;4A&quot;,  &quot;4B&quot;) )&#xD;&#xA;dummy &amp;lt;- data.frame(x = rnorm(nr),  y = rnorm(nr),  fac1,  fac2,  fac3,  fac4)&#xD;&#xA;&#xD;&#xA;# usage&#xD;&#xA;p &amp;lt;- ggplot(dummy,  aes(x,  y)) + geom_point()&#xD;&#xA;ps &amp;lt;- list()&#xD;&#xA;ps[ [ 1 ] ] &amp;lt;- p + facet_grid(fac1 + fac2 ~ fac3 + fac4)&#xD;&#xA;ps[ [ 2 ] ] &amp;lt;- p + facet_grid(fac1 + fac2 ~ fac3 + fac4,  widths = 1:4,  heights = 4:1)&#xD;&#xA;&#xD;&#xA;print(ps[ [ 1 ] ])&#xD;&#xA;print(ps[ [ 2 ] ])&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# fixed horizontal spacing bug in facet grid when nrow of hstrip &amp;gt;= 2&#xD;&#xA;#&#xD;&#xA;# vgap has to be determined from bottom to up order.&#xD;&#xA;# As for,  it worked,  probably unintentionally,  when nrow of hstrip &amp;lt;= 1.&#xD;&#xA;# Now this is fixed.&#xD;&#xA;&#xD;&#xA;d &amp;lt;- data.frame(expand.grid(f1=paste(&quot;A&quot;, 1:2), &#xD;&#xA;                            f2=paste(&quot;B&quot;, 1:2), &#xD;&#xA;                            f3=paste(&quot;C&quot;, 1:2), &#xD;&#xA;                            f4=paste(&quot;D&quot;, 1:2)), &#xD;&#xA;                            x=1,  y=1)&#xD;&#xA;p &amp;lt;- ggplot(d,  aes(x, y)) + geom_point()&#xD;&#xA;&#xD;&#xA;ps &amp;lt;- list()&#xD;&#xA;ps[ [ 1 ] ] &amp;lt;- p + facet_grid(f1+f2~f3+f4)&#xD;&#xA;&#xD;&#xA;print(ps[ [ 1 ] ])&#xD;&#xA;                &#xD;&#xA;&lt;/pre&gt;&lt;/code&gt;&#xD;&#xA;" />
      <Message Id="595913" ParentId="150" UserId="227097" Date="12/08/2010 02:20:16" Content="Another one commit&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;&lt;code&gt;# specifying the width and height of legend.key&#xD;&#xA;&#xD;&#xA;d &amp;lt;- data.frame(g=gl(4, 5),  x=rep(1:5,  4),  y=runif(4*5))&#xD;&#xA;p &amp;lt;- ggplot(d,  aes(x,  y,  linetype=g,  shape=g,  colour=g)) + geom_line() + geom_point()&#xD;&#xA;&#xD;&#xA;ps &amp;lt;- list()&#xD;&#xA;p[ [ 1 ] ] &amp;lt;- p + opts(legend.key.width=unit(3, &quot;line&quot;))&#xD;&#xA;p[ [ 2 ] ] &amp;lt;- p[ [ 1 ] ] + opts(legend.direction = &quot;horizontal&quot;,  legend.position = &quot;bottom&quot;)&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;" />
      <Message Id="609723" ParentId="150" UserId="227097" Date="12/14/2010 02:28:20" Content="&lt;pre&gt;&lt;code&gt;# specify font family of all text elements&#xD;&#xA;&#xD;&#xA;# default sans&#xD;&#xA;qplot(1:10,  1:10,  label=letters[ 1:10 ],  colour=1:10,  geom=&quot;text&quot;,  main=&quot;sans family&quot;) + &#xD;&#xA;  theme_grey(base_family=&quot;sans&quot;)&#xD;&#xA;&#xD;&#xA;# default serif&#xD;&#xA;qplot(1:10,  1:10,  label=letters[ 1:10 ],  colour=1:10,  geom=&quot;text&quot;,  main=&quot;serif family&quot;) +&#xD;&#xA;  theme_grey(base_family=&quot;serif&quot;)&#xD;&#xA;&#xD;&#xA;# default serif but xlab is sans&#xD;&#xA;qplot(1:10,  1:10,  label=letters[ 1:10 ],  colour=1:10,  geom=&quot;text&quot;,  main=&quot;serif family&quot;) +&#xD;&#xA;  theme_grey(base_family=&quot;serif&quot;) +&#xD;&#xA;  xlab(&quot;here is sans&quot;) + opts(axis.title.x=theme_text(family=&quot;sans&quot;))&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;" />
    </Messages>
  </Topic>
  <Topic Id="151" Title="Datasets should use factors and strings correctly">
    <Messages>
      <Message Id="0" ParentId="151" UserId="4196" Date="12/10/2010 03:23:58" Content="" />
      <Message Id="5093417" ParentId="151" UserId="4196" Date="04/12/2012 15:24:22" Content="```R&#xD;&#xA;diamonds$cut &lt;- ordered(diamonds$cut)&#xD;&#xA;diamonds$color &lt;- ordered(diamonds$color)&#xD;&#xA;diamonds$clarity &lt;- ordered(diamonds$clarity)&#xD;&#xA;save(diamonds,  file = &quot;data/diamonds.rda&quot;)&#xD;&#xA;&#xD;&#xA;midwest$county &lt;- as.character(midwest$county)&#xD;&#xA;midwest$state &lt;- as.character(midwest$state)&#xD;&#xA;save(midwest,  file = &quot;data/midwest.rda&quot;)&#xD;&#xA;&#xD;&#xA;movies$title &lt;- as.character(movies$title)&#xD;&#xA;save(movies,  file = &quot;data/movies.rda&quot;)&#xD;&#xA;&#xD;&#xA;msleep$name &lt;- as.character(msleep$name)&#xD;&#xA;msleep$genus &lt;- as.character(msleep$genus)&#xD;&#xA;msleep$order &lt;- as.character(msleep$order)&#xD;&#xA;save(msleep,  file = &quot;data/msleep.rda&quot;)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="152" Title="Label integration">
    <Messages>
      <Message Id="0" ParentId="152" UserId="521856" Date="12/13/2010 22:35:46" Content="The Hmisc package adds the label feature,  stores in the label attribute on variables.  Labels give intelligent and understandable names to variables.  The printing is handled with methods form the Hmisc package.  But it would be nice if ggplot2 also investigated for label attributes and printed those names by default rather than the variables names." />
      <Message Id="35938166" ParentId="152" UserId="4196" Date="02/24/2014 21:12:15" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="153" Title="coord_equal() has wrong effect when using facet_wrap() and the horizontal axis is stretched/vertical axis compressed">
    <Messages>
      <Message Id="0" ParentId="153" UserId="463252" Date="12/17/2010 20:55:24" Content="# Summary:&#xD;&#xA;&#xD;&#xA;coord_equal() does not make the coordinate systems have an equal aspect ratio when using facet_wrap() in the cases where it is the horizontal axis which must be extended to make the coordinates equal.  coord_equal() will affect the coordinate systems for vertically stretched axes when using facet_wrap(),  and in all case when using facet_grid().&#xD;&#xA;&#xD;&#xA;# Reproducible code:&#xD;&#xA;&#xD;&#xA;    p_horiz_stretch &lt;- ggplot(mtcars) +&#xD;&#xA;    geom_point(aes(x=5*hp,  y=disp)) +&#xD;&#xA;    geom_abline() +&#xD;&#xA;    coord_equal()&#xD;&#xA;    &#xD;&#xA;    p_vert_stretch &lt;- ggplot(mtcars) +&#xD;&#xA;    geom_point(aes(x=hp,  y=5*disp)) +&#xD;&#xA;    geom_abline() +&#xD;&#xA;    coord_equal()&#xD;&#xA;    &#xD;&#xA;    p_horiz_stretch&#xD;&#xA;    p_horiz_stretch + facet_grid(am~.)&#xD;&#xA;    p_horiz_stretch + facet_grid(~am)&#xD;&#xA;    p_horiz_stretch + facet_wrap(~am)&#xD;&#xA;    &#xD;&#xA;    p_vert_stretch&#xD;&#xA;    p_vert_stretch + facet_grid(am~.)&#xD;&#xA;    p_vert_stretch + facet_grid(~am)&#xD;&#xA;    p_vert_stretch + facet_wrap(~am)&#xD;&#xA;&#xD;&#xA;# Expected results:&#xD;&#xA;&#xD;&#xA;facet_grid(~am) and facet_wrap(~am) should give the same figure (at least with respect to coordinate aspect ratios).&#xD;&#xA;&#xD;&#xA;# Actual results:&#xD;&#xA;&#xD;&#xA;For p_horiz_stretch,  facet_grid(~am) maintains the aspect ratio while facet_wrap(~am) does not. It appears,  rather,  to make the plot area square,  not make the aspect ratio 1.  That is,  it has an effect (plot is different than if coord_equal() was left out completely),  but not the right one. For p_vert_stretch,  both maintain the aspect ratio.&#xD;&#xA;&#xD;&#xA;# Discussion:&#xD;&#xA;&#xD;&#xA;p_horiz_stretch is a plot (using mtcars) where the x-axis has to be stretched (or the y-axis has to be contracted,  depending on how you look at it) to make the coordinate systems equal.  In addition to the points,  a line with slope 1 is also drawn to make it easier to identify if the coordinates are in fact equal. Faceting,  via facet_grid(),  in either direction,  maintains the appropriate ratio. However,  wrapping,  which for the two values of am should be the same as the immediately previous call with facet_grid,  does not preserve the aspect ratio.  By way of comparison,  p_vert_stretch is a plot where the y-axis has be stretched (x-axis has to be contracted) which behaves as expected in all four scenarios.&#xD;&#xA;&#xD;&#xA;# Session Info:&#xD;&#xA;&#xD;&#xA;    R version 2.12.1 (2010-12-16)&#xD;&#xA;    Platform: i386-pc-mingw32/i386 (32-bit)&#xD;&#xA;    &#xD;&#xA;    locale:&#xD;&#xA;    [ 1 ] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   &#xD;&#xA;    [ 3 ] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          &#xD;&#xA;    [ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;    &#xD;&#xA;    attached base packages:&#xD;&#xA;    [ 1 ] grid      stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;    &#xD;&#xA;    other attached packages:&#xD;&#xA;    [ 1 ] ggplot2_0.8.8 proto_0.3-8   reshape_0.8.3 plyr_1.2.1 " />
      <Message Id="2055081" ParentId="153" UserId="463252" Date="09/09/2011 19:50:04" Content="Some updates:&#xD;&#xA; * This appears to be a duplicate of #130&#xD;&#xA; * Paul Metzner [ reports that ](http://groups.google.com/group/ggplot2/browse_thread/thread/86e5ce333d7e5eb9) the threshold for the problem seems to be when the aspect ratio crosses 1&#xD;&#xA; * The development version has different behavior than 0.8.9.  `facet_grid` and `facet_wrap` are now consistent with each other in their behavior.  Unfortunately,  they both exhibit the wrong behavior.&#xD;&#xA; * For the code to be reproducible in the development version,  `facet_grid(~am)` must be changed to `facet_grid(.~am)` (two places)" />
      <Message Id="2992346" ParentId="153" UserId="4196" Date="12/02/2011 16:35:36" Content="Works for me in devel version." />
    </Messages>
  </Topic>
  <Topic Id="154" Title="separately specify the ticks of x and y axes.">
    <Messages>
      <Message Id="0" ParentId="154" UserId="227097" Date="12/23/2010 16:57:26" Content="Hi,  I am aware that you are working for the next release now.&#xD;&#xA;Here is an additional commit,  which discussed in the mailing list.&#xD;&#xA;I'm sorry if you have extra work for this commit.&#xD;&#xA;&#xD;&#xA;the critical commit is: e1c08fbc	&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;&lt;code&gt;## separately specifiy the x and y axis ticks.&#xD;&#xA;&#xD;&#xA;p &amp;lt;- qplot(mpg,  wt,  data=mtcars)&#xD;&#xA;&#xD;&#xA;p&#xD;&#xA;p + opts(axis.ticks.x = theme_segment(colour=&quot;pink&quot;,  size=1))&#xD;&#xA;p + opts(axis.ticks.x = theme_segment(colour=&quot;pink&quot;,  size=1),  axis.ticks.y = theme_segment(colour=&quot;blue&quot;,  size=0.1))&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;" />
    </Messages>
  </Topic>
  <Topic Id="155" Title="aes currently doesn't work with ...">
    <Messages>
      <Message Id="0" ParentId="155" UserId="4196" Date="01/09/2011 16:25:53" Content="    f &lt;- function(...) aes(...)&#xD;&#xA;    aes(mpg,  colour = cyl)&#xD;&#xA;" />
      <Message Id="3263130" ParentId="155" UserId="4196" Date="12/23/2011 17:58:23" Content="Works fine in dev version." />
    </Messages>
  </Topic>
  <Topic Id="156" Title="facet_grid and spanning labels">
    <Messages>
      <Message Id="0" ParentId="156" UserId="4196" Date="01/10/2011 20:46:53" Content="`facet_grid` should support facet labels that span over all applicable columns,  including support for labelling an entire set of rows or cols with the variable name." />
      <Message Id="35938158" ParentId="156" UserId="4196" Date="02/24/2014 21:12:11" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="157" Title="position adjustment gives error when only one unique x value">
    <Messages>
      <Message Id="0" ParentId="157" UserId="463252" Date="01/11/2011 17:04:02" Content="# Summary:&#xD;&#xA;&#xD;&#xA;When given a set of data with only a single unique x value and a position request,  an error is thrown and no graphic is created.&#xD;&#xA;&#xD;&#xA;# Reproducible code:&#xD;&#xA;&#xD;&#xA;    df1 &lt;- data.frame(x=1,  y=1)&#xD;&#xA;    ggplot(df1,  aes(x=x,  y=y)) + geom_point(position=&quot;dodge&quot;)&#xD;&#xA;    ggplot(df1,  aes(x=x,  y=y)) + geom_point(position=&quot;stack&quot;)&#xD;&#xA;&#xD;&#xA;# Expected results:&#xD;&#xA;&#xD;&#xA;A graph with a single point.&#xD;&#xA;&#xD;&#xA;# Actual results:&#xD;&#xA;&#xD;&#xA;    &gt; df1 &lt;- data.frame(x=1,  y=1)&#xD;&#xA;    &gt; ggplot(df1,  aes(x=x,  y=y)) + geom_point(position=&quot;dodge&quot;)&#xD;&#xA;    Error in if (any(diff(intervals) &lt; -1e-06)) {  : &#xD;&#xA;      missing value where TRUE/FALSE needed&#xD;&#xA;    &gt; ggplot(df1,  aes(x=x,  y=y)) + geom_point(position=&quot;stack&quot;)&#xD;&#xA;    Error in if (any(diff(intervals) &lt; -1e-06)) {  : &#xD;&#xA;      missing value where TRUE/FALSE needed&#xD;&#xA;&#xD;&#xA;# Problem:&#xD;&#xA;&#xD;&#xA;In collide in position-collide.r,  the intervals for the x values are scaled (by base::scale) in order for the check on the threshold difference between edges to be tested on the proper scale (differences on the order of 1e-6 for measures on the order of 1).  However,  if there is only one unique x value,  the standard deviation is 0 and the scaled values are NaN which lead to NA's when testing.&#xD;&#xA;&#xD;&#xA;# Proposed patch:&#xD;&#xA;&#xD;&#xA;    @@ -34, 8 +34, 8 @@ collide &lt;- function(data,  width = NULL,  name,  strategy,  check.width = TRUE) { &#xD;&#xA;     &#xD;&#xA;       # Check for overlap&#xD;&#xA;       intervals &lt;- as.numeric(t(unique(data[ c(&quot;xmin&quot;,  &quot;xmax&quot;) ])))&#xD;&#xA;    -  intervals &lt;- scale(intervals[ !is.na(intervals) ])&#xD;&#xA;    -  if (any(diff(intervals) &lt; -1e-6)) { &#xD;&#xA;    +  intervals &lt;- intervals[ !is.na(intervals) ]&#xD;&#xA;    +  if (length(unique(intervals))&gt;1 &amp; any(diff(scale(intervals)) &lt; -1e-6)) { &#xD;&#xA;         warning(name,  &quot; requires non-overlapping x intervals&quot;,  call. = FALSE)&#xD;&#xA;         # This is where the algorithm from [ L. Wilkinson. Dot plots. &#xD;&#xA;         # The American Statistician,  1999. ] should be used&#xD;&#xA;&#xD;&#xA;This checks the number of unique values before the computation of the scaled intervals and testing of their differences.&#xD;&#xA;&#xD;&#xA;# Session Info:&#xD;&#xA;&#xD;&#xA;    R version 2.12.1 (2010-12-16)&#xD;&#xA;    Platform: i386-pc-mingw32/i386 (32-bit)&#xD;&#xA;    &#xD;&#xA;    locale:&#xD;&#xA;    [ 1 ] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   &#xD;&#xA;    [ 3 ] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          &#xD;&#xA;    [ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;    &#xD;&#xA;    attached base packages:&#xD;&#xA;    [ 1 ] grid      stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;    &#xD;&#xA;    other attached packages:&#xD;&#xA;    [ 1 ] ggplot2_0.8.9 proto_0.3-8   reshape_0.8.3 plyr_1.4     &#xD;&#xA;    &#xD;&#xA;    loaded via a namespace (and not attached):&#xD;&#xA;    [ 1 ] digest_0.4.2 tools_2.12.1&#xD;&#xA;" />
      <Message Id="669576" ParentId="157" UserId="4196" Date="01/11/2011 17:12:25" Content="Do you get the same problem with very small differences?  e.g. `c(x,  x * 1+ .Machine$double.eps)` ?" />
      <Message Id="669719" ParentId="157" UserId="463252" Date="01/11/2011 18:07:55" Content="Yes.&#xD;&#xA;&#xD;&#xA;    &gt; df2 &lt;- data.frame(x=c(1, 1+.Machine$double.eps),  y=1)&#xD;&#xA;    &gt; ggplot(df2,  aes(x=x,  y=y)) + geom_point(position=&quot;dodge&quot;)&#xD;&#xA;    Error in if (any(diff(intervals) &lt; -1e-06)) {  : &#xD;&#xA;      missing value where TRUE/FALSE needed&#xD;&#xA;&#xD;&#xA;With the proposed patch it produces a graph (and an expected message)&#xD;&#xA;&#xD;&#xA;    &gt; ggplot(df2,  aes(x=x,  y=y)) + geom_point(position=&quot;dodge&quot;)&#xD;&#xA;    ymax not defined: adjusting position using y instead&#xD;&#xA;&#xD;&#xA;However,  that small of a difference underflows:&#xD;&#xA;&#xD;&#xA;    &gt; dput(df2)&#xD;&#xA;    structure(list(x = c(1,  1),  y = c(1,  1)),  .Names = c(&quot;x&quot;,  &quot;y&quot;&#xD;&#xA;    ),  row.names = c(NA,  -2L),  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;For a small but non-vanishing difference,  both the original and patched versions work (produce a graph without an error but with a message)&#xD;&#xA;&#xD;&#xA;    &gt; df3 &lt;- data.frame(x=c(1, 1+sqrt(.Machine$double.eps)),  y=1)&#xD;&#xA;    &gt; ggplot(df3,  aes(x=x,  y=y)) + geom_point(position=&quot;dodge&quot;)&#xD;&#xA;    ymax not defined: adjusting position using y instead&#xD;&#xA;    &gt; dput(df3)&#xD;&#xA;    structure(list(x = c(1,  1.00000001490116),  y = c(1,  1)),  .Names = &#xD;&#xA;    c(&quot;x&quot;,  &quot;y&quot;),  row.names = c(NA,  -2L),  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="672591" ParentId="157" UserId="4196" Date="01/12/2011 18:52:10" Content="Thanks Brian - fixed in d8026e776578c2981f7f400b2f7c51ebea33fb29" />
    </Messages>
  </Topic>
  <Topic Id="158" Title="Pass additional arguments to plotmatrix()">
    <Messages>
      <Message Id="0" ParentId="158" UserId="18445" Date="01/12/2011 08:37:39" Content="Rather than having a just &quot;colour&quot; argument to plotmatrix() add ... and pass it to geom_point,  so that any property (not just colour) can be set. E.g.&#xD;&#xA;&#xD;&#xA;    plotmatrix(d,  mapping=aes(colour=someVariable),  size=1,  alpha=0.7)&#xD;&#xA;&#xD;&#xA;Changing the code to this should be enough:&#xD;&#xA;&#xD;&#xA;	plotmatrix = function (data,  mapping = aes(),  ...) &#xD;&#xA;	{ &#xD;&#xA;	    grid &lt;- expand.grid(x = 1:ncol(data),  y = 1:ncol(data))&#xD;&#xA;	    grid &lt;- subset(grid,  x != y)&#xD;&#xA;	    all &lt;- do.call(&quot;rbind&quot;,  lapply(1:nrow(grid),  function(i) { &#xD;&#xA;	        xcol &lt;- grid[ i,  &quot;x&quot; ]&#xD;&#xA;	        ycol &lt;- grid[ i,  &quot;y&quot; ]&#xD;&#xA;	        data.frame(xvar = names(data)[ ycol ],  yvar = names(data)[ xcol ],  &#xD;&#xA;	            x = data[ ,  xcol ],  y = data[ ,  ycol ],  data)&#xD;&#xA;	     }))&#xD;&#xA;	    all$xvar &lt;- factor(all$xvar,  levels = names(data))&#xD;&#xA;	    all$yvar &lt;- factor(all$yvar,  levels = names(data))&#xD;&#xA;	    densities &lt;- do.call(&quot;rbind&quot;,  lapply(1:ncol(data),  function(i) { &#xD;&#xA;	        data.frame(xvar = names(data)[ i ],  yvar = names(data)[ i ],  &#xD;&#xA;	            x = data[ ,  i ])&#xD;&#xA;	     }))&#xD;&#xA;	    mapping &lt;- defaults(mapping,  aes_string(x = &quot;x&quot;,  y = &quot;y&quot;))&#xD;&#xA;	    class(mapping) &lt;- &quot;uneval&quot;&#xD;&#xA;	    ggplot(all,  mapping) + facet_grid(xvar ~ yvar,  scales = &quot;free&quot;) + &#xD;&#xA;	        geom_point(na.rm = TRUE,  ...) + stat_density(aes(x = x,  &#xD;&#xA;	        y = ..scaled.. * diff(range(x)) + min(x)),  data = densities,  &#xD;&#xA;	        position = &quot;identity&quot;,  colour = &quot;grey20&quot;,  geom = &quot;line&quot;)&#xD;&#xA;	 }" />
      <Message Id="672491" ParentId="158" UserId="4196" Date="01/12/2011 18:05:57" Content="I'm not really willing to change plotmatrix,  basically because the whole approach is pretty horrible. Have you looked at ggally?" />
      <Message Id="686009" ParentId="158" UserId="18445" Date="01/18/2011 10:01:23" Content="No I didn't. It's great. Add a &quot;deprecated&quot; warning to plotmatrix to point to ggally?" />
    </Messages>
  </Topic>
  <Topic Id="159" Title="qplot does not retain mapping for color and size when adding additional layers">
    <Messages>
      <Message Id="0" ParentId="159" UserId="521856" Date="01/18/2011 02:12:14" Content="When adding a layer to a plot generated by qplot the mapping for size and color are not retained and an error is generated.  See the following code &#xD;&#xA;&#xD;&#xA;    library(maps)&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    reg &lt;- as.data.frame(map(&quot;county&quot;,  &quot;wyoming&quot;,  plot = FALSE)[ c(&quot;x&quot;,  &quot;y&quot;) ])&#xD;&#xA;&#xD;&#xA;    data&lt;-data.frame(&#xD;&#xA;    	rx=runif(100,  -111.05, -104.05),  #- Longitude	104°3'W to 111°3'W&#xD;&#xA;    	ry=runif(100, 41, 45),  # - Latitude	41°N to 45°N&#xD;&#xA;    	rz=rnorm(100), &#xD;&#xA;    	rw=rnorm(100))&#xD;&#xA;&#xD;&#xA;    #works&#xD;&#xA;    qplot(rx, ry, col=rz,  size=rw,  data=data)&#xD;&#xA;&#xD;&#xA;    #does not work&#xD;&#xA;    last_plot()+layer(data=reg,  mapping = aes(x=x, y=y),  geom='path')&#xD;&#xA;&#xD;&#xA;    # works&#xD;&#xA;    ggplot()+&#xD;&#xA;    layer(geom='point',  data=data,  mapping=aes(x=rx, y=ry, color=rz,  size=rw))+&#xD;&#xA;    layer(geom='path',  data=reg,  mapping=aes(x,  y))&#xD;&#xA;" />
      <Message Id="685427" ParentId="159" UserId="4196" Date="01/18/2011 02:18:06" Content="The problem is that they _are_ retained - you are getting an error because `reg` doesn't contain `rz` or `rw` variables.  This is by design,  and if you don't like this behaviour,  don't use qplot." />
      <Message Id="685451" ParentId="159" UserId="521856" Date="01/18/2011 02:37:15" Content="I'm sorry if I ruffled your feathers.  It just did not behave as I expected.  Could you please explain how this is a design.  I personally don't mind using ggplot()+layer(),  but I thought qplot+layer would work,  perhaps I don't understand the design implications." />
      <Message Id="686374" ParentId="159" UserId="4196" Date="01/18/2011 13:24:22" Content="Sorry for being terse,  but since it's not a bug can you please discuss this on the mailing list?" />
    </Messages>
  </Topic>
  <Topic Id="160" Title="scales=&quot;free_y&quot; in facet_grid has no effect when geom_bar is used">
    <Messages>
      <Message Id="0" ParentId="160" UserId="18445" Date="01/28/2011 13:52:15" Content="&#xD;&#xA;Initially I wanted to plot precomputed bars and was in this case&#xD;&#xA;&#xD;&#xA;	d = data.frame(x=c(runif(10),  runif(10)*4),  a=rep(c(&quot;foo&quot;,  &quot;bar&quot;),  5),  b=rep(c(&quot;one&quot;,  &quot;two&quot;),  each=10))&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=a,  y=x),  stat=&quot;identity&quot;) + facet_grid(.~b)&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=a,  y=x),  stat=&quot;identity&quot;) + facet_grid(.~b,  scales=&quot;free_y&quot;)&#xD;&#xA;&#xD;&#xA;I supposed that stat=&quot;identity&quot; was the problem,  but apparently it is the same with an histogram&#xD;&#xA;&#xD;&#xA;	d = data.frame(x=c(runif(20),  runif(20)*4),  a=runif(40),  b=rep(c(&quot;one&quot;,  &quot;two&quot;),  each=20))&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=a),  binwidth=0.2) + facet_grid(.~b)&#xD;&#xA;	ggplot(d) + geom_bar(aes(x=a),  binwidth=0.2) + facet_grid(.~b,  scales=&quot;free_y&quot;)&#xD;&#xA;" />
      <Message Id="718016" ParentId="160" UserId="4196" Date="01/28/2011 13:59:40" Content="But rows in `facet_grid` always share scales...  Maybe you want `facet_wrap`?" />
      <Message Id="718039" ParentId="160" UserId="18445" Date="01/28/2011 14:09:26" Content="OK,  indeed,  the problem is the same with geom_point.&#xD;&#xA;&#xD;&#xA;The bottom line is that if I want a 2-dimensional matrix of plots (factor a in line,  factor b in columns) with a different y for every subplot,  I should use facet_wrap and scale my plotting window appropriately (to have one level of a by line)." />
    </Messages>
  </Topic>
  <Topic Id="161" Title="geom_bar should have stat=&quot;identity&quot; as default">
    <Messages>
      <Message Id="0" ParentId="161" UserId="18445" Date="01/28/2011 13:58:45" Content="I understand it might be a painful change but:&#xD;&#xA;&#xD;&#xA;1. It is *very* confusing for new users: all other &quot;basic&quot; geoms (point,  path etc.) don't make any computation&#xD;&#xA;2. It would differentiate it from geom_histogram&#xD;&#xA;&#xD;&#xA;If a complete switch is not conceivable,  it would be natural to use stat=&quot;identity&quot; when y is supplied to geom_bar." />
      <Message Id="718019" ParentId="161" UserId="4196" Date="01/28/2011 14:00:57" Content="I think the basic problem is that people don't realise that there are two types of bar charts - if I made this change there would be an equal number of people complaining that it now doesn't work as they expect" />
      <Message Id="718068" ParentId="161" UserId="18445" Date="01/28/2011 14:21:15" Content="I think that with a geom explicitly called geom_histogram,  people should find what they need.&#xD;&#xA;&#xD;&#xA;To me the names mean:&#xD;&#xA;&#xD;&#xA;- geom_bar just draws bars of given size,  just as geom_point draws points,  geom_path draws paths etc.&#xD;&#xA;- geom_histogram computes and plots an histogram,  just as geom_boxplot computes and plot a box plot,  geom_density computes and plots the density&#xD;&#xA;&#xD;&#xA;Maybe it is a language problem though (a histogram,  in french,  is only called &quot;histogramme&quot;,  not bar chart).&#xD;&#xA;&#xD;&#xA;A way of making it clearer would be to split geoms in two categories (probably only in the documentation):&#xD;&#xA;&#xD;&#xA;1. the basic ones,  which are just drawing tools: point,  path,  bar,  polygon,  area,  rect,  segment,  text,  tile,  etc.&#xD;&#xA;2. the &quot;statistical&quot; ones,  which compute stuff before plotting: bin2d,  boxplot,  crossbar,  density,  hex,  histogram,  jitter,  quantile etc.&#xD;&#xA;&#xD;&#xA;All those that do not use stat_identity would be in the second group." />
      <Message Id="718433" ParentId="161" UserId="4196" Date="01/28/2011 15:56:19" Content="The problem is that &quot;bar&quot; chart means different things to different people - some people expect it to work like it does with stat=&quot;identity&quot; and others like it does with stat=&quot;bin&quot;.&#xD;&#xA;&#xD;&#xA;I totally agree that the current design is confusing because it tangles layers,  geoms and stats.  If I was to do it again,  I'd probably have `layer_bin`,  `layer_smooth`,  etc." />
      <Message Id="1455452" ParentId="161" UserId="4196" Date="06/28/2011 13:29:24" Content="I'm going to close this for now - it's confusing,  but I'm not convinced there's anyway to do it better." />
    </Messages>
  </Topic>
  <Topic Id="162" Title="geom_errorbarh(width=...) has no effect">
    <Messages>
      <Message Id="0" ParentId="162" UserId="1203" Date="02/03/2011 01:16:03" Content="Setting the width attribute on geom_errorbarh doesn't seem to have any effect.  Setting it on geom_error changes the width of the horizontal bar on the end of the error bars.  I expected it to have a similar effect on geom_errorbarh.  I couldn't find any good documentation of the width setting (or mention at http://had.co.nz/ggplot2/geom_errorbarh.html).&#xD;&#xA;" />
      <Message Id="734525" ParentId="162" UserId="4196" Date="02/03/2011 02:37:08" Content="You want to modify height" />
      <Message Id="734561" ParentId="162" UserId="1203" Date="02/03/2011 02:56:50" Content="Thanks Hadley!  I actually tried height on a whim but I was on an old version (R 2.9.1 + ggplot2 0.8.5).  It worked after upgrading to R 2.12.1 + ggplot2 0.8.9.&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="163" Title="facet_wrap ignores drop">
    <Messages>
      <Message Id="0" ParentId="163" UserId="4196" Date="02/04/2011 16:25:00" Content="    mpg$cyl2 &lt;- factor(mpg$cyl,  levels = c(2,  4,  5,  6,  8,  10))&#xD;&#xA;    qplot(displ,  hwy,  data = mpg) + facet_wrap(~ cyl2,  drop = FALSE)" />
      <Message Id="1771519" ParentId="163" UserId="18445" Date="08/10/2011 10:46:35" Content="I get&#xD;&#xA;&#xD;&#xA;    Error in facet_wrap(~cyl2,  drop = FALSE) : &#xD;&#xA;      unused argument(s) (drop = FALSE)&#xD;&#xA;&#xD;&#xA;with the latest version here. I don't know if this is expected.&#xD;&#xA;&#xD;&#xA;A possibly related bug: I cannot get facets for factor levels which do not have data. I think this is what `drop` should be about (`drop=TRUE` : drop levels with no data,  `drop=FALSE` : keep all levels,  with a default to `FALSE`):&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;	library(ggplot2)&#xD;&#xA;	d=data.frame(x=runif(10),  y=runif(10),  a=&quot;foo&quot;)&#xD;&#xA;	d$a=factor(d$a,  levels=c(&quot;foo&quot;,  &quot;bar&quot;))&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y))&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_wrap(~a)&#xD;&#xA;&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(.~a)&#xD;&#xA;	ggplot(d) + geom_point(aes(x=x,  y=y)) + facet_grid(a~.)&#xD;&#xA;" />
      <Message Id="3101318" ParentId="163" UserId="4196" Date="12/12/2011 02:04:46" Content="Problem is in way that `layout_base` computes base data - it uses only the levels that appear in the data.  When `drop = F` it needs to use all combinations of unique values. Needs to follow same strategy as `plyr::split_labels`" />
      <Message Id="3212493" ParentId="163" UserId="4196" Date="12/20/2011 00:58:19" Content="Need to write test cases to ensure these problems don't re-occur" />
      <Message Id="3262145" ParentId="163" UserId="4196" Date="12/23/2011 16:07:52" Content="Tests for a few more related cases:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;mpg$cyl2 &lt;- factor(mpg$cyl,  levels = c(2,  4,  5,  6,  8,  10))&#xD;&#xA;mpg$cyl3 &lt;- factor(mpg$cyl,  levels = c(8 , 6,  5,  4,  1))&#xD;&#xA;mpg$cyl4 &lt;- factor(mpg$cyl,  levels = c(2,  4))&#xD;&#xA;&#xD;&#xA;qplot(displ,  hwy,  data = mpg) + facet_wrap(~ cyl2,  drop = FALSE)&#xD;&#xA;qplot(displ,  hwy,  data = mpg) + facet_wrap(~ cyl3,  drop = FALSE)&#xD;&#xA;qplot(displ,  hwy,  data = mpg) + facet_wrap(~ cyl4,  drop = FALSE)&#xD;&#xA;&#xD;&#xA;qplot(displ,  hwy,  data = mpg) + facet_grid(. ~ cyl2,  drop = FALSE)&#xD;&#xA;qplot(displ,  hwy,  data = mpg) + facet_grid(. ~ cyl3,  drop = FALSE)&#xD;&#xA;qplot(displ,  hwy,  data = mpg) + facet_grid(. ~ cyl4,  drop = FALSE)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="164" Title="Current">
    <Messages>
      <Message Id="0" ParentId="164" UserId="18445" Date="03/04/2011 17:13:55" Content="Fixes" />
      <Message Id="1197862" ParentId="164" UserId="18445" Date="05/18/2011 15:59:43" Content="As far as I see all these are currently fixed in the `develop` branch" />
    </Messages>
  </Topic>
  <Topic Id="165" Title="facet_grid with multiple factors per faceting direction fails when one cell does not contain data">
    <Messages>
      <Message Id="0" ParentId="165" UserId="18445" Date="03/04/2011 18:20:40" Content="	d = data.frame(x=runif(10),  y=runif(10), &#xA;            a=rep(1:2,  5),  b=rep(3:4,  each=5), &#xA;            c=c(5, 5, 6, 6, 5, 5, 6, 6, 5, 5) )&#xA;&#xA;	# two facetting variables&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~b)&#xA;	# OK&#xA;&#xA;	# combination of b and c as faceting lines&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~b+c)&#xA;	# OK&#xA;	# and we have&#xA;	table(d$a,  interaction(d$b, d$c))&#xA;	# = there is at least one point in every combination&#xA;&#xA;	d$c = c(5, 5, 6, 6, 5, 5, 5, 5, 5, 5)&#xA;	table(d$a,  interaction(d$b, d$c))&#xA;	# now some combinations do not have points&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~b+c)&#xA;	# fails with:&#xA;	# Error in .$scales$x[ [ j ] ] : subscript out of bounds&#xA;&#xA;	# but this&#xA;	d$foo = interaction(d$b, d$c)&#xA;	ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~foo)&#xA;	# works OK" />
      <Message Id="1413744" ParentId="165" UserId="463252" Date="06/21/2011 20:53:27" Content="Workaround: pad the dataset with rows such that every combination of faceting variables is present,  but the padded rows have NA data so that they are dropped from the plot:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;d &lt;- rbind.fill(d, &#xD;&#xA;	with(d, expand.grid(a=unique(a),  b=unique(b),  c=unique(c))))&#xD;&#xA;table(d$a,  interaction(d$b, d$c))&#xD;&#xA;# Now has every combination&#xD;&#xA;ggplot(d) + geom_point(aes(x, y)) + facet_grid(a~b+c)&#xD;&#xA;# Plots,  but with 8 warning messages about missing values (one for each facet)&#xD;&#xA;```&#xD;&#xA;This isn't a fix,  but at least gives a workaround." />
      <Message Id="2992330" ParentId="165" UserId="4196" Date="12/02/2011 16:33:50" Content="Works for me in devel version." />
    </Messages>
  </Topic>
  <Topic Id="166" Title="Geom text style (issue #60)">
    <Messages>
      <Message Id="0" ParentId="166" UserId="227097" Date="03/09/2011 07:52:22" Content="I modified geom_text so as to users specify fontfamily,  fontface,  and lineheight.&#xD;&#xA;Note that the implementation is very simple,  just pass the params to gpar.&#xD;&#xA;So users need to set fontfamily via quartzFonts,  pdfFonts,  windowsFonts,  etc,  before using this function." />
      <Message Id="863883" ParentId="166" UserId="4196" Date="03/12/2011 16:42:37" Content="Look's good.  I'll pull in when I get a chance" />
      <Message Id="1194569" ParentId="166" UserId="227097" Date="05/18/2011 02:36:01" Content="close this and open new PR on the develop branch." />
    </Messages>
  </Topic>
  <Topic Id="167" Title="Find functions should look in the parent frame,  not the global environment">
    <Messages>
      <Message Id="0" ParentId="167" UserId="4196" Date="03/12/2011 16:31:01" Content="Particularly for transformers." />
      <Message Id="2992319" ParentId="167" UserId="4196" Date="12/02/2011 16:32:52" Content="No longer relevant with move to S3." />
    </Messages>
  </Topic>
  <Topic Id="168" Title="predict.loess does not support level argument">
    <Messages>
      <Message Id="0" ParentId="168" UserId="4196" Date="03/12/2011 16:44:14" Content="And so always returns a 68% confidence interval." />
    </Messages>
  </Topic>
  <Topic Id="169" Title="Lines across world map">
    <Messages>
      <Message Id="0" ParentId="169" UserId="4196" Date="03/12/2011 17:11:10" Content="    require(maps)&#xD;&#xA;    world &lt;- data.frame(map(&quot;world&quot;,  plot=FALSE)[ c(&quot;x&quot;, &quot;y&quot;) ])&#xD;&#xA;    ggplot( world,  aes(x=x, y=y)) + geom_path( ) +coord_map()&#xD;&#xA;" />
      <Message Id="1050886" ParentId="169" UserId="280317" Date="04/24/2011 21:01:30" Content="Here's a workaround that looks like it fixes the problem,  but that may cover the real bug or even introduce new problems.  In the transform() function of CoordMap,  change&#xD;&#xA;&#xD;&#xA;    out$x &lt;- rescale(out$x,  0:1,  details$x.range,  clip = FALSE)&#xD;&#xA;&#xD;&#xA;to&#xD;&#xA;&#xD;&#xA;    out$x &lt;- rescale(out$x,  0:1,  details$x.range,  clip = TRUE)" />
      <Message Id="35938153" ParentId="169" UserId="4196" Date="02/24/2014 21:12:08" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="170" Title="scale_identity makes legend">
    <Messages>
      <Message Id="0" ParentId="170" UserId="4196" Date="03/22/2011 12:32:46" Content="    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    row &lt;- 1:10&#xD;&#xA;    col &lt;- 1:10&#xD;&#xA;    my.colors &lt;- c(&quot;blue&quot;, rainbow(48), &quot;green&quot;)&#xD;&#xA;&#xD;&#xA;    myDF &lt;- expand.grid(row = row,  col = col)&#xD;&#xA;    myDF$value &lt;- 1:100&#xD;&#xA;    myDF$colIv &lt;- my.colors[ unclass(cut(myDF$value,  breaks = seq(0, 100, 2))) ]&#xD;&#xA;&#xD;&#xA;    p &lt;- ggplot(myDF,  aes(x = col,  y = row,  fill = colIv)) + geom_tile()&#xD;&#xA;    p &lt;- p + scale_fill_identity()&#xD;&#xA;    p" />
    </Messages>
  </Topic>
  <Topic Id="171" Title="Fix themes">
    <Messages>
      <Message Id="0" ParentId="171" UserId="18445" Date="03/31/2011 15:48:38" Content="Small improvements to ggplot's themes" />
      <Message Id="1197761" ParentId="171" UserId="18445" Date="05/18/2011 15:43:53" Content="Changes 8a238f7 where implemented in and the remaining changes are in a new pull request." />
    </Messages>
  </Topic>
  <Topic Id="172" Title="interp function can be simplified">
    <Messages>
      <Message Id="0" ParentId="172" UserId="197589" Date="04/11/2011 16:46:01" Content="The current implementation of the `interp` function can be made simpler and a little quicker.  It currently looks like this:&#xD;&#xA;&#xD;&#xA;    interp &lt;- function (start,  end,  n) &#xD;&#xA;    { &#xD;&#xA;        if (n == 1) &#xD;&#xA;            return(start)&#xD;&#xA;        start + seq(0,  1,  length = n) * (end - start)&#xD;&#xA;     }&#xD;&#xA;&#xD;&#xA;A better implementation might be&#xD;&#xA;&#xD;&#xA;    interp &lt;- function (start,  end,  n) &#xD;&#xA;    { &#xD;&#xA;        seq.int(start,  end,  length.out = n)    &#xD;&#xA;     }&#xD;&#xA;&#xD;&#xA;The advantages are that &#xD;&#xA;1) the code is cleaner and shorter&#xD;&#xA;2) `seq.int` is faster than `seq`&#xD;&#xA;&#xD;&#xA;Note that the answer can differ by small values due to floating point errors,  e.g., &#xD;&#xA;&#xD;&#xA;    start &lt;- 1.3&#xD;&#xA;    end &lt;- 2.9&#xD;&#xA;    n &lt;- 7&#xD;&#xA;    i &lt;- interp(start,  end,  n)&#xD;&#xA;    j &lt;- seq.int(start,  end,  length.out = n)&#xD;&#xA;    abs(i - j)&#xD;&#xA;&#xD;&#xA;Note that the special case handling for `n = 1` isn't required,  since &#xD;&#xA;&#xD;&#xA;    identical(start,  seq.int(start,  end,  length.out = 1)) #TRUE" />
      <Message Id="985676" ParentId="172" UserId="4196" Date="04/11/2011 19:57:33" Content="Nice - that's a much better implementation! In fact,  I should just rip out interp all together and replace it with `seq.int`" />
      <Message Id="990838" ParentId="172" UserId="197589" Date="04/12/2011 17:29:42" Content="Yeah,  I did wonder if you really needed an extra function for this." />
    </Messages>
  </Topic>
  <Topic Id="173" Title="Remove dependency on non-free gpclib">
    <Messages>
      <Message Id="0" ParentId="173" UserId="4196" Date="04/13/2011 14:04:55" Content="See patch from Pierre Roudier" />
      <Message Id="7260769" ParentId="173" UserId="4196" Date="07/25/2012 20:19:03" Content="Fixed in 9f119467da965ba723196f347821925623d63972" />
    </Messages>
  </Topic>
  <Topic Id="174" Title="ggplot does not load grid by default">
    <Messages>
      <Message Id="0" ParentId="174" UserId="18445" Date="04/19/2011 17:00:39" Content="    &gt; library(ggplot2)&#xD;&#xA;    Loading required package: reshape&#xD;&#xA;    Loading required package: plyr&#xD;&#xA;&#xD;&#xA;    Attaching package: 'reshape'&#xD;&#xA;&#xD;&#xA;    The following object(s) are masked from 'package:plyr':&#xD;&#xA;&#xD;&#xA;        rename,  round_any&#xD;&#xA;&#xD;&#xA;    Loading required package: proto&#xD;&#xA;    &gt; theme_update(plot.margin=unit(rep(0.2,  4),  &quot;lines&quot;))&#xD;&#xA;    Error in theme_update(plot.margin = unit(rep(0.2,  4),  &quot;lines&quot;)) : &#xD;&#xA;      could not find function &quot;unit&quot;&#xD;&#xA;    &gt; library(grid)&#xD;&#xA;    &gt; theme_update(plot.margin=unit(rep(0.2,  4),  &quot;lines&quot;))&#xD;&#xA;" />
      <Message Id="1027919" ParentId="174" UserId="4196" Date="04/19/2011 17:01:59" Content="This is by design.  If you want to use grid functionality,  you should be explicit about it.  This is a change from the previous version,  but it's better development practice.  The same thing will happen to plyr and reshape once I move to reshape2." />
      <Message Id="1027935" ParentId="174" UserId="4196" Date="04/19/2011 17:05:11" Content="And proto will be going away eventually too,  so we'll have:&#xD;&#xA;&#xD;&#xA;    &gt; library(ggplot2)&#xD;&#xA;    &gt; &#xD;&#xA;&#xD;&#xA;As it should be" />
      <Message Id="1027982" ParentId="174" UserId="18445" Date="04/19/2011 17:14:20" Content="Uh,  ok sorry. I thought grid was necessary to draw anything in ggplot anyway. What's the bonus in not loading it?&#xA;&#xA;Regarding plyr/reshape,  if I may make a suggestion: &#xA;&#xA;* base cast and melt on plyr&#xA;* simplify cast to only do what it does best (reshape the data) and leave more complex computations (every time there is a need for a casting function) to ddply+cast&#xA;* suppress recast&#xA;* include cast and melt in plyr&#xA;* deprecate reshape&#xA;&#xA;This is based on my experience. I used reshape heavily before (i.e. in almost every single script I wrote). Since plyr is here,  I only use melt and cast to change data from wide to tall format and use plyr for all the rest. I suspect this is a very general use case. It would reduce your maintenance burden a little." />
      <Message Id="1028025" ParentId="174" UserId="4196" Date="04/19/2011 17:18:36" Content="Yes,  that's what reshape2 basically does.  Plus it's 10-100x faster.  I did contemplate merging plyr and reshape,  but in the end I decided that they're different enough that they belong in separate packages.&#xD;&#xA;&#xD;&#xA;Basically,  it's good development practice to only expose the absolute minimum of external functions - this reduces the possibility of confusion with other packages,  and keeps the user's workspace cleaner. " />
      <Message Id="1028075" ParentId="174" UserId="18445" Date="04/19/2011 17:26:32" Content="I would have merged them on the basis that,  if cast really on does data reshaping (no computation -- as it should be),  there are,  I think,  very few occasions in which one would need reshape and not plyr. I understand that plyr and reshape do slightly different things but I just consider them as (very useful) tools for bending data around the way you want it.&#xD;&#xA;&#xD;&#xA;I understand the need to &quot;hide&quot; grid stuff. A nice development then would be to suppress the requirement for unit(),  arrow() etc. in ggplot by providing nice defaults (&quot;npc&quot; for units) or wrappers (arrow becomes an argument with length and angle which is fed to grid:arrows)." />
    </Messages>
  </Topic>
  <Topic Id="175" Title="Syntax error when data has zero range">
    <Messages>
      <Message Id="0" ParentId="175" UserId="18445" Date="04/19/2011 17:41:36" Content="    &gt; library(ggplot2)&#xD;&#xA;    &gt; qplot(0, 0)&#xD;&#xA;    Error in range[ 1 ] : object of type 'builtin' is not subsettable&#xD;&#xA;&#xD;&#xA;I think line 183 in scale-.r in ggplot2 should read:&#xD;&#xA;&#xD;&#xA;    breaks &lt;- range(limits)[ 1 ]&#xD;&#xA;&#xD;&#xA;instead of just &#xD;&#xA;&#xD;&#xA;    breaks &lt;- range[ 1 ]" />
      <Message Id="1455412" ParentId="175" UserId="4196" Date="06/28/2011 13:21:20" Content="Fixed at some point in the past.  Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="176" Title="geom_vline doesn't work with 0-length intercepts">
    <Messages>
      <Message Id="0" ParentId="176" UserId="4196" Date="04/30/2011 16:09:16" Content="&#xD;&#xA;    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    b &lt;- numeric(0)&#xD;&#xA;&#xD;&#xA;    DF &lt;- data.frame(x = 1:6,  y = seq(6) * 10^6)&#xD;&#xA;&#xD;&#xA;    qplot(x,  y,  data = DF,  geom = &quot;smooth&quot;)  +&#xD;&#xA;       geom_vline(xintercept=b,  col = &quot;dark blue&quot;,  lty='dashed')&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Reported by Gabor Grothendieck" />
      <Message Id="5163827" ParentId="176" UserId="86978" Date="04/16/2012 22:09:21" Content="This is fixed by #499 and #482 together. A different syntax,  using `annotate(&quot;vline&quot;)`,  is required:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;DF &lt;- data.frame(x = 1:6,  y = seq(6) * 10^6)&#xD;&#xA;qplot(x,  y,  data = DF)  + annotate(&quot;vline&quot;,  xintercept=numeric(0))&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="7462302" ParentId="176" UserId="86978" Date="08/02/2012 17:31:59" Content="This works fine for me (no line,  and no error):&#xA;&#xA;```R&#xA;qplot(1:3,  1:3) + geom_vline(xintercept=b,  col = &quot;dark blue&quot;,  lty='dashed')&#xA;```&#xA;&#xA;The original example gives me some warnings,  but they seem to be related to the loess smoothing of the small data set. Increasing the number of points from 6 to 7 makes the errors go away.&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="177" Title="wrap_hmisc doesn't include ymax in result">
    <Messages>
      <Message Id="0" ParentId="177" UserId="372989" Date="05/05/2011 06:10:04" Content="I've suddenly started to have trouble using stat_summary(fun.data=&quot;mean_cl_boot&quot;).&#xD;&#xA;I receive the error: &quot;geom_crossbar requires the following missing aesthetics: ymax&quot;&#xD;&#xA;&#xD;&#xA;Attached is a small example that indicates the problem is in the wrap_hmisc function. The issue seems related to namespaces,  as wrap_hmisc works fine when the code is copied into the R prompt.&#xD;&#xA;&#xD;&#xA;My R configuration and example output are attached as well,  perhaps it's just a wonky version conflict.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;data &lt;- data.frame(x=rep(1:5,  20),  y=rnorm(100))&#xD;&#xA;&#xD;&#xA;my.wrap_hmisc &lt;- function (fun) #wrap_hmisc function body copied directly from prompt &#xD;&#xA;{ &#xD;&#xA;    function(x,  ...) { &#xD;&#xA;        try_require(&quot;Hmisc&quot;)&#xD;&#xA;        result &lt;- safe.call(fun,  list(x = x,  ...))&#xD;&#xA;        rename(data.frame(t(result)),  c(Median = &quot;y&quot;,  Mean = &quot;y&quot;,  &#xD;&#xA;            Lower = &quot;ymin&quot;,  Upper = &quot;ymax&quot;))&#xD;&#xA;     }&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;my.mean_cl_boot &lt;- my.wrap_hmisc(&quot;smean.cl.boot&quot;)&#xD;&#xA;&#xD;&#xA;mean_cl_boot(data$y) #library supplied mean_cl_boot doesn't include ymax (required for geom_crossbar)&#xD;&#xA;&#xD;&#xA;my.mean_cl_boot(data$y) #user supplied my.mean_cl_boot does include ymax,  despite using the same source code (in different namespaces though)&#xD;&#xA;&#xD;&#xA;############CONFIG##########&#xD;&#xA;#(R version 2.13.0 (2011-04-13))&#xD;&#xA;#installed.packages() &#xD;&#xA;#Hmisc           &quot;Hmisc&quot;           &quot;/Library/Frameworks/R.framework/Versions/2.13/Resources/library&quot; &quot;3.8-3&quot;       NA   &#xD;&#xA;#ggplot2         &quot;ggplot2&quot;         &quot;/Library/Frameworks/R.framework/Versions/2.13/Resources/library&quot; &quot;0.8.9&quot;       NA     &#xD;&#xA;#plyr            &quot;plyr&quot;            &quot;/Library/Frameworks/R.framework/Versions/2.13/Resources/library&quot; &quot;1.5&quot;         NA    &#xD;&#xA;#reshape         &quot;reshape&quot;         &quot;/Library/Frameworks/R.framework/Versions/2.13/Resources/library&quot; &quot;0.8.4&quot;       NA        &#xD;&#xA;&#xD;&#xA;##########OUTPUT############&#xD;&#xA;# &gt; library(ggplot2)&#xD;&#xA;# Loading required package: reshape&#xD;&#xA;# Loading required package: plyr&#xD;&#xA;# &#xD;&#xA;# Attaching package: 'reshape'&#xD;&#xA;# &#xD;&#xA;# The following object(s) are masked from 'package:plyr':&#xD;&#xA;# &#xD;&#xA;#     rename,  round_any&#xD;&#xA;# &#xD;&#xA;# Loading required package: grid&#xD;&#xA;# Loading required package: proto&#xD;&#xA;# &gt; &#xD;&#xA;# &gt; data &lt;- data.frame(x=rep(1:5,  20),  y=rnorm(100))&#xD;&#xA;# &gt; &#xD;&#xA;# &gt; my.wrap_hmisc &lt;- function (fun) &#xD;&#xA;# + { &#xD;&#xA;# +     function(x,  ...) { &#xD;&#xA;# +         try_require(&quot;Hmisc&quot;)&#xD;&#xA;# +         result &lt;- safe.call(fun,  list(x = x,  ...))&#xD;&#xA;# +         rename(data.frame(t(result)),  c(Median = &quot;y&quot;,  Mean = &quot;y&quot;,  &#xD;&#xA;# +             Lower = &quot;ymin&quot;,  Upper = &quot;ymax&quot;))&#xD;&#xA;# +      }&#xD;&#xA;# +  }&#xD;&#xA;# &gt; &#xD;&#xA;# &gt; my.mean_cl_boot &lt;- my.wrap_hmisc(&quot;smean.cl.boot&quot;)&#xD;&#xA;# &gt; &#xD;&#xA;# &gt; mean_cl_boot(data$y)&#xD;&#xA;#            y          y      ymin&#xD;&#xA;# 1 -0.0234701 -0.2127575 0.1547785&#xD;&#xA;# &gt; my.mean_cl_boot(data$y)&#xD;&#xA;#            y       ymin      ymax&#xD;&#xA;# 1 -0.0234701 -0.2178521 0.1527455&#xD;&#xA;```" />
      <Message Id="1103992" ParentId="177" UserId="372989" Date="05/05/2011 06:35:42" Content="Looking a bit deeper,  the problem is caused by an incorrectly namespaced rename function.&#xA;&#xA;Modifying the wrap_hmisc source to specify plyr::rename continues to give the incorrect result,  but using reshape::rename gives the expected result.  Removing the unused (in this case) Median=&quot;y&quot; replacement also gives the expected result.&#xA;&#xA;Is this a library version dependency problem or a bug?&#xA;&#xA;The title of this issue is probably misleading now,  is it safe to change?&#xA;&#xA;```R&#xA;library(plyr)&#xA;library(reshape)&#xA;&#xA;data &lt;- data.frame(Mean = -0.000360910369778861,  &#xA;                   Lower = -0.800518008047478,  &#xA;				   Upper = 0.812116043553483)&#xA;				     &#xA;				     			       &#xA;reshape::rename(data,  c(Median = &quot;y&quot;,  Mean = &quot;y&quot;,  Lower = &quot;ymin&quot;,  Upper = &quot;ymax&quot;))    &#xA;#OK&#xA;#&gt; y      ymin     ymax&#xA;#1 -0.0003609104 -0.800518 0.812116&#xA;&#xA;plyr::rename(data,  c(Median = &quot;y&quot;,  Mean = &quot;y&quot;,  Lower = &quot;ymin&quot;,  Upper = &quot;ymax&quot;))    &#xA;#FAIL&#xA;#&gt; y         y     ymin&#xA;#1 -0.0003609104 -0.800518 0.812116&#xA;&#xA;plyr::rename(data,  c(Mean = &quot;y&quot;,  Lower = &quot;ymin&quot;,  Upper = &quot;ymax&quot;))    &#xA;#OK (removed Median from replacements as it wasn't being used)&#xA;#&gt; y      ymin     ymax&#xA;#1 -0.0003609104 -0.800518 0.812116&#xA;&#xA;```" />
      <Message Id="1104042" ParentId="177" UserId="372989" Date="05/05/2011 06:47:11" Content="Upgrading plyr to 1.5.2 fixed the problem!  I should have checked the plyr issue tracker as it seems the problem was fixed between plyr 1.5 (the version I was running) and 1.5.2.&#xA;&#xA;I had already tried upgrading ggplot2 but it didn't solve the problem,  maybe the dependencies need to be updated?" />
      <Message Id="1107883" ParentId="177" UserId="4196" Date="05/05/2011 20:07:29" Content="Yes,  this was a colossally dumb bug on my behalf :(  Thankfully it's fixed now!" />
    </Messages>
  </Topic>
  <Topic Id="178" Title="Binning inconsistent between stat_bin and stat_bin2d()">
    <Messages>
      <Message Id="0" ParentId="178" UserId="737298" Date="05/10/2011 23:51:19" Content="```&#xD;&#xA;df&lt;-data.frame(hour=rep(0:2, 100), value=rnorm(3*100))&#xD;&#xA;&#xD;&#xA;# Three bins&#xD;&#xA;ggplot(df, aes(hour))+stat_bin(binwidth=1)&#xD;&#xA;&#xD;&#xA;# Only two bins on the x-axis&#xD;&#xA;ggplot(df, aes(hour, value))+stat_bin2d(binwidth=c(1, 1))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I suspect this is due to the fact that stat_bin2d() doesn't pass pad=TRUE to fullseq() when determining breaks&#xD;&#xA;&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/stat-bin2d.r#L40&#xD;&#xA;&#xD;&#xA;but stat_bin() does&#xD;&#xA;&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/stat-bin.r#L23&#xD;&#xA;" />
      <Message Id="2992304" ParentId="178" UserId="4196" Date="12/02/2011 16:31:48" Content="Putting this of for 1.0 and densityVis integration." />
      <Message Id="35938874" ParentId="178" UserId="4196" Date="02/24/2014 21:15:36" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35938874" ParentId="178" UserId="4196" Date="02/24/2014 21:15:36" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="179" Title="Fix/coord wisely zoom">
    <Messages>
      <Message Id="0" ParentId="179" UserId="227097" Date="05/17/2011 16:49:20" Content="fix it.&#xD;&#xA;As the scales${ x|y }$limits are overwritten,  please make sure this will not induce any problem in other place.&#xD;&#xA;" />
      <Message Id="1191610" ParentId="179" UserId="227097" Date="05/17/2011 16:55:31" Content="Something wired is taking place with regards to this pull request.&#xD;&#xA;The pull request for axis had been dropped. So please ignore them.&#xD;&#xA;&#xD;&#xA;The fix for zoom is very small code,  so maybe it is better to fix it by hand." />
      <Message Id="1191645" ParentId="179" UserId="227097" Date="05/17/2011 16:59:05" Content="hi, &#xD;&#xA;&#xD;&#xA;scale_limits.continuous() uses the scales$y$limits&#xD;&#xA;scale_breaks.continuous() uses the scale_limits()&#xD;&#xA;and scale_break_positions() uses the scale_beaks.&#xD;&#xA;" />
      <Message Id="1194963" ParentId="179" UserId="227097" Date="05/18/2011 04:43:43" Content="reconstructing commit tree. close for a while." />
    </Messages>
  </Topic>
  <Topic Id="180" Title="geom-text-style">
    <Messages>
      <Message Id="0" ParentId="180" UserId="227097" Date="05/18/2011 02:42:51" Content="I modified geom_text so as to users specify fontfamily,  fontface,  and lineheight.&#xD;&#xA;Note that the implementation is very simple,  just pass the params to gpar.&#xD;&#xA;So users need to set fontfamily via quartzFonts,  pdfFonts,  windowsFonts,  etc,  before using this function.&#xD;&#xA;&#xD;&#xA;A commit e1c08fbc is unexpectedly mixed in this branch.&#xD;&#xA;Maybe I will fix the commit history and rebase." />
      <Message Id="1194969" ParentId="180" UserId="227097" Date="05/18/2011 04:45:45" Content="reconstructing commit tree. close for a while." />
    </Messages>
  </Topic>
  <Topic Id="181" Title="Geom text style">
    <Messages>
      <Message Id="0" ParentId="181" UserId="227097" Date="05/18/2011 07:28:23" Content="Finally I got a clean commit tree. Some notes on commits may be lost,  though...&#xD;&#xA;&#xD;&#xA;I modified geom_text so as to users specify fontfamily,  fontface,  and lineheight.&#xD;&#xA;Note that the implementation is very simple,  just pass the params to gpar.&#xD;&#xA;So users need to set fontfamily via quartzFonts,  pdfFonts,  windowsFonts,  etc,  before using this function." />
    </Messages>
  </Topic>
  <Topic Id="182" Title="Fix/coord wisely zoom">
    <Messages>
      <Message Id="0" ParentId="182" UserId="227097" Date="05/18/2011 08:49:37" Content="Finally,  here is a clean commit tree.&#xD;&#xA;The bug in wisely zoom was fixed." />
    </Messages>
  </Topic>
  <Topic Id="183" Title="Improve themes (theme_bw() in particular)">
    <Messages>
      <Message Id="0" ParentId="183" UserId="18445" Date="05/18/2011 15:43:02" Content="These are the remaining changes in my previous pull request regarding themes" />
    </Messages>
  </Topic>
  <Topic Id="184" Title="Improvements to ggsave">
    <Messages>
      <Message Id="0" ParentId="184" UserId="18445" Date="05/18/2011 15:53:57" Content="" />
      <Message Id="1455405" ParentId="184" UserId="4196" Date="06/28/2011 13:20:22" Content="I'm still not certain about this change - it gets a bit confusing if you do something like `ggsave(units = &quot;cm&quot;)`.  What does that mean?   &#xD;&#xA;&#xD;&#xA;Are you aware of the `cm` function?  That way you can at least do `ggsave(width = cm(10),  height = cm(10))`" />
      <Message Id="1455445" ParentId="184" UserId="18445" Date="06/28/2011 13:27:13" Content="`ggsave(units=&quot;cm&quot;)` is indeed confusing since it does nothing. Maybe it would be clearer if it affected the display of the size when width and height are not specified.&#xD;&#xA;&#xD;&#xA;I did not know about `cm()`. I still think having an explicit argument is more discoverable." />
      <Message Id="1455615" ParentId="184" UserId="18445" Date="06/28/2011 13:54:09" Content="What about with these new changes? The code is not clearer but the user interface is consistent,  and improved I think.&#xD;&#xA;&#xD;&#xA;I understand that this might seem low priority. One get's used to american units after a while,  even coming from a country using international standard units. But my students,  who have not be confronted to this peculiarity yet,  are completely put off by inches." />
      <Message Id="1470582" ParentId="184" UserId="4196" Date="06/29/2011 21:06:08" Content="Looking good - if you can fix those last formatting issues I'll pull it." />
      <Message Id="1470614" ParentId="184" UserId="18445" Date="06/29/2011 21:09:55" Content="Done" />
      <Message Id="2992295" ParentId="184" UserId="4196" Date="12/02/2011 16:31:03" Content="If you update again,  I promise to pull in this time!" />
      <Message Id="3072081" ParentId="184" UserId="18445" Date="12/08/2011 23:26:54" Content="It is now in feature request #285" />
    </Messages>
  </Topic>
  <Topic Id="185" Title="theme_get() has no direct documentation">
    <Messages>
      <Message Id="0" ParentId="185" UserId="421859" Date="05/18/2011 23:11:23" Content="This highly useful function for reviewing all theme options does not show up in the list when one searches for ??theme while not an issue,  a simple description of this function could provide much needed direction to people searching for thematic elements of plots." />
    </Messages>
  </Topic>
  <Topic Id="186" Title="Loading ggplot2 loads reshape,  which masks functions from reshape2 and plyr">
    <Messages>
      <Message Id="0" ParentId="186" UserId="86978" Date="05/23/2011 06:35:39" Content="When ggplot2 is loaded,  it loads reshape,  which masks some functions from reshape2 and plyr. This has caused some problems for me,  in cases where the function definition has changed between the two versions. For example,  with `melt`:&#xD;&#xA;&#xD;&#xA;    &gt; library(reshape2)&#xD;&#xA;    &gt; melt(smiths,  id.vars = &quot;subject&quot;,  measure.vars=c(&quot;time&quot;, &quot;age&quot;),  variable.name=&quot;feature&quot;)&#xD;&#xA;         subject feature value&#xD;&#xA;    1 John Smith    time     1&#xD;&#xA;    2 Mary Smith    time     1&#xD;&#xA;    3 John Smith     age    33&#xD;&#xA;    4 Mary Smith     age    NA&#xD;&#xA;&#xD;&#xA;That worked OK. Now load ggplot2,  which masks some functions.&#xD;&#xA;&#xD;&#xA;    &gt; library(ggplot2)&#xD;&#xA;    Loading required package: reshape&#xD;&#xA;    Loading required package: plyr&#xD;&#xA;    &#xD;&#xA;    Attaching package: 'reshape'&#xD;&#xA;    &#xD;&#xA;    The following object(s) are masked from 'package:plyr':&#xD;&#xA;    &#xD;&#xA;        rename,  round_any&#xD;&#xA;    &#xD;&#xA;    The following object(s) are masked from 'package:reshape2':&#xD;&#xA;    &#xD;&#xA;        colsplit,  melt,  recast&#xD;&#xA;    &#xD;&#xA;    Loading required package: grid&#xD;&#xA;    Loading required package: proto&#xD;&#xA;&#xD;&#xA;Try again (this calls the version of melt from reshape).&#xD;&#xA;&#xD;&#xA;    &gt; melt(smiths,  id.vars = &quot;subject&quot;,  measure.vars=c(&quot;time&quot;, &quot;age&quot;),  variable.name=&quot;feature&quot;)&#xD;&#xA;         subject variable value&#xD;&#xA;    1 John Smith     time     1&#xD;&#xA;    2 Mary Smith     time     1&#xD;&#xA;    3 John Smith      age    33&#xD;&#xA;    4 Mary Smith      age    NA&#xD;&#xA;&#xD;&#xA;Notice that the column that was called &quot;feature&quot; is now called &quot;variable&quot;,  because the relevant argument in reshape2 is `variable.name`,  but in reshape it is `variable_name`.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1221490" ParentId="186" UserId="4196" Date="05/23/2011 13:07:10" Content="This is fixed in the development version of ggplot2,  which I hope to release by the end of summer." />
    </Messages>
  </Topic>
  <Topic Id="187" Title="Specify xlim and ylim for each facet separately">
    <Messages>
      <Message Id="0" ParentId="187" UserId="227097" Date="05/23/2011 08:19:51" Content="Maybe it is fine if xlim and ylim can be specified for each facet separately,  at least,  for facet_wrap.&#xD;&#xA;Now,  panel contains the information about ranges of each facet,  so e.g., &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# lims like this:&#xD;&#xA;  vs am xmin xmax ymin ymax&#xD;&#xA;1  0  0    8    8 10.4 19.2&#xD;&#xA;2  0  1    4    8 15.0 26.0&#xD;&#xA;3  1  0    4    6 17.8 24.4&#xD;&#xA;4  1  1    4    4 21.4 33.9&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and specify by,  e.g., &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;+ facet_wrap(~vs+am,  limits = lims)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1221485" ParentId="187" UserId="4196" Date="05/23/2011 13:06:13" Content="Yes,  I like this idea,  and I like that basic syntax.  But how do limit and free scales interact?  And what happens if you specify `facet_wrap(~ vs,  limits = lims)`.&#xA;&#xA;Another related idea that I've been thinking about is giving layers the ability not to affect scale limits - this is useful when you are plotting spatial data and want to add a map on top.  You don't want the map to affect the limits,  because it may be much bigger than you data,  and using coord to zoom in is a hassle.  If that idea was implemented,  modifying scales on a facet-by-facet basis would amount to using `train_position = F` for all layers,  apart from a `geom_blank` which specified the dummy data to expand the scales as needed - which `expand_limits` already does.&#xA;&#xA;Implementing scale limits in that way would also mean the behaviour of free scales etc could remain as is." />
      <Message Id="1224338" ParentId="187" UserId="227097" Date="05/23/2011 21:13:23" Content="Hi&#xD;&#xA;&#xD;&#xA;Actually I meant the limits for coord,  but yes,  the limits for scale&#xD;&#xA;also should be like that.&#xD;&#xA;&#xD;&#xA;In the case of coord,  probably we have nothing to worry about.&#xD;&#xA;Just passing `lims` data drame to `coord_*` is sufficient,  and there&#xD;&#xA;is no problem about the interaction of free scale and limits.&#xD;&#xA;I will try to implement it.&#xD;&#xA;&#xD;&#xA;As for the limits for scales,  as you say,  things may be somewhat complicated.&#xD;&#xA;&#xD;&#xA;&gt; But how do limit and free scales interact?&#xD;&#xA;&#xD;&#xA;I think manual limits should have top-priority.&#xD;&#xA;&#xD;&#xA;&gt; And what happens if you specify `facet_wrap(~ vs,  limits = lims)`.&#xD;&#xA;&#xD;&#xA;Just an error,  since the limits are indeterminable.&#xD;&#xA;Or,  with warning,  use the first apparence of `vs`.&#xD;&#xA;&#xD;&#xA;&gt; Another related idea that I've been thinking about is giving layers the ability not to affect scale limits - this is useful when you are plotting spatial data and want to add a map on top.  You don't want the map to affect the limits,  because it may be much bigger than you data,  and using coord to zoom in is a hassle.  If that idea was implemented,  modifying scales on a facet-by-facet basis would amount to using `train_position = F` for all layers,  apart from a `geom_blank` which specified the dummy data to expand the scales as needed - which `expand_limits` already does.&#xD;&#xA;&#xD;&#xA;Totally the idea sounds good,  although I'm not sure if explicit&#xD;&#xA;null-geom is necessary.&#xD;&#xA;&#xD;&#xA;--&#xD;&#xA;Kohske Takahashi &lt;takahashi.kohske@gmail.com&gt;&#xD;&#xA;&#xD;&#xA;Research Center for Advanced Science and Technology, &#xD;&#xA;The University of  Tokyo,  Japan.&#xD;&#xA;http://www.fennel.rcast.u-tokyo.ac.jp/profilee_ktakahashi.html&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;On Mon,  May 23,  2011 at 10:06 PM,  hadley&#xD;&#xA;&lt;reply@reply.github.com&gt;&#xD;&#xA;wrote:&#xD;&#xA;&gt; Yes,  I like this idea,  and I like that basic syntax.  But how do limit and free scales interact?  And what happens if you specify `facet_wrap(~ vs,  limits = lims)`.&#xD;&#xA;&gt;&#xD;&#xA;&gt; Another related idea that I've been thinking about is giving layers the ability not to affect scale limits - this is useful when you are plotting spatial data and want to add a map on top.  You don't want the map to affect the limits,  because it may be much bigger than you data,  and using coord to zoom in is a hassle.  If that idea was implemented,  modifying scales on a facet-by-facet basis would amount to using `train_position = F` for all layers,  apart from a `geom_blank` which specified the dummy data to expand the scales as needed - which `expand_limits` already does.&#xD;&#xA;&gt;&#xD;&#xA;&gt; --&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub:&#xD;&#xA;&gt; https://github.com/hadley/ggplot2/issues/187#comment_1221485&#xD;&#xA;&gt;" />
      <Message Id="1225001" ParentId="187" UserId="227097" Date="05/23/2011 23:28:26" Content="Here is a testbed of manual limits for coord with facet_wrap.&#xA;&#xA;https://github.com/kohske/ggplot2/commit/bd715814a7d048aeac9c8c4023b7f64fa689b983" />
      <Message Id="1228127" ParentId="187" UserId="4196" Date="05/24/2011 13:20:55" Content="Hmmmm,  that code just looks too complicated to me.  It's a lot of extra complexity for not a lot of extra gain.  I think giving layers the ability to control whether or not they affect position scaling is simpler to implement,  more elegant (in terms of playing nicely with existing code for free limits) and allows a number of other interesting techniques that were previously not possibly." />
      <Message Id="1229183" ParentId="187" UserId="227097" Date="05/24/2011 15:46:31" Content="&gt; Hmmmm,  that code just looks too complicated to me.  It's a lot of extra complexity for not a lot of extra gain.  I think giving layers the ability to control whether or not they affect position scaling is simpler to implement,  more elegant (in terms of playing nicely with existing code for free limits) and allows a number of other interesting techniques that were previously not possibly.&#xD;&#xA;&#xD;&#xA;Yes,  exactly,  yes. It may be too complicated and hard to understand.&#xD;&#xA;Probably the layers will do that,  but thus far I could not entirely&#xD;&#xA;figure out the power of the layers.&#xD;&#xA;So,  I will look into the code and consider a implementation.&#xD;&#xA;&#xD;&#xA;thanks, &#xD;&#xA;&#xD;&#xA;kohske" />
      <Message Id="1232315" ParentId="187" UserId="18970" Date="05/24/2011 23:59:33" Content="I would like to add another,  related request. Different panels with different limits may also require fine-tuning of the breaks on a per-panel basis (I do need this,  often). Currently the only way I could achieve this was to mask grid.pretty() and play some ugly tricks to have it return different breaks for different data ranges. &#xA;It sure would be nice to be able to specify manual breaks for each facet,  in those few special occasions. I don't expect there will ever be a properly grammatical syntax for this,  though. Failing this,  perhaps it should simply be part of opts()? I could imagine a new opts() for a ggplot being similar to the way lattice handles these cosmetic details, &#xA;&#xA;- specify the panel ordering&#xA;- specify the panel widths,  and interpanel spacings (allowing visual groupings,  e.g. 2 by 2)&#xA;- specify a list of panel limits,  with optional recycling&#xA;- specify the panel x and y breaks&#xA;(- perhaps even more options,  such as per-panel background colour,  ...)&#xA;&#xA;&#xA;" />
      <Message Id="1232757" ParentId="187" UserId="4196" Date="05/25/2011 02:18:50" Content="That's actually possible in the devel version - you can take the output of `ggplot_build` and modify the per-panel labels there.  I'm not sure if I want to commit to a formal API yet.  &#xA;&#xA;ggplot2 will never handle these details like lattice does,  because I really dislike how that works - you should be describing things in terms of the underlying data,  not by some arbitrary panel number." />
      <Message Id="1232983" ParentId="187" UserId="18970" Date="05/25/2011 03:18:25" Content="It should be possible to specify all these details in terms of the facetting variables as opposed to the panel number; admittedly the syntax becomes more cumbersome. There may be a way to define a new data structure between data.frame and list to handle these options. Below is an illustration of what I have in mind,  storing the values in a long format matrix.&#xA;&#xA;my.panel.details &lt;- function(){ &#xA;&#xA;  ## two facetting variables&#xA;  row.var &lt;- rep(letters[ 1:2 ],  2)&#xA;  col.var &lt;- rep(LETTERS[ 1:2 ],  each=2)&#xA;&#xA;  ## corresponding specifications&#xA;  cbind(row.var=row.var,  col.var=col.var, &#xA;             limits = c(list(c(0,  10)),  # per panel limits&#xA;               list(c(0,  Inf)),  # Inf means 'use the defaults from the data'&#xA;               list(c(-Inf,  Inf)), &#xA;               list(c(-Inf,  Inf))), &#xA;             breaks = c(list(seq(0, 10)), &#xA;               list(seq(-10, 10, by=5)), &#xA;               list(seq(-10, 10, by=2)), &#xA;               list(seq(-10, 10, by=1))), &#xA;             vspacing = c(5,  5),  # vertical spacing between the panels,  repeated by technical necessity&#xA;             hspacing = c(0,  0),  # horizontal spacing between the panels&#xA;             width = c(1,  2),  # using null units?&#xA;             height = c(1,  1),  # using null units?&#xA;             background.color = c(&quot;grey95&quot;))&#xA;&#xA; }&#xA;&#xA;my.panel.details()&#xA;&#xA;opts(panel.details = my.panel.details())&#xA;&#xA;" />
      <Message Id="14300357" ParentId="187" UserId="708325" Date="03/01/2013 17:18:48" Content="It's two years on,  but I'd really like to be able to specify ylims for each facet as described above. Any chance of getting this included?" />
      <Message Id="16988081" ParentId="187" UserId="841437" Date="04/25/2013 04:24:12" Content="I second that last comment by @jonsedar. Any news on this? " />
      <Message Id="17543442" ParentId="187" UserId="1813400" Date="05/07/2013 13:56:00" Content="+1" />
      <Message Id="18215603" ParentId="187" UserId="4490535" Date="05/21/2013 15:15:13" Content="+1" />
      <Message Id="19488280" ParentId="187" UserId="2185517" Date="06/15/2013 00:27:02" Content="+1" />
      <Message Id="21847779" ParentId="187" UserId="4927369" Date="07/31/2013 08:37:04" Content="A possible way to implement this feature is to add a attribute to layers on how they affect scale limits.&#xD;&#xA;This attribute could have three values&#xD;&#xA;* `Normal`: The layer have the same behavior as in the current implementation of ggplot2&#xD;&#xA;* `Ignore`: The layer is ignored when computing the scale  limits,  as already proposed by @hadley above&#xD;&#xA;* `Force`: The layer force the scale limits based on his own data and the data on the other layers are not considered to compute the scales limits&#xD;&#xA;&#xD;&#xA;Then we can easily set the scale limits by creating a layer,  say `geom_rect` with the desired size. We can then control the visibility of the layer either by the aesthetic `alpha`,  or a new attribute on layer controlling visibility.  if we want to affect only on direction,  say `x`,  we can set the dimension of the geom to `Inf` and `-Inf` in this direction. &#xD;&#xA;&#xD;&#xA;This is not a direct implementation of the feature requested,  but it  will do the job with a minimum of hacks. It will also enable the possibility of ignoring some layer. This is  useful for maps as mentioned by  @hadley but also,  for example,  to plot the prediction of a model together with data while only keeping the focus on the data.&#xD;&#xA;&#xD;&#xA;  &#xD;&#xA;  &#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35938913" ParentId="187" UserId="4196" Date="02/24/2014 21:15:44" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="100076065" ParentId="187" UserId="1439962" Date="05/08/2015 02:14:48" Content="I think the simple way is to modify the original data,  remove the unwanted values" />
      <Message Id="104422939" ParentId="187" UserId="468070" Date="05/21/2015 21:15:19" Content="+1" />
    </Messages>
  </Topic>
  <Topic Id="188" Title="Loop over taus in stat_quantile">
    <Messages>
      <Message Id="0" ParentId="188" UserId="4196" Date="05/25/2011 15:16:34" Content="So you can use `rqss` or `rq`.  Also need to add `rqss` example." />
    </Messages>
  </Topic>
  <Topic Id="189" Title="Inconsistent vjust setting in theme_bw">
    <Messages>
      <Message Id="0" ParentId="189" UserId="185075" Date="05/27/2011 09:00:59" Content="In theme_bw (file R/theme-defaults.r),  the axis.title.x is given a vjust of 1.  This is in contrast with theme_grey,  where this vjust is (correctly) 0.5.  Setting it to 1 causes the axis label to be too close to the axis when using the tikzDevice R package." />
      <Message Id="1248107" ParentId="189" UserId="185075" Date="05/27/2011 09:21:24" Content="Setting axis.title.x's vjust to 0 actually gives even better results with tikzDevice,  but I don't know if that is the right thing to do in general.  (It has always seemed to me that tikzDevice spaces things much more narrowly than on-screen graphics devices.)" />
      <Message Id="1318313" ParentId="189" UserId="18445" Date="06/07/2011 17:04:24" Content="This is in pull request: https://github.com/hadley/ggplot2/pull/183" />
      <Message Id="1455396" ParentId="189" UserId="4196" Date="06/28/2011 13:18:22" Content="Fixed,  thanks to Jiho's pull request." />
    </Messages>
  </Topic>
  <Topic Id="190" Title="y-axis scaling for small data values">
    <Messages>
      <Message Id="0" ParentId="190" UserId="18970" Date="05/28/2011 22:46:20" Content="When the data are small (typically,  &lt; 1e-4),  ggplot fails to find an appropriate y scale and displays a horizontal line with no y-axis range.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;set.seed(123)&#xD;&#xA;d1 &lt;- d2 &lt;- data.frame(x=seq(0, 10,  length=1e2), &#xD;&#xA;                      y=rnorm(1e2,  sd=1e-3))&#xD;&#xA;&#xD;&#xA;d2$y &lt;- d2$y * 1e-4&#xD;&#xA;&#xD;&#xA;p1 &lt;-&#xD;&#xA; ggplot(d1)+&#xD;&#xA; geom_path(aes(x, y))&#xD;&#xA;&#xD;&#xA;# p1 is OK&#xD;&#xA;p1&#xD;&#xA;&#xD;&#xA;# p2 is displayed as a horizontal line&#xD;&#xA;p1 %+% d2&#xD;&#xA;&#xD;&#xA;# base graphics is OK&#xD;&#xA;with(d2,  plot(x,  y,  t=&quot;l&quot;))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;sessionInfo()&#xD;&#xA;R version 2.13.0 Patched (2011-04-27 r55667)&#xD;&#xA;Platform: i386-apple-darwin9.8.0 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_GB.UTF-8/en_GB.UTF-8/C/C/en_GB.UTF-8/en_GB.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  grid&#xD;&#xA;methods   base&#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] gridExtra_0.8 ggplot2_0.8.9 proto_0.3-9.1 reshape_0.8.4 plyr_1.5.2&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] tools_2.13.0&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="1370547" ParentId="190" UserId="463252" Date="06/15/2011 01:14:09" Content="To add to what works and what doesn't,  these both give me a non-horizontal line:&#xD;&#xA;&#xD;&#xA;    p1 %+% d2 + scale_y_continuous(limits=c(-5e-07, 5e-07))&#xD;&#xA;    &#xD;&#xA;    p1 %+% d2 + coord_cartesian(ylim=c(-5e-07, 5e-07))&#xD;&#xA;&#xD;&#xA;Which supports the idea that it is something in the creation of the scale.&#xD;&#xA;" />
      <Message Id="1455376" ParentId="190" UserId="4196" Date="06/28/2011 13:15:22" Content="This is fixed in the development version,  as part of better zero detection in the scales package." />
    </Messages>
  </Topic>
  <Topic Id="191" Title="Remove missings in geom_text">
    <Messages>
      <Message Id="0" ParentId="191" UserId="4196" Date="06/07/2011 00:24:38" Content="Currently missing call to `remove_missing`" />
    </Messages>
  </Topic>
  <Topic Id="192" Title="Axes titles are not centered">
    <Messages>
      <Message Id="0" ParentId="192" UserId="18445" Date="06/07/2011 17:07:19" Content="    library(ggplot2)&#xD;&#xA;    qplot(0, 0)&#xD;&#xA;&#xD;&#xA;The titles of the axes should be alignes with the axis break and it is shifted to the left/bottom. This seems to be because the grob for the axis title is to wide. It should be subtracted the tick size and the axis.text.? grob size.... but I can't find how to do that. It seems to be in `plot_render.r`. Could you point me in the right direction please?" />
      <Message Id="1324537" ParentId="192" UserId="4196" Date="06/08/2011 04:41:59" Content="Unfortunately it's a bit more complicated than that - it's because there are two nested layouts and the axis title is drawn in the outer layout which doesn't know anything about the inner layout. If you wanted to have a go at fixing it,  you basically need to work with `panelGrid` instead of working with `panelGrob`.  Take a look at `utilities-table.r` to see how it works.  This is something I'll probably pull out of ggplot2 eventually." />
      <Message Id="1328094" ParentId="192" UserId="18445" Date="06/08/2011 16:50:48" Content="I tried but I must admit I could not figure it out. If this is going away anyhow,  I'll stick with fixing my plots in Inkscape ;)" />
      <Message Id="1455891" ParentId="192" UserId="4196" Date="06/28/2011 14:34:48" Content="Working on this now.  Have titles and labels working.  Still working on legends,  but should be done in a few days." />
      <Message Id="1455898" ParentId="192" UserId="18445" Date="06/28/2011 14:35:47" Content="Legends are less of a problem. Thanks a lot!" />
      <Message Id="1460333" ParentId="192" UserId="4196" Date="06/29/2011 01:14:50" Content="Largely fixed in gtable-render branch (https://github.com/hadley/ggplot2/tree/feature%2Fgtable-render).  Would you mind having a play and seeing if there's anything I've missed?  Also the code in `plot-render.r` should hopefully be easier to understand (and to improve in the future),  but layout is still hard!" />
      <Message Id="1465316" ParentId="192" UserId="18445" Date="06/29/2011 07:36:30" Content="A simple `qplot(0, 0)` shows that the labels are still shifted (left and down) a bit. http://dl.dropbox.com/u/1047321/ggplot/qplot-gtable_render.pdf&#xD;&#xA;&#xD;&#xA;This is with the latest dev version of scales,  plyr etc.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1466719" ParentId="192" UserId="4196" Date="06/29/2011 12:46:13" Content="Fixed. Let me know if you see any others." />
      <Message Id="1466767" ParentId="192" UserId="4196" Date="06/29/2011 12:53:20" Content="This branch also reduces plotting time by about 40ms,  which is nice." />
      <Message Id="1467006" ParentId="192" UserId="18445" Date="06/29/2011 13:29:47" Content="&gt; Fixed. Let me know if you see any others.&#xA;&#xA;Fine for me too. I'll continue to test it in the following days." />
      <Message Id="1467008" ParentId="192" UserId="18445" Date="06/29/2011 13:29:58" Content="On 2011-June-29  ,  at 14:53 ,  hadley wrote:&#xA;&#xA;&gt; This branch also reduces plotting time by about 40ms,  which is nice.&#xA;&#xA;Nice indeed!" />
    </Messages>
  </Topic>
  <Topic Id="193" Title="Multiple bugs when changing scales names">
    <Messages>
      <Message Id="0" ParentId="193" UserId="18445" Date="06/08/2011 17:15:54" Content="	library(&quot;ggplot2&quot;)&#xD;&#xA;&#xD;&#xA;	(p = qplot(0, 0))&#xD;&#xA;	p + scale_x_continuous(&quot;Foo&quot;)&#xD;&#xA;	p + scale_x_continuous(name=&quot;Foo&quot;)&#xD;&#xA;	# neither work&#xD;&#xA;	p + xlab(&quot;Foo&quot;)&#xD;&#xA;	p + labs(x=&quot;Foo&quot;)&#xD;&#xA;	# these do&#xD;&#xA;&#xD;&#xA;	(p = qplot(runif(10), runif(10),  colour=runif(10)))&#xD;&#xA;	p + scale_colour_gradient(&quot;Foo&quot;)&#xD;&#xA;	# here this works&#xD;&#xA;	p + labs(colour=&quot;Foo&quot;)&#xD;&#xA;	# and this also&#xD;&#xA;&#xD;&#xA;	(p = qplot(runif(5), runif(5),  colour=factor(runif(5))))&#xD;&#xA;	p + scale_colour_hue(&quot;Foo&quot;)&#xD;&#xA;	p + scale_colour_hue(name=&quot;Foo&quot;)&#xD;&#xA;	# these do not work&#xD;&#xA;	p + labs(colour=&quot;Foo&quot;)&#xD;&#xA;	# and this does,  but it creates a longer scale&#xD;&#xA;	# and strangely,  even though p is just modified and not saved,  it continues to increment the number of scale breaks&#xD;&#xA;	p + labs(colour=&quot;Foo&quot;)&#xD;&#xA;	p + labs(colour=&quot;Foo&quot;)&#xD;&#xA;&#xD;&#xA;	(p = qplot(runif(5),  fill=factor(runif(5))))&#xD;&#xA;	p + scale_fill_hue(&quot;Foo&quot;)&#xD;&#xA;	p + scale_fill_hue(name=&quot;Foo&quot;)&#xD;&#xA;	# these do not work&#xD;&#xA;	p + labs(fill=&quot;Foo&quot;)&#xD;&#xA;	# and this does, and the behaviour is the same as above: the colour scale progressively increases in size&#xD;&#xA;	p + labs(colour=&quot;Foo&quot;)&#xD;&#xA;	p + labs(colour=&quot;Foo&quot;)&#xD;&#xA;	# even stranger is this:&#xD;&#xA;	(p = qplot(runif(5),  fill=factor(runif(5))))&#xD;&#xA;	p + scale_colour_hue(&quot;Foo&quot;)&#xD;&#xA;	# I am trying to change the colour scale on a plot where only the fill is mapped,  the title of the scale does not change but the number of scale breaks does&#xD;&#xA;&#xD;&#xA;I haven't tried more." />
      <Message Id="1414567" ParentId="193" UserId="4196" Date="06/21/2011 23:01:09" Content="Axes labelling fixed in 35d830c052d907e5c66c390a947c7eb4501a3aaf" />
      <Message Id="1414610" ParentId="193" UserId="4196" Date="06/21/2011 23:09:08" Content="First colour labelling bug fixed in f7ec52a85b5da5ddd570236a6bed09ef51ab20b0" />
      <Message Id="1414641" ParentId="193" UserId="4196" Date="06/21/2011 23:15:25" Content="Fixed weird breaks expansion bug in 32c29499251473b2d125675acbcf570a93addfba" />
      <Message Id="1414651" ParentId="193" UserId="4196" Date="06/21/2011 23:17:33" Content="Ok,  I think that's everything - thanks for the bug report,  and for exposing many and various problems!" />
      <Message Id="1416092" ParentId="193" UserId="18445" Date="06/22/2011 06:29:11" Content="Thanks for all the fixes!" />
    </Messages>
  </Topic>
  <Topic Id="194" Title="Combination of histogram defaults and xlim is confusing">
    <Messages>
      <Message Id="0" ParentId="194" UserId="4196" Date="06/26/2011 21:49:25" Content="    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    data(Boston,  package = &quot;MASS&quot;)&#xD;&#xA;    qplot(zn,  data = Boston)&#xD;&#xA;    qplot(zn,  data = Boston,  binwidth = 5,  xlim = c(0, 100))&#xD;&#xA;&#xD;&#xA;Reported by Antony Unwin" />
      <Message Id="2992260" ParentId="194" UserId="4196" Date="12/02/2011 16:28:21" Content="Need to think about what correct behaviour is.  And should `right = T` by default?" />
    </Messages>
  </Topic>
  <Topic Id="195" Title="breaks in stat_contour">
    <Messages>
      <Message Id="0" ParentId="195" UserId="322716" Date="06/27/2011 02:37:09" Content="stat_contour returns an error if there are no breaks in range.  When facet_wrap() or facet_grid() are used,  if any one facet has no breaks in range,  an error is returned and none are plotted.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x = rep(1:4,  4),  y = rep(1:4,  each = 4), &#xD;&#xA;  z = 1:16,  g = factor(rep(1:2,  each = 8)))&#xD;&#xA;&#xD;&#xA;## fails because break is out of range&#xD;&#xA;ggplot(dat) +&#xD;&#xA;  stat_contour(aes(x = x,  y = y,  z = z),  breaks = 20)&#xD;&#xA;&#xD;&#xA;## fails because all breaks are out of range for one facet&#xD;&#xA;ggplot(dat) +&#xD;&#xA;  facet_wrap(~g) +&#xD;&#xA;  stat_contour(aes(x = x,  y = y,  z = z),  breaks = 12)&#xD;&#xA;```&#xD;&#xA;stat_contour() seems to return an error because when no breaks are in range,  contour_df is not properly converted to a data frame.  One option would be to create the plot,  but not add lines by simply setting contour_df to an empty data frame.  The code below is a possible addition to stat_contour to do this.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;   # section added to avoid errors when breaks are out of range&#xD;&#xA;    if (all(breaks &lt; min(data$z) | breaks &gt; max(data$z))) { &#xD;&#xA;      warning(&quot;All specified breaks are outside the range of z&#xD;&#xA;      no contours will be drawn in this plot/facet&quot;)&#xD;&#xA;      contour_df &lt;- data.frame(level = NULL,  x = NULL,  y= NULL, &#xD;&#xA;        piece = NULL,  group = NULL)&#xD;&#xA;      return(contour_df)&#xD;&#xA;     }&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="196" Title="stat_boxplot needs to document algorthm">
    <Messages>
      <Message Id="0" ParentId="196" UserId="4196" Date="06/27/2011 23:59:32" Content="i.e. it's Tukey's boxplots and the hinges and whisker are calculated as ..." />
      <Message Id="1726639" ParentId="196" UserId="958887" Date="08/04/2011 12:55:01" Content="One might consider something like what is on [ wikipedia's Box_plot entry ](http://en.wikipedia.org/wiki/Box_plot)&#xD;&#xA;&#xD;&#xA;Here's my stab at it:&#xD;&#xA;&#xD;&#xA;&lt;i&gt;Box and whisker plots are uniform in their use of the box: the bottom and top of the box are always the 25th and 75th percentile (the lower and upper quartiles,  respectively),  and the band near the middle of the box is always the 50th percentile (the median). &lt;/i&gt;&#xD;&#xA;&#xD;&#xA;&lt;i&gt;&lt;b&gt;By default in ggplot2,  the ends of the whiskers represents the lowest datum still within 1.5 IQR of the lower quartile,  and the highest datum still within 1.5 IQR of the upper quartile.  Data beyond the end of the whiskers are outliers and plotted as points.&lt;/b&gt;&lt;/i&gt;&#xD;&#xA;&#xD;&#xA;[ Even more simply ](http://stattrek.com/ap-statistics-1/boxplot.aspx).&#xD;&#xA;" />
      <Message Id="1727643" ParentId="196" UserId="777651" Date="08/04/2011 14:58:25" Content="Thanks aschweig. Your description has been added to the docs. " />
    </Messages>
  </Topic>
  <Topic Id="197" Title="Request for multiple rows/columns in legends">
    <Messages>
      <Message Id="0" ParentId="197" UserId="894144" Date="07/04/2011 19:31:37" Content="Could you please add two options:&#xD;&#xA;&#xD;&#xA;legend.nrow = 2&#xD;&#xA;legend.ncol   = 1&#xD;&#xA;&#xD;&#xA;I have a facet_wrap with ten graphs: two rows of four and one row of two.  I would like to place the legend in the white space in the third row (which has only two plots),  but to fit it in,  I would need either two rows &amp; legend.direction = &quot;horizontal&quot; OR two columns and legend.position = &quot;vertical&quot;.&#xD;&#xA;&#xD;&#xA;For the time being,  I'm dumping the figures into pdfs and creating the desired legends by hand in Adobe Illustrator.  But it would be really nice to have the options added and avoid hand editing the plots." />
      <Message Id="1782910" ParentId="197" UserId="227097" Date="08/11/2011 15:47:47" Content="this feature maybe included in the next version.&#xD;&#xA;see https://gist.github.com/1139848&#xD;&#xA;&#xD;&#xA;![ output plot ](http://desmond.yfrog.com/Himg741/scaled.php?tn=0&amp;server=741&amp;filename=hjpw.png&amp;xsize=640&amp;ysize=640)" />
    </Messages>
  </Topic>
  <Topic Id="198" Title="Develop">
    <Messages>
      <Message Id="0" ParentId="198" UserId="463252" Date="07/05/2011 17:46:45" Content="Fixed typo in News.  Also,  learning how to do pull requests and getting used to how git/github works." />
      <Message Id="1505528" ParentId="198" UserId="4196" Date="07/05/2011 17:48:32" Content="Got it - thanks Brian!" />
    </Messages>
  </Topic>
  <Topic Id="199" Title="Documentation alias fix,  description was part of alias">
    <Messages>
      <Message Id="0" ParentId="199" UserId="463252" Date="07/05/2011 20:06:04" Content="Do not pull; submitted before complete." />
    </Messages>
  </Topic>
  <Topic Id="200" Title="Documentation alias fix,  description was part of alias">
    <Messages>
      <Message Id="0" ParentId="200" UserId="463252" Date="07/05/2011 20:09:54" Content="Moved short description above roxygen tags so that it is not part of aliases." />
      <Message Id="1507502" ParentId="200" UserId="4196" Date="07/05/2011 21:23:28" Content="Closing this pull request because I just made these changes myself!  Great minds think alike ;)&#xD;&#xA;&#xD;&#xA;I'll push my changes shortly.  I just completed a big re-write of roxygen over the weekend that adds a few new features to reduce documentation duplication.  It's temporarily available at https://github.com/hadley/rxygn but it will be merged back into the main development trunk https://github.com/klutometis/roxygen and hopefully hence to CRAN soon after." />
    </Messages>
  </Topic>
  <Topic Id="201" Title="error in plot with only one datapoint">
    <Messages>
      <Message Id="0" ParentId="201" UserId="216319" Date="07/09/2011 10:44:34" Content="This doesn't make a pretty plot,  but it happens once in a while in autogenerated plots and should not throw an error:&#xD;&#xA;&#xD;&#xA;qplot(Sys.time(),  8,  geom=&quot;point&quot;);" />
      <Message Id="1538485" ParentId="201" UserId="4196" Date="07/09/2011 13:37:55" Content="Already fixed in the develop branch." />
      <Message Id="1538658" ParentId="201" UserId="216319" Date="07/09/2011 14:38:17" Content="Cool thanks. When will this one be pushed to CRAN? &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1538700" ParentId="201" UserId="4196" Date="07/09/2011 14:54:54" Content="By the end of summer hopefully. Working on updated documentation at the moment." />
    </Messages>
  </Topic>
  <Topic Id="202" Title="jitter function for PositionJitter">
    <Messages>
      <Message Id="0" ParentId="202" UserId="227097" Date="07/10/2011 22:21:47" Content="It may be better if users can specify jitter function for position_jitter like this:&#xD;&#xA;&#xD;&#xA;my_jitter &lt;- function(x,  factor = 1,  amount = NULL) { x + rnorm(1) }&#xD;&#xA;position_jitter(fun = my_jitter)&#xD;&#xA;" />
      <Message Id="1543482" ParentId="202" UserId="4196" Date="07/10/2011 22:38:02" Content="I'd rather make that a new position adjustment altogether." />
      <Message Id="1543562" ParentId="202" UserId="227097" Date="07/10/2011 23:06:58" Content="sounds great!!" />
      <Message Id="35938953" ParentId="202" UserId="4196" Date="02/24/2014 21:15:53" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="203" Title="Does ggplot2 depend on reshape or reshape2?">
    <Messages>
      <Message Id="0" ParentId="203" UserId="644312" Date="07/11/2011 11:16:34" Content="This is about the infamous value.name parameter in the help command.&#xD;&#xA;I read here: http://groups.google.com/group/manipulatr/browse_thread/thread/b1ca1304f12d2f03?pli=1 that everything will be sorted out once ggplot2 depends on reshape2 and not reshape.&#xD;&#xA;However as of ggplot2's version 0.8.9 the dependency list still include reshape." />
      <Message Id="1546638" ParentId="203" UserId="4196" Date="07/11/2011 14:01:19" Content="This is fixed in the develop branch." />
      <Message Id="1546753" ParentId="203" UserId="644312" Date="07/11/2011 14:18:50" Content="You still wrangling ggplot2? Or the newest release will be submitted&#xA;to CRAN in the next 48h or so?&#xA;;-)&#xA;I'm just trying to prevent dependencies nightmare on my production&#xA;system but I'll give a spin on the latest ggplot2 dev branch.&#xA;If only you would name your Version field in the DESCRIPTION file as&#xA;0.8.9-x where x is some commit ordinal before you rename it to 0.9....&#xA;&#xA;On Mon,  Jul 11,  2011 at 5:01 PM,  hadley&#xA;&lt;reply@reply.github.com&gt;&#xA;wrote:&#xA;&gt; This is fixed in the develop branch.&#xA;&gt;" />
      <Message Id="1546773" ParentId="203" UserId="644312" Date="07/11/2011 14:21:32" Content="Not good. Your latest commit to github is from Dec, 2010.&#xD;&#xA;Your dev tree is not in github,  is it?&#xD;&#xA;&#xD;&#xA;2011/7/11 Juan Carlos Borrás &lt;jcborras@gmail.com&gt;:&#xD;&#xA;&gt; You still wrangling ggplot2? Or the newest release will be submitted&#xD;&#xA;&gt; to CRAN in the next 48h or so?&#xD;&#xA;&gt; ;-)&#xD;&#xA;&gt; I'm just trying to prevent dependencies nightmare on my production&#xD;&#xA;&gt; system but I'll give a spin on the latest ggplot2 dev branch.&#xD;&#xA;&gt; If only you would name your Version field in the DESCRIPTION file as&#xD;&#xA;&gt; 0.8.9-x where x is some commit ordinal before you rename it to 0.9....&#xD;&#xA;&gt;" />
      <Message Id="1546778" ParentId="203" UserId="4196" Date="07/11/2011 14:22:02" Content="You need the develop branch." />
      <Message Id="1546782" ParentId="203" UserId="644312" Date="07/11/2011 14:22:35" Content="Roger that." />
    </Messages>
  </Topic>
  <Topic Id="204" Title="ggsave for pdf generates extra blank page">
    <Messages>
      <Message Id="0" ParentId="204" UserId="227097" Date="07/12/2011 04:51:17" Content="on develop branch,  ggsave for pdf generates extra blank page before the plot.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; p&lt;-qplot(1:3)&#xD;&#xA;&gt; ggsave(&quot;hoge.pdf&quot;,  p)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;now I have no time to detect where this is induced,  sorry...&#xD;&#xA;" />
      <Message Id="1554655" ParentId="204" UserId="4196" Date="07/12/2011 14:37:54" Content="This could be a good opportunity to try out `git bisect`" />
      <Message Id="1558504" ParentId="204" UserId="227097" Date="07/12/2011 22:32:04" Content="I didn't know that. I'll try to find out the bad commit. thank you. " />
      <Message Id="1577194" ParentId="204" UserId="227097" Date="07/15/2011 02:32:29" Content="does not occur in a different environment.&#xD;&#xA;Please report if anyone find the same problem.&#xD;&#xA;" />
      <Message Id="1580251" ParentId="204" UserId="463252" Date="07/15/2011 14:50:09" Content="I'm seeing the blank page with fdb86c10228dd4bd8d71b8350d86fe5f08aa848b&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.13.1 (2011-07-08)&#xD;&#xA;Platform: x86_64-pc-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.0  proto_0.3-9.2  roxygen_0.1-2  digest_0.5.0   RCurl_1.6-6.1 &#xD;&#xA;[ 6 ] bitops_1.0-4.1 devtools_0.4  &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] codetools_0.2-8    colorspace_1.1-0   dichromat_1.2-3    grid_2.13.1       &#xD;&#xA; [ 5 ] memoise_0.1        munsell_0.2        plyr_1.5.2         RColorBrewer_1.0-5&#xD;&#xA; [ 9 ] reshape2_1.1       scales_0.1.0       stringr_0.5       &#xD;&#xA;" />
      <Message Id="1585496" ParentId="204" UserId="910351" Date="07/16/2011 01:20:17" Content="I tried git bisect,  and then I tried it again - and the second time around I zeroed in on a different commit as the culprit.  Let me try again,  slowly,  and see if I get a consistent answer this time ... OK,  having taken more care,  I'm pretty sure this is the culprit:&#xD;&#xA;&#xD;&#xA;425cad90f8a9a52461eb13de087b56a6dcf83aff is the first bad commit&#xD;&#xA;commit 425cad90f8a9a52461eb13de087b56a6dcf83aff&#xD;&#xA;Author: hadley &lt;h.wickham@gmail.com&gt;&#xD;&#xA;Date:   Wed Jun 29 07:49:08 2011 -0500&#xD;&#xA;&#xD;&#xA;    Use ggplot_gtable consistently&#xD;&#xA;&#xD;&#xA;:040000 040000 1ea8aac890c644c62901cedd1eb32c68be705e23 d2971f62db5d4aa12760c550d8150734559bf734 M      R&#xD;&#xA;" />
      <Message Id="1597647" ParentId="204" UserId="463252" Date="07/18/2011 16:16:38" Content="I saw some odd behavior that I realized later is probably related to this.  When I was running example on some of the documentation (just checking/testing/playing with stuff),  I noticed that for each graph displayed,  there were 2 prompts to click for next page.  After the first there was nothing; after the second the graph appeared.  Something is happening that is drawing a complete blank plot and then starting again to draw the actual plot.  In PDF,  that would give a blank page; on screen with `par(ask=TRUE)`,  both plots can be seen.  Maybe this will help track down where the problem lies." />
      <Message Id="1622536" ParentId="204" UserId="227097" Date="07/21/2011 09:57:36" Content="thanks all. I detected what is wrong.&#xD;&#xA;" />
      <Message Id="1643380" ParentId="204" UserId="227097" Date="07/25/2011 04:08:41" Content="fixed in the commit 38a9e96bc51be778700e" />
    </Messages>
  </Topic>
  <Topic Id="205" Title="title and labels with scale_xxx_manual">
    <Messages>
      <Message Id="0" ParentId="205" UserId="910351" Date="07/12/2011 18:24:16" Content="With this small tweak,  the legend name and labels properly appear on the plot when I'm using scale_xxx_manual. " />
      <Message Id="1556522" ParentId="205" UserId="4196" Date="07/12/2011 18:27:24" Content="Doh,  that was a dumb mistake.  Thanks for the fix!" />
    </Messages>
  </Topic>
  <Topic Id="206" Title="(x, y)intercept of geom_(v, h)line isn't transformed properly into scales of the current layer ">
    <Messages>
      <Message Id="0" ParentId="206" UserId="910351" Date="07/15/2011 00:18:10" Content="On the develop branch this plot shows something interesting:&#xD;&#xA;&#xD;&#xA;print(qplot(c(1, 10), c(1, 10)) +&#xD;&#xA;	scale_y_log10() + &#xD;&#xA;	scale_x_log10() + &#xD;&#xA;	geom_hline(aes(yintercept=2)) + &#xD;&#xA;	geom_segment(aes(x=1, xend=10, y=2, yend=2)) +&#xD;&#xA;	geom_vline(aes(xintercept=2)) + &#xD;&#xA;	geom_segment(aes(x=2, xend=2, y=1, yend=10)))&#xD;&#xA;&#xD;&#xA;The geom_segments have the coordinates of their endpoints properly transformed into scales appropriate for the plot,  but the yintercept of the hline and the xintercept of the vline aren't.   I've poked around in the source to try and figure out why this is.  In plot-build.r (ca. line 38) there's code to &quot;canonicalize&quot; the variable names.  This transformation of variable names depends on aes_to_scale,  but somehow that's not having the effect one would hope for in the case of hline and vline.  I will try to do some comparison of the code paths for geom_segment and geom_hline,  but it's getting pretty thick pretty quickly." />
      <Message Id="1581216" ParentId="206" UserId="463252" Date="07/15/2011 17:09:23" Content="I made a patch that fixes this in the patch1 branch of my fork (BrianDiggs/ggplot2).  I don't know how to link that with this bug report; I'll try via a pull request." />
      <Message Id="1582612" ParentId="206" UserId="910351" Date="07/15/2011 20:38:52" Content="Nice.  Works like a charm." />
    </Messages>
  </Topic>
  <Topic Id="207" Title="xintercept and yintercept part of x and y scales">
    <Messages>
      <Message Id="0" ParentId="207" UserId="463252" Date="07/15/2011 17:10:53" Content="xintercept was added to the x scale (which already had xmin,  xmax,  and&#xD;&#xA;xend). Similar for y.  Also added a to the tests (although did not pass&#xD;&#xA;tests before change).  Fixes #206" />
      <Message Id="1581242" ParentId="207" UserId="463252" Date="07/15/2011 17:12:30" Content="I would appreciate being told how I should have done this to not create a second issue (I wanted it to be part of #206)." />
      <Message Id="1581243" ParentId="207" UserId="4196" Date="07/15/2011 17:12:44" Content="Awesome - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="208" Title="Add x/yintercept to list of aesthetics">
    <Messages>
      <Message Id="0" ParentId="208" UserId="463252" Date="07/15/2011 22:43:37" Content="Two changes to aes.r" />
    </Messages>
  </Topic>
  <Topic Id="209" Title="escape percent signs in docs">
    <Messages>
      <Message Id="0" ParentId="209" UserId="910351" Date="07/16/2011 03:18:53" Content="There were a couple of bare percent (%) signs in position_jitter.Rd that were causing warnings during the build." />
      <Message Id="1587378" ParentId="209" UserId="4196" Date="07/16/2011 16:34:32" Content="The Rd files are automatically generated from roxygen comments in R - would you mind fixing in the source document? (position-jitter.R)" />
      <Message Id="1651057" ParentId="209" UserId="4196" Date="07/26/2011 02:11:07" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="210" Title="\alias{ is.zero } in ggplot2/man/zeroGrob-p0.rd is ok?">
    <Messages>
      <Message Id="0" ParentId="210" UserId="644312" Date="07/27/2011 08:04:10" Content="While attempting to check the is.zero() man page on RStudio one gets zeroGrob's (assuming ggplot2 is of course loaded).&#xD;&#xA;I wonder if that alias should be there in the first place.&#xD;&#xA;Let's call this a small issue." />
      <Message Id="1663955" ParentId="210" UserId="4196" Date="07/27/2011 13:53:56" Content="Yes,  that's where it's supposed to point.  It's an internal function and won't be exported in the next version." />
    </Messages>
  </Topic>
  <Topic Id="211" Title="diamonds$cut">
    <Messages>
      <Message Id="0" ParentId="211" UserId="216319" Date="07/29/2011 12:53:07" Content="&gt; is.ordered(diamonds$cut)&#xD;&#xA;[ 1 ] FALSE&#xD;&#xA;&gt; levels(diamonds$cut)&#xD;&#xA;[ 1 ] &quot;Fair&quot;      &quot;Good&quot;      &quot;Very Good&quot; &quot;Premium&quot;   &quot;Ideal&quot;" />
      <Message Id="1681377" ParentId="211" UserId="4196" Date="07/29/2011 13:59:34" Content="Yeah,  I very rarely bother with ordered factors,  since the only impact they have is to change the contrasts in linear models." />
      <Message Id="1681407" ParentId="211" UserId="216319" Date="07/29/2011 14:02:59" Content="Oh really? I was under the impression that they were used in ggplot2 to sort levels in e.g. a bar chart." />
      <Message Id="1681439" ParentId="211" UserId="227097" Date="07/29/2011 14:06:41" Content="@jeroenooms&#xD;&#xA;&#xD;&#xA;ordered means something else than the order of the levels.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; diamonds$ocut &lt;- as.ordered(diamonds$cut)&#xD;&#xA;&gt; head(diamonds$cut)&#xD;&#xA;[ 1 ] Ideal     Premium   Good      Premium   Good      Very Good&#xD;&#xA;Levels: Fair Good Very Good Premium Ideal&#xD;&#xA;&gt; head(diamonds$ocut)&#xD;&#xA;[ 1 ] Ideal     Premium   Good      Premium   Good      Very Good&#xD;&#xA;Levels: Fair &lt; Good &lt; Very Good &lt; Premium &lt; Ideal&#xD;&#xA;```" />
      <Message Id="1681540" ParentId="211" UserId="216319" Date="07/29/2011 14:17:52" Content="Yes I understand. I had assumed that for unordered factors,  ggplot would sort output alphabetically or something,  yet for ordered factors it would use the order. E.g.:&#xD;&#xA;&#xD;&#xA;var1 &lt;- factor(c(&quot;XL&quot; , &quot;XS&quot;,  &quot;M&quot;));&#xD;&#xA;var2 &lt;- factor(c(&quot;XL&quot; , &quot;XS&quot;,  &quot;M&quot;),  levels=c(&quot;XS&quot;,  &quot;S&quot;,  &quot;M&quot;,  &quot;L&quot;,  &quot;XL&quot;),  ordered=T);&#xD;&#xA;&#xD;&#xA;qplot(var1);&#xD;&#xA;qplot(var2);&#xD;&#xA;&#xD;&#xA;But I guess it doesn't matter indeed as one can just always rely on the order of the 'levels' attribute,  regardless of the class of the factor.&#xD;&#xA;" />
      <Message Id="1745389" ParentId="211" UserId="216319" Date="08/06/2011 16:11:27" Content="Actually,  in social science it is often important to distinguish factors from ordinal factors. For example to test for independence between two variables,  one would/could/should use spearman's rank correlation when they are ordinal,  but when they are nominal people often do a chi-square test. So for these kind of purposes it is always good practice to distinguish between the two." />
    </Messages>
  </Topic>
  <Topic Id="212" Title="fix a bug in geom_text with data contains NA.">
    <Messages>
      <Message Id="0" ParentId="212" UserId="227097" Date="07/29/2011 14:11:33" Content="error occurs in remove_missing if data contains NA. Probably because of unevaled promise or something else." />
      <Message Id="1681509" ParentId="212" UserId="4196" Date="07/29/2011 14:14:25" Content="Ooops,  thanks!" />
    </Messages>
  </Topic>
  <Topic Id="213" Title="summary exits with error">
    <Messages>
      <Message Id="0" ParentId="213" UserId="463252" Date="08/02/2011 18:27:43" Content="# Description&#xD;&#xA;&#xD;&#xA;In the develop branch,  when calling summary on a ggplot object,  it exits with an error when printing the faceting information&#xD;&#xA;&#xD;&#xA;# Reproducible code&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;summary(ggplot())&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;# Actual output&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; summary(ggplot())&#xD;&#xA;data: [ 0x0 ]&#xD;&#xA;faceting: Error in summary.ggplot(ggplot()) : attempt to apply non-function&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;# Expected output&#xD;&#xA;&#xD;&#xA;In version 0.8.9,  the output is&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; summary(ggplot())&#xD;&#xA;data: [ 0x0 ]&#xD;&#xA;faceting: facet_grid(. ~ .,  FALSE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This is not necessarily what it should be,  but at least it shouldn't throw an error.&#xD;&#xA;&#xD;&#xA;# Diagnosis&#xD;&#xA;&#xD;&#xA;In `summary.ggplot`,  (https://github.com/hadley/ggplot2/blob/develop/R/summary.r#L35),  there is the call `object$facet$pprint()`.  git blame shows this line is from the initial import of ggplot to git.  Since the results of a facet are no longer a `proto` object,  but a list of class &quot;facet&quot;,  there is no `pprint` function to call.  A `print.facet` (and maybe a `summary.facet`?) function is needed to print out a summary appropriate for this use.&#xD;&#xA;&#xD;&#xA;# sessionInfo&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.13.1 (2011-07-08)&#xD;&#xA;Platform: x86_64-pc-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 8 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.0 memoise_0.1   scales_0.1.0  reshape2_1.1  plyr_1.6     &#xD;&#xA;[ 6 ] proto_0.3-9.2 roxygen2_2.0  digest_0.5.0  devtools_0.4 &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] brew_1.0-6         codetools_0.2-8    colorspace_1.1-0   dichromat_1.2-3   &#xD;&#xA;[ 5 ] munsell_0.2        RColorBrewer_1.0-5 RCurl_1.6-6.1      stringr_0.5       &#xD;&#xA;[ 9 ] tools_2.13.1      &#xD;&#xA;```" />
      <Message Id="3090750" ParentId="213" UserId="4196" Date="12/10/2011 13:10:19" Content="Somewhat refined test case (easier to see what's going wrong when you extract the exact piece you're interested in)&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;context(&quot;Data&quot;)&#xD;&#xA;&#xD;&#xA;test_that(&quot;stringsAsFactors doesn't affect results&quot;,  { &#xD;&#xA;&#xD;&#xA;    sAF &lt;- getOption(&quot;stringsAsFactors&quot;)&#xD;&#xA;    dat.character &lt;- data.frame(x=letters[ 5:1 ],  y=1:5,  stringsAsFactors=FALSE)&#xD;&#xA;    dat.factor &lt;- data.frame(x=letters[ 5:1 ],  y=1:5,  stringsAsFactors=TRUE)&#xD;&#xA;&#xD;&#xA;    base &lt;- ggplot(,  aes(x,  y)) + geom_point()&#xD;&#xA;    xlabels &lt;- function(x) x$panel$ranges[ [ 1 ] ]$x.labels&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = TRUE)&#xD;&#xA;    char_true &lt;- ggplot_build(base %+% dat.character)&#xD;&#xA;    factor_true &lt;- ggplot_build(base %+% dat.factor)&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = FALSE)&#xD;&#xA;    char_false &lt;- ggplot_build(base %+% dat.character)&#xD;&#xA;    factor_false &lt;- ggplot_build(base %+% dat.factor)&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = sAF)&#xD;&#xA;&#xD;&#xA;    expect_that(xlabels(char_true),  equals(letters[ 1:5 ]))&#xD;&#xA;    expect_that(xlabels(char_false),  equals(letters[ 1:5 ]))&#xD;&#xA;    expect_that(xlabels(factor_true),  equals(letters[ 1:5 ]))&#xD;&#xA;    expect_that(xlabels(factor_false),  equals(letters[ 1:5 ]))&#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="3129034" ParentId="213" UserId="463252" Date="12/13/2011 20:24:00" Content="I think your comment https://github.com/hadley/ggplot2/issues/213#issuecomment-3090750 belongs with issue #214,  not here." />
      <Message Id="3160777" ParentId="213" UserId="4196" Date="12/15/2011 13:15:16" Content="Oops,  yes,  thanks." />
    </Messages>
  </Topic>
  <Topic Id="214" Title="Plot sensitivie to stringsAsFactors option">
    <Messages>
      <Message Id="0" ParentId="214" UserId="463252" Date="08/02/2011 22:33:42" Content="# Description&#xD;&#xA;&#xD;&#xA;The displayed plot can vary depending on the setting of the global option `stringsAsFactors`.&#xD;&#xA;&#xD;&#xA;# Reproducible code&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;(sAF &lt;- getOption(&quot;stringsAsFactors&quot;))&#xD;&#xA;&#xD;&#xA;options(stringsAsFactors = FALSE)&#xD;&#xA;dat1 &lt;- data.frame(x=letters[ 5:1 ], y=runif(5))&#xD;&#xA;ggplot(dat1, aes(x=as.character(x), y=y)) + geom_point()&#xD;&#xA;&#xD;&#xA;options(stringsAsFactors = TRUE)&#xD;&#xA;dat1 &lt;- data.frame(x=letters[ 5:1 ], y=runif(5))&#xD;&#xA;ggplot(dat1, aes(x=as.character(x), y=y)) + geom_point()&#xD;&#xA;&#xD;&#xA;options(stringsAsFactors = sAF)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;# Expected results&#xD;&#xA;&#xD;&#xA;The two graphs should be identical.  The `as.character` in the aesthetic should remove any issues whether `x` in `dat1` is a character or factor.&#xD;&#xA;&#xD;&#xA;# Actual results&#xD;&#xA;&#xD;&#xA;The former has the x axis ordered e -&gt; a,  the latter a -&gt; e.&#xD;&#xA;&#xD;&#xA;# thattat test code&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;test_that(&quot;stringsAsFactors&quot;,  { &#xD;&#xA;&#xD;&#xA;    sAF &lt;- getOption(&quot;stringsAsFactors&quot;)&#xD;&#xA;    dat.character &lt;- data.frame(x=letters[ 5:1 ],  y=1:5,  stringsAsFactors=FALSE)&#xD;&#xA;    dat.factor &lt;- data.frame(x=letters[ 5:1 ],  y=1:5,  stringsAsFactors=TRUE)&#xD;&#xA;    &#xD;&#xA;    options(stringsAsFactors = TRUE)&#xD;&#xA;    p.character.TRUE &lt;- ggplot(dat.character,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;    build.character.TRUE &lt;- ggplot_build(p.character.TRUE)&#xD;&#xA;    p.factor.TRUE &lt;- ggplot(dat.factor,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;    build.factor.TRUE &lt;- ggplot_build(p.factor.TRUE)&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = FALSE)&#xD;&#xA;    p.character.FALSE &lt;- ggplot(dat.character,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;    build.character.FALSE &lt;- ggplot_build(p.character.FALSE)&#xD;&#xA;    p.factor.FALSE &lt;- ggplot(dat.factor,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;    build.factor.FALSE &lt;- ggplot_build(p.factor.FALSE)&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = sAF)&#xD;&#xA;    &#xD;&#xA;    expect_that(p.factor.FALSE,  equals(p.factor.FALSE))&#xD;&#xA;    expect_that(build.factor.FALSE,  equals(build.factor.TRUE))&#xD;&#xA;    expect_that(p.character.FALSE,  equals(p.character.FALSE))&#xD;&#xA;    expect_that(build.character.FALSE,  equals(build.character.TRUE))&#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Running this on the current development branch gives:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error: Test failure in 'stringsAsFactors'&#xD;&#xA;build.character.FALSE not equal to build.character.TRUE&#xD;&#xA;Component 1: Component 1: Component 1: Mean relative difference: 1&#xD;&#xA;Component 2: Component 5: Component 1: Component 4: 4 string mismatches&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The first component mismatch is in the x component of the data element.  One set is 1:5,  the other is 5:1.  The second component mismatch is in the x axis labels (&quot;a&quot; -&gt; &quot;e&quot; versus &quot;e&quot; -&gt; &quot;a&quot;).&#xD;&#xA;&#xD;&#xA;# Discussion&#xD;&#xA;&#xD;&#xA;The problem happens in the build process (ggplot_build) only when one of the aesthetics is a character (not a factor).  I believe that this is probably due to a `data.frame` call which has the character vector which is converted to a factor (ordered) or not (stays unordered) based on the global option.  Wherever this internal code is,  it should enforce a particular choice.  Traditionally,  this choice has been `stringsAsFactors=TRUE`; ggplot has used the generic ordering that is gotten from a simple conversion of a character vector to a factor to determine the displayed order.&#xD;&#xA;&#xD;&#xA;Note that the `test_that` code checks both character and factor cases and checks at the ggplot specification and built ggplot level.  One one of these gives an error.  The others guard against regressions.&#xD;&#xA;&#xD;&#xA;# sessionInfo&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.13.1 (2011-07-08)&#xD;&#xA;Platform: x86_64-pc-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 8 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA; [ 1 ] testthat_0.5  ggplot2_0.9.0 memoise_0.1   scales_0.1.0  reshape2_1.1 &#xD;&#xA; [ 6 ] plyr_1.6      proto_0.3-9.2 roxygen2_2.0  digest_0.5.0  devtools_0.4 &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] brew_1.0-6         codetools_0.2-8    colorspace_1.1-0   dichromat_1.2-3   &#xD;&#xA; [ 5 ] evaluate_0.3       munsell_0.2        mutatr_0.1.2       RColorBrewer_1.0-5&#xD;&#xA; [ 9 ] RCurl_1.6-6.1      stringr_0.5        tools_2.13.1      &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1726182" ParentId="214" UserId="4196" Date="08/04/2011 11:32:59" Content="Thanks!  &#xD;&#xA;&#xD;&#xA;Tiny note.  This is slightly better style because it guarantees you'll get your old options settings back even if the function errors out:&#xD;&#xA;&#xD;&#xA;     old &lt;- options(stringsAsFactors = FALSE)&#xD;&#xA;     on.exit(options(old))" />
      <Message Id="1729440" ParentId="214" UserId="463252" Date="08/04/2011 18:27:46" Content="But I thought `on.exit` only worked inside of a function,  not just a code block:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;{ &#xD;&#xA;on.exit(print(&quot;exiting&quot;))&#xD;&#xA;print(&quot;running&quot;)&#xD;&#xA; }&#xD;&#xA;eval({ &#xD;&#xA;on.exit(print(&quot;exiting&quot;))&#xD;&#xA;print(&quot;running&quot;)&#xD;&#xA; })&#xD;&#xA;eval(substitute({ &#xD;&#xA;on.exit(print(&quot;exiting&quot;))&#xD;&#xA;print(&quot;running&quot;)&#xD;&#xA; }))&#xD;&#xA;FUN &lt;- function() { &#xD;&#xA;on.exit(print(&quot;exiting&quot;))&#xD;&#xA;print(&quot;running&quot;)&#xD;&#xA; }&#xD;&#xA;FUN()&#xD;&#xA;eval(body(FUN))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; { &#xD;&#xA;+ on.exit(print(&quot;exiting&quot;))&#xD;&#xA;+ print(&quot;running&quot;)&#xD;&#xA;+  }&#xD;&#xA;[ 1 ] &quot;running&quot;&#xD;&#xA;&gt; eval({ &#xD;&#xA;+ on.exit(print(&quot;exiting&quot;))&#xD;&#xA;+ print(&quot;running&quot;)&#xD;&#xA;+  })&#xD;&#xA;[ 1 ] &quot;running&quot;&#xD;&#xA;[ 1 ] &quot;running&quot;&#xD;&#xA;&gt; eval(substitute({ &#xD;&#xA;+ on.exit(print(&quot;exiting&quot;))&#xD;&#xA;+ print(&quot;running&quot;)&#xD;&#xA;+  }))&#xD;&#xA;[ 1 ] &quot;running&quot;&#xD;&#xA;[ 1 ] &quot;exiting&quot;&#xD;&#xA;&gt; FUN &lt;- function() { &#xD;&#xA;+ on.exit(print(&quot;exiting&quot;))&#xD;&#xA;+ print(&quot;running&quot;)&#xD;&#xA;+  }&#xD;&#xA;&gt; FUN()&#xD;&#xA;[ 1 ] &quot;running&quot;&#xD;&#xA;[ 1 ] &quot;exiting&quot;&#xD;&#xA;&gt; eval(body(FUN))&#xD;&#xA;[ 1 ] &quot;running&quot;&#xD;&#xA;[ 1 ] &quot;exiting&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Looking into the code of `test_that`,  I see that it is closest to the `eval(substitute(...))` case,  which does trigger the `on.exit`,  but in general,  I would not expect or rely on that.  Unless it is documented to work :)&#xD;&#xA;" />
      <Message Id="1731718" ParentId="214" UserId="4196" Date="08/04/2011 23:09:20" Content="Oops,  yeah,  I forgot about that." />
      <Message Id="3087865" ParentId="214" UserId="4196" Date="12/09/2011 23:52:29" Content="Hmmmm,  I think this is a problem with `scales::discrete_range` - it actually should be sorting character vectors when it sees them.  But it shouldn't sort factors,  and I'm not sure what it should do if some data is factors and some is character,  or you get factors with multiple sets of levels.  &#xD;&#xA;&#xD;&#xA;Or maybe it's that `scales::clevels` needs to sort character vectors." />
      <Message Id="3129005" ParentId="214" UserId="463252" Date="12/13/2011 20:21:33" Content="My `testthat` test code had two errors in the 1st and 3rd `expect_that`.  They should be&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;    expect_that(p.factor.FALSE,  equals(p.factor.TRUE))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;    expect_that(p.character.FALSE,  equals(p.character.TRUE))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;respectively." />
      <Message Id="3160781" ParentId="214" UserId="4196" Date="12/15/2011 13:15:34" Content="Somewhat refined test case (easier to see what's going wrong when you extract the exact piece you're interested in)&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;context(&quot;Data&quot;)&#xD;&#xA;&#xD;&#xA;test_that(&quot;stringsAsFactors doesn't affect results&quot;,  { &#xD;&#xA;&#xD;&#xA;    sAF &lt;- getOption(&quot;stringsAsFactors&quot;)&#xD;&#xA;    dat.character &lt;- data.frame(x=letters[ 5:1 ],  y=1:5,  stringsAsFactors=FALSE)&#xD;&#xA;    dat.factor &lt;- data.frame(x=letters[ 5:1 ],  y=1:5,  stringsAsFactors=TRUE)&#xD;&#xA;&#xD;&#xA;    base &lt;- ggplot(,  aes(x,  y)) + geom_point()&#xD;&#xA;    xlabels &lt;- function(x) x$panel$ranges[ [ 1 ] ]$x.labels&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = TRUE)&#xD;&#xA;    char_true &lt;- ggplot_build(base %+% dat.character)&#xD;&#xA;    factor_true &lt;- ggplot_build(base %+% dat.factor)&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = FALSE)&#xD;&#xA;    char_false &lt;- ggplot_build(base %+% dat.character)&#xD;&#xA;    factor_false &lt;- ggplot_build(base %+% dat.factor)&#xD;&#xA;&#xD;&#xA;    options(stringsAsFactors = sAF)&#xD;&#xA;&#xD;&#xA;    expect_that(xlabels(char_true),  equals(letters[ 1:5 ]))&#xD;&#xA;    expect_that(xlabels(char_false),  equals(letters[ 1:5 ]))&#xD;&#xA;    expect_that(xlabels(factor_true),  equals(letters[ 1:5 ]))&#xD;&#xA;    expect_that(xlabels(factor_false),  equals(letters[ 1:5 ]))&#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="3212498" ParentId="214" UserId="4196" Date="12/20/2011 00:58:29" Content="This is fixed in the development version of scales." />
    </Messages>
  </Topic>
  <Topic Id="215" Title="stat_boxplot generates infinities for small datasets">
    <Messages>
      <Message Id="0" ParentId="215" UserId="958887" Date="08/04/2011 12:37:58" Content="```R&#xD;&#xA;ggplot()+geom_boxplot(aes(x='BoxPlot Bug', y=c(1, 2)), coef=0.0)+ylim(c(-5, 5))&#xD;&#xA;Warning messages:&#xD;&#xA;1: In min(x) : no non-missing arguments to min; returning Inf&#xD;&#xA;2: In max(x) : no non-missing arguments to max; returning -Inf&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The resulting plot contains two vertical lines for the hinges.&#xD;&#xA;&#xD;&#xA;One possible fix is to adjust the call to range within the calculate method of StatBoxplot:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;      if (any(outliers)) stats[ c(1,  5) ] &lt;- range(c(y[ !outliers ], stats[ 2 ], stats[ 4 ]),  na.rm=TRUE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The whole function:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;  calculate &lt;- function(.,  data,  scales,  width=NULL,  na.rm = FALSE,  coef = 1.5,  ...) { &#xD;&#xA;    with(data,  { &#xD;&#xA;      qs &lt;- c(0,  0.25,  0.5,  0.75,  1)&#xD;&#xA;      if (length(unique(weight)) != 1) { &#xD;&#xA;        try_require(&quot;quantreg&quot;)&#xD;&#xA;        stats &lt;- as.numeric(coef(rq(y ~ 1,  weights = weight,  tau=qs)))&#xD;&#xA;       } else { &#xD;&#xA;        stats &lt;- as.numeric(quantile(y,  qs))&#xD;&#xA;       }&#xD;&#xA;      names(stats) &lt;- c(&quot;ymin&quot;,  &quot;lower&quot;,  &quot;middle&quot;,  &quot;upper&quot;,  &quot;ymax&quot;)&#xD;&#xA;&#xD;&#xA;      iqr &lt;- diff(stats[ c(2,  4) ])&#xD;&#xA;&#xD;&#xA;      outliers &lt;- y &lt; (stats[ 2 ] - coef * iqr) | y &gt; (stats[ 4 ] + coef * iqr)&#xD;&#xA;      if (any(outliers)) stats[ c(1,  5) ] &lt;- range(c(y[ !outliers ], stats[ 2 ], stats[ 4 ]),  na.rm=TRUE)&#xD;&#xA;&#xD;&#xA;      if (length(unique(x)) &gt; 1) width &lt;- diff(range(x)) * 0.9&#xD;&#xA;&#xD;&#xA;      df &lt;- as.data.frame(as.list(stats))&#xD;&#xA;      df$outliers &lt;- I(list(y[ outliers ]))&#xD;&#xA;&#xD;&#xA;      transform(df, &#xD;&#xA;        x = if (is.factor(x)) x[ 1 ] else mean(range(x)), &#xD;&#xA;        width = width&#xD;&#xA;      )&#xD;&#xA;     })&#xD;&#xA;   }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;See also: Issue #108: [ Incorrect hinge calculation in stat_boxplot for v. small datasets ](https://github.com/hadley/ggplot2/issues/108)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3227194" ParentId="215" UserId="86978" Date="12/20/2011 23:29:26" Content="This issue was fixed in #108." />
    </Messages>
  </Topic>
  <Topic Id="216" Title="Fix a bug in coord_cartesian when limits are specified.">
    <Messages>
      <Message Id="0" ParentId="216" UserId="227097" Date="08/05/2011 06:46:17" Content="" />
    </Messages>
  </Topic>
  <Topic Id="217" Title="Fix a bug in coord_cartesian when limits are specified.">
    <Messages>
      <Message Id="0" ParentId="217" UserId="227097" Date="08/05/2011 06:47:50" Content="" />
      <Message Id="1806414" ParentId="217" UserId="4196" Date="08/15/2011 11:32:54" Content="Would you mind writing a test case for this too please?" />
      <Message Id="1899880" ParentId="217" UserId="4196" Date="08/25/2011 13:40:15" Content="Shouldn't you be able to test this one without creating output plots?  I think you should be able to test the output of `ggplot_build`,  or am I missing something?" />
      <Message Id="1900434" ParentId="217" UserId="227097" Date="08/25/2011 14:42:12" Content="&gt; Shouldn't you be able to test this one without creating output plots?  I think you should be able to test the output of `ggplot_build`,  or am I missing something?&#xD;&#xA;&#xD;&#xA;I got it. The output plots are not necessary.&#xD;&#xA;But I think the output of `ggplot_build` is incomplete.&#xD;&#xA;The output of `ggplot_gtable` in `print.ggplot` should be ideal. But&#xD;&#xA;in that case,  the numbering of grob object (e.g.,  305 of&#xD;&#xA;gTree[ GRID.gTree.305 ]) must be ignored.&#xD;&#xA;&#xD;&#xA;here is an example of the testing:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;gg_test_taker &lt;- function(p) list(data = (d &lt;- ggplot_build(p)),  grobs&#xD;&#xA;= ggplot_gtable(p,  d))&#xD;&#xA;&#xD;&#xA;gg_examiner &lt;- function(o1,  o2) { &#xD;&#xA;	stopifnot(all.equal(o1$data,  o2$data))&#xD;&#xA;	# test identity of grobs ignoring numbering&#xD;&#xA;	# stopifnot(all.equal.grob(o1$grobs,  o2$grobs))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;p &lt;- qplot(1:3, 1:3, colour=1:3)&#xD;&#xA;&#xD;&#xA;o1 &lt;- gg_test_taker(p)&#xD;&#xA;o2 &lt;- gg_test_taker(p)&#xD;&#xA;&#xD;&#xA;gg_examiner(o1,  o2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Do you have any idea to test equality of two grobs?" />
      <Message Id="1900532" ParentId="217" UserId="4196" Date="08/25/2011 14:50:31" Content="For anything that you can only test on the grob level,  I think we want images.  For everything else,  you should be able to test based output of `ggplot_build`." />
    </Messages>
  </Topic>
  <Topic Id="218" Title="Fix a bug in calculating the sizes of gtable">
    <Messages>
      <Message Id="0" ParentId="218" UserId="227097" Date="08/05/2011 07:59:06" Content="when setting aspect ratio with facetting,  the setting is ignored.&#xD;&#xA;This is because `compute_grob_dimensions` in utilities-table.r return `1null`&#xD;&#xA;" />
      <Message Id="1763278" ParentId="218" UserId="4196" Date="08/09/2011 13:34:05" Content="Could you create a test case for this?  I think it should probably save a png in the tests directory,  so git will alert if there are any changes." />
      <Message Id="1787798" ParentId="218" UserId="227097" Date="08/12/2011 02:21:29" Content="Could you please tell me where to put the test code?&#xD;&#xA;inst/test? and output plot should be in the same directory?&#xD;&#xA;&#xD;&#xA;here is a simple test code,  so if you merge the bugfix and put this anywhere in the repository,  I can follow your way of testing in future.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;df &lt;- data.frame(x=1:6,  y=1:6,  f=gl(2, 3))&#xD;&#xA;p1 &lt;- ggplot(df,  aes(x,  y)) + geom_point() + opts(aspect.ratio=3)&#xD;&#xA;p2 &lt;- ggplot(df,  aes(x,  y)) + geom_point() + facet_wrap(~f) + opts(aspect.ratio=3)&#xD;&#xA;p3 &lt;- ggplot(df,  aes(x,  y)) + geom_point() + facet_grid(.~f) + opts(aspect.ratio=3)&#xD;&#xA;&#xD;&#xA;ggsave(&quot;aspect_ratio_facet_null.pdf&quot;,  p1)&#xD;&#xA;ggsave(&quot;aspect_ratio_facet_wrap.pdf&quot;,  p2)&#xD;&#xA;ggsave(&quot;aspect_ratio_facet_grid.pdf&quot;,  p3)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;thanks." />
      <Message Id="1805928" ParentId="218" UserId="4196" Date="08/15/2011 09:48:17" Content="Yes,  tests should go `inst/test` - I'd put those in `test-gtable.r`.  But I'd use png: `ggsave(&quot;aspect_ratio_facet_null.png&quot;,  p1,  width = 6,  height = 6,  dpi = 72)`,  and maybe write a helper function `ggtest` that saves them in that format.  &#xD;&#xA;&#xD;&#xA;(Sorry I don't have time at the moment to write the tests myself)" />
    </Messages>
  </Topic>
  <Topic Id="219" Title="binwidth for dates">
    <Messages>
      <Message Id="0" ParentId="219" UserId="216319" Date="08/06/2011 18:32:12" Content="This is in 0.89,  not sure if it's better in 0.90.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;x &lt;- as.Date(Sys.time()) + c(0, 7)&#xD;&#xA;y &lt;- c(7, 9)&#xD;&#xA;qplot(x, y,  geom=&quot;bar&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Bars are too wide and it's not clear to which date they refer. Better default for dates might be to have the bar the width of exactly 1 date.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1757673" ParentId="219" UserId="463252" Date="08/08/2011 20:13:11" Content="It's tricky,  and I don't think that narrower bars are necessarily &quot;better.&quot;  Breaking it down: the x scale is a date scale which is a continuous scale.  Bars are generally used in two contexts: on a discrete scale as a counting,  or on a continuous scale as a aggregation over some region of the scale (effectively: histogram).  The latter is what you are doing (since,  as I said,  dates are a continuous scale).  So the interpretation is that each value of the date represents the midpoint of some bin of values.  Without specific information,  ggplot assumes the width of the bins can be figured out by looking at the spacing of the midpoints,  and so the width of the bars covers the space between the points.  That is what you see.  And you are right in your interpretation that &quot;which date they refer&quot; isn't as clear,  because it is meant to reflect corresponding to a range of dates.&#xD;&#xA;&#xD;&#xA;The behavior you suggest is that dates implicitly have a day-sized discrete nature.  But that is not necessarily the scale over which they are aggregated.  So if you want to indicate that the data you have is day sized bins,  you need to give data that is binned at the day level.&#xD;&#xA;&#xD;&#xA;Here are several examples that try different aspects of continuous and discrete scales (note the discrete scales are not truly date scales,  but discrete scales whose values a formatted like dates).&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;x &lt;- as.Date(&quot;2011-08-08&quot;) + c(0, 7, 21)&#xD;&#xA;y &lt;- c(7, 9, 11)&#xD;&#xA;&#xD;&#xA;DF1 &lt;- data.frame(x, y)&#xD;&#xA;p &lt;- ggplot(DF1,  aes(x, y)) +&#xD;&#xA;	geom_bar(stat=&quot;identity&quot;)&#xD;&#xA;p&#xD;&#xA;&#xD;&#xA;DF2 &lt;- data.frame(x=factor(x),  y)&#xD;&#xA;p %+% DF2&#xD;&#xA;&#xD;&#xA;DF3 &lt;- data.frame(x=factor(as.character(x),  levels=as.character(seq(min(x), max(x), by=&quot;1 day&quot;))),  y)&#xD;&#xA;p %+% DF3&#xD;&#xA;&#xD;&#xA;DF4 &lt;- rbind.fill(DF3,  data.frame(x=levels(DF3$x),  y=0))&#xD;&#xA;p %+% DF4&#xD;&#xA;&#xD;&#xA;DF5 &lt;- rbind(DF1,  data.frame(x=seq(min(x),  max(x),  by=&quot;1 day&quot;),  y=0))&#xD;&#xA;p %+% DF5&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The last one is most like what you want.  It has a proper date scale on the x axis,  but the data itself is binned at the day level (there is an entry for each day).&#xD;&#xA;&#xD;&#xA;Also,  compare that with what happens when there is actually aggregation with the binning of `geom_bar`&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;DF6 &lt;- data.frame(x=rep(as.Date(c(&quot;2011-08-07&quot;,  &quot;2011-08-08&quot;,  &quot;2011-08-09&quot;, &#xD;&#xA;	&quot;2011-08-14&quot;,  &quot;2011-08-15&quot;,  &quot;2011-08-16&quot;,  &#xD;&#xA;	&quot;2011-08-28&quot;,  &quot;2011-08-29&quot;,  &quot;2011-08-30&quot;)), c(2, 3, 2, 3, 3, 3, 4, 3, 4)))&#xD;&#xA;ggplot(DF6,  aes(x)) + geom_bar(binwidth=7)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="44570486" ParentId="219" UserId="960829" Date="05/29/2014 18:59:15" Content="Not sure I agree with this work around. My X is already binned at the day level,  still geom_bar() changes that,  now I don't know what binwidth I should use." />
    </Messages>
  </Topic>
  <Topic Id="220" Title="graphical slider to allow interactive exploration of a relationship">
    <Messages>
      <Message Id="0" ParentId="220" UserId="736156" Date="08/07/2011 09:10:31" Content="Let's say you're wondering what the shape parameter of gamma does.&#xD;&#xA;&#xD;&#xA;You plot it at one value:&#xD;&#xA;&#xD;&#xA;dx &lt;- seq(0,  6000,  len = 100)&#xD;&#xA;qplot(dx,  dgamma(dx,  shape=4,  rate=.0026))&#xD;&#xA;&#xD;&#xA;# But really you'd like to explore the range 1:6&#xD;&#xA;&#xD;&#xA;qplot(dx,  y=1:6,  sliderYFUN= dgamma(dx,  shape=y,  rate=.0026))&#xD;&#xA;&#xD;&#xA;if sliderYFUN is not NA,  check that &quot;y&quot; is a range. &#xD;&#xA;Then the plot is built with a slider under the x axis (they'd stack if sliderXFUN was also loaded).&#xD;&#xA;The slider sets the current value of y in the sliderYFUN,  which is used to generate the y values for the plot...&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1748227" ParentId="220" UserId="207329" Date="08/07/2011 11:55:26" Content="While this is certainly useful,  I suspect this is not going to be implemented for a couple of reasons (though it's ultimately up to Hadley).&#xD;&#xA;&#xD;&#xA;Firstly,  there's nothing stopping you right now from creating a GUI (using tk,  GTK,  etc) to explore a dataset. But ggplot2 is more useful as plotting library,  rather than a collection of graphical tools.&#xD;&#xA;&#xD;&#xA;Secondly,  R graphics (in particular grid graphics,  upon which ggplot2 is based) is _slow_. So slow in fact that if you were to create a slider that explores a relationship,  you'd be spending a lot of time waiting for the plot to draw. I think Hadley is involved with development regarding qtpaint. The aim of qtpaint is to draw plots several orders of magnitude faster,  along with being able to provide real interactivity to plots.&#xD;&#xA;&#xD;&#xA;Hopefully this is useful information for you." />
      <Message Id="1749514" ParentId="220" UserId="4196" Date="08/07/2011 19:06:54" Content="I agree that this is a nice idea,  but it's outside the current scope of ggplot2." />
    </Messages>
  </Topic>
  <Topic Id="221" Title="Axis label adjustment with free scales">
    <Messages>
      <Message Id="0" ParentId="221" UserId="4196" Date="08/10/2011 00:05:09" Content="    qplot(hwy,  reorder(model,  hwy),  data = mpg) + &#xD;&#xA;      facet_grid(manufacturer ~ .,  scales = &quot;free&quot;,  space = &quot;free&quot;) + &#xD;&#xA;      opts(strip.text.y = theme_text())&#xD;&#xA;" />
      <Message Id="1821571" ParentId="221" UserId="463252" Date="08/16/2011 23:19:27" Content="`space=&quot;free&quot;` is not necessary to create this problem.  Also,  the problem is present on the horizontal axis if the labels are rotated:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(reorder(model,  hwy),  hwy,  data=mpg) +&#xD;&#xA;	facet_grid(. ~ manufacturer,  scales=&quot;free&quot;) +&#xD;&#xA;	opts(axis.text.x = theme_text(angle=90))&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;It looks like the box for the labels of each facet is being drawn centered in the space which is wide enough for the widest set of labels.  However,  each box is only wide enough for its own widest label.  The tick marks are then put just to the right of this box.  Any `hjust` is also being done with respect to this box.  It is especially obvious with&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(hwy,  reorder(model,  hwy),  data = mpg) + &#xD;&#xA;  facet_grid(manufacturer ~ .,  scales = &quot;free&quot;,  space=&quot;free&quot;) + &#xD;&#xA;  opts(axis.text.y = theme_text(hjust=0))&#xD;&#xA;qplot(hwy,  reorder(model,  hwy),  data = mpg) + &#xD;&#xA;  facet_grid(manufacturer ~ .,  scales = &quot;free&quot;,  space=&quot;free&quot;) + &#xD;&#xA;  opts(axis.text.y = theme_text(hjust=1))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It is only noticeable with `scales=&quot;free&quot;` (or the appropriate `&quot;free_x&quot;` or `&quot;free_y&quot;`) because otherwise all facets have the same widest label (since they all have the same set of labels)." />
      <Message Id="1821645" ParentId="221" UserId="227097" Date="08/16/2011 23:30:28" Content="wow,  the patch commit in folk repository is automatically embedded in this issue thread. &#xD;&#xA;&#xD;&#xA;Anyway,  probably this bug is fixed,  which is tentative (but will be included in 0.9). See the commit.&#xD;&#xA;I'm planning to rewrite guide-axis in more extendable way in the future version." />
      <Message Id="2992177" ParentId="221" UserId="4196" Date="12/02/2011 16:21:22" Content="Fixed in f5bcca2e36d2a523d42f7b0ed642e953e2ef113c" />
    </Messages>
  </Topic>
  <Topic Id="222" Title="extra spaces in scale_labels.discrete for character">
    <Messages>
      <Message Id="0" ParentId="222" UserId="227097" Date="08/10/2011 10:58:38" Content="see: &#xD;&#xA;https://github.com/hadley/ggplot2/commit/66a717096734b488ee9b779352992ac07eff99d4#commitcomment-521858" />
      <Message Id="2992163" ParentId="222" UserId="4196" Date="12/02/2011 16:20:00" Content="Fixed in f5bcca2e36d2a523d42f7b0ed642e953e2ef113c" />
    </Messages>
  </Topic>
  <Topic Id="223" Title="map_data needs to pass ... to map">
    <Messages>
      <Message Id="0" ParentId="223" UserId="4196" Date="08/15/2011 11:40:17" Content="esp for `xlim` and `ylim`.  And similarly for `borders` etc" />
    </Messages>
  </Topic>
  <Topic Id="224" Title="New geom for grid.path">
    <Messages>
      <Message Id="0" ParentId="224" UserId="4196" Date="08/15/2011 11:41:31" Content="For drawing maps with holes in them.  Will probably also need adjustments to `map_data`" />
      <Message Id="35939034" ParentId="224" UserId="4196" Date="02/24/2014 21:16:12" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="225" Title="legend = TRUE not forcing inclusion">
    <Messages>
      <Message Id="0" ParentId="225" UserId="4196" Date="08/15/2011 11:54:16" Content="    Category &lt;- as.factor(1:5)&#xD;&#xA;    Score &lt;- runif(5)&#xD;&#xA;    Density &lt;- runif(5)&#xD;&#xA;    dframe &lt;- data.frame(Category,  Score,  Density)&#xD;&#xA;    ggplot(dframe,  aes(Category,  Score)) + &#xD;&#xA;      geom_point(aes(size=1),  guide = &quot;legend&quot;,  colour = &quot;white&quot;) +&#xD;&#xA;      geom_point(aes(size=Density))&#xD;&#xA;" />
      <Message Id="2992061" ParentId="225" UserId="4196" Date="12/02/2011 16:13:17" Content="@kohske can you please look into why this doesn't work anymore?  Should it be `guide = &quot;legend&quot;` ?" />
      <Message Id="2995523" ParentId="225" UserId="227097" Date="12/02/2011 20:41:04" Content="Probably this is a kind of special case and will not be easy to fix.&#xD;&#xA;Maybe need reconsideration of overlapping legends for multiple layers.&#xD;&#xA;&#xD;&#xA;Also,  could you please look at the comments in guide-legend.r around ll.195-.&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/guide-legend.r#L195&#xD;&#xA;&#xD;&#xA;I think it is better to reconstructing than patching for this problem.&#xD;&#xA;What do you think?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3087634" ParentId="225" UserId="4196" Date="12/09/2011 23:25:42" Content="Hmm,  I think this may be too much work for this release.  Let's fix legends in 1.0." />
      <Message Id="7462539" ParentId="225" UserId="86978" Date="08/02/2012 17:40:14" Content="The background dots actually are being included in the legend. However,  they are being shown at the same size as the other dots. This example will illustrate:&#xA;&#xA;```R&#xA;&#xA;dat &lt;- data.frame(x=1:5,  y=1:5,  s=runif(5))&#xA;&#xA;ggplot(dat,  aes(x,  y)) + &#xA;  geom_point(aes(size=1),  colour = &quot;red&quot;) +&#xA;  geom_point(aes(size=s),  colour=&quot;blue&quot;,  alpha=0.5)&#xA;```&#xA;&#xA;Is the expected behavior that the background (red) dots will all be the maximum size?&#xA;" />
      <Message Id="7941625" ParentId="225" UserId="4196" Date="08/22/2012 17:12:50" Content="Yes,  the red dots should all be the same size in the legend." />
      <Message Id="7953275" ParentId="225" UserId="86978" Date="08/22/2012 21:50:12" Content="I'm not sure that the current behavior is wrong.&#xA;&#xA;In the first example here,  the size of the red points is on the same scale as the semi-transparent blue points; since it's on the same scale,  shouldn't the legend indicate what sizes represent what values?&#xA;&#xA;The second example has the same effect,  but gets the value for the size of the red dots from a a column in the data frame.&#xA;&#xA;In the third example,  the size is set (outside of `aes()`),  so it makes sense not to include it in the legend.&#xA;&#xA;```R&#xA;set.seed(234)&#xA;dat &lt;- data.frame(x=1:5,  y=1:5,  s=10*runif(5))&#xA;&#xA;# mapping a constant value to size&#xA;ggplot(dat,  aes(x,  y)) +&#xA;  geom_point(aes(size=7),  guide=&quot;legend&quot;,  colour = &quot;red&quot;) +&#xA;  geom_point(aes(size=s),  colour=&quot;blue&quot;,  alpha=0.5)&#xA;&#xA;&#xA;# same as this&#xA;dat2 &lt;- data.frame(dat,  z=7)&#xA;ggplot(dat2,  aes(x,  y)) +&#xA;  geom_point(aes(size=z),  guide=&quot;legend&quot;,  colour = &quot;red&quot;) +&#xA;  geom_point(aes(size=s),  colour=&quot;blue&quot;,  alpha=0.5)&#xA;&#xA;&#xA;# setting size - doesn't show in legend&#xA;ggplot(dat,  aes(x,  y)) +&#xA;  geom_point(size=7,  guide=&quot;legend&quot;,  colour = &quot;red&quot;) +&#xA;  geom_point(aes(size=s),  colour=&quot;blue&quot;,  alpha=0.5)&#xA;```&#xA;" />
      <Message Id="7956943" ParentId="225" UserId="227097" Date="08/23/2012 00:49:45" Content="It is really difficult,  or maybe impossible,  to fix this unless we largely rewrite scale system.&#xA;You can find some notes here: https://github.com/hadley/ggplot2/blob/master/R/guide-legend.r#L234" />
      <Message Id="8313040" ParentId="225" UserId="4196" Date="09/05/2012 20:39:08" Content="This might be a better example:&#xA;&#xA;```R&#xA;ggplot(mtcars,  aes(disp,  mpg)) +&#xA;  geom_point(size = 5,  guide = &quot;legend&quot;) + &#xA;  geom_point(aes(colour = factor(cyl),  shape = factor(cyl)),  size = 3)&#xA;```&#xA;&#xA;it should be possible to force the first layer to appear in the legend even though it doesn't map any variables to values.  Previously,  this worked by overriding the default detection for whether or not a layer needed a legend,  and then the normal legend creation code just worked." />
      <Message Id="8313196" ParentId="225" UserId="4196" Date="09/05/2012 20:44:14" Content="Well it does work:&#xA;&#xA;```R&#xA;ggplot(mtcars,  aes(disp,  mpg)) +&#xA;  geom_point(size = 5,  show_guide = TRUE) + &#xA;  geom_point(aes(colour = factor(cyl),  shape = factor(cyl)),  size = 3)&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="226" Title="Continuous position scales should have minor breaks argument">
    <Messages>
      <Message Id="0" ParentId="226" UserId="4196" Date="08/16/2011 16:22:33" Content="Which should be a function,  defaulting to place a minor break evenly (on the original scale) between major ticks.  Like breaks and labels,  should also accept fixed values." />
      <Message Id="2992136" ParentId="226" UserId="4196" Date="12/02/2011 16:18:32" Content="Done by Kohske." />
    </Messages>
  </Topic>
  <Topic Id="227" Title="Easy way to plot regular grid,  but not rectangular grids">
    <Messages>
      <Message Id="0" ParentId="227" UserId="4196" Date="08/18/2011 10:00:01" Content="Look at `fields::image.plot` and `fields::poly.image` to see how to do it automatically." />
      <Message Id="35939048" ParentId="227" UserId="4196" Date="02/24/2014 21:16:16" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="228" Title="Creation of autoplot()">
    <Messages>
      <Message Id="0" ParentId="228" UserId="975494" Date="08/18/2011 22:00:23" Content="This is the initial submission of autoplot() as discussed with Hadley in comments here:&#xD;&#xA;http://stackoverflow.com/questions/7098830/bad-idea-ggplotting-an-s3-class-object&#xD;&#xA;&#xD;&#xA;It is intended to provide a generic S3 method which package developers can use to write autoplot methods for their own classes." />
      <Message Id="1855250" ParentId="228" UserId="463252" Date="08/19/2011 19:09:50" Content="I've built on this.  You can build further by sending pull requests to the autoplot branch of my fork of ggplot2. https://github.com/BrianDiggs/ggplot2/tree/autoplot  This is the branch that is requested to be pulled in #229.&#xD;&#xA;" />
      <Message Id="1855464" ParentId="228" UserId="975494" Date="08/19/2011 19:26:48" Content="Thanks Brian.&#xA;&#xA;Best, &#xA;Ari&#xA;&#xA;On Fri,  Aug 19,  2011 at 9:09 PM,  BrianDiggs &lt;&#xA;reply@reply.github.com&gt;wrote:&#xA;&#xA;&gt; I've built on this.  You can build further by sending pull requests to the&#xA;&gt; autoplot branch of my fork of ggplot2.&#xA;&gt; https://github.com/BrianDiggs/ggplot2/tree/autoplot  This is the branch&#xA;&gt; that is requested to be pulled in #229.&#xA;&gt;&#xA;&gt; --&#xA;&gt; Reply to this email directly or view it on GitHub:&#xA;&gt; https://github.com/hadley/ggplot2/pull/228#issuecomment-1855250&#xA;&gt;" />
    </Messages>
  </Topic>
  <Topic Id="229" Title="Autoplot">
    <Messages>
      <Message Id="0" ParentId="229" UserId="463252" Date="08/18/2011 23:13:28" Content="This is to supersede Pull Request #228.  It is an implementation of autoplot which uses proper roxygen documentation.  The code for the functions is the same.  It also includes the roxygenized version of the documentation,  and the additions to NAMESPACE and DESCRIPTION." />
      <Message Id="1899872" ParentId="229" UserId="4196" Date="08/25/2011 13:38:51" Content="Brian,  would you mind making those few changes I suggested so I can pull?  Thanks!" />
      <Message Id="1900352" ParentId="229" UserId="463252" Date="08/25/2011 14:33:52" Content="Sorry,  was on vacation and working from home for a few days. I don't have a full development environment set up at home,  so didn't want to try and make the changes there.  I've added a commit that has the requested changes and another." />
      <Message Id="1902604" ParentId="229" UserId="4196" Date="08/25/2011 18:37:48" Content="Great - thanks Brian.  Will hopefully pull in the next week or so." />
      <Message Id="2980299" ParentId="229" UserId="4196" Date="12/01/2011 20:43:10" Content="Would you mind updating to the latest version of the develop branch? Then I'll pull in." />
      <Message Id="2991936" ParentId="229" UserId="4196" Date="12/02/2011 16:03:36" Content="Sorry,  match to master branch now - develop has been retired." />
      <Message Id="3081870" ParentId="229" UserId="463252" Date="12/09/2011 16:24:18" Content="Tried rebasing the commit and just messed things up more.  Closing this pull request and opening a new one." />
    </Messages>
  </Topic>
  <Topic Id="230" Title="Legend of colour with geom_point and geom_text overlab">
    <Messages>
      <Message Id="0" ParentId="230" UserId="86275" Date="08/19/2011 13:36:29" Content="### Situation&#xD;&#xA;I want to plot a point (`geom_point()`) and a text (`geom_text()`) right next to it,  both using the same colour.&#xD;&#xA;### Problem&#xD;&#xA;In the legend the letter of the text is printed under the point.&#xD;&#xA;### Wanted&#xD;&#xA;In the legend only the point should be printed and the letter omitted.&#xD;&#xA;&#xD;&#xA;### Code to reproduce:&#xD;&#xA;&#xD;&#xA;    x &lt;- c(1)&#xD;&#xA;    y &lt;- c(2)&#xD;&#xA;    value &lt;- c(&quot;some text&quot;)&#xD;&#xA;    df &lt;- data.frame(x,  y,  value)&#xD;&#xA;    &#xD;&#xA;    q &lt;- ggplot(df)&#xD;&#xA;    q &lt;- q + aes(x=x,  y=y,  label=value,  colour=value)&#xD;&#xA;    q &lt;- q + geom_text()&#xD;&#xA;    q &lt;- q + geom_point()&#xD;&#xA;    q&#xD;&#xA;&#xD;&#xA;### Current output&#xD;&#xA;&#xD;&#xA;http://i.imgur.com/rBY92.png" />
      <Message Id="1855314" ParentId="230" UserId="463252" Date="08/19/2011 19:13:31" Content="Does&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;q &lt;- ggplot(df)&#xD;&#xA;q &lt;- q + aes(x=x,  y=y,  label=value,  colour=value)&#xD;&#xA;q &lt;- q + geom_text(legend=FALSE)&#xD;&#xA;q &lt;- q + geom_point()&#xD;&#xA;q&#xD;&#xA;```&#xD;&#xA;not give you what you want?  If not,  in what way is this also not correct?&#xD;&#xA;" />
      <Message Id="1867170" ParentId="230" UserId="86275" Date="08/22/2011 07:51:21" Content="@BrianDiggs: Great,  that works. Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="231" Title="percent returns NaN when all inputs take the same value">
    <Messages>
      <Message Id="0" ParentId="231" UserId="197589" Date="08/22/2011 12:25:16" Content="If all the values in the input `x` are the same (i.e. if `all(diff(x) == 0))` then percent returns `NaN`.  For example&#xD;&#xA;&#xD;&#xA;    percent(100)             #&quot;NaN%&quot;&#xD;&#xA;    percent(rep.int(1,  3))   #&quot;NaN%&quot; &quot;NaN%&quot; &quot;NaN%&quot;&#xD;&#xA;&#xD;&#xA;The problem seems to be that in this case `precision(x)` returns 0,  which then causes `round_any` to calculate `Inf * 0`.&#xD;&#xA;&#xD;&#xA;A possible fix is to change the definition of percent to be&#xD;&#xA;&#xD;&#xA;    percent &lt;- function(x) &#xD;&#xA;    { &#xD;&#xA;      x &lt;- round_any(x,  max(1,  precision(x))/10)&#xD;&#xA;      paste(comma(x * 100),  &quot;%&quot;,  sep = &quot;&quot;)&#xD;&#xA;     }&#xD;&#xA;" />
      <Message Id="2992124" ParentId="231" UserId="4196" Date="12/02/2011 16:18:00" Content="Fixed in scales,  where this now lives." />
    </Messages>
  </Topic>
  <Topic Id="232" Title="scale_x_date misaligns dates">
    <Messages>
      <Message Id="0" ParentId="232" UserId="86275" Date="08/23/2011 14:55:02" Content="## Situation ##&#xD;&#xA;I want to plot a couple of dates over a timespan of multiple years. For each year only quarters should be shown. While doing so I noticed,  that `scale_x_date` misaligns dates.&#xD;&#xA;&#xD;&#xA;## Example Code ##&#xD;&#xA;&#xD;&#xA;    x = c(as.Date(ISOdate(2005,  10,  1)),  as.Date(ISOdate(2008,  01,  1)),  as.Date(ISOdate(2011,  04,  1)))&#xD;&#xA;    y = c(10,  1000,  100)&#xD;&#xA;    data1 = data.frame(x, y)&#xD;&#xA;    p &lt;- ggplot(data1) + aes(x=x,  y=y) + geom_line()&#xD;&#xA;&#xD;&#xA;Up until now,  all is good. There are three points plotted at the correct dates: 4Q/2005,  1Q/2008 and 2Q/2011.&#xD;&#xA;&#xD;&#xA;    p &lt;- p + scale_x_date(major=&quot;12 months&quot;,  minor=&quot;3 months&quot;,  format=&quot;%Y&quot;)&#xD;&#xA;&#xD;&#xA;After adding a `scale_x_date` its broken. The diagram show dates at 1Q/2005,  2Q/2007 and 3Q/2010. Looks like it's off 3 quarters each. Any ideas how to fix this?" />
      <Message Id="1885332" ParentId="232" UserId="227097" Date="08/23/2011 23:35:28" Content="Hi&#xD;&#xA;&#xD;&#xA;The majour breaks represent October,  since the lower limit of your data is 2005/10/1.&#xD;&#xA;You can fix by specifying the limits manually:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- p + scale_x_date(major=&quot;12 months&quot;,  minor=&quot;3 months&quot;,  format=&quot;%Y&quot;,  limits = as.Date(c(&quot;2005-1-1&quot;,  &quot;2012-1-1&quot;)))&#xD;&#xA;```" />
      <Message Id="1885365" ParentId="232" UserId="227097" Date="08/23/2011 23:40:06" Content="This behavior seems to be confusing. Maybe it is better to set,  by default,  wisely the majour breaks to Jan. 1st of the year,  1st of the month or 0:00AM of the day." />
      <Message Id="1889119" ParentId="232" UserId="86275" Date="08/24/2011 12:14:22" Content="Setting the limits manually works. But this is only a workaround,  because with this you have to know for every plot,  what your min and you max data is!" />
      <Message Id="1889397" ParentId="232" UserId="227097" Date="08/24/2011 12:51:16" Content="It is not difficult to automatical-manually set the limits.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- p + scale_x_date(major=&quot;12 months&quot;,  minor=&quot;3 months&quot;,  format=&quot;%Y&quot;,  &#xD;&#xA;  limits = c(floor_date(min(data1$x),  &quot;year&quot;),  ceiling_date(max(data1$x),  &quot;year&quot;)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;but I suggest it is better if this is default behavior.&#xD;&#xA;" />
      <Message Id="1893268" ParentId="232" UserId="4196" Date="08/24/2011 19:07:46" Content="Does scale in dev version do any better? Probably need origin parameter in breaks. " />
      <Message Id="1895778" ParentId="232" UserId="227097" Date="08/25/2011 00:12:35" Content="The dev version of scale does not support &#xD;&#xA;1) minor break specification&#xD;&#xA;2) interval specification of major and minor breaks in date (and datetime) scale&#xD;&#xA;&#xD;&#xA;As for 1),  need to modify scale_breaks_minor function. probably easy.&#xD;&#xA;As for 2),  conversion from interval (e.g.,  &quot;3 months&quot;) to actual value (e.g.,  &quot;Aug. 2011&quot;) is necessary at any timing,  probably either in `scale_x_date` or in `scale_breaks.continuous`." />
      <Message Id="1896030" ParentId="232" UserId="463252" Date="08/25/2011 01:03:40" Content="@kohske,  as for 2,  I thought major breaks intervals were now set with the `breaks` argument like `breaks = date_breaks(&quot;3 months&quot;)` (see example in https://github.com/hadley/ggplot2/blob/develop/R/scale-date.r#L21)." />
      <Message Id="1896093" ParentId="232" UserId="227097" Date="08/25/2011 01:18:59" Content="@BrianDiggs I got it. thanks." />
      <Message Id="1898228" ParentId="232" UserId="227097" Date="08/25/2011 08:46:47" Content="This commit will support again the ability to specify minor breaks: https://github.com/kohske/ggplot2/commit/1e2f6ab44d325f862bd8b9fb3d70514ce8e0115e&#xD;&#xA;&#xD;&#xA;1) minor breaks can be set by value or function&#xD;&#xA;2) no minor breaks for discrete scale&#xD;&#xA;3) no grid lines are drawn when unnecessary&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3212495" ParentId="232" UserId="4196" Date="12/20/2011 00:58:22" Content="This appears to be fixed in the development version because `date_breaks` always rounds up/down to the nearest multiple.  &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(&#xD;&#xA;  x = as.Date(ISOdate(c(2005,  2008,  2011),  c(10,  1,  4),  1)), &#xD;&#xA;  y = c(10,  1000,  100)&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;(p &lt;- ggplot(df,  aes(x,  y)) + geom_line() + geom_point())&#xD;&#xA;&#xD;&#xA;p + scale_x_date(breaks = date_breaks(&quot;1 year&quot;),  &#xD;&#xA;  minor_breaks = date_breaks(&quot;3 months&quot;))&#xD;&#xA;&#xD;&#xA;shrink &lt;- as.Date(c(&quot;2005-1-1&quot;,  &quot;2012-1-1&quot;))&#xD;&#xA;p + scale_x_date(breaks = date_breaks(&quot;1 year&quot;),  &#xD;&#xA;  minor_breaks = date_breaks(&quot;3 months&quot;),  limits = shrink)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="233" Title="Feature/new guides with gtable">
    <Messages>
      <Message Id="0" ParentId="233" UserId="227097" Date="08/26/2011 14:55:38" Content="I wrote test codes as much as possible,  but definitely there must be bugs I'm unaware of.&#xD;&#xA;Please let me know if I need fix something.&#xD;&#xA;" />
      <Message Id="1917232" ParentId="233" UserId="18970" Date="08/26/2011 21:49:50" Content="Hey – this all sounds amazing. Do you have minimal tests that do not involve complete plots so one can test the basic components themselves? I'm asking as I was working last week on a visualisation of collections of square matrices,  where I had to reinvent a 2D layout,  a colour scale guide,  axes,  etc. I'm curious to see if some parts of the new ggplot2 can be used independently,  basically. Thanks!" />
      <Message Id="1917615" ParentId="233" UserId="227097" Date="08/26/2011 22:44:08" Content="At this time,  guide grobs need to be constructed via ggplot plot building,  but you can easily extract the guide-box part.&#xD;&#xA;Here is an example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p1 &lt;- qplot(1:3,  1:3,  colour=1:3) + guides(colour = &quot;colorbar&quot;)&#xD;&#xA;p1.data &lt;- ggplot_build(p1)&#xD;&#xA;p1.plot &lt;- ggplot_gtable(p1,  p1.data)&#xD;&#xA;p1.guide &lt;- p1.plot$grobs[ [ which(p1.plot$layout$name == &quot;guide-box&quot;) ] ]&#xD;&#xA;&#xD;&#xA;grid.draw(p1.guide)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="1918863" ParentId="233" UserId="18970" Date="08/27/2011 06:28:53" Content="Thanks – is there a plan to extract this out of ggplot2 in the future? " />
      <Message Id="1919776" ParentId="233" UserId="227097" Date="08/27/2011 13:47:38" Content="Not sure but it is not difficult to write a wrapper function. `colorstripGrob` in gridExtra may be relevant." />
      <Message Id="1919933" ParentId="233" UserId="4196" Date="08/27/2011 14:42:01" Content="I think ideally a lot of this could would move into the scales package,  but before that can happen the gtable needs to be moved out into its own package." />
      <Message Id="1919975" ParentId="233" UserId="227097" Date="08/27/2011 14:50:25" Content="Will gtable be merged in grid package (or gridExtra) ?" />
      <Message Id="1920718" ParentId="233" UserId="4196" Date="08/27/2011 18:03:28" Content="Probably it's own package." />
      <Message Id="1922111" ParentId="233" UserId="18970" Date="08/28/2011 00:29:14" Content="Great – I'll have a look at the code in gtable and if I can I'll try to extract it in a self-contained independent package. &#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="234" Title="Fix/minor breaks">
    <Messages>
      <Message Id="0" ParentId="234" UserId="227097" Date="08/29/2011 14:23:42" Content="1. continuous scale now supports arbitral minor-break specification (as previous version).&#xD;&#xA;2. discrete scale does not show minor-breaks (as previous version)." />
    </Messages>
  </Topic>
  <Topic Id="235" Title="geom_bar with stat_identity cannot handle width parameter">
    <Messages>
      <Message Id="0" ParentId="235" UserId="227097" Date="08/31/2011 13:53:28" Content="```&#xD;&#xA;df &lt;- data.frame(expand.grid(x = LETTERS[ 1:3 ],  z = letters[ 1:3 ]),  y = runif(9))&#xD;&#xA;&#xD;&#xA;ggplot(df,  aes(x,  y,  fill = z)) + geom_bar(width = 0.1) # works&#xD;&#xA;ggplot(df,  aes(x,  y,  fill = z)) + geom_bar(stat = &quot;identity&quot;,  width = 0.1) # does not works&#xD;&#xA;ggplot(df,  aes(x,  y,  fill = z)) + geom_bar(aes(width = 0.1),  stat = &quot;identity&quot;) # ok for width in aes.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="236" Title="legend position in theme_bw">
    <Messages>
      <Message Id="0" ParentId="236" UserId="1023749" Date="09/03/2011 11:26:16" Content="opts(legend.position = &quot;none&quot;) seems to have no effect when it is combined with theme_bw(),  is this expected? I didn't see anything about it anywhere (mailing list,  github wiki,  R help,  website) and needed quite some time before figuring out what's happening." />
      <Message Id="1986515" ParentId="236" UserId="227097" Date="09/03/2011 12:38:42" Content="Please provide a reproducible example: http://gist.github.com/270442&#xD;&#xA;&#xD;&#xA;Maybe you are calling `theme_bw()` after `opts()`. In that case,  the setting in `opts()` is replaced by the default setting of `theme_bw()`." />
      <Message Id="1986986" ParentId="236" UserId="1023749" Date="09/03/2011 15:04:52" Content="Yes,  that was the problem. I didn't realize that legend position was part of the theme. I did try to change the order of the various components but apparently never tried opts() after theme_bw(). Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="237" Title="PositionHeap">
    <Messages>
      <Message Id="0" ParentId="237" UserId="250263" Date="09/14/2011 21:27:02" Content="A useful feature would be to stack elements horizontally or vertically,  if they share the same x and y values.&#xD;&#xA;&#xD;&#xA;Here's the file for it: https://gist.github.com/1217836" />
      <Message Id="2991965" ParentId="237" UserId="4196" Date="12/02/2011 16:06:01" Content="I'm going to put this off until 1.0.  Too much in this version already." />
      <Message Id="35939075" ParentId="237" UserId="4196" Date="02/24/2014 21:16:22" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="238" Title="Raster images support">
    <Messages>
      <Message Id="0" ParentId="238" UserId="348591" Date="09/22/2011 11:50:28" Content="It would be nice if geom_xxx(),  stat_xxx() could support raster images (grid.raster() is in R since 2.11), &#xD;&#xA;so that if geom_xxx(...,  raster = TRUE) the drawing is done on raster image.&#xD;&#xA;It would tremendously simplify the creation of size and speed-optimized plots that contains huge amounts of primitives (point plots etc)." />
      <Message Id="2166841" ParentId="238" UserId="4196" Date="09/22/2011 12:55:36" Content="This only matters for `geom_tile`,  right?" />
      <Message Id="2166966" ParentId="238" UserId="348591" Date="09/22/2011 13:14:49" Content="Not only. For example,  I have geom_point() plots with x*10^6 of points that differ in size and color. Currently I have to rasterize these points in Illustrator to have reasonable size and rendering speed." />
      <Message Id="2167327" ParentId="238" UserId="227097" Date="09/22/2011 13:55:27" Content="Sounds very interesting,  but probably it is not easy to implement. &#xD;&#xA;&#xD;&#xA;An easy workaround is to export the graphics in raster image file such as png,  jpeg,  bmp,  etc. &#xD;&#xA;But in this case,  axis,  guides,  labels,  and all other elements will be exported as raster image.&#xD;&#xA;" />
      <Message Id="2167532" ParentId="238" UserId="4196" Date="09/22/2011 14:12:59" Content="Hmmm,  I'd recommend using something other than geom_point for n = 10^6.  There's no easy way to rasterise displays in general in R." />
      <Message Id="2167706" ParentId="238" UserId="348591" Date="09/22/2011 14:28:59" Content="@hadley But that's what [ grid.raster() ](http://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.raster.html) should be about -- to facilitate selective rasterization in R. IIUC" />
      <Message Id="2167742" ParentId="238" UserId="4196" Date="09/22/2011 14:32:23" Content="grid.raster _renders_ rasters.  It doesn't generate them - i.e. there's no way to turn a scatterplot into a raster.  Turning a tile plot into a raster is relatively simple,  because tiles are basically equivalent to pixels." />
      <Message Id="2167878" ParentId="238" UserId="348591" Date="09/22/2011 14:45:03" Content="Oh I see. I just though that 'coercion' of any grid object to raster is already there. So there is no way to implement as.raster() by internally drawing vector objects to some temporary raster surface?" />
      <Message Id="2174079" ParentId="238" UserId="18970" Date="09/23/2011 00:17:57" Content="grid.cap kind of does that,  but it's suboptimal in many ways for this purpose. " />
      <Message Id="2702279" ParentId="238" UserId="348591" Date="11/10/2011 22:34:30" Content="R 2.14 has been released recently and it provides the new function dev.capture().&#xD;&#xA;I wonder if it's easier now to implement the requested functionality." />
      <Message Id="2991955" ParentId="238" UserId="4196" Date="12/02/2011 16:05:10" Content="Special case implemented in `geom_raster`.  I don't think it's appropriate to implement geoms in general." />
    </Messages>
  </Topic>
  <Topic Id="239" Title="coord_trans leads to a bad spacing on the x axis">
    <Messages>
      <Message Id="0" ParentId="239" UserId="446636" Date="09/27/2011 09:29:10" Content="    library(ggplot2)&#xD;&#xA;    set.seed(123456)&#xD;&#xA;    dataset &lt;- expand.grid(A = rnorm(3,  sd = 1),  B = rnorm(4,  mean = 2,  sd = 0.5),  n = seq_len(20))&#xD;&#xA;    dataset$Value &lt;- with(dataset,  rlnorm(nrow(dataset),  meanlog = A,  sdlog = B))&#xD;&#xA;&#xD;&#xA;    #works fine&#xD;&#xA;    ggplot(dataset,  aes(x = LETTERS[ factor(A) ],  y = Value)) + geom_boxplot() + facet_wrap(~B)&#xD;&#xA;    #coord_trans messed up the x axis&#xD;&#xA;    ggplot(dataset,  aes(x = LETTERS[ factor(A) ],  y = Value)) + geom_boxplot() + facet_wrap(~B) + coord_trans(y = &quot;log10&quot;)&#xD;&#xA;    #works fine&#xD;&#xA;    ggplot(dataset,  aes(x = LETTERS[ factor(A) ],  y = Value)) + geom_boxplot() + facet_wrap(~B) + scale_y_log10()&#xD;&#xA;&#xD;&#xA;sessionInfo()&#xD;&#xA;R version 2.13.1 (2011-07-08)&#xD;&#xA;Platform: i386-pc-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=Dutch_Belgium.1252  LC_CTYPE=Dutch_Belgium.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=Dutch_Belgium.1252 LC_NUMERIC=C                  &#xD;&#xA;[ 5 ] LC_TIME=Dutch_Belgium.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 8 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.8.9 proto_0.3-9.2 reshape_0.8.4 plyr_1.6      rj_0.5.5-4   &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] tools_2.13.1" />
      <Message Id="2210800" ParentId="239" UserId="4196" Date="09/27/2011 13:32:11" Content="Is that the same as #75? " />
      <Message Id="2213433" ParentId="239" UserId="446636" Date="09/27/2011 17:12:20" Content="Yes,  the only difference is that the continuous and discrete axes are switched." />
      <Message Id="2991535" ParentId="239" UserId="4196" Date="12/02/2011 15:41:34" Content="Fixed in the devel version." />
    </Messages>
  </Topic>
  <Topic Id="240" Title="show warning message when geom_line draws nothing">
    <Messages>
      <Message Id="0" ParentId="240" UserId="227097" Date="09/28/2011 00:22:30" Content="When x-variable is discrete,  geom_line draws nothing unless explicitly specifying &quot;group&quot; aes.&#xD;&#xA;This is one of FAQ,  but maybe it is good idea to show suggestion to use &quot;group&quot; aes (like &quot;bin_width in stat_bin&quot;)." />
    </Messages>
  </Topic>
  <Topic Id="241" Title="unable to plot series of small (in absolute value) numbers">
    <Messages>
      <Message Id="0" ParentId="241" UserId="81476" Date="09/28/2011 17:16:27" Content="I am trying to plot a log-likelihood of a Cauchy distribution,  which happens to have very small support over most of its range. Here is a sample of the data frame:&#xD;&#xA;&#xD;&#xA;	&gt; head(dframe)&#xD;&#xA;	          x           lx&#xD;&#xA;	1 -19.10405 4.103917e-54&#xD;&#xA;	2 -19.04375 4.359138e-54&#xD;&#xA;	3 -18.98344 4.630799e-54&#xD;&#xA;	4 -18.92314 4.919993e-54&#xD;&#xA;	5 -18.86284 5.227892e-54&#xD;&#xA;	6 -18.80253 5.555747e-54&#xD;&#xA;&#xD;&#xA;However,  when I try to plot this series in ggplot2,  via the following:&#xD;&#xA;&#xD;&#xA;    ggplot(dframe,  aes(x,  lx)) + layer(geom=&quot;line&quot;)&#xD;&#xA;&#xD;&#xA;I get a straight line,  and the peak in the likelihood is ignored:&#xD;&#xA;&#xD;&#xA;![ ggplot fail ](http://f.cl.ly/items/2E1E222u2N1v2U3I2R3X/Screen%20Shot%202011-09-28%20at%2012.10.05%20PM.png)&#xD;&#xA;&#xD;&#xA;Plotting this using the base graphics in R returns what is expected:&#xD;&#xA;&#xD;&#xA;![ plot ](http://f.cl.ly/items/0v153g2N0R3y2g3p0p3T/Screen%20Shot%202011-09-28%20at%2012.10.20%20PM.png)&#xD;&#xA;&#xD;&#xA;It turns out,  scaling the data by some large number (e.g. 1e20) allows it to be plotted by ggplot:&#xD;&#xA;&#xD;&#xA;![ ggplot win ](http://f.cl.ly/items/1m3T1p0m2v0w3a3z1n3a/Screen%20Shot%202011-09-28%20at%2012.09.54%20PM.png)" />
      <Message Id="2228223" ParentId="241" UserId="4196" Date="09/28/2011 18:03:38" Content="That's fixed in the devel version. " />
      <Message Id="2228226" ParentId="241" UserId="4196" Date="09/28/2011 18:03:45" Content="Thanks for the bug report though!" />
      <Message Id="2228230" ParentId="241" UserId="463252" Date="09/28/2011 18:03:52" Content="This appears to be a duplicate of Issue #190.  That issue was closed as fixed in the development version.  Could you check if this example works in the development version,  or give complete code for generating `dframe` so someone else could check it?" />
      <Message Id="2228975" ParentId="241" UserId="81476" Date="09/28/2011 19:00:41" Content="Right,  sorry. I did a quick search but did not come across it. Thanks -- will pull a fresh copy from the repo." />
      <Message Id="6869664" ParentId="241" UserId="207880" Date="07/10/2012 08:25:00" Content="Is this fix included in version 0.9.1?&#xA;I still have problems with very small numbers:&#xA;&#xA;``` &#xA;x &lt;- 1:100&#xA;y &lt;- rnorm(100,  1e-15,  1e-18)&#xA;df &lt;- data.frame(x=x, y=y)&#xA;df$z &lt;- rep(c('A', 'B'),  50)&#xA;ggplot(df,  aes(x, y)) + geom_line()   # fails&#xA;&#xA;df$y &lt;- df$y * 1e15&#xA;ggplot(df,  aes(x, y)) + geom_line()   # works&#xA;```" />
      <Message Id="6878617" ParentId="241" UserId="4196" Date="07/10/2012 15:19:27" Content="Works for me in the dev version.  It's not released yet." />
      <Message Id="6899747" ParentId="241" UserId="207880" Date="07/11/2012 07:15:58" Content="ok,  thanks. Will it be included in the next stable release?" />
    </Messages>
  </Topic>
  <Topic Id="242" Title="Error when qplot(geom=bar) contains NA">
    <Messages>
      <Message Id="0" ParentId="242" UserId="108840" Date="09/28/2011 21:50:29" Content="It seems geom=bar does not allow for NA values in the data&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;df_withNA&lt;-data.frame(value=c(runif(19), NA),  factor=sample(c(&quot;A&quot;, &quot;B&quot;),  size=20,  replace=TRUE))&#xD;&#xA;df_NoNA&lt;-data.frame(value=runif(20),  factor=sample(c(&quot;A&quot;, &quot;B&quot;),  size=20,  replace=TRUE))&#xD;&#xA;&#xD;&#xA;qplot(x=factor,  y=value,  data=df_NoNA,  geom=&quot;bar&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;qplot(x=factor,  y=value,  data=df_withNA,  geom=&quot;bar&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;one then gets the error:&#xD;&#xA;```&#xD;&#xA;Erreur dans if (!is.null(data$ymin) &amp;&amp; !all(data$ymin == 0)) warning(&quot;Stacking not well defined when ymin != 0&quot;,   :&#xD;&#xA; valeur manquante là où TRUE / FALSE est requis&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;PROPOSED SOLUTION&#xD;&#xA;This is most likely to be due to the fact that within the calls,   pmin() is used without the na.rm=TRUE argument.&#xD;&#xA;&#xD;&#xA;Indeed,  if one changes in geom-bar.r&#xD;&#xA;```ymin = pmin(y,  0),  ymax = pmax(y,  0), ```&#xD;&#xA;&#xD;&#xA;to&#xD;&#xA;```ymin = pmin(y,  0,  na.rm=TRUE),  ymax = pmax(y,  0,  na.rm=TRUE)```&#xD;&#xA;&#xD;&#xA;the bug does not appear anymore. " />
    </Messages>
  </Topic>
  <Topic Id="243" Title="stat_bin2d() drops first factor level">
    <Messages>
      <Message Id="0" ParentId="243" UserId="737298" Date="09/29/2011 18:44:08" Content="&#xD;&#xA;```R&#xD;&#xA;df&lt;-data.frame(x=factor(sample(letters, 1000, replace=TRUE)), y=factor(sample(1:5, 1000, replace=TRUE)))&#xD;&#xA;&#xD;&#xA;# Factor levels 'a' and '1' are not shown&#xD;&#xA;ggplot(df, aes(x, y))+stat_bin2d()&#xD;&#xA;&#xD;&#xA;# This is the correct plot&#xD;&#xA;ggplot(ddply(df, .(x, y), summarize, n=length(x)), aes(x, y, fill=n))+geom_tile()&#xD;&#xA;&#xD;&#xA;# Note that stat_bin does the right thing&#xD;&#xA;ggplot(df, aes(x))+stat_bin()&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Possibly related to issue 178? https://github.com/hadley/ggplot2/issues/178" />
      <Message Id="2991524" ParentId="243" UserId="4196" Date="12/02/2011 15:40:31" Content="Also make sure to check out `count` and `geom_raster` if you're doing this for big plots. See also [ densityVis ](https://github.com/hadley/densityvis) where I've been working on the underlying data transforms more rigorously.  Hopefully will incorporate into ggplot2 by 1.0" />
    </Messages>
  </Topic>
  <Topic Id="244" Title="[ 0.90 ] histogram bug with NA's">
    <Messages>
      <Message Id="0" ParentId="244" UserId="216319" Date="09/30/2011 18:58:11" Content="&gt; x &lt;- as.factor(c(1, 2, NA, 3, 4))&#xD;&#xA;&gt; qplot(x)&#xD;&#xA;Error in if (min(r) &lt; min(b)) b &lt;- c(b[ 1 ] - bd,  b) : &#xD;&#xA;  missing value where TRUE/FALSE needed" />
      <Message Id="2991334" ParentId="244" UserId="4196" Date="12/02/2011 15:28:31" Content="Don't know what fixed it,  but it's fine now." />
    </Messages>
  </Topic>
  <Topic Id="245" Title="Incorrrect scaling with time series data in &quot;develop&quot; branch.">
    <Messages>
      <Message Id="0" ParentId="245" UserId="1115020" Date="10/10/2011 00:55:47" Content="I was using the &quot;develop&quot; branch because of its many bug fixes,  but noticed that for time series data,  the scaling does not match the data. It appears that the lower limit is always set to the date equivalent of zero,  e.g. Sys.time() - as.numeric(Sys.time()).&#xD;&#xA;&#xD;&#xA;A minimal example of the issue is&#xD;&#xA;&gt; ggplot(data = data.frame(x = Sys.time() + 1:10,  y = rnorm(10)),  mapping = aes(x = x ,  y = y)) + geom_point()&#xD;&#xA;&#xD;&#xA;In the &quot;develop&quot; branch all the points are placed on a vertical line,  whereas in the &quot;master&quot; branch they are spaced out over the entire plot." />
      <Message Id="2512971" ParentId="245" UserId="227097" Date="10/25/2011 04:40:48" Content="This is due to the `zero_range` (in scales package) for inferring the breaks of scale (`scale_breaks`).&#xD;&#xA;I have no idea about the rationale of these code. Is this necessary?" />
      <Message Id="2857442" ParentId="245" UserId="1115020" Date="11/24/2011 01:59:59" Content="Thanks kohske.&#xD;&#xA;Moved to https://github.com/hadley/scales/issues/6" />
    </Messages>
  </Topic>
  <Topic Id="246" Title="“Error: position_stack requires constant width”">
    <Messages>
      <Message Id="0" ParentId="246" UserId="7129" Date="10/13/2011 01:10:31" Content="From http://stackoverflow.com/questions/7492250/trying-to-plot-simple-histogram-in-ggplot2-gives-error-position-stack-requires:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; qplot(c(0, 0, 0, 0, 1e12))&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;Error: position_stack requires constant width&#xD;&#xA;&gt; qplot(c(0, 0, 0, 0, 1e12),  binwidth=1e12/30)&#xD;&#xA;Error: position_stack requires constant width&#xD;&#xA;&gt; qplot(c(0, 0, 0, 0, 1e12),  binwidth=1e10)  # works&#xD;&#xA;&gt; qplot(c(0, 0, 0, 0, 1e12),  binwidth=1e11)  # works&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="247" Title="Data with alot of zeros,  a boxplot and scale log2 fail">
    <Messages>
      <Message Id="0" ParentId="247" UserId="86275" Date="10/17/2011 19:51:35" Content="Hi there.&#xD;&#xA;When I have a dataframe,  that contains alot of zeros so all quartiles are zero and no outliers exists,  ggplot2 fails when trying to run it with a log2 scale. Without the log2 scale it works fine. I'm running `R version 2.13.2` and `ggplot2 Version: 0.8.9`.&#xD;&#xA;&#xD;&#xA;# Minimal Example:&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    &#xD;&#xA;    DF &lt;- data.frame(&#xD;&#xA;      time = factor(c(1, 2, 1, 2, 1, 2, 1, 2, 1, 2)), &#xD;&#xA;      value = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 10))&#xD;&#xA;    &#xD;&#xA;    ggplot(DF,  aes(time,  value)) + geom_boxplot() + scale_y_log2()&#xD;&#xA;&#xD;&#xA;# Error Message (parts in german):&#xD;&#xA;    Fehler in if (any(outliers)) stats[ c(1,  5) ] &lt;- range(y[ !outliers ],  na.rm = TRUE) : &#xD;&#xA;      Fehlender Wert,  wo TRUE/FALSE nötig ist" />
      <Message Id="2433886" ParentId="247" UserId="4196" Date="10/17/2011 19:55:24" Content="What behaviour do you expect?  Log scales don't work with zeros." />
      <Message Id="2434235" ParentId="247" UserId="86275" Date="10/17/2011 20:20:32" Content="What I found so far: 2^x can never be zero (&quot;simple&quot; math). So it `outliers` in `StatBoxplot-&gt;calculate`  is `NA NA NA NA NA`.&#xD;&#xA;&#xD;&#xA;So this is more a general question: How to deal with zeros in set that should be logarithmic?" />
      <Message Id="2434857" ParentId="247" UserId="463252" Date="10/17/2011 21:10:28" Content="```r&#xD;&#xA;&gt; log2(0)&#xD;&#xA;[ 1 ] -Inf&#xD;&#xA;```&#xD;&#xA;It is impossible to draw a finite scale that goes to infinity.  If a set has zeros,  then a logarithmic transformation does not make any sense. Perhaps with context,  an alternative can be suggested,  but this is not a bug.  Consider posting on the ggplot mailing list or r-help list for general discussion of this problem." />
      <Message Id="2438994" ParentId="247" UserId="86275" Date="10/18/2011 07:52:50" Content="I see that this is more a math problem than a ggplot2 problem. But one thing,  that could be improved is the error-message to know,  that log2(0) is not a good idea. The current error message is quite cryptic (`Error in if (any(outliers)) stats[ c(1,  5) ] &lt;- range(y[ !outliers ],  na.rm = TRUE)`)" />
    </Messages>
  </Topic>
  <Topic Id="248" Title="Variable scope is global when it should be local">
    <Messages>
      <Message Id="0" ParentId="248" UserId="847626" Date="10/17/2011 21:07:54" Content="Arguments of aes are apparently evaluated in global environment (!!!) not local one:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(a=1:10, b=10:1)&#xD;&#xA;&#xD;&#xA;n&lt;-3&#xD;&#xA;&#xD;&#xA;n&lt;-3; local({ n&lt;-2; ggplot(df) + geom_line(aes(x=a, y=b, group=cut(a, n))) })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Has ***3*** segments (global value of n),  when it should have 2 (local value of n).&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="2518729" ParentId="248" UserId="847626" Date="10/25/2011 15:36:03" Content="Thank you for your comment.  But the case I described is not like what you&#xD;&#xA;show below.&#xD;&#xA;&#xD;&#xA;My ggplot example is:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;n&lt;-3; local({ n&lt;-2; ggplot(df) + geom_line(aes(x=a, y=b, group=cut(a, n))) })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The following gives the same result:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;n&lt;-3; local({ n&lt;-2; print(ggplot(df) +&#xD;&#xA;geom_line(aes(x=a, y=b, group=cut(a, n)))) })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;In these cases,  ggplot is using the value n=3 (global),  not n=2 (local).&#xD;&#xA;The equivalent outside of ggplot is something like:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;n&lt;-3; local({ n&lt;-2; print(n) })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;or&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(a=1:5, b=(2:6)^3)&#xD;&#xA;n&lt;- 3; local({ n&lt;-2;lm(b~poly(a, n, raw=T), df) })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;In these cases,  the local value of n,  2,  is used,  not the global value,  3.&#xD;&#xA;              -s&#xD;&#xA;" />
      <Message Id="2990974" ParentId="248" UserId="4196" Date="12/02/2011 15:02:41" Content="I think this is an inherent property of how ggplot2 works - each layer does not capture scope independently.  Evaluation of all arguments should occur in the environment where the __plot__ is defined." />
      <Message Id="2998042" ParentId="248" UserId="847626" Date="12/03/2011 00:47:00" Content="I don't follow your explanation.  In the following case:&#xD;&#xA;&#xD;&#xA;n&lt;-3; local({ n&lt;-2; ggplot(df) + geom_line(aes(x=a, y=b, group=cut(a, n))) })&#xD;&#xA;&#xD;&#xA;Why would the 'n' in 'cut(a, n)' look at the global environment?  That is just a violation of the basic concept of scope in R.  Compare the 'lm' case I showed:&#xD;&#xA;&#xD;&#xA;     n&lt;- 3; local({ n&lt;-2;lm(b~poly(a, n, raw=T), df) })&#xD;&#xA;&#xD;&#xA;The ggplot case,  like the lm case,  should be evaluated in the following nested environments:&#xD;&#xA;&#xD;&#xA;  Global environment (where n=3)&#xD;&#xA;      Local environment (where n=2)&#xD;&#xA;          df environment (where n is not defined,  so the next environment up should be used)&#xD;&#xA;&#xD;&#xA;I will be happy to work on a solution for this.  Please don't close it as fixed." />
      <Message Id="2999175" ParentId="248" UserId="227097" Date="12/03/2011 05:19:52" Content="By default,  the evaluation environment is set in https://github.com/hadley/ggplot2/blob/master/R/plot.r#L25&#xD;&#xA;irrespective of where the plot is defined or called.&#xD;&#xA;so,  if the variable is missing in the data.frame,  then the global env is inspected.&#xD;&#xA;&#xD;&#xA;If someone wants to change this behavior,  try:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;m &lt;- 3&#xD;&#xA;df &lt;- data.frame(a=1:10, b=10:1)&#xD;&#xA;local({ &#xD;&#xA;	m &lt;- 2; &#xD;&#xA;	ggplot(df,  environment = new.env()) + geom_line(aes(x=a,  y=b,  group=cut(a,  m)))&#xD;&#xA;	 }&#xD;&#xA;	)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Of course,  it is possible to change the default behavior so that ggplot also inspect the local environment where the plot is defined.&#xD;&#xA;But it is not a simple problem which policy is better,  since the environment of plot and environment of each layer could be different.&#xD;&#xA;" />
      <Message Id="3000679" ParentId="248" UserId="4196" Date="12/03/2011 13:43:53" Content="Sorry,  I got in a bit of a ticket closing frenzy.  I think a simple fix is to replace `globalenv()` with `parent.frame()`  to at least capture the environment where `ggplot()` is called.  " />
      <Message Id="3003942" ParentId="248" UserId="227097" Date="12/03/2011 23:48:02" Content="Or,  maybe environment of `aes()` is better.&#xD;&#xA;Consider this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;m &lt;- -1&#xD;&#xA;n &lt;- -2&#xD;&#xA;&#xD;&#xA;f1 &lt;- function() { &#xD;&#xA;	m &lt;- 1&#xD;&#xA;	geom_point(aes(x,  y+m),  color = &quot;red&quot;)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;f2 &lt;- function() { &#xD;&#xA;	n &lt;- 2&#xD;&#xA;	geom_point(aes(x,  y+n),  color = &quot;blue&quot;)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;lay1 &lt;- f1()&#xD;&#xA;lay2 &lt;- f2()&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(x=1:3,  y=1:3)&#xD;&#xA;ggplot(df) + lay1 + lay2 # m = -1,  n = -2,  i.e.,  global ones.&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3016850" ParentId="248" UserId="4196" Date="12/05/2011 13:22:32" Content="Oh,  I like that even better.  Especially since if a layer doesn't have an aes call,  then it doesn't need any special help.&#xD;&#xA;&#xD;&#xA;That reminds me that I've been wanting to make `aes` more like `plyr::.` for a while.  `.` captures the current environment,  and offers a much more complete API for coercing to and from different data types." />
    </Messages>
  </Topic>
  <Topic Id="249" Title="geom_linerange doesn't work with coord_flip for small values">
    <Messages>
      <Message Id="0" ParentId="249" UserId="86978" Date="10/29/2011 19:02:48" Content="I'm trying to make a Cleveland dot plot,  but `geom_linerange` doesn't seem to show up when all of these are true:&#xD;&#xA;&#xD;&#xA; * `ymax` is small,  &lt; ~.25&#xD;&#xA; * the x-axis is a factor&#xD;&#xA; * `coord_flip` is used&#xD;&#xA;&#xD;&#xA;This is with the development branch.&#xD;&#xA;&#xD;&#xA;These three graphs illustrate the problem.&#xD;&#xA;&#xD;&#xA;Factor on x-axis: OK&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(xval=factor((1:25)/50),  yval=(1:25)/50)&#xD;&#xA;ggplot(dat,  aes(x=xval,  y=yval)) + geom_point() +&#xD;&#xA;    geom_linerange(aes(ymax=yval),  ymin=0)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Factor on x-axis with coord_flip():  not OK. `geom_linerange` doesn't work for less than approximately .25 &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(xval=factor((1:25)/50),  yval=(1:25)/50)&#xD;&#xA;ggplot(dat,  aes(x=xval,  y=yval)) + geom_point() +&#xD;&#xA;    geom_linerange(aes(ymax=yval),  ymin=0) +&#xD;&#xA;    coord_flip()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Continuous x-axis with coord_flip(): OK&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(xval=(1:25)/50,  yval=(1:25)/50)&#xD;&#xA;ggplot(dat,  aes(x=xval,  y=yval)) + geom_point() +&#xD;&#xA;    geom_linerange(aes(ymax=yval),  ymin=0) +&#xD;&#xA;    coord_flip()&#xD;&#xA;```" />
      <Message Id="2567330" ParentId="249" UserId="86978" Date="10/29/2011 22:32:09" Content="Also,  the same thing happens with  `geom_segment`:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(xval=factor((1:25)/50),  yval=(1:25)/50)&#xD;&#xA;ggplot(dat,  aes(x=xval,  xend=xval,  y=yval,  yend=0)) + geom_point() +&#xD;&#xA;    geom_segment() +&#xD;&#xA;    coord_flip()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Oddly,  it seems to happen only for lines that run parallel to the (horizontal) y axis. Notice that the only missing line in this graph is the perfectly horizontal one:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(xval=factor((1:25)/50),  yval=(1:25)/50)&#xD;&#xA;ggplot(dat,  aes(x=xval,  xend=&quot;0.2&quot;,  y=yval,  yend=.1)) + geom_point() +&#xD;&#xA;    geom_segment() +&#xD;&#xA;    coord_flip()&#xD;&#xA;```" />
      <Message Id="2571272" ParentId="249" UserId="86978" Date="10/30/2011 20:13:08" Content="One more piece of information: the minimum visible line length seems to be related to the number of items on the x axis. With 50 items,  the minimum length is around 0.5.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(xval=factor((1:50)/50),  yval=(1:50)/50)&#xD;&#xA;ggplot(dat,  aes(x=xval,  y=yval)) + geom_point() +&#xD;&#xA;    geom_linerange(aes(ymax=yval),  ymin=0) +&#xD;&#xA;    coord_flip()&#xD;&#xA;```" />
      <Message Id="2990943" ParentId="249" UserId="4196" Date="12/02/2011 15:00:07" Content="Also fixed in 3fd4fabff0cbfc83191e240ced86b9252d1ff359.  Let me know if you see problems in new places." />
    </Messages>
  </Topic>
  <Topic Id="250" Title="Variant on geom_crossbar">
    <Messages>
      <Message Id="0" ParentId="250" UserId="4196" Date="10/30/2011 22:43:51" Content="That just has the central bar.  Maybe call it geom_central? (suggestion by David Cooper)" />
      <Message Id="35939223" ParentId="250" UserId="4196" Date="02/24/2014 21:16:59" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="251" Title="Adding scale_y_continuous has no effect under certain conditions">
    <Messages>
      <Message Id="0" ParentId="251" UserId="86978" Date="10/31/2011 16:26:46" Content="With the development branch,  I've had problems adding scale_y_continuous to a saved ggplot object. I had a hard time figuring out how to consistently replicate the bug,  because it depends whether the object has already been printed.  To replicate,  the commands below have to be run in the order given.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# Random data&#xD;&#xA;dat &lt;- data.frame(x=rnorm(20),  y=rnorm(20))&#xD;&#xA;&#xD;&#xA;# Make plot object&#xD;&#xA;ps &lt;- ggplot(dat,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;&#xD;&#xA;# Print it&#xD;&#xA;ps&#xD;&#xA;&#xD;&#xA;# Adding scale_y_continuous has no effect&#xD;&#xA;ps + scale_y_continuous(breaks=c(.1, .2, .5)) &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But if you skip the printing of ps by itself,  adding the scale works.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ps &lt;- ggplot(dat,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;&#xD;&#xA;# Adding scale_y_continuous works this time&#xD;&#xA;ps + scale_y_continuous(breaks=c(.1, .2, .5)) &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If,  instead of printing &quot;ps&quot; by itself,  you add a scale with no parameters set,  it doesn't mess thing up for later use with a scale.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ps &lt;- ggplot(dat,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;&#xD;&#xA;# Add a scale with no options set&#xD;&#xA;ps + scale_y_continuous() &#xD;&#xA;&#xD;&#xA;# Adding scale_y_continuous works&#xD;&#xA;ps + scale_y_continuous(breaks=c(.1, .2, .5)) &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="2590968" ParentId="251" UserId="227097" Date="11/01/2011 14:36:24" Content="see #253" />
    </Messages>
  </Topic>
  <Topic Id="252" Title="alpha doesn't work for geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="252" UserId="86978" Date="10/31/2011 20:11:29" Content="This is with the development branch. Here's an example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=sample(letters[ 1:3 ], 20, replace=TRUE),  y=rnorm(20))&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_boxplot(alpha=.3)&#xD;&#xA;```" />
      <Message Id="2591264" ParentId="252" UserId="227097" Date="11/01/2011 14:59:50" Content="see #254" />
      <Message Id="2990782" ParentId="252" UserId="4196" Date="12/02/2011 14:44:58" Content="This is by design.  For geoms with both colour and fill,  alpha only affects fill.  (You can argue about whether or not that's a good idea,  but that's the way it is :/)" />
      <Message Id="2992434" ParentId="252" UserId="86978" Date="12/02/2011 16:43:03" Content="That makes sense to me. I'm not sure if you're responding to my bug report or to Kohske's comments... at the time of this bug report,  alpha just didn't work at all." />
    </Messages>
  </Topic>
  <Topic Id="253" Title="fix a bug when overwriting a new scale.">
    <Messages>
      <Message Id="0" ParentId="253" UserId="227097" Date="11/01/2011 14:35:25" Content="fix for issue #251" />
      <Message Id="2594206" ParentId="253" UserId="4196" Date="11/01/2011 18:49:21" Content="Perfect - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="254" Title="fix a bug (?): support transparency for the filled area of geom_boxplot. (#252)">
    <Messages>
      <Message Id="0" ParentId="254" UserId="227097" Date="11/01/2011 14:59:35" Content="alpha support may be somewhat incoherent.&#xD;&#xA;alpha does not affect the lines of geom_rect,  but it affects the lines of geom_line.&#xD;&#xA;" />
      <Message Id="2594193" ParentId="254" UserId="4196" Date="11/01/2011 18:48:44" Content="Is this the correct fix?  The principle with alpha is that it is applied to fill if a geom uses it,  otherwise it's applied to colour." />
      <Message Id="2597322" ParentId="254" UserId="227097" Date="11/01/2011 22:53:56" Content="Ok,  I get the principle. So I'will fix this patch. " />
    </Messages>
  </Topic>
  <Topic Id="255" Title="vars in aes() which aren't present in secondary data frame cause problems">
    <Messages>
      <Message Id="0" ParentId="255" UserId="86978" Date="11/01/2011 21:47:57" Content="I'm not totally sure if this is a bug,  or if it's expected behavior.&#xD;&#xA;&#xD;&#xA;Suppose you define the aes mapping ymin=y+ci,  and then add another geom that uses a second data frame which doesn't have a &quot;ci&quot; column. Then it fails,  even if ymin is not used by that geom. This is shown in the example here:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# Primary data source&#xD;&#xA;d1 &lt;- data.frame(x=1:10,  y=rnorm(10),  ci=(1:10)/10)&#xD;&#xA;&#xD;&#xA;# Add some secondary data&#xD;&#xA;d2 &lt;- data.frame(x=2*(1:5),  y=rnorm(5))&#xD;&#xA;&#xD;&#xA;# This fails&#xD;&#xA;ggplot(d1,  aes(x=x,  y=y,  ymin=y-ci,  ymax=y+ci)) + &#xD;&#xA;    geom_ribbon(fill=&quot;grey80&quot;) +&#xD;&#xA;    geom_line() +&#xD;&#xA;    geom_line(data=d2,  colour=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;# Error in eval(expr,  envir,  enclos) : object 'ci' not found&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;A workaround is to move the ymin and ymax inside of geom_ribbon:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(d1,  aes(x=x,  y=y)) + &#xD;&#xA;    geom_ribbon(aes(ymin=y-ci,  ymax=y+ci),  fill=&quot;grey80&quot;) +&#xD;&#xA;    geom_line() +&#xD;&#xA;    geom_line(data=d2,  colour=&quot;red&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This isn't that difficult in this example,  but in practice it can be kind of tedious and require lots of redundant code. I've made some complicated graphs with a lot of text annotations and I've to specify these mappings over and over.&#xD;&#xA;" />
      <Message Id="2601320" ParentId="255" UserId="4196" Date="11/02/2011 09:44:40" Content="This is expected behaviour - you might find the `inherit.aes` argument useful for your problem." />
    </Messages>
  </Topic>
  <Topic Id="256" Title="Median lines don't appear in geom_boxplot with coord_flip">
    <Messages>
      <Message Id="0" ParentId="256" UserId="86978" Date="11/02/2011 02:36:22" Content="In the development branch,  the median lines don't appear in geom_boxplot when the following are both true:&#xD;&#xA;&#xD;&#xA; * the y range is large&#xD;&#xA; * coord_flip() is used&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;This works:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=sample(LETTERS[ 1:4 ], 40, replace=TRUE),  y=rnorm(40))&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=x)) +&#xD;&#xA;  geom_boxplot() + coord_flip()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But if the y values are scaled up by 100,  the medians don't appear:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat$y &lt;- dat$y * 100&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=x)) +&#xD;&#xA;  geom_boxplot() + coord_flip()&#xD;&#xA;```" />
      <Message Id="2617404" ParentId="256" UserId="227097" Date="11/03/2011 14:12:02" Content="I found where the bug occurs,  but at the moment I have no idea how to fix it...&#xD;&#xA;Maybe coord-flip is too complicated." />
      <Message Id="2617465" ParentId="256" UserId="227097" Date="11/03/2011 14:18:44" Content="A workaround is redefine&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;is.linear.flip &lt;- function(coord) TRUE&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Should flip be linear coordinate?&#xD;&#xA;" />
      <Message Id="2990790" ParentId="256" UserId="4196" Date="12/02/2011 14:45:38" Content="I'm pretty sure that you're right - `coord_flip` should be linear." />
    </Messages>
  </Topic>
  <Topic Id="257" Title="Incorrect values with stacking and log scales">
    <Messages>
      <Message Id="0" ParentId="257" UserId="86978" Date="11/04/2011 04:04:40" Content="This is with the development branch. I just tried making a stacked area graph with a log y scale,  and found that the plotted values were way,  way off. It was only after I tried it that I realized that stacking with a log scale either makes no sense,  or will be very misleading -- though I personally can't rule out the possibility that _some_ stacked log-scale graph could make sense.&#xD;&#xA;&#xD;&#xA;At any rate,  it seems to me that ggplot should (A) give a warning or error when you attempt this,  and (B) not make a graph with incorrect values.&#xD;&#xA;&#xD;&#xA;In this example,  I have data that grows exponentially. The largest summed value is 4e+10. It shows fine with a linear-scale. When I add the log scale,  the growth is a straight line,  which is correct,  but the y values are wrong -- it shows the largest value is about 1e+40. It looks like the lowest piece of the stack is scaled correctly,  then the subsequent pieces are drawn with the same scaling,  instead of being scaled properly for their positions in the stack.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(group=rep(LETTERS[ 1:4 ],  each=10), &#xD;&#xA;                  x=rep(1:10, 4), &#xD;&#xA;                  y=rep(10^(1:10), 4))&#xD;&#xA;&#xD;&#xA;# Linear scale&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=group)) + geom_area()&#xD;&#xA;&#xD;&#xA;# Log scale&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=group)) + geom_area() + scale_y_log10()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;The same happens with geom_bar:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat,  aes(x=factor(x),  y=y,  fill=group)) + geom_bar()&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=factor(x),  y=y,  fill=group)) + geom_bar() + scale_y_log10()&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="2990745" ParentId="257" UserId="4196" Date="12/02/2011 14:41:22" Content="I think you're missing something about scale transformations. The following two plots should look identical apart from the labels on the y-axis:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=group)) + geom_area() + scale_y_log10()&#xD;&#xA;ggplot(dat,  aes(x=x,  y= log10(y),  fill=group)) + geom_area()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The real problem here is basically the same as the last plot - the base line (which is effectively _set_ not mapped),  is not being scaled.  It really should be placed at -Infinity.  &#xD;&#xA;&#xD;&#xA;This requires a rewrite of how geoms and scales interact,  so I'm putting off until 1.0" />
      <Message Id="35939290" ParentId="257" UserId="4196" Date="02/24/2014 21:17:15" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="258" Title="geom_segment doesn't work properly with log scales">
    <Messages>
      <Message Id="0" ParentId="258" UserId="86978" Date="11/04/2011 05:05:25" Content="This might be two bugs.&#xD;&#xA;&#xD;&#xA;I was trying to add line segments to a graph with log scales,  but instead of putting it at my specified coordinates,  it puts them at 10 to the power of the coordinate. For example,  if I specify x=1 and xend=3,  it draws a line from x=10 to xend=1000.&#xD;&#xA;&#xD;&#xA;Here's an example using a dataset from the MASS library:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(MASS)&#xD;&#xA;&#xD;&#xA;# Diagonal line&#xD;&#xA;ggplot(Animals,  aes(x=body,  y=brain)) +&#xD;&#xA;    geom_point() +&#xD;&#xA;    geom_segment(x=1,  xend=3,  y=1,  yend=3) +&#xD;&#xA;    scale_x_log10() + scale_y_log10()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It also seems to me that the expected behavior of geom_segment in this case isn't clearly specified: should it be visually straight (useful for annotations),  or should it be &quot;numerically straight&quot; and thus visually curved?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Potential bug 2: I tried creating my own minimal data set to illustrate the problem,  but I can't even get it to draw the line segment! I tried figuring out what the difference is between this data set and the one above,  but I made no progress.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;set.seed(101)&#xD;&#xA;dat &lt;- data.frame(x=10^rnorm(20, 2, 1),  y=10^rnorm(20, 2, 1))&#xD;&#xA;&#xD;&#xA;# Works&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) +&#xD;&#xA;    geom_point() + &#xD;&#xA;    scale_x_log10() +&#xD;&#xA;    scale_y_log10() &#xD;&#xA;&#xD;&#xA;# Doesn't work after adding segment&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) +&#xD;&#xA;    geom_point() + &#xD;&#xA;    geom_segment(x=1,  xend=3,  y=1,  yend=3) +&#xD;&#xA;    scale_x_log10() +&#xD;&#xA;    scale_y_log10() &#xD;&#xA;&#xD;&#xA;#Error in data.frame(evaled,  PANEL = data$PANEL) : &#xD;&#xA;#  arguments imply differing number of rows: 0,  20&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="2627448" ParentId="258" UserId="86978" Date="11/04/2011 05:33:36" Content="Oddly,  if I put the coordinates in a data frame,  give that data frame to geom_segment,  and use aes() to get the coordinates,  it uses the correct numerical coordinates.&#xD;&#xA;&#xD;&#xA;This is the same as the previous,  with the addition of a blue segment that draws from the data frame `myline`.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;myline &lt;- data.frame(x=1,  xend=100,  y=1,  yend=10)&#xD;&#xA;&#xD;&#xA;ggplot(Animals,  aes(x=body,  y=brain)) +&#xD;&#xA;    geom_point() +&#xD;&#xA;    geom_segment(x=1,  xend=3,  y=1,  yend=3) +&#xD;&#xA;    geom_segment(data=myline,  aes(x=x,  xend=xend,  y=y,  yend=yend),  colour=&quot;blue&quot;) +&#xD;&#xA;    scale_x_log10() + scale_y_log10()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The line is straight in visual space,  which suits my purposes,  but this might be undesirable in some cases." />
      <Message Id="2990665" ParentId="258" UserId="4196" Date="12/02/2011 14:34:16" Content="If you don't want a straight line in visual space,  use `coord_trans`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x = 1:11,  y = 10 ^ (0:10))&#xD;&#xA;cbase &lt;- qplot(x,  y,  data = df) + coord_trans(y = &quot;log10&quot;)&#xD;&#xA;&#xD;&#xA;# All of these cases seem to work ok&#xD;&#xA;cbase + geom_line()&#xD;&#xA;cbase + geom_segment(aes(xend = 1,  yend = y))&#xD;&#xA;cbase + geom_segment(aes(yend = y),  xend = 1)&#xD;&#xA;cbase + geom_segment(aes(xend = x,  yend = 1))&#xD;&#xA;cbase + geom_segment(aes(xend = x),  yend = 1)&#xD;&#xA;&#xD;&#xA;cbase + geom_segment(aes(xend = 1,  yend = y / 10))&#xD;&#xA;cbase + geom_segment(aes(yend = y / 10),  xend = 1)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The problem is with scale_log10:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;sbase &lt;- qplot(x,  y,  data = df) + scale_y_log10()&#xD;&#xA;&#xD;&#xA;sbase + geom_segment(aes(xend = x,  yend = 1))&#xD;&#xA;sbase + geom_segment(aes(xend = x),  yend = 1)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Set aesthetic values are not scaled/transformed. &#xD;&#xA;&#xD;&#xA;I don't think this is a bug,  because it's analogous to `geom_segment(colour = &quot;red&quot;)` where colour definitely should not be scaled. Normally the raw and transformed position scales align so you don't notice,  but I'm reasonably certain that the current behaviour is correct and consistent." />
    </Messages>
  </Topic>
  <Topic Id="259" Title="floor_date must go!">
    <Messages>
      <Message Id="0" ParentId="259" UserId="111939" Date="11/09/2011 22:58:06" Content="There's a `floor_date` in `ggplot2`,  which hides the `floor_date` in `lubridate`,  and in an incompatible way:&#xD;&#xA;&#xD;&#xA;```&gt; ft.local[ 1:3 ]&#xD;&#xA;[ 1 ] &quot;2008-09-14 08:00:00 GMT+4&quot; &quot;2008-09-14 09:00:00 GMT+4&quot; &quot;2008-09-14 10:00:00 GMT+4&quot;&#xD;&#xA; ]&gt; floor_date(ft.local[ 1:3 ],  &quot;month&quot;)&#xD;&#xA;[ 1 ] &quot;2008-09-01&quot; &quot;2008-09-01&quot; &quot;2008-09-01&quot;&#xD;&#xA; ]&gt; floor_date(ft.local[ 1:3 ],  &quot;day&quot;)&#xD;&#xA;[ 1 ] &quot;6032-02-05&quot; &quot;6041-12-14&quot; &quot;6051-10-23&quot;```&#xD;&#xA;&#xD;&#xA;I recommend nuking the `floor_date` (and `ceiling_date`) from `ggplot2`.  Add a dependency on `lubridate` if necessary.&#xD;&#xA;" />
      <Message Id="2689033" ParentId="259" UserId="4196" Date="11/09/2011 23:04:46" Content="This should be fixed in the devel version." />
      <Message Id="2691442" ParentId="259" UserId="111939" Date="11/10/2011 04:43:01" Content="Aha,  great,  `floor_date` is now internal?  That should solve the issue,  but I'm curious why not depend on `lubridate` when similar functionality is provided there,  and better?" />
      <Message Id="2695306" ParentId="259" UserId="4196" Date="11/10/2011 13:46:51" Content="Because lubridate affects the global workspace by modifying the base definitions of + etc. " />
    </Messages>
  </Topic>
  <Topic Id="260" Title="Stat computation should proceed regardless of errors">
    <Messages>
      <Message Id="0" ParentId="260" UserId="4196" Date="11/14/2011 14:39:00" Content="Ensure that it's wrapped in `try` and there is an appropriate test." />
    </Messages>
  </Topic>
  <Topic Id="261" Title="Error if axis breaks go out of range">
    <Messages>
      <Message Id="0" ParentId="261" UserId="86978" Date="11/15/2011 01:29:52" Content="In the devel branch,  ggplot gives an error if the breaks on an axis go out of the plotting range.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=1:3,  y=1:3)&#xD;&#xA;&#xD;&#xA;# All breaks within range: OK&#xD;&#xA;ggplot(dat,  aes(x=x, y=y)) + geom_point() +&#xD;&#xA;    scale_y_continuous(breaks=1:3,  labels=1:3)&#xD;&#xA;&#xD;&#xA;# Breaks go out of range: not OK&#xD;&#xA;ggplot(dat,  aes(x=x, y=y)) + geom_point() +&#xD;&#xA;    scale_y_continuous(breaks=1:4,  labels=1:4)&#xD;&#xA;# Error in scale_labels.continuous(scale) : &#xD;&#xA;#  Breaks and labels are different lengths&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This can cause problems in cases where you want tell it to make tick marks,  say,  every 10,  without being super careful about the actual range shown in the graph. This happens especially when there are manually-specified labels to go with the breaks.&#xD;&#xA;&#xD;&#xA;I believe the release version didn't have this issue." />
    </Messages>
  </Topic>
  <Topic Id="262" Title="With first line of multi-line legend labels,  incorrect justification">
    <Messages>
      <Message Id="0" ParentId="262" UserId="86978" Date="11/17/2011 19:46:19" Content="This is with the development branch. With multi-line legend labels,  it appears that the first line of each item is centered relative to the width of _widest_ first line. &#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;df &lt;- data.frame(x=1:2,  y=1:2,  g=c(&quot;Some\ntext&quot;, &quot;More more more\ntext&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(data=df,  aes(x, y, fill=g)) + geom_point()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;The problem doesn't seem to happen with the release version." />
      <Message Id="2990010" ParentId="262" UserId="4196" Date="12/02/2011 13:37:08" Content="@kohske would you mind taking care of this too?  One pull request for both would be fine." />
      <Message Id="2990290" ParentId="262" UserId="4196" Date="12/02/2011 14:01:57" Content="Actually this is exactly the same problem as #266." />
    </Messages>
  </Topic>
  <Topic Id="263" Title="Log axes show decimal values for tick labels">
    <Messages>
      <Message Id="0" ParentId="263" UserId="86978" Date="11/21/2011 03:22:14" Content="This is an issue with the development branch. In the release version,  when you use a log axis,  the tick labels will show in powers of base (e.g.,  e or 10) when you use the appropriate scale. In the development version,  the labels show as decimal numbers.&#xD;&#xA;&#xD;&#xA;If you run this with the release version,  you'll see that the x axis labels are e^0,  e^2,  e^4 and so on. But if you run it in the devel version,  you'll see decimal values like 0.367,  7.389,  and so on.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;set.seed(123)&#xD;&#xA;dat &lt;- data.frame(x=exp(rnorm(100,  mean=4,  sd=2)),  y=rnorm(100))&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_x_continuous(trans=&quot;log&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;The same happens for `scale_x_log10`,  which is the only specially-named log scale in devel version. It also shows values in decimal (10,  100,  1000,  etc.) instead of powers of 10 (10^1,  10^2,  10^3,  etc.).&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_x_log10()&#xD;&#xA;```" />
      <Message Id="2815022" ParentId="263" UserId="4196" Date="11/21/2011 13:26:44" Content="This is a desired change in behaviour.  Use `labels = math_format(...)` to get the old style labels." />
    </Messages>
  </Topic>
  <Topic Id="264" Title="Setting named values with scale_colour_manual doesn't work">
    <Messages>
      <Message Id="0" ParentId="264" UserId="86978" Date="11/21/2011 03:57:18" Content="With `scale_colour_manual`,  it's not possible to change the order that the `values` are specified. This works in the release version,  but it doesn't work in the devel version. This may also be true for other scales,  but I haven't tested them.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;These examples are taken from the the help page. The first graph here looks the same in both versions,  but the second one has different colors in the release and devel version: &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- qplot(mpg,  wt,  data = mtcars,  colour = factor(cyl))&#xD;&#xA;&#xD;&#xA;# Same in both versions&#xD;&#xA;p + scale_colour_manual(values = c(&quot;red&quot;, &quot;blue&quot;,  &quot;green&quot;))&#xD;&#xA;&#xD;&#xA;# Different in devel version - labeled elements have no effect&#xD;&#xA;p + scale_colour_manual(values = c(&quot;8&quot; = &quot;red&quot;, &quot;4&quot; = &quot;blue&quot;, &quot;6&quot; = &quot;green&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;In the devel version,  4 is red,  6 is blue,  and 8 is green.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Side note: It's unclear to me why `labels` are matched to `breaks` by position,  but `values` are matched to `breaks` by naming the vector elements. This code reverses the order of the legend. If `values` were matched by position,  the points for 8 cylinders,  in the upper left,  would be red with this code,  but they come out green,  in both the release and devel version.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p + scale_colour_manual(breaks = c(8, 6, 4),  &#xD;&#xA;                        labels = c(&quot;Eight&quot;, &quot;Six&quot;, &quot;Four&quot;), &#xD;&#xA;                        values = c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;))&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="2815004" ParentId="264" UserId="4196" Date="11/21/2011 13:24:59" Content="Thanks for the bug reports - probably won't have a chance work on them for a couple of weeks (until class finishes) but I hope I can get a release out by Christmas/New Years.  If you want to increase the speed at which I fix these bugs,  formal test cases using the output of `ggplot_build` would really help.&#xD;&#xA;&#xD;&#xA;I agree that both breaks and values should match by both position and name." />
      <Message Id="2821427" ParentId="264" UserId="86978" Date="11/21/2011 21:24:54" Content="Sounds good. I'll try to do that for these bugs." />
      <Message Id="2951203" ParentId="264" UserId="86978" Date="11/29/2011 22:01:16" Content="&#xD;&#xA;Test code for named values:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;Values can be specified by name with scale_colour_manual&quot;,  { &#xD;&#xA;    p &lt;- qplot(mpg,  wt,  data = mtcars,  colour = factor(cyl))&#xD;&#xA;    &#xD;&#xA;    p1 &lt;- ggplot_build(p + scale_colour_manual(values = c(&quot;8&quot; = &quot;red&quot;, &quot;4&quot; = &quot;blue&quot;, &quot;6&quot; = &quot;green&quot;)))&#xD;&#xA;    p1dat &lt;- p1$data[ [ 1 ] ]&#xD;&#xA;    &#xD;&#xA;    expect_that( all(p1dat$colour[ p1dat$group==3 ] == &quot;red&quot;),  is_true())&#xD;&#xA;    expect_that( all(p1dat$colour[ p1dat$group==2 ] == &quot;green&quot;),  is_true())&#xD;&#xA;    expect_that( all(p1dat$colour[ p1dat$group==1 ] == &quot;blue&quot;),  is_true())&#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This tests for positional values. Note that it's slightly different from the example in the original post. For consistency,  I changed the order of the numbers from (8, 6, 4) to (8, 4, 6),  to match the other test:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;Values can be specified by position with scale_colour_manual&quot;,  { &#xD;&#xA;    p2 &lt;- ggplot_build(p + scale_colour_manual(breaks = c(8, 4, 6),  &#xD;&#xA;                               labels = c(&quot;Eight&quot;, &quot;Four&quot;, &quot;Six&quot;), &#xD;&#xA;                               values = c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;)) )&#xD;&#xA;    p2dat &lt;- p2$data[ [ 1 ] ]&#xD;&#xA;    &#xD;&#xA;    expect_that( all(p2dat$colour[ p2dat$group==3 ] == &quot;red&quot;),  is_true())&#xD;&#xA;    expect_that( all(p2dat$colour[ p2dat$group==2 ] == &quot;green&quot;),  is_true())&#xD;&#xA;    expect_that( all(p2dat$colour[ p2dat$group==1 ] == &quot;blue&quot;),  is_true())&#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="2953505" ParentId="264" UserId="227097" Date="11/30/2011 01:19:23" Content="I have figured out that this bug is very complicated.&#xD;&#xA;&#xD;&#xA;Perhaps,  this bug comes from `scale_map.discrete`,  e.g., &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; s &lt;- scale_colour_manual(values = c(&quot;8&quot; = &quot;red&quot;, &quot;4&quot; = &quot;blue&quot;, &quot;6&quot; = &quot;green&quot;))&#xD;&#xA;&gt; scale_train(s,  paste(c(4, 6, 8)))&#xD;&#xA;&gt; scale_map(s,  paste(c(4, 6, 8)))&#xD;&#xA;[ 1 ] &quot;red&quot;   &quot;blue&quot;  &quot;green&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Probably I can fix,  but I'm not sure the specification of `scale_map.discrete`.&#xD;&#xA;Should `scale_map.discrete` preserve the order of its argument `x`,  right?&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="2975451" ParentId="264" UserId="4196" Date="12/01/2011 14:48:54" Content="Ok,  this isn't a bug so much as functionality that hasn't yet been implemented in 0.9.  Palettes don't work at this level (matching potential values),  so I think `scale_manual` needs to work like `scale_identity` with it's own method for `scale_map`. &#xD;&#xA;&#xD;&#xA;Here's a test case for when it does get implemented:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R &#xD;&#xA;test_that(&quot;names of values used in manual scales&quot;,  { &#xD;&#xA;   s &lt;- scale_colour_manual(values = c(&quot;8&quot; = &quot;c&quot;, &quot;4&quot; = &quot;a&quot;, &quot;6&quot; = &quot;b&quot;))&#xD;&#xA;   scale_train(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;))&#xD;&#xA;   expect_equal(scale_map(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;)),  c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;))  &#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="3862689" ParentId="264" UserId="330036" Date="02/08/2012 05:19:26" Content="@hadley and @koshke - I don't think this issue should be closed. Our testing coverage isn't complete. Consider:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;test_that(&quot;values are matched when scale contains more unique values &#xD;&#xA;           than are in the data&quot;,  { &#xD;&#xA;    s &lt;- scale_colour_manual(&#xD;&#xA;           values = c(&quot;8&quot;  = &quot;c&quot;, &#xD;&#xA;                     &quot;4&quot;  = &quot;a&quot;, &#xD;&#xA;                     &quot;22&quot; = &quot;d&quot;, &#xD;&#xA;                     &quot;6&quot;  = &quot;b&quot;&#xD;&#xA;		    	         )&#xD;&#xA;		    )&#xD;&#xA;	 scale_train(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;))&#xD;&#xA;	 expect_equal(scale_map(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;)),  c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;))&#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This test fails. I had [ a hunch ][ 1 ] it would (hadley/ggplot2#384). On closer inspection,  we can see why:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;s &lt;- ggplot2:::scale_colour_manual(&#xD;&#xA;  values = c(&quot;8&quot; = &quot;c&quot;, &#xD;&#xA;            &quot;4&quot; = &quot;a&quot;, &#xD;&#xA;            &quot;22&quot; = &quot;d&quot;, &#xD;&#xA;            &quot;6&quot; = &quot;b&quot;&#xD;&#xA;            )&#xD;&#xA;  )&#xD;&#xA;(ggplot2:::scale_train(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;)))&#xD;&#xA;&#xD;&#xA;# Should be equal to &quot;a&quot; &quot;b&quot; &quot;c&quot;,  but it clearly isn't&#xD;&#xA;(scale_map(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;[ 1 ]: https://github.com/hadley/ggplot2/issues/384#issuecomment-3862155&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3918595" ParentId="264" UserId="4196" Date="02/11/2012 04:41:37" Content="Thanks for the additional test!" />
      <Message Id="4075547" ParentId="264" UserId="4196" Date="02/21/2012 14:24:15" Content="I can't reproduce the problem.  Are you sure you have the latest version of scales?" />
      <Message Id="4079000" ParentId="264" UserId="330036" Date="02/21/2012 17:05:10" Content="@hadley - I think it works now because [ winston said he fixed it ][ 1 ] in wch/scales@5c74062&#xD;&#xA;&#xD;&#xA;He just must not have had a chance to close this issue. Sorry!&#xD;&#xA;&#xD;&#xA;[ 1 ]: https://github.com/hadley/ggplot2/issues/384#issuecomment-3862879" />
      <Message Id="4079147" ParentId="264" UserId="86978" Date="02/21/2012 17:10:58" Content="Actually,  I think it turned out that the change to scales was unnecessary -- hadley's fix (in ggplot2) took care of the problem." />
    </Messages>
  </Topic>
  <Topic Id="265" Title="Cutting edge version of development">
    <Messages>
      <Message Id="0" ParentId="265" UserId="227097" Date="11/29/2011 18:32:41" Content="Here is the dev version of my daily use.&#xD;&#xA;As long as I tested,  this branch is fast-forwardable when merging into the develop branch on your repository.&#xD;&#xA;thanks." />
    </Messages>
  </Topic>
  <Topic Id="266" Title="x axis labels are centered relative to length of longest label">
    <Messages>
      <Message Id="0" ParentId="266" UserId="86978" Date="11/29/2011 21:39:02" Content="In the development version,  each label on the x axis seems to be centered relative to the longest label,  instead of its own length.&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=c(&quot;bar&quot;,  &quot;foo&quot;,  &quot;long label&quot;),  y=1:3)&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Here's my attempt at a test case. It looks like there are extra leading spaces added to each short label.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(testthat)&#xD;&#xA;p &lt;- ggplot_build(ggplot(dat,  aes(x=x,  y=y)) + geom_point())&#xD;&#xA;expect_that(p$panel$ranges[ [ 1 ] ]$x.labels[ 1 ],  is_identical_to(&quot;bar&quot;))&#xD;&#xA;expect_that(p$panel$ranges[ [ 1 ] ]$x.labels[ 2 ],  is_identical_to(&quot;foo&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If there are better ways to write test cases,  please let me know." />
      <Message Id="2951116" ParentId="266" UserId="4196" Date="11/29/2011 21:56:34" Content="Test case looks good.  Would be slightly be if you wrapped in a test: i.e. `test_that(&quot;labels don't have extra padding&quot;,  { ... })`,  and in this case,  a slightly better (i.e. more general) test might be `xlabs &lt;- p$panel$ranges[ [ 1 ] ]$x.labels[ 1 ]; expect_equal(xlabs,  str_trim(xlabs))`." />
      <Message Id="2951351" ParentId="266" UserId="86978" Date="11/29/2011 22:10:32" Content="```&#xD;&#xA;test_that(&quot;x tick labels don't have extra padding&quot;,  { &#xD;&#xA;    require(stringr)&#xD;&#xA;    &#xD;&#xA;    dat &lt;- data.frame(x=c(&quot;bar&quot;,  &quot;foo&quot;,  &quot;long label&quot;),  y=1:3)    &#xD;&#xA;    p &lt;- ggplot_build(ggplot(dat,  aes(x=x,  y=y)) + geom_point())&#xD;&#xA;    &#xD;&#xA;    xlabs &lt;- p$panel$ranges[ [ 1 ] ]$x.labels&#xD;&#xA;    expect_equal(xlabs,  str_trim(xlabs))&#xD;&#xA;&#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="2953435" ParentId="266" UserId="227097" Date="11/30/2011 01:10:55" Content="This should be a `formatC` problem in `scale_labels.discrete`.&#xD;&#xA;Easy to fix. Should I?&#xD;&#xA;Actually it has been fixed in my local machine.&#xD;&#xA;" />
      <Message Id="2989994" ParentId="266" UserId="4196" Date="12/02/2011 13:35:34" Content="A pull request with test case and fix would be much appreciated. Trying to get back in the swing of development,  so I should be approving things much more quickly over the next few weeks." />
    </Messages>
  </Topic>
  <Topic Id="267" Title="&quot;R&quot; and &quot;r&quot; directories in development branch">
    <Messages>
      <Message Id="0" ParentId="267" UserId="86978" Date="11/30/2011 22:06:43" Content="I just pulled the recent changes and noticed that there's a new directory named &quot;r&quot; in addition to the &quot;R&quot; directory. Is this expected? It seems to cause ints&#xD;&#xA;&#xD;&#xA;Also,  I tried installing it on my computer which is running R 2.13 (on Ubuntu Linux 11.10),  but it says is requires R 2.14. Is 2.14 really necessary? It was working fine under 2.13 with previous versions." />
      <Message Id="2974669" ParentId="267" UserId="4196" Date="12/01/2011 13:28:55" Content="Fixed in d3173c5da066b9c7caba47f24ee5078625f7712b.&#xD;&#xA;&#xD;&#xA;And yes 2.14 is necessary because I'm now importing proto which didn't use to have a namespace.  Generally,  I can't provide any guarantees that ggplot2 will work with an older version,  because I only test on the latest." />
    </Messages>
  </Topic>
  <Topic Id="268" Title="If ggsave() overwrites a file,  the timestamp is not updated">
    <Messages>
      <Message Id="0" ParentId="268" UserId="908596" Date="12/02/2011 05:21:25" Content="When ggsave() writes over an existing file,  it doesn't seem to update the timestamp.&#xD;&#xA;&#xD;&#xA;I usually am looking at timestamps to see outputs being updated.&#xD;&#xA;&#xD;&#xA;Is this R or gg?&#xD;&#xA;&#xD;&#xA;Andy" />
      <Message Id="2989923" ParentId="268" UserId="4196" Date="12/02/2011 13:28:06" Content="That's on R." />
      <Message Id="2989940" ParentId="268" UserId="908596" Date="12/02/2011 13:29:46" Content="Thanks for clarifying." />
    </Messages>
  </Topic>
  <Topic Id="269" Title="Unable to install ggplot2 from github after recent update">
    <Messages>
      <Message Id="0" ParentId="269" UserId="538601" Date="12/02/2011 17:02:47" Content="an error messages showed up when try&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;install_github(&quot;ggplot2&quot;,  branch=&quot;develop&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error : /private/var/folders/lt/wqxrd2_d4fb8x9jd6yy3g1kh0000gn/T/Rtmp6vFwoX/R.INSTALL10b170156f01/ggplot2/man/annotation_map.Rd: Sections \title,  and \name must exist and be unique in Rd files&#xD;&#xA;ERROR: installing Rd objects failed for package ‘ggplot2’&#xD;&#xA;```" />
      <Message Id="2992791" ParentId="269" UserId="4196" Date="12/02/2011 17:08:52" Content="Fixed.  In the future,  please use the new ggplot2-dev mailing list for problems like this." />
    </Messages>
  </Topic>
  <Topic Id="270" Title="geom_boxplot: width with continuous axis has inconsistent results">
    <Messages>
      <Message Id="0" ParentId="270" UserId="86978" Date="12/02/2011 20:30:15" Content="I ran across this one when answering a question on the mailing list... When using `geom_boxplot` with a continuous axis and specifying the `group`,  setting `width` has some inconsistent results.&#xD;&#xA;&#xD;&#xA;When there's a single data point in a group,  the box is centered on that point,  with the specified width. This means that one box can actually overlap with another even with the specified width is the same or smaller than the group size,  as in the example.&#xD;&#xA;&#xD;&#xA;When there is more than one point,  the width of the box is slightly less (0.8?) than the width of the actual data in the group.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(113)&#xD;&#xA;dat &lt;- data.frame(x=rnorm(50)^2,  y= rnorm(50))&#xD;&#xA;&#xD;&#xA;ggplot(dat, aes(x=x, y=y)) + &#xD;&#xA;    geom_boxplot(aes(group=floor(x)),  width=1) + &#xD;&#xA;    geom_point(shape=21,  colour=&quot;blue&quot;) # Distinguish these points from boxplot outliers&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'm not sure what the expected behavior should be,  so I can't provide a test." />
      <Message Id="35939305" ParentId="270" UserId="4196" Date="02/24/2014 21:17:19" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="271" Title="Split out all spatial related code into separate spatialVis package">
    <Messages>
      <Message Id="0" ParentId="271" UserId="4196" Date="12/03/2011 19:01:31" Content="Including spatial fortify code,  and specialised methods for `geom_raster` and `geom_map`&#xD;&#xA;&#xD;&#xA;Should import  mapproj,  maps,  gpclib,  maptools and extend sp so all packages are available.&#xD;&#xA;" />
      <Message Id="4458783" ParentId="271" UserId="1530030" Date="03/12/2012 18:48:18" Content="If possible,  I'd like to make a suggestion that the spatial fortify code be modified to not be dependent on gpclib due to license restrictions on that package.  &#xD;&#xA;&#xD;&#xA;For example,  if I understand the code correctly,  the current ```fortify.SpatialPolygonsDataFrame``` function requires that gpclib and maptools are loaded before it calls ```unionSpatialPolygons``` in the maptools package,  but I believe the maptools package now supports using either gpclib or rgeos.   " />
      <Message Id="4458855" ParentId="271" UserId="4196" Date="03/12/2012 18:51:25" Content="Yes,  I agree and patches are welcome ;)" />
      <Message Id="35939325" ParentId="271" UserId="4196" Date="02/24/2014 21:17:23" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="272" Title="Use densityVis package for all density estimation code">
    <Messages>
      <Message Id="0" ParentId="272" UserId="4196" Date="12/03/2011 19:02:10" Content="" />
      <Message Id="35939339" ParentId="272" UserId="4196" Date="02/24/2014 21:17:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="273" Title="Move all fortify related code into fortify package">
    <Messages>
      <Message Id="0" ParentId="273" UserId="4196" Date="12/03/2011 19:02:46" Content="Which should suggest ggplot2 so it can be used for examples" />
      <Message Id="35939355" ParentId="273" UserId="4196" Date="02/24/2014 21:17:29" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="274" Title="Automatic y range with geom_boxplot doesn't include outliers">
    <Messages>
      <Message Id="0" ParentId="274" UserId="86978" Date="12/04/2011 08:11:52" Content="This example should include the range -8000 to 8000,  but it only goes from about -4000 to 4000. This is enough to include the whiskers but not the outliers.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=1,  y=c(-(1:20)^3,  (1:20)^3) )&#xD;&#xA;ggplot(dat,  aes(x, y)) + geom_boxplot()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Test code:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;geom_boxplot range includes all outliers&quot;,  { &#xD;&#xA;  dat &lt;- data.frame(x=1,  y=c(-(1:20)^3,  (1:20)^3) )&#xD;&#xA;  p &lt;- ggplot_build(ggplot(dat,  aes(x, y)) + geom_boxplot())&#xD;&#xA;  &#xD;&#xA;  miny &lt;- p$panel$ranges[ [ 1 ] ]$y.range[ 1 ]&#xD;&#xA;  maxy &lt;- p$panel$ranges[ [ 1 ] ]$y.range[ 2 ]&#xD;&#xA;&#xD;&#xA;  expect_true(miny &lt;= min(dat$y))&#xD;&#xA;  expect_true(maxy &gt;= max(dat$y))&#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="3016657" ParentId="274" UserId="4196" Date="12/05/2011 13:02:28" Content="Oh this is going to be very difficult to fix :/ Outliers are a total exception to all the standard rules.  &#xD;&#xA;&#xD;&#xA;This wasn't a problem before because the range of the plot was always the range of the data,  not the range of the transformed data.&#xD;&#xA;&#xD;&#xA;Thanks for the test!" />
      <Message Id="3016742" ParentId="274" UserId="227097" Date="12/05/2011 13:12:26" Content="As long as I inspected,  the problem is that,  in the case of `boxplot`,  `ymin` and `ymax` indicate the limits of the box,  while they indicates the limits of whole plot in the case of other geoms.&#xD;&#xA;&#xD;&#xA;I have done a quick fix. I will push the branch but probably there are more general way." />
      <Message Id="3028928" ParentId="274" UserId="86978" Date="12/06/2011 06:58:21" Content="Kohske,  I have an alternative solution using ymin and ymax to represent the bounding box including outliers,  and new values whiskermin and whiskermax to represent the ends of the whiskers. The first commit implements this solution.&#xD;&#xA;&#xD;&#xA;There's a second commit,  which changes the parameter names in external interface from ymin and ymax,  to whiskermin and whiskermax,  when users specify the dimensions of the box directly. I did this for consistency,  but it might be undesirable because it could break existing user code. If this change is kept,  perhaps there should be a note about deprecated variable names?&#xD;&#xA;&#xD;&#xA;SHA: a474508bafa150feaa739aac6e928be8708994f2" />
      <Message Id="3028977" ParentId="274" UserId="227097" Date="12/06/2011 07:06:39" Content="@wch ,  as you mentioned,  the backward compatibility is the reason why I put `ymin_final` etc in my fix. But probably your solution is better and more general.&#xD;&#xA;&#xD;&#xA;So now,  `{ x|y }{ min|max }` indicates the bbox of the geom,  for any type of geoms.&#xD;&#xA;This is very simple and clear rule and worth adopting even if it will lose a subtle backward compatibility." />
      <Message Id="3029119" ParentId="274" UserId="86978" Date="12/06/2011 07:29:53" Content="It looks like changing the external interface to use `whisker{ min|max }` causes some problems with calculating the y range. With that version,  I get this error:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(NULL,  aes(x = 1,  whiskermin = 0,  lower = 25,  middle = 50,  upper = 75,  whiskermax = 100)) + &#xD;&#xA;  geom_boxplot(stat=&quot;identity&quot;)&#xD;&#xA;#Error in UseMethod(&quot;scale_dimension&quot;) : &#xD;&#xA;#  no applicable method for 'scale_dimension' applied to an object of class &quot;NULL&quot;&#xD;&#xA;```&#xD;&#xA;Even after making changes in the `reparameterise()` function to define `y{ min|max }` from the `whisker{ min|max }` values,  I still get that error. Here's what I added to `reparameterise`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    if(is.null(df$ymin))  df$ymin &lt;- df$whiskermin&#xD;&#xA;    if(is.null(df$ymax))  df$ymax &lt;- df$whiskermax&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;However,  adding in `ymin` and `ymax` to the original function call makes it work.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(NULL,  aes(x = 1,  whiskermin = 0,  lower = 25,  middle = 50,  upper = 75,  whiskermax = 100,  ymin=0,  ymax=100)) +&#xD;&#xA;  geom_boxplot(stat=&quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'm not sure how make the y scale calculation work here... But it won't be necessary if the external interface stays with `ymin` and `ymax`." />
      <Message Id="3029356" ParentId="274" UserId="227097" Date="12/06/2011 08:07:00" Content="@wch that is because scale_y cannot be generated automatically.&#xD;&#xA;see `aes_to_scale` in `aes.r`.&#xD;&#xA;If one of aes is included in the list,  scale for `y` will be generated.&#xD;&#xA;But in the above case,  there is no aes that is associated with `y`.&#xD;&#xA;&#xD;&#xA;So,  quick fix is to change the line:&#xD;&#xA;`var[ var %in% c(&quot;y&quot;,  &quot;ymin&quot;,  &quot;ymax&quot;,  &quot;yend&quot;,  &quot;yintercept&quot;,  &quot;whiskermin&quot;,  &quot;whiskermax&quot;) ] &lt;- &quot;y&quot;`&#xD;&#xA;&#xD;&#xA;I bet that there is a better way.&#xD;&#xA;But to that end,  a large part of building plot need to be rewritten.&#xD;&#xA;Probably that is what @Hadley is going to do in the `layer` package.&#xD;&#xA;" />
      <Message Id="3031290" ParentId="274" UserId="4196" Date="12/06/2011 11:55:19" Content="I wouldn't worry about backward compatibility.  &#xD;&#xA;&#xD;&#xA;The quick hack to fix the bug is ok I think.  A better fix will come when geoms and stats are rewritten." />
      <Message Id="3087606" ParentId="274" UserId="4196" Date="12/09/2011 23:23:10" Content="I think I prefer @kohske's solution - can you please merge it in (or create a pull request).  Again,  something that needs to be looked at again when layers are rewritten." />
    </Messages>
  </Topic>
  <Topic Id="275" Title="Minor gridlines drawn underneath major gridlines">
    <Messages>
      <Message Id="0" ParentId="275" UserId="325899" Date="12/04/2011 21:33:20" Content="This is only the tip of the iceberg as far as optimizing the drawing commands generated by ggplot2,  but this is the first thing that I've found that ggplot can directly control (most of the garbage is grid's fault).&#xD;&#xA;&#xD;&#xA;The set of positions at which minor gridlines are drawn is a superset of the positions at which major gridlines are drawn.  Since the major gridlines are drawn second,  this has no effect on the *appearance* of the plot -- it just adds extra,  unnecessary draw operations to vector-device output.  As a blatant example,  consider&#xD;&#xA;&#xD;&#xA;    pdf(&quot;t.pdf&quot;,  colormodel=&quot;gray&quot;)&#xD;&#xA;    qplot(1,  1,  geom=&quot;point&quot;)&#xD;&#xA;    dev.off()&#xD;&#xA;&#xD;&#xA;The generated PDF draw commands include (some unrelated junk trimmed to make the problem clearer):&#xD;&#xA;&#xD;&#xA;    0.949 G 0.53 w&#xD;&#xA;    27.05 259.13 m 482.40 259.13 l S&#xD;&#xA;    254.72 28.67 m 254.72 489.60 l S&#xD;&#xA;    1.000 G 1.06 w&#xD;&#xA;    27.05 259.13 m 482.40 259.13 l S&#xD;&#xA;    254.72 28.67 m 254.72 489.60 l S&#xD;&#xA;&#xD;&#xA;The first half of that is completely unnecessary.&#xD;&#xA;&#xD;&#xA;I think fixing this would be as easy as having guide_grid() filter from x.minor and y.minor all entries that duplicated entries in x.major and y.major respectively." />
      <Message Id="3095807" ParentId="275" UserId="227097" Date="12/11/2011 05:46:47" Content="I'm not sure which is better:&#xD;&#xA;&#xD;&#xA;(1) the both major and minor grids are drawn (current implementation)&#xD;&#xA;(2) only the major grids are drawn if the minor and major grids are overlapped (@zackw's idea)&#xD;&#xA;(3) either major or minor grids are drawn depending of the width of grid line.&#xD;&#xA;&#xD;&#xA;I prefer the (1),  since it will keeps things simple,  while the cost of drawing is very low.&#xD;&#xA;Furthermore,  users can do (2) by their hand." />
      <Message Id="3098780" ParentId="275" UserId="325899" Date="12/11/2011 18:39:35" Content="I really don't think that's the right call.&#xD;&#xA;&#xD;&#xA;&quot;Doing (2) by hand&quot; involves manually specifying all the grid line positions,  whereas guide_grid can do it automatically in two lines:&#xD;&#xA;&#xD;&#xA;    x.minor &lt;- setdiff(x.minor,  x.major)&#xD;&#xA;    y.minor &lt;- setdiff(y.minor,  y.major)&#xD;&#xA;&#xD;&#xA;above the `ggname()` call.  &#xD;&#xA;&#xD;&#xA;Any unnecessary drawing commands can potentially cause trouble,  or at least confusion,  if you need to postprocess the graphs manually.  Also,  I think you are underestimating the redundancy of grid-generated vector graphics; maybe I shouldn't have trimmed out the &quot;unrelated junk&quot;.  Anything ggplot can do to reduce the size of the generated PDF is worth doing.&#xD;&#xA;&#xD;&#xA;(3),  however,  would be catering to poor graphic design choices - when on earth would you want your minor lines to be thicker than your major lines?  ggplot has generally not been interested in doing that,  so I don't see any need to start now." />
      <Message Id="3160750" ParentId="275" UserId="4196" Date="12/15/2011 13:12:43" Content="Hmm,  I think conceptually I picture the minor grid lines lying underneath the major grid lines.  Could you give a bit of an example where this is causing you problems?" />
      <Message Id="3164534" ParentId="275" UserId="325899" Date="12/15/2011 16:10:47" Content="Right,  that's what the code is doing now.  The problem is that you&#xA;have these lines that don't contribute anything to the drawing&#xA;(because they're completely overdrawn by the major grid lines) but&#xA;they're still there to make extra work for everything downstream,  and&#xA;confuse people when they try to edit the plots by hand.  I'm really&#xA;more concerned about the extra work; I've been doing plots of _huge_&#xA;data sets where the only way I can make the drawing time tolerable is&#xA;turning nearly all the non-data ink off,  which is not always what one&#xA;wants.&#xA;&#xA;zw" />
      <Message Id="3219625" ParentId="275" UserId="4196" Date="12/20/2011 14:48:29" Content="I think that's reasonable,  so I've flagged it for 0.9 and the change should be done in the next couple of days.&#xD;&#xA;&#xD;&#xA;I'd like to hear more about the huge data sets you're plotting,  as there may be other features 0.9 that will help but that probably shouldn't occur in issue comments." />
      <Message Id="3222382" ParentId="275" UserId="325899" Date="12/20/2011 17:47:48" Content="&gt; I think that's reasonable,  so I've flagged it for 0.9 and the change should be done in the next couple of days.&#xD;&#xA;&#xD;&#xA;Thanks!&#xD;&#xA;&#xD;&#xA;&gt; I'd like to hear more about the huge data sets you're plotting&#xD;&#xA;&#xD;&#xA;Will send email." />
    </Messages>
  </Topic>
  <Topic Id="276" Title="z-order support in gtable">
    <Messages>
      <Message Id="0" ParentId="276" UserId="227097" Date="12/05/2011 02:38:15" Content="gtable should take care of the order of drawing of its children by specifying z-order.&#xD;&#xA;&#xD;&#xA;see also issue #78&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3324143" ParentId="276" UserId="227097" Date="01/01/2012 09:32:01" Content="moved to gtable package" />
    </Messages>
  </Topic>
  <Topic Id="277" Title="geom_boxplot gives error: position_dodge requires constant width">
    <Messages>
      <Message Id="0" ParentId="277" UserId="86978" Date="12/05/2011 03:52:41" Content="Some of the examples from the geom_boxplot help don't work. It's not clear to me why this happens.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;m &lt;- ggplot(movies,  aes(y = votes,  x = rating,  group = round_any(rating,  0.5)))&#xD;&#xA;m + geom_boxplot()&#xD;&#xA;# Error: position_dodge requires constant width&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(year,  budget,  data = movies,  geom = &quot;boxplot&quot;,  group = round_any(year,  10,  floor))&#xD;&#xA;# Error: position_dodge requires constant width&#xD;&#xA;# In addition: Warning message:&#xD;&#xA;# Removed 53573 rows containing non-finite values (stat_boxplot). &#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3016483" ParentId="277" UserId="4196" Date="12/05/2011 12:42:58" Content="Hmmm,  I think the best way to solve this would be for `collide` to first check if it actually needs to do any adjustment. Long term,  I really need a better strategy for dodging." />
      <Message Id="3087569" ParentId="277" UserId="4196" Date="12/09/2011 23:20:17" Content="Will wait to work on this until @wch's violin code merged in - needs tweaks to `collide`" />
      <Message Id="3237428" ParentId="277" UserId="4196" Date="12/21/2011 18:21:40" Content="It's not clear to me how this code ever worked :(" />
      <Message Id="3237634" ParentId="277" UserId="227097" Date="12/21/2011 18:36:38" Content="Was the default position `identity`?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;df &lt;- data.frame(x = rnorm(1000),  y = rnorm(1000))&#xD;&#xA;ggplot(df,  aes(x,  y,  group = round_any(x,  0.5))) + geom_boxplot(position = &quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3237667" ParentId="277" UserId="227097" Date="12/21/2011 18:38:58" Content="Actually you wrote this:&#xD;&#xA;&#xD;&#xA;&gt;  # Add aesthetic mappings &#xD;&#xA;&gt;  # Note that boxplots are automatically dodged when any aesthetic is &#xD;&#xA;&gt;  # a factor &#xD;&#xA;&#xD;&#xA;in http://had.co.nz/ggplot2/geom_boxplot.html" />
      <Message Id="3237776" ParentId="277" UserId="86978" Date="12/21/2011 18:46:42" Content="This is weird -- It looks like it's a problem with the way `round_any` gets called. I inserted `print(unique(data$x))` in `collide()`,  just before it gives that error message.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; ggplot(movies,  aes(y = votes,  x = rating,  group = round_any(rating,  0.5))) + geom_boxplot()&#xD;&#xA; [ 1 ] 1.1 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0 7.5 8.0 8.5 9.0 9.5 9.9&#xD;&#xA;Error: position_dodge requires constant width&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Even the regular `round` function doesn't work:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; ggplot(movies,  aes(y = votes,  x = rating,  group = round(rating))) + geom_boxplot()&#xD;&#xA; [ 1 ] 1.20 2.00 3.00 4.00 5.00 6.00 7.00 8.00 9.00 9.75&#xD;&#xA;Error: position_dodge requires constant width&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If you do the rounding before feeding it to ggplot,  it works fine:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; moviesrd &lt;- transform(movies,  rating = round_any(rating, .5))&#xD;&#xA;&gt; ggplot(moviesrd,  aes(y = votes,  x = rating,  group = rating)) + geom_boxplot()&#xD;&#xA; [ 1 ]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0&#xD;&#xA;[ 16 ]  8.5  9.0  9.5 10.0&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3237920" ParentId="277" UserId="227097" Date="12/21/2011 18:56:48" Content="@wch &#xD;&#xA;that is because `x` also changes after `transform`. try this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;moviesrd &lt;- transform(movies,  rating2 = round_any(rating, .5))&#xD;&#xA;ggplot(moviesrd,  aes(y = votes,  x = rating,  group = rating2)) + geom_boxplot()&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3238070" ParentId="277" UserId="4196" Date="12/21/2011 19:07:53" Content="The problem is that the boxplots don't all have the same width because the two boxes on the very end don't get a full 0.5 worth of data.  If the data is rounded before going into ggplot2,  then the boxes do have same width." />
      <Message Id="8441995" ParentId="277" UserId="424139" Date="09/10/2012 23:21:06" Content="is this the same issue?&#xA;&#xA;```&#xA;# this is ok&#xA;qplot(clarity,  depth,  data = diamonds,  geom = 'boxplot',  fill = cut)&#xA;&#xA;# this is ok  &#xA;qplot(clarity,  depth,  data = diamonds,  geom = 'boxplot',  fill = cut) +&#xA;  coord_flip()&#xA;&#xA;# ??  &#xA;qplot(depth,  clarity,  data = diamonds,  geom = 'boxplot',  fill = cut)  &#xA;```" />
      <Message Id="8443123" ParentId="277" UserId="86978" Date="09/11/2012 00:22:35" Content="Yup,  it's the same issue." />
    </Messages>
  </Topic>
  <Topic Id="278" Title="reverse scaling with unordered factors">
    <Messages>
      <Message Id="0" ParentId="278" UserId="949275" Date="12/05/2011 16:51:14" Content="Context: Last example in coord_trans(),  0.9.0 development version&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(a = abs(rnorm(26)), letters)&#xD;&#xA;plot &lt;- ggplot(df, aes(a, letters)) + geom_point()&#xD;&#xA;&#xD;&#xA;# Transforms on 'a' work fine...but&#xD;&#xA;plot + coord_trans(x = &quot;sqrt&quot;,  y = &quot;reverse&quot;)&#xD;&#xA;Error in -x : invalid argument to unary operator&#xD;&#xA;In addition: Warning messages:&#xD;&#xA;1: In log(x,  base) : NaNs produced&#xD;&#xA;2: In log(x,  base) : NaNs produced&#xD;&#xA;3: In log(x,  base) : NaNs produced&#xD;&#xA;&#xD;&#xA;str(df)&#xD;&#xA;'data.frame':   26 obs. of  2 variables:&#xD;&#xA; $ a      : num  0.000269 0.507335 0.235652 0.804319 0.223722 ...&#xD;&#xA; $ letters: Factor w/ 26 levels &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, ..: 1 2 3 4 5 6 7 8 9 10 ...&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Dennis&#xD;&#xA;" />
      <Message Id="3095666" ParentId="278" UserId="227097" Date="12/11/2011 04:52:45" Content="This is due to the change in `scales` package. I'm not sure if trans should support discrete variable.&#xD;&#xA;" />
      <Message Id="3098738" ParentId="278" UserId="949275" Date="12/11/2011 18:36:05" Content="I agree with you on that front,  Kohske,  but it was one of Hadley's examples in the package,  so I thought I'd bring it up for discussion. I could see this type of reversal if the factor variable in question were ordered,  but not otherwise.&#xA;&#xA;Dennis&#xA;&#xA;&#xA;&#xA;________________________________&#xA; From: kohske takahashi &lt;reply@reply.github.com&gt;&#xA;To: Dennis Murphy &lt;djmurphy0420@yahoo.com&gt; &#xA;Sent: Saturday,  December 10,  2011 8:52 PM&#xA;Subject: Re: [ ggplot2 ] reverse scaling with unordered factors (#278)&#xA; &#xA;This is due to the change in `scales` package. I'm not sure if trans should support discrete variable.&#xA;&#xA;--- &#xA;Reply to this email directly or view it on GitHub:&#xA;https://github.com/hadley/ggplot2/issues/278#issuecomment-3095666" />
      <Message Id="3198883" ParentId="278" UserId="4196" Date="12/19/2011 03:25:33" Content="Fixed in 7dafed40a6cf96b005c276a021246ed81ffb59b5" />
    </Messages>
  </Topic>
  <Topic Id="279" Title="rescaler() causing an example to fail in ggplot2 0.9.0">
    <Messages>
      <Message Id="0" ParentId="279" UserId="949275" Date="12/05/2011 17:35:29" Content="Decided to try running all the examples in the latest development version of ggplot2 - one fails because it cannot find the rescaler() function from reshape (not loaded at this point). Probably want to remove references to it in the examples unless the package is explicitly loaded. AFAICT,  there are three references to rescaler() in the development version of ggplot2:&#xD;&#xA;&#xD;&#xA;(i) an example in aes-linetype-size-shape.r:&#xD;&#xA;&#xD;&#xA;#' # Mapping line type from a variable&#xD;&#xA;#' ec_scaled &lt;- data.frame(date = economics$date,  rescaler(economics[ ,  -(1:2) ],  &quot;range&quot;)) &#xD;&#xA;&#xD;&#xA;(ii) inside the function body of ggpcp() in templates.r:&#xD;&#xA;&#xD;&#xA;ggpcp &lt;- function(data,  vars=names(data),  scale=&quot;range&quot;,  ...) { &#xD;&#xA;  force(vars)  &#xD;&#xA;  scaled &lt;- rescaler(data[ ,  vars ],  type=scale)&#xD;&#xA;...&#xD;&#xA;&#xD;&#xA;(iii) commented out in the function definition in matrix.r.&#xD;&#xA;&#xD;&#xA;Currently,  running examples_run('ggplot2') will terminate after it encounters (i):&#xD;&#xA;&#xD;&#xA;&gt; ec_scaled &lt;- data.frame(date = economics$date,  rescaler(economics[ ,  -(1:2) ],  &quot;range&quot;))&#xD;&#xA;Error in data.frame(date = economics$date,  rescaler(economics[ ,  -(1:2) ],   : &#xD;&#xA;  could not find function &quot;rescaler&quot;&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In .recacheSubclasses(def@className,  def,  doSubclasses,  env) :&#xD;&#xA;  undefined subclass &quot;Scales&quot; of class &quot;refObject&quot;; definition not updated&#xD;&#xA;&#xD;&#xA;Should be an easy fix,  but mentioning it to put it on the to-do list.&#xD;&#xA;&#xD;&#xA;Dennis&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="280" Title="Stacking for geom_area doesn't properly handle missing entries">
    <Messages>
      <Message Id="0" ParentId="280" UserId="86978" Date="12/07/2011 07:15:47" Content="With a a stacked area graph,  it requires an entry at every x for every group. If for a given x value,  one group doesn't have an entry in the data frame,  then it will behave as though the y value of that group at that x is zero.&#xD;&#xA;&#xD;&#xA;The pictures will illustrate better:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;dat &lt;- data.frame(&#xD;&#xA;        g=rep(LETTERS[ 1:3 ],  each=4), &#xD;&#xA;        x=rep(1:4,  3), &#xD;&#xA;        y=rep(3:14))&#xD;&#xA;&#xD;&#xA;# Remove row with g=B,  x=3 &#xD;&#xA;dat &lt;- dat[ -7,  ] &#xD;&#xA;dat&#xD;&#xA;&#xD;&#xA;# Lines all look straight&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  colour=g)) + geom_line()&#xD;&#xA;&#xD;&#xA;# With a stacked area graph,  there's a dip at x=3 &#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=g)) + geom_area()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Test code:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;Stacked area graph interpolates missing values&quot;,  { &#xD;&#xA;  dat &lt;- data.frame(&#xD;&#xA;           g=rep(LETTERS[ 1:3 ],  each=4), &#xD;&#xA;           x=rep(1:4,  3), &#xD;&#xA;           y=rep(3:14))&#xD;&#xA;&#xD;&#xA;  # Remove row with g=B,  x=3 &#xD;&#xA;  dat &lt;- dat[ -7,  ] &#xD;&#xA;&#xD;&#xA;  p &lt;- ggplot_build(ggplot(dat,  aes(x=x,  y=y,  fill=g)) + geom_area())&#xD;&#xA;  &#xD;&#xA;  topgroup_y &lt;- with(p$data[ [ 1 ] ],  y[ x==3 &amp; group==3 ] )&#xD;&#xA;  expect_equal(topgroup_y,  27)  &#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think fixing this one would require doing some interpolation. Perhaps solving this one is better left to the large changes to stacking code in the future?" />
      <Message Id="3045383" ParentId="280" UserId="227097" Date="12/07/2011 10:06:06" Content="Just a note,  although this is useful in some cases,  I don't think this kind of automatic interpolation is good idea.&#xD;&#xA;The purpose of visualization is to visually inspect how the data is.&#xD;&#xA;But the automatic interpolation will make users miss the missing values.&#xD;&#xA;Furthermore,  there is no reason to apply liner interpolation. Why not smoothing,  why not other filtering?&#xD;&#xA;So,  in my view,  interpolation should be done by users' hand.&#xD;&#xA;Or,  at least,  the explicit way,  such as stat_interpolate,  should be provided. But maybe this is beyond the scope of &quot;plotting.&quot;&#xD;&#xA;Another way is to simply induce an error or a warning when missing values are detected." />
      <Message Id="3047498" ParentId="280" UserId="4196" Date="12/07/2011 14:09:50" Content="Yeah,  I'm totally with @Koshke on this one.  It gets even more complicated if you consider longitudinal data where possibly none of the time points align.  &#xD;&#xA;&#xD;&#xA;But I think it's worth having some tool that will do this,  just not automatically.  Something to consider for 1.0" />
      <Message Id="3053690" ParentId="280" UserId="86978" Date="12/07/2011 21:25:58" Content="That makes sense. I think it would be a good idea to have an informative warning message so that people know how to deal with the issue if they encounter it." />
      <Message Id="35939405" ParentId="280" UserId="4196" Date="02/24/2014 21:17:40" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="281" Title="geom_boxplot behaves differently from boxplot">
    <Messages>
      <Message Id="0" ParentId="281" UserId="86978" Date="12/07/2011 10:15:04" Content="I was testing some of the examples from the help page,  and noticed that `geom_boxplot` has slightly different output from the `boxplot` function. If you look at these two graphs,  you'll notice that `ggplot` has an outlier at 19.2,  but `boxplot` doesn't.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(factor(cyl),  mpg)) + geom_boxplot() + ylim(10, 35)&#xD;&#xA;&#xD;&#xA;boxplot(mpg ~ cyl,  mtcars)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The output of `boxplot` seems to be consistent with `boxplot.stats`,  so my guess is that there's something wrong with `stat_boxplot`.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;boxplot.stats(subset(mtcars,  cyl==8)$mpg)&#xD;&#xA;#$stats&#xD;&#xA;#[ 1 ] 13.3 14.3 15.2 16.4 19.2&#xD;&#xA;#&#xD;&#xA;#$n&#xD;&#xA;#[ 1 ] 14&#xD;&#xA;#&#xD;&#xA;#$conf&#xD;&#xA;#[ 1 ] 14.31323 16.08677&#xD;&#xA;#&#xD;&#xA;#$out&#xD;&#xA;#[ 1 ] 10.4 10.4&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3047441" ParentId="281" UserId="4196" Date="12/07/2011 14:04:27" Content="Putting off until 1.0.  Will need a decent set of tests associated with it.  Almost wonder if we need a separate boxplot package to do calculating for all boxplot related displays (see http://vita.had.co.nz/papers/boxplots.html)" />
      <Message Id="43347576" ParentId="281" UserId="86978" Date="05/16/2014 15:52:39" Content="The difference has been documented in the help file for geom_boxplot:&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/geom-boxplot.r" />
    </Messages>
  </Topic>
  <Topic Id="282" Title="Polar coordinate angles are not evenly spaced when x is a factor">
    <Messages>
      <Message Id="0" ParentId="282" UserId="86978" Date="12/07/2011 21:22:57" Content="When x is a factor,  polar coordinate angles aren't evenly spaced. Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=4)&#xD;&#xA;&#xD;&#xA;# A and C boxes touch - angle AC is smaller than AB and BC&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + coord_polar() + geom_bar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Test code:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;coord_polar angles are evenly spaced when x is a factor&quot;,  { &#xD;&#xA;  dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=4)&#xD;&#xA;  p &lt;- ggplot_build(ggplot(dat,  aes(x=x,  y=y)) + coord_polar() + geom_bar() )&#xD;&#xA;&#xD;&#xA;  expect_identical(p$panel$ranges[ [ 1 ] ]$theta.range,  c(.5,  3.5))&#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="4302842" ParentId="282" UserId="86978" Date="03/03/2012 17:27:32" Content="I think that when theta is a factor,  the angular spacing should always be equal. &#xD;&#xA;&#xD;&#xA;In these examples,  the angular spacing with geom_point is different than with geom_bar. And since x/theta is a factor,  I don't think it's possible to change the limits to get equal spacing (if it were numeric,  you could control the spacing with`xlim(0.5,  4.5)`).&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;) ,  y=5:8)&#xD;&#xA;&#xD;&#xA;# x/theta is a factor,  with geom_point: first and last are merged &#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + coord_polar()&#xD;&#xA;&#xD;&#xA;# x/theta is a factor,  with geom_bar: not merged,  but unequal spacing&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_bar() + coord_polar()&#xD;&#xA;&#xD;&#xA;# equal spacing with geom_bar when width=1&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_bar(width=1) + coord_polar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;For this to be truly polar,  the theta values should wrap around and connect -- perhaps it would help to formalize the property of looping/wrapping for scales." />
      <Message Id="5252104" ParentId="282" UserId="86978" Date="04/20/2012 20:10:19" Content="Fixed in #473." />
    </Messages>
  </Topic>
  <Topic Id="283" Title="Points with size 0 show up large and off-center in PDF files">
    <Messages>
      <Message Id="0" ParentId="283" UserId="86978" Date="12/07/2011 23:12:30" Content="If you use points with size=0,  they're pretty much invisible if you output to bitmap files like PNG. But when you output to PDF,  they show up as large circles that are positioned with their upper-left corner at the specified x and y.&#xD;&#xA;&#xD;&#xA;You generally won't use size 0 points,  but that was the only way I could get geom_boxplot to hide the outliers. The reason I wanted to do that was to overlay the box plots on a violin plot,  which is a standard thing to do.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(123)&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=rnorm(60))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y))&#xD;&#xA;pdf('test.pdf',  width=3,  height=3)&#xD;&#xA;p + geom_boxplot(outlier.size=0)&#xD;&#xA;p + geom_point(size=0)&#xD;&#xA;dev.off()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I was able to get them to be effectively invisible by setting outlier.size=.01. Should this workaround be used,  or should I add an option to show/hide them,  like &quot;show.outliers&quot;? Some solution is necessary for box plots to be used with violins." />
      <Message Id="3070534" ParentId="283" UserId="4196" Date="12/08/2011 21:46:09" Content="Can you try reproducing with pure grid graphics? It's unlikely to be a ggplot2 bug." />
      <Message Id="3075932" ParentId="283" UserId="86978" Date="12/09/2011 06:21:45" Content="I was able to reproduce it with grid graphics.&#xD;&#xA;&#xD;&#xA;But it looks like the problem is probably my PDF viewer. With evince in Linux,  the dots are visible,  but with Preview and Adobe Reader on Mac,  they aren't." />
    </Messages>
  </Topic>
  <Topic Id="284" Title="Occasionally display useful startup messages">
    <Messages>
      <Message Id="0" ParentId="284" UserId="4196" Date="12/08/2011 17:24:34" Content="Either with some small random probability,  or only on certain days.  Messages would encourage people to sign up for mailing list etc." />
      <Message Id="3070250" ParentId="284" UserId="463252" Date="12/08/2011 21:25:51" Content="I'm leery about &quot;random&quot;; is it going to make reproducible research (al a Sweave or knitr or org.mode) not strictly reproducible?  " />
      <Message Id="3070281" ParentId="284" UserId="4196" Date="12/08/2011 21:27:58" Content="If you're worried about it,  you can always use `suppressStartupMessages`" />
      <Message Id="3070310" ParentId="284" UserId="463252" Date="12/08/2011 21:30:13" Content="True,  if you know about it.  Which you might not until you get it randomly the first time.  Then you can't reproduce it.  I hope it creates fewer questions than it helps solve." />
    </Messages>
  </Topic>
  <Topic Id="285" Title="Allow figure dimensions to be specified in metric units">
    <Messages>
      <Message Id="0" ParentId="285" UserId="18445" Date="12/08/2011 23:26:24" Content="Previously,  only inches were available" />
    </Messages>
  </Topic>
  <Topic Id="286" Title="Autoplot,  take 2">
    <Messages>
      <Message Id="0" ParentId="286" UserId="463252" Date="12/09/2011 16:26:43" Content="This is a resubmission of pull request #229,  now targeting the master branch after having been rebased to that branch.  Please see the original pull request for more detail." />
    </Messages>
  </Topic>
  <Topic Id="287" Title="Legend changes layout even if it is placed inside the plot">
    <Messages>
      <Message Id="0" ParentId="287" UserId="150781" Date="12/10/2011 02:38:09" Content="````R&#xD;&#xA;data = data.frame(x=1:10, y=1:10, col=factor(1:2))&#xD;&#xA;qplot(x=data$x, y=data$y)&#xD;&#xA;#this has slightly less white space on the right&#xD;&#xA;qplot(x=data$x, y=data$y, colour=data$col)+opts(legend.position=c(.5, .5))&#xD;&#xA;#as does this&#xD;&#xA;qplot(x=data$x, y=data$y, colour=data$col)+opts(legend.position='none')&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3090202" ParentId="287" UserId="227097" Date="12/10/2011 10:27:16" Content="@mike-lawrence I could not find what is problem... Could you please explain in more detail?" />
      <Message Id="3093633" ParentId="287" UserId="150781" Date="12/10/2011 22:11:05" Content="Sure. I ran the above and saved the first two plots to jpeg (though the issue also manifests in R's quartz window and when saved to pdf). &#xD;&#xA;&#xD;&#xA;Here is the first: http://tinypic.com/r/ruwx1t/5&#xD;&#xA;&#xD;&#xA;Here is the second: http://tinypic.com/r/25hltzq/5, &#xD;&#xA;&#xD;&#xA;If you look at the right margin of the plots,  there is 90px of whitespace in the first and only 60px of whitespace in the second. I know it seems silly to point out,  but it makes lining up multiple plots difficult. In the meantime,  I figured out that a workaround to make the first have the same amount of whitespace as the second is:&#xD;&#xA;&#xD;&#xA;````R&#xD;&#xA;qplot(x=data$x, y=data$y, colour=data$col)+opts(legend.position='none')+scale_colour_manual(value=c('black', 'black'))&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;(that is,  create a plot with a colour scale but with constant values of black,  and hide the legend)" />
      <Message Id="3094898" ParentId="287" UserId="86978" Date="12/11/2011 00:42:29" Content="I get this difference with the release version (0.8.9) but not the current version from github. Which version are you using?" />
      <Message Id="3094996" ParentId="287" UserId="150781" Date="12/11/2011 01:10:31" Content="Ah,  my apologies,  I should have specified that I was using 0.8.9. " />
    </Messages>
  </Topic>
  <Topic Id="288" Title="quick fix of incorrect automatic range for geom_box (#274)">
    <Messages>
      <Message Id="0" ParentId="288" UserId="227097" Date="12/10/2011 10:29:28" Content="" />
      <Message Id="3116260" ParentId="288" UserId="86978" Date="12/12/2011 23:49:16" Content="I think this patch introduces warnings when there are no outliers.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(111)&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=rnorm(30))&#xD;&#xA;ggplot(dat,  aes(x=x, y=y)) + geom_boxplot()&#xD;&#xA;#Warning in min(df$outliers[ [ 1 ] ]) :&#xD;&#xA;#  no non-missing arguments to min; returning Inf&#xD;&#xA;#Warning in max(df$outliers[ [ 1 ] ]) :&#xD;&#xA;#  no non-missing arguments to max; returning -Inf&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It looks like it gives the warning when it takes min() of an empty vector." />
      <Message Id="3117310" ParentId="288" UserId="227097" Date="12/13/2011 01:21:08" Content="@wch thanks. I'll fix it soon." />
    </Messages>
  </Topic>
  <Topic Id="289" Title="scale_fill_continuous shows NA's in legend">
    <Messages>
      <Message Id="0" ParentId="289" UserId="86978" Date="12/11/2011 07:53:32" Content="With scale_fill_continuous,  the legend sometimes shows NA's in the beginning and/or end of the range. I think this happens when the min or max value of data doesn't align with the break increments shown in the legend.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:5 ],  y=1,  z=(1:5)/4)&#xD;&#xA;dat&#xD;&#xA;&#xD;&#xA;# Bad: Show's NA at high and low end&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=z)) + geom_bar()&#xD;&#xA;&#xD;&#xA;# Bad: Even with manual limits,  shows NA:&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=z)) + geom_bar() +&#xD;&#xA;    scale_fill_continuous(limits=c(0.25, 1.25))&#xD;&#xA;&#xD;&#xA;# OK: Set the breaks manually to specifically hit the values &#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=z)) + geom_bar() + &#xD;&#xA;    scale_fill_continuous(limits=c(0, 1.5),  breaks=seq(0.25, 1.25,  .25))&#xD;&#xA;&#xD;&#xA;# OK: set the limits at &quot;nice&quot; values&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=z)) + geom_bar() +&#xD;&#xA;    scale_fill_continuous(limits=c(0, 1.5))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'd write a test,  but I can't find legend information in the output of ggplot_build." />
      <Message Id="3096077" ParentId="289" UserId="227097" Date="12/11/2011 07:57:23" Content="@wch Thanks for the test code.&#xD;&#xA;Probably this bug has been fixed in this branch: https://github.com/hadley/ggplot2/tree/fix/guides with some other bugs." />
      <Message Id="3096090" ParentId="289" UserId="86978" Date="12/11/2011 08:04:10" Content="@kohske,  it looks like that branch gets rid of the NA's. However,  now the minimum in the legend is 0.4 and the maximum is 1.2,  while the minimum of the data is 0.25 and the maximum is 1.25. So the range of the data goes outside the range of the legend. Is this expected behavior? To me it makes more sense for the legend range to go one more step in each direction." />
      <Message Id="3096118" ParentId="289" UserId="227097" Date="12/11/2011 08:18:53" Content="@wch the behavior is same as the previous version. I'm not sure what is best,  but I think the current implementation is reasonable. Automatic expansion will make things very complicated. This is because,  say,  the value (colour) for 0.25 is undefined,  without expanding the limits of the scale (like your last example)." />
      <Message Id="3096132" ParentId="289" UserId="86978" Date="12/11/2011 08:30:03" Content="@kohske,  oh right,  I forgot that the colors were undefined beyond the range. It's an interesting dis-analogy with the x and y scales,  where it is possible to extrapolate the scale to reach the next tick mark; for x,  you can just go further left or right." />
      <Message Id="3096145" ParentId="289" UserId="227097" Date="12/11/2011 08:38:40" Content="@wch Yes,  but it is the case only for &quot;infinite (maybe cartesian-like) space&quot; and &quot;(maybe simple) time&quot;. Not sure...&#xD;&#xA;Anyway,  as a cognitive scientist,  deeply considering about data visualization is very interesting for me. It tell me how we map perceptual inputs onto the abstract space of data. Thanks.&#xD;&#xA;" />
      <Message Id="3096219" ParentId="289" UserId="86978" Date="12/11/2011 09:05:18" Content="@kohske This is interesting to think about... Maybe it's useful to distinguish these two properties: being able to extrapolate the scale,  and being able to extrapolate the scale infinitely. You actually could extrapolate the color scale,  as long as it stays within the RGB color cube (or Lab space).&#xD;&#xA;&#xD;&#xA;A few other thoughts: some properties,  like size,  are bounded on only one side. Absolute brightness is also bounded on one side,  but log(brightness) is infinite in both directions,  and also maps better to our perception. There are other possibilities as well; rotation angle is cyclical -- it is finite and unbounded.&#xD;&#xA;&#xD;&#xA;All of this makes me wonder if the upcoming changes to the stacking/dodging code can be made general enough to encompass all continuous scales. It might not be very useful to dodge colors,  but thinking about it this way may help to find deep regularities to generalize over." />
      <Message Id="3097420" ParentId="289" UserId="4196" Date="12/11/2011 14:30:36" Content="FYI this is the same bug as #118,  so I'm going to close the discussion here." />
    </Messages>
  </Topic>
  <Topic Id="290" Title="rename 2D summary">
    <Messages>
      <Message Id="0" ParentId="290" UserId="227097" Date="12/11/2011 14:06:46" Content="in the master branch,  there are stat-aggr2d and stat-aggrhex. These are combination of stat-summary with geom-bin2d/geom-binhex. The stats are renamed." />
      <Message Id="3097387" ParentId="290" UserId="4196" Date="12/11/2011 14:19:22" Content="Could you please also add a note to NEWS about what they do?" />
      <Message Id="3097617" ParentId="290" UserId="227097" Date="12/11/2011 15:12:22" Content="Ok. I accidentally work with this branch on local repository,  so I will re-send a pull request." />
    </Messages>
  </Topic>
  <Topic Id="291" Title="2D/hex summary">
    <Messages>
      <Message Id="0" ParentId="291" UserId="227097" Date="12/11/2011 15:23:40" Content="In the master branch,  there are stat-aggr2d and stat-aggrhex. These are combination of stat-summary with geom-bin2d/geom-binhex. The stats are renamed." />
      <Message Id="3097696" ParentId="291" UserId="4196" Date="12/11/2011 15:29:22" Content="I also notice you have `default_aes &lt;- function(.) aes(fill = ..value..)`.  Does this cause problems if you use geoms other than rect?" />
      <Message Id="3097715" ParentId="291" UserId="227097" Date="12/11/2011 15:33:21" Content="hmm,  this is same as `stat-bin2d`,  `default_aes &lt;- function(.) aes(fill = ..count..)`.&#xD;&#xA;With regards to this problem,  is there any difference between bin2d and summary2d?" />
      <Message Id="3097726" ParentId="291" UserId="227097" Date="12/11/2011 15:36:09" Content="But I need to write test codes. So could you please leave this pull request for a while?&#xD;&#xA;I will test." />
      <Message Id="3097735" ParentId="291" UserId="4196" Date="12/11/2011 15:37:20" Content="Oh good point - I was thinking in terms of `stat_summary` where it has different summary functions for different outputs (but I don't think that's a better approach)." />
      <Message Id="3097785" ParentId="291" UserId="227097" Date="12/11/2011 15:46:56" Content="Then,  do you think the function name `stat-summary-2d` is confusing? Please let me know if you come up with a good alternative for the naming." />
      <Message Id="3106722" ParentId="291" UserId="227097" Date="12/12/2011 14:50:11" Content="Now I think this feature can be merged,  but should I write documents...?&#xD;&#xA;&#xD;&#xA;here is test codes&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;set.seed(1)&#xD;&#xA;&#xD;&#xA;# sample data&#xD;&#xA;df &lt;- data.frame(a = rnorm(1000),  b = rnorm(1000))&#xD;&#xA;df &lt;- transform(df,  v = exp(-(sqrt(a^2+b^2))) + rnorm(1000))&#xD;&#xA;df[ sample(1:1000,  50),  ]$v &lt;- NA&#xD;&#xA;&#xD;&#xA;# z is passed to the summary function&#xD;&#xA;d &lt;- ggplot(df,  aes(x = a,  y = b,  z = v)) &#xD;&#xA;&#xD;&#xA;# by default,  mean of z&#xD;&#xA;d + stat_summary2d()&#xD;&#xA;&#xD;&#xA;# you can use any summary function&#xD;&#xA;d + stat_summary2d(fun = function(x) sum(x^2))&#xD;&#xA;&#xD;&#xA;# var(x) is NA if length(x)==1&#xD;&#xA;d + stat_summary2d(drop = TRUE,  fun = var)&#xD;&#xA;d + stat_summary2d(drop = FALSE,  fun = var)&#xD;&#xA;&#xD;&#xA;# same for hex&#xD;&#xA;d + stat_summary_hex()&#xD;&#xA;d + stat_summary_hex(fun = function(x) sum(x^2))&#xD;&#xA;d + stat_summary_hex(drop = TRUE,  fun = var)&#xD;&#xA;d + stat_summary_hex(drop = FALSE,  fun = var)&#xD;&#xA;```" />
      <Message Id="3203105" ParentId="291" UserId="4196" Date="12/19/2011 13:33:10" Content="Yes,  some basic documentation would be great please." />
      <Message Id="3241403" ParentId="291" UserId="4196" Date="12/21/2011 23:35:36" Content="Could you please rebase off master (I think it's just a conflict with NEWS) and I'll pull in." />
      <Message Id="3242209" ParentId="291" UserId="227097" Date="12/22/2011 01:09:59" Content="Done. Now this branch is fast-forwardable for master." />
    </Messages>
  </Topic>
  <Topic Id="292" Title="Feature/notched boxplot">
    <Messages>
      <Message Id="0" ParentId="292" UserId="86978" Date="12/11/2011 17:55:11" Content="This adds the notch option to geom_boxplot." />
      <Message Id="3203020" ParentId="292" UserId="4196" Date="12/19/2011 13:23:47" Content="Looks good,  apart from the few changes I noted above.  Can you please also add notch parameter and documentation to `stat_boxplot`?" />
      <Message Id="3205757" ParentId="292" UserId="86978" Date="12/19/2011 16:48:16" Content="OK,  I made the changes to the code,  and added documentation to geom_boxplot and stat_boxplot. I didn't commit the resulting changes to the .Rd files after running roxygenize,  though. Running roxygenize appears to also change the NAMESPACE file,  so I figured I'd just not mess with it. In general,  what should I do with roxygen?" />
      <Message Id="3212580" ParentId="292" UserId="4196" Date="12/20/2011 01:05:47" Content="Roxygen should be idempotent - if not,  then that's a roxygen bug (so send me an email about it)" />
      <Message Id="3219025" ParentId="292" UserId="4196" Date="12/20/2011 13:58:06" Content="Two last changes and I think it's ready - a bullet point in `NEWS`,  and a reference to a paper that describes how notched boxplots work." />
      <Message Id="3225578" ParentId="292" UserId="86978" Date="12/20/2011 21:22:49" Content="OK,  I added the `NEWS` item,  a description of how they work,  and a reference to a paper. I also added the description of the hinge/quartile calculation for #108." />
      <Message Id="3225680" ParentId="292" UserId="4196" Date="12/20/2011 21:30:40" Content="Perfect - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="293" Title="Feature/violin-clean">
    <Messages>
      <Message Id="0" ParentId="293" UserId="86978" Date="12/11/2011 17:58:12" Content="This adds geom_violin and stat_ydensity. There are also changes to pos_dodge so that it dodges by group instead of by row." />
      <Message Id="3102146" ParentId="293" UserId="86978" Date="12/12/2011 05:04:10" Content="I've had a few thoughts about the parameters. These probably should be dealt with before merging.&#xD;&#xA;&#xD;&#xA;* I think I need a better name for the `fullwidth` parameter. Presently,  setting it to `FALSE` (the default) scales each violin so the max width is the same. Setting it to `TRUE` scales each violin to have the same area (well,  same area if tails were included). I also want an option to scale the area proportional to the sample size.&#xD;&#xA;* Should there be an option to automatically draw the box plot and median dot,  or should I make people do that manually? Doing it automatically may be difficult because the data goes through `StatYdensity` before it gets to `GeomViolin`. By the time it gets to the geom,  the original data may no longer be accessible,  so it can't be sent to `GeomBoxplot`.&#xD;&#xA;&#xD;&#xA; " />
      <Message Id="3129254" ParentId="293" UserId="463252" Date="12/13/2011 20:39:25" Content="@wch regarding your second point (option to automatically draw box plot),  I would say no.  Adding a box plot is but one way to supplement the violin plot and it makes more sense with it being a separate layer.  With the aesthetics set up right in the initial `ggplot` call,  it should be as simple as `+ geom_violin() + geom_boxplot()` to get both of them." />
      <Message Id="3131666" ParentId="293" UserId="86978" Date="12/13/2011 22:17:38" Content="@BrianDiggs Thanks,  now that I've sat on it for a bit,  I'm inclined to agree." />
      <Message Id="3132694" ParentId="293" UserId="86978" Date="12/13/2011 23:32:06" Content="Regarding the first point above,  I've changed the `fullwidth` parameter to `scalearea`. When set to FALSE (default),  it scales so the max width of each violin is the same. When set to TRUE,  it scales so that area of each violin is the same.&#xD;&#xA;&#xD;&#xA;I've also added an option `scalecount` to scale by sample size. This will work with either value of `scalearea`." />
      <Message Id="3133028" ParentId="293" UserId="463252" Date="12/13/2011 23:59:53" Content="Let me see if I understand the possible interactions of these two:&#xD;&#xA;&#xD;&#xA;* `scalecount=FALSE` and `scalearea=FALSE`: the widest part of the violin plot is the same width for all violins&#xD;&#xA;* `scalecount=FALSE` and `scalearea=TRUE`: the area of each violin plot is the same for all violins&#xD;&#xA;* `scalecount=TRUE` and `scalearea=FALSE`: the ratios of the widest parts of each violin are equal to the ratios of their respective sample sizes&#xD;&#xA;* `scalecount=TRUE` and `scalearea=TRUE`: the ratios of the areas of each violin are equal to the ratios of their respective sample sizes&#xD;&#xA;&#xD;&#xA;Is that right?" />
      <Message Id="3133135" ParentId="293" UserId="86978" Date="12/14/2011 00:08:28" Content="@BrianDiggs yup,  that's exactly right. I added some examples on the wiki page to illustrate: https://github.com/wch/ggplot2/wiki/geom_violin" />
      <Message Id="3133571" ParentId="293" UserId="463252" Date="12/14/2011 00:44:44" Content="So one controls what aspect of the violin is being scaled and the other controls by what that element is being scaled. I like the options that gives,  but I'm not sure if I like the way the options are named/mapped. &#xD;&#xA;&#xD;&#xA;scalearea controls the aspect or element that is scaled. Rather than thinking of the parameter as &quot;Should I scale based on the area? Yes/No&quot; where no falls back on scaling by width,  why not have an option &quot;scaledelement&quot; or &quot;elementscaled&quot; or &quot;aspectscaled&quot; which can have values &quot;width&quot; or &quot;area&quot;. The default can be width,  just as the default of &quot;scaledarea&quot; is FALSE. You could either throw a warning,  an error,  or silently use &quot;width&quot; if the value is unrecognized. The advantage of this is that it is more clear that you are picking from two different options regarding the scaling element,  not just turning on a feature. Also,  if there is anything else to scale by (not that I can think of any other aspects that are available),  you just expand the allowable choices rather than have to add another flag variable. &#xD;&#xA;&#xD;&#xA;I'm less sure about changing the &quot;scalecount&quot; variable likewise (into,  say,  &quot;scaleby&quot; with choices &quot;count&quot; or &quot;equal&quot;). In one sense,  there may be other things to scale by (though again I can't think of what).  It'd be nice to be able to make that an aesthetic,  but that doesn't work because it is a group level aesthetic not a individual value one. &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;On Dec 13,  2011,  at 4:08 PM,  &quot;Winston&quot; &lt;reply@reply.github.com&gt; wrote:&#xD;&#xA;&#xD;&#xA;&gt; @BrianDiggs yup,  that's exactly right. I added some examples on the wiki page to illustrate: https://github.com/wch/ggplot2/wiki/geom_violin&#xD;&#xA;&gt; &#xD;&#xA;&gt; --- &#xD;&#xA;&gt; Reply to this email directly or view it on GitHub:&#xD;&#xA;&gt; https://github.com/hadley/ggplot2/pull/293#issuecomment-3133135" />
      <Message Id="3134220" ParentId="293" UserId="86978" Date="12/14/2011 01:57:29" Content="@BrianDiggs These are good suggestions... I didn't really like that the variables had very similar names but did different things." />
      <Message Id="3135188" ParentId="293" UserId="86978" Date="12/14/2011 04:23:39" Content="OK,  how about:&#xD;&#xA;&#xD;&#xA;* `scaledaspect` = `&quot;width&quot;` or `&quot;area&quot;`&#xD;&#xA;* `scaleby` = `&quot;equal&quot;` or `&quot;count&quot;`&#xD;&#xA;&#xD;&#xA;For some reason I'm finding it really hard to come up with good names for this." />
      <Message Id="3145921" ParentId="293" UserId="463252" Date="12/14/2011 18:35:49" Content="I like those better,  but I agree that settling on a name is hard.  Better to have the struggle now,  though,  rather than after it gets released.  &#xD;&#xA;&#xD;&#xA;One point I keep going back and forth on is whether the choice for `scaleby` should be `&quot;equal&quot;` or `&quot;none&quot;` (or maybe `&quot;nothing&quot;`).  I like when options,  at least approximately,  parse as language.  So for `scaledaspect` this works: `scaledaspect=&quot;width&quot;` can be read as &quot;the scaled aspect is the width&quot;.  It is a bit trickier for `scaleby`: `scaleby=&quot;count&quot;` becomes &quot;What it [ the scaled aspect ] is scaled by is the count&quot;.  For &quot;equal&quot; it parses more like &quot;It [ the scaled aspect ] is scaled such that they are all equal&quot;; for &quot;nothing&quot; a more parallel construct is possible &quot;What it [ the scaled aspect ] is scaled by is nothing.&quot;  This is not a very strong argument,  though.&#xD;&#xA;&#xD;&#xA;I'd love to hear others' thoughts/ideas." />
      <Message Id="3171915" ParentId="293" UserId="86978" Date="12/16/2011 01:13:31" Content="Here's another idea: `scaledaspect` and `scalefactor`. Thoughts?" />
      <Message Id="3203044" ParentId="293" UserId="4196" Date="12/19/2011 13:26:30" Content="I'm not sure I see why you need so many options - to me,  the only sensible scalings are area constant,  or area proportional to sample size." />
      <Message Id="3204960" ParentId="293" UserId="86978" Date="12/19/2011 15:58:29" Content="@hadley &#xD;&#xA;&#xD;&#xA;&gt; I'm not sure I see why you need so many options - to me,  the only sensible scalings are area constant,  or area proportional to sample size.&#xD;&#xA;&#xD;&#xA;I'm inclined to agree that scaling the max width isn't all that useful -- but for whatever reason that does seem to be the standard convention with violin plots. That's why width scaling is in there,  and the default. If you're sure,  I'm happy to take it out and have only scaling by area." />
      <Message Id="3207359" ParentId="293" UserId="86978" Date="12/19/2011 18:34:19" Content="OK,  I made most of the changes and pushed them. The only things that remain are choosing the scale parameters and documenting them. @hadley,  I'll make the changes once you let me know if you're sure that you don't want width scaling at all." />
      <Message Id="3212568" ParentId="293" UserId="4196" Date="12/20/2011 01:04:55" Content="Unless you strongly object,  I'd suggest getting rid of width scaling." />
      <Message Id="3213423" ParentId="293" UserId="86978" Date="12/20/2011 02:43:24" Content="I removed the width scaling option. Now there's just `scalefactor` which can be `equal` or `count`. I also added docs,  and changed pos_dodge to use the method you mentioned. I didn't run roxygenize because of the NAMESPACE issue." />
      <Message Id="3213474" ParentId="293" UserId="4196" Date="12/20/2011 02:50:00" Content="How about `scale = &quot;fixed&quot;` or `&quot;free&quot;`?  Would be nice parallel to facets" />
      <Message Id="3214200" ParentId="293" UserId="463252" Date="12/20/2011 04:14:28" Content="`&quot;fixed&quot;` and `&quot;free&quot;` are not a natural parallel,  though.  From that,  I'm not sure which is which.  I'm guessing `&quot;fixed&quot;` would be equal (fixed to the same size,  as the facets are fixed to the same scale),  and `&quot;free&quot;` would be scaled to the count (free to expand to the data's size),  but I could probably come up with just as good explanation for the other way around.  I think it is better to go with more descriptive options (`&quot;equal&quot;` and `&quot;count&quot;`),  though calling the parameter just `scale` seems reasonable." />
      <Message Id="3214770" ParentId="293" UserId="86978" Date="12/20/2011 05:32:41" Content="I have to agree with @BrianDiggs's assessment of fixed and free. It's not obvious which one would mean &quot;scale areas to be equal&quot; and which would mean &quot;scale area by counts&quot;. `scale` does sound reasonable for a parameter name,  though." />
      <Message Id="3218914" ParentId="293" UserId="4196" Date="12/20/2011 13:45:20" Content="Agreed - I like scale,  count and equal." />
      <Message Id="3223739" ParentId="293" UserId="86978" Date="12/20/2011 19:20:53" Content="OK,  changed it to scale,  count,  and equal." />
      <Message Id="3229129" ParentId="293" UserId="4196" Date="12/21/2011 03:39:42" Content="Could you please also add a note to NEWS and then we'll be ready to go." />
      <Message Id="3230782" ParentId="293" UserId="86978" Date="12/21/2011 07:57:34" Content="OK,  I added a NEWS item and some visual tests. A heads up: I just tried merging,  and it looks like there will be a small conflict in NEWS." />
      <Message Id="3234064" ParentId="293" UserId="4196" Date="12/21/2011 14:13:01" Content="Do you mind rebasing your branch against master?  I think it's slightly easier to do from your end." />
      <Message Id="3236604" ParentId="293" UserId="86978" Date="12/21/2011 17:21:50" Content="OK,  it should be good to go." />
    </Messages>
  </Topic>
  <Topic Id="294" Title="Books of ggplot2">
    <Messages>
      <Message Id="0" ParentId="294" UserId="507671" Date="12/13/2011 03:44:55" Content="Seemingly,  there are big changes in ggplot2 v0.9. So,  if there is something out of date in  your book (ggplot2  Elegant Graphics for Data Analysis)? Do you plan to update the book? " />
      <Message Id="3129158" ParentId="294" UserId="463252" Date="12/13/2011 20:32:20" Content="Hopefully,  all the code and ggplot produced graphics in the book exist in a reproducible (aka,  runnable) form.  If so,  that source file should be run against the new version and any code that gives errors could be annotated on a wiki page devoted to example updates for version 0.9.&#xD;&#xA;&#xD;&#xA;Even if a new edition of the book is made/printed,  this would be useful for those of us with the original edition that wouldn't necessarily buy every edition (sorry,  Hadley)." />
      <Message Id="3147097" ParentId="294" UserId="4196" Date="12/14/2011 19:36:02" Content="At some point in the future,  but I don't have immediate plans.  I agree it would be useful to flag any changes in the book,  but I don't currently have time to do that.  " />
    </Messages>
  </Topic>
  <Topic Id="295" Title="Fix a bug in facet-null layout mapping when unusual column name (e.g.,  `0%`) is used.">
    <Messages>
      <Message Id="0" ParentId="295" UserId="227097" Date="12/13/2011 14:22:57" Content="Here is the bug report (from boxplot example):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; abc &lt;- adply(matrix(rnorm(100),  ncol = 5),  2,  quantile,  c(0,  .25,  .5,  .75,  1))&#xD;&#xA;&gt; ggplot(abc,  aes(x = X1,  ymin = `0%`,  lower = `25%`,  middle = `50%`,  upper = `75%`,  ymax = `100%`)) +&#xD;&#xA;+   geom_boxplot(stat = &quot;identity&quot;)&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object '0%' not found&#xD;&#xA;&gt; ggplot(abc,  aes(x = X1,  y = `50%`)) + geom_point()&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object '50%' not found&#xD;&#xA;&gt; abc&#xD;&#xA;  X1        0%        25%         50%       75%     100%&#xD;&#xA;1  1 -1.714925 -0.6468398  0.17065804 0.4393230 1.201247&#xD;&#xA;2  2 -1.189586 -0.6724862 -0.09751418 0.4884423 1.134490&#xD;&#xA;3  3 -1.689927 -0.3296100  0.23288596 0.5751145 2.424042&#xD;&#xA;4  4 -1.504052 -0.8237122 -0.33161341 0.3219800 1.507830&#xD;&#xA;5  5 -2.463395 -0.7655001 -0.27450750 0.1631618 1.648378&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This is because `transform` in `facet_map_layout.null` changes the column name.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; transform(abc,  P=1)&#xD;&#xA;  X1       X0.       X25.         X50.      X75.    X100. P&#xD;&#xA;1  1 -2.584666 -0.5943572  0.200944872 0.7742156 2.166626 1&#xD;&#xA;2  2 -2.115618 -0.4283542  0.004670815 0.3936428 1.808468 1&#xD;&#xA;3  3 -2.638751 -0.7368470 -0.265173043 0.4781000 1.571617 1&#xD;&#xA;4  4 -1.476560 -0.3720931  0.182308241 0.8797875 1.924785 1&#xD;&#xA;5  5 -2.999939 -0.6789793 -0.214186432 1.0083131 1.775713 1&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;fixed it." />
      <Message Id="3202994" ParentId="295" UserId="4196" Date="12/19/2011 13:21:05" Content="Thanks - in general,  I want to eliminate all use of `with`,  `subset`,  `transform` etc in ggplot2 code." />
    </Messages>
  </Topic>
  <Topic Id="296" Title="Fix a bug in the outlier handling of boxplot (fixed #99,  thanks to wch).">
    <Messages>
      <Message Id="0" ParentId="296" UserId="227097" Date="12/13/2011 14:26:06" Content="" />
    </Messages>
  </Topic>
  <Topic Id="297" Title="Setting breaks=NA on a continuous x or y axis results in error">
    <Messages>
      <Message Id="0" ParentId="297" UserId="86978" Date="12/14/2011 08:42:57" Content="Setting `breaks=NA` on a continuous x or y axis results in an error.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=1:3,  y=1:3)&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_x_continuous(breaks=NA)&#xD;&#xA;# Error in if (max(limits) &gt; max(b)) b &lt;- c(b,  b[ length(b) ] + bd) : &#xD;&#xA;#   missing value where TRUE/FALSE needed&#xD;&#xA;# In addition: Warning message:&#xD;&#xA;# In min(b) : no non-missing arguments to min; returning Inf&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It looks like the problem is in the calculation of minor breaks,  at line 296 in `scale-.r`.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Here's some skeleton test code for testing that continuous scales in general work with `breaks=NA`. It's skeleton because I don't know exactly what to `expect`. &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that('Continuous scales work with breaks=NA',  { &#xD;&#xA;  dat &lt;- data.frame(x=1:3,  y=1:3)&#xD;&#xA;&#xD;&#xA;  px &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_x_continuous(breaks=NA)&#xD;&#xA;  bx &lt;- ggplot_build(px)&#xD;&#xA;  # Needs to be fleshed out: With p$panel$ranges[ [ 1 ] ],  should x.major be NULL or have NA?&#xD;&#xA;  expect_identical(&quot;???&quot;,  NA)&#xD;&#xA;  &#xD;&#xA;  py &lt;- ggplot_build(ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_y_continuous(breaks=NA))&#xD;&#xA;  by &lt;- ggplot_build(py)&#xD;&#xA;&#xD;&#xA;  # Other continuous scales&#xD;&#xA;  pcolour &lt;- ggplot(dat,  aes(x=1,  y=y,  colour=x)) + geom_point() + scale_colour_continuous(breaks=NA)&#xD;&#xA;  bcolour &lt;- ggplot_build(pcolour)&#xD;&#xA;  # expect??&#xD;&#xA;&#xD;&#xA;  pfill &lt;- ggplot(dat,  aes(x=1,  y=y,  fill=x)) + geom_point(shape=21) + scale_fill_continuous(breaks=NA)&#xD;&#xA;  bfill &lt;- ggplot_build(pfill)&#xD;&#xA;  &#xD;&#xA;  palpha &lt;- ggplot(dat,  aes(x=1,  y=y,  alpha=x)) + geom_point() + scale_alpha_continuous(breaks=NA)&#xD;&#xA;  balpha &lt;- ggplot_build(palpha)&#xD;&#xA;&#xD;&#xA;  psize &lt;- ggplot(dat,  aes(x=1,  y=y,  size=x)) + geom_point() + scale_size_continuous(breaks=NA)&#xD;&#xA;  bsize &lt;- ggplot_build(psize)&#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;It appears that some of these can't be built with ggplot_build (x and y),  some can be built but not rendered (alpha,  size),  and others build and render fine (colour,  fill).&#xD;&#xA;" />
      <Message Id="3138951" ParentId="297" UserId="227097" Date="12/14/2011 12:37:52" Content="@wch thank you for this bug report. The commit above 2ae13ad will fix the problem in positional scale. Could you please test again?&#xD;&#xA;&#xD;&#xA;The errors of alpha and size is another problem. While `scale_colour_continuous` and `scale_fill_continuous` have `na.value` as non-NA,  they have `na.value` as `NA`. This causes the problem in legend guide. So I will fix it. Thanks." />
      <Message Id="3139217" ParentId="297" UserId="4196" Date="12/14/2011 13:08:44" Content="Tiny note - if you're testing scales,  it's better to test them directly,  rather than creating the entire graphic (where many other things can go wrong).  See the `scale-r.` for a list of scale methods.  That will also make it easier to know what to expect." />
      <Message Id="3139316" ParentId="297" UserId="227097" Date="12/14/2011 13:18:31" Content="so,  the test code should be like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;sc &lt;- scale_x_continuous(breaks=NA)&#xD;&#xA;scale_train(sc,  1:3)&#xD;&#xA;expect_identical(scale_breaks(sc),  NA)&#xD;&#xA;expect_identical(scale_breaks_minor(sc),  NULL)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3160661" ParentId="297" UserId="4196" Date="12/15/2011 13:04:18" Content="@koshke would you mind bundling your changes + the test into a pull request?  Thanks!" />
      <Message Id="3167855" ParentId="297" UserId="86978" Date="12/15/2011 19:52:44" Content="@kohske - Thanks for explaining how to do tests on the scales. Running tests on the scales seem to work OK with your fixes. Visual tests don't all work,  though. I still get NA legends for fill and colour.&#xD;&#xA;&#xD;&#xA;Scale tests: (note: I included minor break tests only for x and y - I didn't think they're needed for others,  but I could be wrong.)&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# X&#xD;&#xA;sxc &lt;- scale_x_continuous(breaks=NA)&#xD;&#xA;scale_train(sxc,  1:3)&#xD;&#xA;expect_identical(scale_breaks(sxc),  NA)&#xD;&#xA;expect_identical(scale_breaks_minor(sxc),  NULL)&#xD;&#xA;&#xD;&#xA;# Y&#xD;&#xA;syc &lt;- scale_y_continuous(breaks=NA)&#xD;&#xA;scale_train(syc,  1:3)&#xD;&#xA;expect_identical(scale_breaks(syc),  NA)&#xD;&#xA;expect_identical(scale_breaks_minor(syc),  NULL)&#xD;&#xA;&#xD;&#xA;# Alpha&#xD;&#xA;sac &lt;- scale_alpha_continuous(breaks=NA)&#xD;&#xA;scale_train(sac, 1:3)&#xD;&#xA;expect_identical(scale_breaks(sac),  NA)&#xD;&#xA;&#xD;&#xA;# Size&#xD;&#xA;ssc &lt;- scale_size_continuous(breaks=NA)&#xD;&#xA;scale_train(ssc, 1:3)&#xD;&#xA;expect_identical(scale_breaks(ssc),  NA)&#xD;&#xA;&#xD;&#xA;# Fill&#xD;&#xA;sfc &lt;- scale_fill_continuous(breaks=NA)&#xD;&#xA;scale_train(sfc, 1:3)&#xD;&#xA;expect_identical(scale_breaks(sfc),  NA)&#xD;&#xA;&#xD;&#xA;# Colour&#xD;&#xA;scc &lt;- scale_colour_continuous(breaks=NA)&#xD;&#xA;scale_train(scc, 1:3)&#xD;&#xA;expect_identical(scale_breaks(scc),  NA)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Visual tests:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=1:3,  y=1:3)&#xD;&#xA;&#xD;&#xA;# These are OK&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_x_continuous(breaks=NA)&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + scale_y_continuous(breaks=NA)&#xD;&#xA;ggplot(dat,  aes(x=1,  y=y,  alpha=x)) + geom_point() + scale_alpha_continuous(breaks=NA)&#xD;&#xA;ggplot(dat,  aes(x=1,  y=y,  size=x)) + geom_point() + scale_size_continuous(breaks=NA)&#xD;&#xA;&#xD;&#xA;# Not OK&#xD;&#xA;ggplot(dat,  aes(x=1,  y=y,  fill=x)) + geom_point(shape=21) + scale_fill_continuous(breaks=NA)&#xD;&#xA;ggplot(dat,  aes(x=1,  y=y,  colour=x)) + geom_point() + scale_colour_continuous(breaks=NA)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3178941" ParentId="297" UserId="227097" Date="12/16/2011 16:09:18" Content="@wch thanks for the test code. Now all problems seem to have been fixed.&#xD;&#xA;&#xD;&#xA;@hadley As this branch has conflicts with `fix/guides` in your repository,  I merged this branch into the `fix/guides` and pushed it to your repository. Could you please merge it into `master`?&#xD;&#xA;Or,  if pull request is preferable for you,  I will push the `fix/guides` to my repository and then send pull request.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3236679" ParentId="297" UserId="227097" Date="12/21/2011 17:26:40" Content="This had been fixed before merging into fix/guides branch (9cd9483e63ff99a67b23055616a965099d316abf) ,  but now error again.&#xD;&#xA;I'm now inspecting." />
    </Messages>
  </Topic>
  <Topic Id="298" Title="stat_smooth: level has no effect with loess">
    <Messages>
      <Message Id="0" ParentId="298" UserId="86978" Date="12/14/2011 20:17:18" Content="I think this is a bug,  or at the very least a problem with documentation. Someone emailed me asking about confidence intervals for loess fits. He was only able to get 68% confidence intervals.&#xD;&#xA;&#xD;&#xA;These look the same:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(cars,  aes(x=speed,  y=dist)) + geom_point() + stat_smooth()&#xD;&#xA;&#xD;&#xA;ggplot(cars,  aes(x=speed,  y=dist)) + geom_point() + stat_smooth(level=.2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;According to the docs for `predict.loess()`,  it doesn't actually support the `level` argument.&#xD;&#xA;&#xD;&#xA;In `stat-smooth-methods.r`,  it looks like it's trying to make predictions with the `level` and `interval` arguments,  even though they're not supported by `predict.loess`.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;predictdf.loess &lt;- function(model,  xseq,  se,  level) { &#xD;&#xA;  pred &lt;- stats::predict(model,  newdata = data.frame(x = xseq),  se = se, &#xD;&#xA;    level = level,  interval = if(se) &quot;confidence&quot; else &quot;none&quot;)&#xD;&#xA;...&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The docs for stat_smooth say that you can change the level -- if this isn't actually possible for loess,  then it should probably be noted.&#xD;&#xA;&#xD;&#xA;Also,  it looks like `predict.loess` isn't exported from `stats`,  even though other predict functions are. I wonder if that's a bug.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; stats::predict.loess&#xD;&#xA;Error: 'predict.loess' is not an exported object from 'namespace:stats'&#xD;&#xA;&#xD;&#xA;&gt; stats::predict.lm&#xD;&#xA;function (object,  newdata,  se.fit = FALSE,  scale = NULL,  df = Inf,  &#xD;&#xA;    interval = c(&quot;none&quot;,  &quot;confidence&quot;,  &quot;prediction&quot;),  level = 0.95,  &#xD;&#xA;...&#xD;&#xA;...&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3149886" ParentId="298" UserId="86978" Date="12/14/2011 21:11:18" Content="Here's a version of `predictdf.loess` implements `level` for confidence intervals. It uses the t distribution to calculate,  as suggested in the docs for `predict.loess`.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;predictdf.loess &lt;- function(model,  xseq,  se,  level) { &#xD;&#xA;  pred &lt;- stats::predict(model,  newdata = data.frame(x = xseq),  se = se)&#xD;&#xA;&#xD;&#xA;  if (se) { &#xD;&#xA;    y = pred$fit&#xD;&#xA;    ci &lt;- pred$se.fit * qt(level / 2 + .5,  pred$df)&#xD;&#xA;    ymin = y - ci&#xD;&#xA;    ymax = y + ci&#xD;&#xA;    data.frame(x = xseq,  y,  ymin,  ymax,  se = pred$se.fit)&#xD;&#xA;   } else { &#xD;&#xA;    data.frame(x = xseq,  y = as.vector(pred))&#xD;&#xA;   }&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'm pretty sure that this is the right way to do it,  but I'm not an expert here,  so this should probably be vetted by someone who knows this stuff better. I can submit as a pull request if this looks OK.&#xD;&#xA;" />
      <Message Id="3160734" ParentId="298" UserId="4196" Date="12/15/2011 13:11:11" Content="Duplicate of #168,  but I'll close that one since it has no info.  &#xD;&#xA;&#xD;&#xA;Could you please circulate your fix on the mailing list to see anyone know if it's actually t-distributed?  (I would have guessed z)&#xD;&#xA;&#xD;&#xA;Finally,  it's better to use `#' @importFrom stats predict` rather than `stats::predict`" />
      <Message Id="3167501" ParentId="298" UserId="86978" Date="12/15/2011 19:29:25" Content="Here's a bit more I've found suggesting that it's the t distribution.&#xD;&#xA;&#xD;&#xA;From the `predict.loess` help page:&#xD;&#xA;df: an estimate of the effective degrees of freedom used in estimating the residual scale,  intended for use with t-based confidence intervals.&#xD;&#xA;&#xD;&#xA;In Cleveland,  Devlin,  Grosse 1988,  they calculate confidence intervals using t. I've also seen some references to Cleveland and Grosse 1991 mentioning the t-distribution." />
      <Message Id="3189812" ParentId="298" UserId="4196" Date="12/17/2011 15:23:33" Content="Ok,  I think t-based intervals are at least a reasonable approximation.  Would you mind putting together a pull request with a little bit of documentation?" />
      <Message Id="3193558" ParentId="298" UserId="86978" Date="12/18/2011 07:10:20" Content="I added just one example to the help for stat_smooth - I hope that's what you meant by documentation. If not,  let me know.&#xD;&#xA;&#xD;&#xA;An aside: The help file for `predict.loess` says that it returns a list with `se` containing standard errors,  but it's actually `se.fit`. I used the latter,  as in `pred$se.fit`,  even though `pred$se` actually works OK because of R's weird variable name completion. I don't know if it matters,  but the `predictdf.glm` function in stat-smooth-methods.r actually references `pred$se` when it should properly be `pred$se.fit`." />
    </Messages>
  </Topic>
  <Topic Id="299" Title="When range( x ) or range( y ) is large,  round_any( x ,  floor ) returns incorrect number">
    <Messages>
      <Message Id="0" ParentId="299" UserId="1266331" Date="12/15/2011 20:01:25" Content="When the range of x or y is large,  the function round_any returns a number out of range for the lower bound resulting in a shape parameter that is too large.  This then results in a request for an inordinate amount of RAM which causes qplot to fail.&#xD;&#xA;&#xD;&#xA;Here is a small reproduce:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; a &lt;- data.frame( x = c( 1351425 ,  2865880767 ,  1351425 ,  2865880767 ) ,  y = c( 0.0254 ,  -0.370578048780488 ,  -0.399846341463415 ,  0.613065853658537 ) )&#xD;&#xA;&gt; b &lt;- qplot( x ,  y ,  data = a ,  geom = &quot;hex&quot; )&#xD;&#xA;&gt; print( b )&#xD;&#xA;Error in vector(&quot;integer&quot;,  length) : vector size specified is too large&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The offending lines of code follow:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; grep -Rn round_any ggplot2/R/stat-binhex.r&#xD;&#xA;&#xD;&#xA;61:    round_any(min(x),  binwidth[ 1 ],  floor) - 1e-6, &#xD;&#xA;62:    round_any(max(x),  binwidth[ 1 ],  ceiling) + 1e-6&#xD;&#xA;67:    round_any(min(y),  binwidth[ 1 ],  floor) - 1e-6, &#xD;&#xA;68:    round_any(max(y),  binwidth[ 2 ],  ceiling) + 1e-6&#xD;&#xA;``&#xD;&#xA;" />
      <Message Id="3169940" ParentId="299" UserId="1266331" Date="12/15/2011 22:09:42" Content="One other bug here is:&#xD;&#xA;&#xD;&#xA;    ybnds &lt;- c(round_any(min(y),  binwidth[ 1 ],  floor) - 1e-06,  round_any(max(y),  binwidth[ 2 ],  ceiling) + 1e-06)&#xD;&#xA;&#xD;&#xA;in hexBin should read:&#xD;&#xA;&#xD;&#xA;    ybnds &lt;- c(round_any(min(y),  binwidth[ 2 ],  floor) - 1e-06,  round_any(max(y),  binwidth[ 2 ],  ceiling) + 1e-06)&#xD;&#xA;" />
      <Message Id="3170353" ParentId="299" UserId="1266331" Date="12/15/2011 22:38:10" Content="Fixing the index on binwidth for the lower bound of y should be sufficient to close the bug.&#xD;&#xA;&#xD;&#xA;Here is the original shape parameter calculated using the original code:&#xD;&#xA;&#xD;&#xA;    shape = 91226242 &#xD;&#xA;&#xD;&#xA;This is the original x information:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;x = 1351425 2865880767 1351425 2865880767 &#xD;&#xA;xbins = 31 &#xD;&#xA;xbnds = -10e-07 2960013653 &#xD;&#xA;binwidth[ 1 ] = 95484311 &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Notice that the lower bound of x goes to zero as the binwidth gets large.  This is not a problem as the difference between ~0 and min( x ) = 1351425 is small when max( x ) = 2865880767.  But it probably should be rectified.&#xD;&#xA;&#xD;&#xA;Here is the original y information:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;y = 0.0254 -0.370578 -0.3998463 0.6130659 &#xD;&#xA;ybnds = -95484311 0.6415121 &#xD;&#xA;ybins = 2828013499 &#xD;&#xA;binwidth[ 2 ] =  0.03376374 &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Notice that the lower bound on y is calculated incorrectly as it is using the binwidth from x.  This causes the number of ybins to explode and the shape parameter to do likewise.&#xD;&#xA;&#xD;&#xA;The lower bound on y using the wrong binwidth index:&#xD;&#xA;&#xD;&#xA;    ybnds[ 1 ] = -95484311 &#xD;&#xA;&#xD;&#xA;The lower bound on y using the right binwidth index:&#xD;&#xA;&#xD;&#xA;    ybnds[ 1 ] = -0.4051659 &#xD;&#xA;&#xD;&#xA;The upper bound on y:&#xD;&#xA;&#xD;&#xA;   ybnds[ 2 ] = 0.6415121 &#xD;&#xA;&#xD;&#xA;The new ybins when using the correct lower bound caclulation:&#xD;&#xA;&#xD;&#xA;   ybins = 31.00006 &#xD;&#xA;&#xD;&#xA;and the new shape parameter:&#xD;&#xA;&#xD;&#xA;    shape = 1.000002 &#xD;&#xA;&#xD;&#xA;The code then runs to completion when that one index change was made.&#xD;&#xA;&#xD;&#xA;Dave H" />
      <Message Id="3176526" ParentId="299" UserId="4196" Date="12/16/2011 12:15:43" Content="Thanks for the bug report and investigation - will fix soon." />
    </Messages>
  </Topic>
  <Topic Id="300" Title="stat_smooth: fix confidence intervals for loess (Fix #298)">
    <Messages>
      <Message Id="0" ParentId="300" UserId="86978" Date="12/18/2011 07:43:40" Content="" />
    </Messages>
  </Topic>
  <Topic Id="301" Title="Proof read NEWS">
    <Messages>
      <Message Id="0" ParentId="301" UserId="4196" Date="12/19/2011 13:35:07" Content="" />
      <Message Id="3227392" ParentId="301" UserId="949275" Date="12/20/2011 23:51:47" Content="Looks good for the most part. I'd suggest the following minor changes:&#xD;&#xA;&#xD;&#xA;FACETS section:&#xD;&#xA;&quot;New `facet_null` used when for no facetting.&quot; How about something like &quot;The new facet_null() function is applied in the default case of no faceting.&quot;  [ or facetting,  if you prefer ]&#xD;&#xA;&#xD;&#xA;GUIDES section:&#xD;&#xA;Point 2:   &quot;Axis is not yet moved&quot; might be better phrased as &quot;Axes are not yet moved...&quot;&#xD;&#xA;Point 5:    usefull -&gt; useful&#xD;&#xA;&#xD;&#xA;Hope this is helpful.&#xD;&#xA;Dennis" />
      <Message Id="3235298" ParentId="301" UserId="4196" Date="12/21/2011 15:47:45" Content="Thanks - also made a number of improvements in 1d4cc9a148404ac93d35cf93ca103ae303754765" />
    </Messages>
  </Topic>
  <Topic Id="302" Title="Ensure all arguments are documented">
    <Messages>
      <Message Id="0" ParentId="302" UserId="4196" Date="12/19/2011 13:35:41" Content="Run `check_doc` until no errors found." />
      <Message Id="3301114" ParentId="302" UserId="4196" Date="12/29/2011 14:40:03" Content="Done!" />
      <Message Id="3301229" ParentId="302" UserId="227097" Date="12/29/2011 14:52:50" Content="Congrats!!" />
    </Messages>
  </Topic>
  <Topic Id="303" Title="Feature/wdotplot">
    <Messages>
      <Message Id="0" ParentId="303" UserId="86978" Date="12/20/2011 01:03:07" Content="This is an implementation of dot plots.&#xD;&#xA;&#xD;&#xA;I made this branch off of feature/geom-violin,  so it looks like this pull request includes some of those previous commits. Hopefully this isn't a problem. I tested merging everything into the current hadley/master branch,  and it seems to work.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Some things are strange because of dots are visually stacked. Notes:&#xD;&#xA;&#xD;&#xA;* When binning along x axis,  the y dimensions are arbitrary. This is because the vertical positioning of the the dots is done by the grob. I don't think it's possible to have correct y dimensions with ggplot2. (Something similar happens when binning along y axis,  but the width is set so that each cluster will be dodged properly.)&#xD;&#xA;* For the same reasons,  the y axis label and tick labels aren't meaningful.&#xD;&#xA;* When binning along x axis,  pos_stack doesn't work because of the strange y dimensions. Stacking wouldn't be impossible to implement,  but it would be a big hack (and it wouldn't use pos_stack).&#xD;&#xA;* There is a fair bit of complexity. Part of it is because binning can be done on x or y,  and part of it is because there are two methods of binning. Instead of adding the &quot;histodot&quot; option,  I'd prefer to simply use stat_bin,  but it doesn't allow binning along the y axis.&#xD;&#xA;&#xD;&#xA;I'm going to try to implement the smoothing algorithm from Wilkinson (1999) p. 6,  but I find it confusing at the moment.&#xD;&#xA;&#xD;&#xA;Some examples here:&#xD;&#xA;https://github.com/wch/ggplot2/wiki/geom_dotplot" />
      <Message Id="3213551" ParentId="303" UserId="4196" Date="12/20/2011 02:59:36" Content="A few test cases would make me feel much more comfortable..." />
      <Message Id="3213973" ParentId="303" UserId="86978" Date="12/20/2011 03:34:34" Content="@hadley I have a battery of visual tests for this,  and for violin plots. Should I add them?&#xD;&#xA;&#xD;&#xA;Also,  what do you think about adding a title to each visual test describing what it's testing and what it should look like? I think that would be helpful." />
      <Message Id="3218941" ParentId="303" UserId="4196" Date="12/20/2011 13:48:06" Content="Visual tests are helpful,  but I'd really prefer some automated ones,  especially for the dodging.  That makes it much less likely I'll accidentally break them if I need to modify the code." />
      <Message Id="3241490" ParentId="303" UserId="4196" Date="12/21/2011 23:45:49" Content="I also wonder why the fill is lost in this case:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(dat,  aes(x,  fill=g,  group= 1)) +&#xD;&#xA;  geom_dotplot(binwidth=.4,  alpha=.4,  binpositions=&quot;all&quot;,  position=&quot;stack&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;(adapted from the &quot;Multiple groups with aligned bins, \n stacked (currently doesn't work)&quot; example in the visual tests)" />
      <Message Id="3241502" ParentId="303" UserId="4196" Date="12/21/2011 23:48:18" Content="I like the idea of using titles on the visual tests - eventually the visual tests will be run automatically (so we can use git to compare the output),  and the filenames could be generated by hashing their titles." />
      <Message Id="3242221" ParentId="303" UserId="86978" Date="12/22/2011 01:12:19" Content="Regarding titles on visual tests,  how about a wrapper function similar to `testthat`? Instead of `opts(title=&quot;mytitle&quot;)`,  it could be something like `visualtest(&quot;mytitle&quot;,   {  ggplot() + ...  } )`. Also,  it would be nice if the wrapper did line breaks in the titles automatically. " />
      <Message Id="3242365" ParentId="303" UserId="4196" Date="12/22/2011 01:34:19" Content="Maybe a combination of the two - it might be easier to supply the path where the image should be saved so you can more easily locate the corresponding code. Ideally,  the visual testing infrastructure would also create an html page for previewing all images in one test." />
      <Message Id="3242463" ParentId="303" UserId="86978" Date="12/22/2011 01:47:43" Content="If it's an html page,  I guess you wouldn't need to put the titles in the graphs themselves; they could go in the web page. Another possibly useful feature would be to have two columns of images: one column with old images (from the last test run) and another with new images. That way it would be easy to inspect for important changes,  even when there's a small change that alters the image files,  but in a visually trivial way,  like a change in border spacing,  gridline width,  antialiasing,  and so on.&#xD;&#xA;&#xD;&#xA;It might also be useful to have another column that indicates whether the image has changed byte-for-byte.&#xD;&#xA;" />
      <Message Id="3242506" ParentId="303" UserId="227097" Date="12/22/2011 01:54:23" Content="Do you know this one?&#xD;&#xA;https://github.com/cameronmcefee/Image-Diff-View-Modes&#xD;&#xA;&#xD;&#xA;github has diff-for-picture mode. I know it just now.&#xD;&#xA;&#xD;&#xA;So a diff commits looks like this: https://github.com/cameronmcefee/Image-Diff-View-Modes/commit/8e95f70c9c47168305970e91021072673d7cdad8&#xD;&#xA;&#xD;&#xA;cool." />
      <Message Id="3242572" ParentId="303" UserId="86978" Date="12/22/2011 02:04:33" Content="@hadley &#xD;&#xA;&#xD;&#xA;&gt; I also wonder why the fill is lost in this case&#xD;&#xA;&#xD;&#xA;I think it gets lost at the stat-ing stage. It also happens for regular histograms:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(112)&#xD;&#xA;dat &lt;- data.frame(x=rnorm(20),  g=LETTERS[ 1:2 ])&#xD;&#xA;&#xD;&#xA;# Colors&#xD;&#xA;ggplot(dat,  aes(x,  fill=g)) + geom_histogram(binwidth=.4)&#xD;&#xA;&#xD;&#xA;# Colors gone&#xD;&#xA;ggplot(dat,  aes(x,  fill=g,  group=1)) + geom_histogram(binwidth=.4)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I just tested in 0.8.9,  and it happens there too." />
      <Message Id="3253491" ParentId="303" UserId="86978" Date="12/22/2011 19:10:36" Content="@kohske that is very cool. It seems a little slow,  though. And does it need to be viewed through github? I wonder how hard it would be to generate a static webpage with three columns of pictures: Old,  New,  and Difference." />
      <Message Id="3261254" ParentId="303" UserId="4196" Date="12/23/2011 14:20:58" Content="Ah ok,  so for dotplot groups work like geom_histogram,  rather than like geom_point.  That makes sense now that I think about it.  &#xD;&#xA;&#xD;&#xA;And please see #319 for discussion of a better visual testing framework." />
    </Messages>
  </Topic>
  <Topic Id="304" Title="stat_boxplot: fix inverted whiskers">
    <Messages>
      <Message Id="0" ParentId="304" UserId="86978" Date="12/20/2011 07:15:27" Content="This fixes one part of #108." />
      <Message Id="3215520" ParentId="304" UserId="86978" Date="12/20/2011 07:19:31" Content="The problem was that sometimes the hinges are at interpolated values,  but the calculation for whiskers -- after removing outliers -- used only actual data values. I changed it to get the range of the data _and_ hinges." />
    </Messages>
  </Topic>
  <Topic Id="305" Title="bug fix: now axis.line is drawn on panel.background (#78)">
    <Messages>
      <Message Id="0" ParentId="305" UserId="227097" Date="12/20/2011 14:19:38" Content="This fix is not merged into master so here is a pull request.&#xD;&#xA;" />
      <Message Id="3315324" ParentId="305" UserId="4196" Date="12/30/2011 17:43:11" Content="What's the best way to fix this problem in general?  Add a z column to gtable and order by that prior to drawing?  " />
      <Message Id="6174540" ParentId="305" UserId="4196" Date="06/07/2012 12:21:43" Content="@wch this should be trivial with gtable's z support." />
      <Message Id="6369711" ParentId="305" UserId="227097" Date="06/16/2012 00:52:41" Content="And also may I close this pull request?" />
      <Message Id="6373201" ParentId="305" UserId="4196" Date="06/16/2012 13:28:21" Content="Yeah,  I think we'll implement it differently." />
    </Messages>
  </Topic>
  <Topic Id="306" Title="Bug fixes for guides">
    <Messages>
      <Message Id="0" ParentId="306" UserId="227097" Date="12/20/2011 14:24:49" Content="This branch includes some bug fixes for guides.&#xD;&#xA;Could you please look over the changes?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="307" Title="Fix a bug in minor breaks calculation (with some test codes).">
    <Messages>
      <Message Id="0" ParentId="307" UserId="227097" Date="12/20/2011 14:27:09" Content="Bug fix for scales.&#xD;&#xA;" />
      <Message Id="3236243" ParentId="307" UserId="227097" Date="12/21/2011 16:55:58" Content="I had merged this fix/scales branch into fix/guides branch. These two are so closely related." />
    </Messages>
  </Topic>
  <Topic Id="308" Title="Add an interface to get guide grobs.">
    <Messages>
      <Message Id="0" ParentId="308" UserId="227097" Date="12/20/2011 16:03:09" Content="a quick hack to get a guide grob.&#xD;&#xA;If you need a same way with the previous version (i.e.,  opts(keep = &quot;legend&quot;),  probably I can do it.&#xD;&#xA;Please let me know." />
      <Message Id="3222298" ParentId="308" UserId="4196" Date="12/20/2011 17:40:33" Content="Can we not do this more directly by manipulating the gtable object?" />
      <Message Id="3222439" ParentId="308" UserId="227097" Date="12/20/2011 17:52:00" Content="Possible and not difficult (actually my initial idea) but isn't it time consuming?&#xD;&#xA;It requires to build all geoms twice -- one for panel and one for gudies.&#xD;&#xA;&#xD;&#xA;Another approach is like &quot;removing guides from gtable.&quot;&#xD;&#xA;In this case,  no need to buide twice. But maybe somewhat indirect." />
      <Message Id="3222480" ParentId="308" UserId="4196" Date="12/20/2011 17:55:11" Content="I don't care about performance ;)  I'd rather make something simple and then make ggplot2 fast enough that it doesn't matter too much.  But using gtable should (eventually) have other advantages like being able to make the legend a fixed size." />
      <Message Id="3222510" ParentId="308" UserId="227097" Date="12/20/2011 17:57:52" Content="OK. Then I will rewrite it. " />
      <Message Id="3222691" ParentId="308" UserId="227097" Date="12/20/2011 18:10:17" Content="Will you implement some `remove grob` interface for gtable?" />
      <Message Id="3224928" ParentId="308" UserId="4196" Date="12/20/2011 20:40:34" Content="Yes,  I can.  That would be a better way to implement this code (and would handle null results etc).  Could you please open a request?" />
      <Message Id="6174481" ParentId="308" UserId="4196" Date="06/07/2012 12:17:33" Content="@wch this should be something that's easy to do with gtable - I don't think it should be an argument in ggplot2." />
      <Message Id="6369707" ParentId="308" UserId="227097" Date="06/16/2012 00:52:13" Content="So may I close this pull request?" />
    </Messages>
  </Topic>
  <Topic Id="309" Title="scale_gradient default colours should hold hue constant">
    <Messages>
      <Message Id="0" ParentId="309" UserId="4196" Date="12/20/2011 20:37:41" Content=" and vary chroma and luminance.  Pick hue with largest chroma range." />
    </Messages>
  </Topic>
  <Topic Id="310" Title="flexible interface for gtable">
    <Messages>
      <Message Id="0" ParentId="310" UserId="227097" Date="12/21/2011 02:02:01" Content="e.g., &#xD;&#xA;&#xD;&#xA;- extract a grob&#xD;&#xA;- remove grobs&#xD;&#xA;- remove cols/rows&#xD;&#xA;- flip cols/rows&#xD;&#xA;&#xD;&#xA;see also #308&#xD;&#xA;" />
      <Message Id="3314868" ParentId="310" UserId="4196" Date="12/30/2011 16:58:46" Content="Could you please move this to https://github.com/hadley/gtable ?" />
      <Message Id="3315319" ParentId="310" UserId="4196" Date="12/30/2011 17:42:23" Content="Closing this because I've recreated as individual issues in gtable." />
    </Messages>
  </Topic>
  <Topic Id="311" Title="plotmath expression in legend labels">
    <Messages>
      <Message Id="0" ParentId="311" UserId="227097" Date="12/21/2011 02:57:53" Content="Two way: directly pass the expression&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(1:3,  1:3,  col=1:3) + &#xD;&#xA;  scale_colour_continuous(breaks = 1:3,  &#xD;&#xA;    labels = c(expression(alpha), expression(beta), expression(gamma)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;or,  use `parse = TRUE` option like `geom_text`&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(1:3,  1:3,  col=1:3) + &#xD;&#xA;  scale_colour_continuous(breaks = 1:3,  labels = c(&quot;alpha&quot;,  &quot;beta&quot;,  &quot;gamma&quot;),  &#xD;&#xA;    guide = guide_legend(parse = TRUE))&#xD;&#xA;&#xD;&#xA;#or&#xD;&#xA;&#xD;&#xA;qplot(1:3,  1:3,  col=1:3) + &#xD;&#xA;  scale_colour_continuous(breaks = 1:3,  labels = c(&quot;alpha&quot;,  &quot;beta&quot;,  &quot;gamma&quot;),  parse.label = TRUE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;need to write tests.&#xD;&#xA;&#xD;&#xA;see also 89e814251ddb3d5382548de799bb5d771e0355a3" />
      <Message Id="3228890" ParentId="311" UserId="4196" Date="12/21/2011 03:01:55" Content="Don't we already have the equivalent of `parse = T`,  i.e. `labels = parse_format()` ?" />
      <Message Id="3229608" ParentId="311" UserId="227097" Date="12/21/2011 04:52:23" Content="ah,  yes. so what we need is to make  `scale_labels(scale)` back to `I(scale_labels(scale))`,  right?&#xD;&#xA;&#xD;&#xA;here is some usages:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(1:3,  1:3,  col=1:3) + &#xD;&#xA;  scale_colour_continuous(breaks = 1:3,  labels = parse_format()(c(&quot;alpha&quot;,  &quot;beta&quot;,  &quot;gamma&quot;)))&#xD;&#xA;  &#xD;&#xA;# or &#xD;&#xA;&#xD;&#xA;qplot(1:3,  1:3,  col=1:3) + &#xD;&#xA;  scale_colour_continuous(breaks = 1:3,  labels = c(expression(alpha),  expression(beta),  expression(gamma)))&#xD;&#xA;&#xD;&#xA;# discrete case&#xD;&#xA;&#xD;&#xA;qplot(1:3,  1:3,  col = c(&quot;alpha&quot;,  &quot;beta&quot;,  &quot;gamma&quot;)) + scale_colour_discrete(labels = parse_format())&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3234346" ParentId="311" UserId="4196" Date="12/21/2011 14:39:13" Content="FYI the easiest way to create the vector of unevaluated calls is `.(alpha,  beta,  gamma)`" />
      <Message Id="3235683" ParentId="311" UserId="227097" Date="12/21/2011 16:17:04" Content="&gt; FYI the easiest way to create the vector of unevaluated calls is .(alpha,  beta,  gamma)&#xD;&#xA;&#xD;&#xA;wow. cool. thanks." />
    </Messages>
  </Topic>
  <Topic Id="312" Title="regression in facet_grid space = free">
    <Messages>
      <Message Id="0" ParentId="312" UserId="1241175" Date="12/21/2011 07:51:23" Content="space =  free does not seem to work as previous.&#xD;&#xA;Only the y space seems to be divided as previously,  in 0.8.9 the bars would be of equal width.&#xD;&#xA;&#xD;&#xA;Test with following code in 0.8.9 and then in github version:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;data &lt;- data.frame(x = paste(&quot;Anim&quot;,  1:17,  sep = &quot;&quot;),  y = c(sample(1:10,  15,  replace = TRUE),  &#xD;&#xA;        sample(1:2,  2,  replace = TRUE)/5),  &#xD;&#xA;    group = rep(c(rep(&quot;X&quot;,  15),  rep (&quot;Y&quot;,  2))),  stringsAsFactors = FALSE) &#xD;&#xA;&#xD;&#xA;q &lt;- ggplot(data = data,  aes(x = x,  y = y)) &#xD;&#xA;q &lt;- q + geom_bar(stat = &quot;identity&quot;) &#xD;&#xA;q &lt;- q + facet_grid(. ~ group,  scales = &quot;free&quot;,  space = &quot;free&quot;) &#xD;&#xA;print(q) &#xD;&#xA;```" />
      <Message Id="3240966" ParentId="312" UserId="4196" Date="12/21/2011 22:57:46" Content="Slightly simpler example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;data &lt;- data.frame(&#xD;&#xA;  x = paste(&quot;X&quot;,  1:6,  sep = &quot;&quot;),  &#xD;&#xA;  y = 1:6,  &#xD;&#xA;  group = rep(c(&quot;a&quot;,  &quot;b&quot;),  c(4,  2)))&#xD;&#xA;&#xD;&#xA;base &lt;- ggplot(data,  aes(x,  y)) + geom_point() &#xD;&#xA;# OK&#xD;&#xA;base + facet_grid(group ~ .,  scales = &quot;free&quot;,  space = &quot;free&quot;) &#xD;&#xA;# Problems&#xD;&#xA;base + facet_grid(. ~ group,  scales = &quot;free&quot;,  space = &quot;free&quot;) &#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="313" Title="Use waiver() instead of null">
    <Messages>
      <Message Id="0" ParentId="313" UserId="4196" Date="12/21/2011 17:02:53" Content="For scales arguments: name,  breaks,  minor_breaks,  labels,  legend.  NULL should suppress that element." />
      <Message Id="3909329" ParentId="313" UserId="227097" Date="02/10/2012 16:49:49" Content="#400 will fixes this issue for breaks,  minor_breaks,  and labels." />
    </Messages>
  </Topic>
  <Topic Id="314" Title="Guide axis: fix a conflict between #297 and #118.">
    <Messages>
      <Message Id="0" ParentId="314" UserId="227097" Date="12/21/2011 17:54:01" Content="Now `scale_{ x|y }_continuous(breaks = NA)` works again keeping the out-of-range bug out." />
    </Messages>
  </Topic>
  <Topic Id="315" Title="Better position adjustments">
    <Messages>
      <Message Id="0" ParentId="315" UserId="4196" Date="12/21/2011 22:53:48" Content="See @wch's suggestions on mailing list and #277" />
      <Message Id="35939416" ParentId="315" UserId="4196" Date="02/24/2014 21:17:43" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="316" Title="stat_contour not working on irregular datasets">
    <Messages>
      <Message Id="0" ParentId="316" UserId="446636" Date="12/22/2011 09:00:48" Content="```R&#xD;&#xA;#a nice grid and it works&#xD;&#xA;library(ggplot2)&#xD;&#xA;set.seed(12345)&#xD;&#xA;tmp &lt;- expand.grid(POINT_X = 0:35,  POINT_Y = 0:16) &#xD;&#xA;tmp$Estimate &lt;- runif(nrow(tmp)) &#xD;&#xA;ggplot(tmp,  aes(x = POINT_X,  y = POINT_Y,  z = Estimate)) + stat_contour()&#xD;&#xA;&#xD;&#xA;#adding a tiny bit of noise on the coordinates gives problems &#xD;&#xA;tmp$POINT_X &lt;- tmp$POINT_X + rnorm(nrow(tmp),  sd = 0.0001) &#xD;&#xA;tmp$POINT_Y &lt;- tmp$POINT_Y + rnorm(nrow(tmp),  sd = 0.0001) &#xD;&#xA;ggplot(tmp,  aes(x = POINT_X,  y = POINT_Y,  z = Estimate)) + stat_contour()&#xD;&#xA;```" />
      <Message Id="3247190" ParentId="316" UserId="227097" Date="12/22/2011 09:41:45" Content="Just a note:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;set.seed(12345)&#xD;&#xA;data &lt;- expand.grid(x = 0:35,  y = 0:16) &#xD;&#xA;data &lt;- mutate(data, &#xD;&#xA;  x = x + rnorm(nrow(data),  sd = 1e-4), &#xD;&#xA;  y = y + rnorm(nrow(data),  sd = 1e-4), &#xD;&#xA;  z = runif(nrow(data)))&#xD;&#xA;&#xD;&#xA;# code from StatContour$calculate&#xD;&#xA;x &lt;- sort(unique(data$x))&#xD;&#xA;y &lt;- sort(unique(data$y))&#xD;&#xA;z &lt;-  tapply(data$z,  data[ c(&quot;x&quot;,  &quot;y&quot;) ],  identity)&#xD;&#xA;&#xD;&#xA;# current implementation returns empty list&#xD;&#xA;cl &lt;- contourLines(x,  y,  z)&#xD;&#xA;&#xD;&#xA;# other methods draws nothing&#xD;&#xA;filled.contour(x,  y,  z)&#xD;&#xA;contour(x,  y,  z)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;So probably there are two approaches.&#xD;&#xA;1. If `contourLines` returens 0-length list,  show warning message and keep process further.&#xD;&#xA;2. Use another method for contour. It may be better to provide options like `method = XX` analogues to `stat_smooth`.&#xD;&#xA;I don't know which algorithms work well with this kind of irregular spatial data.&#xD;&#xA;" />
      <Message Id="3261428" ParentId="316" UserId="4196" Date="12/23/2011 14:44:28" Content="`stat_contour` now gives a warning when it generates no data.  I'd prefer to keep smoothing/interpolation and contouring separate - I think it's the job of the user to apply an appropriate method." />
      <Message Id="3261461" ParentId="316" UserId="4196" Date="12/23/2011 14:47:16" Content="Alternatively,  there may be an implementation of contouring that uses a data frame directly,  rather than a grid of points." />
    </Messages>
  </Topic>
  <Topic Id="317" Title="fix a bug in annotate: move legend to show_guide.">
    <Messages>
      <Message Id="0" ParentId="317" UserId="227097" Date="12/23/2011 06:12:19" Content="minor fix." />
    </Messages>
  </Topic>
  <Topic Id="318" Title="fix in coord-polar: flip axis title when theta = &quot;y&quot;">
    <Messages>
      <Message Id="0" ParentId="318" UserId="227097" Date="12/23/2011 08:06:26" Content="here is an example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;cxc &lt;- ggplot(mtcars,  aes(x = factor(cyl))) + &#xD;&#xA;  geom_bar(width = 1,  colour = &quot;black&quot;)&#xD;&#xA;cxc + coord_polar() # x = factor(cyl),  y = count&#xD;&#xA;cxc + coord_polar(theta = &quot;y&quot;) # x = count,  y = factor(cyl)&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="319" Title="Visual testing framework">
    <Messages>
      <Message Id="0" ParentId="319" UserId="4196" Date="12/23/2011 14:18:50" Content="Should be able to:&#xD;&#xA;&#xD;&#xA;* supply title,  describing what to look like&#xD;&#xA;* supply file name&#xD;&#xA;* focus in on specific components of the gtable (to avoid detecting spurious changes)&#xD;&#xA;* generate html page comparing current and previous version (may need git installed)&#xD;&#xA;&#xD;&#xA;Need to function to run all visual tests in a directory,  and `stop()` if there are any changes (to avoid R CMD check silently passing when there has been a change)&#xD;&#xA;&#xD;&#xA;May need a visual testing manifest file that gives the source R file name,  image name,  title and hash of image. " />
      <Message Id="3265598" ParentId="319" UserId="86978" Date="12/23/2011 23:39:27" Content="A few thoughts:&#xD;&#xA;&#xD;&#xA;* It would be nice to have the first part of the filename taken from,  say,  `context()`,  if that function is used here.&#xD;&#xA;* It would also be nice to derive the filename from the title,  with the option to override.&#xD;&#xA;* If the test results are stored in git,  I could see this making the repo grow very large over time. Some output might be more efficiently stored as PNG,  while others might be more efficient as PDF. For PDF output,  it wouldn't be possible to view in a webpage,  though.&#xD;&#xA; * For PNG,  optipng could be used to shrink file sizes,  though it would add an external dependency.&#xD;&#xA; * For PDF,  it might be good to use `pdf(compress=FALSE)` to get text (not binary) output files,  so that git can store line-by-line diffs.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3277144" ParentId="319" UserId="4196" Date="12/26/2011 22:02:53" Content="I'm not really worried about the git repo file size - I'm imagining most images will be pretty small.  And I was thinking png because then the git image compare will kick in (which is only useful retrospectively,  but still)" />
      <Message Id="3279948" ParentId="319" UserId="86978" Date="12/27/2011 08:28:43" Content="Another thing to keep in mind: the output PNG files will be platform-dependent. I tried generating the same simple graph on Mac and Linux. I found that the fonts are slightly different,  and one of them was 15KB (Mac) while the other was 6KB (Linux).&#xD;&#xA;&#xD;&#xA;I think this may be because my Mac uses Quartz and Linux uses Cairo for PNG output. Perhaps they would be the same if cairo was used on both platforms,  but I wasn't able to test this. On my Mac,  output using `png(type='cairo')` didn't work (there was some error with libpng version),  and Linux doesn't support quartz.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Also,  one other thought about where to store the test results -- they could be put in a submodule,  to keep them separate from the code. I like the idea of keeping the git repo free of accumulated test files,  but I'd definitely understand if others disagree." />
      <Message Id="3397986" ParentId="319" UserId="86978" Date="01/07/2012 20:25:35" Content="I just learned about Paul Murrel's GraphicsQC package. It seems like it could do many of the things we've discussed.&#xD;&#xA;&#xD;&#xA;http://www.jstatsoft.org/v30/i01/paper" />
      <Message Id="4464315" ParentId="319" UserId="86978" Date="03/12/2012 23:35:59" Content="I've figured out how to use ImageMagick to do visual diffs with git. Add this to your `.git/config` file:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;[ difftool &quot;image&quot; ]&#xD;&#xA;        cmd = compare $LOCAL $REMOTE - | convert $LOCAL $REMOTE - +append x:&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Suppose you have a .png file that's committed to the repo,  and then you overwrite that file with a new version. You can get the visual diff like (this doesn't require committing the new image to the repo):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;git difftool -t image&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;You can also compare any commit to another commit,  e.g. `git difftool -t image HEAD^ mybranch`.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;This command puts the images left to right,  in this order: Old,  New,  Diff. But it's possible to change the order,  and arrange them vertically,  if desired." />
      <Message Id="4709508" ParentId="319" UserId="86978" Date="03/27/2012 04:01:58" Content="The changes in #454 allow ggplot2 to work with the new vtest package." />
    </Messages>
  </Topic>
  <Topic Id="320" Title="Added free_x and free_y options to facet_grid space argument">
    <Messages>
      <Message Id="0" ParentId="320" UserId="1241175" Date="12/23/2011 16:46:20" Content="As requested made a separate branch for the commit.&#xD;&#xA;&#xD;&#xA;If any other changes are needed,  I am willing to adapt.&#xD;&#xA;&#xD;&#xA;Cheers, &#xD;&#xA;&#xD;&#xA;Willem" />
      <Message Id="3262941" ParentId="320" UserId="4196" Date="12/23/2011 17:38:37" Content="Looks good - also needs documentation updates to describe what `free_x` and `free_y` do. " />
      <Message Id="3263666" ParentId="320" UserId="1241175" Date="12/23/2011 18:58:43" Content="The documentation actually already included this. I just checked again to be sure,  therefore,  no updates to the documentation." />
      <Message Id="3263706" ParentId="320" UserId="4196" Date="12/23/2011 19:02:49" Content="Looks good - the last thing to do is to update your checkout and then rebase this branch so I can cleanly include it. Please email ggplot-dev if you need help with that." />
    </Messages>
  </Topic>
  <Topic Id="321" Title="Move gtable into own package">
    <Messages>
      <Message Id="0" ParentId="321" UserId="4196" Date="12/23/2011 17:57:08" Content="" />
      <Message Id="3314428" ParentId="321" UserId="4196" Date="12/30/2011 16:08:59" Content="See https://github.com/hadley/gtable for package." />
      <Message Id="6174518" ParentId="321" UserId="4196" Date="06/07/2012 12:20:41" Content="A good place to start would be to make sure that `gtable` passes `R CMD check` and then add `gtable` to the imports and remove all existing gtable code.  If you want to go further,  you could suggest improvements to the gtable api by inspecting what gets done in the facetting functions to assemble the whole plot together." />
      <Message Id="6550452" ParentId="321" UserId="227097" Date="06/25/2012 15:26:40" Content="Any progress on this issue?" />
      <Message Id="6550506" ParentId="321" UserId="86978" Date="06/25/2012 15:29:19" Content="Not yet. Once the theme changes get merged (probably in the next two days) I'm going to start on this." />
      <Message Id="6550617" ParentId="321" UserId="227097" Date="06/25/2012 15:33:34" Content="Ok,  thanks.&#xA;Are you going to change the interface,  that is,  name of existing function in ggplot2 packages?&#xA;&#xA;I'm thinking of some additional guides that I showed a few months ago,  i.e.,  guide_range,  guide_table,  etc. and dual-axis guides (e.g,  C/F degree). And it will depend strongly on gtable's functionality.&#xA;I'm happy if I can find the interface of new gtable.&#xA;&#xA;" />
      <Message Id="6557306" ParentId="321" UserId="86978" Date="06/25/2012 19:32:17" Content="I don't know yet what I'm going to do with it - I don't yet know enough about gtable to know what I'll do with it. But I will definitely keep in mind your guides." />
      <Message Id="6611686" ParentId="321" UserId="86978" Date="06/27/2012 18:33:21" Content="Done in 6f8800a3613d6ffae430ca6d989429beea6ca8ff." />
    </Messages>
  </Topic>
  <Topic Id="322" Title="test-dotplot: add test for NA warnings">
    <Messages>
      <Message Id="0" ParentId="322" UserId="86978" Date="12/24/2011 00:08:21" Content="" />
      <Message Id="3265748" ParentId="322" UserId="86978" Date="12/24/2011 00:11:31" Content="Hang on before merging... I'm going to add a NEWS item also." />
      <Message Id="3265967" ParentId="322" UserId="86978" Date="12/24/2011 01:07:26" Content="I had to rebase because of a merge conflict,  but it should be good now." />
    </Messages>
  </Topic>
  <Topic Id="323" Title="Error in as.environment(where) no item called &quot;package::ggplot2&quot; on the search list">
    <Messages>
      <Message Id="0" ParentId="323" UserId="86978" Date="12/24/2011 01:49:05" Content="Apparently a recent commit broke something for me.  I was taking a look at #270 again,  but the code wouldn't run anymore. I'm not sure exactly what the problem is,  but `git bisect` tracked it to commit a9f5e0a4016a58d612cf286291efe427f1bf6c9f (regarding test package).&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=1:6,  y=1:3)&#xD;&#xA;&#xD;&#xA;# OK&#xD;&#xA;ggplot(dat,  aes(x=x, y=y)) + geom_boxplot() &#xD;&#xA;&#xD;&#xA;# Not OK&#xD;&#xA;ggplot(dat,  aes(x=x, y=y)) + geom_boxplot(aes(group=x)) &#xD;&#xA;# Error in as.environment(where) : &#xD;&#xA;#   no item called &quot;package::ggplot2&quot; on the search list&#xD;&#xA;# &#xD;&#xA;# Enter a frame number,  or 0 to exit   &#xD;&#xA;#&#xD;&#xA;#  1: print(list(data = list(x = 1:6,  y = c(1,  2,  3,  1,  2,  3)),  layers = list(&lt;en&#xD;&#xA;#  2: print.ggplot(list(data = list(x = 1:6,  y = c(1,  2,  3,  1,  2,  3)),  layers = l&#xD;&#xA;#  3: plot-render.r#164: ggplot_build(x)&#xD;&#xA;#  4: plot-build.r#39: dlapply(function(d,  p) p$compute_aesthetics(d,  plot))&#xD;&#xA;#  5: plot-build.r#26: f(d = data[ [ i ] ],  p = layers[ [ i ] ])&#xD;&#xA;#  6: plot-build.r#26: p$compute_aesthetics(d,  plot)&#xD;&#xA;#  7: plot-build.r#26: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;#  8: layer.r#156: scales_add_defaults(plot$scales,  data,  aesthetics,  plot$plot_e&#xD;&#xA;#  9: scales-.r#85: find_global(scale_name)&#xD;&#xA;# 10: scales-.r#107: exists(name,  &quot;package::ggplot2&quot;)&#xD;&#xA;```" />
      <Message Id="3266178" ParentId="323" UserId="4196" Date="12/24/2011 02:21:02" Content="Fixed in 7cb04ed759c9a858abf4a4d363f439c19f188c16" />
    </Messages>
  </Topic>
  <Topic Id="324" Title="fix in find_global: namespace bug (fixed #323)">
    <Messages>
      <Message Id="0" ParentId="324" UserId="227097" Date="12/24/2011 02:05:19" Content="use `package:XXX` instead of `package::XXX`" />
    </Messages>
  </Topic>
  <Topic Id="325" Title="aes_auto: wisely detect aes vars from data">
    <Messages>
      <Message Id="0" ParentId="325" UserId="227097" Date="12/25/2011 02:26:04" Content="here is a typical usege:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; df &lt;- data.frame(x = 1,  y = 1,  col = 1,  txt = 1)&#xD;&#xA;&gt; aes_auto(df)&#xD;&#xA;List of 3&#xD;&#xA; $ colour: symbol col&#xD;&#xA; $ x     : symbol x&#xD;&#xA; $ y     : symbol y&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;extra arguments are interpreted as manual aes-mapping (here,  label = txt):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; aes_auto(df,  label = txt)&#xD;&#xA;List of 4&#xD;&#xA; $ colour: symbol col&#xD;&#xA; $ x     : symbol x&#xD;&#xA; $ y     : symbol y&#xD;&#xA; $ label : symbol txt&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="326" Title="Combining multiple panels with or without panel size adjustment">
    <Messages>
      <Message Id="0" ParentId="326" UserId="227097" Date="12/26/2011 01:26:46" Content="Here is an initial implementation. https://github.com/kohske/ggplot2/tree/feature/plot-layout&#xD;&#xA;&#xD;&#xA;Two way of combining:&#xD;&#xA;&#xD;&#xA;1. Size-sensitive combining: arrange plots with panel size adjustment.&#xD;&#xA;Currently,  using S3 of cbind and rbind.&#xD;&#xA;&#xD;&#xA;2. Simple layout -- like grid.arrange in gridExtra. Not implemented yet.&#xD;&#xA;&#xD;&#xA;Any idea and suggestions are welcome." />
      <Message Id="3272369" ParentId="326" UserId="18970" Date="12/26/2011 02:19:02" Content="latticeExtra defines a c() method for trellis objects; from what I understand however it would not be very suitable for ggplot2. Am I correct in thinking that any such combination of plots should only alter (at most) the plot dimensions,  but not deal with removing axes,  combining legends,  axis labels,  titles,  etc.? &#xD;&#xA;&#xD;&#xA;One feature that's been requested quite often is a multipage option. I don't know how hard that would be to implement for facetting in general. The grid.arrange() way is quite trivial and will be present in the next version of gridExtra (the basic idea is currently on SO http://stackoverflow.com/a/6687147/471093)" />
      <Message Id="3272624" ParentId="326" UserId="86978" Date="12/26/2011 04:20:12" Content="Here are some features that I think would be useful.&#xD;&#xA;&#xD;&#xA;* Allow combining &quot;cells&quot; in the table,  so that it's possible to combine graphs A,  B,  C,  and D like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;AAB&#xD;&#xA;AAC&#xD;&#xA;DDD&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;* Allow combining graphs with unequal sizes,  like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;AAAB&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;It would be nice to be able to specify the sizes as integers,  like (3, 1),  as well as nonintegers,  like (1, .33).&#xD;&#xA;" />
      <Message Id="3277138" ParentId="326" UserId="4196" Date="12/26/2011 21:59:50" Content="I like this idea - lets put it in 0.9.1 (when hopefully gtable will be&#xA;its own package)&#xA;&#xA;Hadley&#xA;&#xA;On Sun,  Dec 25,  2011 at 7:26 PM,  kohske takahashi&#xA;&lt;reply@reply.github.com&gt;&#xA;wrote:&#xA;&gt; Here is an initial implementation. https://github.com/kohske/ggplot2/tree/feature/plot-layout&#xA;&gt;&#xA;&gt; Two way of combining:&#xA;&gt;&#xA;&gt; 1. Size-sensitive combining: arrange plots with panel size adjustment.&#xA;&gt; Currently,  using S3 of cbind and rbind.&#xA;&gt;&#xA;&gt; 2. Simple layout -- like grid.arrange in gridExtra. Not implemented yet.&#xA;&gt;&#xA;&gt; Any idea and suggestions are welcome.&#xA;&gt;&#xA;&gt; ---&#xA;&gt; Reply to this email directly or view it on GitHub:&#xA;&gt; https://github.com/hadley/ggplot2/issues/326&#xA;&#xA;&#xA;&#xA;-- &#xA;Assistant Professor / Dobelman Family Junior Chair&#xA;Department of Statistics / Rice University&#xA;http://had.co.nz/" />
      <Message Id="3279104" ParentId="326" UserId="227097" Date="12/27/2011 04:51:36" Content="@baptiste @wch @hadley &#xD;&#xA;&#xD;&#xA;Thanks. &#xD;&#xA;&#xD;&#xA;I want to make sure what we need to consider.&#xD;&#xA;I here call the size sensitive arrange as `table` (new feature),  and the simple layout `layout` (inherits the notion of grid.arrange).&#xD;&#xA;&#xD;&#xA;The `layout` is not difficult except for the interface to specify the layout.&#xD;&#xA;Actually,  `layout` is no more than a kind of syntax suger for `grid.layout` and `layout.pos.col/row` in `grid`, &#xD;&#xA;so users can write these function by themselves.&#xD;&#xA;&#xD;&#xA;Please find the visual tests in: https://github.com/kohske/ggplot2/blob/7bf05ba7c25d58d584430e4c7b2f62c6e889f48b/inst/tests/visual-plot-layout.r&#xD;&#xA;and docs in: https://github.com/kohske/ggplot2/commit/7bf05ba7c25d58d584430e4c7b2f62c6e889f48b#L3R66&#xD;&#xA;&#xD;&#xA;`layout` never modify the plots. It only arrange the plots on the layout.&#xD;&#xA;Also,  it supports nested-cell-like layout,  as shown in @wch's comment.&#xD;&#xA;&#xD;&#xA;User can specify dimension (i.e.,  nrow,  ncol,  or both).&#xD;&#xA;https://github.com/kohske/ggplot2/blob/7bf05ba7c25d58d584430e4c7b2f62c6e889f48b/inst/tests/visual-plot-layout.r#L9&#xD;&#xA;&#xD;&#xA;Or,  user can specify the layout itself.&#xD;&#xA;https://github.com/kohske/ggplot2/blob/7bf05ba7c25d58d584430e4c7b2f62c6e889f48b/inst/tests/visual-plot-layout.r#L24&#xD;&#xA;&#xD;&#xA;In addition to layout dimension,  users can specify widths/heights of each row/column.&#xD;&#xA;https://github.com/kohske/ggplot2/blob/7bf05ba7c25d58d584430e4c7b2f62c6e889f48b/inst/tests/visual-plot-layout.r#L32&#xD;&#xA;&#xD;&#xA;I wonder which is the best interface to set layout.&#xD;&#xA;Here is the current implementation:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;layout.ggplot(p[ [ 1 ] ],  p[ [ 2 ] ],  p[ [ 3 ] ],  p[ [ 4 ] ],  p[ [ 5 ] ],  &#xD;&#xA;  layout = list(row = list(1,  1,  1,  2,  2),  col = list(1,  2,  3,  1,  2)))&#xD;&#xA;```&#xD;&#xA;This is a wrapper for `layout.pos.col` in `grid`. But obviously this is ugly interface,  i think.&#xD;&#xA;&#xD;&#xA;Do you have any good idea?&#xD;&#xA;And is there any other features that should be implemented?&#xD;&#xA;&#xD;&#xA;Anyway,  the importance of `layout` would be less than that of `table`.&#xD;&#xA;&#xD;&#xA;I will discuss about `table` later.&#xD;&#xA;Should I move to ggplot-dev list?" />
      <Message Id="3279252" ParentId="326" UserId="227097" Date="12/27/2011 05:09:39" Content="`table` is more complicated and need to consider bunch of things carefully.&#xD;&#xA;&#xD;&#xA;First,  interface to specify the table layout. This is same issue with `layout`,  so it would be better to make the interface consistent between `table` and `layout`&#xD;&#xA;&#xD;&#xA;In addition to the interface,  there are two big issue:&#xD;&#xA;&#xD;&#xA;1) guides (legends),  title,  axis,  etc. as @baptiste suggested.&#xD;&#xA;&#xD;&#xA;In `table`,  the dimension (nrow/ncol) of each col/row must be consistent.&#xD;&#xA;If the plots are simple such as `qplot(1:3,  1:3)`,  it is easy to combine.&#xD;&#xA;&#xD;&#xA;But sometimes the nrow/ncol are inconsistent.&#xD;&#xA;For example,  if plot A has left-side legend,  and plot B has no legend,  the ncol of A is larger than that of B.&#xD;&#xA;So A and B cannot be rbinded (cbind is OK).&#xD;&#xA;Same with title and axis.&#xD;&#xA;So,  what do you think is the best way to handle them.&#xD;&#xA;&#xD;&#xA;a) drop guides (legends) and keep other materials.&#xD;&#xA;As `guides` can be extracted as a single object,  users can combine plots and then put the guides on some place. &#xD;&#xA;Other materials were kept as is. But a blank cell are added by align-to-larger-plot rule.&#xD;&#xA;I like this way. &#xD;&#xA;&#xD;&#xA;b) Induce an error,  and enforce users to appropriate dimension. I also like this way as an initial implementation.&#xD;&#xA;&#xD;&#xA;or any other possibility?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;2) facet&#xD;&#xA;`facet` makes `table` much much more complicated.&#xD;&#xA;Maybe we do not need to support the size-sensitive combining facetted plots.&#xD;&#xA;So at least,  initial implementation (0.9.1) will not support facet,  simply induce an error.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3279889" ParentId="326" UserId="86978" Date="12/27/2011 08:16:15" Content="Here's an idea for how to specify the arrangement for table and layout,  in a single unified way. I don't know what the &quot;normal&quot; way is to do this is -- this is just what comes to mind. &#xD;&#xA;&#xD;&#xA;Suppose you could give it a matrix,  like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;layout &lt;- matrix(c(1, 1, 3,  1, 1, 3,  2, 2, 2),  ncol=3,  byrow=TRUE)&#xD;&#xA;#      [ , 1 ] [ , 2 ] [ , 3 ]&#xD;&#xA;# [ 1,  ]    1    1    3&#xD;&#xA;# [ 2,  ]    1    1    3&#xD;&#xA;# [ 3,  ]    2    2    2&#xD;&#xA;&#xD;&#xA;layout.ggplot(p[ [ 1 ] ],  p[ [ 2 ] ],  p[ [ 3 ] ],  layout=layout) &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This means: use a 3x3 grid,  put the first object `p[ [ 1 ] ]` in the upper-left 2x2,  put the second object `p[ [ 2 ] ]` in the bottom 1x3,  and put the third object `p[ [ 3 ] ]`in the upper-right 2x1. You would have to check that the numbers are all in rectangles.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;And to specify the relative size of rows and columns,  you could add row and column names:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;layout &lt;- matrix(c(1, 2,  3, NA),  ncol=2,  byrow=TRUE,  dimnames=list(c(4, 1),  c(4, 1)))&#xD;&#xA;#   4  1&#xD;&#xA;# 4 1  2&#xD;&#xA;# 1 3 NA&#xD;&#xA;&#xD;&#xA;layout.ggplot(p[ [ 1 ] ],  p[ [ 2 ] ],  p[ [ 3 ] ],  layout=layout) &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The NA just means that that cell is empty. The row and column names determine the relative size of the cells. So the upper-left cell is 80% of the width and 80% of the height; the upper-right cell is 20% width,  80% height; and so on. Hopefully you could also use non-integer values.&#xD;&#xA;&#xD;&#xA;This method is also a little syntactically awkward (because using `matrix()` is a little awkward),  but there is an advantage: it allows the user to have a nice visual representation of what exactly they are creating.&#xD;&#xA;" />
      <Message Id="3280015" ParentId="326" UserId="18970" Date="12/27/2011 08:46:14" Content="another general question is whether one wants to draw directly on the page,  or return a grob as an alternative. It could be nice if `layout` played well with other graphical objects (e.g. lattice). &#xD;&#xA;Certainly compatibility with ggsave is something that would be desirable for the ggplot2 user,  and I think multipage as well.&#xD;&#xA;&#xD;&#xA;grid.arrange supports most of these features,  only multi-cell spanning isn't implemented as I couldn't find an elegant way of defining the layout." />
      <Message Id="3280023" ParentId="326" UserId="227097" Date="12/27/2011 08:48:08" Content="@wch &#xD;&#xA;&#xD;&#xA;Thanks.&#xD;&#xA;Actually that's the way of `layout` in base graphics.&#xD;&#xA;see `?layout`&#xD;&#xA;&#xD;&#xA;Perhaps,  &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;layout &lt;- matrix(c(1, 2,  3, NA),  ncol=2,  byrow=TRUE,  dimnames=list(c(4, 1),  c(4, 1)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;should be&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;layout &lt;- layout(c(1, 2,  3, NA),  ncol=2,  byrow=TRUE,  widths = c(1, 4),  heights = c(4, 1))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The advantage is of course visual representation and also that some users are familier with this system.&#xD;&#xA;" />
      <Message Id="3313274" ParentId="326" UserId="227097" Date="12/30/2011 13:53:40" Content="I pushed a testbed for combining multiple panel.&#xD;&#xA;I also put visual tests,  so any feedback is appreciate.&#xD;&#xA;&#xD;&#xA;@baptiste ggarrange now does not support grob-extraction,  but will support in future.&#xD;&#xA;Also,  it may support multi-page options." />
      <Message Id="3396884" ParentId="326" UserId="227097" Date="01/07/2012 17:24:55" Content="@baptiste I implemented grob-extraction here: https://github.com/kohske/ggplot2/tree/feature/plot-layout&#xD;&#xA;Is it possible to combine with gridExtra?&#xD;&#xA;Could you please run the example codes?" />
      <Message Id="3397082" ParentId="326" UserId="86978" Date="01/07/2012 18:02:30" Content="@kohske I just took a quick look at the code. There is a `r` directory and a `R` directory,  which doesn't seem right." />
      <Message Id="3397150" ParentId="326" UserId="227097" Date="01/07/2012 18:14:05" Content="@baptiste oops,  fixed. thanks." />
      <Message Id="3399307" ParentId="326" UserId="227097" Date="01/08/2012 00:19:09" Content="@wch Sorry,  I had a mistake about your name. Thanks anyway. I'm happy if you will review the branch." />
      <Message Id="3399924" ParentId="326" UserId="18970" Date="01/08/2012 02:49:20" Content="@kohske I run the examples; it's great. One thought,  have you considered something like a global title,  on top of the page (and perhaps one for each side as well,  just in case)?&#xD;&#xA;&#xD;&#xA;ggarrange,  from what I can see,  could easily work with arbitrary grobs,  in which case it would have reproduced the full functionality of grid.arrange (minus the latest addition of multiple pages and ggsave support). That's why I'm not sure what you mean by &quot;combine with gridExtra&quot;,  can you clarify please?" />
      <Message Id="3399962" ParentId="326" UserId="18970" Date="01/08/2012 02:59:44" Content="I have a question,  also: as those functions (presumably) become more and more self-contained and independent (moving towards gtable),  perhaps it could be good to systemize the naming convention (single &quot;g&quot; for &quot;grid&quot;? or double &quot;gg&quot; for &quot;grammar of graphics&quot;). Grid/gridExtra have already defined grid.layout and grid.arrange (I'd be willing to remove the latter when ready),  leaving the possibility:&#xD;&#xA;&#xD;&#xA;garrange,  glayout,  whilst ggtable,  however,  would remain with ggplot2 (but the name is probably confusing,  with the gtable package).&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3400006" ParentId="326" UserId="18970" Date="01/08/2012 03:19:08" Content="oh,  and another side-remark: I noticed you have an example with inset plot; annotation_custom is probably more flexible for this particular purpose [ https://github.com/baptiste/ggplot2/blob/customgrob/R/annotation-custom.r#L29 ]" />
      <Message Id="3400026" ParentId="326" UserId="86978" Date="01/08/2012 03:26:41" Content="&#xD;&#xA;@kohske I tried it out,  and I like it! It works very well. A couple of comments:&#xD;&#xA;&#xD;&#xA;I like the idea of having insets but the interface seems somewhat awkward. Am I right that it requires using a character matrix like this? It seems kind of inelegant,  not that I have a better idea.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; lay &lt;- gglayout(row = list(1,  2,  2,  3,  3:4,  4),  col = list(1:3,  1:2,  3,  1,  2:3,  3))&#xD;&#xA;&gt; lay&#xD;&#xA;     [ , 1 ] [ , 2 ] [ , 3 ]  &#xD;&#xA;[ 1,  ] &quot; 1&quot; &quot; 1&quot; &quot; 1&quot;  &#xD;&#xA;[ 2,  ] &quot; 2&quot; &quot; 2&quot; &quot; 3&quot;  &#xD;&#xA;[ 3,  ] &quot; 4&quot; &quot; 5&quot; &quot; 5&quot;  &#xD;&#xA;[ 4,  ] &quot;&quot;   &quot; 5&quot; &quot; 5 6&quot;&#xD;&#xA;&#xD;&#xA; Widths:   0.3333333 0.3333333 0.3333333 &#xD;&#xA; Heights:  0.25 0.25 0.25 0.25 &#xD;&#xA; Respect:  FALSE &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;   &#xD;&#xA;&#xD;&#xA;If I wanted to inset a graph and have it set away from the edge,  it seems I would have to do something like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- lapply(1:2,  function(i) ggplot(mtcars,  aes(factor(cyl))) + geom_bar(fill = rainbow(10)[ i ]) + opts(title = paste(i)))&#xD;&#xA;&#xD;&#xA;lay &lt;- gglayout( matrix(&#xD;&#xA;   c(&quot;1&quot;,  &quot;1&quot;,  &quot;1&quot;, &#xD;&#xA;     &quot;1&quot;,  &quot;1 2&quot;,  &quot;1&quot;, &#xD;&#xA;     &quot;1&quot;,  &quot;1&quot;,  &quot;1&quot;),  3,  byrow=TRUE,  ), &#xD;&#xA;   widths = c(3,  2,  .5),  heights = c(3,  2,  .5))&#xD;&#xA;&#xD;&#xA;ggarrange(plots = p[ 1:2 ],  layout = lay)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This seems kind of complicated to me (but again I don't have a better idea right now).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Finally,  I would suggest having some code to detect when the numbers aren't laid out in rectangles. In the example below,  I think it should give a warning/error,  but right now it doesn't:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;lay &lt;- gglayout( matrix(&#xD;&#xA;   c(1,  2, &#xD;&#xA;     2,  1),  2,  byrow=TRUE,  ))&#xD;&#xA;&#xD;&#xA;ggarrange(plots = p[ 1:2 ],  layout = lay)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3406541" ParentId="326" UserId="227097" Date="01/09/2012 02:20:44" Content="@baptiste @wch thanks you for the comments. Here is point-to-point comments.&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&gt; ggarrange,  from what I can see,  could easily work with arbitrary grobs,  in which case it would have reproduced the full functionality of grid.arrange (minus the latest addition of multiple pages and ggsave support). That's why I'm not sure what you mean by &quot;combine with gridExtra&quot;,  can you clarify please?&#xD;&#xA;&#xD;&#xA;`ggarrange` returns `gtable` object,  but `grid.arrange` could not work with `gtable`. But work after `gtable_gTree`. So it will be easy to fix.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;gg &lt;- ggarrange(qplot(1:3,  1:3),  qplot(1:3))&#xD;&#xA;grid.arrange(gg,  xyplot(1:10~1:10)) # does not work&#xD;&#xA;grid.arrange(gtable_gTree(gg),  xyplot(1:10~1:10)) # does work&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&gt;  One thought,  have you considered something like a global title,  on top of the page (and perhaps one for each side as well,  just in case)?&#xD;&#xA;&#xD;&#xA;`ggarrange` and `ggtable` will have `main` argument.&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;As for the naming,  `g` means `grid`,  `gg` means *a part of ggplot2*. So,  `g*` is available outside `ggplot2` while `gg*` only works with ggplot2.&#xD;&#xA;&#xD;&#xA;I named `ggtable`,  `ggarrange` in correspondence to `ggsave`. Please let me know if do you have better naming.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&gt; I noticed you have an example with inset plot; annotation_custom is probably more flexible for this particular purpose [ https://github.com/baptiste/ggplot2/blob/customgrob/R/annotation-custom.r#L29 ]&#xD;&#xA;&#xD;&#xA;Yes,  the inset plot is unplanned feature. After implementation,  I found that the inset plot is possible. So probably not well designed.&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&#xD;&#xA;&gt; Am I right that it requires using a character matrix like this?&#xD;&#xA;&#xD;&#xA;No. At the moment,  `gglayout` has two way + alpha for setting the layout.&#xD;&#xA;&#xD;&#xA;1) layout matrix,  which is compatible with `layout` in `graphics` package:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;m &lt;- matrix(&#xD;&#xA;  c(1,  1,  1, &#xD;&#xA;    2,  2,  3, &#xD;&#xA;    4,  5,  5, &#xD;&#xA;    6,  5,  5),  4,  byrow = T)&#xD;&#xA;lay &lt;- gglayout(m)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;2) the list of row/col spans,  which is compatible with `grid.layout` and `layout.pos.row` in `grid` package:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;lay &lt;- gglayout(row = list(1,  2,  2,  3,  3:4,  4),  col = list(1:3,  1:2,  3,  1,  2:3,  1))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;3) Plus alpha is a kind of automatic generation of layout matrix by `nrow`,  `ncol`,  `dim` etc.&#xD;&#xA;&#xD;&#xA;The inset plot is possible only by 2) the list of row/col span.&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&gt; I would suggest having some code to detect when the numbers aren't laid out in rectangles. In the example below,  I think it should give a warning/error&#xD;&#xA;&#xD;&#xA;Agreed. I'm looking for the good algorithms for detecting such incorrect layout.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&#xD;&#xA;Now I'm using `ggarrange` and `ggtable` in my daily work,  and found it is so useful.&#xD;&#xA;Further commets are welcome.&#xD;&#xA;&#xD;&#xA;Thanks!!" />
      <Message Id="3406857" ParentId="326" UserId="18970" Date="01/09/2012 03:18:52" Content="On 9 January 2012 15:20,  kohske takahashi&#xD;&#xA;&lt;reply@reply.github.com&gt;&#xD;&#xA;wrote:&#xD;&#xA;&gt; @baptiste @wch thanks you for the comments. Here is point-to-point comments.&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt;&gt; ggarrange,  from what I can see,  could easily work with arbitrary grobs,  in which case it would have reproduced the full functionality of grid.arrange (minus the latest addition of multiple pages and ggsave support). That's why I'm not sure what you mean by &quot;combine with gridExtra&quot;,  can you clarify please?&#xD;&#xA;&gt;&#xD;&#xA;&gt; `ggarrange` returns `gtable` object,  but `grid.arrange` could not work with `gtable`. But work after `gtable_gTree`. So it will be easy to fix.&#xD;&#xA;&gt;&#xD;&#xA;&gt; ```R&#xD;&#xA;&gt; gg &lt;- ggarrange(qplot(1:3,  1:3),  qplot(1:3))&#xD;&#xA;&gt; grid.arrange(gg,  xyplot(1:10~1:10)) # does not work&#xD;&#xA;&gt; grid.arrange(gtable_gTree(gg),  xyplot(1:10~1:10)) # does work&#xD;&#xA;&gt; ```&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt;&gt;  One thought,  have you considered something like a global title,  on top of the page (and perhaps one for each side as well,  just in case)?&#xD;&#xA;&gt;&#xD;&#xA;&gt; `ggarrange` and `ggtable` will have `main` argument.&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt; As for the naming,  `g` means `grid`,  `gg` means *a part of ggplot2*. So,  `g*` is available outside `ggplot2` while `gg*` only works with ggplot2.&#xD;&#xA;&gt;&#xD;&#xA;&gt; I named `ggtable`,  `ggarrange` in correspondence to `ggsave`. Please let me know if do you have better naming.&#xD;&#xA;&#xD;&#xA;I guess my question is whether ggarrange could also work with other&#xD;&#xA;grobs,  or should it remain specific to ggplot? I'd be in favor of&#xD;&#xA;making it more general,  if only to avoid having two very similar&#xD;&#xA;functions in different packages. You could name it arrangeGrob and I'd&#xD;&#xA;remove its cousin from gridExtra.&#xD;&#xA;&#xD;&#xA;Making the current arrangeGrob compatible with ggarrange does not help&#xD;&#xA;if one wants to include,  say,  a tableGrob next to a ggplot.&#xD;&#xA;&#xD;&#xA;Cheers, &#xD;&#xA;&#xD;&#xA;b.&#xD;&#xA;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt;&gt; I noticed you have an example with inset plot; annotation_custom is probably more flexible for this particular purpose [ https://github.com/baptiste/ggplot2/blob/customgrob/R/annotation-custom.r#L29 ]&#xD;&#xA;&gt;&#xD;&#xA;&gt; Yes,  the inset plot is unplanned feature. After implementation,  I found that the inset plot is possible. So probably not well designed.&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt;&#xD;&#xA;&gt;&gt; Am I right that it requires using a character matrix like this?&#xD;&#xA;&gt;&#xD;&#xA;&gt; No. At the moment,  `gglayout` has two way + alpha for setting the layout.&#xD;&#xA;&gt;&#xD;&#xA;&gt; 1) layout matrix,  which is compatible with `layout` in `graphics` package:&#xD;&#xA;&gt;&#xD;&#xA;&gt; ```R&#xD;&#xA;&gt; m &lt;- matrix(&#xD;&#xA;&gt;  c(1,  1,  1, &#xD;&#xA;&gt;    2,  2,  3, &#xD;&#xA;&gt;    4,  5,  5, &#xD;&#xA;&gt;    6,  5,  5),  4,  byrow = T)&#xD;&#xA;&gt; lay &lt;- gglayout(m)&#xD;&#xA;&gt; ```&#xD;&#xA;&gt;&#xD;&#xA;&gt; 2) the list of row/col spans,  which is compatible with `grid.layout` and `layout.pos.row` in `grid` package:&#xD;&#xA;&gt;&#xD;&#xA;&gt; ```R&#xD;&#xA;&gt; lay &lt;- gglayout(row = list(1,  2,  2,  3,  3:4,  4),  col = list(1:3,  1:2,  3,  1,  2:3,  1))&#xD;&#xA;&gt; ```&#xD;&#xA;&gt;&#xD;&#xA;&gt; 3) Plus alpha is a kind of automatic generation of layout matrix by `nrow`,  `ncol`,  `dim` etc.&#xD;&#xA;&gt;&#xD;&#xA;&gt; The inset plot is possible only by 2) the list of row/col span.&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt;&gt; I would suggest having some code to detect when the numbers aren't laid out in rectangles. In the example below,  I think it should give a warning/error&#xD;&#xA;&gt;&#xD;&#xA;&gt; Agreed. I'm looking for the good algorithms for detecting such incorrect layout.&#xD;&#xA;&gt;&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt;&#xD;&#xA;&gt; Now I'm using `ggarrange` and `ggtable` in my daily work,  and found it is so useful.&#xD;&#xA;&gt; Further commets are welcome.&#xD;&#xA;&gt;&#xD;&#xA;&gt; Thanks!!&#xD;&#xA;&gt;&#xD;&#xA;&gt; ---&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub:&#xD;&#xA;&gt; https://github.com/hadley/ggplot2/issues/326#issuecomment-3406541" />
      <Message Id="3407111" ParentId="326" UserId="86978" Date="01/09/2012 04:08:55" Content="@kohske &#xD;&#xA;&#xD;&#xA;&gt;&gt; I would suggest having some code to detect when the numbers aren't laid out in rectangles. In the example below,  I think it should give a warning/error&#xD;&#xA;&#xD;&#xA;&gt; Agreed. I'm looking for the good algorithms for detecting such incorrect layout.&#xD;&#xA;&#xD;&#xA;I think this should do the trick. It could probably be cleaned up a little,  though. &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;# Returns TRUE if all the x's in mat are arranged in a rectangle, &#xD;&#xA;# FALSE otherwise&#xD;&#xA;is_rect &lt;- function(x,  mat,  ...) { &#xD;&#xA;&#xD;&#xA;  numcol &lt;- ncol(mat)&#xD;&#xA;  numrow &lt;- nrow(mat)&#xD;&#xA;&#xD;&#xA;  # The column and row numbers for each location in the matrix&#xD;&#xA;  colnums &lt;- matrix( rep(1:numcol,  numrow),  ncol = numcol,  byrow=TRUE)&#xD;&#xA;  rownums &lt;- matrix( rep(1:numrow,  numcol),  nrow = numrow,  byrow=FALSE)&#xD;&#xA;  &#xD;&#xA;  # Find matrix locations that contain x&#xD;&#xA;  xloc &lt;- mat == x&#xD;&#xA;  &#xD;&#xA;  # Find min and max value of cols and rows with x.&#xD;&#xA;  # This specifies a rectangle.&#xD;&#xA;  rowmin &lt;- min(rownums[ xloc ])&#xD;&#xA;  rowmax &lt;- max(rownums[ xloc ])&#xD;&#xA;  colmin &lt;- min(colnums[ xloc ])&#xD;&#xA;  colmax &lt;- max(colnums[ xloc ])&#xD;&#xA;&#xD;&#xA;  # All values of xloc inside the rectangle should be TRUE.&#xD;&#xA;  # All values of xloc outside the rectangle should be FALSE.&#xD;&#xA;  # Check this by inverting the rectangle and checking that all == FALSE&#xD;&#xA;  xloc[ rowmin:rowmax,  colmin:colmax ] &lt;- !xloc[ rowmin:rowmax,  colmin:colmax ]&#xD;&#xA;  &#xD;&#xA;  if (any(xloc)) return(FALSE)&#xD;&#xA;  else           return(TRUE)&#xD;&#xA;  &#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;# Returns TRUE if all values in mat are in rectangles,  FALSE otherwise&#xD;&#xA;is_all_rects &lt;- function(mat) { &#xD;&#xA;  &#xD;&#xA;  # Get all the unique values in mat&#xD;&#xA;  nums &lt;- unique(as.vector(mat))&#xD;&#xA;&#xD;&#xA;  # (Not totally sure this uses vapply correctly...)&#xD;&#xA;  goodrects &lt;- vapply(nums,  is_rect,  TRUE,  mat)&#xD;&#xA;&#xD;&#xA;  if (all(goodrects)) { &#xD;&#xA;    return(TRUE)&#xD;&#xA;   } else { &#xD;&#xA;    stop(paste(&quot;These numbers are not in rectangles: &quot;, &#xD;&#xA;           paste(nums[ !goodrects ],  collapse=&quot;,  &quot;)))&#xD;&#xA;    return(FALSE)&#xD;&#xA;   }  &#xD;&#xA;&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;These function names are probably not the best for the ggplot2 namespace. Also,  it won't work for all character matrices -- it could fail for cases where there's weird stuff like `&quot; 5 6&quot;`.&#xD;&#xA;&#xD;&#xA;Some test cases:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;mat &lt;- matrix(c(&#xD;&#xA;  1,  1,  2, &#xD;&#xA;  1,  1,  2, &#xD;&#xA;  3,  3,  2&#xD;&#xA;  ),  3,  byrow=TRUE)&#xD;&#xA;is_all_rects(mat)&#xD;&#xA;# [ 1 ] TRUE&#xD;&#xA;&#xD;&#xA;mat2 &lt;- matrix(c(&#xD;&#xA;  1,  1,  2, &#xD;&#xA;  1,  1,  2, &#xD;&#xA;  3,  3,  1&#xD;&#xA;  ),  3,  byrow=TRUE)&#xD;&#xA;is_all_rects(mat2)&#xD;&#xA;# Error in is_all_rects(mat2) : These numbers are not in rectangles:  1&#xD;&#xA;&#xD;&#xA;mat3 &lt;- matrix(c(&#xD;&#xA;  1,  1,  2, &#xD;&#xA;  1,  1,  2, &#xD;&#xA;  1,  3,  3&#xD;&#xA;  ),  3,  byrow=TRUE)&#xD;&#xA;is_all_rects(mat3)&#xD;&#xA;# Error in is_all_rects(mat3) : These numbers are not in rectangles:  1&#xD;&#xA;&#xD;&#xA;mat4 &lt;- matrix(c(&#xD;&#xA;  1,  1,  2, &#xD;&#xA;  1,  1,  3, &#xD;&#xA;  3,  1,  3&#xD;&#xA;  ),  3,  byrow=TRUE)&#xD;&#xA;is_all_rects(mat4)&#xD;&#xA;# Error in is_all_rects(mat4) : These numbers are not in rectangles:  1,  3&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3407401" ParentId="326" UserId="227097" Date="01/09/2012 05:00:46" Content="@baptiste &#xD;&#xA;&#xD;&#xA;&gt; I guess my question is whether ggarrange could also work with other&#xD;&#xA;grobs,  or should it remain specific to ggplot? I'd be in favor of&#xD;&#xA;making it more general,  if only to avoid having two very similar&#xD;&#xA;functions in different packages. You could name it arrangeGrob and I'd&#xD;&#xA;remove its cousin from gridExtra.&#xD;&#xA;&#xD;&#xA;I'm not sure how general `ggarrange` should be. Probably including some grobs is useful like this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggarrange(&#xD;&#xA;  qplot(iris[ , 1 ],  iris[ , 2 ]),  &#xD;&#xA;  tableGrob(iris[ 1:6,  1:2 ],  gp=gpar(fontsize=8)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and output here: https://skitch.com/e-kohske/gadjt/2012-01-09-13.50.38&#xD;&#xA;&#xD;&#xA;But in my view `ggarrange` will not take care of other grid-base graphics such as `lattice`.&#xD;&#xA;So I think `arrangeGrob` in `gridExtra` will be still useful as the integrator of grid-based graphics.&#xD;&#xA;&#xD;&#xA;How do you see it,  @hadley?" />
      <Message Id="3408001" ParentId="326" UserId="227097" Date="01/09/2012 06:53:28" Content="@wch Thanks.&#xD;&#xA;I was looking for any general algorithms (i.e.,  by some basic matrix operations) but could not find.&#xD;&#xA;I slightly modified your code and will merge it.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;is_rect &lt;- function(i,  mat) { &#xD;&#xA;    m0 &lt;- array(FALSE,  dim(mat))&#xD;&#xA;    is &lt;- which(mat == i,  arr.ind=T)&#xD;&#xA;    m0[ seq(min(is[ ,  1 ]),  max(is[ ,  1 ])),  seq(min(is[ ,  2 ]),  max(is[ ,  2 ])) ] &lt;- TRUE&#xD;&#xA;    is &lt;- which(m0)&#xD;&#xA;    all(mat[ is ] == i) &amp;&amp; all(mat[ -is ] != i)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&gt;  Also,  it won't work for all character matrices -- it could fail for cases where there's weird stuff like &quot; 5 6&quot;.&#xD;&#xA;&#xD;&#xA;There is no interface to set the character matrices.&#xD;&#xA;The char matrices is just for display implemented in `print.gglayout`.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3409152" ParentId="326" UserId="18970" Date="01/09/2012 09:29:26" Content="How about testing for the number of elements against the number of elements for the maximum block?&#xD;&#xA;&#xD;&#xA;is_rect &lt;- function(i,  mat) { &#xD;&#xA;   is &lt;- which(mat == i,  arr.ind=T)&#xD;&#xA;   NROW(is) &gt;= prod(diff(apply(is,  2,  range)) + c(1, 1)) &#xD;&#xA; }&#xD;&#xA;" />
      <Message Id="3409228" ParentId="326" UserId="227097" Date="01/09/2012 09:38:34" Content="@baptiste why `&gt;=`? Shoud this be `==`?" />
      <Message Id="3418482" ParentId="326" UserId="18970" Date="01/09/2012 19:17:17" Content="@kohske yes,  `==` sounds right,  I didn't think very much last night.." />
      <Message Id="3423975" ParentId="326" UserId="18970" Date="01/10/2012 01:51:31" Content="... unless you want to use this case to specify &quot;inset&quot; plots,  that is to say enforce connected blocks (no gap),  but not necessarily simply connected (can have holes)." />
      <Message Id="5091516" ParentId="326" UserId="4196" Date="04/12/2012 13:58:43" Content="Moving to 0.9.2 since I'm now reserving 0.9.1 for bug fixes and v. small features." />
      <Message Id="6174608" ParentId="326" UserId="4196" Date="06/07/2012 12:26:28" Content="I now wonder if this shouldn't be in it's own package." />
      <Message Id="6183993" ParentId="326" UserId="227097" Date="06/07/2012 18:36:52" Content="Yes,  I may write after the port to gtable package." />
    </Messages>
  </Topic>
  <Topic Id="327" Title="Edits to boxplot help">
    <Messages>
      <Message Id="0" ParentId="327" UserId="86978" Date="12/27/2011 17:15:29" Content="There have been a lot of questions about boxplots recently on the mailing list. Hopefully this will clear things up." />
    </Messages>
  </Topic>
  <Topic Id="328" Title="stat_bindot: add missing parameters">
    <Messages>
      <Message Id="0" ParentId="328" UserId="86978" Date="12/28/2011 21:02:47" Content="This adds `origin` and `binwidth` to the function call. It also fixes the documentation for `width`." />
    </Messages>
  </Topic>
  <Topic Id="329" Title="Documentation changes to ggplot2-0.9.0: 12.28.2011">
    <Messages>
      <Message Id="0" ParentId="329" UserId="949275" Date="12/29/2011 01:44:51" Content="It appears that I've managed to push my repo successfully. Contained are changes to the help files that make it pass check_doc() with no errors. In a few cases,  arguments that were in the documentation but not in the list of formal arguments had to be removed to get check_doc to work." />
      <Message Id="3300985" ParentId="329" UserId="4196" Date="12/29/2011 14:22:45" Content="Thanks Dennis.  I didn't end up using the pull request directly,  but your changes were very helpful and have now been incorporated.  Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="330" Title="dotplot: add missing parameter">
    <Messages>
      <Message Id="0" ParentId="330" UserId="86978" Date="12/29/2011 15:44:14" Content="This adds the `binwidth` parameter to geom_dotplot." />
    </Messages>
  </Topic>
  <Topic Id="331" Title="Modified help pages for qplot() and ggplot()">
    <Messages>
      <Message Id="0" ParentId="331" UserId="949275" Date="12/29/2011 22:15:21" Content="Added some description and a few examples to qplot() and ggplot() as requested. Let me know what you think and suggestions for improvement if you feel it's necessary.&#xD;&#xA;&#xD;&#xA;D." />
      <Message Id="3321505" ParentId="331" UserId="4196" Date="12/31/2011 15:24:47" Content="Closing since the new pulls are better :)" />
    </Messages>
  </Topic>
  <Topic Id="332" Title="Mapped variable not found when it is in a zero row data.frame">
    <Messages>
      <Message Id="0" ParentId="332" UserId="463252" Date="12/30/2011 00:32:58" Content="# Summary&#xD;&#xA;&#xD;&#xA;When an aesthetic is mapped to a variable in a data.frame which has that variable,  but does not have any rows of data,  an error is thrown.&#xD;&#xA;&#xD;&#xA;# Reproducible example&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;empty &lt;- data.frame(x=numeric(0),  y=numeric(0))&#xD;&#xA;notempty &lt;- data.frame(x=1,  y=1)&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;    geom_point() +&#xD;&#xA;    geom_point(data=empty,  mapping=aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;    geom_point() +&#xD;&#xA;    geom_point(data=notempty,  mapping=aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;    geom_point(data=empty,  mapping=aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;    geom_point(data=notempty,  mapping=aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;ggplot()+&#xD;&#xA;    geom_point(data=empty,  mapping=aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;ggplot()+&#xD;&#xA;    geom_point(data=notempty,  mapping=aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;ggplot(empty,  aes(x=x, y=y))+&#xD;&#xA;    geom_point()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;# Results&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; empty &lt;- data.frame(x=numeric(0),  y=numeric(0))&#xD;&#xA;&gt; notempty &lt;- data.frame(x=1,  y=1)&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;+     geom_point() +&#xD;&#xA;+     geom_point(data=empty,  mapping=aes(x=x, y=y))&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object 'x' not found&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;+     geom_point() +&#xD;&#xA;+     geom_point(data=notempty,  mapping=aes(x=x, y=y))&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;+     geom_point(data=empty,  mapping=aes(x=x, y=y))&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object 'x' not found&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot(mtcars,  aes(x=mpg,  y=wt)) +&#xD;&#xA;+     geom_point(data=notempty,  mapping=aes(x=x, y=y))&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot()+&#xD;&#xA;+     geom_point(data=empty,  mapping=aes(x=x, y=y))&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object 'x' not found&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot()+&#xD;&#xA;+     geom_point(data=notempty,  mapping=aes(x=x, y=y))&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot(empty,  aes(x=x, y=y))+&#xD;&#xA;+     geom_point()&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object 'x' not found&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;# Expected results&#xD;&#xA;&#xD;&#xA;1. For the first plot,  the second `geom_point` should not add anything,  and so the plot should be equivalent to `ggplot(mtcars,  aes(x=mpg,  y=wt))+geom_point()`&#xD;&#xA;1. The second plot works as expected&#xD;&#xA;1. The third plot maybe should throw an error,  but not that error. `x` is in `empty`,  but there is no data to plot.&#xD;&#xA;1. The fourth works as expected.&#xD;&#xA;1. The fifth should behave like the third.&#xD;&#xA;1. The sixth works as expected.&#xD;&#xA;1. The seventh should also behave like the third.&#xD;&#xA;&#xD;&#xA;# sessionInfo&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.14.0 (2011-10-31)&#xD;&#xA;Platform: i386-pc-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.0 devtools_0.4 &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.1-0   dichromat_1.2-3    digest_0.5.1       grid_2.14.0       &#xD;&#xA; [ 5 ] MASS_7.3-16        memoise_0.1        munsell_0.3        plyr_1.6          &#xD;&#xA; [ 9 ] proto_0.3-9.2      RColorBrewer_1.0-5 RCurl_1.8-0.1      reshape2_1.2      &#xD;&#xA;[ 13 ] scales_0.1.0       stringr_0.6       &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This &quot;0.9.0&quot; is commit 16e69f6348.  It is also an error in 0.8.9,  although sometimes with different (also non-informative) error messages.&#xD;&#xA;" />
      <Message Id="3307324" ParentId="332" UserId="4196" Date="12/30/2011 00:34:42" Content="Is this a duplicate of #31 ?" />
      <Message Id="3307370" ParentId="332" UserId="463252" Date="12/30/2011 00:42:55" Content="I don't believe it is a duplicate of #31 because the example there runs and gives a plot,  just not as expected.  The problem here is that an error is thrown when plotting saying that the variable can not be found.  They may be related,  of course.&#xD;&#xA;&#xD;&#xA;Also,  this may be a duplicate of #176,  but I wasn't sure because there the `xintercept` part is outside an `aes`.  However running that code gives a similar error (`Error in eval(expr,  envir,  enclos) : object 'xintercept' not found`) and I seem to recall that `geom_vline` makes a `data.frame` in the background.  So this may be duplicate,  or at least broadening,  of #176." />
      <Message Id="3307638" ParentId="332" UserId="4196" Date="12/30/2011 01:10:26" Content="Taking a quick look at the code,  I think it is related to #31,  but not I'm completely sure if it's the same or not. Somewhere the layer data is getting dropped completely,  and only the plot data used - which does not contain x and y variables." />
    </Messages>
  </Topic>
  <Topic Id="333" Title="Inconsistency between geom_tile and geom_raster">
    <Messages>
      <Message Id="0" ParentId="333" UserId="227097" Date="12/30/2011 02:00:46" Content="```&#xD;&#xA;df &lt;- data.frame(x = c(1,  1,  2,  2),  y = c(1,  2,  1,  2),  z = 1:4)&#xD;&#xA;p &lt;- ggplot(df,  aes(x,  y,  fill = z))&#xD;&#xA;p + geom_tile() + opts(title = &quot;tile&quot;)&#xD;&#xA;p + geom_raster() + opts(title = &quot;raster&quot;)&#xD;&#xA;```&#xD;&#xA;Raster is weird.&#xD;&#xA;Probably easy to be fixed.&#xD;&#xA;I will inspect." />
    </Messages>
  </Topic>
  <Topic Id="334" Title="fix in geom-raster vertical alignment (Fixed #333).">
    <Messages>
      <Message Id="0" ParentId="334" UserId="227097" Date="12/30/2011 02:20:58" Content="" />
    </Messages>
  </Topic>
  <Topic Id="335" Title="Alpha value lost with scale_colour_manual">
    <Messages>
      <Message Id="0" ParentId="335" UserId="4196" Date="12/30/2011 14:00:37" Content="&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x = 1:10, y = 1:10, grp = rep(letters[ 1:2 ], length.out&#xD;&#xA;= 10))&#xD;&#xA;&#xD;&#xA;ggplot(dat, aes(x = x, y = y)) +&#xD;&#xA;       geom_point(aes(colour = grp)) +&#xD;&#xA;       scale_colour_manual(values = c('#FF00001A', '#0000FF1A'))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;reported by Joran." />
      <Message Id="5125733" ParentId="335" UserId="4196" Date="04/13/2012 21:56:38" Content="Closing because it's a duplicate." />
    </Messages>
  </Topic>
  <Topic Id="336" Title="Need new website">
    <Messages>
      <Message Id="0" ParentId="336" UserId="4196" Date="12/30/2011 15:59:51" Content="* Run from github pages&#xD;&#xA;* Save static output from helpr,  with visual overview index." />
    </Messages>
  </Topic>
  <Topic Id="337" Title="Customgrob">
    <Messages>
      <Message Id="0" ParentId="337" UserId="18970" Date="12/31/2011 03:23:30" Content="attempt at a pull request... added annotation-custom.r and annotation-custom.Rd. R CMD check returns lots of warnings,  but not from this addition. &#xD;&#xA;Note: I've wrapped one example in \dontrun{  } because it requires gridExtra. Should I use a more basic grob instead? " />
      <Message Id="3319384" ParentId="337" UserId="18970" Date="12/31/2011 03:24:15" Content="Also,  sorry for the unhelpful commit messages... will try and improve on this!" />
      <Message Id="3323072" ParentId="337" UserId="18970" Date="12/31/2011 22:11:33" Content="I think I fixed all the above in the new pull request." />
    </Messages>
  </Topic>
  <Topic Id="338" Title="plot.background ignored">
    <Messages>
      <Message Id="0" ParentId="338" UserId="18970" Date="12/31/2011 03:33:18" Content="Indeed,  nowhere in the code could I find theme_render(theme,  &quot;plot.background&quot;,  ... &#xD;&#xA;&#xD;&#xA;## visual test&#xD;&#xA;qplot(1, 1) + opts(plot.background = theme_rect(col=&quot;red&quot;,  fill = &quot;yellow&quot;))" />
      <Message Id="3321502" ParentId="338" UserId="4196" Date="12/31/2011 15:23:53" Content="Did this use to work?" />
      <Message Id="3322904" ParentId="338" UserId="18970" Date="12/31/2011 21:08:11" Content="I don't remember ever trying it before,  sorry. But wasn't there an example somewhere (book?) with an inset plot that had a black line framing it?" />
      <Message Id="3324014" ParentId="338" UserId="227097" Date="01/01/2012 07:53:26" Content="This works in 0.8.9. And removed in this commit: 56e329cd25705bf06e7cac0f54048dc15fbd7e4d&#xD;&#xA;" />
      <Message Id="4028143" ParentId="338" UserId="18970" Date="02/17/2012 21:26:49" Content="Was this fixed for 0.9.0?" />
    </Messages>
  </Topic>
  <Topic Id="339" Title="Typo fixes in several help files.">
    <Messages>
      <Message Id="0" ParentId="339" UserId="949275" Date="12/31/2011 04:40:57" Content="This is a test of sorts. I'm using Git Bash now instead of SmartGit and this pull request should be a lot cleaner,  I hope. There are six files edited,  each with minor typo fixes,  and they are all in a separate branch. Let me know how this works out." />
      <Message Id="3321359" ParentId="339" UserId="4196" Date="12/31/2011 14:52:31" Content="Looks like this got included in #340,  so I'm going to close it for now." />
    </Messages>
  </Topic>
  <Topic Id="340" Title="Ggqplot">
    <Messages>
      <Message Id="0" ParentId="340" UserId="949275" Date="12/31/2011 13:56:31" Content="Resending descriptions for ggplot() and qplot() in their own branch." />
      <Message Id="3321349" ParentId="340" UserId="4196" Date="12/31/2011 14:51:33" Content="Looks great - thanks Dennis!  Will probably be a few days until I merge it - ggplot2 has been submitted to CRAN and if something goes wrong with that I don't want to get confused about which changes are where." />
      <Message Id="3321480" ParentId="340" UserId="949275" Date="12/31/2011 15:17:50" Content="HI Hadley:&#xA;&#xA;I'm just glad to finally figure out how this game works. It will make life a lot easier for the documentation projects.&#xA;&#xA;Assuming that my latest install from Github is the current state of the package,  I'll make separate branches for the geom,  scale and stat help pages and put whatever corrections/amendments in the appropriate branch. When the CRAN version comes out,  I can double check against those,  commit and push. In the meantime,  I can start working on the scales doc and ggplot2 transition doc. &#xA;&#xA;&#xA;D.&#xA;&#xA;&#xA;&#xA;________________________________&#xA; From: hadley wickham &lt;reply@reply.github.com&gt;&#xA;To: Dennis Murphy &lt;djmurphy0420@yahoo.com&gt; &#xA;Sent: Saturday,  December 31,  2011 6:51 AM&#xA;Subject: Re: [ ggplot2 ] Ggqplot (#340)&#xA; &#xA;Looks great - thanks Dennis! Will probably be a few days until I merge it - ggplot2 has been submitted to CRAN and if something goes wrong with that I don't want to get confused about which changes are where.&#xA;&#xA;--- &#xA;Reply to this email directly or view it on GitHub:&#xA;https://github.com/hadley/ggplot2/pull/340#issuecomment-3321349" />
      <Message Id="3321499" ParentId="340" UserId="4196" Date="12/31/2011 15:23:16" Content="&gt; Assuming that my latest install from Github is the current state of the package,  I'll make separate branches for the geom,  scale and stat help pages and put whatever corrections/amendments in the appropriate branch. When the CRAN version comes out,  I can double check against those,  commit and push. In the meantime,  I can start working on the scales doc and ggplot2 transition doc.&#xD;&#xA;&#xD;&#xA;Sounds good.  But don't worry about the CRAN release - just make sure&#xD;&#xA;you're always making changes against the master branch and you'll&#xD;&#xA;always be ok.&#xD;&#xA;&#xD;&#xA;Hadley&#xD;&#xA;&#xD;&#xA;-- &#xD;&#xA;Assistant Professor / Dobelman Family Junior Chair&#xD;&#xA;Department of Statistics / Rice University&#xD;&#xA;http://had.co.nz/" />
    </Messages>
  </Topic>
  <Topic Id="341" Title="Custom">
    <Messages>
      <Message Id="0" ParentId="341" UserId="18970" Date="12/31/2011 22:10:34" Content="cleaner custom grob pull request" />
      <Message Id="3329678" ParentId="341" UserId="4196" Date="01/02/2012 13:32:59" Content="Looks good. Could you please also a bullet point to the news file?  (Including crediting yourself)" />
    </Messages>
  </Topic>
  <Topic Id="342" Title="Geom docfix">
    <Messages>
      <Message Id="0" ParentId="342" UserId="949275" Date="01/01/2012 06:17:44" Content="Mostly typo fixes. The first example in ggpcp() fails,  so it is fixed. A couple of comments re help pages of other geoms that I didn't modify:&#xD;&#xA;    (i) should one say 'closed path' rather than 'path' in the title of geom_polygon()?&#xD;&#xA;    (ii) I'm wondering if geom_smooth() always plots a conditional mean. What if you're plotting a quantile function,  e.g.,  the median?" />
      <Message Id="3329701" ParentId="342" UserId="4196" Date="01/02/2012 13:37:03" Content="Is this different to #340?  It looks the same to me.&#xD;&#xA;&#xD;&#xA;Answers to questions:&#xD;&#xA;&#xD;&#xA;(1) maybe closed and filled?&#xD;&#xA;&#xD;&#xA;(2) Off the top of my head,  I don't know of any modelling functions that model the median apart from quantreg,  which is dealt with in `geom_quantile`&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3330170" ParentId="342" UserId="949275" Date="01/02/2012 14:40:17" Content="I was modifying on the basis of the most recent version of the master I pulled from GitHub. Perhaps I should wait a couple of days for the changes to take effect... It is the same as 340,  except segregated into its own branch. Re (1),  closed and filled sounds good to me. Re (2),  I don't know of any others either,  but just wanted to point out that geom_smooth() doesn't always plot a conditional mean - just almost always :) If you're content with the current description,  I don't have much problem since it is accurate with this one exception.&#xA;&#xA;&#xA;&#xA;________________________________&#xA; From: hadley wickham &lt;reply@reply.github.com&gt;&#xA;To: Dennis Murphy &lt;djmurphy0420@yahoo.com&gt; &#xA;Sent: Monday,  January 2,  2012 5:37 AM&#xA;Subject: Re: [ ggplot2 ] Geom docfix (#342)&#xA; &#xA;Is this different to #340? It looks the same to me.&#xA;&#xA;Answers to questions:&#xA;&#xA;(1) maybe closed and filled?&#xA;&#xA;(2) Off the top of my head,  I don't know of any modelling functions that model the median apart from quantreg,  which is dealt with in `geom_quantile`&#xA;&#xA;--- &#xA;Reply to this email directly or view it on GitHub:&#xA;https://github.com/hadley/ggplot2/pull/342#issuecomment-3329701" />
      <Message Id="3330503" ParentId="342" UserId="4196" Date="01/02/2012 15:24:51" Content="We need to get you set up with a workflow that works regardless of what I'm doing.  I think if you do separate branches you should be ok.  I've closed #340 since it was duplicate of this." />
      <Message Id="3333932" ParentId="342" UserId="949275" Date="01/02/2012 21:37:32" Content="I think so,  too. Keeping changes in separate chunks seems to be rather efficient to me,  both in terms of organization on my end and your ability to check and respond. Winston suggested that I don't have to have separate branches for everything,  which I'm sure is true,  but I like the idea of having branches that are self-contained,  particularly for documentation. If I were writing code,  I might feel a bit differently about it.&#xA;&#xA;Dennis&#xA;&#xA;&#xA;&#xA;________________________________&#xA; From: hadley wickham &lt;reply@reply.github.com&gt;&#xA;To: Dennis Murphy &lt;djmurphy0420@yahoo.com&gt; &#xA;Sent: Monday,  January 2,  2012 7:24 AM&#xA;Subject: Re: [ ggplot2 ] Geom docfix (#342)&#xA; &#xA;We need to get you set up with a workflow that works regardless of what I'm doing. I think if you do separate branches you should be ok. I've closed #340 since it was duplicate of this.&#xA;&#xA;--- &#xA;Reply to this email directly or view it on GitHub:&#xA;https://github.com/hadley/ggplot2/pull/342#issuecomment-3330503" />
      <Message Id="3341026" ParentId="342" UserId="86978" Date="01/03/2012 15:16:24" Content="@djmurphy420 Oh,  I didn't realize that each commit/branch of yours was meant to address a separate problem. If that's the case,  it might make sense to have a separate branch for each thing. But then it would make sense for them to each each be branched off of the main branch rather than being a sequence of commits that build on top of another,  which is what it looks like now." />
      <Message Id="4177416" ParentId="342" UserId="86978" Date="02/26/2012 00:00:03" Content="In #415,  I took @djmurphy420's commits,  rebased the changes on top of master,  and fixed conflicts. If that's merged,  this pull request can be closed." />
      <Message Id="4177604" ParentId="342" UserId="4196" Date="02/26/2012 00:33:23" Content="Closing b/c of new pull request." />
    </Messages>
  </Topic>
  <Topic Id="343" Title="plot.background in theme works again (Fixes #338)">
    <Messages>
      <Message Id="0" ParentId="343" UserId="227097" Date="01/01/2012 08:06:35" Content="" />
      <Message Id="3324112" ParentId="343" UserId="227097" Date="01/01/2012 09:16:39" Content="temporary fix. It will be improved when gtable packages is merged." />
      <Message Id="3365364" ParentId="343" UserId="227097" Date="01/05/2012 04:06:02" Content="@BrianDiggs Thanks for the comment. I will check." />
      <Message Id="4059739" ParentId="343" UserId="4196" Date="02/20/2012 19:09:18" Content="@kohske Could you flag that with a `#' @TODO`,  or file another bug so we remember to fix it once gtable gets z-ordering?  Then I can pull the request." />
      <Message Id="4060179" ParentId="343" UserId="227097" Date="02/20/2012 19:32:17" Content="Is the `#' @TODO` correct flag? roxygen says&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;TODO is an unknown key in block plot-render.r:2 &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Or could you please roxygenize yourself?" />
      <Message Id="4060201" ParentId="343" UserId="4196" Date="02/20/2012 19:33:27" Content="Oh,  I guess I just mean `# @todo`" />
      <Message Id="4060287" ParentId="343" UserId="227097" Date="02/20/2012 19:38:40" Content="And I will issue this." />
    </Messages>
  </Topic>
  <Topic Id="344" Title="Added translate pages,  aesthetics pages,  and other minor &quot;rebased&quot; changes...">
    <Messages>
      <Message Id="0" ParentId="344" UserId="777651" Date="01/01/2012 20:40:07" Content="I'm sure if I've done all the submit changes to github part correctly. Just let me know if I need fix something." />
      <Message Id="3329689" ParentId="344" UserId="4196" Date="01/02/2012 13:34:05" Content="It doesn't look like it can be automatically merged - could you please have a look into why?&#xD;&#xA;" />
      <Message Id="3330542" ParentId="344" UserId="777651" Date="01/02/2012 15:27:53" Content="Interesting...I'll see what I can do." />
    </Messages>
  </Topic>
  <Topic Id="345" Title="Customnews">
    <Messages>
      <Message Id="0" ParentId="345" UserId="18970" Date="01/03/2012 03:15:07" Content="I wasn't able to retrieve my previous branch. This is the NEWS for annotation_custom" />
      <Message Id="3376493" ParentId="345" UserId="86978" Date="01/05/2012 21:17:29" Content="Is this related to your data loss issue from the mailing list? If the branch you were working on is present in your origin repo but it was lost on your local repo,  you should be able to get it by doing this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;git fetch origin&#xD;&#xA;git checkout -b customgrob origin/customgrob&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This will create a new local branch `customgrob` that is based off of the remote branch `origin/customgrob`." />
      <Message Id="3376518" ParentId="345" UserId="18970" Date="01/05/2012 21:20:09" Content="Indeed,  thanks for the tip." />
    </Messages>
  </Topic>
  <Topic Id="346" Title="geom_dotplot works with load_all(),  doesn't work with install.packages()">
    <Messages>
      <Message Id="0" ParentId="346" UserId="86978" Date="01/03/2012 15:25:49" Content="Working of of hadley/master (f77f22be4e11599c2b280ed8a52bd2bdee244593),  I'm able to get `geom_dotplot` to work when I use `load_all()`,  but not when install the package and load it with `library()`.&#xD;&#xA;&#xD;&#xA;Using `load_all()` works (starting in my ggplot2 directory):&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(devtools)&#xD;&#xA;dev_mode(TRUE)&#xD;&#xA;load_all('.')&#xD;&#xA;&#xD;&#xA;set.seed(122)&#xD;&#xA;dat &lt;- data.frame(x=rnorm(20),  y=rnorm(20))&#xD;&#xA;ggplot(dat,  aes(x)) + geom_dotplot(binwidth=.4)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Installing and loading the package results in the dot plot not showing up,  though the axes appear to have the correct range. In a new R session:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(devtools)&#xD;&#xA;dev_mode(TRUE)&#xD;&#xA;install_github('ggplot2')&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;set.seed(122)&#xD;&#xA;dat &lt;- data.frame(x=rnorm(20),  y=rnorm(20))&#xD;&#xA;ggplot(dat,  aes(x)) + geom_dotplot(binwidth=.4)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It also doesn't work if I install it from source on my machine,  with `install.packages('.',  repos = NULL,  type = &quot;source&quot;)`.&#xD;&#xA;&#xD;&#xA;Any ideas of why this might be? I'm baffled by this." />
      <Message Id="3341399" ParentId="346" UserId="86978" Date="01/03/2012 15:41:23" Content="OK,  I found it with a bisect... The following entry in NAMESPACE got lost in a `roxygenize` (I had added it manually).&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;S3method(drawDetails, dotstackgrob)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA; I'll work on a fix." />
    </Messages>
  </Topic>
  <Topic Id="347" Title="Fix for dotstack">
    <Messages>
      <Message Id="0" ParentId="347" UserId="86978" Date="01/03/2012 15:54:58" Content="This fixes #346.&#xD;&#xA;&#xD;&#xA;The first commit adds roxygen info for dotstackGrob,  and the second commit adds the resulting changes from `roxygenize()`.&#xD;&#xA;&#xD;&#xA;To be consistent with the other grobs,  I also changed the S3 class name from `dotstackgrob` to `dotstackGrob`." />
      <Message Id="3342439" ParentId="347" UserId="4196" Date="01/03/2012 16:48:04" Content="See also `missing_s3` in the development devtools for an attempt to pick this up automatically." />
      <Message Id="3342934" ParentId="347" UserId="86978" Date="01/03/2012 17:19:53" Content="OK,  I started over,  put `@S3method` in the appropriate place,  and ran roxygenize." />
      <Message Id="3343254" ParentId="347" UserId="4196" Date="01/03/2012 17:41:19" Content="Looks good. Thanks" />
    </Messages>
  </Topic>
  <Topic Id="348" Title="Add aes and translate pages">
    <Messages>
      <Message Id="0" ParentId="348" UserId="777651" Date="01/03/2012 17:24:05" Content="Let me know if there are any issues. " />
      <Message Id="3343168" ParentId="348" UserId="4196" Date="01/03/2012 17:35:51" Content="Looks good!" />
    </Messages>
  </Topic>
  <Topic Id="349" Title="fix a bug in geom-raster: correctly handle 1D horizontal matrix.">
    <Messages>
      <Message Id="0" ParentId="349" UserId="227097" Date="01/06/2012 04:54:32" Content="My fix have introduced another bug.&#xD;&#xA;Indexing by `drop = TRUE` makes 1xN 2D matrix into 1D vector.&#xD;&#xA;Here it should be `drop = FALSE`.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;examples:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df1 &lt;- data.frame(x = -3:3,  y = -3:3)&#xD;&#xA;df2 &lt;- data.frame(x = seq(-2,  2,  0.1),  y = 0,  z = dnorm(seq(-2,  2,  0.1)))&#xD;&#xA;df3 &lt;- rename(df2,  c(x = &quot;y&quot;,  y = &quot;x&quot;))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(NULL,  aes(x,  y)) + geom_point(data = df1)&#xD;&#xA;p1 &lt;- p + geom_tile(aes(fill = z),  data = df2)&#xD;&#xA;p2 &lt;- p + geom_raster(aes(fill = z),  data = df2)&#xD;&#xA;p3 &lt;- p + geom_tile(aes(fill = z),  data = df3)&#xD;&#xA;p4 &lt;- p + geom_raster(aes(fill = z),  data = df3)&#xD;&#xA;```" />
      <Message Id="3380970" ParentId="349" UserId="227097" Date="01/06/2012 05:11:58" Content="test code:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df1 &lt;- data.frame(x = c(1,  1,  2,  2),  y = c(1,  2,  1,  2),  z = 1:4)&#xD;&#xA;df2 &lt;- data.frame(x = 1:3,  y = 1,  z = 1:3)&#xD;&#xA;df3 &lt;- data.frame(y = 1:3,  x = 1,  z = 1:3)&#xD;&#xA;df4 &lt;- data.frame(x = 1:3,  y = 1:3,  z = 1:3)&#xD;&#xA;&#xD;&#xA;f &lt;- function(d) { &#xD;&#xA;  p &lt;- ggplot(d,  aes(x,  y,  fill = z))&#xD;&#xA;  print(p + geom_tile() + opts(title = &quot;tile&quot;) + geom_text(aes(label = z),  colour = &quot;white&quot;))&#xD;&#xA;  print(p + geom_raster() + opts(title = &quot;raster&quot;) + geom_text(aes(label = z),  colour = &quot;white&quot;))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;f(df1)&#xD;&#xA;f(df2)&#xD;&#xA;f(df3)&#xD;&#xA;f(df4)&#xD;&#xA;```" />
      <Message Id="3395607" ParentId="349" UserId="227097" Date="01/07/2012 13:02:00" Content="Finally I rewrote a part of drawing code. Here is a general rule:&#xD;&#xA;&#xD;&#xA;1 introducing &quot;padding&quot;,  which is enables to control the size of raster.&#xD;&#xA;2 by default,  padding are calculated by resolution&#xD;&#xA;3 otherwise,  `hpad` and `vpad` can be specified in the unit of data space.&#xD;&#xA;" />
      <Message Id="3658627" ParentId="349" UserId="4196" Date="01/25/2012 20:45:31" Content="I turned pad to just in 42c1ed3f74a9acaa15a8d1058ded2217f2908ed5" />
    </Messages>
  </Topic>
  <Topic Id="350" Title="width/height support in geom-rastor ">
    <Messages>
      <Message Id="0" ParentId="350" UserId="227097" Date="01/06/2012 05:16:00" Content="Not sure if this is necessary,  but will be useful.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df1 &lt;- data.frame(x = c(1,  1,  2,  2),  y = c(1,  2,  1,  2),  z = 1:4)&#xD;&#xA;df2 &lt;- data.frame(x = 1:3,  y = 1,  z = 1:3)&#xD;&#xA;df3 &lt;- data.frame(y = 1:3,  x = 1,  z = 1:3)&#xD;&#xA;df4 &lt;- data.frame(x = 1:3,  y = 1:3,  z = 1:3)&#xD;&#xA;&#xD;&#xA;f &lt;- function(d) { &#xD;&#xA;  p &lt;- ggplot(d,  aes(x,  y,  fill = z))&#xD;&#xA;  print(p + geom_tile(aes(width = 0.1,  height = 0.1)) + opts(title = &quot;tile&quot;) + geom_text(aes(label = z),  colour = &quot;white&quot;))&#xD;&#xA;  print(p + geom_raster(aes(width = 0.1,  height = 0.1)) + opts(title = &quot;raster&quot;) + geom_text(aes(label = z),  colour = &quot;white&quot;))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;f(df1)&#xD;&#xA;f(df2)&#xD;&#xA;f(df3)&#xD;&#xA;f(df4)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3652266" ParentId="350" UserId="4196" Date="01/25/2012 15:16:31" Content="I don't think this is possible with `grid.raster`.  How did you imagine it being used?" />
      <Message Id="3652332" ParentId="350" UserId="227097" Date="01/25/2012 15:19:53" Content="I'm not sure... sorry :(&#xD;&#xA;Probably I meant something like padding,  i.e.,  extra spaces of the raster.&#xD;&#xA;Or I had misunderstood the `grid.raster`." />
    </Messages>
  </Topic>
  <Topic Id="351" Title="scale_dimension issue">
    <Messages>
      <Message Id="0" ParentId="351" UserId="949275" Date="01/09/2012 16:58:12" Content="Per Hadley's request on ggplot2-dev:&#xD;&#xA;&#xD;&#xA;While responding to a question posed by Felipe Carrillo re the use of minor_breaks in a scale_date() call,  I replied as follows:&#xD;&#xA;&#xD;&#xA;### DM&#xD;&#xA;This is what I get with the development versions of ggplot2 and&#xD;&#xA;scales,  both loaded:&#xD;&#xA;&#xD;&#xA;&gt; dt + scale_x_date(breaks = date_breaks('1 month'), &#xD;&#xA;+                   minor_breaks = date_breaks('1 week'), &#xD;&#xA;+                   labels = date_format('%b'))&#xD;&#xA;Error in scale_dimension(scale) :&#xD;&#xA; could not find function &quot;scale_dimension&quot;&#xD;&#xA;&#xD;&#xA;Hadley replied with:&#xD;&#xA;&#xD;&#xA;#### HW:&#xD;&#xA;Could you please file a bug about this?  That sort of error usually&#xD;&#xA;suggests a namespace problem,  but a quick check verifies that the&#xD;&#xA;methods for scale_dimension are exported.&#xD;&#xA;&#xD;&#xA;The traceback:&#xD;&#xA;&#xD;&#xA;21: scale_dimension(scale)&#xD;&#xA;20: NextMethod(&quot;[ &quot;)&#xD;&#xA;19: `[ .Date`(x,  x &gt;= range[ 1 ] &amp; x &lt;= range[ 2 ])&#xD;&#xA;18: x[ x &gt;= range[ 1 ] &amp; x &lt;= range[ 2 ] ]&#xD;&#xA;17: discard(breaks,  scale_dimension(scale))&#xD;&#xA;16: scale_breaks_minor.continuous(scale)&#xD;&#xA;15: scale_breaks_minor(scale)&#xD;&#xA;14: scale_map.date(scale,  scale_breaks_minor(scale))&#xD;&#xA;13: scale_map(scale,  scale_breaks_minor(scale))&#xD;&#xA;12: scale_breaks_minor_positions(scale)&#xD;&#xA;&#xD;&#xA;suggests perhaps that something is going wrong with method dispatch.&#xD;&#xA;&#xD;&#xA;Kohske followed up with:&#xD;&#xA;&#xD;&#xA;##### KT:&#xD;&#xA;inside scale_breaks_minor.continuous, &#xD;&#xA;&#xD;&#xA;# ok&#xD;&#xA;scale_dimension(scale)&#xD;&#xA;# error&#xD;&#xA;discard(breaks,  scale_dimension(scale))&#xD;&#xA;# ok&#xD;&#xA;discard(scale$trans$trans(breaks),  scale_dimension(scale))&#xD;&#xA;# ok&#xD;&#xA;censor(breaks,  scale_dimension(scale))&#xD;&#xA;&#xD;&#xA;so maybe this issue is a kind of interaction of NAMESPACE and premise.  [ DM: promise?? ]&#xD;&#xA;&#xD;&#xA;Here is a trace log:&#xD;&#xA;&#xD;&#xA;&gt; debug(ggplot2:::scale_breaks_minor.continuous)&#xD;&#xA;&gt;&#xD;&#xA;&gt; df &lt;- data.frame(date = seq(Sys.Date(),  len=100,  by=&quot;1 day&quot;)[ sample(100,  50) ],  price = runif(50))&#xD;&#xA;&gt; df &lt;- df[ order(df$date),   ]&#xD;&#xA;&gt; dt &lt;- qplot(date,  price,  data=df,  geom=&quot;line&quot;)&#xD;&#xA;&gt; dt + scale_x_date(breaks = date_breaks(&quot;month&quot;),  minor_breaks = date_breaks(&quot;week&quot;))&#xD;&#xA;debugging in: scale_breaks_minor.continuous(scale)&#xD;&#xA;debug: { &#xD;&#xA;   if (zero_range(as.numeric(limits))) { &#xD;&#xA;       return()&#xD;&#xA;    }&#xD;&#xA;   if (is.null(scale$minor_breaks)) { &#xD;&#xA;       b &lt;- b[ !is.na(b) ]&#xD;&#xA;       if (length(b) &lt; 2)&#xD;&#xA;           return()&#xD;&#xA;       bd &lt;- diff(b)[ 1 ]&#xD;&#xA;       if (min(limits) &lt; min(b))&#xD;&#xA;           b &lt;- c(b[ 1 ] - bd,  b)&#xD;&#xA;       if (max(limits) &gt; max(b))&#xD;&#xA;           b &lt;- c(b,  b[ length(b) ] + bd)&#xD;&#xA;       breaks &lt;- unique(unlist(mapply(seq,  b[ -length(b) ],  b[ -1 ], &#xD;&#xA;           length = n + 1,  SIMPLIFY = FALSE)))&#xD;&#xA;    }&#xD;&#xA;   else if (is.function(scale$minor_breaks)) { &#xD;&#xA;       breaks &lt;- scale$minor_breaks(scale$trans$inv(limits))&#xD;&#xA;    }&#xD;&#xA;   else { &#xD;&#xA;       breaks &lt;- scale$minor_breaks&#xD;&#xA;    }&#xD;&#xA;   discard(breaks,  scale_dimension(scale))&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt;&#xD;&#xA;debug: if (zero_range(as.numeric(limits))) { &#xD;&#xA;   return()&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; n&#xD;&#xA;debug: NULL&#xD;&#xA;Browse[ 2 ]&gt; n&#xD;&#xA;debug: if (is.null(scale$minor_breaks)) { &#xD;&#xA;   b &lt;- b[ !is.na(b) ]&#xD;&#xA;   if (length(b) &lt; 2)&#xD;&#xA;       return()&#xD;&#xA;   bd &lt;- diff(b)[ 1 ]&#xD;&#xA;   if (min(limits) &lt; min(b))&#xD;&#xA;       b &lt;- c(b[ 1 ] - bd,  b)&#xD;&#xA;   if (max(limits) &gt; max(b))&#xD;&#xA;       b &lt;- c(b,  b[ length(b) ] + bd)&#xD;&#xA;   breaks &lt;- unique(unlist(mapply(seq,  b[ -length(b) ],  b[ -1 ], &#xD;&#xA;       length = n + 1,  SIMPLIFY = FALSE)))&#xD;&#xA; } else if (is.function(scale$minor_breaks)) { &#xD;&#xA;   breaks &lt;- scale$minor_breaks(scale$trans$inv(limits))&#xD;&#xA; } else { &#xD;&#xA;   breaks &lt;- scale$minor_breaks&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; n&#xD;&#xA;debug: if (is.function(scale$minor_breaks)) { &#xD;&#xA;   breaks &lt;- scale$minor_breaks(scale$trans$inv(limits))&#xD;&#xA; } else { &#xD;&#xA;   breaks &lt;- scale$minor_breaks&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; n&#xD;&#xA;debug: { &#xD;&#xA;   breaks &lt;- scale$minor_breaks(scale$trans$inv(limits))&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; n&#xD;&#xA;debug: breaks &lt;- scale$minor_breaks(scale$trans$inv(limits))&#xD;&#xA;Browse[ 2 ]&gt; n&#xD;&#xA;debug: discard(breaks,  scale_dimension(scale))&#xD;&#xA;Browse[ 2 ]&gt; scale_dimension(scale)&#xD;&#xA;[ 1 ] 15344.2 15449.8&#xD;&#xA;Browse[ 2 ]&gt; discard(breaks,  scale_dimension(scale))&#xD;&#xA;Error in scale_dimension(scale) :&#xD;&#xA; could not find function &quot;scale_dimension&quot;&#xD;&#xA;Browse[ 2 ]&gt; discard(scale$trans$trans(breaks),  scale_dimension(scale))&#xD;&#xA; [ 1 ] 15348 15355 15362 15369 15376 15383 15390 15397 15404 15411 15418&#xD;&#xA;15425 15432 15439 15446&#xD;&#xA;Browse[ 2 ]&gt; censor(breaks,  scale_dimension(scale))&#xD;&#xA; [ 1 ] 15348 15355 15362 15369 15376 15383 15390 15397 15404 15411 15418&#xD;&#xA;15425 15432 15439 15446&#xD;&#xA;Browse[ 2 ]&gt;&#xD;&#xA;Browse[ 2 ]&gt;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3416522" ParentId="351" UserId="227097" Date="01/09/2012 17:21:09" Content="Now I figured out the problem.&#xD;&#xA;&#xD;&#xA;in `?NextMethod`&#xD;&#xA;&#xD;&#xA;&gt; NextMethod works by creating a special call frame for the next method. If no new arguments are supplied,  the arguments will be the same in number,  order and name as those to the current method but their values will be promises to evaluate their name in the current method and environment. Any named arguments matched to ... are handled specially: they either replace existing arguments of the same name or are appended to the argument list. They are passed on as the promise that was supplied as an argument to the current environment. (S does this differently!) If they have been evaluated in the current (or a previous environment) they remain evaluated. (This is a complex area,  and subject to change: see the draft ‘R Language Definition’.)&#xD;&#xA;&#xD;&#xA;The definition of `[ .Date` is:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;function (x,  ...,  drop = TRUE) &#xD;&#xA;{ &#xD;&#xA;    cl &lt;- oldClass(x)&#xD;&#xA;    class(x) &lt;- NULL&#xD;&#xA;    val &lt;- NextMethod(&quot;[ &quot;)&#xD;&#xA;    class(val) &lt;- cl&#xD;&#xA;    val&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The definition of `discard` is:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;function (x,  range = c(0,  1)) &#xD;&#xA;{ &#xD;&#xA;    x[ x &gt;= range[ 1 ] &amp; x &lt;= range[ 2 ] ]&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;so,  if the class of `x` is `Date`&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;discard(breaks,  scale_dimension(scale))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;is dispatched to `[ .Date` that calls `NextMethod(&quot;[ &quot;)`.&#xD;&#xA;&#xD;&#xA;In the case of&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;discard(scale$trans$trans(breaks),  scale_dimension(scale))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;the `scale$trans$trans(breaks)` converts `date` to `numeric` so `[ .Date` will not be called.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3440206" ParentId="351" UserId="4196" Date="01/11/2012 00:49:24" Content="Ok,  perfect.  I think the correct fix is to `force(x)`." />
      <Message Id="3441260" ParentId="351" UserId="227097" Date="01/11/2012 02:50:46" Content="Just a note,  probably not `force(x)` but `force(range)`." />
      <Message Id="3652246" ParentId="351" UserId="4196" Date="01/25/2012 15:15:37" Content="Fixed in scales." />
    </Messages>
  </Topic>
  <Topic Id="352" Title="Missing legend and no warning when scale_shape is used with non-factor">
    <Messages>
      <Message Id="0" ParentId="352" UserId="737298" Date="01/09/2012 22:35:50" Content="This produces a plot with no shape legend:&#xD;&#xA;&#xD;&#xA;    dat&lt;-data.frame(x=runif(10), y=runif(10), type=sample(1:3, 10, replace=TRUE))&#xD;&#xA;    ggplot(dat, aes(x, y, shape=type))+geom_point()&#xD;&#xA;&#xD;&#xA;The trouble (of course) is that type isn't a factor.  When we fix that everything works just fine:&#xD;&#xA;&#xD;&#xA;    dat&lt;-transform(dat, type=factor(type))&#xD;&#xA;    ggplot(dat, aes(x, y, shape=type))+geom_point()&#xD;&#xA;&#xD;&#xA;I'm not sure if the first block should refuse to produce a plot and print and error,  or if it should make a plot and produce a warning.&#xD;&#xA;" />
      <Message Id="3421789" ParentId="352" UserId="4196" Date="01/09/2012 22:41:40" Content="In the devel version (which is waiting on cran to be released),  this first block gives: `Error: A continuous variable can not be mapped to shape`" />
    </Messages>
  </Topic>
  <Topic Id="353" Title="Legend key tranparency in boxplot">
    <Messages>
      <Message Id="0" ParentId="353" UserId="901647" Date="01/10/2012 16:27:34" Content="The legend keys in this plot does not have a tranparent fill,  although the symbols in the main plot do.&#xD;&#xA;&#xD;&#xA;`dat &lt;- data.frame(x=c('a',  'b',  'c'),  y = runif(300),  z = c('d',  'e',  'e'))`&#xD;&#xA;`ggplot(dat) + geom_boxplot(aes(x,  y,  fill = z,  colour = z),  alpha = 0.2)`&#xD;&#xA;" />
      <Message Id="3439523" ParentId="353" UserId="86978" Date="01/10/2012 23:47:10" Content="This should fix it. I also noticed that the median lines in the graph use the alpha value,  although they shouldn't." />
      <Message Id="3439807" ParentId="353" UserId="86978" Date="01/11/2012 00:11:24" Content="@hadley ignore the first pull request -- I accidentally made that pull request to my repository." />
    </Messages>
  </Topic>
  <Topic Id="354" Title="Fix boxplot legend">
    <Messages>
      <Message Id="0" ParentId="354" UserId="86978" Date="01/11/2012 00:07:24" Content="This fixes #353. Also,  the median lines now ignore the alpha value so that the appearance is consistent with the box outline and whiskers." />
      <Message Id="3439765" ParentId="354" UserId="86978" Date="01/11/2012 00:08:11" Content="Oops,  this pull request was in the wrong repo.&#xD;&#xA;&#xD;&#xA;Edit: Oops again,  this pull request was in the right repo!" />
    </Messages>
  </Topic>
  <Topic Id="355" Title="colorbar guide: now support &quot;reverse = TRUE&quot;.">
    <Messages>
      <Message Id="0" ParentId="355" UserId="227097" Date="01/11/2012 05:14:44" Content="default: high-top to low-bottom&#xD;&#xA;reversed: low-top to high-bottom" />
    </Messages>
  </Topic>
  <Topic Id="356" Title="Faster example sets for selected geoms/stats">
    <Messages>
      <Message Id="0" ParentId="356" UserId="949275" Date="01/15/2012 00:56:16" Content="Here's a set of modifications for the slowest of the example sets. I couldn't do much with stat_density or geom_bar,  but replacing some of the larger data sets by subsets of them or by other data frames in the examples contained herein seemed to improve processing time a fair bit." />
      <Message Id="3546302" ParentId="356" UserId="4196" Date="01/18/2012 14:24:31" Content="And could you please not check in the `NAMESPACE` file? Because of a buglet in roxygen it will conflict with my version." />
      <Message Id="3555325" ParentId="356" UserId="949275" Date="01/18/2012 23:37:09" Content="I don't understand what you mean here. Could you elaborate a little,  please?&#xA;&#xA;&#xA;&#xA;________________________________&#xA; From: hadley wickham &lt;reply@reply.github.com&gt;&#xA;To: Dennis Murphy &lt;djmurphy0420@yahoo.com&gt; &#xA;Sent: Wednesday,  January 18,  2012 6:24 AM&#xA;Subject: Re: [ ggplot2 ] Faster example sets for selected geoms/stats (#356)&#xA; &#xA;And could you please not check in the `NAMESPACE` file? Because of a buglet in roxygen it will conflict with my version.&#xA;&#xA;--- &#xA;Reply to this email directly or view it on GitHub:&#xA;https://github.com/hadley/ggplot2/pull/356#issuecomment-3546302" />
      <Message Id="3556142" ParentId="356" UserId="86978" Date="01/19/2012 00:51:22" Content="@djmurphy420 In your commit,  the `NAMESPACE` file was changed,  probably from running `roxygenize`. It sorts the entries differently on different platforms. This can lead to merge conflicts when the file is also changed in another branch.&#xD;&#xA;&#xD;&#xA;Anyway,  you should be able to revert `NAMESPACE` to the previous version by doing this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;git checkout HEAD^ NAMESPACE&#xD;&#xA;git commit -a &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This will get the version of `NAMESPACE` from the parent of the current commit (that's what `HEAD^` means)." />
      <Message Id="3658767" ParentId="356" UserId="4196" Date="01/25/2012 20:53:05" Content="Done in 83a2275d1b898632b1a7541bb838fdd0b3973f66" />
    </Messages>
  </Topic>
  <Topic Id="357" Title="Categorial variables not specified explicitly as factors should be ordered as they are in the original data">
    <Messages>
      <Message Id="0" ParentId="357" UserId="18445" Date="01/18/2012 08:47:52" Content="&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;	d &lt;- data.frame(size=c(&quot;S&quot;,  &quot;M&quot;,  &quot;L&quot;,  &quot;XL&quot;),  value=c(3, 6, 7, 9),  stringsAsFactors=FALSE)&#xD;&#xA;	class(d$size)&#xD;&#xA;	ggplot(d) + geom_point(aes(x=size,  y=value))&#xD;&#xA;&#xD;&#xA;Here the order in the plot is L,  M,  S,  XL: the alphabetical order. I guess ggplot converts `d$size` into a factor even though I forced it to be a character vector.&#xD;&#xA;&#xD;&#xA;I think that when categorical data are coded as factors,  of course ggplot should use the levels' order.&#xD;&#xA;&#xD;&#xA;When data is of categorical nature but not explicitely coded as a factor,  ggplot should respect the order in the original data because it often has a meaning. It is the expectation of novice users at least and,  for those users also,  it is often conceptually easier to reorder the original data than to change the order of levels in a factor.&#xD;&#xA;&#xD;&#xA;In practice,  when converting the data for the plot,  ggplot should do&#xD;&#xA;&#xD;&#xA;    converted &lt;- factor(mydata,  levels=unique(mydata))&#xD;&#xA;&#xD;&#xA;If you point be towards where the data is initially handled,  I might even be able to fix this myself.&#xD;&#xA;" />
      <Message Id="3545953" ParentId="357" UserId="4196" Date="01/18/2012 14:00:47" Content="This always confuses me - if your data is `c(3,  1,  5)` you don't expect the numbers to be ordered differently.  I think it's better for people to learn how factors work in R than for ggplot2 to do something magical.  I suspect if I did make the change,  there would be just as many (if not more) people complaining that ggplot2 no longer ordered character variables alphabetically." />
      <Message Id="3546384" ParentId="357" UserId="18445" Date="01/18/2012 14:29:55" Content="Factors are useful but they serve a specific purpose,  which I would summarize as: remember the number and possibly order of levels even on a subset of the data. This is mandatory for many statistical analyses and they are an important aspect of R as a statistical language.&#xD;&#xA;&#xD;&#xA;But R has grown into more than just a &quot;statistics package&quot;. It is used for all sorts of data-centric tasks,  and ggplot in particular can be used to explore any data,  not specifically with a statistical point of view (it is used by plenty of physicists in my lab who don't want to hear about stats).&#xD;&#xA;&#xD;&#xA;My argument is that the current behaviour forces people to know and care about factors while one can efficiently use R without them. The existence of default.stringsAsFactors() to avoid having every string automatically converted into a factor comforts me in thinking that factors are not mandatory.&#xD;&#xA;&#xD;&#xA;Another way to look at it is:&#xD;&#xA;&#xD;&#xA;- if you don't care about the order of the categories then either solution is fine&#xD;&#xA;- if you do care about the order the proposed behaviour allows you to&#xD;&#xA;    - set it in your data (either sort your dataset before reading it in R,  or use sort()/order() in R)&#xD;&#xA;    - use factors,  if you know about them,  and set the order of their levels&#xD;&#xA;&#xD;&#xA;    In contrast,  the current behaviour forces you to know about factors (and if you don't,  appears to be doing something &quot;magical&quot; and surprising with your data).&#xD;&#xA;&#xD;&#xA;So I think the proposed behaviour is more versatile and has an easier learning slope than the current one,  while maintaining all functionality. The only downside it that ggplot itself won't automatically order strings alphabetically,  but you usually get this functionality by letting default.stringsAsFactors() with its default value of TRUE and reading your data/creating a data.frame for plotting in ggplot (i.e. feeding ggplot factors instead of strings).&#xD;&#xA;&#xD;&#xA;To finish up,  I would say that I,  personally,  know and use factors; but even so,  I am often bit by strange errors that come from using them. But,  mainly,  my suggestion comes from trying to teach people new to R/ggplot or non-statisticians and factors are always a difficult step (leading to the inevitable: &quot;why do I need to care about that when I just want to plot stuff&quot; ;) ).&#xD;&#xA;" />
      <Message Id="3558276" ParentId="357" UserId="227097" Date="01/19/2012 05:36:50" Content="I don't know which is better but in my view I like the current behavior.&#xD;&#xA;@jiho,  what do you think the order of variable should be if each element are duplicated:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d &lt;- data.frame(size=c(&quot;S&quot;,  &quot;M&quot;,  &quot;L&quot;,  &quot;M&quot;,  &quot;S&quot;),  value=c(3, 6, 7, 9, 0),  stringsAsFactors=FALSE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3583003" ParentId="357" UserId="18445" Date="01/20/2012 12:46:25" Content="The order of the first occurrence of each level,  i.e. what&#xD;&#xA;&#xD;&#xA;     unique(c(&quot;S&quot;,  &quot;M&quot;,  &quot;L&quot;,  &quot;M&quot;,  &quot;S&quot;))&#xD;&#xA;&#xD;&#xA;returns." />
      <Message Id="3583280" ParentId="357" UserId="4196" Date="01/20/2012 13:11:02" Content="While I can see your point,  I really think that would be counter-intuitive behaviour. Some things are confusing because you need to learn a bit more about how R works.  It's more effort now,  but pays off in the future." />
    </Messages>
  </Topic>
  <Topic Id="358" Title="Allow facets to be specified by an explicit vector rather than only the name of a column in a dataset">
    <Messages>
      <Message Id="0" ParentId="358" UserId="18445" Date="01/18/2012 09:01:19" Content="It is possible to do&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=runif(10),  &#xD;&#xA;                    y=runif(10), &#xD;&#xA;                    a=c(&quot;foo&quot;,  &quot;bar&quot;,  &quot;foo&quot;,  &quot;foo&quot;,  &quot;bar&quot;,  &quot;foo&quot;,  &quot;bar&quot;,  &quot;foo&quot;,  &quot;bar&quot;,  &quot;bar&quot;)&#xD;&#xA;                    )&#xD;&#xA;    ggplot() + geom_point(aes(x=d$x,  y=d$y))&#xD;&#xA;&#xD;&#xA;so one expects to be able to do&#xD;&#xA;&#xD;&#xA;    ggplot() + geom_point(aes(x=d$x,  y=d$y)) + facet_wrap(d$a)&#xD;&#xA;&#xD;&#xA;which is currently impossible because `facet_*` takes a formula as argument and requires the elements of the formula to be fetched from a data set. It would be a nice addition if facetting could take an actual vector of categories as argument (the same way `d*ply` functions can take formulas or actual variables as input to split the data.frame by). Of course this can create hedge cases when the vector specifying the facets is completely different from the data source of the layers. But I guess that,  to achieve this:&#xD;&#xA;&#xD;&#xA;    ggplot() + geom_point(aes(x=d$x,  y=d$y))&#xD;&#xA;&#xD;&#xA;somewhere,  ggplot creates a temporary data set for the point layer. One would just have to add columns with the facetting variables,  recycling them as necessary (just as it happens when creating a data.frame)." />
      <Message Id="3545885" ParentId="358" UserId="4196" Date="01/18/2012 13:55:42" Content="No - it's impossible because of the way that facet data is constructed.  And if I could easily make `geom_point(aes(d$x))` an error I would - it's just not how ggplot2 works." />
      <Message Id="3546433" ParentId="358" UserId="18445" Date="01/18/2012 14:33:33" Content="OK. I guess forbidding `geom_point(aes(x=d$x))` is hard because you still want to allow getting data from the general environment,  not just from the data.frame fed to ggplot,  right? I think this is essential indeed,  it gives necessary versatility (at the cost of a somewhat un-clean behaviour,  admittedly)." />
      <Message Id="3546482" ParentId="358" UserId="4196" Date="01/18/2012 14:37:15" Content="Yes,  scalars and functions from outside ggplot2,  but not vectors. Otherwise it gets too confusing too fast - data frames are where data should live and they ensure that your variables are aligned correctly." />
      <Message Id="3546581" ParentId="358" UserId="18445" Date="01/18/2012 14:42:41" Content="&gt; scalars and functions from outside ggplot2,  but not vectors&#xD;&#xA;&#xD;&#xA;? I use it with vectors all the time. For example:&#xD;&#xA;&#xD;&#xA;    d = data.frame(x=runif(10),  y=rnorm(10))&#xD;&#xA;    m = lm(y ~ x,  data=d)&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y)) + geom_line(aes(x=x,  y=m$fitted.values))&#xD;&#xA;&#xD;&#xA;Where `m$fitted.values` is a vector. Is that going away? It is quite handy. Of course I could do&#xD;&#xA;&#xD;&#xA;    d$fit = m$fitted.values&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y)) + geom_line(aes(x=x,  y=fit))&#xD;&#xA;&#xD;&#xA;but this can quickly bloat the initial dataset and become cumbersome when several models are tested." />
      <Message Id="3546591" ParentId="358" UserId="18445" Date="01/18/2012 14:43:23" Content="PS: actually,  at some point I would probably do&#xD;&#xA;&#xD;&#xA;    dm = fortify(m)&#xD;&#xA; &#xD;&#xA;and then plot from there ;)" />
      <Message Id="3547332" ParentId="358" UserId="4196" Date="01/18/2012 15:26:57" Content="Well that's one of the reasons I'm not sure I want to forbid it,  but it is definitely quick and dirty,  and if `m$fitted.values` isn't the correct length,  it may silently produce an incorrect plot." />
    </Messages>
  </Topic>
  <Topic Id="359" Title="geom_dotplot() does not work with coord_polar()">
    <Messages>
      <Message Id="0" ParentId="359" UserId="18445" Date="01/18/2012 22:35:57" Content="&#xD;&#xA;Dot plots are very commonly used in polar coordinates to represent binned orientation angles. E.g. http://www.pigeon.psy.tufts.edu/asc/Phillips/Default_Old_08_21_files/NewPhillipsFig3.JPG&#xD;&#xA;&#xD;&#xA;geom_dotplot() would make creating these graphs very easy in ggplot (I coded those manually before :( ...) except that it currently does not work with polar coords:&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=runif(100,  0,  360))&#xD;&#xA;    ggplot(d) + geom_dotplot(aes(x=x),  binwidth=5,  method=&quot;histodot&quot;,  stackdir=&quot;down&quot;)&#xD;&#xA;    ggplot(d) + geom_dotplot(aes(x=x),  binwidth=5,  method=&quot;histodot&quot;,  stackdir=&quot;down&quot;) + coord_polar()&#xD;&#xA;&#xD;&#xA;The last one gives&#xD;&#xA;&#xD;&#xA;    Warning messages:&#xD;&#xA;    1: In max(scales$x.range) :&#xD;&#xA;      no non-missing arguments to max; returning -Inf&#xD;&#xA;    2: In min(scales$x.range) : no non-missing arguments to min; returning Inf&#xD;&#xA;&#xD;&#xA;and the points on the plot are tiny and not stacked.&#xD;&#xA;" />
      <Message Id="3554810" ParentId="359" UserId="4196" Date="01/18/2012 22:58:08" Content="Unfortunately because of the way that grid and ggplot2 interact,  there is no way to fix this in general.  But geom_dotplot should at least give an informative message." />
      <Message Id="3555250" ParentId="359" UserId="18970" Date="01/18/2012 23:32:01" Content="if it knew the stacking direction (angle),  I imagine the grob could be adapted to work in the general case. Do you mean that ggplot2 cannot provide that information (radial direction) to the grob? (I'm not familiar with coord_polar,  whether it is called at a later stage or something)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3555316" ParentId="359" UserId="4196" Date="01/18/2012 23:36:31" Content="For a coordinate system in general I'm pretty sure you can't do it. You might be able to special case it,  but I don't think that's a terribly useful use of anyone's time. " />
      <Message Id="3555900" ParentId="359" UserId="18970" Date="01/19/2012 00:30:35" Content="Oh I see. So it could only make sense for transformations that don't affect the linearity of the stacking axis (e.g. no log-transformation along that direction,  etc.). Is this where &quot;munching&quot; comes into play,  and a new case would have to be written for this particular type of geom (neither line nor point)?" />
      <Message Id="3556041" ParentId="359" UserId="86978" Date="01/19/2012 00:42:24" Content="I agree that there should be a warning.&#xD;&#xA;&#xD;&#xA;The general problem with geom_dotplot and coordinate transforms is that the dots are stacked visually -- that is,  they're stacked in the visual &quot;space&quot;,  and not the data space. This means that the stacking has to be done in the grob,  instead of in the geom. Because of this,  grob_dotstack would have to modified to work with coord_polar. It would probably require a lot of coding just for that case. &#xD;&#xA;&#xD;&#xA;Also,  the algorithm that geom_dotplot is based on is conceptually not well-defined for polar coordinates. For instance:&#xD;&#xA;&#xD;&#xA;* If stacking from zero (at the origin) and going up,  you'd only be able to get two stacks of dots,  separated by 180 degrees.&#xD;&#xA;* If stacking from the outer rim and going inward,  how should the dots be spaced? If they're spaced so that they touch on the outer rim,  then they will overlap when you go inward.&#xD;&#xA;&#xD;&#xA;@jiho in the example you linked to,  the dots appear to be touching on the second ring of dots (going inward),  but I'm not totally sure. Actually,  now that I look at it closer,  it looks like the dots may have been manually placed on the graph,  because the dots aren't all evenly spaced,  and the stacks don't always go directly toward the center.&#xD;&#xA;&#xD;&#xA;If someone can describe an algorithm for polar dot plots,  that will be helpful for thinking about how to implement it in ggplot2. I suspect it'll be very different from the current geom_dotplot,  and implementing it in the same geom might not make sense from a grammar of graphics perspective." />
      <Message Id="3556336" ParentId="359" UserId="86978" Date="01/19/2012 01:10:11" Content="One more note: because of the technical and conceptual challenges for doing this,  it might be better to have a function (maybe in ggextra?) that would make this sort of graph using geom_point." />
      <Message Id="3566199" ParentId="359" UserId="4196" Date="01/19/2012 15:18:32" Content="I think this type of display also points to some of the limitations of the grammar - geoms,  stats and coords aren't really completely independent." />
      <Message Id="35939490" ParentId="359" UserId="4196" Date="02/24/2014 21:17:59" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="360" Title="Add warning when geom_dotplot is used with coord_polar">
    <Messages>
      <Message Id="0" ParentId="360" UserId="86978" Date="01/19/2012 02:08:36" Content="This adds a warning message when `geom_dotplot` is used with `coord_polar`. It addresses #359." />
    </Messages>
  </Topic>
  <Topic Id="361" Title="geom_abline is too short when used with coord_flip">
    <Messages>
      <Message Id="0" ParentId="361" UserId="86978" Date="01/19/2012 07:53:33" Content="This is based on a post on the mailing list. &#xD;&#xA;&#xD;&#xA;`geom_abline` doesn't go all the way across the plotting area. It seems to depend on the y range.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:6 ],  y=1:6)&#xD;&#xA;&#xD;&#xA;# Almost all the way from bottom to top&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_bar() +&#xD;&#xA;  geom_abline(intercept = .8,  slope = 0,  colour = &quot;red&quot;) +&#xD;&#xA;  coord_flip()&#xD;&#xA;&#xD;&#xA;# With y=y/6,  the line is very short&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y/6)) + geom_bar() +&#xD;&#xA;  geom_abline(intercept = .8,  slope = 0,  colour = &quot;red&quot;) +&#xD;&#xA;  coord_flip()&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3562230" ParentId="361" UserId="4196" Date="01/19/2012 12:59:29" Content="Yes,  basically geom_abline,  geom_vline and geom_hline don't work properly except for `coord_cartesian`" />
      <Message Id="3570864" ParentId="361" UserId="86978" Date="01/19/2012 17:41:19" Content="It looks like this is what's happening: geom_abline uses `scales$x.range` to determine the x limits. In the `scales` object,  this always refers to horizontal axis,  but when coord_flip is used,  `x` refers to the vertical axis in other parts of the code.&#xD;&#xA;&#xD;&#xA;I could write code to take care of this case,  when `coordinates` is of class flip. Another case would probably required for coord_polar. Any ideas on a more general way to deal with it?" />
      <Message Id="3571020" ParentId="361" UserId="4196" Date="01/19/2012 17:50:01" Content="I think the basic problem is we don't have a standard way of referring to the maximal extent of the coordinate system.  If we did,  I think it might be possible to use that information in the coordinate munching process and then geom_vline etc would just become special cases of geom_line.  But I've never been able to quite figure it out.  Geom_vline,  hline and abline are definitely one of the trickiest components of ggplot2.&#xD;&#xA;&#xD;&#xA;(They also work a bit confusingly because if you supply the arguments in a certain way you get something that behaves more like an annotation than a geom)" />
      <Message Id="3571290" ParentId="361" UserId="86978" Date="01/19/2012 18:09:52" Content="Well,  the case-by-case fix isn't as ugly as I thought it would be. You just have to replace this line in `geom_abline`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;xrange &lt;- scales$x.range&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;with this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;if (inherits(coordinates,  &quot;flip&quot;)) { &#xD;&#xA;  xrange &lt;- scales$y.range&#xD;&#xA; } else { &#xD;&#xA;  xrange &lt;- scales$x.range&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Dealing with `coord_polar` case is trickier than adding just a conditional like this. The problem with polar coordinates is they wrap around and overlap -- there is in a sense no maximal extent for theta.. In polar coordinates,  a sloped line should spiral around and around. But since `scales$theta.range` is reported to be,  say,  0-360,  the `geom_segment` used to draw the line will always go clockwise,  and it will go around the circle at most once. It will also never cross theta=0,  so you couldn't draw a line from theta=330 to theta=30. I don't see a simple way to fix this.&#xD;&#xA;&#xD;&#xA;At any rate,  should I just make the change for flip?" />
      <Message Id="3573673" ParentId="361" UserId="4196" Date="01/19/2012 20:29:21" Content="I would rather not special case these functions,  but instead figure out how to do it in general.  geom_abline isn't very useful for polar coordinates,  but geom_vline and geom_hline are." />
      <Message Id="3576157" ParentId="361" UserId="86978" Date="01/19/2012 23:09:45" Content="&#xD;&#xA;For a general solution,  I think perhaps `coordinates` should be modified to carry more information about transformations.&#xD;&#xA;&#xD;&#xA;This is what `coordinates` looks like inside of `GeomAbline$draw`:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Browse[ 1 ]&gt; str(coordinates)&#xD;&#xA;List of 2&#xD;&#xA; $ limits:List of 2&#xD;&#xA;  ..$ x: NULL&#xD;&#xA;  ..$ y: NULL&#xD;&#xA; $ wise  : logi FALSE&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;cartesian&quot; &quot;coord&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;This is what it looks like with `coord_flip`:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Browse[ 1 ]&gt; str(coordinates)&#xD;&#xA;List of 2&#xD;&#xA; $ limits:List of 2&#xD;&#xA;  ..$ x: NULL&#xD;&#xA;  ..$ y: NULL&#xD;&#xA; $ wise  : logi FALSE&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;flip&quot; &quot;cartesian&quot; &quot;coord&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This is what it looks like with `coord_polar`:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Browse[ 1 ]&gt; str(coordinates)&#xD;&#xA;List of 5&#xD;&#xA; $ theta    : chr &quot;x&quot;&#xD;&#xA; $ r        : chr &quot;y&quot;&#xD;&#xA; $ start    : num 0&#xD;&#xA; $ direction: num 1&#xD;&#xA; $ expand   : logi FALSE&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;polar&quot; &quot;coord&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;With `coord_polar`,  it seems to carry information about the mappings to theta and r. If `coordinates` had this information for all cases,  I think it would be possible to have a general solution.&#xD;&#xA;" />
      <Message Id="3576427" ParentId="361" UserId="4196" Date="01/19/2012 23:30:10" Content="But I think coordinate objects should largely be opaque - they should just provide methods to do what you want." />
      <Message Id="3576648" ParentId="361" UserId="86978" Date="01/19/2012 23:47:01" Content="Oh,  OK,  I suppose if there are coord methods that will give the appropriate information,  that would be good too. Basically,  what I think is needed is to find out what the incoming `x` get transformed to in the scales: `x`,  `y`,  or `theta`.&#xD;&#xA;&#xD;&#xA;I'm just starting to figure out how the coord stuff works,  so let me know if this is on the right or wrong track..." />
      <Message Id="3583629" ParentId="361" UserId="4196" Date="01/20/2012 13:44:18" Content="What information do you need to know how to do it generally?  I'd think about flip,  polar and map - if you can get it work for those three,  then the rest should be easy." />
      <Message Id="3586844" ParentId="361" UserId="86978" Date="01/20/2012 17:11:17" Content="I think that coord needs to be modified to track what the `x` and `y` in `aes(x=var1,  y=var2)` get transformed to. Here are some examples:&#xD;&#xA;&#xD;&#xA;* `coord_cartesian`: x goes to x,  and y goes to y.&#xD;&#xA;* `coord_flip`: x goes to y,  and y goes to x&#xD;&#xA;* `coord_polar`: x goes to theta,  and y goes to r&#xD;&#xA;&#xD;&#xA;As far as I can tell,  this information isn't recorded in the coord object. `coord_flip`,  for example,  just swaps x and y in column names. This makes it impossible (I think) to know which range is needed from the scale: `x.range`,  `theta.range`,  etc.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3587189" ParentId="361" UserId="4196" Date="01/20/2012 17:28:24" Content="And you think that's sufficient information?  That seems like a really easy solution,  and it seems like that might lead to a natural way of incorporating non-cartesian coordinates into facets with varying scales." />
      <Message Id="3587341" ParentId="361" UserId="86978" Date="01/20/2012 17:37:54" Content="Yup,  I think that should be sufficient to make abline work with flip,  and to make hline and vline work with both flip and polar. I don't know about coord_map,  though,  since I haven't really played with it." />
      <Message Id="3652180" ParentId="361" UserId="4196" Date="01/25/2012 15:11:27" Content="Fixed in 8d09896cd804805f315d27aedf64336a76f7b93a" />
    </Messages>
  </Topic>
  <Topic Id="362" Title="Fix geom_abline with coord_flip">
    <Messages>
      <Message Id="0" ParentId="362" UserId="86978" Date="01/19/2012 20:20:45" Content="This fixes #361." />
      <Message Id="3598869" ParentId="362" UserId="86978" Date="01/21/2012 20:47:06" Content="Decided to use a different method to fix the issue." />
    </Messages>
  </Topic>
  <Topic Id="363" Title="geom_map() buglet">
    <Messages>
      <Message Id="0" ParentId="363" UserId="949275" Date="01/20/2012 01:59:04" Content="Issue: Values are not mapped properly to polygons in geom_map()&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;crimes &lt;- data.frame(state = tolower(rownames(USArrests)),  USArrests)&#xD;&#xA;crimes$testvar &lt;- 1&#xD;&#xA;# Everything's bigger in Texas!!&#xD;&#xA;crimes$testvar[ 43 ] &lt;- 20&#xD;&#xA;crimes[ 40:43,   ]&#xD;&#xA;# ...but Ohio lights up.&#xD;&#xA;ggplot(crimes,  aes(map_id = state)) + &#xD;&#xA;     geom_map(aes(fill = testvar),  map = states_map) + &#xD;&#xA;     expand_limits(x = states_map$long,  y = states_map$lat)&#xD;&#xA;```" />
      <Message Id="3652850" ParentId="363" UserId="4196" Date="01/25/2012 15:46:36" Content="Looking at the code,  I have no idea what I was thinking and I have no idea why I thought it would work.  But I've figured out a much better strategy that seems to work reliably." />
    </Messages>
  </Topic>
  <Topic Id="364" Title="Add method to find coordinate mapping">
    <Messages>
      <Message Id="0" ParentId="364" UserId="86978" Date="01/20/2012 21:40:53" Content="This addresses #361. It adds a function to find what a coordinate transforms maps x and y to -- for example,  x and y; y and x; or theta and x.&#xD;&#xA;&#xD;&#xA;This makes it possible to have a general method to find the ranges of the x and y,  even after transformation.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;* I don't really like the method name I used,  `coord_find_varmapping()` but I couldn't think of a better one. I'm open to suggestions.&#xD;&#xA;* It gets,  for example,  scale$theta.range by using a string,  as in scale[ [ 'theta.range' ] ]. I know this isn't the best...&#xD;&#xA;* I updated abline,  hline,  and vline to use it. Now these work with coord_flip and coord_polar,  with the exception of abline with polar. Actually,  it works,  but it doesn't wrap around infinitely like it should.&#xD;&#xA;* I also added visual tests for abline,  hline,  and vline. No test for abline with coord_polar,  for reasons discussed above (and in #361).&#xD;&#xA;* I haven't yet modified or tested coord_map.&#xD;&#xA;" />
      <Message Id="3591654" ParentId="364" UserId="86978" Date="01/20/2012 22:17:27" Content="&#xD;&#xA;Finding the range for abline,  hline,  or vline doesn't work quite right with coord_map,  because `x.range` and `y.range` don't refer to quite the same thing as they do in other coord transformations. I think `x.raw` and `y.raw` are what's needed.&#xD;&#xA;&#xD;&#xA;This is what's in the `scales` object with the Italy example in the coord_map help:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;$x.raw&#xD;&#xA;[ 1 ] 165.7878 179.1712&#xD;&#xA;&#xD;&#xA;$y.raw&#xD;&#xA;[ 1 ] -48.05607 -33.74861&#xD;&#xA;&#xD;&#xA;$x.range&#xD;&#xA;[ 1 ] -0.1167924  0.1167924&#xD;&#xA;&#xD;&#xA;$y.range&#xD;&#xA;[ 1 ] -1.1128004 -0.6681436&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'm not sure what exactly `x.range` and `y.range` _should_ mean so I'm not sure how to handle this.&#xD;&#xA;" />
      <Message Id="3591704" ParentId="364" UserId="4196" Date="01/20/2012 22:22:34" Content="How about `coord_mapping`?&#xD;&#xA;&#xD;&#xA;The ranges in `coord_map` are the ranges of the transformed values (after they've been projected).  If this seems inconsistent with the other coords,  you could change that too.  Maybe x.raw -&gt; x.range and x.range -&gt; x.proj ?" />
      <Message Id="3591919" ParentId="364" UserId="86978" Date="01/20/2012 22:39:12" Content="OK,  I rebased the changes to use `coord_mapping` instead of `coord_find_varmapping`. (I hope you don't mind all the rebasing - I like having a cleaner commit history.)&#xD;&#xA;&#xD;&#xA;I'll look into the range stuff with `coord_map`." />
      <Message Id="3598686" ParentId="364" UserId="86978" Date="01/21/2012 20:14:57" Content="I'm changed coord-map.r so that x.raw -&gt; x.range and x.range -&gt; x.proj,  and I'm now trying to get lines to show up at all with coord_map(). I've come across a section in coord-munch.r that has this code:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;  data$x[ data$x == -Inf ] &lt;- range$x.range[ 1 ]&#xD;&#xA;  data$x[ data$x == Inf ] &lt;- range$x.range[ 2 ]&#xD;&#xA;  data$y[ data$y == -Inf ] &lt;- range$y.range[ 1 ]&#xD;&#xA;  data$y[ data$y == Inf ] &lt;- range$y.range[ 2 ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Will this work properly with the changes to x.range and y.range? I don't know this part well enough to know how to test it." />
      <Message Id="3599087" ParentId="364" UserId="86978" Date="01/21/2012 21:25:51" Content="In coord-map.r,  I modified t x.raw -&gt; x.range and x.range -&gt; x.proj. Here's the current status of the lines with coord_map:&#xD;&#xA;&#xD;&#xA;* geom_vline works.&#xD;&#xA;* geom_hline doesn't show up. I got it to appear by hacking in a workaround for the dist_central_angle issue,  but that's not a real solution. When the distance bug (#365) is fixed,  geom_hline should work.&#xD;&#xA;* geom_abline doesn't work. **Update**: geom_abline *does* work. I was previously using incorrect values for intercept and slope.&#xD;&#xA;&#xD;&#xA;In short,  everything should work when the distance bug is fixed. If you want to test,  install my experimental branch (where I've made the present changes and addressed the distance bug) and run through the visual tests.&#xD;&#xA;&#xD;&#xA;Here are the examples I've been testing with. They're derived from the coord_map help:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(maps)&#xD;&#xA;library(mapproj)&#xD;&#xA;&#xD;&#xA;nz &lt;- data.frame(map(&quot;nz&quot;,  plot=FALSE)[ c(&quot;x&quot;, &quot;y&quot;) ])&#xD;&#xA;nzmap &lt;- qplot(x,  y,  data=nz,  geom=&quot;path&quot;)&#xD;&#xA;&#xD;&#xA;nzmap + geom_hline(yintercept=-45) + coord_map()&#xD;&#xA;nzmap + geom_vline(xintercept=172) + coord_map()&#xD;&#xA;nzmap + geom_abline(intercept=130,  slope=-1) + coord_map()&#xD;&#xA;&#xD;&#xA;nzmap + geom_hline(yintercept=-45) + coord_map(project=&quot;cylindrical&quot;)&#xD;&#xA;nzmap + geom_vline(xintercept=172) + coord_map(project=&quot;cylindrical&quot;)&#xD;&#xA;nzmap + geom_abline(intercept=130,  slope=-1) + coord_map(project=&quot;cylindrical&quot;)&#xD;&#xA;&#xD;&#xA;nzmap + geom_hline(yintercept=-45) + coord_map(project='azequalarea', orientation=c(-36.92, 174.6, 0))&#xD;&#xA;nzmap + geom_vline(xintercept=172) + coord_map(project='azequalarea', orientation=c(-36.92, 174.6, 0))&#xD;&#xA;nzmap + geom_abline(intercept=130,  slope=-1) + coord_map(project='azequalarea', orientation=c(-36.92, 174.6, 0))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;As I was working on this,  I had a major &quot;duh&quot; moment when realized that it's New Zealand and not Italy,  as I mentioned earlier!" />
      <Message Id="3616627" ParentId="364" UserId="86978" Date="01/23/2012 16:21:47" Content="Abandoning this pull request in favor of #368." />
    </Messages>
  </Topic>
  <Topic Id="365" Title="dist_central_angle gives wrong values">
    <Messages>
      <Message Id="0" ParentId="365" UserId="86978" Date="01/21/2012 20:58:59" Content="As I understand it,  the dist_central_angle function is supposed to give an angle which,  if multiplied by the radius,  will give the great-circle distance.&#xD;&#xA;&#xD;&#xA;The problem is that if there are two points which have the same latitude,  it returns 0. Here are two examples. The first seems right,  the second doesn't.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; dist_central_angle(lat=c(-90, 90),  lon=c(-45, -45))&#xD;&#xA;[ 1 ] 3.141593&#xD;&#xA;&#xD;&#xA;&gt; dist_central_angle(lat=c(45, 45),  lon=c(0, 180))&#xD;&#xA;[ 1 ] 0&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Inside the function,  the distance seems to be calculated by this line of code - but it doesn't use `lon` at all,  only `lat`:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;  ahav(sqrt(hav(diff(lat)) + cos(lat[ -n ]) * cos(lat[ -1 ]) * hav(diff(lat))))&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="366" Title="Fix dist_central_angle bug ">
    <Messages>
      <Message Id="0" ParentId="366" UserId="86978" Date="01/21/2012 21:39:05" Content="This fixes #365.&#xD;&#xA;&#xD;&#xA;I think it now correctly implements the haversine formula: &#xD;&#xA;http://en.wikipedia.org/wiki/Haversine_formula&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; dist_central_angle(lat=c(-90, 90),  lon=c(-45, -45))&#xD;&#xA;[ 1 ] 3.141593&#xD;&#xA;&gt; dist_central_angle(lat=c(0, 0),  lon=c(0, 180))&#xD;&#xA;[ 1 ] 3.141593&#xD;&#xA;```" />
      <Message Id="3599272" ParentId="366" UserId="86978" Date="01/21/2012 21:55:34" Content="@hadley Please see the line of code with the comment (I don't know if the comment showed up on this pull request page in a way that makes it easy for you to see.)" />
      <Message Id="3600434" ParentId="366" UserId="4196" Date="01/22/2012 01:20:53" Content="Thanks - that was a dumb mistake.  You could add a check for equal lengths if you want - the assumption is that they will be because that function gets called with columns from a data frame." />
      <Message Id="3600495" ParentId="366" UserId="86978" Date="01/22/2012 01:34:01" Content="OK,  that makes sense. Instead of adding a length check,  I just changed it so it indexes into `lat` by using `length(lat)`,  instead of `length(lon)`. This shouldn't change functionality,  but it will make things less confusing for anyone who looks at the code in the future." />
    </Messages>
  </Topic>
  <Topic Id="367" Title="stat_smooth may use two different model types for one data set">
    <Messages>
      <Message Id="0" ParentId="367" UserId="86978" Date="01/22/2012 21:47:34" Content="This bug may be fairly obscure.&#xD;&#xA;&#xD;&#xA;In stat-smooth.r,  in `StatSmooth$calculate`,  the following block of code decides what smoothing method to use,  depending on the size of the data. If one group has &lt;1000 data points and another group has &gt;1000,  they will end up being smoothed with two different methods.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    # Figure out what type of smoothing to do: loess for small datasets, &#xD;&#xA;    # gam with a cubic regression basis for large data&#xD;&#xA;    if (is.character(method) &amp;&amp; method == &quot;auto&quot;) { &#xD;&#xA;      if (nrow(data) &lt; 1000) { &#xD;&#xA;        method &lt;- &quot;loess&quot;&#xD;&#xA;       } else { &#xD;&#xA;        try_require(&quot;mgcv&quot;)&#xD;&#xA;        method &lt;- gam&#xD;&#xA;        formula &lt;- y ~ s(x,  bs = &quot;cs&quot;)&#xD;&#xA;       }&#xD;&#xA;     }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Here's an example that illustrates:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(125)&#xD;&#xA;dat &lt;- data.frame(xvar = runif(1000),  yvar = rnorm(1000))&#xD;&#xA;# Make two copies of the same values,  in group A and B&#xD;&#xA;dat &lt;- rbind(cbind(dat,  group='A'),  cbind(dat,  group='B'))&#xD;&#xA;# Drop one of the B's,  so there are 1000 A's and 999 B's&#xD;&#xA;dat &lt;- dat[ -2000,  ]&#xD;&#xA;&#xD;&#xA;# The smoothing lines should be almost identical since the only difference&#xD;&#xA;# between A and B is one data point,  which you can see near (.5,  0)&#xD;&#xA;ggplot(dat,  aes(x=xvar,  y=yvar,  colour=group)) + geom_point() + geom_smooth()&#xD;&#xA;# But they're not the same since 1000 is the threshold for loess vs gam smoothing&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;One possible way of dealing with this is to move the method-deciding code to `StatSmooth$calculate_groups` and use gam when the *average* number of data points in each group is &gt;=1000." />
      <Message Id="3607354" ParentId="367" UserId="4196" Date="01/22/2012 23:29:35" Content="Hmmm,  that's an interesting point.  Probably would need to be based on the maximum group size,  because otherwise the quadratic behaviour of loess will become a problem.  Another option would be to implement a better smoothing system that can deal with all sizes." />
      <Message Id="3607415" ParentId="367" UserId="86978" Date="01/22/2012 23:37:44" Content="Using max size makes sense.&#xD;&#xA;&#xD;&#xA;I think it would also be a good idea to have it print a warning message saying something like &quot;'method' unspecified,  so using loess&quot;,  like the warning given by stat_bin when binwidth is unspecified. Until I started digging into this code,  I thought that it always used loess. I've actually used it on large data sets and thought it was using loess,  when in fact it was using gam." />
      <Message Id="3607564" ParentId="367" UserId="4196" Date="01/23/2012 00:02:46" Content="Good idea - it should be a message though.  I think that should be a general principle - whenever a reasonably important default setting is chosen automatically,  a message should inform the user what is going on." />
      <Message Id="3652296" ParentId="367" UserId="4196" Date="01/25/2012 15:18:12" Content="Fixed - @wch can you please use (fixes #367) to ensure that the issue gets automatically closed,  not just referenced?" />
      <Message Id="3652834" ParentId="367" UserId="86978" Date="01/25/2012 15:45:51" Content="Sure,  will do in the future." />
    </Messages>
  </Topic>
  <Topic Id="368" Title="Implement coord_range">
    <Messages>
      <Message Id="0" ParentId="368" UserId="86978" Date="01/23/2012 04:23:40" Content="This is an implementation of coord_range. This is the third attempt at resolving the issue raised by #361,  and followed out of discussion #364. I decided to start over because it's cleaner this way.&#xD;&#xA;&#xD;&#xA;I've done the following:&#xD;&#xA;&#xD;&#xA;* implement coord_range&#xD;&#xA;* fix coord_map to use `x.range` and `x.proj`,  instead of `x.raw` and `x.range`&#xD;&#xA;* modify abline,  hline,  and vline to use coord_range&#xD;&#xA;* add visual tests&#xD;&#xA;" />
      <Message Id="3613889" ParentId="368" UserId="4196" Date="01/23/2012 13:42:21" Content="Could you please add a note to news and maybe a few examples in geom_vline,  hline,  abline of using them with different coordinate systems?" />
      <Message Id="3616655" ParentId="368" UserId="86978" Date="01/23/2012 16:23:26" Content="I made the changes. In `geom_vline`,  the coordinate transform examples used `last_plot()`,  but I got rid of `last_plot()` because it seemed wrong to keep adding more coord transforms on top of previous ones." />
      <Message Id="3618235" ParentId="368" UserId="4196" Date="01/23/2012 17:46:29" Content="Looks good.  And it probably is a good idea to get rid of `last_plot()`" />
    </Messages>
  </Topic>
  <Topic Id="369" Title="Fix stat_smooth auto-method bug (#367)">
    <Messages>
      <Message Id="0" ParentId="369" UserId="86978" Date="01/23/2012 05:22:58" Content="It now chooses auto method based on the size of the largest group,  and displays a message about which method is being used.&#xD;&#xA;&#xD;&#xA;The diff looks really ugly and confusing,  but the change was pretty simple. I basically moved the method-decision block of code from $calculate to $calculate_groups,  added messages,  and updated the $calculate_groups function to handle the parameters correctly. But the diff viewer thinks I deleted and inserted lines of code all over the place. If the diff is too confusing,  I might be able to redo it and make some trivial changes (spacing,  etc) that result in a clearer diff.&#xD;&#xA;&#xD;&#xA;In these examples,  the smooth lines are now directly on top of each other,  as they should be.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(mgcv)&#xD;&#xA;&#xD;&#xA;set.seed(125)&#xD;&#xA;dat &lt;- data.frame(xvar = runif(1000),  yvar = rnorm(1000))&#xD;&#xA;# Make two copies of the same values,  in group A and B&#xD;&#xA;dat &lt;- rbind(cbind(dat,  group='A'),  cbind(dat,  group='B'))&#xD;&#xA;&#xD;&#xA;# Drop one of the B's,  so there are 1000 A's and 999 B's&#xD;&#xA;dat1 &lt;- dat[ -2000,  ]&#xD;&#xA;# Drop one of the A's,  so both A and B have the same 999 points&#xD;&#xA;dat2 &lt;- dat1[ -1000,  ]&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Since there are &gt;=1000 points in one group,  this uses gam.&#xD;&#xA;# The smoothing lines are now almost identical since the only difference&#xD;&#xA;# between A and B is one data point,  which you can see near (.5,  0)&#xD;&#xA;ggplot(dat1,  aes(x=xvar,  y=yvar,  colour=group)) +&#xD;&#xA;    geom_point(alpha=.5) + geom_smooth(alpha=.5)&#xD;&#xA;# geom_smooth: method=&quot;auto&quot; and size of largest group is &gt;=1000,  so using gam with formula: y ~ s(x,  bs = &quot;cs&quot;).&#xD;&#xA;&#xD;&#xA;# Since there are &lt;1000 points in both groups,  this uses loess&#xD;&#xA;# The smoothing lines look identical.&#xD;&#xA;# For this data,  the loess fit looks straighter than gam used for dat1&#xD;&#xA;ggplot(dat2,  aes(x=xvar,  y=yvar,  colour=group)) +&#xD;&#xA;    geom_point(alpha=.5) + geom_smooth(alpha=.5)&#xD;&#xA;# geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess smoothing.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3615906" ParentId="369" UserId="86978" Date="01/23/2012 15:44:05" Content="Oops,  I accidentally hit the close button. Anyway,  this latest commit does it using `count`." />
    </Messages>
  </Topic>
  <Topic Id="370" Title="guide: document update">
    <Messages>
      <Message Id="0" ParentId="370" UserId="227097" Date="01/23/2012 08:30:10" Content="" />
    </Messages>
  </Topic>
  <Topic Id="371" Title="dotplot: more information about binning">
    <Messages>
      <Message Id="0" ParentId="371" UserId="86978" Date="01/24/2012 05:33:04" Content="I realized that I didn't include any information about the binning algorithm in the help file,  so here it is. I wasn't totally sure if it should go in geom_dotplot or stat_bindot,  but I figured people would be more likely to see it if it was in geom_dotplot." />
    </Messages>
  </Topic>
  <Topic Id="372" Title="scale_*_date should handle natural language in the breaks argument">
    <Messages>
      <Message Id="0" ParentId="372" UserId="18445" Date="01/24/2012 08:48:31" Content="I'd like to be able to write&#xD;&#xA;&#xD;&#xA;       scale_x_date(breaks = &quot;10 weeks&quot;)&#xD;&#xA;&#xD;&#xA;rather than&#xD;&#xA;&#xD;&#xA;       scale_x_date(breaks = date_breaks(&quot;10 weeks&quot;))&#xD;&#xA;&#xD;&#xA;since the scale is a date scale,  it seems like it would be possible to know that it needs to handle the &quot;10 weeks&quot; argument with date\_breaks(). I understand that,  from a programming point of view it makes sense to have the same argument take the same kind of data in every scale\_* function. I'm just wondering if,  in some cases,  it would be possible to make it a bit easier for the user." />
      <Message Id="3645585" ParentId="372" UserId="227097" Date="01/25/2012 03:59:27" Content="Thanks for reporting. I'm implementing this function,  OK?" />
      <Message Id="3650051" ParentId="372" UserId="18445" Date="01/25/2012 12:53:48" Content="That would be perfect!" />
    </Messages>
  </Topic>
  <Topic Id="373" Title="breaks on original or transformed data">
    <Messages>
      <Message Id="0" ParentId="373" UserId="227097" Date="01/25/2012 08:42:30" Content="Please see also https://github.com/hadley/scales/issues/9&#xD;&#xA;&#xD;&#xA;Automatic pretty break is convenient in most cases,  but as I mentioned above,  at the moment it is somewhat confusion in scales with transformation w.r.t the data space.&#xD;&#xA;&#xD;&#xA;Users may want a pretty breaks on the original data space or on the transformed data space.&#xD;&#xA;This choice should be done explicitly.&#xD;&#xA;&#xD;&#xA;I would propose one extra option,  i.e.,  users can choose the pretty breaks on the original or transformed data.&#xD;&#xA;Then,  the `continuous_scale` will be:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;continuous_scale(...,  breaking = c(&quot;original&quot;,  &quot;transformed&quot;))&#xD;&#xA;```&#xD;&#xA;name should be considered.&#xD;&#xA;&#xD;&#xA;If original,  then it has pretty breaks on the original data range.&#xD;&#xA;If transformed,   then it has pretty breaks on the transformed data range.&#xD;&#xA;&#xD;&#xA;OR,  maybe,  `breaks` can accept a character specifying the data space.&#xD;&#xA;I like the former style though.&#xD;&#xA;&#xD;&#xA;Also,  major and minor breaks may as well have their own basis.&#xD;&#xA;There are many examples of such plot even in the wikipedia:&#xD;&#xA;http://en.wikipedia.org/wiki/Logarithmic_scale&#xD;&#xA;&#xD;&#xA;But the example in the wikipedia is more special...&#xD;&#xA;" />
      <Message Id="3652057" ParentId="373" UserId="4196" Date="01/25/2012 15:04:14" Content="Isn't this what `trans_breaks` does?  The default in ggplot2 is to space major breaks evenly in the transformed space,  and the minor breaks evenly in the data space. " />
      <Message Id="3671775" ParentId="373" UserId="227097" Date="01/26/2012 16:38:48" Content="OK,  I see.&#xD;&#xA;Here is the example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- qplot(seq(1,  1e4,  len = 10),  seq(1,  1e5,  len = 10)) + geom_line()&#xD;&#xA;# on original data space&#xD;&#xA;p + scale_x_log10()&#xD;&#xA;# on transformed data space&#xD;&#xA;p + scale_x_log10(breaks = trans_breaks(log10_trans()$trans,  log10_trans()$inv))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;is this what you mean?&#xD;&#xA;&#xD;&#xA;Maybe this is somewhat complicated.&#xD;&#xA;As the scale_x_log10 already knows the trans/inv,  so it should be written like this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p + scale_x_log10(breaks = trans_breaks())&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3672230" ParentId="373" UserId="227097" Date="01/26/2012 17:01:02" Content="Here is an experimental implementation above.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- qplot(seq(1,  1e4,  len = 10),  seq(1,  1e5,  len = 10)) + geom_line()&#xD;&#xA;p + scale_x_log10()&#xD;&#xA;p + scale_x_log10(breaks = auto_break_trans())&#xD;&#xA;# identical to&#xD;&#xA;# p + scale_x_log10(breaks = trans_breaks(log10_trans()$trans,  log10_trans()$inv))&#xD;&#xA;```" />
      <Message Id="3914340" ParentId="373" UserId="18970" Date="02/10/2012 21:10:20" Content="funny,  I had completely missed this discussion but ended up asking about the same issue and similar suggestions: http://groups.google.com/group/ggplot2-dev/browse_thread/thread/8133f3f634bff4bb" />
      <Message Id="35939544" ParentId="373" UserId="4196" Date="02/24/2014 21:18:12" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="374" Title="scale-date: support character for date interval in breaks argument (#372)">
    <Messages>
      <Message Id="0" ParentId="374" UserId="227097" Date="01/25/2012 14:25:41" Content="" />
      <Message Id="3652014" ParentId="374" UserId="4196" Date="01/25/2012 15:02:10" Content="Could you please also implement for `scale_datetime`? Thanks!" />
      <Message Id="3653053" ParentId="374" UserId="227097" Date="01/25/2012 15:57:45" Content="Wow,  fast-forwardable. git is so neat!" />
      <Message Id="3654075" ParentId="374" UserId="86978" Date="01/25/2012 16:48:21" Content="You may already know this,  but... If you make a mistake in a commit that you want to revert,  you can fix it,  commit,  and then run `git rebase -i HEAD^` and squash the new commit into the old one. In this case you can still do it (even after adding more commits) by running `git rebase HEAD~4`.&#xD;&#xA;&#xD;&#xA;Once you've rebased it,  you need to force a push to github with `git push -f origin mybranch`. If you do this,  the github pull request will reflect the new series of commits,  instead of the old series. (I know all of this because I'm guilty of rebasing a lot.)" />
      <Message Id="3654137" ParentId="374" UserId="227097" Date="01/25/2012 16:51:21" Content="Thanks. I know the `git push -f origin mybranch` but I don't know how the comments (in particular,  line note for source codes) on the old branch are.&#xD;&#xA;Does they disappear?" />
      <Message Id="3654269" ParentId="374" UserId="86978" Date="01/25/2012 16:57:52" Content="The line notes stay there,  but you can't look at the full file anymore. You can see an example in #369. Hadley made a line note,  and then I rebased and pushed. In the first line note (before the rebase),  there's no link in the upper right for &quot;view full changes&quot; because that commit disappeared after the rebase. In the other notes (after the rebase),  the link is still there." />
      <Message Id="3654325" ParentId="374" UserId="227097" Date="01/25/2012 17:00:41" Content="Thanks again. I got it.&#xD;&#xA;So as long as no one pulled the pushed branch,  we can remove and re-push without any problem." />
    </Messages>
  </Topic>
  <Topic Id="375" Title="minor_breaks in date/date_time scale">
    <Messages>
      <Message Id="0" ParentId="375" UserId="227097" Date="01/26/2012 00:51:28" Content="```R&#xD;&#xA;df &lt;- data.frame(&#xD;&#xA;  day30  = seq(Sys.Date(),  length = 10,  by = &quot;5 day&quot;), &#xD;&#xA;  y = runif(10)&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(df,  aes(day30,  y)) + geom_line()&#xD;&#xA;p + scale_x_date(breaks = &quot;2 month&quot;,  minor_breaks = &quot;week&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;incudes an error.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error in Ops.Date((x - from[ 1 ]),  diff(from)) : &#xD;&#xA;  / not defined for Date objects&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Maybe this is because, &#xD;&#xA;1. data are transformed into `numeric` by `scales:::from_date` in `date_trans`&#xD;&#xA;2. `minor_breaks` are calculated on the original data space (i.e.,  `date`).&#xD;&#xA;3. some arithmetic operation combines `numeric` and `date`.&#xD;&#xA;&#xD;&#xA;Anyway it need to be reconsidered...&#xD;&#xA;" />
      <Message Id="4078681" ParentId="375" UserId="227097" Date="02/21/2012 16:51:34" Content="Can this issue be closed? Or keep it for future reference?" />
    </Messages>
  </Topic>
  <Topic Id="376" Title="error when using alpha-transparency when plotting a variable named &quot;alpha&quot;">
    <Messages>
      <Message Id="0" ParentId="376" UserId="932850" Date="01/30/2012 10:00:28" Content="this is with the 0.9.0 development version of ggplot2&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;&#xD;&#xA;library(ggplot2)&#xD;&#xA;## error,  but I expected to draw 1 point with 25% transparency...&#xD;&#xA;## there seems to be a problem with the variable named &quot;alpha&quot;&#xD;&#xA;ggplot(data.frame(x=1, alpha=2), aes(x, alpha))+geom_point(alpha=1/4)&#xD;&#xA;## Error in UseMethod(&quot;scale_dimension&quot;) : &#xD;&#xA;##   no applicable method for 'scale_dimension' applied to an object of class &quot;NULL&quot;&#xD;&#xA;## ok when the variable name is not &quot;alpha&quot;&#xD;&#xA;ggplot(data.frame(x=1, y=2), aes(x, y))+geom_point(alpha=1/4)&#xD;&#xA;## ok when you dont use transparency with a variable called &quot;alpha&quot;&#xD;&#xA;ggplot(data.frame(x=1, alpha=2), aes(x, alpha))+geom_point()&#xD;&#xA;&lt;/pre&gt;" />
      <Message Id="3719132" ParentId="376" UserId="227097" Date="01/30/2012 13:06:42" Content="Please see https://github.com/hadley/ggplot2/commit/b19ff3fd75dd009744670a6527fd4e4a98938f40#commitcomment-914097" />
    </Messages>
  </Topic>
  <Topic Id="377" Title="different environments for evaluating different arguments?">
    <Messages>
      <Message Id="0" ParentId="377" UserId="163582" Date="01/30/2012 16:33:41" Content="This seems weird to me (`qplot()` can find the object `freq`,  but cannot find `m`,  so it seems the arguments `x` and `breaks` are evaluated in different environments):&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(evaluate)&#xD;&#xA;f = function() { &#xD;&#xA;  env = new.env(parent = globalenv())&#xD;&#xA;  evaluate(&quot;library(ggplot2)&#xD;&#xA;           freq &lt;- table(as.integer(runif(1000,  1,  100)))&#xD;&#xA;           m &lt;- max(freq) + 1&#xD;&#xA;           qplot(c(freq),  breaks=0:m,  log='y',  xlab='Probe number')&quot;,  &#xD;&#xA;           envir = env)&#xD;&#xA; }&#xD;&#xA;str(f())&#xD;&#xA;## List of 5&#xD;&#xA;##  $ :List of 1&#xD;&#xA;##   ..$ src: chr &quot;library(ggplot2)\n&quot;&#xD;&#xA;##   ..- attr(*,  &quot;class&quot;)= chr &quot;source&quot;&#xD;&#xA;##  $ :List of 1&#xD;&#xA;##   ..$ src: chr &quot;           freq &lt;- table(as.integer(runif(1000,  1,  100)))\n&quot;&#xD;&#xA;##   ..- attr(*,  &quot;class&quot;)= chr &quot;source&quot;&#xD;&#xA;##  $ :List of 1&#xD;&#xA;##   ..$ src: chr &quot;           m &lt;- max(freq) + 1\n&quot;&#xD;&#xA;##   ..- attr(*,  &quot;class&quot;)= chr &quot;source&quot;&#xD;&#xA;##  $ :List of 1&#xD;&#xA;##   ..$ src: chr &quot;           qplot(c(freq),  breaks=0:m,  log='y',  xlab='Probe number')&quot;&#xD;&#xA;##   ..- attr(*,  &quot;class&quot;)= chr &quot;source&quot;&#xD;&#xA;##  $ :List of 2&#xD;&#xA;##   ..$ message: chr &quot;object 'm' not found&quot;&#xD;&#xA;##   ..$ call   : language eval(expr,  envir,  enclos)&#xD;&#xA;##   ..- attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;from yihui/knitr#111" />
      <Message Id="3722816" ParentId="377" UserId="4196" Date="01/30/2012 16:49:13" Content="It works for me without evaluate:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;f &lt;- function() { &#xD;&#xA;  library(ggplot2)&#xD;&#xA;  freq &lt;- table(as.integer(runif(1000,  1,  100)))&#xD;&#xA;  m &lt;- max(freq) + 1&#xD;&#xA;  qplot(c(freq),  breaks=0:m,  log='y',  xlab='Probe number')&#xD;&#xA; }&#xD;&#xA;f()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;so I think that suggests it's an evaluate bug." />
      <Message Id="3722919" ParentId="377" UserId="163582" Date="01/30/2012 16:54:35" Content="But `eval()` does not work either:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;f = function() { &#xD;&#xA;  env = new.env(parent = globalenv())&#xD;&#xA;  eval(parse(text = &quot;library(ggplot2)&#xD;&#xA;           freq &lt;- table(as.integer(runif(1000,  1,  100)))&#xD;&#xA;           m &lt;- max(freq) + 1&#xD;&#xA;           qplot(c(freq),  breaks=0:m,  log='y',  xlab='Probe number')&quot;),  &#xD;&#xA;           envir = env)&#xD;&#xA; }&#xD;&#xA;f()&#xD;&#xA;## Error in eval(expr,  envir,  enclos) : object 'm' not found&#xD;&#xA;```" />
      <Message Id="3723098" ParentId="377" UserId="4196" Date="01/30/2012 17:05:34" Content="Hmmm,  good point.  This works:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;f = function() { &#xD;&#xA; env = new.env(parent = globalenv())&#xD;&#xA; eval(parse(text = &quot;library(ggplot2)&#xD;&#xA;          freq &lt;- table(as.integer(runif(1000,  1,  100)))&#xD;&#xA;          m &lt;- max(freq) + 1&#xD;&#xA;          qplot(c(freq),  log='y',  xlab='Probe number')&quot;), &#xD;&#xA;          envir = env)&#xD;&#xA; }&#xD;&#xA;f()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;so it's only parameter that are causing problems.&#xD;&#xA;&#xD;&#xA;Looking at qplot,  I see:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;   mapply(function(g,  s,  ps) { &#xD;&#xA;        if (is.character(g)) &#xD;&#xA;            g &lt;- Geom$find(g)&#xD;&#xA;        if (is.character(s)) &#xD;&#xA;            s &lt;- Stat$find(s)&#xD;&#xA;        if (is.character(ps)) &#xD;&#xA;            ps &lt;- Position$find(ps)&#xD;&#xA;        params &lt;- arguments[ setdiff(names(arguments),  c(aes_names,  &#xD;&#xA;            argnames)) ]&#xD;&#xA;        params &lt;- lapply(params,  eval,  parent.frame(n = 1))&#xD;&#xA;        p &lt;&lt;- p + layer(geom = g,  stat = s,  geom_params = params,  &#xD;&#xA;            stat_params = params,  position = ps)&#xD;&#xA;     },  geom,  stat,  position)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;which is possibly causing the problem.  Not sure why I need to do special evaluation here." />
    </Messages>
  </Topic>
  <Topic Id="378" Title="facet_grid can't deal with more than two facetting variables per margin">
    <Messages>
      <Message Id="0" ParentId="378" UserId="998541" Date="01/30/2012 18:42:26" Content="Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;d &lt;- expand.grid(a=1:2,  b=3:4,  c=c(5:6,  5:6),  d=7:8)&#xD;&#xA;d$value &lt;- rnorm(nrow(d))&#xD;&#xA;d$x &lt;- 1&#xD;&#xA;ggplot(d,  aes(x=x,  y=value)) + geom_point() + facet_grid(a + b + c ~ d)&#xD;&#xA;## throws an error&#xD;&#xA;## stupid workaround:&#xD;&#xA;d$bc &lt;- with(d,  factor(b):factor(c))&#xD;&#xA;ggplot(d,  aes(x=x,  y=value)) + geom_point() + facet_grid(a + bc ~ d)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;EDIT: &#xD;&#xA;&#xD;&#xA;BrianDiggs has a good sugestion below,  mine is overcomplicated.&#xD;&#xA;There is also the simple workaround of simply doing:&#xD;&#xA;````&#xD;&#xA;facet_grid(list(c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),  &quot;d&quot;))&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;Suggested solution:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;the problem is the way that `facet_grid` defines the rows and cols simply as &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;   rows &lt;- as.quoted(facets[ [ 2 ] ])&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;which breaks down for a formula with more than two terms.  &#xD;&#xA;Instead,  I would suggest using a real formula parser to actually find all the terms,  i.e. &#xD;&#xA;use &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;    getVars &lt;- function(frm){ &#xD;&#xA;       if(length(as.quoted(frm))==1) { &#xD;&#xA;           if(as.character(frm)!=&quot;+&quot;){ &#xD;&#xA;               return(as.quoted(frm))  &#xD;&#xA;            } else return(NULL)&#xD;&#xA;        } else { &#xD;&#xA;           return(c(getVars(frm[ [ 1 ] ]),  getVars(frm[ [ 2 ] ]),  as.quoted(frm[ [ 3 ] ])))&#xD;&#xA;        }    &#xD;&#xA;     }&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;and replace lines &#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;    rows &lt;- as.quoted(facets[ [ 2 ] ])&#xD;&#xA;    cols &lt;- as.quoted(facets[ [ 3 ] ])&#xD;&#xA;````&#xD;&#xA;     &#xD;&#xA;in `facet_grid` with&#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;     rows &lt;- getVars(facets[ [ 2 ] ])&#xD;&#xA;     cols &lt;- getVars(facets[ [ 3 ] ])&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3728951" ParentId="378" UserId="4196" Date="01/30/2012 22:10:18" Content="Well `as.quoted.formula` has a real parser,  so I probably just need to use that.  The problem is that it collapses both sides into one list." />
      <Message Id="3729375" ParentId="378" UserId="463252" Date="01/30/2012 22:35:19" Content="This may be hackish,  but splits the difference&#xD;&#xA;&#xD;&#xA;    facets_row &lt;- facets&#xD;&#xA;    facets_row[ [ 3 ] ] &lt;- NULL&#xD;&#xA;    rows &lt;- as.quoted(facets_row)&#xD;&#xA;    facets_col &lt;- facets&#xD;&#xA;    facets_col[ [ 2 ] ] &lt;- NULL&#xD;&#xA;    cols &lt;- as.quoted(facets_col)&#xD;&#xA;&#xD;&#xA;Basically creates two formulas,  one with just the left side and one with just the right,  and uses `as.quoted` (specifically `as.quoted.formula`) on each.  Not really tested." />
      <Message Id="3868822" ParentId="378" UserId="4196" Date="02/08/2012 14:57:46" Content="Not sure whether this is more or less hackish,  but I'll probably go with&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;as.quoted(structure(f[ [ 2 ] ],  class = &quot;formula&quot;))&#xD;&#xA;as.quoted(structure(f[ [ 3 ] ],  class = &quot;formula&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;need to write a couple of tests to make sure it doesn't happen again." />
      <Message Id="3869971" ParentId="378" UserId="463252" Date="02/08/2012 16:06:14" Content="I'd lean to more hackish because the &quot;formula&quot; you create isn't really a formula even though `as.quoted.formula` will handle it fine.&#xD;&#xA;&#xD;&#xA;The setup:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;facets &lt;- a + b ~ c + d&#xD;&#xA;&#xD;&#xA;facets_row &lt;- facets&#xD;&#xA;facets_row[ [ 3 ] ] &lt;- NULL&#xD;&#xA;rows &lt;- as.quoted(facets_row)&#xD;&#xA;facets_col &lt;- facets&#xD;&#xA;facets_col[ [ 2 ] ] &lt;- NULL&#xD;&#xA;cols &lt;- as.quoted(facets_col)&#xD;&#xA;&#xD;&#xA;rows_hw &lt;- as.quoted(structure(facets[ [ 2 ] ],  class = &quot;formula&quot;))&#xD;&#xA;cols_hw &lt;- as.quoted(structure(facets[ [ 3 ] ],  class = &quot;formula&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Comparisons&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; identical(rows,  rows_hw)&#xD;&#xA;[ 1 ] TRUE&#xD;&#xA;&gt; identical(cols,  cols_hw)&#xD;&#xA;[ 1 ] TRUE&#xD;&#xA;&gt; facets_row&#xD;&#xA;~a + b&#xD;&#xA;&gt; facets_col&#xD;&#xA;~c + d&#xD;&#xA;&gt; structure(facets[ [ 2 ] ],  class = &quot;formula&quot;)&#xD;&#xA;Error in print(a + b) : object 'a' not found&#xD;&#xA;&gt; structure(facets[ [ 3 ] ],  class = &quot;formula&quot;)&#xD;&#xA;Error in print(c + d) : object 'd' not found&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;While the two return the same,  what is built in your example can not be handled by other functions taking formulas,  and is dependent on `as.quoted.formula` being able to handle these not-really-formula objects correctly. This is the sort of fragile assumptions that can easily break later. And be harder to track down." />
      <Message Id="3870313" ParentId="378" UserId="4196" Date="02/08/2012 16:21:34" Content="Well it's relying on my knowledge that `as.quoted.formula` will handle the call objects in the correct way.  Equivalently I could do `as.quoted.formula(f[ [ 2 ] ])` but that's not exported from the plyr namespace." />
      <Message Id="3871931" ParentId="378" UserId="227097" Date="02/08/2012 17:36:26" Content="&gt; as.quoted(structure(f[ [ 2 ] ],  class = &quot;formula&quot;))&#xD;&#xA;&gt; as.quoted(structure(f[ [ 3 ] ],  class = &quot;formula&quot;))&#xD;&#xA;&#xD;&#xA;I think the correct fix will be like this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    # check the length of faces == 3&#xD;&#xA;    # or,  if the length == 2,  add &quot;.&quot; to left hand side.&#xD;&#xA;&#xD;&#xA;    rows &lt;- as.quoted(facets[ -3 ])&#xD;&#xA;    rows &lt;- rows[ !sapply(rows,  identical,  as.name(&quot;.&quot;)) ]&#xD;&#xA;    cols &lt;- as.quoted(facets[ -2 ])&#xD;&#xA;    cols &lt;- cols[ !sapply(cols,  identical,  as.name(&quot;.&quot;)) ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This is because `f[ [ 2 ] ]`  cannot be regarded as a valid formula so may be it will induce another bug." />
      <Message Id="3875559" ParentId="378" UserId="463252" Date="02/08/2012 20:36:37" Content="Oh,  I like `facets[ -2 ]`. Saves creating an explicit separate formula and still makes a valid formula object,  Also,  is is the only one of the 3 that doesn't throw an error if the left hand side of the formula is missing (though it does not give the right answer which may be worse).&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;facets &lt;-  a + b ~ c + d&#xD;&#xA;&#xD;&#xA;rows_bd &lt;- rows_hw &lt;- rows_kt &lt;- NULL&#xD;&#xA;cols_bd &lt;- cols_hw &lt;- cols_kt &lt;- NULL&#xD;&#xA;&#xD;&#xA;facets_row &lt;- facets&#xD;&#xA;facets_row[ [ 3 ] ] &lt;- NULL&#xD;&#xA;rows_bd &lt;- as.quoted(facets_row)&#xD;&#xA;facets_col &lt;- facets&#xD;&#xA;facets_col[ [ 2 ] ] &lt;- NULL&#xD;&#xA;cols_bd &lt;- as.quoted(facets_col)&#xD;&#xA;&#xD;&#xA;rows_hw &lt;- as.quoted(structure(facets[ [ 2 ] ],  class = &quot;formula&quot;))&#xD;&#xA;cols_hw &lt;- as.quoted(structure(facets[ [ 3 ] ],  class = &quot;formula&quot;))&#xD;&#xA;&#xD;&#xA;rows_kt &lt;- as.quoted(facets[ -3 ])&#xD;&#xA;rows_kt &lt;- rows_kt[ !sapply(rows_kt,  identical,  as.name(&quot;.&quot;)) ]&#xD;&#xA;cols_kt &lt;- as.quoted(facets[ -2 ])&#xD;&#xA;cols_kt &lt;- cols_kt[ !sapply(cols_kt,  identical,  as.name(&quot;.&quot;)) ]&#xD;&#xA;&#xD;&#xA;identical(rows_bd,  rows_hw)&#xD;&#xA;identical(cols_bd,  cols_hw)&#xD;&#xA;identical(rows_hw,  rows_kt)&#xD;&#xA;identical(cols_hw,  cols_kt)&#xD;&#xA;identical(rows_bd,  rows_kt)&#xD;&#xA;identical(cols_bd,  cols_kt)&#xD;&#xA;facets_row&#xD;&#xA;facets_col&#xD;&#xA;structure(facets[ [ 2 ] ],  class = &quot;formula&quot;)&#xD;&#xA;structure(facets[ [ 3 ] ],  class = &quot;formula&quot;)&#xD;&#xA;facets[ -3 ]&#xD;&#xA;facets[ -2 ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;For `facets &lt;- a + b ~ c + d`,  all are identical.&#xD;&#xA;For `facets &lt;- a ~ c + d`,  all are identical.&#xD;&#xA;For `facets &lt;- a + b + c ~ d + e + f`,  all are identical&#xD;&#xA;For `facets &lt;- a ~ d`,  all are identical&#xD;&#xA;For `facets &lt;- . ~ d`,  Kohske's correctly eliminates the `.` (which could be added to the others as a separate step as well); otherwise they agree&#xD;&#xA;For `facets &lt;- a ~ .`,  Kohske's correctly eliminates the `.` (which could be added to the others as a separate step as well); otherwise they agree&#xD;&#xA;For `facets &lt;- ~ d`,  mine gives an error (`Error in facets_row[ [ 3 ] ] &lt;- NULL : subscript out of bounds`) when determining rows as does Hadley's (`Error in facets[ [ 3 ] ] : subscript out of bounds`) when determining columns; furthermore,  none get the designation right. Hadley's reports the rows as `d`; I report the columns as `~`,  and Kohske's makes both mistakes.&#xD;&#xA;&#xD;&#xA;If there isn't a check somewhere that there must be a left-hand side to the formula,  all of these solutions will have problems.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3876491" ParentId="378" UserId="4196" Date="02/08/2012 21:25:56" Content="How about helper functions:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;lhs &lt;- function(x) if(length(x) == 2) NULL else x[ -3 ]&#xD;&#xA;rhs &lt;- function(x) if(length(x) == 2) x else x[ -2 ]&#xD;&#xA;```" />
      <Message Id="3877249" ParentId="378" UserId="463252" Date="02/08/2012 22:03:41" Content="That works." />
    </Messages>
  </Topic>
  <Topic Id="379" Title="quick fix for scale date/datetime minor breaks (fixes #375)">
    <Messages>
      <Message Id="0" ParentId="379" UserId="227097" Date="01/31/2012 09:59:32" Content="This is a kind of temporal workaround.&#xD;&#xA;We need to reconsider about trans in scale.&#xD;&#xA;&#xD;&#xA;see #375,  #373&#xD;&#xA;&#xD;&#xA;Also this commit includes a fix for #374" />
    </Messages>
  </Topic>
  <Topic Id="380" Title="geom_text rendering is blurred">
    <Messages>
      <Message Id="0" ParentId="380" UserId="764080" Date="01/31/2012 10:18:39" Content="I have noticed that the textual annotation rendered by geom_text on all my plots are somewhat blurred,  after updating to ggplot2 0.9.0.&#xD;&#xA;Here is a minimal reproducible example:&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    Data &lt;- data.frame(&#xD;&#xA;      X = rnorm(10), &#xD;&#xA;      Y = rnorm(10)&#xD;&#xA;    )&#xD;&#xA;&#xD;&#xA;    ggplot(data = Data,  aes(x = X,  y = Y))+ &#xD;&#xA;      geom_point()  + &#xD;&#xA;      geom_text(aes(0.5,  0.5,  label=&quot;geom_text&quot;))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Additionally,  I noticed that geom_text on elaborate plots takes ages to render.&#xD;&#xA;Consider the same example as before:&#xD;&#xA;&#xD;&#xA;Without geom_text:&#xD;&#xA;&#xD;&#xA;    system.time(&#xD;&#xA;      print(&#xD;&#xA;        ggplot(data = Data,  aes(x = X,  y = Y)) +&#xD;&#xA;          geom_point()&#xD;&#xA;        )&#xD;&#xA;      )&#xD;&#xA;    user  system elapsed &#xD;&#xA;    0.183   0.006   0.195&#xD;&#xA;&#xD;&#xA;With geom_text:&#xD;&#xA;&#xD;&#xA;    system.time(&#xD;&#xA;      print(&#xD;&#xA;        ggplot(data = Data,  aes(x = X,  y = Y)) +&#xD;&#xA;          geom_point() + &#xD;&#xA;          geom_text(aes(0.5,  0.5,  label=&quot;geom_text&quot;))&#xD;&#xA;        )&#xD;&#xA;      )&#xD;&#xA;    user  system elapsed &#xD;&#xA;    0.219   0.006   0.230&#xD;&#xA;&#xD;&#xA;That's almost a 20% increase over non geom_text example!&#xD;&#xA;I am on a Mac." />
      <Message Id="3736895" ParentId="380" UserId="227097" Date="01/31/2012 10:50:15" Content="This is because the `geom_text` is drawn 10 times (i.e.,  `nrow` of `Data`).&#xD;&#xA;Not sure this is a bug,  since if you supply data correctly,  it behaves correctly.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(data = Data,  aes(x = X,  y = Y))+&#xD;&#xA;   geom_point() +&#xD;&#xA;   geom_text(aes(label = label),  data.frame(X = 0.5,  Y = 0.5,  label=&quot;geom_text&quot;))&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3737483" ParentId="380" UserId="764080" Date="01/31/2012 11:39:59" Content="You are right,  kohske,  your code works nicely.&#xD;&#xA;It was not clear to me the difference between ``geom_text`` and ``annotate`` and was under the impression that the code provided on this [ SO ](http://stackoverflow.com/questions/2409357/how-to-nicely-annotate-a-ggplot2-manual) answer was correct.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="381" Title="contourplot coloring incorrect">
    <Messages>
      <Message Id="0" ParentId="381" UserId="932850" Date="01/31/2012 16:11:27" Content="I believe I have found a bug in 0.9.0,  which is not there&#xD;&#xA;in the current CRAN version. Take this contourplot for example.&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;&#xD;&#xA;## example from help(stat_contour)&#xD;&#xA;library(reshape2)&#xD;&#xA;volcano3d = melt(volcano)&#xD;&#xA;names(volcano3d) = c(&quot;x&quot;,  &quot;y&quot;,  &quot;z&quot;)&#xD;&#xA;library(ggplot2)&#xD;&#xA;p = ggplot(volcano3d,  aes(x,  y,  z = z))+&#xD;&#xA;  stat_contour(aes(colour = ..level..))&#xD;&#xA;print(p) ## the colors of the contours on the plot are incorrect!&#xD;&#xA;&lt;/pre&gt;" />
      <Message Id="3745493" ParentId="381" UserId="86978" Date="01/31/2012 19:00:09" Content="I don't know how helpful this will be,  but a git bisect finds the change to be somewhere between commits a4c85114c33105dd9ca66aec9d5edf679ccfc91a (last good commit) and 6f5295806d2c0cbe076e4b996f42363103dc37fc (first bad commit). Unfortunately,  there were many commits in between (about 40) that had to be skipped in the bisect tests because the code wouldn't run at all.&#xD;&#xA;&#xD;&#xA;Update: Here's the [ compare view ](https://github.com/hadley/ggplot2/compare/a4c85114c33105dd9ca66aec9d5edf679ccfc91a...6f5295806d2c0cbe076e4b996f42363103dc37fc) of the two commits." />
      <Message Id="3746123" ParentId="381" UserId="86978" Date="01/31/2012 19:30:42" Content="The git bisect log is here: https://gist.github.com/1712315&#xD;&#xA;&#xD;&#xA;To visualize which commits are good and which are bad,  download the raw file,  and run `git bisect replay badcontour-bisectlog.txt`. Then you can view with `git bisect visualize` or other git GUI (the changes in question are around May 18)." />
      <Message Id="3868987" ParentId="381" UserId="4196" Date="02/08/2012 15:06:23" Content="The fix looks unrelated,  but is the underlying bug.  It was revealed by a change in the way I generated the grouping variable for the contours." />
    </Messages>
  </Topic>
  <Topic Id="382" Title="fix grouping bug in stat-sum">
    <Messages>
      <Message Id="0" ParentId="382" UserId="227097" Date="01/31/2012 17:59:18" Content="now aes (e.g.,  colour,  fill,  etc) is not dropped during stats calculation.&#xD;&#xA;Is there any reason why `stat_sum` only use `calculate_groups` but not use `calculate`?" />
      <Message Id="3744868" ParentId="382" UserId="4196" Date="01/31/2012 18:32:18" Content="The commit message has a spelling mistake :/" />
      <Message Id="3754396" ParentId="382" UserId="86978" Date="02/01/2012 06:31:51" Content="I decided to take my bisect script for a test drive on this bug. The problem was tracked to a6b74b28d72ea5620869ce3fa26f437345239d65. Note that I don't really know anything about this bug,  or the expected behavior -- I just assume that the result from 0.8.9 is correct. (I also don't really know whether I'm running the right tests - I just took an example from the mailing list.)&#xD;&#xA;&#xD;&#xA;I suggest trying the script yourself. You can download the script here: https://gist.github.com/1715469.  Save it in your ggplot2 directory and run:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;chmod +x stat_sum_test.r&#xD;&#xA;git bisect start&#xD;&#xA;&#xD;&#xA;git checkout master&#xD;&#xA;./stat_sum_test.r&#xD;&#xA;# Look at the result,  and mark as bad -- although you gave an interactive response, &#xD;&#xA;# it wasn't automatically passed to git bisect. (That only happens with git bisect run)&#xD;&#xA;git bisect bad&#xD;&#xA;&#xD;&#xA;git checkout remotes/origin/ggplot-0.8.9&#xD;&#xA;./stat_sum_test.r&#xD;&#xA;# Look at the result,  and mark as good&#xD;&#xA;git bisect good&#xD;&#xA;&#xD;&#xA;# Now run automated testing with manual response&#xD;&#xA;git bisect run ./stat_sum_test.r&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If you already knew that master was bad and 0.8.9 was good,  you could save some steps by doing this instead:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;git bisect start master remotes/origin/ggplot-0.8.9&#xD;&#xA;git bisect run ./stat_sum_test.r&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="3754504" ParentId="382" UserId="227097" Date="02/01/2012 06:45:45" Content="Thanks,  @wch!! Great bisect.&#xD;&#xA;Now I have figured out what is exactly problem.&#xD;&#xA;I will rewrite the fix with some test codes." />
      <Message Id="3754606" ParentId="382" UserId="86978" Date="02/01/2012 06:58:54" Content="@kohske glad to be helpful! I'm actually kind of surprised that the script worked so well for the first real problem I tried it on." />
      <Message Id="3868765" ParentId="382" UserId="4196" Date="02/08/2012 14:54:16" Content="Do you have any test cases?  I think the correct fix is:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;  calculate_groups &lt;- function(.,  data,  scales,  ...) { &#xD;&#xA;    if (is.null(data$weight)) data$weight &lt;- 1&#xD;&#xA;    &#xD;&#xA;    group_by &lt;- intersect(names(data),  .all_aesthetics))&#xD;&#xA;    counts &lt;- count(data,  group_by,  wt_var = &quot;weight&quot;)&#xD;&#xA;    names(counts)[ 4 ] &lt;- &quot;n&quot;&#xD;&#xA;    counts$prop &lt;- ave(counts$n,  counts$group,  FUN = prop.table)&#xD;&#xA;&#xD;&#xA;    counts&#xD;&#xA;   }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Avoiding the default `calculate_groups` makes the function considerably faster (i.e. it's vectorised)." />
      <Message Id="3871148" ParentId="382" UserId="227097" Date="02/08/2012 16:57:46" Content="Ok,  I will move it in the `calculate_groups` and will write a test case." />
    </Messages>
  </Topic>
  <Topic Id="383" Title="fix oob argument for scales">
    <Messages>
      <Message Id="0" ParentId="383" UserId="85014" Date="02/02/2012 16:48:49" Content="Currently the out of bounds parameter appears to have no effect and perhaps a bug. These all produce the same graph:&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(scales)&#xD;&#xA;    qplot(rep(100, 100)) + scale_y_continuous(limits = c(0, 10),  oob = squish)&#xD;&#xA;    qplot(rep(100, 100)) + scale_y_continuous(limits = c(0, 10),  oob = censor)&#xD;&#xA;" />
      <Message Id="3782090" ParentId="383" UserId="4196" Date="02/02/2012 17:25:26" Content="Also,  the behaviour from 0.8.9 has changed - previously the bar did not show up.&#xD;&#xA;" />
      <Message Id="3792639" ParentId="383" UserId="86978" Date="02/03/2012 06:35:30" Content="It may be easier to see the issue with this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=factor(1:10),  y=1:10)&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_bar() &#xD;&#xA;p + scale_y_continuous(limits = c(3, 7),  oob = squish)&#xD;&#xA;p + scale_y_continuous(limits = c(3, 7),  oob = censor)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The squished bars should be visible at 3 and 7.&#xD;&#xA;" />
      <Message Id="4056119" ParentId="383" UserId="4196" Date="02/20/2012 15:57:09" Content="Slightly more comprehensive set of examples,  also checking non-finite positions:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;dat &lt;- data.frame(x=c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;),  y=c(1,  5,  10))&#xD;&#xA;base &lt;- ggplot(dat,  aes(x=x,  y=y)) + &#xD;&#xA;  geom_bar() + &#xD;&#xA;  annotate(&quot;point&quot;,  x = &quot;a&quot;,  y = c(-Inf,  Inf))&#xD;&#xA;&#xD;&#xA;base + scale_y_continuous(limits = c(0,  5))&#xD;&#xA;base + geom_bar() + scale_y_continuous(limits = c(3,  7))&#xD;&#xA;&#xD;&#xA;base + scale_y_continuous(limits = c(0,  5),  oob = squish)&#xD;&#xA;base + geom_bar() + scale_y_continuous(limits = c(3,  7),  oob = squish)&#xD;&#xA;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="384" Title="scale_fill_manual values not respected">
    <Messages>
      <Message Id="0" ParentId="384" UserId="932850" Date="02/04/2012 18:00:12" Content="Hi,  I noticed that this code works in 0.8.x but not 0.9. Basically,  I want to specify custom fill colors for geom_rect,  but sometimes one of the colors disappears.&#xD;&#xA;&#xD;&#xA;&lt;pre&gt;&#xD;&#xA;pro = data.frame(position=c(10, 20), logratio=rnorm(2))&#xD;&#xA;library(ggplot2)&#xD;&#xA;sc = scale_fill_manual(values=c(&#xD;&#xA;                      &quot;1breakpoint&quot;=&quot;#ff7d7d&quot;, &#xD;&#xA;                      &quot;normal&quot;=&quot;#f6f4bf&quot;, &#xD;&#xA;                      &quot;&gt;0breakpoints&quot;=&quot;#a445ee&quot;&#xD;&#xA;                      ))&#xD;&#xA;makeplot = function(ann){ &#xD;&#xA;ggplot()+&#xD;&#xA;  geom_rect(aes(xmin=min, xmax=max, fill=annotation), &#xD;&#xA;            ymax=2, ymin=-2, data=ann)+&#xD;&#xA;  geom_point(aes(position, logratio), pch=1, colour=&quot;black&quot;, data=pro)&#xD;&#xA; }&#xD;&#xA;(p = makeplot(data.frame(min=c(10, 13, 18), max=c(12, 15, 20), &#xD;&#xA;  annotation=c(&quot;&gt;0breakpoints&quot;, &quot;1breakpoint&quot;, &quot;normal&quot;)))) #ok&#xD;&#xA;p+sc ##ok&#xD;&#xA;(p =makeplot(data.frame(min=c(10, 13, 18), max=c(12, 15, 20), &#xD;&#xA;  annotation=c(&quot;1breakpoint&quot;, &quot;&gt;0breakpoints&quot;, &quot;&gt;0breakpoints&quot;)))) #ok&#xD;&#xA;p+sc ## &gt;0breakpoints color not what I specified in scale_fill_manual!&#xD;&#xA;&lt;/pre&gt;" />
      <Message Id="3813359" ParentId="384" UserId="86978" Date="02/04/2012 21:08:15" Content="Very strange - whether or not the scale works seems to depend on the number and order of items.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# A data frame with two levels of 'g'&#xD;&#xA;dat2 &lt;- data.frame(x=factor(1:3), &#xD;&#xA;                   y=3, &#xD;&#xA;                   g=c(&quot;B&quot;, &quot;A&quot;, &quot;A&quot;))&#xD;&#xA;&#xD;&#xA;p2 &lt;- ggplot(dat2,  aes(x=x, y=y, fill=g)) + geom_bar()&#xD;&#xA;&#xD;&#xA;# OK with no scale added&#xD;&#xA;p2&#xD;&#xA;&#xD;&#xA;# OK: Scale with three values,  order ABC&#xD;&#xA;p2 + scale_fill_manual(values=c(&quot;A&quot;=&quot;red&quot;,  &quot;B&quot;=&quot;green&quot;,  &quot;C&quot;=&quot;blue&quot;))&#xD;&#xA;&#xD;&#xA;# Not OK: Scale with three values,  order BCA&#xD;&#xA;p2 + scale_fill_manual(values=c(&quot;B&quot;=&quot;red&quot;,  &quot;C&quot;=&quot;green&quot;,  &quot;A&quot;=&quot;blue&quot;))&#xD;&#xA;&#xD;&#xA;# OK: Scale with two values,  order AB&#xD;&#xA;p2 + scale_fill_manual(values=c(&quot;A&quot;=&quot;green&quot;,  &quot;B&quot;=&quot;red&quot;))&#xD;&#xA;&#xD;&#xA;# OK: Scale with two values,  order BA&#xD;&#xA;p2 + scale_fill_manual(values=c(&quot;B&quot;=&quot;red&quot;,  &quot;A&quot;=&quot;green&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This may be related to #264.&#xD;&#xA;&#xD;&#xA;@tdhock This isn't a solution to the underlying problem,  but it should work if you change the order of items in your scale to match the factor level order -- that is,  put `&quot;&gt;0breakpoints&quot;` first in the scale." />
      <Message Id="3813508" ParentId="384" UserId="86978" Date="02/04/2012 21:31:02" Content="I ran this bisection script: https://gist.github.com/1740215. It says 7bcccb6f12b42ed3ebf0a2600cf90b3af1c1caf7 is the first bad commit,  and that's the commit that fixed #264.&#xD;&#xA;&#xD;&#xA;The output of the script can be viewed (without doing all the git bisect stuff) by just running it from the command line.&#xD;&#xA;&#xD;&#xA;The colors of the bars in the graph should be lightblue,  blue,  blue,  going from left to right. In 0.8.9,  they're in that order. At some point,  they become blue,  darkblue,  darkblue,  indicating that the names for the `values` are not being respected -- that was bug 264. After the fix for 264,  the colors are _blank_,  blue,  blue." />
      <Message Id="3862155" ParentId="384" UserId="330036" Date="02/08/2012 04:05:46" Content="@wch I'm having similar issues.&#xD;&#xA;&#xD;&#xA;I'm starting to develop a working hypothesis. Whatever is causing the problem seems to behave like this:&#xD;&#xA;&#xD;&#xA;* Compute the number of unique fill values (`n`) in the data. In your example above,  `n = 2`,  since the only unique values for `g` are &quot;B&quot; and &quot;A&quot;. Let's call the collection of unique data values `dataValues`.&#xD;&#xA;* Read the first `n` items in the `values` argument to `scale_fill_manual()`. We'll call those first `n` items `scaleValues`. In your first &quot;Not OK&quot; example above,  `scaleValues = c(&quot;B&quot;=&quot;red&quot;,  &quot;C&quot;=&quot;green&quot;)`&#xD;&#xA;* Match any values in `dataValues` with those in `scaleValues`.&#xD;&#xA;&#xD;&#xA;Note that in your examples above,  the first &quot;Not OK&quot; one is where the definition for a data's fill value (`&quot;A&quot; = &quot;blue&quot;`) is the third element of `values`. My hypothesis is that since there were only 2 unique values of that factor in the data itself,  the scale function &quot;stopped reading in `values`&quot; after two and never saw the third element &quot;A&quot; that should have been matched for blue rectangles.&#xD;&#xA;&#xD;&#xA;I wondered if this pattern would extend,  so I created [ a gist to test my hypothesis ][ 1 ]. Every result in my gist is consistent with my hypothesis. For any `n` unique values of a factor in the data,  I can get all the fill colors to appear as long as they're listed within the first `n` elements of `values`. I also show (I think) how one can selectively cause certain values not to appear by making sure they're ordered after the `n`th element of `values`.&#xD;&#xA;&#xD;&#xA;I really,  really want to solve this problem because it's affecting my package too. Please let me know if you think my explanation matches the behavior.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;[ 1 ]: https://gist.github.com/1765194&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3862452" ParentId="384" UserId="86978" Date="02/08/2012 04:45:48" Content="That sounds like a reasonable explanation. It has something to do with those lines changed in the commit,  so it shouldn't be too hard to find and fix." />
      <Message Id="3862879" ParentId="384" UserId="86978" Date="02/08/2012 05:46:26" Content="OK,  I have a fix. It also required modifying the palette functions in the scales package. One drawback to modularization of packages is that it makes it complicated to synchronize and reference fixes.&#xD;&#xA;&#xD;&#xA;The problem was that `scale$palette(n)` can only take a number,  when it sometimes needs a vector of names instead.  For example,  if the specified colors are: `c(B=&quot;red&quot;,  C=&quot;blue&quot;,  A=&quot;green&quot;)`,  but the data only contains `c(&quot;B&quot;,  &quot;A&quot;,  &quot;A&quot;)`,  then  `scale$palette(n)` returns only the first two palette items,  for B and C. This is why A ends up blank.&#xD;&#xA;&#xD;&#xA;I modified the palette functions to optionally take a `limits` parameter,  which is a vector of names. The limits of the data in this case are `c(&quot;A&quot;,  &quot;B&quot;)`,  and the function returns the appropriate named palette items.&#xD;&#xA;&#xD;&#xA;You can see the commit in scales here: wch/scales@5c740627141988569da29ed2cf419c7a0f7abb4c&#xD;&#xA;&#xD;&#xA;To try it out you can either fetch my branches of scales and ggplot2,  or you can install directly. Bear in mind that I changed only two types of palettes; I think the others will also need to be changed. &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# To install&#xD;&#xA;install_github('wch',  'scales',  'palette-limits')&#xD;&#xA;install_github('wch',  'ggplot2',  'fix-manual-palette')&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;@briandk: With these fixes,  it passes your new tests in #264." />
      <Message Id="3868178" ParentId="384" UserId="4196" Date="02/08/2012 14:19:09" Content="Simplified and expanded test cases:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(g = c(&quot;B&quot;, &quot;A&quot;, &quot;A&quot;))&#xD;&#xA;p &lt;- ggplot(dat,  aes(g,  fill = g)) + geom_bar()&#xD;&#xA;col &lt;- c(&quot;A&quot; = &quot;red&quot;,  &quot;B&quot; = &quot;green&quot;,  &quot;C&quot; = &quot;blue&quot;)&#xD;&#xA;&#xD;&#xA;cols &lt;- function(x) ggplot_build(x)$data[ [ 1 ] ][ ,  &quot;fill&quot; ]&#xD;&#xA;fill_scale &lt;- function(order) scale_fill_manual(values = col[ order ],  &#xD;&#xA;  na.value = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;# OK: Scale with three values,  order ABC&#xD;&#xA;p + fill_scale(1:3)&#xD;&#xA;p + fill_scale(1:2)&#xD;&#xA;p + fill_scale(2:1)&#xD;&#xA;&#xD;&#xA;# NOT OK: missing colour&#xD;&#xA;p + fill_scale(c(3,  2,  1))&#xD;&#xA;p + fill_scale(c(3,  1,  2))&#xD;&#xA;p + fill_scale(c(1,  3,  2))&#xD;&#xA;&#xD;&#xA;# NOT OK: doesn't use na.value&#xD;&#xA;p + fill_scale(c(3,  1))&#xD;&#xA;p + fill_scale(c(1,  3))&#xD;&#xA;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="385" Title="No padding between legend contents and bounding rectangle">
    <Messages>
      <Message Id="0" ParentId="385" UserId="86978" Date="02/05/2012 18:12:49" Content="This was reported on the mailing list. In 0.9.0,  there is no padding between the legend contents and the bounding rectangle. If the rectangle is visible,  then each key item overlaps the rectangle and obscures the line. In 0.8.9,  there was padding.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=1)&#xD;&#xA;  &#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y,  fill=x)) + geom_bar() +&#xD;&#xA;    opts(legend.background = theme_rect())&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="4053652" ParentId="385" UserId="4196" Date="02/20/2012 13:37:18" Content="@kohske Could you make this a pull request please?" />
      <Message Id="4053669" ParentId="385" UserId="4196" Date="02/20/2012 13:38:19" Content="@kohske oh you did already,  sorry!" />
      <Message Id="4075000" ParentId="385" UserId="4196" Date="02/21/2012 13:53:22" Content="Fixed in 67bfcc110ee69a1945ca859c7595b038cb7686c0" />
    </Messages>
  </Topic>
  <Topic Id="386" Title="guide_legend(title=NULL) sets title to &quot;NULL&quot;">
    <Messages>
      <Message Id="0" ParentId="386" UserId="86978" Date="02/05/2012 18:25:16" Content="Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=1)&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=x)) + geom_bar() +&#xD;&#xA;    scale_fill_hue(guide_legend(title=NULL))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;According to the help page:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;   title: A character string or expression indicating a title of guide.&#xD;&#xA;          If ‘NULL’,  the title is not shown.&#xD;&#xA;```" />
      <Message Id="3819590" ParentId="386" UserId="86978" Date="02/05/2012 18:39:59" Content="Oops,  sorry,  I think I was using it wrong. I forgot to add `guide=`.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=x)) + geom_bar() +&#xD;&#xA;    scale_fill_hue(guide = guide_legend(title=NULL))&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="387" Title="Cross-link guides() manpage to guide_legend and guide_colorbar">
    <Messages>
      <Message Id="0" ParentId="387" UserId="330036" Date="02/06/2012 22:45:17" Content="This change will hopefully make it easier for users to discover guide options by ensuring that all of the `guides` manpages link to each other" />
      <Message Id="3838869" ParentId="387" UserId="4196" Date="02/06/2012 23:08:53" Content="Would you mind using the new `@family` tag?" />
      <Message Id="3841054" ParentId="387" UserId="330036" Date="02/07/2012 02:01:44" Content="@hadley - Fixed. Are there any other functions that belong in the `guides` family for documentation?" />
      <Message Id="3857757" ParentId="387" UserId="4196" Date="02/07/2012 22:03:32" Content="Roxygen comments look good,  and I think that's all the guide related functions.  However,  due to a roxygen bug (fixed in dev version),  you're using a different sort order to me,  and hence there are a lot of spurious changes." />
      <Message Id="3862557" ParentId="387" UserId="330036" Date="02/08/2012 04:57:38" Content="@hadley - I'm using the latest version of roxygen from the master branch on github: https://github.com/klutometis/roxygen/commit/179448a8e1230589cf2919157a2675ff3ab543ed&#xD;&#xA;&#xD;&#xA;There's no `dev` branch of roxygen,  so I'm not sure which version you're referring to. Can you please point me to which branch contains the fix?" />
      <Message Id="3862824" ParentId="387" UserId="330036" Date="02/08/2012 05:40:11" Content="See the updated pull request #391" />
    </Messages>
  </Topic>
  <Topic Id="388" Title="no margin when 1 bar">
    <Messages>
      <Message Id="0" ParentId="388" UserId="216319" Date="02/07/2012 05:24:07" Content="Margins are messed up:&#xD;&#xA;&#xD;&#xA;    mydata &lt;- data.frame(survey_id=&quot;mysurvey&quot;,  count=140)&#xD;&#xA;    ggplot(aes(x=survey_id,  y=count),  data=mydata) + geom_bar(stat=&quot;identity&quot;);" />
    </Messages>
  </Topic>
  <Topic Id="389" Title="Renamed single named arugment of autoplot to data rather than x">
    <Messages>
      <Message Id="0" ParentId="389" UserId="463252" Date="02/07/2012 17:44:03" Content="Per discussion/request on developer mailing list&#xD;&#xA;http://groups.google.com/group/ggplot2-dev/browse_thread/thread/446615dd5fcf35cf" />
      <Message Id="3857157" ParentId="389" UserId="4196" Date="02/07/2012 21:32:33" Content="Thanks Brian!" />
    </Messages>
  </Topic>
  <Topic Id="390" Title="Subset no longer works">
    <Messages>
      <Message Id="0" ParentId="390" UserId="4196" Date="02/07/2012 22:47:01" Content="```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;ggplot(mpg,  aes(class,  displ)) + geom_point(subset = .(class == &quot;minivan&quot;))&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="391" Title="Crosslink guides,  guide_legend,  and guide_colourbar documentation 2.0">
    <Messages>
      <Message Id="0" ParentId="391" UserId="330036" Date="02/08/2012 05:39:32" Content="**This update to #387 fixes [ spurious roxygen2 behavior ][ 1 ].**&#xD;&#xA;&#xD;&#xA;The cross-linking should allow users to find the full list of arguments to guide_legend() and guide_colourbar() simply by searching the guides() help page.&#xD;&#xA;&#xD;&#xA;[ 1 ]: https://github.com/hadley/ggplot2/pull/387#issuecomment-3857757" />
    </Messages>
  </Topic>
  <Topic Id="392" Title="Make manual palettes work (fix #384)">
    <Messages>
      <Message Id="0" ParentId="392" UserId="86978" Date="02/08/2012 06:03:10" Content="This fixes #384. For this fix to work,  it requires the update to scales at hadley/scales#11.&#xD;&#xA;&#xD;&#xA;The fix in scales should not break anything else. However,  if this pull request is merged without the change in scales,  ggplot will probably be completely broken with discrete scales." />
    </Messages>
  </Topic>
  <Topic Id="393" Title="Control over which sides rugs appear on">
    <Messages>
      <Message Id="0" ParentId="393" UserId="86978" Date="02/08/2012 08:42:54" Content="I added the ability to control which sides geom_rug appears on. This lets you set it to any of &quot;trbl&quot; for top,  right,  bottom,  and left. Common use cases might include:&#xD;&#xA;&#xD;&#xA;* rugs on the top and right,  instead of bottom and left.&#xD;&#xA;* rugs on all four sides.&#xD;&#xA;* a rug on just one axis&#xD;&#xA;&#xD;&#xA;Some examples from the docs:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(x=wt,  y=mpg))&#xD;&#xA;p + geom_point() + geom_rug()             # Default: bottom and left&#xD;&#xA;p + geom_point() + geom_rug(sides=&quot;b&quot;)    # On bottom only&#xD;&#xA;p + geom_point() + geom_rug(sides=&quot;trbl&quot;) # All four sides&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Let me know if you think there is a better way of doing the `sides` parameter,  or if there's a cleaner way to implement it." />
      <Message Id="3868528" ParentId="393" UserId="330036" Date="02/08/2012 14:37:59" Content="@wch - We actually created [ our own geom ][ 1 ] to place rugs on the top and right. (An admittedly kludgy solution,  but at the time creating a new geom seemed simplest.) I guess I have two concerns:&#xD;&#xA;&#xD;&#xA;1. Won't adding a `sides` argument to `geom_rug()` raise the expectation that other marginal gems should have sides too (e.g.,  that `geom_dotplot()` should accept a `sides` argument?)&#xD;&#xA;2. I wish there were a way to streamline the conditional logic in your `draw()` function. I know there probably isn't,  but between the four corner conditions so much code gets repeated that I've been trying for awhile to think about how to reduce that duplication.&#xD;&#xA;&#xD;&#xA;[ 1 ]: https://github.com/briandk/granovaGG/blob/ggplot2-v0-9-fix/R/geom_rug_alt.R" />
      <Message Id="3892105" ParentId="393" UserId="86978" Date="02/09/2012 17:54:14" Content="@briandk Yes,  actually that's where I got the idea to do this -- when I was looking at the granovaGG code,  I realized that it would be useful to offer this as an option&#xD;&#xA;&#xD;&#xA;1. What other geoms do you have in mind? I'm not sure in what way `geom_dotplot` is a marginal geom...&#xD;&#xA;1. I agree,  it would be nice to clean up the `draw()` stuff. I thought about doing a loop with some conditional logic,  but I think that might end up messier than what's there right now." />
      <Message Id="3893072" ParentId="393" UserId="330036" Date="02/09/2012 18:47:11" Content="@wch - here's an example of what I'm thinking of when I talk about a marginal dotplot:&#xD;&#xA;&#xD;&#xA;[ ![ Scatterplot showing marginal distribution as stacked dots ][ 1 ] ][ 1 ]&#xD;&#xA;&#xD;&#xA;A default rug geom() does a great job of showing the locations of two-dimensional data on a univariate marginal distribution. But a rug geom() alone isn't as well suited to show *frequencies* of marginal values. That's where the dot plot shines,  in my opinion. &#xD;&#xA;&#xD;&#xA;Does that make sense,  or am I misunderstanding what geom_dotplot() does?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;[ 1 ]: http://addictedtor.free.fr/graphiques/graphiques/graph_81.png" />
      <Message Id="4037853" ParentId="393" UserId="86978" Date="02/18/2012 22:21:25" Content="I don't think geom_dotplot can be used this way,  since the x or y baseline is at 0. This is different from geom_rug,  where the lines are positioned on the edge of the plotting area,  no matter what the x or y values are. I do agree that the marginal dot plots work better than marginal rugs in this case,  though." />
    </Messages>
  </Topic>
  <Topic Id="394" Title="Value-wise override.aes in the guide_legend()">
    <Messages>
      <Message Id="0" ParentId="394" UserId="348591" Date="02/08/2012 15:55:36" Content="For stat_summary() I have mapped both colour and fill to the same variable,  therefore I would like to have only one legend with the keys that have both fill and color set according to the aesthetics.&#xD;&#xA;&#xD;&#xA;Unfortunately,  I don't know if there's a standard way in ggplot2 to combine both fill and colour in one guide,  but one workaround would be to support named lists in override.aes,  i.e.:&#xD;&#xA;override.aes = list( colour = c( fair = 'red',  unfair = 'blue' ) ), &#xD;&#xA;where names are factor levels.&#xD;&#xA;" />
      <Message Id="3869818" ParentId="394" UserId="4196" Date="02/08/2012 15:58:38" Content="Could you please provide a reproducible example? " />
      <Message Id="3871504" ParentId="394" UserId="348591" Date="02/08/2012 17:14:45" Content="Ok,  sorry,  now I see my problem. :)&#xD;&#xA;I had a code like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;test.df &lt;- data.frame( type = sample( c( &quot;a&quot;,  &quot;b&quot;,  &quot;c&quot; ),  10000,  replace = TRUE ), &#xD;&#xA;                       category = sample( c( &quot;I&quot;,  &quot;II&quot;,  &quot;III&quot; ),  10000,  replace = TRUE ), &#xD;&#xA;                       value = rnorm( 10000 ),  stringsAsFactors = FALSE )&#xD;&#xA;&#xD;&#xA;ggplot( test.df,  aes( x = type,  y = value,  color = category,  fill = category ) ) +&#xD;&#xA;        geom_boxplot( alpha = 0.6,  outlier.colour = NULL ) +&#xD;&#xA;        scale_color_manual( 'Category',  values = c( I = 'blue',  II = 'red',  III = 'green' ) ) +&#xD;&#xA;        scale_fill_manual( 'Cat.',  values = c( I = 'blue',  II = 'red',  III = 'red' ) ) +&#xD;&#xA;       guides( fill = FALSE )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If the fill guide is not disabled,  then separate legends are shown,  because the fill and color titles are different.&#xD;&#xA;Also,  if the scales specify different labels for the factor levels,  the legends are separated.&#xD;&#xA;I think such behavior more than makes sense." />
    </Messages>
  </Topic>
  <Topic Id="395" Title="Fix/guide margin">
    <Messages>
      <Message Id="0" ParentId="395" UserId="227097" Date="02/08/2012 19:17:54" Content="maybe the size of padding should be customizable?" />
      <Message Id="3877014" ParentId="395" UserId="4196" Date="02/08/2012 21:52:19" Content="It probably should be customisable,  but I'd prefer to figure out how to do it in general - there are many margins and paddings that should be user configurable." />
      <Message Id="3882250" ParentId="395" UserId="227097" Date="02/09/2012 05:21:34" Content="The codes have been updated.&#xD;&#xA;&#xD;&#xA;w.r.t the customize,  we need to discuss about theme-ing system.&#xD;&#xA;Maybe CSS-like system,  i.e.,  class-and-style?" />
      <Message Id="4074968" ParentId="395" UserId="4196" Date="02/21/2012 13:51:20" Content="Ah,  I see how it works now.  I think we will have to come back to this in the future - and rewrite to use methods on a gtable object.  Generally,  you shouldn't have to create the layout by hand (but you might have to do this currently because gtable doesn't provide enough useful tools)" />
    </Messages>
  </Topic>
  <Topic Id="396" Title="errors caused by certain variable names">
    <Messages>
      <Message Id="0" ParentId="396" UserId="1421760" Date="02/09/2012 03:51:51" Content="Apologies if I've missed mention of this elsewhere,  but it looks as though certain variable names can cause. &#xD;&#xA;In the following code...&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;require(ggplot2)&#xD;&#xA;&#xD;&#xA;eg &lt;- data.frame(x=sort(rnorm(20)), &#xD;&#xA;                 y=sort(rnorm(20)), &#xD;&#xA;                 group=rep(c(&quot;A&quot;, &quot;B&quot;),  len=20), &#xD;&#xA;                 GROUP=rep(c(&quot;A&quot;, &quot;B&quot;),  len=20))&#xD;&#xA;&#xD;&#xA;ggplot(eg,  aes(x=x,  y=y)) + geom_point() + facet_wrap(~ group)&#xD;&#xA;ggplot(eg,  aes(x=x,  y=y)) + geom_point() + facet_wrap(~ GROUP)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;...the first ggplot call produces the error:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;Error in names(out) &lt;- names(x) : &#xD;&#xA;  'names' attribute [ 2 ] must be the same length as the vector [ 0 ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;while the second works a treat." />
      <Message Id="3881627" ParentId="396" UserId="4196" Date="02/09/2012 03:58:05" Content="Fixed in the development version :)" />
      <Message Id="3881868" ParentId="396" UserId="1421760" Date="02/09/2012 04:27:22" Content="Your powers are strong!&#xD;&#xA;&#xD;&#xA;-----Original Message-----&#xD;&#xA;From: hadley wickham [ mailto:reply@reply.github.com ] &#xD;&#xA;Sent: Thursday,  9 February 2012 2:58 PM&#xD;&#xA;To: Lovell,  David (CMIS,  Acton)&#xD;&#xA;Subject: Re: [ ggplot2 ] errors caused by certain variable names (#396)&#xD;&#xA;&#xD;&#xA;Fixed in the development version :)&#xD;&#xA;&#xD;&#xA;--- &#xD;&#xA;Reply to this email directly or view it on GitHub:&#xD;&#xA;https://github.com/hadley/ggplot2/issues/396#issuecomment-3881627&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="397" Title="47d6210,  #388 not completely fixed.">
    <Messages>
      <Message Id="0" ParentId="397" UserId="216319" Date="02/09/2012 04:20:52" Content="Margins are messed up:&#xD;&#xA;&#xD;&#xA;    mydata &lt;- data.frame(survey_id=&quot;mysurvey&quot;,  count=140)&#xD;&#xA;    qplot(survey_id,  count,  data=mydata,  geom=&quot;bar&quot;)" />
    </Messages>
  </Topic>
  <Topic Id="398" Title="Unexpected behavior from geom_abline when adding lines to marginal facets">
    <Messages>
      <Message Id="0" ParentId="398" UserId="1422023" Date="02/09/2012 06:21:28" Content="I want to put a regression line on the marginal facets of a facet_grid,  but I come up with a strange quirk where there are redundant lines on non-marginal facets also.&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(plyr)&#xD;&#xA;    data(diamonds) &#xD;&#xA;&#xD;&#xA;Use plyr to build a data frame with the slopes and intercepts&#xD;&#xA;&#xD;&#xA;    regdf &lt;- ddply(diamonds,  .(cut),  function(i)&#xD;&#xA;               lm(price ~ carat,  data = i)$coefficients[ 1:2 ])&#xD;&#xA;&#xD;&#xA;resolve some naming issues&#xD;&#xA;&#xD;&#xA;    regdf$color &lt;- &quot;(all)&quot;&#xD;&#xA;    names(regdf)[ 2 ] &lt;- &quot;intercept&quot;&#xD;&#xA;&#xD;&#xA;    p1 &lt;- ggplot() + geom_point(aes(carat,  price),  data = diamonds,  alpha = .4) +&#xD;&#xA;             facet_grid(color ~ cut,  margins = T) +&#xD;&#xA;             geom_abline(aes(intercept = intercept,  slope = carat),  color = &quot;red&quot;,  data = regdf)&#xD;&#xA;&#xD;&#xA;![ the strange behavior is obvious ](http://i.stack.imgur.com/kDl4u.png)" />
    </Messages>
  </Topic>
  <Topic Id="399" Title="When only one x or y value,  setting breaks=NA doesn't make tick+grid disappear">
    <Messages>
      <Message Id="0" ParentId="399" UserId="86978" Date="02/09/2012 06:47:33" Content="All these examples should have no tick marks or grid lines. But when there is only a single x or y value,  the tick and gridline appears on that axis.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Both x and y have only 1 value&#xD;&#xA;# ticks visible for x and y&#xD;&#xA;dat &lt;- data.frame(x = 1,  y = 1)&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() +&#xD;&#xA;    scale_y_continuous(breaks=NA) +&#xD;&#xA;    scale_x_continuous(breaks=NA)&#xD;&#xA;&#xD;&#xA;# More than one x value&#xD;&#xA;# x tick disappears&#xD;&#xA;datmx &lt;- data.frame(x = 1:3,  y = 1)&#xD;&#xA;ggplot(datmx,  aes(x=x,  y=y)) + geom_point() +&#xD;&#xA;    scale_y_continuous(breaks=NA) +&#xD;&#xA;    scale_x_continuous(breaks=NA)&#xD;&#xA;&#xD;&#xA;# More than one y value&#xD;&#xA;# y tick disappears&#xD;&#xA;datmy &lt;- data.frame(x = 1,  y = 1:3)&#xD;&#xA;ggplot(datmy,  aes(x=x,  y=y)) + geom_point() +&#xD;&#xA;    scale_y_continuous(breaks=NA) +&#xD;&#xA;    scale_x_continuous(breaks=NA)&#xD;&#xA;```" />
      <Message Id="3883004" ParentId="399" UserId="86978" Date="02/09/2012 06:57:56" Content="Some tests:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;test_that(&quot;No major or minor breaks when breaks=NA&quot;,  { &#xD;&#xA;&#xD;&#xA;  # Just a single x and y value&#xD;&#xA;  dat &lt;- data.frame(x = 1,  y = 1)&#xD;&#xA;  p1 &lt;- ggplot(dat,  aes(x = x,  y = y)) + geom_point() +&#xD;&#xA;      scale_y_continuous(breaks = NA) +&#xD;&#xA;      scale_x_continuous(breaks = NA)&#xD;&#xA;  &#xD;&#xA;  bp1 &lt;- ggplot_build(p1)&#xD;&#xA;  bp1ranges &lt;- bp1$panel$ranges[ [ 1 ] ]&#xD;&#xA;  &#xD;&#xA;  expect_identical(bp1ranges$x.major,   numeric(0))&#xD;&#xA;  expect_identical(bp1ranges$x.minor,   numeric(0))&#xD;&#xA;  expect_identical(bp1ranges$x.labels,  character(0))&#xD;&#xA;  expect_identical(bp1ranges$y.major,   numeric(0))&#xD;&#xA;  expect_identical(bp1ranges$y.minor,   numeric(0))&#xD;&#xA;  expect_identical(bp1ranges$y.labels,  character(0))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;  # Multiple values on x and y  &#xD;&#xA;  dat3 &lt;- data.frame(x = 1:3,  y = 1:3)&#xD;&#xA;  p3 &lt;- ggplot(dat3,  aes(x = x,  y = y)) + geom_point() +&#xD;&#xA;      scale_y_continuous(breaks = NA) +&#xD;&#xA;      scale_x_continuous(breaks = NA)&#xD;&#xA;  &#xD;&#xA;  bp3 &lt;- ggplot_build(p3)&#xD;&#xA;  bp3ranges &lt;- bp3$panel$ranges[ [ 1 ] ]&#xD;&#xA;&#xD;&#xA;  expect_identical(bp3ranges$x.major,   numeric(0))&#xD;&#xA;  expect_identical(bp3ranges$x.minor,   numeric(0))&#xD;&#xA;  expect_identical(bp3ranges$x.labels,  character(0))&#xD;&#xA;  expect_identical(bp3ranges$y.major,   numeric(0))&#xD;&#xA;  expect_identical(bp3ranges$y.minor,   numeric(0))&#xD;&#xA;  expect_identical(bp3ranges$y.labels,  character(0))&#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="3887266" ParentId="399" UserId="227097" Date="02/09/2012 13:28:34" Content="This is because `scale_breaks.continuous` returns the value if the variable has only one value.&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/scale-.r#L263&#xD;&#xA;&#xD;&#xA;It is easy to fix.&#xD;&#xA;&#xD;&#xA;I think the advantage of `zero_range` test is not so much.&#xD;&#xA;And in future `breaks = NULL` indicates there is no breaks.&#xD;&#xA;`breaks = waiver()` will be default,  which indicates that `breaks` will be determined automatically.&#xD;&#xA;" />
      <Message Id="3909347" ParentId="399" UserId="227097" Date="02/10/2012 16:50:52" Content="will be discussed in #400 so be closed." />
    </Messages>
  </Topic>
  <Topic Id="400" Title="scales: breaks,  minor_breaks,  and labels are absent if when they are NUL...">
    <Messages>
      <Message Id="0" ParentId="400" UserId="227097" Date="02/09/2012 14:27:52" Content="Unbelievably,  this commit passes all exinting tests relevant to scales!" />
      <Message Id="3888031" ParentId="400" UserId="227097" Date="02/09/2012 14:28:45" Content="So now users can explicitly specify for that breaks and labels are absent,  by setting them `NULL`" />
      <Message Id="3891740" ParentId="400" UserId="86978" Date="02/09/2012 17:35:49" Content="Cool - will `breaks=NA` still work?" />
      <Message Id="3901722" ParentId="400" UserId="227097" Date="02/10/2012 06:13:19" Content="the behavior for `breaks=NA` is probably undefined. In 0.8.9,  `breaks=NA` indicate no breaks,  right?&#xD;&#xA;Then I will make it so for backward compatibility with a warning message." />
      <Message Id="3901782" ParentId="400" UserId="86978" Date="02/10/2012 06:22:36" Content="Oh... `breaks=NA` is what I have always used for no breaks. Have I been doing it wrong all this time?" />
      <Message Id="3901804" ParentId="400" UserId="227097" Date="02/10/2012 06:25:38" Content="Okey,  then I will implement this. &#xD;&#xA;&#xD;&#xA;Indeed,  `NA` is buggy for some senses. e.g.,  `length(NA)` is `1` which indicate there is something.&#xD;&#xA;And actually I have no experience to remove breaks so I didn't know how to do this ;-p" />
      <Message Id="3901875" ParentId="400" UserId="86978" Date="02/10/2012 06:33:26" Content="OK,  good. I thought maybe I had missed something very basic... :)&#xD;&#xA;&#xD;&#xA;I think it would also be a good idea to give a message saying something like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;breaks=NA is deprecated. Please use breaks=NULL to remove breaks in the scale.&#xD;&#xA;```" />
      <Message Id="4060604" ParentId="400" UserId="227097" Date="02/20/2012 19:58:40" Content="Probably I have not roxygenized yet. Could you please do that,  since I'm not sure which version of roxygen2 I should use?" />
      <Message Id="4072204" ParentId="400" UserId="4196" Date="02/21/2012 10:16:36" Content="Sure - but in principle,  I should only ever be using the released version of roxygen." />
    </Messages>
  </Topic>
  <Topic Id="401" Title="Mark old releases with tags instead of branches">
    <Messages>
      <Message Id="0" ParentId="401" UserId="86978" Date="02/09/2012 23:40:38" Content="Some previous releases are &quot;marked&quot; by having branches -- essentially branches off of master that didn't go anywhere. I think it would be good to mark them with tags instead (or in addition to) the branches. This fits better with the concepts of tags and branches,  and it also makes it easier for others to refer to old releases.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# With the present system,  if I want to check out 0.8.9 (branch):&#xD;&#xA;git checkout remotes/origin/ggplot-0.8.9&#xD;&#xA;&#xD;&#xA;# With tags (like 0.9.0)&#xD;&#xA;git checkout ggplot-0.9.0&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It looks like the older releases,  like 0.8.3,  are tagged. 0.8.5 has both a branch and a tag,  while 0.8.6 - 0.8.9 only have branches.&#xD;&#xA;&#xD;&#xA;@hadley I think you would have to tag those commits in your local repo and then push." />
      <Message Id="3906517" ParentId="401" UserId="4196" Date="02/10/2012 14:08:46" Content="I think this a good idea." />
      <Message Id="4053423" ParentId="401" UserId="4196" Date="02/20/2012 13:22:05" Content="Now that you have admin access,  do you want to do this yourself?" />
      <Message Id="4054955" ParentId="401" UserId="86978" Date="02/20/2012 14:59:24" Content="Sure. I have a question: the old releases are tagged ggplot2-0.8.x,  while the recent release is tagged ggplot-0.9.0. Should they all be ggplot2-xxx,  including the recent release?" />
      <Message Id="4055135" ParentId="401" UserId="4196" Date="02/20/2012 15:09:59" Content="Yeah,  probably.  They should at least be consistent!" />
      <Message Id="4056011" ParentId="401" UserId="86978" Date="02/20/2012 15:52:05" Content="Ok,  I added annotated tags for 0.8.5 and up,  and pushed. I also added a tag for ggplot2-0.9.0 and deleted ggplot-0.9.0. If you can do a `git fetch --tags` and verify that they look right,  I'll go ahead and delete the branches." />
      <Message Id="4056225" ParentId="401" UserId="4196" Date="02/20/2012 16:02:18" Content="Seems ok to me" />
      <Message Id="4056286" ParentId="401" UserId="86978" Date="02/20/2012 16:05:18" Content="OK,  I deleted the branches ggplot-0.8.x branches." />
    </Messages>
  </Topic>
  <Topic Id="402" Title="Continuous values don't work with scale_shape_identity">
    <Messages>
      <Message Id="0" ParentId="402" UserId="86978" Date="02/10/2012 02:56:22" Content="Commit f175bbb1b99f38e583fbbd9d0d71de488d5d448d broke `R CMD check`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df2 &lt;- data.frame(x = 1:5 ,  y = 1:25,  z = 1:25)&#xD;&#xA;s &lt;- ggplot(df2,  aes(x = x,  y = y))&#xD;&#xA;s + geom_point(aes(shape = z),  size = 4) + scale_shape_identity()&#xD;&#xA;# Error: Continuous value supplied to discrete scale&#xD;&#xA;```" />
      <Message Id="3901127" ParentId="402" UserId="463252" Date="02/10/2012 04:42:16" Content="Shape is inherently discrete; the fact that you can't use a continuous variable isn't surprising. What ought it do?" />
      <Message Id="3901752" ParentId="402" UserId="86978" Date="02/10/2012 06:18:30" Content="Prior to f175bbb,  it produced a chart of all the point shapes from 1-25,  by using the `z` value for the shape. I'm not sure if this is &quot;correct&quot; or not. But since shapes are identified by numbers,  it seems like you'd want to be able do something like this.&#xD;&#xA;&#xD;&#xA;**UPDATE: this part about `as.integer()` working is wrong. It doesn't work.**&#xD;&#xA;&#xD;&#xA;It is possible to make it work by using `as.integer(z)`: &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;s + geom_point(aes(shape = as.integer(z)),  size = 4) + scale_shape_identity()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It seems to me there are a few alternatives:&#xD;&#xA;&#xD;&#xA;1. Just fix the example so `R CMD check` will run.&#xD;&#xA;1. When a numeric vector is passed to a discrete scale,  throw an error that conveys information like,  &quot;Did you mean for your (continuous) numeric vector to be a (discrete) integer vector? If so,  use as.integer().&quot; Also,  fix the example.&#xD;&#xA;1. When a numeric vector is passed to a discrete scale,  if it's all integer values,  go ahead and use it,  coercing with `as.integer()`; if it's not all integers,  throw an error.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3906217" ParentId="402" UserId="4196" Date="02/10/2012 13:45:19" Content="I think option 3 is the right one for shape scales.  I made this change because the previous behaviour had broken one of the tests.  " />
      <Message Id="3966457" ParentId="402" UserId="86978" Date="02/14/2012 18:12:33" Content="I put a function in `stat-bindot.r` called `is.wholenumber` that will check whether a number is a whole number,  with some tolerance for FP error. (I took the function from the `?integer` page.) It might be a good idea to move it to,  say,  `utilities.r` and make use of it here." />
      <Message Id="4053528" ParentId="402" UserId="4196" Date="02/20/2012 13:29:30" Content="We also need to supplement the tests so this doesn't happen again." />
      <Message Id="4068853" ParentId="402" UserId="86978" Date="02/21/2012 05:52:28" Content="Hm,  I was actually wrong -- wrapping it with `as.integer()` doesn't actually make a difference. I think I had actually switched to a different version of ggplot2 when I was doing that test.&#xD;&#xA;&#xD;&#xA;At any rate,  after playing with this some more,  I think there are two challenges:&#xD;&#xA;&#xD;&#xA;* issues with the legend. When the code worked (as in 0.9.0) it generated the image with a table of points,  but there was no legend. Even if there were a legend,  it would just be labeled 1,  2,  3,  etc -- not very meaningful.&#xD;&#xA;* In order to make things work,  I think things need to be changed in the scales package. Specifically,  the `train_discrete` function in `scale-discrete.r` would need to be modified to accept numerics in the way described in option 3 above. This will affect other aesthetics other than shape,  so it's important to decide whether this integer-only behavior should be used for all discrete identity scales.&#xD;&#xA;&#xD;&#xA;At any rate,  here's a test:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;shape identity scale works for numerics&quot;,  { &#xD;&#xA;  ssi &lt;- scale_shape_identity()&#xD;&#xA;&#xD;&#xA;  expect_identical(scale_train(ssi,  1:5),  1:5)&#xD;&#xA;&#xD;&#xA;  expect_error(scale_train(ssi,  c(.5,  1:4)))&#xD;&#xA; })&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;If you don't think that the scales package should be changed,  here's a quick fix for the code that's breaking R CMD check:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df2 &lt;- data.frame(x = 1:5 ,  y = 1:25,  z = 1:25)&#xD;&#xA;s &lt;- ggplot(df2,  aes(x = x,  y = y))&#xD;&#xA;s + geom_point(aes(shape = as.character(z)),  size = 4) + &#xD;&#xA;  scale_shape_manual(breaks = as.character(df2$z),  values = df2$z,  guide = FALSE)&#xD;&#xA;```" />
      <Message Id="4070851" ParentId="402" UserId="4196" Date="02/21/2012 08:29:02" Content="Hmmm,  probably just best to change the example.  Otherwise we'd need to muck with a custom scale class for shape identity." />
      <Message Id="4074751" ParentId="402" UserId="4196" Date="02/21/2012 13:36:54" Content="This turned out to be much simpler than I thought - and should slightly improve performance with identity scales." />
    </Messages>
  </Topic>
  <Topic Id="403" Title="minor_breaks function ignored">
    <Messages>
      <Message Id="0" ParentId="403" UserId="18970" Date="02/12/2012 09:40:18" Content="```r&#xD;&#xA;&#xD;&#xA;## setting numeric values for minor_breaks works:&#xD;&#xA;&#xD;&#xA;qplot(10^(1:6),  10^(1:6)) + scale_x_log10(breaks = 10^(1:6), &#xD;&#xA;  minor_breaks = log(c(sapply(10^(1:6),  function(x) seq(0,  x,  x/10))),  10))) &#xD;&#xA;&#xD;&#xA;## but a function is ignored:&#xD;&#xA;&#xD;&#xA;qplot(10^(1:6),  10^(1:6)) + scale_x_log10(breaks = trans_breaks(&quot;log10&quot;,  function(x) 10^x,  n=6) , &#xD;&#xA;   minor_breaks = trans_breaks(&quot;log10&quot;,  function(x) 10^x,  n=60) )&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;the minor breaks disappear entirely.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="3930575" ParentId="403" UserId="227097" Date="02/12/2012 20:07:49" Content="Actually that is not ignored,  but simply out of range.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(10^(1:6),  10^(1:6)) + scale_x_log10(breaks = trans_breaks(&quot;log10&quot;,  function(x) 10^x,  n=6) , &#xD;&#xA;   minor_breaks = trans_breaks(&quot;log10&quot;,  function(x) log(10^x,  10),  n=60) )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;will work.&#xD;&#xA;&#xD;&#xA;The breaks internally transform the data,  while the minor breaks do not.&#xD;&#xA;I know it's confusing.&#xD;&#xA;" />
      <Message Id="3932324" ParentId="403" UserId="18970" Date="02/12/2012 23:36:55" Content="oh,  I see,  thanks. I think it would be much less confusing to have the same behavior as major breaks. Also,  the example you submitted &#xD;&#xA;```&#xD;&#xA;qplot(10^(1:6),  10^(1:6)) + scale_x_log10(breaks = 10^(1:6), &#xD;&#xA;minor_breaks = log(c(sapply(10^(1:6),  function(x) seq(0,  x,  x/10))),  10))&#xD;&#xA;```&#xD;&#xA;would be quite useful in the documentation for scale_x_log10." />
      <Message Id="3940496" ParentId="403" UserId="4196" Date="02/13/2012 14:26:40" Content="We probably need a little documentation for `scale_breaks_minor` describing exactly what it does." />
      <Message Id="4184367" ParentId="403" UserId="227097" Date="02/26/2012 20:52:32" Content="&gt; We probably need a little documentation for scale_breaks_minor describing exactly what it does.&#xD;&#xA;&#xD;&#xA;Who is going to?" />
      <Message Id="4193927" ParentId="403" UserId="4196" Date="02/27/2012 14:05:11" Content="I'll do it - either today or tomorrow.  (Note to self: also make sure to document minor_breaks arguments to date scales)" />
      <Message Id="4194736" ParentId="403" UserId="4196" Date="02/27/2012 14:49:43" Content="Hmmm,  this is more complicated than I thought. Ideally,  we should be able to wrap the default behaviour (n evenly spaced minor breaks between each major break) into a standard minor breaks function - but currently it needs both the major breaks and the limits.  This may suggest that the minor breaks function should get both those arguments - but then all other minor breaks functions will need to be rewritten (e.g. for date and date time).&#xD;&#xA;&#xD;&#xA;We also need someway to easily control the number of minor breaks between major breaks." />
      <Message Id="4194894" ParentId="403" UserId="4196" Date="02/27/2012 14:58:15" Content="See exploration in `minor_breaks` branch: https://github.com/hadley/ggplot2/compare/minor_breaks" />
      <Message Id="4199407" ParentId="403" UserId="227097" Date="02/27/2012 18:11:02" Content="&gt; We also need someway to easily control the number of minor breaks between major breaks.&#xD;&#xA;&#xD;&#xA;ggplot2 may have its own `number + unit` representation (at least internally).&#xD;&#xA;&#xD;&#xA;e.g., &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;minor_breaks = c(0,  1,  2) # raw numeric&#xD;&#xA;minor_breaks = ggunit(1,  &quot;count&quot;) # number of minor breaks between major breaks&#xD;&#xA;minor_breaks = ggunit(-1,  &quot;level&quot;) # in the case of date/datetime,  if major breaks = month,  minor = week.&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I imagine this function would be useful in many places." />
      <Message Id="4199495" ParentId="403" UserId="227097" Date="02/27/2012 18:15:10" Content="of course `ggunit` is a simple function like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggunit &lt;- function(value,  unit = &quot;I&quot;,  ...) &#xD;&#xA;  structure(value,  class = &quot;ggunit&quot;,  unit = unit,  ...)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="4199674" ParentId="403" UserId="227097" Date="02/27/2012 18:23:01" Content="`ggunit` is available also for data space identifier. like:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;breaks = ggunit(c(1:10),  &quot;transformed&quot;)&#xD;&#xA;breaks = ggunit(c(1:10),  &quot;original&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;the name `ggunit` should be reconsidered,  though." />
      <Message Id="4203760" ParentId="403" UserId="4196" Date="02/27/2012 21:41:18" Content="I think this is big enough that I'm going to put it off until 0.9.1" />
      <Message Id="5071507" ParentId="403" UserId="4196" Date="04/11/2012 15:31:14" Content="And now until 0.9.2" />
      <Message Id="20141346" ParentId="403" UserId="272442" Date="06/27/2013 17:30:38" Content="It appears this is still in 0.9.3." />
      <Message Id="35939578" ParentId="403" UserId="4196" Date="02/24/2014 21:18:27" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="404" Title="legend clipping">
    <Messages>
      <Message Id="0" ParentId="404" UserId="18970" Date="02/14/2012 02:58:00" Content="version 0.9.0 clips the legend to the plot panel width and height,  as illustrated below:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;d &lt;- data.frame(x=rnorm(100),  y=rnorm(100),  f=letters[ 1:25 ])&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(d,  aes(x,  y,  colour=f)) +&#xD;&#xA;  geom_path() + opts(title=&quot;very long title very long title very long title very long title very long title&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;pdf(&quot;clipping.pdf&quot;,  width=5,  height=5)&#xD;&#xA;p + opts(legend.position=&quot;right&quot;,  legend.direction=&quot;vertical&quot;)&#xD;&#xA;p + opts(legend.position=&quot;left&quot;,  legend.direction=&quot;vertical&quot;)&#xD;&#xA;p + opts(legend.position=&quot;top&quot;,  legend.direction=&quot;horizontal&quot;)&#xD;&#xA;p + opts(legend.position=&quot;bottom&quot;,  legend.direction=&quot;horizontal&quot;)&#xD;&#xA;dev.off()&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="405" Title="Change the argument of the autoplot() generic">
    <Messages>
      <Message Id="0" ParentId="405" UserId="18445" Date="02/14/2012 08:03:28" Content="`object` is more general than `data` and does not conflict with fortify()&#xD;&#xA;+ small documentation changes" />
      <Message Id="3987081" ParentId="405" UserId="463252" Date="02/15/2012 19:25:54" Content="You also need to update the generated documentation (via `document()` in devtools) and commit that to the branch." />
      <Message Id="3987920" ParentId="405" UserId="18445" Date="02/15/2012 20:09:07" Content="Oops indeed. It's done." />
    </Messages>
  </Topic>
  <Topic Id="406" Title="order by factor with geom_pointrange and position_dodge">
    <Messages>
      <Message Id="0" ParentId="406" UserId="460862" Date="02/14/2012 17:11:19" Content="In the following code,  changing the order (&quot;as.numeric(z)&quot; or &quot;- as.numeric(z)&quot;) has no effect (ggplot2 0.9.0,  R 2.14.1,  Debian Testing). I want to change the order so that when the coordinates are flipped,  the order in the legend matches the ordering of the lines.&#xD;&#xA;&#xD;&#xA;    x &lt;- c(1, 2, 3, 1, 2, 3, 1, 2, 3)&#xD;&#xA;    y &lt;- c(0.1, 0.2, 0.3, 0.12, 0.22, 0.32, 0.14, 0.24, 0.34)&#xD;&#xA;    z &lt;- c(&quot;a&quot;,  &quot;a&quot;,  &quot;a&quot;,  &quot;b&quot;,  &quot;b&quot;,  &quot;b&quot;,  &quot;c&quot;,  &quot;c&quot;,  &quot;c&quot;)&#xD;&#xA;    z &lt;- factor(z,  ordered=TRUE)&#xD;&#xA;&#xD;&#xA;    qplot(x,  y,  ymin=y-0.05,  ymax=y+0.05,  colour=z,  order=-as.numeric(z),  &#xD;&#xA;          geom=&quot;pointrange&quot;,  &#xD;&#xA;          position=position_dodge(width=0.2,  height=0)) + coord_flip()&#xD;&#xA;" />
      <Message Id="3965997" ParentId="406" UserId="86978" Date="02/14/2012 17:48:18" Content="Here's a way to reverse the legend in the new version:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(x,  y,  ymin=y-0.05,  ymax=y+0.05,  colour=z,  &#xD;&#xA;       geom=&quot;pointrange&quot;,  &#xD;&#xA;       position=position_dodge(width=0.2,  height=0)) + coord_flip() + &#xD;&#xA;    guides(colour=guide_legend(reverse=TRUE))&#xD;&#xA;```" />
      <Message Id="3971995" ParentId="406" UserId="460862" Date="02/14/2012 23:31:39" Content="Thanks,  that works very nicely; sorry I didn't know about guides(). But since I've discovered that the legend box padding is too small in 0.9.0,  I've moved back to 0.8.x.&#xD;&#xA;&#xD;&#xA;I don't mean to spam the bug tracker,  but my initial example doesn't work in 0.8.7,  0.8.8 and 0.8.9 (I haven't tried any older versions). I could've sworn the &quot;order = - as.numeric(...)&quot; clause used to work. What am I doing wrong? I can close the bug if this is not the appropriate place to discuss this." />
      <Message Id="3972117" ParentId="406" UserId="460862" Date="02/14/2012 23:41:42" Content="Never mind,  I solved it:&#xD;&#xA;&#xD;&#xA;    x &lt;- c(1, 2, 3, 1, 2, 3, 1, 2, 3)&#xD;&#xA;    y &lt;- c(0.1, 0.2, 0.3, 0.12, 0.22, 0.32, 0.14, 0.24, 0.34)&#xD;&#xA;    z &lt;- c(&quot;a&quot;,  &quot;a&quot;,  &quot;a&quot;,  &quot;b&quot;,  &quot;b&quot;,  &quot;b&quot;,  &quot;c&quot;,  &quot;c&quot;,  &quot;c&quot;)&#xD;&#xA;    z &lt;- factor(z,  ordered=TRUE)&#xD;&#xA;    zz &lt;- factor(z,  levels=rev(levels(z)),  ordered=TRUE)&#xD;&#xA;&#xD;&#xA;    qplot(x,  y,  ymin=y-0.05,  ymax=y+0.05,  colour=z,  order=zz, &#xD;&#xA;          geom=&quot;pointrange&quot;,  &#xD;&#xA;          position=position_dodge(width=0.2,  height=0)) + coord_flip()&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="407" Title="Increasing space between axis.title and axis.text clips the text">
    <Messages>
      <Message Id="0" ParentId="407" UserId="1441243" Date="02/15/2012 21:27:29" Content="I described the issue in details at the Stack-exchange and hope its alright that I link to this:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/9131916/increase-space-between-axis-title-and-axis-text-in-ggplot2-version-0-9-0&#xD;&#xA;&#xD;&#xA;I came up with this small fix that seems to solve the issue (just a clip = &quot;off&quot;):&#xD;&#xA;&#xD;&#xA;plot-render.r:64 (version commit 16e69f634859cda5cc01458217bdb329486ef384)&#xD;&#xA;&#xD;&#xA;from:&#xD;&#xA;&#xD;&#xA;    xlab_height &lt;- grobHeight(xlabel) + &#xD;&#xA;      if (is.null(labels$x)) unit(0,  &quot;lines&quot;) else unit(0.5,  &quot;lines&quot;)&#xD;&#xA;    plot_table &lt;- gtable_add_rows(plot_table,  xlab_height)&#xD;&#xA;    plot_table &lt;- gtable_add_grob(plot_table,  xlabel,  name = &quot;xlab&quot;,  &#xD;&#xA;    l = panel_dim$l,  r = panel_dim$r,  t = -1)&#xD;&#xA;&#xD;&#xA;    ylab_width &lt;- grobWidth(ylabel) + &#xD;&#xA;      if (is.null(labels$y)) unit(0,  &quot;lines&quot;) else unit(0.5,  &quot;lines&quot;)&#xD;&#xA;    plot_table &lt;- gtable_add_cols(plot_table,  ylab_width,  pos = 0)&#xD;&#xA;    plot_table &lt;- gtable_add_grob(plot_table,  ylabel,  name = &quot;ylab&quot;, &#xD;&#xA;      l = 1,  b = panel_dim$b,  t = panel_dim$t)&#xD;&#xA;&#xD;&#xA;    xlab_height &lt;- grobHeight(xlabel) + &#xD;&#xA;      if (is.null(labels$x)) unit(0,  &quot;lines&quot;) else unit(0.5,  &quot;lines&quot;)&#xD;&#xA;    plot_table &lt;- gtable_add_rows(plot_table,  xlab_height)&#xD;&#xA;    plot_table &lt;- gtable_add_grob(plot_table,  xlabel,  name = &quot;xlab&quot;,  &#xD;&#xA;      l = panel_dim$l,  r = panel_dim$r,  t = -1,  clip = &quot;off&quot;)                      &lt;---- here&#xD;&#xA;&#xD;&#xA;    ylab_width &lt;- grobWidth(ylabel) + &#xD;&#xA;      if (is.null(labels$y)) unit(0,  &quot;lines&quot;) else unit(0.5,  &quot;lines&quot;)&#xD;&#xA;    plot_table &lt;- gtable_add_cols(plot_table,  ylab_width,  pos = 0)&#xD;&#xA;    plot_table &lt;- gtable_add_grob(plot_table,  ylabel,  name = &quot;ylab&quot;, &#xD;&#xA;      l = 1,  b = panel_dim$b,  t = panel_dim$t,  clip = &quot;off&quot;)                     &lt;---- here&#xD;&#xA;&#xD;&#xA;Kind regards&#xD;&#xA;Kim" />
    </Messages>
  </Topic>
  <Topic Id="408" Title="Unexpected result instead of error when using a discrete position scale with continuous data">
    <Messages>
      <Message Id="0" ParentId="408" UserId="18445" Date="02/20/2012 15:20:26" Content="Given this continuous data&#xD;&#xA;&#xD;&#xA;    library(&quot;ggplot2&quot;)&#xD;&#xA;    set.seed(123)&#xD;&#xA;    d &lt;- data.frame(x=runif(10),  y=runif(10))&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y))&#xD;&#xA;&#xD;&#xA;I would expect these&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y)) + scale_x_discrete(breaks=c(0, 0.5, 1))&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=y)) + scale_x_date()&#xD;&#xA;&#xD;&#xA;to throw an error. Instead they do unexpected stuffL&#xD;&#xA;&#xD;&#xA;- `scale_x_discrete` produces a axis with breaks at 0 and 1 only and leaves a lot of blank space on the right of 1&#xD;&#xA;- `scale_x_date` produces a scale which depends on the current time&#xD;&#xA;" />
      <Message Id="4055509" ParentId="408" UserId="4196" Date="02/20/2012 15:27:38" Content="For the discrete case,  I'm not sure if it's possible to fix this behaviour with out breaking other desirable behaviour - `scale_discrete` also has to deal with continuous values so that (e.g.) `geom_jitter` works if you have categorical x's." />
      <Message Id="4055598" ParentId="408" UserId="18445" Date="02/20/2012 15:32:39" Content="For info,  I was just following the conversation and you advice there: http://groups.google.com/group/ggplot2/msg/0cc68781574b0297. I'm not sure how fixable these things are ;)" />
      <Message Id="4055703" ParentId="408" UserId="4196" Date="02/20/2012 15:37:15" Content="Here's an outline of a solution to the other problem&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;to_time2 &lt;- function(x)    structure(x,  class = c(&quot;POSIXt&quot;,  &quot;POSIXct&quot;))&#xD;&#xA;from_time2 &lt;- function(x) { &#xD;&#xA;  if (!inherits(x,  &quot;POSIXt&quot;)) { &#xD;&#xA;    stop(&quot;Time transformer requires POSIXt as input&quot;,  call. = FALSE)&#xD;&#xA;   }&#xD;&#xA;  structure(as.numeric(x),  names = names(x))&#xD;&#xA; }&#xD;&#xA;time2_trans &lt;- trans_new(&quot;time&quot;,  &quot;from_time2&quot;,  &quot;to_time2&quot;)&#xD;&#xA;&#xD;&#xA;ggplot(d) + geom_point(aes(x=x,  y=y)) + scale_x_continuous(trans = time2_trans)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;this needs to be fixed in the scales package,  and a similar change is needed for dates." />
      <Message Id="5247526" ParentId="408" UserId="4196" Date="04/20/2012 16:04:07" Content="Moved to scales: https://github.com/hadley/scales/issues/18" />
    </Messages>
  </Topic>
  <Topic Id="409" Title="fix geom-path for unordered data">
    <Messages>
      <Message Id="0" ParentId="409" UserId="227097" Date="02/20/2012 19:25:56" Content="" />
      <Message Id="4060119" ParentId="409" UserId="4196" Date="02/20/2012 19:29:51" Content="Could you please also provide a non-visual test?" />
      <Message Id="4060519" ParentId="409" UserId="227097" Date="02/20/2012 19:51:56" Content="&gt; Could you please also provide a non-visual test?&#xD;&#xA;&#xD;&#xA;Sounds challenging... Ok,  I will try :)" />
      <Message Id="4060540" ParentId="409" UserId="227097" Date="02/20/2012 19:53:54" Content="Now I found it is almost impossible.&#xD;&#xA;I tried to use the return value of `ggplot_buide`,  but the return value is OK.&#xD;&#xA;The bug is in the conversion from the data to geom.&#xD;&#xA;How can I manage this type of bug in a non-visual test?&#xD;&#xA;&#xD;&#xA;Should I use `grid.get`?" />
      <Message Id="4060633" ParentId="409" UserId="4196" Date="02/20/2012 20:00:33" Content="Oh sorry,  I forgot about that.  I think in the next version (1.0) it will be easier to do these tests." />
      <Message Id="4060650" ParentId="409" UserId="227097" Date="02/20/2012 20:01:39" Content="&gt; I think in the next version (1.0) it will be easier to do these tests.&#xD;&#xA;&#xD;&#xA;Sounds nice !!" />
    </Messages>
  </Topic>
  <Topic Id="410" Title="NAs in colored scatter plots are misleading">
    <Messages>
      <Message Id="0" ParentId="410" UserId="562061" Date="02/21/2012 18:27:28" Content="Consider:&#xD;&#xA;&#xD;&#xA;dat &lt;- data.frame(a = 1:10, b=1:10, c=c(1:9, NA))&#xD;&#xA;ggplot() +&#xD;&#xA;	geom_point(aes(x = a, y = b, colour = c), data=dat) +&#xD;&#xA;	scale_colour_gradient(guide = guide_legend(), low = '#000000', high = '#e3e1e2')&#xD;&#xA;&#xD;&#xA;There is no indication in the legend what NA values look like,  and even if there was,  the reader would not be able to distinguish it from the color scale. It seems to me that NAs need either a special plotting symbol (perhaps an open point with &quot;NA&quot; written inside it),  or they should be dropped with a warning.&#xD;&#xA;" />
      <Message Id="4080925" ParentId="410" UserId="4196" Date="02/21/2012 18:30:27" Content="But they do get a different colour..." />
      <Message Id="4081084" ParentId="410" UserId="562061" Date="02/21/2012 18:38:33" Content="Not if the scale includes that color (as in the example). Even in the default gradient,  the default NA color is close enough to the scale to cause confusion. The NA color can of course be changed explicitly. " />
      <Message Id="4104623" ParentId="410" UserId="227097" Date="02/22/2012 14:14:41" Content="Actually ggplot2 doesn't know what NA means.&#xD;&#xA;&#xD;&#xA;In my view,  ggplot2 would display warning messages but try to draw by using na.default.&#xD;&#xA;If users need to set color/symbol for NA,  they can do by changes na.default.&#xD;&#xA;Maybe the legend should have an option such as display.NA. This is easy now.&#xD;&#xA;&#xD;&#xA;In generating legend,  handling NA is really annoying. &#xD;&#xA;Just for note,  IIRC now ggplot2 (and scales) uses internally NA for,  e.g.,  out-of-range value.&#xD;&#xA;It will induce some problems." />
      <Message Id="6213604" ParentId="410" UserId="4196" Date="06/08/2012 21:35:44" Content="I think the best resolution for this would be for the legend to display an entry for NA when there are any on the graph - the default colours might make it difficult to distinguish the missing value from other values,  but at least you'd know it was there and could remedy the problem.&#xA;&#xA;The challenge,  as @kohske mentioned,  is that there are two meanings for NA: an explicit NA from the original data (which we want to preserve) or a NA introduced because the value is outside the range of the scale (we don't want to show that on the plot,  but it should trigger an error message). One option which is not particularly elegant,  would be to use NA and NaN to distinguish between the two states.  Otherwise I could try creating a new vector type that could have multiple types of missing values (a hybrid continuous/discrete variable).  " />
      <Message Id="35939600" ParentId="410" UserId="4196" Date="02/24/2014 21:18:38" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="411" Title="Couple of fixes to the website docs">
    <Messages>
      <Message Id="0" ParentId="411" UserId="111939" Date="02/24/2012 18:18:38" Content="Hi, &#xD;&#xA;&#xD;&#xA;There are a couple of things that need fixing on the ggplot2 website docs:&#xD;&#xA;&#xD;&#xA;1. The docs for geom_vline() are missing the 'xintercept' aesthetic,  but they mention an 'x' aesthetic,  which doesn't exist.  (The examples lower down on the page do talk about 'xintercept',  but I missed that for a long time.)&#xD;&#xA;&#xD;&#xA;2. There's no backlink on individual doc pages to the top-level doc page.&#xD;&#xA;&#xD;&#xA;If there's a repo somewhere I could submit a patch,  but for 1) I didn't see where the actual aesthetic list is coming from,  and for 2) I wasn't sure where the code lives that's building the site.&#xD;&#xA;&#xD;&#xA;Thanks." />
      <Message Id="4572083" ParentId="411" UserId="111939" Date="03/19/2012 12:20:38" Content="I created #447 for the general solution to 1." />
      <Message Id="5883901" ParentId="411" UserId="4196" Date="05/23/2012 20:36:27" Content="These are both fixed in the devel version with staticdocs." />
      <Message Id="5886878" ParentId="411" UserId="111939" Date="05/23/2012 23:00:01" Content="Excellent,  thanks." />
    </Messages>
  </Topic>
  <Topic Id="412" Title="geom_raster and annotation_raster interpolate option">
    <Messages>
      <Message Id="0" ParentId="412" UserId="424139" Date="02/25/2012 00:07:18" Content="Right now both are hard coded to &lt;code&gt;interpolate=FALSE&lt;/code&gt;.  Can we get that as an argument to &lt;code&gt;geom_raster&lt;/code&gt; and &lt;code&gt;annotation_raster&lt;/code&gt;?  " />
      <Message Id="4177605" ParentId="412" UserId="4196" Date="02/26/2012 00:33:40" Content="Could you provide an example use case?" />
      <Message Id="4178670" ParentId="412" UserId="424139" Date="02/26/2012 04:41:17" Content="Sure,  I have a version of &lt;code&gt;annotation_raster&lt;/code&gt; in ggmap (not exported) which does the job until it can get into ggplot2.  Using the file http://dl.dropbox.com/u/24648660/ggmapTemp.jpg,  check out the difference -&#xD;&#xA;&#xD;&#xA;library(devtools)&#xD;&#xA;dev_mode()&#xD;&#xA;install_github('ggmap',  username = 'dkahle',  branch = 'master')&#xD;&#xA;&#xD;&#xA;r &lt;- read.jpeg('ggmapTemp.jpg')&#xD;&#xA;df &lt;- expand.grid(x = 0:1,  y = 0:1)&#xD;&#xA;&#xD;&#xA;ggplot(aes(x = x,  y = y),  data = df) + geom_blank() +&#xD;&#xA;  ggplot2::annotation_raster(r,  0,  1,  0,  1)&#xD;&#xA;  &#xD;&#xA;ggplot(aes(x = x,  y = y),  data = df) + geom_blank() +&#xD;&#xA;  ggmap:::annotation_raster(r,  0,  1,  0,  1)  &#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="413" Title="geom_dotplot does not respect `color = ` argument">
    <Messages>
      <Message Id="0" ParentId="413" UserId="330036" Date="02/25/2012 21:09:17" Content="*As of* 91d9ee9&#xD;&#xA;&#xD;&#xA;Broken British-ism: `geom_dotplot()` should be fine taking and respecting arguments whether they are spelled `color`,  or `colour`,  but only the latter works.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;# Big red dots (for comparison)&#xD;&#xA;p &lt;- ggplot()&#xD;&#xA;p + geom_point(aes(x = cty,  y = hwy),  &#xD;&#xA;               data  = mpg,  &#xD;&#xA;               color = &quot;red&quot;, &#xD;&#xA;               size  = 4&#xD;&#xA;    )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ Big red dots ](http://briandk.com/screenshots/BigRedDots-20120225-160217.png)&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;# geom_dotplot fails to respect a &quot;color&quot; argument&#xD;&#xA;p &lt;- ggplot()&#xD;&#xA;p + geom_dotplot(aes(x = hwy), &#xD;&#xA;                 data     = mpg, &#xD;&#xA;                 color    = &quot;red&quot;, &#xD;&#xA;                 binwidth = 1.5&#xD;&#xA;    )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ geom_dotplot with no red color ](http://briandk.com/screenshots/geomDotplotNoColor-20120225-160409.png)&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;# geom_dotplot *does* respect a &quot;colour&quot; argument&#xD;&#xA;p &lt;- ggplot()&#xD;&#xA;p + geom_dotplot(aes(x = hwy), &#xD;&#xA;                 data     = mpg, &#xD;&#xA;                 colour   = &quot;red&quot;, &#xD;&#xA;                 binwidth = 1.5&#xD;&#xA;    )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ geom dotplot respects colour argument ](http://briandk.com/screenshots/GeomDotplotWithRedColor-20120225-160555.png)&#xD;&#xA;&#xD;&#xA;-----&#xD;&#xA;&#xD;&#xA;Here's my `sessionInfo()` output in case it's something wacky on my end&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.14.2 RC (2012-02-23 r58468)&#xD;&#xA;Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] C/en_US.UTF-8/C/C/C/C&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] MASS_7.3-17        RColorBrewer_1.0-5 colorspace_1.1-1   dichromat_1.2-4   &#xD;&#xA; [ 5 ] digest_0.5.1       grid_2.14.2        memoise_0.1        munsell_0.3       &#xD;&#xA; [ 9 ] plyr_1.7.1         proto_0.3-9.2      reshape2_1.2.1     scales_0.1.0      &#xD;&#xA;[ 13 ] stringr_0.6        tools_2.14.2      &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;/cc @wch " />
      <Message Id="4178348" ParentId="413" UserId="330036" Date="02/26/2012 03:09:11" Content="@wch - Quick question. Given my samples above,  why does `geom_dotplot()` seem to separate fill and color aesthetics? See my third graphic above." />
      <Message Id="4178452" ParentId="413" UserId="86978" Date="02/26/2012 03:37:12" Content="@briandk It's like `geom_point` for filled point shapes (like 21) where fill and and outline color are separate aesthetics. The reason I decided to make the default outline color black instead of NA was because on some bitmap output devices (like x11),  the fill part  come out looking aliased and jagged,  while the outline is antialiased and smooth. Your first graph with `geom_point` exhibits this issue -- if you instead use shape 21,  it adds the outline and comes out smoother:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mpg,  aes(cty,  hwy)) +&#xD;&#xA;  geom_point(color = &quot;red&quot;,  fill=&quot;red&quot;,  shape=21,  size  = 4)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;A case could be made for defaulting to no outline,  but this is the way things are now..." />
    </Messages>
  </Topic>
  <Topic Id="414" Title="dotplot: allow setting aes with American spellings (Fixes #413)">
    <Messages>
      <Message Id="0" ParentId="414" UserId="86978" Date="02/25/2012 23:09:40" Content="This fixes #413." />
    </Messages>
  </Topic>
  <Topic Id="415" Title="Geom docfix">
    <Messages>
      <Message Id="0" ParentId="415" UserId="86978" Date="02/25/2012 23:58:53" Content="I took the commits from @djmurphy420's pull request #342,  rebased them on top of master,  and fixed the conflicts." />
    </Messages>
  </Topic>
  <Topic Id="416" Title="limits of breaks in positional scales should be expanded">
    <Messages>
      <Message Id="0" ParentId="416" UserId="227097" Date="02/27/2012 18:47:53" Content="e.g.,  &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(c(0.1,  1:5),  1:6)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This code will not show breaks at x = 0,  but maybe it should show it unless the `limits` is set explicitly.&#xD;&#xA;&#xD;&#xA;In the case of fill/colour legend,  I changed to remove out-of-range value since the color/fill of oob value cannot be defined.&#xD;&#xA;But we can assume the continuity the positional scale,  so oob value can be defined.&#xD;&#xA;Also,  colour_gradient etc may have nicer breaks, &#xD;&#xA;OR,  limits should be pretty.&#xD;&#xA;&#xD;&#xA;Maybe pretty limit will be preferable.&#xD;&#xA;So,  scales have two limits,  limits of data and limits of the scale.&#xD;&#xA;In the case of color/fill gradient or size,  the limit of mapping is the limits of scale instead of the limits of data.&#xD;&#xA;" />
      <Message Id="4200411" ParentId="416" UserId="227097" Date="02/27/2012 18:58:45" Content="```&#xD;&#xA;&gt; sc &lt;- scale_x_continuous()&#xD;&#xA;&gt; scale_train(sc,  c(0.1,  1:3))&#xD;&#xA;&gt; scale_limits(sc)&#xD;&#xA;[ 1 ] 0.1 3.0&#xD;&#xA;&gt; scale_breaks(sc)&#xD;&#xA;[ 1 ] 0.0 0.5 1.0 1.5 2.0 2.5 3.0&#xD;&#xA;&gt; &#xD;&#xA;&gt; scale_pretty_limits &lt;- function(sc) range(pretty(scale_limits(sc)))&#xD;&#xA;&gt; scale_pretty_limits(sc)&#xD;&#xA;[ 1 ] 0 3&#xD;&#xA;&gt; &#xD;&#xA;&gt; scale_breaks(sc)&#xD;&#xA;[ 1 ] 0.0 0.5 1.0 1.5 2.0 2.5 3.0&#xD;&#xA;&gt; scale_break_positions(sc)&#xD;&#xA;[ 1 ]  NA 0.5 1.0 1.5 2.0 2.5 3.0&#xD;&#xA;&#xD;&#xA;&gt; # but should be like this?&#xD;&#xA;&gt; # scale_breaks_positions(sc)&#xD;&#xA;&gt; # [ 1 ] 0.0 0.5 1.0 1.5 2.0 2.5 3.0&#xD;&#xA;```" />
      <Message Id="4200772" ParentId="416" UserId="227097" Date="02/27/2012 19:15:36" Content="Of course,  you can set the limits by:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(c(0.1,  1:5),  1:6) + scale_x_continuous(limits = c(0,  5))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But I like this is default behavior. What do you think?&#xD;&#xA;" />
      <Message Id="4202290" ParentId="416" UserId="4196" Date="02/27/2012 20:30:16" Content="I'd also like to explore using the [ labelling ](http://cran.r-project.org/web/packages/labeling/index.html) package for this.  And probably the breaks should be computed on the range from `scale_dimension`,  not `scale_limits`" />
      <Message Id="4202829" ParentId="416" UserId="227097" Date="02/27/2012 20:58:19" Content="good idea! So we need thin wrappers for `labeling` family.,  eg.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;rpretty &lt;- function(...) function(range,  ...) labeling::rpretty(range[ 1 ],  range[ 2 ],  ...)&#xD;&#xA;```" />
      <Message Id="5252136" ParentId="416" UserId="86978" Date="04/20/2012 20:11:56" Content="Fixed in #473." />
    </Messages>
  </Topic>
  <Topic Id="417" Title="Different output of geom_raster to graphic device and PDF">
    <Messages>
      <Message Id="0" ParentId="417" UserId="18445" Date="02/29/2012 04:08:49" Content="&#xD;&#xA;	library(ggplot2)&#xD;&#xA;	d &lt;- expand.grid(x=1:10,  y=1:10)&#xD;&#xA;	d$z &lt;- runif(100)&#xD;&#xA;	ggplot(d) + geom_tile(aes(x=x,  y=y,  fill=z))&#xD;&#xA;	ggsave(&quot;test_tile.pdf&quot;)&#xD;&#xA;	ggplot(d) + geom_raster(aes(x=x,  y=y,  fill=z))&#xD;&#xA;	ggsave(&quot;test_raster.pdf&quot;)&#xD;&#xA;	ggsave(&quot;test_raster.png&quot;)&#xD;&#xA;	system(&quot;open test_*.p*&quot;)&#xD;&#xA;&#xD;&#xA;Copy-pasting from a quartz device on OS X gives even stranger results: http://dl.dropbox.com/u/1047321/ggplot2-bugs/test_raster-copy_paster.pdf&#xD;&#xA;" />
      <Message Id="4231450" ParentId="417" UserId="18445" Date="02/29/2012 04:12:28" Content="Actually the wrong rendering of `test_raster.pdf` is caused by Apple's Preview app. Google Chrome renders the PDF correctly. See the rendering by Chrome: http://dl.dropbox.com/u/1047321/ggplot2-bugs/Screen%20Shot%202012-02-29%20at%2005.10.50%20.png ,  and by Apple Preview: http://dl.dropbox.com/u/1047321/ggplot2-bugs/Screen%20Shot%202012-02-29%20at%2005.11.06%20.png&#xD;&#xA;" />
      <Message Id="4231540" ParentId="417" UserId="86978" Date="02/29/2012 04:24:56" Content="I've noticed that Apple Preview does this when I have PDF documents with a small bitmap (say 32x32 pixels) that is displayed large (say 4x4 inches). It does some sort of interpolation when it scales it up,  probably to avoid jagged aliasing artifacts. In those cases,  what I really wanted was the non-interpolated version.&#xD;&#xA;&#xD;&#xA;I wonder if it's part of the PDF specification to be able to specify how to handle bitmap scaling." />
      <Message Id="4231689" ParentId="417" UserId="86978" Date="02/29/2012 04:43:38" Content="Example here: http://dl.dropbox.com/u/84377/PDFimagescaling/test.pdf&#xD;&#xA;&#xD;&#xA;For me,  it's blurry in Mac Preview,  sharp in Chrome,  Adobe Reader,  and evince (in Linux).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Latex source file:&#xD;&#xA;&#xD;&#xA;```latex&#xD;&#xA;\documentclass{ article }&#xD;&#xA;\usepackage{ graphicx }&#xD;&#xA;\begin{ document }&#xD;&#xA;16x16 pixel PNG image,  scaled to 10x10 cm.&#xD;&#xA;&#xD;&#xA;\includegraphics[ width=10cm ]{ grid.png }&#xD;&#xA;\end{ document }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;And the PNG image file: http://dl.dropbox.com/u/84377/PDFimagescaling/grid.png&#xD;&#xA;" />
      <Message Id="4234040" ParentId="417" UserId="18970" Date="02/29/2012 09:03:26" Content="I recently had to revert to using `rectGrob()` instead of `rasterGrob()` at the last minute of submitting a manuscript,  because none of my coworkers could see the graphic not blurry (even though it had interpolate=FALSE). I came to the conclusion that the unfortunate current situation is that most pdf viewers do not render correctly raster graphics. Some of them have the option to perform interpolation or not." />
      <Message Id="4239550" ParentId="417" UserId="4196" Date="02/29/2012 15:33:46" Content="Unfortunately this is outside the scope of ggplot2 so there's not much I can do to fix it." />
    </Messages>
  </Topic>
  <Topic Id="418" Title="New annotation_logticks">
    <Messages>
      <Message Id="0" ParentId="418" UserId="86978" Date="02/29/2012 04:56:20" Content="On the mailing list I said I wasn't sure whether this should be in ggplot2 or not. But now that it's an annotation and not a geom,  it seems to make more sense." />
      <Message Id="4231989" ParentId="418" UserId="227097" Date="02/29/2012 05:22:18" Content="Excellent!!&#xD;&#xA;&#xD;&#xA;Maybe the logticks (more generally,  internal ticks) can be merged into the new positional guide system.&#xD;&#xA;But it will take quite a long time,  so I agree that the logticks annotation is merged into master.&#xD;&#xA;" />
      <Message Id="4232245" ParentId="418" UserId="86978" Date="02/29/2012 05:52:16" Content="That would be cool -- do you have anything written about where the positional guide system is going? I don't have a very clear idea of what it will do.&#xD;&#xA;&#xD;&#xA;If you want to try it out (This requires a recent version of devtools because apparently previous versions always used the master branch):&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;install_github('ggplot2',  'wch',  'feature/logticks')&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The help file has many examples." />
      <Message Id="4233529" ParentId="418" UserId="227097" Date="02/29/2012 08:14:59" Content="@wch Thanks. Now the branch is on my local repository and I can play with it.&#xD;&#xA;&#xD;&#xA;&gt; That would be cool -- do you have anything written about where the positional guide system is going?&#xD;&#xA;&#xD;&#xA;Not yet. I will upload it on a github soon,  in a few days,  i hope.&#xD;&#xA;It will be a variant of guide_axis,  or guide_axis may have an option which inside or outside the ticks are drawn.&#xD;&#xA;" />
      <Message Id="5070974" ParentId="418" UserId="4196" Date="04/11/2012 15:09:05" Content="@wch Could you please add a note to NEWS and then merge? Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="419" Title="coord_distance.polar may calculate wrong distances">
    <Messages>
      <Message Id="0" ParentId="419" UserId="86978" Date="02/29/2012 18:55:05" Content="I wanted to put this issue in the tracker before it's forgotten,  even though the problem isn't entirely clear to me.&#xD;&#xA;&#xD;&#xA;See this thread,  in particular the 5th message: http://groups.google.com/group/ggplot2/browse_thread/thread/6fca486d4e0f20bc&#xD;&#xA;" />
      <Message Id="4273103" ParentId="419" UserId="227097" Date="03/01/2012 23:38:47" Content="Actually it simply calculates the distance between two point.&#xD;&#xA;Maybe we need consider the curvature etc.&#xD;&#xA;I think there should be a known good algorithm for this." />
      <Message Id="4981248" ParentId="419" UserId="86978" Date="04/05/2012 17:20:41" Content="I think I re-submitted the same issue in #449,  so I'm closing this one." />
    </Messages>
  </Topic>
  <Topic Id="420" Title="coord_trans() sometimes has problems with geom_area and geom_bar">
    <Messages>
      <Message Id="0" ParentId="420" UserId="86978" Date="02/29/2012 21:39:09" Content="I was taking a look at #257,  and experimenting with `coord_trans(y=&quot;log10&quot;)` instead of using `scale_y_log10()`. But it doesn't seem to work with some geoms and some transform functions.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(group=rep(LETTERS[ 1:4 ],  each=3), &#xD;&#xA;                  x=rep(1:3, 4), &#xD;&#xA;                  y=rep(10^(1:3), 4))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y,  fill=group))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# OK: area + sqrt&#xD;&#xA;p + geom_area() + coord_trans(y=&quot;sqrt&quot;)&#xD;&#xA;&#xD;&#xA;# error: area + log10&#xD;&#xA;p + geom_area() + coord_trans(y=&quot;log10&quot;)&#xD;&#xA;&#xD;&#xA;# error: bar + sqrt&#xD;&#xA;p + geom_bar() + coord_trans(y=&quot;sqrt&quot;)&#xD;&#xA;&#xD;&#xA;# error: bar + log10&#xD;&#xA;p + geom_bar() + coord_trans(y=&quot;log10&quot;)&#xD;&#xA;&#xD;&#xA;# OK: point + sqrt&#xD;&#xA;p + geom_point() + coord_trans(y=&quot;sqrt&quot;) &#xD;&#xA;&#xD;&#xA;# OK: point + log10&#xD;&#xA;p + geom_point() + coord_trans(y=&quot;log10&quot;) &#xD;&#xA;```" />
      <Message Id="4247826" ParentId="420" UserId="4196" Date="02/29/2012 22:04:17" Content="Well anything that has a baseline of 0 is going to have problems with log transforms..." />
      <Message Id="4248187" ParentId="420" UserId="86978" Date="02/29/2012 22:27:07" Content="Oh,  right. And it looks like the geom_bar cases don't work because of the continuous x axis. I guess everything works as expected,  then." />
    </Messages>
  </Topic>
  <Topic Id="421" Title="coord_polar doesn't work when y limits clip high data">
    <Messages>
      <Message Id="0" ParentId="421" UserId="86978" Date="02/29/2012 23:10:49" Content="When you set the y limits,  it throws an error when high data is clipped. The error doesn't happen when low data is clipped,  though.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=rep(1:5), &#xD;&#xA;                  y=c(1, 2, 10, 3, 4))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_line()&#xD;&#xA;&#xD;&#xA;# OK: polar + automatic range&#xD;&#xA;p + coord_polar()&#xD;&#xA;&#xD;&#xA;# OK: polar + manual range that includes all data&#xD;&#xA;p + coord_polar() + ylim(0, 11)&#xD;&#xA;&#xD;&#xA;# bad: polar + manual range that clips high data&#xD;&#xA;p + coord_polar() + ylim(0, 9)&#xD;&#xA;#Error in data$y[ data$y == -Inf ] &lt;- range$y.range[ 1 ] : &#xD;&#xA;#  replacement has length zero&#xD;&#xA;&#xD;&#xA;# OK: polar + manual range that clips low data&#xD;&#xA;p + coord_polar() + ylim(3, 11)&#xD;&#xA;&#xD;&#xA;# OK: not polar + manual range that clips high data&#xD;&#xA;p + ylim(0, 9)&#xD;&#xA;&#xD;&#xA;# OK: not polar + manual range that clips low data&#xD;&#xA;p + ylim(3, 11)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It's OK when using geom_point instead of geom_line:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_point() + coord_polar() + ylim(0, 9)&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="4273534" ParentId="421" UserId="227097" Date="03/01/2012 23:48:07" Content="This is because:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; x &lt;- c(1,  NA,  2)&#xD;&#xA;&gt; x[ x == Inf ]&#xD;&#xA;[ 1 ] NA&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;test for infinity in `coord_munch` is incorrect,  which is easy to be fixed." />
      <Message Id="4527547" ParentId="421" UserId="86978" Date="03/15/2012 19:57:15" Content="Actually,  I think the problem was that in `range`,  there was `theta.range` and `r.range`,  but no `x.range` or `y.range`." />
    </Messages>
  </Topic>
  <Topic Id="422" Title="coord_polar: NA shows up in guide for theta">
    <Messages>
      <Message Id="0" ParentId="422" UserId="86978" Date="02/29/2012 23:13:32" Content="This happens when x/theta is continuous:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(123)&#xD;&#xA;dat &lt;- data.frame(x=1:12,  y=1:12)&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_line()&#xD;&#xA;&#xD;&#xA;p + coord_polar()&#xD;&#xA;```" />
      <Message Id="4273203" ParentId="422" UserId="227097" Date="03/01/2012 23:40:53" Content="Probably this will be fixed by rewriting of grid and positional guides." />
      <Message Id="5002524" ParentId="422" UserId="86978" Date="04/06/2012 21:09:05" Content="&#xD;&#xA;&#xD;&#xA;I think the problem is that `scale_breaks.continuous` uses `censor()` on the breaks,  and this can return a vector with `NA`.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;debug at ggplot2/R/scale-.r#284: breaks &lt;- censor(scale$trans$trans(breaks),  scale_dimension(scale))&#xD;&#xA;Browse[ 3 ]&gt; breaks&#xD;&#xA;[ 1 ]  0  2  4  6  8 10 12&#xD;&#xA;debug at ggplot2/R/scale-.r#284: breaks &lt;- censor(scale$trans$trans(breaks),  scale_dimension(scale))&#xD;&#xA;Browse[ 3 ]&gt; n&#xD;&#xA;Browse[ 3 ]&gt; breaks&#xD;&#xA;[ 1 ] NA  2  4  6  8 10 12&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I tried replacing `censor` with `discard,  but that causes some tests to fail; it looks like the `NA` is expected from `scale_breaks`.&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="423" Title="geom_rect problem with negative numbers">
    <Messages>
      <Message Id="0" ParentId="423" UserId="1490131" Date="03/01/2012 22:20:27" Content="Trying to create shaded regions using geom_rect as a layer on top of a line plot generates an error if the data spans a non-positive range. Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;shade &lt;- data.frame(x1 = c(0,  5),  x2 = c(5,  10),  y = c(&quot;A&quot;,  &quot;B&quot;))&#xD;&#xA;qplot(0:10,  rnorm(11),  geom=&quot;line&quot;) + &#xD;&#xA;  geom_rect(mapping = aes(xmin = x1,  xmax = x2,  ymin = -1,  ymax = 1,  fill=y),  data = shade)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Produces:&#xD;&#xA;&#xD;&#xA;    Error in data.frame(xmin = c(0,  5),  xmax = c(5,  10),  ymin = -1,  ymax = 1,   : &#xD;&#xA;      arguments imply differing number of rows: 2,  1,  11&#xD;&#xA;&#xD;&#xA;Modifying the range of the data to span positive numbers,  e.g.,  1:10,  results in the correct plot showing." />
      <Message Id="4273872" ParentId="423" UserId="227097" Date="03/01/2012 23:53:34" Content="Try this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(0:10,  rnorm(11),  geom=&quot;line&quot;) + &#xD;&#xA;  geom_rect(mapping = aes(x = NULL,  y = NULL,  xmin = x1,  xmax = x2,  ymin = -1,  ymax = 1,  fill=y),  data = shade)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Basically you need to *erase* the unnecessary aes by `x = NULL` etc.&#xD;&#xA;Maybe,  new function `aes_asis()` that automatically ignore the existing aes will be useful.&#xD;&#xA;But I'm not sure if this is possible under current structure.&#xD;&#xA;&#xD;&#xA;&gt; Modifying the range of the data to span positive numbers,  e.g.,  1:10,  results in the correct plot showing.&#xD;&#xA;&#xD;&#xA;Could you please provide an example for this?" />
      <Message Id="4289104" ParentId="423" UserId="4196" Date="03/02/2012 16:37:17" Content="As Koshke pointed out,  you're using aesthetics incorrectly - this isn't a bug in geom_rect." />
    </Messages>
  </Topic>
  <Topic Id="424" Title="initFields in R 2.14">
    <Messages>
      <Message Id="0" ParentId="424" UserId="510776" Date="03/02/2012 20:44:02" Content="`library(ggplot2)`&#xD;&#xA;`g &lt;-ggplot(data=data.frame(a=1:2))`&#xD;&#xA;&#xD;&#xA;yields the error &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt;Error in initFields(scales = scales) : &#xD;&#xA;  could not find function &quot;initRefFields&quot;&#xD;&#xA;Calls: ggplot ... initialize -&gt; initialize -&gt; &lt;Anonymous&gt; -&gt; initFields&#xD;&#xA;&#xD;&#xA;on R/OS version: &#xD;&#xA;&#xD;&#xA;&gt;platform       x86_64-apple-darwin9.8.0     &#xD;&#xA;arch           x86_64                       &#xD;&#xA;os             darwin9.8.0                  &#xD;&#xA;system         x86_64,  darwin9.8.0          &#xD;&#xA;status                                      &#xD;&#xA;major          2                            &#xD;&#xA;minor          14.0                         &#xD;&#xA;year           2011                         &#xD;&#xA;month          10                           &#xD;&#xA;day            31                           &#xD;&#xA;svn rev        57496                        &#xD;&#xA;language       R                            &#xD;&#xA;version.string R version 2.14.0 (2011-10-31)&#xD;&#xA;" />
      <Message Id="4293695" ParentId="424" UserId="510776" Date="03/02/2012 20:45:56" Content="Using ggplot2 0.9 downloaded from CRAN this morning&#xD;&#xA;&#xD;&#xA;&gt;Package:            ggplot2&#xD;&#xA;Type:               Package&#xD;&#xA;Title:              An implementation of the Grammar of Graphics&#xD;&#xA;Version:            0.9.0&#xD;&#xA;Author:             Hadley Wickham &lt;h.wickham@gmail.com&gt;&#xD;&#xA;Maintainer:         Hadley Wickham &lt;h.wickham@gmail.com&gt;&#xD;&#xA;Description:        An implementation of the grammar of graphics in R. It combines the advantages of both base and lattice graphics:&#xD;&#xA;                    conditioning and shared axes are handled automatically,  and you can still build up a plot step by step from multiple data&#xD;&#xA;                    sources. It also implements a sophisticated multidimensional conditioning system and a consistent interface to map data to&#xD;&#xA;                    aesthetic attributes. See the ggplot2 website for more information,  documentation and examples.&#xD;&#xA;Depends:            R (&gt;= 2.14),  stats,  methods&#xD;&#xA;Imports:            plyr (&gt;= 1.0),  digest,  grid,  reshape2,  scales,  memoise,  proto,  MASS&#xD;&#xA;Suggests:           quantreg,  Hmisc,  mapproj,  maps,  hexbin,  gpclib,  maptools,  multcomp,  nlme&#xD;&#xA;Extends:            sp&#xD;&#xA;License:            GPL-2&#xD;&#xA;URL:                http://had.co.nz/ggplot2/&#xD;&#xA;" />
      <Message Id="4293750" ParentId="424" UserId="86978" Date="03/02/2012 20:48:23" Content="This doesn't throw any errors when I try it. Are you loading any other packages first? And are your other packages up to date with `update.packages()`?" />
      <Message Id="4293890" ParentId="424" UserId="463252" Date="03/02/2012 20:55:54" Content="`ggplot2` 0.9 seems to actually require R 2.14.1; it does not run in 2.14.0." />
      <Message Id="4293965" ParentId="424" UserId="510776" Date="03/02/2012 21:00:39" Content="Upgrade to 2.14.2 fixes this issue.&#xD;&#xA;&#xD;&#xA;It seems the description file should read&#xD;&#xA;&#xD;&#xA;&gt;Depends: R(&gt;=2.14.1)&#xD;&#xA;&#xD;&#xA;(Unless specifying the minor version to subdecimal is bad form.)" />
      <Message Id="4685142" ParentId="424" UserId="1434576" Date="03/25/2012 21:54:45" Content="Found that updating ggplot2 to 0.9 and R to v.14.2 still does not work. Any hint? there goes session info: &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.14.2 (2012-02-29)&#xD;&#xA;Platform: x86_64-pc-mingw32/x64 (64-bit)&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] plyr_1.7.1    ggplot2_0.9.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.14.0            MASS_7.3-16       &#xD;&#xA;[ 6 ] memoise_0.1        munsell_0.3        proto_0.3-9.2      RColorBrewer_1.0-5    reshape2_1.2.1    &#xD;&#xA;[ 11 ] scales_0.2.0       stringr_0.6        tools_2.14.0 &#xD;&#xA;" />
      <Message Id="4697896" ParentId="424" UserId="463252" Date="03/26/2012 16:28:34" Content="Something didn't seem to work with your upgrade; the base packages are still at 2.14.0 (see,  for example,  the attached tools package). When you upgrade,  you should get a newer version of all the base packages as well. I'm not sure what would cause the mismatch. A standard install of R 2.14.2 should just work." />
      <Message Id="5068596" ParentId="424" UserId="4196" Date="04/11/2012 13:27:28" Content="Closing because it looks like an installation issue." />
    </Messages>
  </Topic>
  <Topic Id="425" Title="Fix examples in geom_text">
    <Messages>
      <Message Id="0" ParentId="425" UserId="86978" Date="03/04/2012 18:10:56" Content="In the first changed example,  using `aes()` made it overplot the same text many times. I also changed the data frame to `NULL`.&#xD;&#xA;&#xD;&#xA;In the second example,  I changed the documentation to reflect the code. The code uses `family`,  not `fontfamily`. However,  this might actually be a bug -- in NEWS,  it says that it uses `fontfamily`. @kohske,  is it a bug in the documentation,  or in the code?" />
      <Message Id="4589897" ParentId="425" UserId="227097" Date="03/20/2012 06:44:05" Content="Now the name of aes is `family` and it is bind to `fontfamily` of `gpar` (like `colour` in aes and `col` in gpar).&#xD;&#xA;This is because `theme_text` uses `family`.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="426" Title="geom_hline: inherit.aes is always FALSE">
    <Messages>
      <Message Id="0" ParentId="426" UserId="86978" Date="03/04/2012 23:41:38" Content="For `geom_hline`,  `vline`,  and `abline`,  `inherit.aes` is always FALSE. I can see an advantage: when drawing data from a different data frame,  it won't attempt to map possibly nonexistent variables to `x` and `y`. However,  there are a few drawbacks:&#xD;&#xA;&#xD;&#xA;* Behavior is inconsistent with other geoms.&#xD;&#xA;* Aesthetics such as `colour` and `yintercept` can't be inherited and must be respecified for the geom. This is especially strange if the values are drawn from the original data frame.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;mtcar_means &lt;- ddply(mtcars,  .(cyl),  summarise,  mpg = mean(mpg))&#xD;&#xA;# cyl      mpg&#xD;&#xA;#   4 26.66364&#xD;&#xA;#   6 19.74286&#xD;&#xA;#   8 15.10000&#xD;&#xA;&#xD;&#xA;# All black lines&#xD;&#xA;ggplot(mtcars,  aes(x=disp,  y=mpg,  colour=factor(cyl))) + geom_point() +&#xD;&#xA;  geom_hline(aes(yintercept=mpg),  data=mtcar_means)&#xD;&#xA;&#xD;&#xA;# Need to respecify mapping to get colored lines&#xD;&#xA;ggplot(mtcars,  aes(x=disp,  y=mpg,  colour=factor(cyl))) + geom_point() +&#xD;&#xA;  geom_hline(aes(yintercept=mpg,  colour=factor(cyl)),  data=mtcar_means)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It appears impossible to set `inherit.aes=TRUE`. I think this is because the value is hard-coded in the `$new` functions for each geom. If it is indeed desired to have them _not_ inherit by default,  I think a better way is to set the default value `inherit.aes=FALSE`,  instead of hard-coding it.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Can't set inherit.aes=TRUE&#xD;&#xA;ggplot(mtcars,  aes(x=disp,  y=mpg,  colour=factor(cyl))) + geom_point() +&#xD;&#xA;  geom_hline(aes(yintercept=mpg),  data=mtcar_means,  inherit.aes=TRUE)&#xD;&#xA;# Error in get(x,  envir = this,  inherits = inh)(this,  ...) :&#xD;&#xA;#   formal argument &quot;inherit.aes&quot; matched by multiple actual arguments&#xD;&#xA;```" />
      <Message Id="4314962" ParentId="426" UserId="4196" Date="03/05/2012 00:24:51" Content="I think the best solution is to split `geom_hline` into `geom_hline` for when you want to map the position of the line to a variable in your data and `annotate_hline` for when you have a vector of positions." />
      <Message Id="4329941" ParentId="426" UserId="86978" Date="03/05/2012 19:34:19" Content="Could we just use `annotate` to do this? I tried running this code,  but it doesn't work:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(x=disp,  y=mpg,  colour=factor(cyl))) + geom_point() +&#xD;&#xA;  annotate(&quot;hline&quot;,  yintercept=20)&#xD;&#xA;# Error in is.unit(y1) : object 'yend' not found&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think it has something to do with `GeomHline$new` not getting called when you use `annotate()`." />
      <Message Id="4330219" ParentId="426" UserId="4196" Date="03/05/2012 19:47:56" Content="Yes,  but I think it needs some re-writing of the `geom_hline` code because it tries to automatically figure out if you want a annotation or a data-based geom." />
      <Message Id="24419220" ParentId="426" UserId="463252" Date="09/13/2013 19:34:16" Content="Here is another issue which comes about because `inherit.aes` is fixed to `FALSE`. If `xintercept` is specified as a function (or character name of a function),  then the mapping _must_ be respecified so that the summary function can find the data.&#xD;&#xA;&#xD;&#xA;Consider:&#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(x = wt,  y = mpg)) + geom_point()&#xD;&#xA;&#xD;&#xA;p + geom_vline(xintercept=3)&#xD;&#xA;p + geom_vline(xintercept=mean)&#xD;&#xA;p + geom_vline(xintercept=mean,  inherit.aes=TRUE)&#xD;&#xA;p + geom_vline(xintercept=mean,  aes(x=wt))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The first works as expected. The second gives&#xD;&#xA;```&#xD;&#xA;&gt; p + geom_vline(xintercept=mean)&#xD;&#xA;Warning messages:&#xD;&#xA;1: In mean.default(data[ [ var ] ]) :&#xD;&#xA;  argument is not numeric or logical: returning NA&#xD;&#xA;2: Removed 1 rows containing missing values (geom_segment). &#xD;&#xA;```&#xD;&#xA;The third gives&#xD;&#xA;```&#xD;&#xA;&gt; p + geom_vline(xintercept=mean,  inherit.aes=TRUE)&#xD;&#xA;Error in get(x,  envir = this,  inherits = inh)(this,  ...) : &#xD;&#xA;  formal argument &quot;inherit.aes&quot; matched by multiple actual arguments&#xD;&#xA;```&#xD;&#xA;The forth works.&#xD;&#xA;&#xD;&#xA;The pattern is identical for `geom_hline` (substituting `yintercept` for `xintercept`):&#xD;&#xA;```&#xD;&#xA;p + geom_hline(yintercept=23)&#xD;&#xA;p + geom_hline(yintercept=mean)&#xD;&#xA;p + geom_hline(yintercept=mean,  inherit.aes=TRUE)&#xD;&#xA;p + geom_hline(yintercept=mean,  aes(y=mpg))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It is worth noting that using `stat_vine` or `stat_hline` instead of the `geom_` versions work as expected in all cases because the `stat_` versions do not have `inherit.aes` set to `FALSE`&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# all work without error&#xD;&#xA;p + stat_vline(xintercept=3)&#xD;&#xA;p + stat_vline(xintercept=mean)&#xD;&#xA;p + stat_vline(xintercept=mean,  inherit.aes=TRUE)&#xD;&#xA;p + stat_vline(xintercept=mean,  aes(x=wt))&#xD;&#xA;&#xD;&#xA;p + stat_hline(yintercept=23)&#xD;&#xA;p + stat_hline(yintercept=mean)&#xD;&#xA;p + stat_hline(yintercept=mean,  inherit.aes=TRUE)&#xD;&#xA;p + stat_hline(yintercept=mean,  aes(y=mpg))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This comment was inspired by the StackOverflow question http://stackoverflow.com/q/18786161/892313&#xD;&#xA;" />
      <Message Id="35939663" ParentId="426" UserId="4196" Date="02/24/2014 21:18:58" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="427" Title="incorrect labels in the legend for scale_color_manual()">
    <Messages>
      <Message Id="0" ParentId="427" UserId="348591" Date="03/06/2012 13:57:28" Content="Consider the following example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test.df &lt;- data.frame( a = rnorm(100),  b = rnorm(100),  c = sample( c('1', '2', '3'),  100,  replace = TRUE ) )&#xD;&#xA;ggplot( test.df ) + geom_text( aes( x = a,  y = b,  label = c,  color = c ) ) + scale_color_manual(&#xD;&#xA;        values = c( &quot;1&quot; = 'red',  &quot;2&quot; = 'green',  &quot;3&quot; ='blue',  &quot;4&quot; = 'orange' ), &#xD;&#xA;        labels = c(  &quot;4&quot; = '4',  &quot;2&quot; = '2',  &quot;1&quot; = '1',   &quot;3&quot; = '3' ) )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It's expected that in the legend you would see 1(red),  2(green),  3(blue).&#xD;&#xA;Instead,  labels are assigned to the colors by their order in which they are listed in labels: 4(red) 2(green) 1(blue)&#xD;&#xA;&#xD;&#xA;What is worse,  in this example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test.df &lt;- data.frame( a = rnorm(100),  b = rnorm(100),  c = sample( c('1', '2', '4'),  100,  replace = TRUE ) )&#xD;&#xA;ggplot( test.df ) + geom_text( aes( x = a,  y = b,  label = c,  color = c ) ) + scale_color_manual(&#xD;&#xA;        values = c( &quot;1&quot; = 'red',  &quot;2&quot; = 'green',  &quot;3&quot; ='blue',  &quot;4&quot; = 'orange' ), &#xD;&#xA;        labels = c(  &quot;1&quot; = '1',  &quot;2&quot; = '2',  &quot;3&quot; = '3',   &quot;4&quot; = '4' ) )&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;the order of the values and the labels is perfectly matched,  but since value 3 is missing in the data,  instead of&#xD;&#xA;1(red),  2(green),  4(orange) we have 1(red),  2(green),  3(orange).&#xD;&#xA;&#xD;&#xA;ggplot2 0.9,  R2.14.1" />
      <Message Id="5091826" ParentId="427" UserId="4196" Date="04/12/2012 14:12:49" Content="Regardless of the other issues,  do you think the legend should include all 4 values?" />
      <Message Id="5092503" ParentId="427" UserId="4196" Date="04/12/2012 14:43:11" Content="In the second example,  the only problem is really the labelling of the legend,  right?  You asked that 4 be mapped to orange,  and that's what you got." />
      <Message Id="5092611" ParentId="427" UserId="4196" Date="04/12/2012 14:48:21" Content="And the real issue is that the names of labels are not used have no impact - labels are matched purely on position.  Did using names ever work?" />
      <Message Id="5094122" ParentId="427" UserId="348591" Date="04/12/2012 15:53:56" Content="1. In my usecases it's fine to hide those labels that never appear in the data (like it is now),  but it would be cool to have them shown as an option. :)&#xD;&#xA;2. Yes,  the matching of the colors in the plot itself is ok.&#xD;&#xA;3. I'm not sure anymore and have no system to test,  but I think in 0.8.x series the legend was working correctly." />
    </Messages>
  </Topic>
  <Topic Id="428" Title="Add group option to scale_z_date/datetime">
    <Messages>
      <Message Id="0" ParentId="428" UserId="1266331" Date="03/07/2012 23:06:52" Content="One may want to group objects by soem time increment when using scale_z_date/datetime for either z=x or z=y axes.  Syntax such as the following would allow one to both indicate you want to group by time and by what time interval you want the grouping to occur.&#xD;&#xA;&#xD;&#xA;qplot( time ,  y ,  data = d ,  geom = &quot;boxplot&quot; ,  fill = z ,  group = time ) + scale_x_date( group = &quot;1 day&quot; )&#xD;&#xA;&#xD;&#xA;The above would say that in data set d,  you want boxplots for each day and those boxplots should be split by the levels of variable z.&#xD;&#xA;&#xD;&#xA;This would be a nice enhancement." />
      <Message Id="4589872" ParentId="428" UserId="227097" Date="03/20/2012 06:39:42" Content="Could you please provide a complete example data (and a rough picture of the plot you want,  if possible)?" />
      <Message Id="5071009" ParentId="428" UserId="4196" Date="04/11/2012 15:10:25" Content="I think this is already easy with lubridate's `round_date` function." />
    </Messages>
  </Topic>
  <Topic Id="429" Title="Feature: Dotplot stacking">
    <Messages>
      <Message Id="0" ParentId="429" UserId="86978" Date="03/08/2012 06:11:08" Content="This implements stacking for geom_dotplot,  using `stackgroups=TRUE`." />
    </Messages>
  </Topic>
  <Topic Id="430" Title="Specifying breaks outside the data range fails when using a coord_ function">
    <Messages>
      <Message Id="0" ParentId="430" UserId="18445" Date="03/08/2012 10:06:40" Content="    qplot(runif(10),  runif(10)) + scale_x_continuous(breaks=NULL)&#xD;&#xA;    qplot(runif(10),  runif(10)) + scale_x_continuous(breaks=NULL) + coord_map()&#xD;&#xA;&#xD;&#xA;**Error in unit(x,  default.units) : 'x' and 'units' must have length &gt; 0**" />
      <Message Id="4388754" ParentId="430" UserId="18445" Date="03/08/2012 10:10:38" Content="Actually `breaks = something` fails when `something` is outside of the data range and coord_map() is used&#xD;&#xA;&#xD;&#xA;	qplot(runif(10),  runif(10))&#xD;&#xA;	qplot(runif(10),  runif(10)) + scale_x_continuous(breaks=0.5)&#xD;&#xA;	qplot(runif(10),  runif(10)) + coord_map()&#xD;&#xA;	qplot(runif(10),  runif(10)) + scale_x_continuous(breaks=0.5) + coord_map()&#xD;&#xA;&#xD;&#xA;	qplot(runif(10),  runif(10)) + scale_x_continuous(breaks=10)&#xD;&#xA;	qplot(runif(10),  runif(10)) + scale_x_continuous(breaks=10) + coord_map()&#xD;&#xA;" />
      <Message Id="4405109" ParentId="430" UserId="86978" Date="03/08/2012 23:10:20" Content="This same happens for `coord_cartesian` as well; the breaks won't go outside of the data range.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=1:5,  y=1:5)&#xD;&#xA;  &#xD;&#xA;ggplot(dat,  aes(x, y)) + geom_point() +&#xD;&#xA;  scale_y_continuous(breaks=seq(0, 10, .5)) +&#xD;&#xA;  coord_cartesian(ylim=c(0, 10))&#xD;&#xA;```" />
      <Message Id="4589856" ParentId="430" UserId="227097" Date="03/20/2012 06:37:30" Content="Just a note,  here is a workaround:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat,  aes(x, y)) + geom_point() +&#xD;&#xA;  scale_y_continuous(breaks=seq(0, 10, .5),  limits = c(0,  10)) +&#xD;&#xA;  coord_cartesian(ylim=c(0, 10))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;So this is a general problem in calculating the ranges for breaks of position guide.&#xD;&#xA;Now,  the range is based on the data range. So if coord is wider than data,  you need to tell the scales the range of coord.&#xD;&#xA;This can be fixed.&#xD;&#xA;@jiho,  could you please change the title of issue to easily recall the problem by the title?&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="4591013" ParentId="430" UserId="18445" Date="03/20/2012 08:55:35" Content="Done. Do you like the title?" />
      <Message Id="4594646" ParentId="430" UserId="227097" Date="03/20/2012 13:00:05" Content="@jiho thanks." />
      <Message Id="5252372" ParentId="430" UserId="86978" Date="04/20/2012 20:25:12" Content="After some other fixes,  it seems there's a problem specific to `coord_map()`. It looks like at least one break has to be within the data range.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=seq(0.1,  0.9,  by=0.1),  y=seq(0.1,  0.9,  by=0.1))&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_point()&#xD;&#xA;&#xD;&#xA;# Error&#xD;&#xA;p + scale_x_continuous(breaks=NULL) + coord_map()&#xD;&#xA;p + scale_x_continuous(breaks=1:10) + coord_map()&#xD;&#xA;p + scale_x_continuous(breaks=c(0, 10)) + coord_map()&#xD;&#xA;&#xD;&#xA;# OK: at least one break is within range&#xD;&#xA;p + scale_x_continuous(breaks=c(0,  0.2,  10)) + coord_map()&#xD;&#xA;p + scale_x_continuous(breaks=0.9) + coord_map()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Other coords are OK&#xD;&#xA;p + scale_x_continuous(breaks=NULL) + coord_trans()&#xD;&#xA;p + scale_x_continuous(breaks=NULL) + coord_cartesian()&#xD;&#xA;p + scale_x_continuous(breaks=1:10) + coord_cartesian()&#xD;&#xA;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="431" Title="geom_errorbar does not work properly with position_dodge in 0.9.0">
    <Messages>
      <Message Id="0" ParentId="431" UserId="284491" Date="03/08/2012 15:50:17" Content="A plot I previously created in ggplot2-0.8.9 no longer dodges the error bars despite properly dodging geom_line and geom_point. Here's the command I used. I'm running R 2.14.1 on Mac OS X 10.7. Downgrading to 0.8.9 fixed this problem. The result is a plot where the points and lines are dodged,  but the error bars are are overlaid.&#xD;&#xA;&#xD;&#xA;limits &lt;- aes(ymax=mean + std.error,  ymin=mean - std.error,  linetype=NULL)&#xD;&#xA;base_size=11&#xD;&#xA;&#xD;&#xA;pos &lt;- position_dodge(width=0.2)&#xD;&#xA;&#xD;&#xA;Totalplot &lt;- ggplot(allTotal,  aes(x=time,  y=mean,  linetype=group)) + theme_bw(base_size=base_size) +&#xD;&#xA;    geom_line(position=pos,  size=1.1) + &#xD;&#xA;    geom_errorbar(limits,  width=0.2,  position=pos) + &#xD;&#xA;    geom_point(position=pos,  size=2.5) +&#xD;&#xA;    facet_wrap(~Disorder) +&#xD;&#xA;    ylab(paste(&quot;Mean number of total PD symptoms&quot;)) + xlab(&quot;Time since enrollment (years)&quot;) +&#xD;&#xA;    opts(legend.key.size=unit(2,  &quot;lines&quot;),  axis.ticks.margin = unit(0.25,  &quot;lines&quot;),  plot.margin = unit(c(1,  1,  0.5,  0.5),  &quot;lines&quot;)) +&#xD;&#xA;    opts(panel.margin = unit(0.7,  &quot;lines&quot;)) +&#xD;&#xA;    scale_x_continuous(breaks=c(0, 1, 2, 3)) +&#xD;&#xA;    scale_linetype(&quot;Latent\ntrajectory&quot;) +&#xD;&#xA;    opts(axis.title.x = theme_text(size = base_size,  vjust = 0.0)) +&#xD;&#xA;    opts(axis.title.y = theme_text(size = base_size,  hjust = 0.5,  vjust=0.3,  angle=90)) +&#xD;&#xA;    opts(legend.title = theme_text(size = base_size * 0.8,  hjust = 0))&#xD;&#xA;" />
      <Message Id="4397563" ParentId="431" UserId="86978" Date="03/08/2012 18:09:59" Content="It's hard to verify your issue without example data... &#xD;&#xA;&#xD;&#xA;But this works for me:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;dat &lt;- data.frame(x=1:2,  y=1:6,  g=LETTERS[ 1:3 ],  e=.5)&#xD;&#xA;pos &lt;- position_dodge(.2)&#xD;&#xA;lim &lt;- aes(ymin=y-e,  ymax=y+e)&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  colour=g)) + geom_point(position=pos) + &#xD;&#xA;  geom_errorbar(lim,  position=pos,  width=.1)&#xD;&#xA;```" />
      <Message Id="4419607" ParentId="431" UserId="284491" Date="03/09/2012 16:46:27" Content="Thanks for the follow-up. I should have included a reproducible example... When I tried to create a simple one extending the example you provided,  I couldn't get the problem to show-up. But here is a dput of the actual data (which is pretty simple),  along with a pared down version of the ggplot call that creates the failure to dodge error bars.&#xD;&#xA;&#xD;&#xA;My sense is that it has to do with faceting and the order of the data. Apparently this issue is more complicated than I realized,  though. On 0.9.0,  the code below does not dodge the error bars. But under 0.8.9,  it actually dodges the error bars incorrectly for the right-hand panel. If I sort the data by the faceting factor,  then linetype factor,  the dodging is correct.&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(grid)&#xD;&#xA;df &lt;- structure(list(mean = c(18.5229357798165,  14.8888888888889,  0.363636363636364,  &#xD;&#xA;10.4495412844037,  0.555555555555556,  0.454545454545455,  9.91743119266055,  &#xD;&#xA;0,  3.54545454545455,  1.31506849315068,  12,  4.1,  1.12328767123288,  &#xD;&#xA;8.1578947368421,  0,  2.78082191780822,  6.97368421052632,  0),  std.error = c(1.46441516614787,  &#xD;&#xA;3.80585967965643,  0.152120004824377,  1.07669583017945,  0.293972367896066,  &#xD;&#xA;0.281671516087812,  1.05135936473872,  0,  1.23850082661283,  0.150944152292836,  &#xD;&#xA;0.920757928874163,  0.504424865014052,  0.171111067785861,  1.31493571163454,  &#xD;&#xA;0,  0.345798094888679,  1.31491436048081,  0),  group = structure(c(1L,  &#xD;&#xA;3L,  2L,  1L,  3L,  2L,  1L,  3L,  2L,  1L,  2L,  3L,  1L,  2L,  3L,  1L,  2L,  &#xD;&#xA;3L),  .Label = c(&quot;1&quot;,  &quot;2&quot;,  &quot;3&quot;),  class = &quot;factor&quot;),  Disorder = structure(c(2L,  &#xD;&#xA;2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  &#xD;&#xA;1L),  .Label = c(&quot;NPD&quot;,  &quot;PPD&quot;),  class = &quot;factor&quot;),  time = c(0,  &#xD;&#xA;0,  0,  0.97,  0.97,  0.97,  2.77,  2.77,  2.77,  0,  0,  0,  0.97,  0.97,  &#xD;&#xA;0.97,  2.77,  2.77,  2.77)),  .Names = c(&quot;mean&quot;,  &quot;std.error&quot;,  &quot;group&quot;,  &#xD;&#xA;&quot;Disorder&quot;,  &quot;time&quot;),  class = &quot;data.frame&quot;,  row.names = c(NA,  &#xD;&#xA;18L))&#xD;&#xA;&#xD;&#xA;#if this command is not run in 0.8.9,  the error bar dodging below is out of order in the right panel&#xD;&#xA;#in 0.9.0,  ordering has no effect (error bars are not dodged at all)&#xD;&#xA;#df &lt;- df[ order(df$Disorder,  df$group),  ]&#xD;&#xA;&#xD;&#xA;limits &lt;- aes(ymax=mean + std.error,  ymin=mean - std.error,  linetype=NULL)&#xD;&#xA;pos &lt;- position_dodge(width=0.2)&#xD;&#xA;badplot &lt;- ggplot(df,  aes(x=time,  y=mean,  linetype=group)) + &#xD;&#xA;    geom_line(position=pos,  size=1.1) + &#xD;&#xA;    geom_errorbar(limits,  width=0.2,  position=pos,  show_guide=FALSE) + &#xD;&#xA;    geom_point(position=pos,  size=2.0) +&#xD;&#xA;    facet_wrap(~Disorder)    &#xD;&#xA;print(badplot)&#xD;&#xA;" />
      <Message Id="4421114" ParentId="431" UserId="463252" Date="03/09/2012 17:52:35" Content="It seems that the faceting variable is not being picked up as a grouping variable for the error bars where it is for the others. By explicitly setting the group to include it,  you get consistent positioning (Using values defined in the previous comment):&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(df,  aes(x=time,  y=mean,  linetype=group,  group=interaction(Disorder, group))) +&#xD;&#xA;geom_line(position=pos,  size=1.1) +&#xD;&#xA;geom_errorbar(limits,  width=0.2,  position=pos,  show_guide=FALSE) +&#xD;&#xA;geom_point(position=pos,  size=2.0) +&#xD;&#xA;facet_wrap(~Disorder)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I haven't looked further,  but hopefully this can help the next person." />
      <Message Id="4445467" ParentId="431" UserId="86978" Date="03/12/2012 04:28:04" Content="I'm pretty sure this isn't a bug -- the reason it stopped working for you is because a bug in 0.8.9 was fixed! That bug is also the reason why you had to order the data frame in a particular way. I recently wrote about this same bug on the mailing list: http://groups.google.com/group/ggplot2/browse_thread/thread/e8e44bd0aa4c3074&#xD;&#xA;&#xD;&#xA;Commit ac91fe4 is the one that changed the behavior.&#xD;&#xA;&#xD;&#xA;In your default aesthetic mapping,  you make `group` a grouping variable,  by mapping it to `linetype`. But in this line of code,  you unset the `linetype=group` mapping,  so `group` is **not** a grouping variable for the error bars:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;limits &lt;- aes(ymax=mean + std.error,  ymin=mean - std.error,  linetype=NULL)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Since the error bars aren't grouped on the `group` variable,  they won't be dodged.&#xD;&#xA;&#xD;&#xA;If you re-run the same code without setting `linetype=NULL`,  it works in 0.9.0:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Dodging works,  but with dashed and dotted error bars&#xD;&#xA;limits &lt;- aes(ymax=mean + std.error,  ymin=mean - std.error)&#xD;&#xA;pos &lt;- position_dodge(width=0.2)&#xD;&#xA;badplot &lt;- ggplot(df,  aes(x=time,  y=mean,  linetype=group)) + &#xD;&#xA;  geom_line(position=pos,  size=1.1) + &#xD;&#xA;  geom_errorbar(limits,  width=0.2,  position=pos,  show_guide=FALSE) + &#xD;&#xA;  geom_point(position=pos,  size=2.0) +&#xD;&#xA;  facet_wrap(~Disorder)&#xD;&#xA;print(badplot)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Of course,  you probably don't want the linetype of the error bars to be dotted and dashed like this. To make them all solid,  but still use `group` as a grouping var,  you can map `aes(...,  linetype=NULL,  group=group)`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Dodging works,  solid error bars&#xD;&#xA;limits &lt;- aes(ymax=mean + std.error,  ymin=mean - std.error,  linetype=NULL,  group=group)&#xD;&#xA;pos &lt;- position_dodge(width=0.2)&#xD;&#xA;badplot &lt;- ggplot(df,  aes(x=time,  y=mean,  linetype=group)) + &#xD;&#xA;  geom_line(position=pos,  size=1.1) + &#xD;&#xA;  geom_errorbar(limits,  width=0.2,  position=pos,  show_guide=FALSE) + &#xD;&#xA;  geom_point(position=pos,  size=2.0) +&#xD;&#xA;  facet_wrap(~Disorder)&#xD;&#xA;print(badplot)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Or in the *default* mapping you can map `group=group`,  then set `linetype=&quot;solid&quot;` for the error bars.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Dodging works,  solid error bars&#xD;&#xA;limits &lt;- aes(ymax=mean + std.error,  ymin=mean - std.error)&#xD;&#xA;pos &lt;- position_dodge(width=0.2)&#xD;&#xA;badplot &lt;- ggplot(df,  aes(x=time,  y=mean,  linetype=group,  group=group)) + &#xD;&#xA;  geom_line(position=pos,  size=1.1) + &#xD;&#xA;  geom_errorbar(limits,  width=0.2,  position=pos,  show_guide=FALSE,  linetype=&quot;solid&quot;) + &#xD;&#xA;  geom_point(position=pos,  size=2.0) +&#xD;&#xA;  facet_wrap(~Disorder)&#xD;&#xA;print(badplot)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="4458841" ParentId="431" UserId="463252" Date="03/12/2012 18:50:49" Content="Sorry for misdiagnosing the problem. I didn't notice the `linetype=NULL` in `limits`." />
      <Message Id="4473863" ParentId="431" UserId="284491" Date="03/13/2012 14:11:04" Content="Thanks,  Winston,  and Brian for the suggestions. I see what you mean that unsetting linetype for the error bars should turn off the dodge positioning,  so the undodged plot is quite sensible. Setting group and unsetting linetype in the mapping for the error bars works perfectly. I'll stick with this approach in the future." />
    </Messages>
  </Topic>
  <Topic Id="432" Title="Legend on top is displayed above plot title">
    <Messages>
      <Message Id="0" ParentId="432" UserId="1379175" Date="03/09/2012 08:18:24" Content="If a legend is specified to be displayed on top it is drawn above the plot title. &#xD;&#xA;&#xD;&#xA;  library(&quot;ggplot2&quot;)&#xD;&#xA;  library(&quot;scales&quot;)&#xD;&#xA;&#xD;&#xA;  qplot(mpg,  cyl,  data=mtcars,  geom=&quot;point&quot;,  colour=gear) + opts(title=&quot;Test Plot&quot;,  legend.position=&quot;top&quot;)&#xD;&#xA;&#xD;&#xA;Maybe this could be changed to the behaviour in the 0.8.x version were the legend was below the plot title" />
      <Message Id="4589814" ParentId="432" UserId="227097" Date="03/20/2012 06:29:09" Content="In 0.8.9 was the legend top of the title?&#xD;&#xA;And which is better,  top of title,  bottom of title,  or customizable?&#xD;&#xA;" />
      <Message Id="4681260" ParentId="432" UserId="1379175" Date="03/25/2012 12:24:01" Content="I think it would be better to have the legend below the title,  as it gives more detailed information as the title and should therefore be closer to the drawing area. &#xD;&#xA;&#xD;&#xA;But,  of course it is always nice if you can customize something :-)" />
      <Message Id="5071027" ParentId="432" UserId="4196" Date="04/11/2012 15:11:19" Content="Legend should be below the title.  At some point we should make the layout more flexible,  but I hope the next version of gtable will make that easier." />
      <Message Id="5123520" ParentId="432" UserId="4196" Date="04/13/2012 19:38:11" Content="@kohske Is this hard to fix?" />
      <Message Id="5127408" ParentId="432" UserId="227097" Date="04/14/2012 00:21:49" Content="easy. actually guide is not responsible,  plot_render is. I will fix in a day." />
    </Messages>
  </Topic>
  <Topic Id="433" Title="byte-compiling ggplot2 produces note about binding for &lt;&lt;-">
    <Messages>
      <Message Id="0" ParentId="433" UserId="1529504" Date="03/12/2012 16:09:37" Content="When I byte-compile ggplot2 on Windows,  the following message is displayed:&#xD;&#xA;Note: no visible binding for '&lt;&lt;-' assignment to 'scales'" />
      <Message Id="4456064" ParentId="433" UserId="4196" Date="03/12/2012 16:49:01" Content="That's a bug in the visible binding detection algorithm." />
      <Message Id="75757461" ParentId="433" UserId="39156" Date="02/24/2015 13:40:48" Content="Since the issue is closed,  does this mean this problem won't be fixed? The message is still there (in version 1.0.0 from 2014-05-20) -- and in my reports :-)." />
      <Message Id="75762444" ParentId="433" UserId="4196" Date="02/24/2015 14:12:47" Content="Correct" />
    </Messages>
  </Topic>
  <Topic Id="434" Title="Unexpected Ordering with fortify.SpatialPolygonsDataFrame">
    <Messages>
      <Message Id="0" ParentId="434" UserId="372456" Date="03/12/2012 19:26:58" Content="I have a SpatialPolygonsDataFrame in which the FIDs have been set to a specific column in the data.frame.&#xD;&#xA;&#xD;&#xA;fortify.SpatialPolygonsDataFrame is then not giving the result I expected; it seems to be reordering the features and&#xD;&#xA;giving them the wrong label; the 'id' column of the resulting ggplot data.frame doesn't match the region id of the original sp object.&#xD;&#xA;The reordering seems to happen in the split() or invert() commands of fortify.SpatialPolygonsDataFrame().&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;I have attached reproducible code,  with the expected spplot() results,  the unexpected results from fortify.SpatialPolygonsDataFrame(),  and&#xD;&#xA;how I fixed it by rewriting the fortify to be more like fortify.SpatialPolygons(),  and using the Feature IDs to name the ids and merge the data.frame attributes.&#xD;&#xA;&#xD;&#xA;It is entirely possible that I am using the region parameter of fortify() improperly,  I don't know.&#xD;&#xA;Does anyone know what is going wrong with fortify.SpatialPolygonsDataFrame() here,  or with how I am using it?&#xD;&#xA;&#xD;&#xA;Nicholas&#xD;&#xA;&#xD;&#xA;Nicholas Nagle, &#xD;&#xA;Dept. of Geography&#xD;&#xA;University of Tennessee&#xD;&#xA;307 Burchfiel Geography Bldg.&#xD;&#xA;Knoxville,  TN 37996&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;#################################################################&#xD;&#xA;download.file('http://graunt.bus.utk.edu/Files/boston_shp.Rdata', 'boston_shp.Rdata')&#xD;&#xA;load('boston_shp.Rdata')&#xD;&#xA;# boston_shp: the Harrison-Rubinfeld boston data,  attached to the 1970 tract boundaries&#xD;&#xA;# from the National Historical GIS &lt;http://www.nhgis.org&gt;&#xD;&#xA;&#xD;&#xA;# The Feature IDs are also the 'TRACT' columns&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Desired result...&#xD;&#xA;spplot(boston_shp, 'dis')&#xD;&#xA;&#xD;&#xA;####################&#xD;&#xA;# Does not work as expected&#xD;&#xA;boston.ggdf &lt;- fortify(boston_shp, region='TRACT')&#xD;&#xA;# Merge the ggplot data frame with the attributes attributes,  matching&#xD;&#xA;#   boston.ggdf$id to row.names(boston_shp@data)&#xD;&#xA;&#xD;&#xA;boston.ggdf &lt;- cbind(boston.ggdf,  boston_shp@data[ as.character(boston.ggdf$id),  ])&#xD;&#xA;&#xD;&#xA;boston.ggplot &lt;- ggplot(boston.ggdf,  aes(x=long,  y=lat,  group=group,  fill=dis))&#xD;&#xA;boston.ggplot+geom_polygon()+coord_equal()&#xD;&#xA;&#xD;&#xA;########################################&#xD;&#xA;# This does work as expected&#xD;&#xA;saferFortify.SPDF &lt;- function(model,  data,  region=NULL){ &#xD;&#xA; warning('Using FIDs as the id.  User should verify that Feature IDs are also the row.names of data.frame. See spChFIDs().')&#xD;&#xA; attr &lt;- as.data.frame(model)&#xD;&#xA; coords &lt;- ldply(model@polygons, fortify)&#xD;&#xA; coords &lt;- cbind(coords, attr[ as.character(coords$id),  ])&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;boston.ggdf &lt;- saferFortify.SPDF(boston_shp)&#xD;&#xA;boston.ggplot &lt;- ggplot(boston.ggdf,  aes(x=long,  y=lat,  group=group,  fill=dis))&#xD;&#xA;boston.ggplot+geom_polygon()+coord_equal()&#xD;&#xA;```" />
      <Message Id="4463294" ParentId="434" UserId="86978" Date="03/12/2012 22:29:35" Content="It'll be helpful if you edit your comment and mark the block of  code by adding lines with three backticks,  like this:&#xD;&#xA;&#xD;&#xA;    text here&#xD;&#xA;&#xD;&#xA;    ```&#xD;&#xA;    code is here&#xD;&#xA;    x &lt;- 1:3&#xD;&#xA;    ```    &#xD;&#xA;&#xD;&#xA;    text here&#xD;&#xA;&#xD;&#xA;**Update: I edited the original post to have these code block markers**" />
      <Message Id="6610126" ParentId="434" UserId="4196" Date="06/27/2012 17:39:18" Content="Some steps towards understanding the problem&#xA;&#xA;```R&#xA;&#xA;map &lt;- fortify(boston_shp,  region='TRACT')&#xA;&#xA;data &lt;- as.data.frame(boston_shp)&#xA;data$id &lt;- data$TRACT&#xA;qplot(as.numeric(TRACT),  dis,  data = data)&#xA;&#xA;both &lt;- join(map,  data,  by = &quot;id&quot;)&#xA;qplot(as.numeric(TRACT),  dis,  data = both)&#xA;&#xA;&#xA;ggplot(both,  aes(x=long,  y=lat,  group=group,  fill=dis)) + &#xA;  geom_polygon() + &#xA;  coord_equal()&#xA;```" />
      <Message Id="6611009" ParentId="434" UserId="4196" Date="06/27/2012 18:11:05" Content="```R&#xA;&#xA;# I really don't understand what's going on - the match between&#xA;# TRACT and dis seems ok&#xA;head(arrange(unique(both[ c(&quot;id&quot;,  &quot;dis&quot;) ]),  id))&#xA;head(arrange(data,  id)[ c(&quot;id&quot;,  &quot;dis&quot;) ])&#xA;&#xA;tail(arrange(unique(both[ c(&quot;id&quot;,  &quot;dis&quot;) ]),  id))&#xA;tail(arrange(data,  id)[ c(&quot;id&quot;,  &quot;dis&quot;) ])&#xA;&#xA;# And it's not a polygon drawing problem because points look fine&#xA;ggplot(both,  aes(x=long,  y=lat,  group=group,  colour = dis)) + &#xA;  geom_point()&#xA;&#xA;```" />
      <Message Id="6611113" ParentId="434" UserId="4196" Date="06/27/2012 18:15:14" Content="```&#xA;# This works&#xA;saferFortify.SPDF &lt;- function(model,  data,  region=NULL){ &#xA; warning('Using FIDs as the id.  User should verify that Feature IDs are also the row.names of data.frame. See spChFIDs().')&#xA; attr &lt;- as.data.frame(model)&#xA; coords &lt;- ldply(model@polygons, fortify)&#xA; coords &lt;- cbind(coords, attr[ as.character(coords$id),  ])&#xA; }&#xA;&#xA;both2 &lt;- saferFortify.SPDF(boston_shp)&#xA;# But the mapping between id and dis isn't any different?!&#xA;tail(arrange(unique(both2[ c(&quot;id&quot;,  &quot;dis&quot;) ]),  id))&#xA;head(arrange(unique(both2[ c(&quot;id&quot;,  &quot;dis&quot;) ]),  id))&#xA;&#xA;ggplot(both2,  aes(x=long,  y=lat,  group=group,  colour = dis)) + &#xA;  geom_point()&#xA;```" />
      <Message Id="6797773" ParentId="434" UserId="4196" Date="07/06/2012 05:51:22" Content="Charlotte says it's something to do with the difference in ordering between split and invert." />
      <Message Id="6810434" ParentId="434" UserId="25964" Date="07/06/2012 16:53:18" Content="A small test case:&#xA;&#xA;```{ R }&#xA;library(ggplot2)&#xA;library(sp)&#xA;&#xA;make_square &lt;- function(x = 0,  y = 0,  height = 1,  width = 1){ &#xA;  delx &lt;- width/2&#xA;  dely &lt;- height/2&#xA;  Polygon(matrix(c(x + delx,  x - delx, x - delx, x + delx, x + delx ,  &#xA;      y - dely, y - dely, y + dely, y + dely, y - dely),  ncol = 2))  &#xA; }&#xA;&#xA;make_hole &lt;- function(x = 0,  y = 0,  height = .5,  width = .5){ &#xA;  p &lt;- make_square(x = x,  y = y,  height = height,  width = width)&#xA;  p@hole &lt;- TRUE&#xA;  p&#xA; }&#xA;&#xA;fake_data &lt;- data.frame(ids = 1:5,  region = c(1, 1, 2, 3, 4))&#xA;rownames(fake_data) &lt;- 1:5&#xA;polys &lt;- list(Polygons(list(make_square(),  make_hole()),  1),  &#xA;              Polygons(list(make_square(1, 0),  make_square(2,  0)),  2), &#xA;              Polygons(list(make_square(1, 1)),  3), &#xA;              Polygons(list(make_square(0, 1)),  4), &#xA;              Polygons(list(make_square(0, 3)),  5))&#xA;&#xA;polys_sp &lt;- SpatialPolygons(polys)&#xA;fake_sp &lt;- SpatialPolygonsDataFrame(polys_sp,  fake_data)&#xA;&#xA;fake_gg &lt;- fortify(fake_sp)&#xA;qplot(long,  lat,  data = fake_gg,  geom = &quot;polygon&quot;,  fill = id)&#xA;&#xA;# works&#xA;fake_gg_r &lt;- fortify(fake_sp,  region = &quot;region&quot;)&#xA;qplot(long,  lat,  data = fake_gg_r,  geom = &quot;polygon&quot;,  fill = id)&#xA;&#xA;# now reorder regions&#xA;polys2 &lt;- rev(polys)&#xA;polys2_sp &lt;- SpatialPolygons(polys2)&#xA;fake_sp2 &lt;- SpatialPolygonsDataFrame(polys2_sp,  fake_data)&#xA;&#xA;# doesn't work!&#xA;fake_gg2 &lt;- fortify(fake_sp2)&#xA;qplot(long,  lat,  data = fake_gg2,  geom = &quot;polygon&quot;,  fill = id)&#xA;&#xA;# doesn't work!&#xA;fake_gg_r2 &lt;- fortify(fake_sp2,  region = &quot;region&quot;)&#xA;qplot(long,  lat,  data = fake_gg_r2,  geom = &quot;polygon&quot;,  fill = id)&#xA;```" />
      <Message Id="6891558" ParentId="434" UserId="25964" Date="07/10/2012 22:03:58" Content="This fixes the problem of ordering,  and changes the default behavior to splitting each Polygons element into it's own region (rather than using the first column to define region),  following Nicholas' code.&#xA;&#xA;```{ R }&#xA;fortify.SpatialPolygonsDataFrame &lt;- function(model,  data,  region = NULL,  ...) { &#xA;  attr &lt;- as.data.frame(model)&#xA;  # If not specified,  split into regions based on polygons&#xA;  if (is.null(region)) { &#xA;    coords &lt;- ldply(model@polygons, fortify)&#xA;    message(&quot;Regions defined for each Polygons&quot;)&#xA;   } else { &#xA;    cp &lt;- polygons(model)&#xA;    try_require(&quot;maptools&quot;)&#xA;    &#xA;    # Union together all polygons that make up a region&#xA;    unioned &lt;- unionSpatialPolygons(cp,  attr[ ,  region ])&#xA;    coords &lt;- fortify(unioned)&#xA;    coords$order &lt;- 1:nrow(coords)&#xA;   }&#xA;  coords&#xA; }&#xA;```" />
      <Message Id="6891619" ParentId="434" UserId="4196" Date="07/10/2012 22:06:57" Content="And a test:&#xA;&#xA;```&#xA;expect_equivalent(fortify(fake_sp),  arrange(fortify(fake_sp2),  id,  order))&#xA;```" />
      <Message Id="6914045" ParentId="434" UserId="86978" Date="07/11/2012 17:46:41" Content="I made a branch with the fix,  and merged in 9f119467da965ba723196f347821925623d63972." />
    </Messages>
  </Topic>
  <Topic Id="435" Title="margins option of facet_grid insufficiently documented">
    <Messages>
      <Message Id="0" ParentId="435" UserId="463252" Date="03/13/2012 23:32:39" Content="In the documentation for `facet_grid`,  the `margins` parameter is described as:&#xD;&#xA;&#xD;&#xA;&gt;logical value,  should marginal rows and columns be displayed&#xD;&#xA;&#xD;&#xA;In fact,  `margins` can also take on a (vector of) character values which specify which variables/margins are to be computed. This functionality was requested in Issue #3,  but never documented." />
      <Message Id="5071043" ParentId="435" UserId="4196" Date="04/11/2012 15:11:59" Content="Any change you'd be willing to contribute a few sentences?  You can probably mostly copy from `dcast`" />
      <Message Id="5252912" ParentId="435" UserId="4196" Date="04/20/2012 20:53:02" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="436" Title="Misaligned dotplot with dodging">
    <Messages>
      <Message Id="0" ParentId="436" UserId="1387563" Date="03/14/2012 16:45:43" Content="Running the following code leads to the dotplot elements being centered for the &quot;H&quot; factor as expected,  but leads to dotplot elements of the &quot;L&quot; factor to be slightly offset to the left.  &#xD;&#xA;&#xD;&#xA;dat &lt;- data.frame(letters=LETTERS[ 1:3 ],  level = c(&quot;L&quot;, &quot;H&quot;),  size=rnorm(120))&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=letters,  y=size,  fill = factor(level))) + &#xD;&#xA;  geom_boxplot(position=position_dodge(width=1)) +&#xD;&#xA;  geom_dotplot(position=position_dodge(width=1),  binaxis=&quot;y&quot;,  stackdir=&quot;center&quot;,  binwidth=.1,  alpha = .3)&#xD;&#xA;" />
      <Message Id="4502990" ParentId="436" UserId="86978" Date="03/14/2012 17:17:54" Content="It looks like the problem may be with the dodging code itself. I believe it made some assumptions about geoms that aren't always true. I wrote a preliminary fix,  which is at wch@9e74f2de84e1f6d47919448fc367717a2441c40f.&#xD;&#xA;You can test out with:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(devtools)&#xD;&#xA;dev_mode()&#xD;&#xA;install_github('ggplot2',  'wch',  'fix/dodge')&#xD;&#xA;library(ggplot2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'm not 100% sure yet that it won't mess up other stuff,  so if you could try it out and let me know,  that would be really helpful." />
      <Message Id="4513295" ParentId="436" UserId="1387563" Date="03/15/2012 03:30:05" Content="Winston, &#xD;&#xA;&#xD;&#xA;Works perfectly!  Thanks very much.&#xD;&#xA;&#xD;&#xA;I have not thought very much about the following,  but am curious if the new violin plot function will support something like the attached figure from a paper describing the R package &quot;bean plot&quot; (Kampstra,  P. (2008). Beanplot: A boxplot alternative for visual comparison of distributions. Journal of Statistical Software,  8,  1-8. ).  It seems like there should be a way to create something like this,  but the solution is not obvious.  &#xD;&#xA;&#xD;&#xA;Thanks again for the quick fix and the great tool, &#xD;&#xA;&#xD;&#xA;John&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;John D. Lee&#xD;&#xA;Emerson Professor&#xD;&#xA;Department of Industrial and Systems Engineering&#xD;&#xA;University of Wisconsin-Madison&#xD;&#xA;Phone (608) 890-3168&#xD;&#xA;Fax (608) 262-8454&#xD;&#xA;jdlee@engr.wisc.edu &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;On Mar 14,  2012,  at 12:17 PM,  Winston Chang wrote:&#xD;&#xA;&#xD;&#xA;&gt; It looks like the problem may be with the dodging code itself. I believe it made some assumptions about geoms that aren't always true. I wrote a preliminary fix,  which is at wch@9e74f2de84e1f6d47919448fc367717a2441c40f.&#xD;&#xA;&gt; You can test out with:&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```R&#xD;&#xA;&gt; library(devtools)&#xD;&#xA;&gt; dev_mode()&#xD;&#xA;&gt; install_github('ggplot2',  'wch',  'fix/dodge')&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &#xD;&#xA;&gt; I'm not 100% sure yet that it won't mess up other stuff,  so if you could try it out and let me know,  that would be really helpful.&#xD;&#xA;&gt; &#xD;&#xA;&gt; --- &#xD;&#xA;&gt; Reply to this email directly or view it on GitHub:&#xD;&#xA;&gt; https://github.com/hadley/ggplot2/issues/436#issuecomment-4502990" />
      <Message Id="4521959" ParentId="436" UserId="86978" Date="03/15/2012 15:30:06" Content="@jdlee I think you might be able to do something similar by using a geom_segment,  but it probably doesn't capture all the features of a beanplot:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(234)&#xD;&#xA;dat &lt;- data.frame(letters=LETTERS[ 1:3 ],  size=rnorm(120))&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=letters,  y=size)) + &#xD;&#xA;  geom_violin() +&#xD;&#xA;  geom_segment(aes(x=as.numeric(letters)-.25,  xend=as.numeric(letters)+.25, &#xD;&#xA;                   y=size,  yend=size))&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;This uses a little hack -- it converts `letters` to a numeric so that you can set the x start and end positions of the segment. Also,  I don't think this will work properly if you want to use dodging.&#xD;&#xA;&#xD;&#xA;Another alternative is to overlay dot plots on top of the violins. I'm probably biased,  but I think this result is clearer than a bean plot (and it looks more &quot;bean-like&quot; than a bean plot!). Examples are on this page: https://github.com/wch/ggplot2/wiki/geom_dotplot&#xD;&#xA;&#xD;&#xA;As far as I know,  I'm the only person who's made these kinds of plots,  and I haven't written a paper about it,  so bear that in mind." />
      <Message Id="4708549" ParentId="436" UserId="86978" Date="03/27/2012 02:22:22" Content="The fix was merged into master." />
    </Messages>
  </Topic>
  <Topic Id="437" Title="Alpha does not affect fill of points (when there is a separate fill and stroke)">
    <Messages>
      <Message Id="0" ParentId="437" UserId="18445" Date="03/14/2012 17:05:31" Content="```&#xD;&#xA;library(ggplot2)&#xD;&#xA;ggplot() + geom_point(aes(x=runif(1000),  y=runif(1000)),  shape=21,  fill=&quot;red&quot;,  size=5)&#xD;&#xA;ggplot() + geom_point(aes(x=runif(1000),  y=runif(1000)),  shape=21,  fill=&quot;red&quot;,  size=5,  alpha=0.1)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="438" Title="Allow alpha to affect fill on points">
    <Messages>
      <Message Id="0" ParentId="438" UserId="18445" Date="03/14/2012 17:10:45" Content="" />
      <Message Id="4502828" ParentId="438" UserId="18445" Date="03/14/2012 17:10:59" Content="Fixes #437" />
    </Messages>
  </Topic>
  <Topic Id="439" Title="Add a new continuous colour/fill scale using colorbrewer colours">
    <Messages>
      <Message Id="0" ParentId="439" UserId="18445" Date="03/14/2012 17:47:08" Content="It fetches 6 colours from a colorbrewer palette and feeds them to gradientn. It gives very nice results even if the palettes were not intended for that use originally.&#xD;&#xA;&#xD;&#xA;Ideally,  the regular brewer scale should be able to deal with this: use `scale_colour/fill_brewer()` and provide a continuous or a discrete scale depending on the data... but this may run again into the problem that the data is only known at render time or something like this. Anyhow,  I couldn't figure out how to do that with the current state of the code so a created new functions. The names (`scale_colour/fill_brewerc`) are clearly not very inspired so I am completely open to suggestions." />
      <Message Id="4503827" ParentId="439" UserId="18445" Date="03/14/2012 17:52:41" Content="This is an example map produced with the &quot;Spectral&quot; palette (and stereographic projection in coord_map,  Yay!):&#xD;&#xA;&#xD;&#xA;![ map ](http://dl.dropbox.com/u/1047321/ggplot2-bugs/sst_summer_climatology_0.1_0.1.png)&#xD;&#xA;&#xD;&#xA;For those who want to know,  this is the elevation of the sea surface around antarctica. No the sea is not flat ;) " />
      <Message Id="5071080" ParentId="439" UserId="4196" Date="04/11/2012 15:13:30" Content="I like the idea,  but I'm not a big fan of the name (I don't like the compounding).  Any other ideas?" />
      <Message Id="5072486" ParentId="439" UserId="18445" Date="04/11/2012 16:12:19" Content="What about `scale_***_distiller` to signify that it goes a bit further than &quot;brewer&quot;. That's not very discoverable (to say the least) but is kinda fun." />
      <Message Id="5072522" ParentId="439" UserId="18445" Date="04/11/2012 16:13:39" Content="Just realized there might be some unintended association with Acrobat Distiller and the production of PDFs etc. Did anyone else think of this?" />
      <Message Id="5113773" ParentId="439" UserId="18445" Date="04/13/2012 12:43:19" Content="So,  what about `scale_***_distiller`? Opinions anyone? I know I won't be able to find a better name,  but native english speakers might." />
      <Message Id="5117873" ParentId="439" UserId="463252" Date="04/13/2012 16:07:56" Content="The only thing I can think of would require overhauling all the color/fill names: making the method of generation of the levels a suffix. So this would be `scale_***_continuous_brewer`,  and the current `scale_***_brewer` would be `scale_***_discrete_brewer`; `scale_***_gradient` would be `scale_***_continuous_gradient`; etc. However,  I am not sure that it would be worth it (even with the original names being maintained as aliases for backwards compatibility)." />
      <Message Id="6213602" ParentId="439" UserId="4196" Date="06/08/2012 21:35:39" Content="I like `scale_*_distiller` - if you make the change,  I'm happy to merge the pull request." />
      <Message Id="6217291" ParentId="439" UserId="18970" Date="06/09/2012 05:34:28" Content="It's always seemed kind of odd to me that Brewer palettes (and,  if they were to be implemented,  those of dichromat) would have their own special syntax in ggplot2. Should we consider the possibility of hard-coding these particular colour values in ggplot2 (or package scales,  presumably),  independently of the original package,  and make a more consistent interface to all these special cases? It could even be part of a new colour package,  defining a general structure to define and access colour palettes.&#xA;The weird contraints of RColorBrewer (n &gt;=3 for &quot;Set1&quot; ??),  the absence of continuous versions,  and the inconsistent naming scheme are somewhat confusing in the otherwise consistent ggplot2 framework. &#xA;&#xA;" />
      <Message Id="6225935" ParentId="439" UserId="18445" Date="06/10/2012 04:53:23" Content="I agree with baptiste though. I think there should be two colour scales: `scale_colour_discrete` and `scale_colour_continuous` and the palette argument should determine which colours to use. For the discrete scale,  the default could be `&quot;hue&quot;` and that would be the current behaviour,  or the appropriate palettes from ColorBrewer or dichromat.&#xA;&#xA;But that would probably break too much pre-existing code to be viable..." />
      <Message Id="6225955" ParentId="439" UserId="18970" Date="06/10/2012 05:00:18" Content="`But that would probably break too much pre-existing code to be viable...`&#xA;&#xA;not necessarily: if `scale_colour_brewer()` became merely an alias for `scale_colour_discrete(palette = ...)` the more general functions would not have to break anything.&#xA;" />
      <Message Id="6246843" ParentId="439" UserId="4196" Date="06/11/2012 15:06:38" Content="I don't particularly see the appeal of collapsing scales with rather different arguments in to one function - I think two many r functions do that already,  and it's rather confusing.  A function should do one thing well." />
      <Message Id="6246846" ParentId="439" UserId="4196" Date="06/11/2012 15:06:46" Content="I don't particularly see the appeal of collapsing scales with rather different arguments in to one function - I think two many r functions do that already,  and it's rather confusing.  A function should do one thing well." />
      <Message Id="6253925" ParentId="439" UserId="18445" Date="06/11/2012 19:44:01" Content="On 2012-Jun-11,  at 17:06 ,  hadley wickham wrote:&#xD;&#xA;&gt; &#xD;&#xA;&gt; I don't particularly see the appeal of collapsing scales with rather different arguments in to one function - I think two many r functions do that already,  and it's rather confusing.  A function should do one thing well.&#xD;&#xA;&#xD;&#xA;I agree that,  from a programming point of view,  a function should be as elemental as possible and do one thing,  and one thing only,  very well.&#xD;&#xA;&#xD;&#xA;From a User Interaction standpoint however,  you want an interface as simple and compact as possible. So if I want to change the colour of my geom,  I *always* use scale_colour_discrete/continuous (actually,  as you know,  I would even prefer scale_colour and leave the rest to be figured out by the function). This function should have a nice set of defaults,  that work &quot;well enough&quot;. Now,  once I am more familiar with the function,  I can go and explore a bit more to make more complex stuff with it. At that point,  I find a palette argument to scale_colour_*** more discoverable than several separate functions.&#xD;&#xA;&#xD;&#xA;But in the end,  it's probably a matter of personal preference. For example,  I love the OS X menu UI where you can browse all the plain and simple menu actions and when you press Alt,  some of the menu items change and provide more advanced actions. That's simple as a first approach and there is a consistent way to get more advanced stuff. Some people hate that and would rather have everything exposed from the onset,  or access toe advanced stuff though another UI entirely. To me that's quite akin to having a consistent function as the main UI,  with more advanced stuff &quot;hidden&quot; away into arguments instead of several functions which all look equally important." />
      <Message Id="6287321" ParentId="439" UserId="18970" Date="06/12/2012 23:49:44" Content="&gt;I don't particularly see the appeal of collapsing scales with rather different arguments in to one function - I think two many r functions do that already,  and it's rather confusing. A function should do one thing well.&#xA;&#xA;I'm not sure; if a grammar of graphic does such a good job at combining heaps of different plot types into a single,  consistent framework with one top-level function (ggplot),  why couldn't we aim for the same approach with scales?&#xA;&#xA;It seems to me that choosing a colour scale is conceptually similar to choosing a type of plot and playing with variations,  from a user's perspective. &#xA;Having a wild variety of different colour functions that inherit their name from the particular colour package they come from,  or the type of scale that they represent,  or something else,  ... seems more confusing to me than one or two generic functions,  with good defaults,  that accept one consistent argument for fine-tuning the appearance (namely,  the palette of colours).&#xA;&#xA;&#xA;&#xA;" />
      <Message Id="6297865" ParentId="439" UserId="18445" Date="06/13/2012 10:47:50" Content="It's quite different from the problem at hand but while we are on the topic of scales and since many interested parties are watching the topic,  here is another suggestion: issue #578.&#xA;&#xA;Edit: wow,  it actually got automatically referenced here. Nice. Thanks github." />
      <Message Id="35939771" ParentId="439" UserId="4196" Date="02/24/2014 21:19:21" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="36019470" ParentId="439" UserId="1741643" Date="02/25/2014 15:31:44" Content="@jiho: I have combined this pull request with your other change that implements reverse Brewer scales,  fully maintaining your authorship (#830). @hadley prefers two separate pull requests. Would you mind if I prepared the two pull requests based on your changes?" />
      <Message Id="36269761" ParentId="439" UserId="18445" Date="02/27/2014 17:48:10" Content="Thanks for the work but since the two need to stay separate I've done two P-R already. Rebasing this one was kind of a mess but it is now done." />
    </Messages>
  </Topic>
  <Topic Id="440" Title="Added support for rgeos">
    <Messages>
      <Message Id="0" ParentId="440" UserId="1530030" Date="03/14/2012 20:45:49" Content="Updated ```fortify``` to support rgeos or gpclib.  The ```gpclibpermit()``` call is no longer required; the regeos package will be used by default." />
    </Messages>
  </Topic>
  <Topic Id="441" Title="position_identity">
    <Messages>
      <Message Id="0" ParentId="441" UserId="562061" Date="03/14/2012 21:37:25" Content="shouldn't position_identity be exported?" />
    </Messages>
  </Topic>
  <Topic Id="442" Title="Visual test system">
    <Messages>
      <Message Id="0" ParentId="442" UserId="86978" Date="03/15/2012 04:50:06" Content="&#xD;&#xA;This is very preliminary,  so I'm just looking for comments and suggestions. Many of the changes are just moved files. The new functions are in `visual-test.r`. The files `aspect-ratio.r` and `dotplot.r` have been converted to the new system,  so take a look at them for examples of how to use it.&#xD;&#xA;&#xD;&#xA;You can try it out by doing the following. Fetch and checkout the branch:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;git fetch https://github.com/wch/ggplot2.git visual-test&#xD;&#xA;git checkout FETCH_HEAD&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;In your R session,  starting in the ggplot2 dir:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# I think this is needed for consistent output across platforms&#xD;&#xA;# If asked,  agree to download and install gtk+ (~56MB for Mac)&#xD;&#xA;install.packages('cairoDevice')&#xD;&#xA;&#xD;&#xA;library(devtools)&#xD;&#xA;dev_mode()&#xD;&#xA;load_all('.')&#xD;&#xA;source('visual_test/aspect-ratio.r')&#xD;&#xA;source('visual_test/dotplot.r')&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Output files will go in `visual_test/aspect-ratio/` and `visual_test/dotplot/`. In each of these dirs there is a index.html page that shows all the tests,  with descriptions. In the future,  everything in these directories will be committed to the repo.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Still needs to be done:&#xD;&#xA;&#xD;&#xA;* Convert the rest of the visual tests to the new system&#xD;&#xA;* Write a single function that will run all tests&#xD;&#xA;* Create a top-level webpage with links to each page of tests&#xD;&#xA;* Write code to generate visual diffs between commits&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Open questions:&#xD;&#xA;&#xD;&#xA;* Use optipng to shrink output files?&#xD;&#xA; * Pro: smaller file size - visual tests may add up over time. Even minor changes to,  say,  tick marks,  padding,  or automatic breaks will result in an entirely new set of test files. Example: for the dotplot tests,  total size is 440, 934 bytes vs. 189, 408 bytes after using optipng.&#xD;&#xA; * Con: it adds an external dependency.&#xD;&#xA;* Use smaller images? Presently the default size is 4x4 inches at 72 ppi,  or 288x288 pixels.&#xD;&#xA;&#xD;&#xA;Now that I think of it,  this is probably a good candidate for using a git submodule. All the visual test results could go in the submodule." />
      <Message Id="4529291" ParentId="442" UserId="86978" Date="03/15/2012 21:28:11" Content="It turns out that cairoDevice might not be so consistent across platforms. This is a page of visual diffs; in the left column is cairoDevice on a Mac,  the middle is cairoDevice on Linux,  and the right is the difference: http://stdout.org/~winston/visual_test/aspect-ratio/diff.html&#xD;&#xA;&#xD;&#xA;I think the main difference is fonts. Not only are they different sizes,  but I think the fonts themselves are slightly different (notice the shape of the &quot;3&quot; across the platforms).&#xD;&#xA;&#xD;&#xA;Update: It looks like uncompressed PDFs are stored efficiently. Even though each PDF file is relatively large (15-20KB for each one of these),  they are plain text and have a lot of overlap. I created a new blank repo and put all the PDF's generated by the dotplot and aspect-ratio tests in there. The files are 630KB,  but the git repo is only 60KB,  after running a `git gc` to clean it up.&#xD;&#xA;&#xD;&#xA;PDF's are also the same across platforms,  at least Mac and Linux. The only problem is that they embed the creation date and time in a line of text,  but that should be easy to alter." />
      <Message Id="4560004" ParentId="442" UserId="86978" Date="03/18/2012 08:55:04" Content="I rewrote the code to use css,  and did many,  many other things behind the scenes. The code still could use some major cleaning up and modularization,  but at least now it's somewhat robust in the way it deals with different possible git refs,  and in how it generates the web pages.&#xD;&#xA;&#xD;&#xA;A page of test images:&#xD;&#xA;http://stdout.org/~winston/visual_test/html/aspect-ratio/&#xD;&#xA;&#xD;&#xA;A page of visual diffs,  showing changed images,  removed images,  and added images:&#xD;&#xA;http://stdout.org/~winston/visual_test/diff/diff/visual_test/aspect-ratio/&#xD;&#xA;&#xD;&#xA;I shamelessly stole the look of the staticdocs pages. ;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;* For the vdiffs,  there's now an option to generate PNG images. It takes a little time,  but it's better now that I have it not duplicate the work when the files haven't changed.&#xD;&#xA;&#xD;&#xA;* I don't know the purpose of many of the tests,  so I'll need someone to help with the descriptions -- a description should be right the first time and not change,  because it's used for the identifying hash.&#xD;&#xA;&#xD;&#xA;* For the tests that require map and mapproj,  I can't get them to run when I do `load_all('.'); require(map);`. It seems these packages have to be loaded *before* doing `load_all` on ggplot2. Do you know how to make this work?&#xD;&#xA;&#xD;&#xA;* Some of the visual tests throw errors,  because they test unresolved bugs. I'll have to figure out how to handle that.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="4698009" ParentId="442" UserId="86978" Date="03/26/2012 16:34:00" Content="Moved visual testing code to separate R package." />
    </Messages>
  </Topic>
  <Topic Id="443" Title="facet_grid drops duplicate cases">
    <Messages>
      <Message Id="0" ParentId="443" UserId="86978" Date="03/15/2012 06:48:43" Content="This is from the discussion thread here: http://groups.google.com/group/ggplot2/browse_thread/thread/5213ac35da6b36d4/bdbb8be0a658bfe5&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=rep(1:4,  10),  g=rep(c(&quot;A&quot;, &quot;B&quot;), each=20))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x, x)) + geom_point(position=&quot;jitter&quot;)&#xD;&#xA;&#xD;&#xA;# OK: 20 points in each facet&#xD;&#xA;p + facet_wrap(~g)&#xD;&#xA;&#xD;&#xA;# Not OK: 4 points in each facet&#xD;&#xA;p + facet_grid(.~g)&#xD;&#xA;```" />
      <Message Id="4990364" ParentId="443" UserId="86978" Date="04/06/2012 03:54:58" Content="I found the guilty line,  in [ facet-locate.r ](https://github.com/hadley/ggplot2/blob/master/R/facet-locate.r),  line 17:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;  # Workaround for bug in reshape&#xD;&#xA;  data &lt;- unique(data)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I commented out this line and it appears to generate the correct result image. However,  it fails one of the tests: **Facetting (location): margins add extra data**. Here's the relevant test code,  using the original (uncommented) version of `facet-locate`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- expand.grid(a = 1:2,  b = 1:2)&#xD;&#xA;panel &lt;- layout_grid(list(df),  &quot;a&quot;,  &quot;b&quot;,  margins = &quot;b&quot;)&#xD;&#xA;loc &lt;- locate_grid(df,  panel,  &quot;a&quot;,  &quot;b&quot;,  margins = &quot;b&quot;)&#xD;&#xA;panel&#xD;&#xA;#   PANEL ROW COL a     b&#xD;&#xA;# 1     1   1   1 1     1&#xD;&#xA;# 2     2   1   2 1     2&#xD;&#xA;# 3     3   1   3 1 (all)&#xD;&#xA;# 4     4   2   1 2     1&#xD;&#xA;# 5     5   2   2 2     2&#xD;&#xA;# 6     6   2   3 2 (all)&#xD;&#xA;&#xD;&#xA;loc&#xD;&#xA;#   a     b PANEL&#xD;&#xA;# 1 1     1     1&#xD;&#xA;# 2 1     2     2&#xD;&#xA;# 3 1 (all)     3&#xD;&#xA;# 4 2     1     4&#xD;&#xA;# 5 2     2     5&#xD;&#xA;# 6 2 (all)     6&#xD;&#xA;&#xD;&#xA;expect_that(nrow(loc),  equals(nrow(df) + 2))  &#xD;&#xA;# This works&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;With the modified (commented) version,  there are a couple extra lines in `loc`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;loc&#xD;&#xA;#   a     b PANEL&#xD;&#xA;# 1 1     1     1&#xD;&#xA;# 2 1     2     2&#xD;&#xA;# 3 1 (all)     3&#xD;&#xA;# 4 1 (all)     3&#xD;&#xA;# 5 2     1     4&#xD;&#xA;# 6 2     2     5&#xD;&#xA;# 7 2 (all)     6&#xD;&#xA;# 8 2 (all)     6&#xD;&#xA;&#xD;&#xA;expect_that(nrow(loc),  equals(nrow(df) + 2))  &#xD;&#xA;# Fails&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;@hadley what is the meaning of `(all)`? When I comment out the line,  it produces the correct jittered graph,  all the visual tests are unchanged (about 12 of the vtests use facets),  and all the non-visual tests pass except the one above. Perhaps the test is wrong?" />
      <Message Id="4998524" ParentId="443" UserId="463252" Date="04/06/2012 16:54:54" Content="I think the test is wrong.  `(all)` is the category that is the margin. Effectively,  there should be a copy of the data where any margined value is replaced with `(all)`. I think that the test should be&#xD;&#xA;&#xD;&#xA;    expect_that(nrow(loc),  equals(2 * nrow(df)))&#xD;&#xA;&#xD;&#xA;Or in general,  for `n` faceting variables,  &#xD;&#xA;&#xD;&#xA;    expect_that(nrow(loc),  equals((2 ^ n) * nrow(df)))&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="4999644" ParentId="443" UserId="86978" Date="04/06/2012 18:03:32" Content="@BrianDiggs that makes sense. I don't think that the `(all)` rows are actually used anywhere in ggplot2 code.&#xD;&#xA;&#xD;&#xA;I wonder - what is the bug in reshape2 that is worked around by that line of code?" />
      <Message Id="5000854" ParentId="443" UserId="463252" Date="04/06/2012 19:17:09" Content="The `(all)` rows contain the data that is to be displayed/used in the panels that are the marginals.&#xD;&#xA;&#xD;&#xA;I don't know what the bug is/was that was being worked around.  It was introduced in 9fb2a973166c2e60ea057c8e072804de8369f3a8 by Hadley. There was later discussion of this bug on that commit." />
      <Message Id="5071261" ParentId="443" UserId="4196" Date="04/11/2012 15:20:24" Content="Hmmm,  I think I must have fixed the bug because the output without unique looks fine.  I'll fix the test." />
      <Message Id="5252695" ParentId="443" UserId="463252" Date="04/20/2012 20:42:07" Content="This bug fix warrants a mention in the NEWS file." />
    </Messages>
  </Topic>
  <Topic Id="444" Title="geom_bar: some stats reset width">
    <Messages>
      <Message Id="0" ParentId="444" UserId="86978" Date="03/15/2012 16:50:59" Content="Some stats seem to reset `width`. &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:4 ],  y=3:6)&#xD;&#xA;&#xD;&#xA;# OK (narrower bars): bin (default)&#xD;&#xA;ggplot(dat,  aes(x, y)) + geom_bar(width=.5)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Not OK (wide bars): identity&#xD;&#xA;ggplot(dat,  aes(x, y)) + geom_bar(stat=&quot;identity&quot;,  width=.5)&#xD;&#xA;&#xD;&#xA;# Not OK: another way of doing identity&#xD;&#xA;ggplot(dat,  aes(x, y)) + stat_identity(geom=&quot;bar&quot;,  width=.5)&#xD;&#xA;&#xD;&#xA;# Not OK: summary&#xD;&#xA;ggplot(dat,  aes(x, y)) + stat_summary(geom=&quot;bar&quot;,  fun.y=&quot;mean&quot;,  width=.5)&#xD;&#xA;&#xD;&#xA;# OK: bin (explicitly specified)&#xD;&#xA;ggplot(dat,  aes(x, y)) + stat_bin(geom=&quot;bar&quot;,  width=.5)&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="4589735" ParentId="444" UserId="227097" Date="03/20/2012 06:19:10" Content="Here is a verbose way to do that:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat,  aes(x, y)) + geom_bar(stat=&quot;identity&quot;,  geom_params = list(width=.5))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'm not sure if this is a bug,  but to fix this,  we need to reconsider the construction of layer,  especially the sensitivities to the parameters." />
      <Message Id="5070938" ParentId="444" UserId="4196" Date="04/11/2012 15:07:34" Content="Leaving this to 1 - once geoms can report their size accurately,  this class of problems should go away." />
      <Message Id="5083477" ParentId="444" UserId="86978" Date="04/12/2012 02:31:13" Content="This is probably related to #235." />
      <Message Id="35939787" ParentId="444" UserId="4196" Date="02/24/2014 21:19:30" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="445" Title="errors people can learn from">
    <Messages>
      <Message Id="0" ParentId="445" UserId="736156" Date="03/15/2012 19:16:09" Content="instead of this: which basically says &quot;computer says no&quot;&#xD;&#xA;&#xD;&#xA;    qplot(norm11,  binwidth=3,  geom=&quot;smoother&quot;)&#xD;&#xA;&gt; Error: No geom called smoother&#xD;&#xA;&#xD;&#xA;why not&#xD;&#xA;&#xD;&#xA;&gt; Error: No geom called smoother: legal geoms are: abline,  area,  bar,  bin2d,  blank,  boxplot,  contour,  crossbar,  density,  density2d,  dotplot,  errorbar,  errorbarh,  freqpoly,  hex,  histogram,  hline,  jitter,  line,  linerange,  map,  path,  point,  pointrange,  polygon,  quantile,  raster,  rect,  ribbon,  rug,  segment,  smooth,  step,  text,  tile,  violin,  vline&#xD;&#xA;&#xD;&#xA;or perhaps&#xD;&#xA;&#xD;&#xA;&gt; Error: No geom called smoother: did you mean &quot;smooth&quot;?&#xD;&#xA;&#xD;&#xA;Also &#xD;&#xA;&#xD;&#xA;    qplot(norm11,  binwidth=3,  geom=&quot;smooth&quot;)&#xD;&#xA;&#xD;&#xA;&gt; Error: stat_smooth requires the following missing aesthetics: y&#xD;&#xA;&#xD;&#xA;Why not:&#xD;&#xA;&#xD;&#xA;&gt; Error: stat_smooth requires the following missing aesthetics: y. With no y given,  perhaps you mean geom=&quot;density&quot;?&#xD;&#xA;" />
      <Message Id="4589686" ParentId="445" UserId="227097" Date="03/20/2012 06:12:32" Content="That would be nice but not easy to implement.&#xD;&#xA;It would be useful if we have a topic of help such as `?geom`,  `?stat`,  and if there is an error,  say, &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error: No geom called smoother: try ?geom&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="4593962" ParentId="445" UserId="736156" Date="03/20/2012 12:12:58" Content="That would be a good start: Then just create an easy way for all of us people who would like to make those new help pages helpful to do so… " />
      <Message Id="35939819" ParentId="445" UserId="4196" Date="02/24/2014 21:19:38" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="446" Title="Fix/munch-range">
    <Messages>
      <Message Id="0" ParentId="446" UserId="86978" Date="03/15/2012 19:59:26" Content="This fixes #421.&#xD;&#xA;&#xD;&#xA;In the changes to coord_range,  if there's a better way to set the names of the list items to &quot;x&quot; and &quot;y&quot;,  that would be good. As it is,  the order of x and y can change,  depending on which one is mapped to theta." />
      <Message Id="4528905" ParentId="446" UserId="86978" Date="03/15/2012 21:06:33" Content="OK,  I did as you suggested and rebased." />
    </Messages>
  </Topic>
  <Topic Id="447" Title="All geoms/stats should document their aesthetics">
    <Messages>
      <Message Id="0" ParentId="447" UserId="111939" Date="03/19/2012 12:19:50" Content="Right now the typical way to find out what aesthetics are accepted by a geom or stat is to read the examples.  A documentation list for each geom/stat would be better.&#xD;&#xA;&#xD;&#xA;This would solve half of #411 too." />
    </Messages>
  </Topic>
  <Topic Id="448" Title="stat_bin2d now handles NA in data">
    <Messages>
      <Message Id="0" ParentId="448" UserId="463252" Date="03/19/2012 19:44:17" Content="stat_bin2d did not correctly handle NA's in the data. This could be&#xD;&#xA;triggered by setting scale limits which did not include the entire&#xD;&#xA;range of the data.&#xD;&#xA;&#xD;&#xA;This arose from a discussion on the mailing list&#xD;&#xA;https://groups.google.com/d/topic/ggplot2/VAB1wKqwg9w/discussion&#xD;&#xA;" />
      <Message Id="4582497" ParentId="448" UserId="4196" Date="03/19/2012 20:12:21" Content="Thanks Brian - will pull next time I'm working on ggplot2." />
      <Message Id="4740402" ParentId="448" UserId="86978" Date="03/27/2012 23:22:42" Content="@BrianDiggs Could you add an entry in NEWS?" />
      <Message Id="4980070" ParentId="448" UserId="463252" Date="04/05/2012 16:23:19" Content="It was easier to create another pull request with the update to NEWS (#469) because when I branched off to make the fix,  NEWS didn't have anyplace to put new entries and I wanted each to apply cleanly. And I can't rebase an already public branch." />
      <Message Id="4980203" ParentId="448" UserId="86978" Date="04/05/2012 16:29:00" Content="For future reference,  rebasing public branches actually isn't as bad as commonly believed. I think it'll only cause problems if someone else fetches your branch and starts working off of it. I frequently rebase my pull requests... there was a small discussion about it in #374." />
      <Message Id="4980353" ParentId="448" UserId="86978" Date="04/05/2012 16:35:20" Content="The commits have been rebased onto master." />
    </Messages>
  </Topic>
  <Topic Id="449" Title="coord_polar: y values near 0 lead to too few segments">
    <Messages>
      <Message Id="0" ParentId="449" UserId="86978" Date="03/20/2012 04:46:53" Content="This is based on https://groups.google.com/forum/?fromgroups#!topic/ggplot2/b8pIbU4PILw&#xD;&#xA;&#xD;&#xA;I think this has something to do with `coord_distance.polar()`,  called from `coord_munch()`. I think there are two problems:&#xD;&#xA;&#xD;&#xA;* There's just not enough &quot;segment resolution&quot; near the center. There tends to be a higher information density near the center than at the edge,  resulting in tighter turns that require more segments.&#xD;&#xA;* It's probably calculating distances on the `y` values *before* they're remapped to their ending radial position. For example,  a with a y range of (-10, 10),  a y value of 0 would be halfway from the center to the edge,  but this is calculating the number of segments based on the &quot;raw&quot; y value. This is demonstrated by the second and third examples.&#xD;&#xA;&#xD;&#xA;Here are some examples.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x = 0:1,  y=rep(1:80,  each=2))&#xD;&#xA;&#xD;&#xA;# Inside circles are jagged&#xD;&#xA;ggplot(df,  aes(x=x,  y=y,  group=factor(y))) +&#xD;&#xA; geom_line() +&#xD;&#xA; coord_polar()&#xD;&#xA;&#xD;&#xA;# Outside gets jagged&#xD;&#xA;ggplot(df,  aes(x=x,  y=y-80,  group=factor(y))) +&#xD;&#xA; geom_line() +&#xD;&#xA; coord_polar()&#xD;&#xA;&#xD;&#xA;# Middle range gets jagged&#xD;&#xA;ggplot(df,  aes(x=x,  y=y-40,  group=factor(y))) +&#xD;&#xA; geom_line() +&#xD;&#xA; coord_polar()&#xD;&#xA;&#xD;&#xA;# Everything looks smooth&#xD;&#xA;ggplot(df,  aes(x=x,  y=y+100,  group=factor(y))) +&#xD;&#xA; geom_line() +&#xD;&#xA; coord_polar()&#xD;&#xA;&#xD;&#xA;# Multiplication has no effect&#xD;&#xA;ggplot(df,  aes(x=x,  y=y*100,  group=factor(y))) +&#xD;&#xA; geom_line() +&#xD;&#xA; coord_polar()&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="4589615" ParentId="449" UserId="227097" Date="03/20/2012 06:00:18" Content="&gt; There's just not enough &quot;segment resolution&quot; near the center. There tends to be a higher information density near the center than at the edge,  resulting in tighter turns that require more segments.&#xD;&#xA;&#xD;&#xA;This is not easy to improve. Maybe there is some good algorithms to determine the breaks of curve.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; It's probably calculating distances on the y values before they're remapped to their ending radial position. For example,  a with a y range of (-10, 10),  a y value of 0 would be halfway from the center to the edge,  but this is calculating the number of segments based on the &quot;raw&quot; y value. This is demonstrated by the second and third examples.&#xD;&#xA;&#xD;&#xA;This is very easy to fix." />
    </Messages>
  </Topic>
  <Topic Id="450" Title="export position_identity (fixes #441)">
    <Messages>
      <Message Id="0" ParentId="450" UserId="227097" Date="03/20/2012 08:19:47" Content="" />
    </Messages>
  </Topic>
  <Topic Id="451" Title="coord_polar calculate distance in normalized coordinate unit (#449).">
    <Messages>
      <Message Id="0" ParentId="451" UserId="227097" Date="03/20/2012 08:27:44" Content="" />
      <Message Id="4595167" ParentId="451" UserId="4196" Date="03/20/2012 13:29:17" Content="Could you add a test (visual or otherwise) to confirm that this works?  I think you could probably inspect the number of rows per group in the output of `ggplot_build`" />
      <Message Id="4595560" ParentId="451" UserId="227097" Date="03/20/2012 13:51:48" Content="Perhaps output of `ggplot_build` only respects the scale transformation. This issue is relevant to coord transformation. So at the moment I can only provide visual test." />
      <Message Id="4709713" ParentId="451" UserId="86978" Date="03/27/2012 04:22:05" Content="This fixes the bug: the appearance of all the tests is the same.&#xD;&#xA;&#xD;&#xA;However,  there's still a triangle and a line segment in the center. Perhaps there needs to just be more resolution at the center,  as mentioned in #449. Maybe that should be considered a separate issue." />
      <Message Id="4709728" ParentId="451" UserId="227097" Date="03/27/2012 04:23:32" Content="@wch yes,  the conversion from cartesian to polar is not a simple problem.&#xD;&#xA;So could you please file another issue?" />
      <Message Id="4990874" ParentId="451" UserId="86978" Date="04/06/2012 05:15:19" Content="These commits have been rebased onto master and squashed." />
    </Messages>
  </Topic>
  <Topic Id="452" Title="derive new geom from GeomText now fails with trunk ggplot2">
    <Messages>
      <Message Id="0" ParentId="452" UserId="129072" Date="03/21/2012 21:20:04" Content="The following code (see below),  taken from answer 3 from http://stackoverflow.com/questions/7660893/boxed-geom-text-with-ggplot2 use to work.  But with the trunk version of ggplot2,  it fails with &#xD;&#xA;&#xD;&#xA;    Error in proto(GeomText,  {  : object 'GeomText' not found&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Thanks!&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(proto)&#xD;&#xA;&#xD;&#xA;GeomText2 &lt;- proto(GeomText,  { &#xD;&#xA;  objname &lt;- &quot;text2&quot;&#xD;&#xA;  draw &lt;- function(.,  data,  scales,  coordinates,  ...,  parse = FALSE, &#xD;&#xA;                   expand = 1.2,  bgcol = &quot;grey50&quot;,  bgfill = NA,  bgalpha = 1) { &#xD;&#xA;    lab &lt;- data$label&#xD;&#xA;    if (parse) { &#xD;&#xA;      lab &lt;- parse(text = lab)&#xD;&#xA;     }&#xD;&#xA;&#xD;&#xA;    with(coordinates$transform(data,  scales),  { &#xD;&#xA;      tg &lt;- do.call(&quot;mapply&quot;, &#xD;&#xA;        c(function(...) { &#xD;&#xA;            tg &lt;- with(list(...),  textGrob(lab,  default.units=&quot;native&quot;,  rot=angle,  gp=gpar(fontsize=size * .pt)))&#xD;&#xA;            list(w = grobWidth(tg),  h = grobHeight(tg))&#xD;&#xA;           },  data))&#xD;&#xA;      gList(rectGrob(x,  y, &#xD;&#xA;                     width = do.call(unit.c,  tg[ &quot;w&quot;,  ]) * expand, &#xD;&#xA;                     height = do.call(unit.c,  tg[ &quot;h&quot;,  ]) * expand, &#xD;&#xA;                     gp = gpar(col = alpha(bgcol,  bgalpha),  fill = alpha(bgfill,  bgalpha))), &#xD;&#xA;            .super$draw(.,  data,  scales,  coordinates,  ...,  parse))&#xD;&#xA;     })&#xD;&#xA;   }&#xD;&#xA; })&#xD;&#xA;&#xD;&#xA;geom_text2 &lt;- GeomText2$build_accessor()&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="4627687" ParentId="452" UserId="4196" Date="03/21/2012 21:32:17" Content="You need to use `ggplot2:::GeomText` and build `geom_text2` by hand (by copying `geom_text`)" />
      <Message Id="4629675" ParentId="452" UserId="129072" Date="03/21/2012 23:37:15" Content="Thanks Hadley--that worked.  Also I'm really excited by 0.9.0 changes! Thanks for the good work" />
      <Message Id="4630246" ParentId="452" UserId="18970" Date="03/22/2012 00:21:58" Content="[ an updated version ](http://stackoverflow.com/a/9814794/471093)" />
    </Messages>
  </Topic>
  <Topic Id="453" Title="scale_colour_identity does not produce legend">
    <Messages>
      <Message Id="0" ParentId="453" UserId="911841" Date="03/22/2012 23:04:55" Content="One of the examples for scale_colour_identity is:&#xD;&#xA;&#xD;&#xA;    # To get a legend guide,  you also need to supply labels,  and specify&#xD;&#xA;    # guide = &quot;legend&quot;&#xD;&#xA;    qplot(1:4,  1:4,  fill = colour,  geom = &quot;tile&quot;) +&#xD;&#xA;      scale_fill_identity(&quot;trt&quot;,  labels = letters[ 1:4 ],  breaks = colour, &#xD;&#xA;      guide = &quot;legend&quot;)&#xD;&#xA;&#xD;&#xA;which says it should produce a legend. It does not.&#xD;&#xA;&#xD;&#xA;Proof: http://had.co.nz/ggplot2/docs/scale_identity.html" />
      <Message Id="4688698" ParentId="453" UserId="227097" Date="03/26/2012 06:46:48" Content="this is because `scale_*_identity` returns empty breaks:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; colour &lt;- c(&quot;red&quot;,  &quot;green&quot;,  &quot;blue&quot;,  &quot;yellow&quot;)&#xD;&#xA;&gt; sc &lt;- scale_fill_identity(&quot;trt&quot;,  labels = letters[ 1:4 ],  breaks = colour)&#xD;&#xA;&gt; ggplot2:::scale_breaks(sc)&#xD;&#xA;numeric(0)&#xD;&#xA;```" />
      <Message Id="4703240" ParentId="453" UserId="911841" Date="03/26/2012 20:23:00" Content="Ok,  so is that &quot;behaving as expected&quot;? If so,  perhaps the example in the documentation should be altered to reflect this." />
      <Message Id="4708104" ParentId="453" UserId="227097" Date="03/27/2012 01:32:48" Content="I think this is a bug. Thanks." />
    </Messages>
  </Topic>
  <Topic Id="454" Title="Move and update visual tests for use with vtest">
    <Messages>
      <Message Id="0" ParentId="454" UserId="86978" Date="03/26/2012 16:48:25" Content="I moved the visual tests from `/inst/tests/visual-xxx.r` to `/visual_test/xxx.r`,  so that they can be used with the new visual test system. &#xD;&#xA;&#xD;&#xA;I also added descriptions for all the tests -- but I'm not 100% sure that the descriptions are accurate. With vtest,  it is important that these descriptions not change in the future,  so please look them over and let me know if any of them should be changed.&#xD;&#xA;" />
      <Message Id="4698409" ParentId="454" UserId="86978" Date="03/26/2012 16:52:03" Content="An example of the test results can be seen here: http://stdout.org/~winston/ggplot2-vtest/html/&#xD;&#xA;&#xD;&#xA;And an example of *diff* results can be seen here: http://stdout.org/~winston/ggplot2-vtest/diff/&#xD;&#xA;&#xD;&#xA;For the diffs,  a number of changes can be seen. I did the following between the test runs:&#xD;&#xA;* added some tests&#xD;&#xA;* changed some descriptions -- the description is used as the test identifier,  so it thought some tests were added and others were deleted&#xD;&#xA;* changed the code that handled warnings,  which resulted in some changed output images&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="455" Title="ggsave and new guides">
    <Messages>
      <Message Id="0" ParentId="455" UserId="849616" Date="03/26/2012 21:33:26" Content="The new guides are not saved with ggsave (observed only with .svg).&#xD;&#xA;&#xD;&#xA;require(ggplot2)&#xD;&#xA;require(reshape2)&#xD;&#xA;p &lt;- ggplot(melt(outer(1:4,  1:4)),  aes(x=Var1,  y=Var2)) + geom_tile(aes(fill=value))&#xD;&#xA;p + guides(fill = guide_colorbar())&#xD;&#xA;ggsave(&quot;test.svg&quot;,  p)&#xD;&#xA;&#xD;&#xA;Any suggestions?" />
      <Message Id="4705578" ParentId="455" UserId="4196" Date="03/26/2012 22:13:28" Content="The object `p` does not have the new guides set on it. Try `p &lt;- p + guides(fill = guide_colorbar())`" />
    </Messages>
  </Topic>
  <Topic Id="456" Title="Fix and clean up dodging code">
    <Messages>
      <Message Id="0" ParentId="456" UserId="86978" Date="03/27/2012 02:19:18" Content="This fixes and cleans up the code for dodging by groups.  It fixes #436 and a dodging bug mentioned in this thread:&#xD;&#xA;http://groups.google.com/group/ggplot2/browse_thread/thread/e6086175832049c1" />
      <Message Id="4708533" ParentId="456" UserId="86978" Date="03/27/2012 02:20:14" Content="This patch passes the regular tests and results in no changes on the visual tests." />
    </Messages>
  </Topic>
  <Topic Id="457" Title="Two identical warnings in scale_***_brewer instead of one">
    <Messages>
      <Message Id="0" ParentId="457" UserId="18445" Date="03/27/2012 12:03:43" Content="Hi, &#xD;&#xA;&#xD;&#xA;When the number of elements to be mapped by scale brewer is larger than the number of available colors,  a warning is issued. This is fine but the warning is actually issued twice. I tried,  but did not succeed,  to find the origin or the two calls. Given the examples below,  it seems that one comes from the plot and the other from the guide (the legend). It seems strange that the colours are recomputed twice. In addition to not being efficient,  this looks like a likely source of error.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;d &lt;- data.frame(a=letters,  x=runif(26),  y=runif(26))&#xD;&#xA;ggplot(d) +&#xD;&#xA;  geom_point(aes(x, y, colour=a)) +&#xD;&#xA;  scale_colour_brewer(type=&quot;qual&quot;)&#xD;&#xA;# two warnings&#xD;&#xA;ggplot(d) +&#xD;&#xA;  geom_point(aes(x, y, colour=a)) +&#xD;&#xA;  scale_colour_brewer(type=&quot;qual&quot;,  guide=&quot;none&quot;)&#xD;&#xA;# one warning&#xD;&#xA;```" />
      <Message Id="4835537" ParentId="457" UserId="227097" Date="03/30/2012 02:55:00" Content="Actually color need to be calculated twice,  for data and for guides.&#xD;&#xA;This is because data may not include breaks,  e.g., &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; x &lt;- c(1,  3,  10) # data&#xD;&#xA;&gt; x # data&#xD;&#xA;[ 1 ]  1  3 10&#xD;&#xA;&gt; pretty(x) # breaks&#xD;&#xA;[ 1 ]  0  2  4  6  8 10&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="458" Title="Abbreviation of scales' arguments">
    <Messages>
      <Message Id="0" ParentId="458" UserId="18445" Date="03/27/2012 13:40:13" Content="Because the `...` is not the first argument of `scale_***` functions further arguments cannot be abbreviated. For example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;set.seed(123)&#xD;&#xA;d &lt;- data.frame(a=letters[ 1:5 ],  x=runif(5),  y=runif(5))&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y,  colour=a))&#xD;&#xA;# 1&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y,  colour=a)) + scale_colour_discrete()&#xD;&#xA;# 2&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y,  colour=a)) + scale_colour_discrete(h.start=100)&#xD;&#xA;# 3&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y,  colour=a)) + scale_colour_discrete(h.st=100)&#xD;&#xA;# 3 should be like 2 but fails instead,  saying that h.st is unknown&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;What is the logic behind the position of `...`? I tested putting `...` at the end for all colour and fill functions and did not notice anything breaking (tests were arguably not extensive but still,  I've worked on a few projects with this since yesterday and it was alright)." />
      <Message Id="5070913" ParentId="458" UserId="4196" Date="04/11/2012 15:06:28" Content="Hmmmm.  I think my reasoning is that it's better to force the user to be explicitly - this makes code less likely to have problems if I change argument names in the future." />
      <Message Id="5072303" ParentId="458" UserId="18445" Date="04/11/2012 16:04:05" Content="While I understand the reasoning,  it goes against R's convention. Abbreviating arguments is a source of errors but it is also convenient. It should be left to the user to choose wether he wants to be slow and disciplined or fast and sloppy (at least that's the position of R in that respect). So if there's really no difference between putting `...` in the front or at the end,  I think it should be in the end,  just to follow R's convention." />
      <Message Id="5092065" ParentId="458" UserId="4196" Date="04/12/2012 14:24:07" Content="Oh,  I finally remembered why I did this - the problem is that most people supply the first argument (the title) without a name.  If we made `...` the last argument,  all of this code would break." />
      <Message Id="5113785" ParentId="458" UserId="18445" Date="04/13/2012 12:44:28" Content="That makes sense. If there's a way to still abbreviate the rest that would be better but I can't seem to find one.&#xD;&#xA;You can close this if there is none." />
    </Messages>
  </Topic>
  <Topic Id="459" Title="grob gPath-names not unique">
    <Messages>
      <Message Id="0" ParentId="459" UserId="488603" Date="03/28/2012 10:11:07" Content="It would be cool to have unique grob names (again?). &#xD;&#xA;I frequently just produce the grob and then edit some of the labels / names / titles afterwards according to some table. This allows me to quickly change notation and use expressions very easily. In editGrob() I need to specify a gPath and if the name of an element is not unique,  this does not work reliably.&#xD;&#xA;&#xD;&#xA;See below for an example and output.&#xD;&#xA;&#xD;&#xA;Thanks!&#xD;&#xA;&#xD;&#xA;``` R&#xD;&#xA;require(ggplot2)&#xD;&#xA;require(grid)&#xD;&#xA;data &lt;- expand.grid(v1=letters[ 1:4 ],  v2=LETTERS[ 1:3 ])&#xD;&#xA;data$y &lt;- rnorm(12)&#xD;&#xA;&#xD;&#xA;gp &lt;- ggplot(data,  aes(y,  v1,  color=v1,  shape=v2)) + geom_point()&#xD;&#xA;grob &lt;- ggplotGrob(gp)&#xD;&#xA;## get the labels &#xD;&#xA;lls &lt;- getGrob(grob,  gPath='label-',  grep=TRUE,  global=TRUE)&#xD;&#xA;## now we would edit the labels using editGrob, &#xD;&#xA;## but this doesn't work since the names are not unique,  e.g., &#xD;&#xA;## both have the same name and vp&#xD;&#xA;lls[ [ 1 ] ][ c('name',  'vp',  'label') ]&#xD;&#xA;lls[ [ 4 ] ][ c('name',  'vp',  'label') ]&#xD;&#xA;&#xD;&#xA;sessionInfo()&#xD;&#xA;&#xD;&#xA;## this produces the following output:&#xD;&#xA;&#xD;&#xA;## &gt; Loading required package: ggplot2&#xD;&#xA;## &gt; Loading required package: grid&#xD;&#xA;## &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; $name&#xD;&#xA;## [ 1 ] &quot;label-3-3-4-4&quot;&#xD;&#xA;&#xD;&#xA;## $vp&#xD;&#xA;## layout::label-3-3-4-4 &#xD;&#xA;&#xD;&#xA;## $label&#xD;&#xA;## [ 1 ] &quot;A&quot;&#xD;&#xA;&#xD;&#xA;## &gt; $name&#xD;&#xA;## [ 1 ] &quot;label-3-3-4-4&quot;&#xD;&#xA;&#xD;&#xA;## $vp&#xD;&#xA;## layout::label-3-3-4-4 &#xD;&#xA;&#xD;&#xA;## $label&#xD;&#xA;## [ 1 ] &quot;a&quot;&#xD;&#xA;&#xD;&#xA;## &gt; &gt; R version 2.15.0 RC (2012-03-25 r58832)&#xD;&#xA;## Platform: x86_64-unknown-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;## locale:&#xD;&#xA;##  [ 1 ] LC_CTYPE=de_CH.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       &#xD;&#xA;##  [ 4 ] LC_COLLATE=de_CH.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_CH.UTF-8   &#xD;&#xA;##  [ 7 ] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              &#xD;&#xA;## [ 10 ] LC_TELEPHONE=C             LC_MEASUREMENT=de_CH.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;## attached base packages:&#xD;&#xA;## [ 1 ] grid      graphics  grDevices datasets  stats     utils     methods   base     &#xD;&#xA;&#xD;&#xA;## other attached packages:&#xD;&#xA;## [ 1 ] ggplot2_0.9.0  fortunes_1.4-2 sfsmisc_1.0-20&#xD;&#xA;&#xD;&#xA;## loaded via a namespace (and not attached):&#xD;&#xA;##  [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       MASS_7.3-17       &#xD;&#xA;##  [ 5 ] memoise_0.1        munsell_0.3        plyr_1.7.1         proto_0.3-9.2     &#xD;&#xA;##  [ 9 ] RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.0       stringr_0.6       &#xD;&#xA;## [ 13 ] tools_2.15.0      &#xD;&#xA;## &gt; &#xD;&#xA;````" />
      <Message Id="4835455" ParentId="459" UserId="227097" Date="03/30/2012 02:42:17" Content="I totally agree. I hope this feature,  the consistent naming of each grob,  will appear in the future version." />
      <Message Id="6174639" ParentId="459" UserId="4196" Date="06/07/2012 12:28:56" Content="@wch If we implement this,  we probably need automated tests.  The gtable infrastructure should take care of most of the naming." />
      <Message Id="6611962" ParentId="459" UserId="86978" Date="06/27/2012 18:44:15" Content="I think this is a good time to think about setting the names,  now that the external gtable change is merged. Here's an example of the current names. Any thoughts on what should be changed?&#xA;&#xA;```R&#xA;p &lt;- ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=cyl,  size=disp)) +&#xA;     geom_point() +&#xA;     facet_wrap(~cyl)&#xA;&#xA;g &lt;- ggplotGrob(p)&#xA;grid.ls(g)&#xA;# GRID.gTree.10257&#xA;#   panel-1-4-4-4-4&#xA;#     grill.gTree.10119&#xA;#       panel.background.rect.10110&#xA;#       panel.grid.minor.y.polyline.10112&#xA;#       panel.grid.minor.x.polyline.10114&#xA;#       panel.grid.major.y.polyline.10116&#xA;#       panel.grid.major.x.polyline.10118&#xA;#     geom_point.points.10102&#xA;#     panel.border.zeroGrob.10107&#xA;#   panel-2-4-7-4-7&#xA;#     grill.gTree.10134&#xA;#       panel.background.rect.10125&#xA;#       panel.grid.minor.y.polyline.10127&#xA;#       panel.grid.minor.x.polyline.10129&#xA;#       panel.grid.major.y.polyline.10131&#xA;#       panel.grid.major.x.polyline.10133&#xA;#     geom_point.points.10104&#xA;#     panel.border.zeroGrob.10122&#xA;#   panel-3-4-10-4-10&#xA;#     grill.gTree.10149&#xA;#       panel.background.rect.10140&#xA;#       panel.grid.minor.y.polyline.10142&#xA;#       panel.grid.minor.x.polyline.10144&#xA;#       panel.grid.major.y.polyline.10146&#xA;#       panel.grid.major.x.polyline.10148&#xA;#     geom_point.points.10106&#xA;#     panel.border.zeroGrob.10137&#xA;#   strip_t-1-3-4-3-4&#xA;#     strip.background.rect.10202&#xA;#     strip.text.x.text.10199&#xA;#   strip_t-2-3-7-3-7&#xA;#     strip.background.rect.10208&#xA;#     strip.text.x.text.10205&#xA;#   strip_t-3-3-10-3-10&#xA;#     strip.background.rect.10214&#xA;#     strip.text.x.text.10211&#xA;#   axis_l-1-4-3-4-3&#xA;#     axis.line.y.zeroGrob.10187&#xA;#     axis.frame.10191&#xA;#       GRID.cellGrob.10192&#xA;#         axis.text.y.text.10186&#xA;#       GRID.cellGrob.10193&#xA;#         axis.ticks.y.polyline.10189&#xA;#   axis_l-2-4-6-4-6&#xA;#   axis_l-3-4-9-4-9&#xA;#   axis_b-1-5-4-5-4&#xA;#     axis.line.x.zeroGrob.10154&#xA;#     axis.frame.10158&#xA;#       GRID.cellGrob.10159&#xA;#         axis.text.x.text.10153&#xA;#       GRID.cellGrob.10160&#xA;#         axis.ticks.x.polyline.10156&#xA;#   axis_b-2-5-7-5-7&#xA;#     axis.line.x.zeroGrob.10165&#xA;#     axis.frame.10169&#xA;#       GRID.cellGrob.10170&#xA;#         axis.text.x.text.10164&#xA;#       GRID.cellGrob.10171&#xA;#         axis.ticks.x.polyline.10167&#xA;#   axis_b-3-5-10-5-10&#xA;#     axis.line.x.zeroGrob.10176&#xA;#     axis.frame.10180&#xA;#       GRID.cellGrob.10181&#xA;#         axis.text.x.text.10175&#xA;#       GRID.cellGrob.10182&#xA;#         axis.ticks.x.polyline.10178&#xA;#   xlab-7-10-7-4&#xA;#   ylab-4-2-4-2&#xA;#   guide-box-4-12-4-12&#xA;#     guides-2-2-2-2&#xA;#       background-1-6-5-1&#xA;#       bar-4-2-4-2&#xA;#       label-4-4-4-4&#xA;#       title-2-5-2-2&#xA;#       ticks-4-2-4-2&#xA;#     guides-4-2-4-2&#xA;#       background-1-6-8-1&#xA;#       title-2-5-2-2&#xA;#       key-3-1-bg-4-2-4-2&#xA;#       key-3-1-1-4-2-4-2&#xA;#       key-4-1-bg-5-2-5-2&#xA;#       key-4-1-1-5-2-5-2&#xA;#       key-5-1-bg-6-2-6-2&#xA;#       key-5-1-1-6-2-6-2&#xA;#       key-6-1-bg-7-2-7-2&#xA;#       key-6-1-1-7-2-7-2&#xA;#       label-3-3-4-4-4-4&#xA;#       label-4-3-5-4-5-4&#xA;#       label-5-3-6-4-6-4&#xA;#       label-6-3-7-4-7-4&#xA;#   title-2-10-2-4&#xA;```" />
      <Message Id="6617122" ParentId="459" UserId="4196" Date="06/27/2012 22:18:35" Content="That looks pretty good to me - the main thing to worry about are the names starting with `GRID` and I think they all come from code in `guides-axis` that should be converted to use `gtable`.  &#xA;&#xA;And maybe all uses of `_` should be converted to `-` for consistency?&#xA;&#xA;And maybe the top level element should be called `ggplot`?" />
      <Message Id="6620265" ParentId="459" UserId="18970" Date="06/28/2012 02:02:55" Content="I'm wondering,  could we replace unique numbers as in `axis.ticks.x.polyline.10178` with an alternative that is more reproducible? This last number,  as far as I can tell,  is constructed internally by grid,  and will vary from user to user,  and even from plot to plot in a given session. &#xA;&#xA;It makes post-processing more difficult than it could be; for example one might want to be sure that a particular grob has an exact name,  no matter what the drawing context may be,  to attach a SVG decoration to it; alternatively the structure of two plots could be compared in a text representation using diff tools,  etc.&#xA;&#xA;BTW,  there's a pdf documenting the lattice naming convention,  http://lattice.r-forge.r-project.org/Vignettes/src/naming-scheme/namingScheme.pdf&#xA;&#xA;" />
      <Message Id="6621201" ParentId="459" UserId="4196" Date="06/28/2012 03:37:07" Content="I'm not sure it's possible to make it completely reproducible - what happens if you then want to combine two ggplots on one graphics device?  The ids need to be unique.   (Also that link didn't work)" />
      <Message Id="6621248" ParentId="459" UserId="18970" Date="06/28/2012 03:43:55" Content="I don't know to be honest,  it might be worth asking Paul Murrell for advice. I imagine if two plots are on the same device / display list,  the low-level grobs remain children of their unique parent and don't become delocalised or anything. If you specify the full grob path,  starting from the unique parent id,  it should find only one instance of the grob,  right?" />
      <Message Id="6621267" ParentId="459" UserId="227097" Date="06/28/2012 03:45:43" Content="IIRC there is the way to reset index in grid.&#xA;Resetting it before plot will make thing reproducible." />
      <Message Id="6621274" ParentId="459" UserId="4196" Date="06/28/2012 03:46:18" Content="I'm pretty sure the whole reason why the arbitrary integers are on the names is so that grobs have globally unique names.  I'm not sure I see much point in fixing it - it's fairly easy to ignore anything after the last `.`" />
      <Message Id="6621339" ParentId="459" UserId="227097" Date="06/28/2012 03:52:56" Content="```{ r }&#xA;assign(&quot;index&quot;,  0,  environment(grid:::grobAutoName))&#xA;```&#xA;&#xA;can reset the index,  but I don't recommend.&#xA;As @hadley suggested,  we can ignore the suffix.&#xA;" />
      <Message Id="6621417" ParentId="459" UserId="18970" Date="06/28/2012 04:01:26" Content="I've never read that a unique id was required (grobAutoName is merely used when the user doesn't supply a name,  which doesn't have to be unique: most of the above aren't if you push two identical plots on a device!),  in fact my guess is that it is a relic of an old implementation. &#xA;I can check with Paul if you want; if it's not needed it just adds noise to an otherwise very clean and consistent naming scheme.&#xA;&#xA;" />
      <Message Id="6621537" ParentId="459" UserId="4196" Date="06/28/2012 04:13:18" Content="Yeah,  maybe I'm misremembering - if you could check with Paul that would be great.  It should be a simple fix to remove the trailing digits." />
      <Message Id="6783975" ParentId="459" UserId="4196" Date="07/05/2012 16:45:48" Content="I've made one small change to eliminate the trailing unique integers.  But we need to a think a bit about the naming scheme,  because it's currently a bit inconsistent.  Should we use `.` or `-` to separate components? Should all names containing the class of the grob as the last component?" />
      <Message Id="6789474" ParentId="459" UserId="18970" Date="07/05/2012 20:17:58" Content="sorry i've been busy and haven't found the time to summarise Paul's reply here" />
      <Message Id="6815664" ParentId="459" UserId="4196" Date="07/06/2012 20:37:01" Content="Ok,  this is harder than I thought - as well as fixing `ggname`,  I think `Geom$draw_groups` also needs to modified to rename all of the children geoms." />
      <Message Id="6815898" ParentId="459" UserId="86978" Date="07/06/2012 20:49:53" Content="I believe this is the same problem: hadley/gtable#24.&#xA;" />
      <Message Id="6911981" ParentId="459" UserId="4196" Date="07/11/2012 16:34:31" Content="To do this properly is pretty hard with the current structure of geoms.  We'll fix it once and for all (hopefully!) as part of the geom/stat rewrite and conversion to s3." />
      <Message Id="35939922" ParentId="459" UserId="4196" Date="02/24/2014 21:20:12" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="460" Title="scale_x_continous does not work with geom_raster ">
    <Messages>
      <Message Id="0" ParentId="460" UserId="129072" Date="03/29/2012 15:28:13" Content="Setting the limits for scale_x_continuous does not work with geom_raster. Is this a bug or known limitation of geom_raster? Either way I found the error message confusing because I expected to be able to replace geom_tile where setting the limits with scale_x_continous works.  &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;pp &lt;- function (n, r=4) { &#xD;&#xA; x &lt;- seq(-r*pi,  r*pi,  len=n)&#xD;&#xA; df &lt;- expand.grid(x=x,  y=x)&#xD;&#xA; df$r &lt;- sqrt(df$x^2 + df$y^2)&#xD;&#xA; df$z &lt;- cos(df$r^2)*exp(-df$r/6)&#xD;&#xA; df&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;ggplot(pp(50)) +&#xD;&#xA;        scale_x_continuous(limits=c(-1,  1)) +&#xD;&#xA;        geom_raster(aes(x,  y,  fill = z))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;fails with &#xD;&#xA;```&#xD;&#xA;Aggregation function missing: defaulting to length&#xD;&#xA;Error in rgb(tx,  tx,  tx,  maxColorValue = max) :&#xD;&#xA;  color intensity 46,  not in [ 0, 1 ]&#xD;&#xA;```" />
      <Message Id="4823848" ParentId="460" UserId="227097" Date="03/29/2012 15:33:48" Content="The code works in my environment.&#xD;&#xA;Could you please provide your session info etc?" />
      <Message Id="4823964" ParentId="460" UserId="129072" Date="03/29/2012 15:38:34" Content="Here is the sessionInfo():&#xD;&#xA;&#xD;&#xA;R version 2.14.2 (2012-02-29)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C&#xD;&#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8&#xD;&#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8&#xD;&#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C&#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C&#xD;&#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base&#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] proto_0.3-9.2 ggplot2_0.9.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.14.2&#xD;&#xA; [ 5 ] MASS_7.3-16        memoise_0.1        munsell_0.3        plyr_1.7.1&#xD;&#xA; [ 9 ] RColorBrewer_1.0-2 reshape2_1.2.1     scales_0.2.0       stringr_0.6&#xD;&#xA;" />
      <Message Id="4824169" ParentId="460" UserId="227097" Date="03/29/2012 15:46:28" Content="Hmm,  versions look good.&#xD;&#xA;Then,  could you please provide the output of &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; traceback(max = 3)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Please type it just after the error." />
      <Message Id="4824422" ParentId="460" UserId="129072" Date="03/29/2012 15:55:52" Content="Hi Kohske, &#xD;&#xA;   here is the traceback&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;25: rgb(tx,  tx,  tx,  maxColorValue = max)&#xD;&#xA;24: as.raster.matrix(image)&#xD;&#xA;23: as.raster(image)&#xD;&#xA;22: rasterGrob(raster,  x = mean(x_rng),  y = mean(y_rng),  width = diff(x_rng), &#xD;&#xA;        height = diff(y_rng),  default.units = &quot;native&quot;,  interpolate = FALSE)&#xD;&#xA;21: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;20: .$draw(group,  scales,  coordinates,  ...)&#xD;&#xA;19: FUN(X[ [ 1L ] ],  ...)&#xD;&#xA;18: lapply(groups,  function(group) .$draw(group,  scales,  coordinates, &#xD;&#xA;        ...))&#xD;&#xA;17: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;16: function (...)&#xD;&#xA;    get(x,  envir = this,  inherits = inh)(this,  ...)(data = data, &#xD;&#xA;        scales = scales,  coordinates = cs,  hjust = 0.5,  vjust = 0.5)&#xD;&#xA;15: do.call(.$geom$draw_groups,  c(data = list(as.name(&quot;data&quot;)),  scales = list(as.name(&quot;scales&quot;)), &#xD;&#xA;        coordinates = list(as.name(&quot;cs&quot;)),  .$geom_params))&#xD;&#xA;14: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;13: layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],  cs = plot$coord)&#xD;&#xA;12: .fun(piece,  ...)&#xD;&#xA;11: function (i)&#xD;&#xA;    { &#xD;&#xA;        piece &lt;- pieces[ [ i ] ]&#xD;&#xA;      ...&#xD;&#xA;10: .Call(&quot;loop_apply&quot;,  as.integer(n),  f,  env)&#xD;&#xA;9: loop_apply(n,  do.ply)&#xD;&#xA;8: llply(.data = pieces,  .fun = .fun,  ...,  .progress = .progress, &#xD;&#xA;       .parallel = .parallel)&#xD;&#xA;7: dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xD;&#xA;       panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xD;&#xA;       layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],  cs = plot$coord)&#xD;&#xA;     ...&#xD;&#xA;6: function (layer,  layer_data)&#xD;&#xA;   { &#xD;&#xA;       if (nrow(layer_data) == 0)&#xD;&#xA;     ...&#xD;&#xA;5: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA;4: Map(build_grob,  plot$layer,  data)&#xD;&#xA;3: ggplot_gtable(data)&#xD;&#xA;2: print.ggplot(list(data = list(x = c(-12.5663706143592,  -12.0534575280588, &#xD;&#xA;   -11.5405444417584,  -11.0276313554581,  -10.5147182691577,  -10.0018051828573, &#xD;&#xA;   -9.48889209655693,  -8.97597901025655,  -8.46306592395618,  -7.9501528376558, &#xD;&#xA;     ...&#xD;&#xA;1: print(list(data = list(x = c(-12.5663706143592,  -12.0534575280588, &#xD;&#xA;   -11.5405444417584,  -11.0276313554581,  -10.5147182691577,  -10.0018051828573, &#xD;&#xA;   -9.48889209655693,  -8.97597901025655,  -8.46306592395618,  -7.9501528376558, &#xD;&#xA;     ...&#xD;&#xA;" />
      <Message Id="4825538" ParentId="460" UserId="227097" Date="03/29/2012 16:44:12" Content="Hmm,  then,  is the output of the code below&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;pp &lt;- function (n, r=4) { &#xD;&#xA; x &lt;- seq(-r*pi,  r*pi,  len=n)&#xD;&#xA; df &lt;- expand.grid(x=x,  y=x)&#xD;&#xA; df$r &lt;- sqrt(df$x^2 + df$y^2)&#xD;&#xA; df$z &lt;- cos(df$r^2)*exp(-df$r/6)&#xD;&#xA; df&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(pp(50)) +&#xD;&#xA;        scale_x_continuous(limits=c(-1,  1)) +&#xD;&#xA;        geom_raster(aes(x,  y,  fill = z))&#xD;&#xA;&#xD;&#xA;d &lt;- ggplot2:::ggplot_build(p)&#xD;&#xA;print(head(d$data[ [ 1 ] ]))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;like this?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&gt; print(head(d$data[ [ 1 ] ]))&#xD;&#xA;     fill         x         y PANEL group      xmin       xmax      ymin      ymax&#xD;&#xA;1 #2E618C -12.56637 -12.56637     1     1 -12.82283 -12.309914 -12.82283 -12.30991&#xD;&#xA;2 #2E618C -12.05346 -12.56637     1     1 -12.30991 -11.797001 -12.82283 -12.30991&#xD;&#xA;3 #2D5F89 -11.54054 -12.56637     1     1 -11.79700 -11.284088 -12.82283 -12.30991&#xD;&#xA;4 #2C5D86 -11.02763 -12.56637     1     1 -11.28409 -10.771175 -12.82283 -12.30991&#xD;&#xA;5 #2E618C -10.51472 -12.56637     1     1 -10.77117 -10.258262 -12.82283 -12.30991&#xD;&#xA;6 #316793 -10.00181 -12.56637     1     1 -10.25826  -9.745349 -12.82283 -12.30991&#xD;&#xA;```" />
      <Message Id="4826434" ParentId="460" UserId="129072" Date="03/29/2012 17:25:28" Content="It looks like the problem is happening before ggplot_build()  the output looks like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;     fill  x         y PANEL group xmin xmax      ymin      ymax&#xD;&#xA;1 #2E618C NA -12.56637     1     1   NA   NA -12.82283 -12.30991                                                                                                        &#xD;&#xA;2 #2E618C NA -12.56637     1     1   NA   NA -12.82283 -12.30991                                                                                                        &#xD;&#xA;3 #2D5F89 NA -12.56637     1     1   NA   NA -12.82283 -12.30991                                                                                                        &#xD;&#xA;4 #2C5D86 NA -12.56637     1     1   NA   NA -12.82283 -12.30991                                                                                                        &#xD;&#xA;5 #2E618C NA -12.56637     1     1   NA   NA -12.82283 -12.30991                                                                                                        &#xD;&#xA;6 #316793 NA -12.56637     1     1   NA   NA -12.82283 -12.30991 &#xD;&#xA;```" />
      <Message Id="4826447" ParentId="460" UserId="129072" Date="03/29/2012 17:26:02" Content="(or during)&#xD;&#xA;" />
      <Message Id="4826561" ParentId="460" UserId="227097" Date="03/29/2012 17:31:12" Content="Just in case,  does the output of `head(pp(50))` look like this?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; head(pp(50))&#xD;&#xA;          x         y        r            z&#xD;&#xA;1 -12.56637 -12.56637 17.77153 -0.005023290&#xD;&#xA;2 -12.05346 -12.56637 17.41262 -0.001966244&#xD;&#xA;3 -11.54054 -12.56637 17.06159 -0.027936505&#xD;&#xA;4 -11.02763 -12.56637 16.71892 -0.061443075&#xD;&#xA;5 -10.51472 -12.56637 16.38514 -0.008654196&#xD;&#xA;6 -10.00181 -12.56637 16.06081  0.064864039&#xD;&#xA;```" />
      <Message Id="4828442" ParentId="460" UserId="129072" Date="03/29/2012 19:00:40" Content="the pp(50) looks ok&#xD;&#xA;```&#xD;&#xA;          x         y        r           z&#xD;&#xA;1 -12.56637 -12.56637 17.77153 -0.00502329&#xD;&#xA;2 -12.10095 -12.56637 17.44553 -0.05055148&#xD;&#xA;3 -11.63553 -12.56637 17.12598 -0.02451728&#xD;&#xA;4 -11.17011 -12.56637 16.81324  0.06057270&#xD;&#xA;5 -10.70469 -12.56637 16.50769 -0.04380912&#xD;&#xA;6 -10.23926 -12.56637 16.20976  0.02816737&#xD;&#xA;```" />
      <Message Id="4835442" ParentId="460" UserId="227097" Date="03/30/2012 02:40:29" Content="Yes,  it looks ok. So something happens during `ggplot_build` but I cannot reproduce your error so at the moment I cannot inspect more deeply...&#xD;&#xA;" />
      <Message Id="4844649" ParentId="460" UserId="129072" Date="03/30/2012 15:24:11" Content="ok I think I see what is going on:&#xD;&#xA;&#xD;&#xA;When supplying limits to `scale_x_continuous()` it generates `NA` values for data that is outside of the limits. This makes sense because data is not meant to be displayed.&#xD;&#xA;&#xD;&#xA;Currently,  in `GeomRaster$draw()` this line has problems with multiple `NA` values:&#xD;&#xA;&#xD;&#xA;    raster &lt;- acast(data,  list(&quot;y&quot;,  &quot;x&quot;),  value.var = &quot;fill&quot;)  &#xD;&#xA;&#xD;&#xA;because it sees two rows with identical values,  which causes acast to default to the `length` function for `fun.aggregate`&#xD;&#xA;&#xD;&#xA;What should happen,  in this case is,  that all the rows with NAs should be ignored: &#xD;&#xA;&#xD;&#xA;    raster &lt;- acast(na.omit(data,  method=&quot;r&quot;),  list(&quot;y&quot;,  &quot;x&quot;,  value.var = &quot;fill&quot;)&#xD;&#xA;&#xD;&#xA;With this change,  this produces the same output as using geom_tile() without error.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="4845921" ParentId="460" UserId="227097" Date="03/30/2012 16:23:53" Content="Now I could reproduce your error and you are definitely right.&#xD;&#xA;`GeomRaster` should have &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;data &lt;- remove_missing(data,  na.rm,  c(&quot;x&quot;,  &quot;y&quot;),  name = &quot;geom_raster&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;before calling the acast." />
      <Message Id="4847218" ParentId="460" UserId="129072" Date="03/30/2012 17:26:53" Content="thanks Kohske!" />
    </Messages>
  </Topic>
  <Topic Id="461" Title="Breaks on date scales are not always the same">
    <Messages>
      <Message Id="0" ParentId="461" UserId="86978" Date="03/29/2012 20:39:13" Content="I noticed when developing the vtest package that the breaks for date scales sometimes change. They move around,  and sometimes the ones on the end appear/disappear. See the test results I posted here (look at the changed pictures): http://stdout.org/~winston/ggplot2-vtest-date/diff/&#xD;&#xA;&#xD;&#xA;I'm not sure what causes it. It's possible that it happens after I repeatedly run `load_all`,  but I haven't had a chance to test it carefully. @hadley mentioned that it may be related to the time of day that ggplot is run." />
      <Message Id="4835398" ParentId="461" UserId="227097" Date="03/30/2012 02:36:25" Content="Can I look at your test code?&#xD;&#xA;I think the examples in .Rd include Sys.Date(),  so the output depends on the date when you run the test code.&#xD;&#xA;&#xD;&#xA;So I would think it is better if all `Sys.Date()` in the examples is replaced by any fixed date using,  say,  `as.Date(&quot;1978/10/17&quot;)`." />
      <Message Id="4836597" ParentId="461" UserId="86978" Date="03/30/2012 05:33:37" Content="These tests are all in the `visual_test` directory (this is where I moved all the visual tests to): https://github.com/hadley/ggplot2/tree/master/visual_test&#xD;&#xA;&#xD;&#xA;You're right that the tests use `Sys.Date()`,  so I guess that's an easy fix." />
      <Message Id="4836837" ParentId="461" UserId="86978" Date="03/30/2012 05:59:52" Content="Fixed in aac84d9b6a6017e5979a18ef405b1b05cd68009c." />
    </Messages>
  </Topic>
  <Topic Id="462" Title="geom_raster works with out-of-range values (fixes #460).">
    <Messages>
      <Message Id="0" ParentId="462" UserId="227097" Date="03/30/2012 16:37:38" Content="" />
    </Messages>
  </Topic>
  <Topic Id="463" Title="geom raster doesn't handle categorical variable correctly">
    <Messages>
      <Message Id="0" ParentId="463" UserId="227097" Date="04/02/2012 05:49:24" Content="http://groups.google.com/group/ggplot2/browse_thread/thread/21e93ab0cb1833e0?tvc=2" />
      <Message Id="5124141" ParentId="463" UserId="4196" Date="04/13/2012 20:15:48" Content="This seems to be a grouping problem,  but I can't find a simple way to reproduce the problem.  All of the following examples look fine to me:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;theme_update(legend.position = &quot;none&quot;)&#xD;&#xA;&#xD;&#xA;df &lt;- expand.grid(x = c(1:4),  y = c(1:4))&#xD;&#xA;df$col &lt;- cut(df$x,  c(0,  1,  2,  3),  labels = F)&#xD;&#xA;&#xD;&#xA;qplot(x,  y,  data = df,  fill = col,  geom = &quot;raster&quot;)&#xD;&#xA;qplot(x,  y,  data = df,  fill = factor(col),  geom = &quot;raster&quot;)&#xD;&#xA;&#xD;&#xA;df2 &lt;- expand.grid(x = 1:20,  y = 1:20)&#xD;&#xA;df2$col &lt;- sample(c(1,  2,  NA),  nrow(df2),  rep = T)&#xD;&#xA;&#xD;&#xA;qplot(x,  y,  data = df2,  fill = col,  geom = &quot;raster&quot;)&#xD;&#xA;qplot(x,  y,  data = df2,  fill = factor(col),  geom = &quot;raster&quot;)&#xD;&#xA;&#xD;&#xA;df3 &lt;- df2&#xD;&#xA;is.na(df3$col)[ df3$x == 1 ] &lt;- TRUE&#xD;&#xA;is.na(df3$col)[ df3$y == 1 ] &lt;- TRUE&#xD;&#xA;&#xD;&#xA;qplot(x,  y,  data = df3,  fill = col,  geom = &quot;raster&quot;)&#xD;&#xA;qplot(x,  y,  data = df3,  fill = factor(col),  geom = &quot;raster&quot;)&#xD;&#xA;```" />
      <Message Id="5124147" ParentId="463" UserId="4196" Date="04/13/2012 20:16:09" Content="No,  it sometimes happens with the random generation of missings." />
      <Message Id="5124484" ParentId="463" UserId="4196" Date="04/13/2012 20:37:09" Content="Reliable problem causing code:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;theme_update(legend.position = &quot;none&quot;)&#xD;&#xA;&#xD;&#xA;df &lt;- expand.grid(x = 1:10,  y = 1:10)&#xD;&#xA;df$col &lt;- (df$x + df$y) %% 2&#xD;&#xA;&#xD;&#xA;qplot(x,  y,  data = df,  fill = col,  geom = &quot;raster&quot;)&#xD;&#xA;qplot(x,  y,  data = df,  fill = factor(col),  geom = &quot;raster&quot;)&#xD;&#xA;&#xD;&#xA;df$col2 &lt;- df$col&#xD;&#xA;df$col2[ df$x == 5 &amp; df$col == 1 ] &lt;- NA&#xD;&#xA;df$col2[ df$y == 5 &amp; df$col == 0 ] &lt;- NA&#xD;&#xA;qplot(x,  y,  data = df,  fill = col2,  geom = &quot;tile&quot;)&#xD;&#xA;qplot(x,  y,  data = df,  fill = col2,  geom = &quot;raster&quot;)&#xD;&#xA;qplot(x,  y,  data = df,  fill = factor(col2),  geom = &quot;tile&quot;)&#xD;&#xA;qplot(x,  y,  data = df,  fill = factor(col2),  geom = &quot;raster&quot;)&#xD;&#xA;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="464" Title="Duplicating plots">
    <Messages>
      <Message Id="0" ParentId="464" UserId="1606436" Date="04/02/2012 23:31:24" Content="Hello, &#xD;&#xA;&#xD;&#xA;I am using ggplot 0.9 and am having trouble with logic that worked in 0.89.  The below code takes a list,  which I named sectorlist,   and is supposed to insert each item in the list into a function (sectorplot).  The function contains two plots.  The problem is that the last plot is printed twice.  This is an inconvenience.  Can anyone tell by looking at this logic why it no longer works?  As mentioned,  the same code worked in version 0.89.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;for ( i in 1:length(sectorlist)) { &#xD;&#xA;  print(sectorplot(as.character(sectorlist[ i ]))) }&#xD;&#xA;&#xD;&#xA;Thanks.&#xD;&#xA;" />
      <Message Id="4893447" ParentId="464" UserId="86978" Date="04/03/2012 02:57:42" Content="Without seeing the code for `sectorplot` or the structure of `structurelist`,  it's not really possible to diagnose this problem. Does `sectorplot` return a `ggplot` object?" />
      <Message Id="4895432" ParentId="464" UserId="227097" Date="04/03/2012 06:41:48" Content="Probably the problem is due to the lazy evaluation of R.&#xD;&#xA;As @wch sais,  it is impossible to answer without inspecting the `sectorplot`.&#xD;&#xA;" />
      <Message Id="4900087" ParentId="464" UserId="1606436" Date="04/03/2012 12:40:01" Content="Yes sectorplot returns a ggplot.  Below is the code for sectorplot.  As I mentioned&#xD;&#xA;&#xD;&#xA;x.df = data.frame(x)&#xD;&#xA;x.sub = x.df[ x.df$VSR==&quot;YES&quot; ,     ]&#xD;&#xA;&#xD;&#xA;qrscore = x.sub&#xD;&#xA;attach(qrscore)&#xD;&#xA;drop.levels &lt;- function(dat){ &#xD;&#xA;&#xD;&#xA;  dat[  ] &lt;- lapply(dat,  function(x) x[ , drop=TRUE ])&#xD;&#xA;  return(dat)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;require(ggplot2)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;sectorlist=na.omit(unique(qrscore$Sector))&#xD;&#xA;sectorplot &lt;- function(sectorname) { &#xD;&#xA;sectordata=subset(qrscore,  Sector %in% c(sectorname))&#xD;&#xA;sectordata=drop.levels(sectordata)&#xD;&#xA;portfolio_name1=paste(&quot;Sector: &quot;, sectorname, &quot;Data&quot;)&#xD;&#xA;sectorplot1=qplot(QR, GR, data=sectordata, colour=Subind,  xlim = c(0,  1),  ylim = c(0,  1),  shape=Class,   &#xD;&#xA;size=MKTcap, label=Symbol, main=paste(&quot;Sector: &quot;, sectorname, &quot;Data&quot;, &quot;4/3/2012&quot;))&#xD;&#xA;print(sectorplot1+geom_text(size=1.75, hjust=0, vjust=0, colour=&quot;black&quot;)+scale_area(range=c(1, 15)) )&#xD;&#xA;sectorplot2=qplot(QR+GR,  HL_VR, data=sectordata, colour=Subind,  xlim = c(0,  2),  ylim = c(0,   &#xD;&#xA;1), size=MKTcap, label=Symbol, shape=Class,  ylab=&quot;Cheap                          HL_VR                       Expensive&quot;, main=paste(portfolio_name,  portfolio_name1, sep=&quot;\n&quot;))&#xD;&#xA;print(sectorplot2+geom_text(size=1.75, hjust=0, vjust=0, colour=&quot;black&quot;)+scale_area(range=c(1, 15)))&#xD;&#xA; }&#xD;&#xA;pdf(file=&quot;S:/xxx/xxx.pdf&quot;,  width=10, height=7, paper=&quot;special&quot;, pointsize=5)&#xD;&#xA;for ( i in 1:length(sectorlist)) { &#xD;&#xA;  print(sectorplot(as.character(sectorlist[ i ])))&#xD;&#xA;		indulist=na.omit(unique(qrscore$sectordata))&#xD;&#xA;	 }&#xD;&#xA;dev.off()&#xD;&#xA;" />
      <Message Id="4900154" ParentId="464" UserId="227097" Date="04/03/2012 12:43:57" Content="Could you please provide a reproducible example (e.g.,  we cannot know how `x` is)?" />
      <Message Id="4905128" ParentId="464" UserId="86978" Date="04/03/2012 15:45:45" Content="Still hard to say what the problem is,  but it may have something to do with the `print` at the end of the `sectorplot` function,  and then it being printed again in the for loop. It should probably be printed only once. The function is printing *and* returning the `ggplot` object. It's effectively doing something like this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;foo &lt;- function() { &#xD;&#xA;  print(qplot(mpg,  wt,  data=mtcars))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;z &lt;- foo()&#xD;&#xA;print(z)&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This prints the picture twice." />
      <Message Id="5070828" ParentId="464" UserId="4196" Date="04/11/2012 15:03:16" Content="Closing - will re-open if reproducible example provided." />
    </Messages>
  </Topic>
  <Topic Id="465" Title="dodged geom_bar labels get mixed up when they are character labels">
    <Messages>
      <Message Id="0" ParentId="465" UserId="1608945" Date="04/03/2012 16:49:59" Content="It seems that when text labels are used,  dodged label positions get mixed up.  See https://groups.google.com/group/ggplot2/browse_thread/thread/d9a86f13145d4650 for the discussion.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;set.seed(121)&#xD;&#xA;df = data.frame(class = c(1, 1, 2, 2, 3, 3, 4, 4, 5, 5),  val = round(runif(10), 2),  group = c(&quot;group1&quot;,  &quot;group2&quot;))&#xD;&#xA;df$text_labels = as.character(sprintf(&quot;%2.2f&quot;,  df$val))&#xD;&#xA;&#xD;&#xA;ggplot(data = df,  aes(x=class,  y=val,  fill=group)) +&#xD;&#xA;    geom_bar(stat=&quot;identity&quot;,  position=position_dodge(width=1)) + &#xD;&#xA;    geom_text(aes(label = text_labels,  y = val + 0.1),  angle = 45, &#xD;&#xA;        alpha = 0.5,  position = position_dodge(width=1)) +&#xD;&#xA;    geom_text(aes(label = val,  y = val + 0.1),  angle = 45,  colour = &quot;red&quot;, &#xD;&#xA;        alpha=0.5,  position = position_dodge(width=1))&#xD;&#xA;```" />
      <Message Id="4947586" ParentId="465" UserId="86978" Date="04/04/2012 05:25:04" Content="I think I found the source of the problem: the `label` column of the data is being treated as a grouping variable,  when it shouldn't be.&#xD;&#xA;&#xD;&#xA;Here's the relevant code from `utilities-layer.r` in 0.8.9. It explicitly ignores `label`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;  if (is.null(data$group)) { &#xD;&#xA;    cat &lt;- sapply(data[ setdiff(names(data),  &quot;label&quot;) ],  is.discrete)&#xD;&#xA;    cat &lt;- intersect(names(which(cat)),  .all_aesthetics)&#xD;&#xA;    &#xD;&#xA;    if (length(cat) == 0) { &#xD;&#xA;      data$group &lt;- 1&#xD;&#xA;     } else { &#xD;&#xA;      data$group &lt;- as.numeric(interaction(data[ cat ]))&#xD;&#xA;     }&#xD;&#xA;   }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Here's the code in 0.9.0. It does *not* ignore `label`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;  if (is.null(data$group)) { &#xD;&#xA;    disc &lt;- vapply(data,  is.discrete,  logical(1))&#xD;&#xA;    &#xD;&#xA;    if (any(disc)) { &#xD;&#xA;      data$group &lt;- id(data[ disc ],  drop = TRUE)      &#xD;&#xA;     } else { &#xD;&#xA;      data$group &lt;- 1L&#xD;&#xA;     }&#xD;&#xA;   }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;@hadley This change was made in 8267bf658c6375f5c77e1e2dabcfcaabb484a079. In that commit you edited the documentation and removed the part where it said,  &quot;... excluding label&quot;. Was there a reason for doing this? If not,  then I think the solution is to add back the code to exclude label." />
      <Message Id="4952501" ParentId="465" UserId="4196" Date="04/04/2012 12:42:32" Content="Hmmm I don't know why I did that - maybe because it made the code look cleaner?  I should have added a test :/" />
    </Messages>
  </Topic>
  <Topic Id="466" Title="Don't use label as a grouping var (fix #465)">
    <Messages>
      <Message Id="0" ParentId="466" UserId="86978" Date="04/04/2012 05:40:18" Content="This excludes `label` as a grouping variable and adds tests. (fixes #465)" />
      <Message Id="4997633" ParentId="466" UserId="86978" Date="04/06/2012 15:58:58" Content="This change was rebased onto master." />
    </Messages>
  </Topic>
  <Topic Id="467" Title="theme_line fails">
    <Messages>
      <Message Id="0" ParentId="467" UserId="18445" Date="04/04/2012 21:39:28" Content="    qplot(runif(10),  runif(10)) + opts(axis.line=theme_line())&#xD;&#xA;&#xD;&#xA;**Error in validDetails.polyline(x) : &#xD;&#xA;  It is invalid to specify both 'id' and 'id.lengths'**&#xD;&#xA;" />
      <Message Id="4970216" ParentId="467" UserId="227097" Date="04/05/2012 08:06:33" Content="`axis.line` accepts `theme_segment`" />
    </Messages>
  </Topic>
  <Topic Id="468" Title="Partial evaluation in aes">
    <Messages>
      <Message Id="0" ParentId="468" UserId="227097" Date="04/05/2012 08:18:54" Content="I can find many times the usage below:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d &lt;- list(1:3,  4:6)&#xD;&#xA;&#xD;&#xA;p &lt;- list()&#xD;&#xA;for (i in 1:2) { &#xD;&#xA;  p[ [ i ] ] &lt;- ggplot(NULL,  aes(x = d[ [ i ] ],  y = -d[ [ i ] ])) + geom_point()&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;print(p[ [ 1 ] ])&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Of course,  due to the evaluation,  the plot with `i=2` is drawn.&#xD;&#xA;&#xD;&#xA;So it may be nice if we have a kind of syntax like `bquote`,  say:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;aes(x = .(d[ [ i ] ]),  y = .(d[ [ i ] ]))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;wherein the inside of the `.()` is evaluated.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Perhaps the new `aes` looks like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;aes &lt;- function (x,  y,  ...) &#xD;&#xA;{ &#xD;&#xA;    aes &lt;- as.list(match.call()[ -1 ])&#xD;&#xA;    aes &lt;- lapply(aes,  function(e) { &#xD;&#xA;    	if (is.call(e) &amp;&amp; e[ [ 1L ] ] == as.name(&quot;.&quot;)) eval(e[ [ 2L ] ],  parent.frame())&#xD;&#xA;        else e&#xD;&#xA;     })&#xD;&#xA;    aes &lt;- structure(aes,  class = &quot;uneval&quot;)&#xD;&#xA;&#xD;&#xA;    ggplot2:::rename_aes(aes)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;then, &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- list()&#xD;&#xA;for (i in 1:2) { &#xD;&#xA;  p[ [ i ] ] &lt;- ggplot(NULL,  aes(x = .(d[ [ i ] ]),  y = .(-d[ [ i ] ]))) + geom_point()&#xD;&#xA; }&#xD;&#xA;print(p[ [ 1 ] ])&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;draws a plot with `i=1`." />
      <Message Id="4976098" ParentId="468" UserId="4196" Date="04/05/2012 13:11:34" Content="What happens if you use `list` instead of `aes`?" />
      <Message Id="4976137" ParentId="468" UserId="227097" Date="04/05/2012 13:13:42" Content="&gt; What happens if you use list instead of aes?&#xD;&#xA;&#xD;&#xA;Error as followings:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; p &lt;- list()&#xD;&#xA;&gt; for (i in 1:2) { &#xD;&#xA;+   p[ [ i ] ] &lt;- ggplot(NULL,  list(x = d[ [ i ] ],  y = -d[ [ i ] ])) + geom_point()&#xD;&#xA;+  }&#xD;&#xA;Error in ggplot.data.frame(fortify(data,  ...),  mapping) : &#xD;&#xA;  Mapping should be created with aes or aes_string&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Do you mean like this?" />
      <Message Id="35939954" ParentId="468" UserId="4196" Date="02/24/2014 21:20:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="469" Title="News entry for push request #448">
    <Messages>
      <Message Id="0" ParentId="469" UserId="463252" Date="04/05/2012 16:20:18" Content="Address Issue #448 request for news entry related to push request." />
      <Message Id="4980362" ParentId="469" UserId="86978" Date="04/05/2012 16:35:44" Content="The commit has been rebased onto master." />
    </Messages>
  </Topic>
  <Topic Id="470" Title="Ordering of multiple guides">
    <Messages>
      <Message Id="0" ParentId="470" UserId="227097" Date="04/06/2012 01:33:41" Content="see this issue&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/10035551/ordering-of-multiple-legends-guides-what-is-the-automatic-logic-how-to-change&#xD;&#xA;" />
      <Message Id="5129067" ParentId="470" UserId="227097" Date="04/14/2012 05:39:40" Content="Quick implementation is easy. Will this be included in 0.91?&#xD;&#xA;If so,  then I will write some codes." />
    </Messages>
  </Topic>
  <Topic Id="471" Title="coord_polar: y values near 0 should have more segments">
    <Messages>
      <Message Id="0" ParentId="471" UserId="86978" Date="04/06/2012 05:20:11" Content="This is a follow-up to the discussion in #449. Even though the bug there was fixed,  there is still a problem of not enough &quot;segment resolution&quot; near the center.&#xD;&#xA;&#xD;&#xA;In this example,  there aren't enough segments near the center,  so the smallest circles are drawn as triangles or even line segments.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x = 0:1,  y=rep(1:80,  each=2))&#xD;&#xA;&#xD;&#xA;ggplot(df,  aes(x=x,  y=y,  group=factor(y))) + geom_line() + coord_polar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Probably `coord_munch` should be modified to use shorter segments near the center,  since there's often a higher information density there." />
      <Message Id="5006320" ParentId="471" UserId="227097" Date="04/07/2012 06:29:33" Content="Just a note. IIRC,  now the `coord_munch` munches a path by equally spaced points.&#xD;&#xA;i.e.,  0,  10 is divided into 0,  1,  2,  ...,  10.&#xD;&#xA;This is because `munch_data` only knows distance of two point.&#xD;&#xA;&#xD;&#xA;In the case of `coord_polar`,  obviously it cannot work.&#xD;&#xA;So `munch_data` need to know the density or mapping in addition to the distance.&#xD;&#xA;And this is not an easy work...&#xD;&#xA;&#xD;&#xA;I come up with one way.&#xD;&#xA;First,  divide the path as fine as possible.&#xD;&#xA;Then,  drop some points if it looks unnecessary.&#xD;&#xA;This can be done by comparing the finely-divided path and the droped path.&#xD;&#xA;If they are similar enough,  it is ok.&#xD;&#xA;&#xD;&#xA;But definitely this is too poor way though..." />
      <Message Id="5026888" ParentId="471" UserId="4196" Date="04/09/2012 15:17:28" Content="Another approach would be to recursively divide the line,  and keep dividing while the transformed distance is greater than some threshold.  I feel like there's probably a really good algorithm to do this,  but I don't know where to start looking." />
      <Message Id="6213606" ParentId="471" UserId="4196" Date="06/08/2012 21:35:48" Content="I think the problem is simpler. The distance calculation in `coord_distance.polar` looks off to me - it's completely different to `dist_polar`,  and in @wch's example,  the ratio of distances doesn't look right for the smallest and the largest rings - it's ~1/79,  but the distance between the two end points should grow as a square,  not linearly.&#xA;&#xA;I suspect `dist_polar` just needs a fix so that it always looks at clockwise distance (not shortest distance) and then it can replace the existing calculations in `coord_distance.polar`." />
      <Message Id="6369687" ParentId="471" UserId="227097" Date="06/16/2012 00:50:21" Content="It is simple if r (i.e.,  distance from center) of two point are equal. But probably things may be more complicated if they are different. " />
      <Message Id="6373211" ParentId="471" UserId="4196" Date="06/16/2012 13:29:51" Content="http://math.ucsd.edu/~wgarner/math4c/derivations/distance/distancepolar.htm" />
      <Message Id="6835945" ParentId="471" UserId="86978" Date="07/08/2012 23:17:01" Content="@hadley The formula from the website is straight-line distance between two points,  when the points are given in polar coordinates.&#xA;&#xA;I think we need something a little different for determining how many pieces to break it up into when munching. What we need is the length of a line drawn from point A to point B,  which follows something like an arc. For example,  if there's a line drawn from (r=0.5,  theta=5) to (r=0.75,  theta=355),  it is part of a spiral.&#xA;&#xA;I think this is the formula we need: http://mathworld.wolfram.com/ArchimedesSpiral.html" />
      <Message Id="6836961" ParentId="471" UserId="4196" Date="07/09/2012 01:26:00" Content="Hmmmm,  I'm reasonably certain that we want the straight-line (shortest) distance between two points in the converted coordinate system - that's why we use the great circle distance for `coord_map`.  I might be wrong though." />
      <Message Id="6837231" ParentId="471" UserId="86978" Date="07/09/2012 02:01:53" Content="I think we need the spiral arc length. For example,  the straight-line distance from (r=0.5,  theta=0) to (r=0.5,  theta=360) is zero,  but ggplot would draw a full circle in this case." />
      <Message Id="6837244" ParentId="471" UserId="4196" Date="07/09/2012 02:03:34" Content="That's why that formula needs tweaking - to account for the fact that arcs in ggplot2's polar coordinates only go in one direction." />
      <Message Id="6838239" ParentId="471" UserId="86978" Date="07/09/2012 04:10:38" Content="But there's only one straight-line distance between two points,  and it's always the shortest distance.&#xA;&#xA;Anyway,  I have some code that should properly calculate lengths for spiral arcs:&#xA;&#xA;```R&#xA;&#xA;# ============== Utility functions =================&#xA;# Given n points,  find the slope,  xintercept,  and yintercept of&#xA;# the lines connecting them.&#xA;#&#xA;# This returns a data frame with length(x)-1 rows&#xA;#&#xA;# @param x A vector of x values&#xA;# @param y A vector of y values&#xA;# @examples&#xA;# find_line_formula(c(4,  7),  c(1,  5))&#xA;# find_line_formula(c(4,  7,  9),  c(1,  5,  3))&#xA;find_line_formula &lt;- function(x,  y) { &#xA;  slope &lt;- diff(y) / diff(x)&#xA;  yintercept &lt;- y[ -1 ] - (slope * x[ -1 ])&#xA;  xintercept &lt;- x[ -1 ] - (y[ -1 ] / slope)&#xA;  data.frame(x1 = x[ -length(x) ],  y1 = y[ -length(y) ], &#xA;    x2 = x[ -1 ],  y2 = y[ -1 ], &#xA;    slope = slope,  yintercept = yintercept,  xintercept = xintercept)&#xA; }&#xA;&#xA;# Spiral arc length&#xA;#&#xA;# Each segment consists of a spiral line of slope 'a' between angles&#xA;# 'theta1' and 'theta2'. Because each segment has its own _normalized_&#xA;# slope,  the ending theta2 value may not be the same as the starting&#xA;# theta1 value of the next point.&#xA;#&#xA;# @param a A vector of spiral &quot;slopes&quot;. Each spiral is defined as r = a * theta.&#xA;# @param theta1 A vector of starting theta values.&#xA;# @param theta2 A vector of ending theta values.&#xA;# @examples&#xA;# spiral_arc_length(a = c(0.2,  0.5),  c(0.5 * pi,  pi),  c(pi,  1.25 * pi))&#xA;spiral_arc_length &lt;- function(a,  theta1,  theta2) { &#xA;  # Archimedes' spiral arc length formula from&#xA;  # http://mathworld.wolfram.com/ArchimedesSpiral.html&#xA;  0.5 * a * (&#xA;    (theta1 * sqrt(1 + theta1 * theta1) + asinh(theta1)) -&#xA;    (theta2 * sqrt(1 + theta2 * theta2) + asinh(theta2)))&#xA; }&#xA;&#xA;```&#xA;&#xA;Here's a test,  that should cover all the situations. If you cut and paste,  you'll see the result:&#xA;&#xA;```R&#xA;library(plyr)&#xA;library(ggplot2)&#xA;&#xA;# ==== Make some sample data ====&#xA;dat &lt;- data.frame(&#xA;  theta = c(0,  2*pi,    2,    6,  6,  1,     1,  0), &#xA;  r     = c(0,     0,  0.5,  0.5,  1,  1,  0.25,  .125), &#xA;  g     = 1:8)&#xA;&#xA;# ==== Take a look at the path in cartesian coords ====&#xA;ggplot(dat,  aes(x=theta,  y=r,  colour = g)) + geom_path() + geom_point(alpha=0.5)&#xA;# In polar coords&#xA;ggplot(dat,  aes(x=theta,  y=r,  colour = g)) + geom_path() + geom_point(alpha=0.5) + coord_polar()&#xA;&#xA;&#xA;# ==== Do the distance calculation ====&#xA;&#xA;# Get the formulas for each line (&#xA;lf &lt;- find_line_formula(dat$theta,  dat$r)&#xA;lf&#xA;&#xA;# Rename x and y columns to r and t,  since we're working in polar&#xA;# Note that 'slope' actually means the spiral slope,  'a' in the spiral&#xA;#   formula r = a * theta&#xA;lf &lt;- rename(lf,  c(x1 = &quot;t1&quot;,  x2 = &quot;t2&quot;,  y1 = &quot;r1&quot;,  y2 = &quot;r2&quot;, &#xA;  yintercept = &quot;r_int&quot;,   xintercept = &quot;t_int&quot;))&#xA;&#xA;# Re-normalize the theta values so that intercept for each is 0&#xA;lf &lt;- transform(lf,  tn1 = t1 - t_int,  tn2 = t2 - t_int)&#xA;&#xA;&#xA;# Add distance column&#xA;lf$dist &lt;- NA_real_&#xA;&#xA;# Get spiral arc length for segments that have non-zero,  non-infinite slope&#xA;# (spiral_arc_length only works for these)&#xA;angled_idx &lt;- lf$slope != 0 &amp; !is.infinite(lf$slope)&#xA;lf$dist[ angled_idx ] &lt;-&#xA;  spiral_arc_length(lf$slope[ angled_idx ],  lf$tn1[ angled_idx ],  lf$tn2[ angled_idx ])&#xA;&#xA;# Get cicular arc length for segments that have zero slope (r1 == r2)&#xA;zero_idx &lt;- lf$slope == 0&#xA;lf$dist[ zero_idx ] &lt;- lf$r1[ zero_idx ] * (lf$t2[ zero_idx ] - lf$t1[ zero_idx ])&#xA;&#xA;# Get radial length for segments that have infinite slope (t1 == t2)&#xA;inf_idx &lt;- is.infinite(lf$slope)&#xA;lf$dist[ inf_idx ] &lt;- lf$r1[ inf_idx ] - lf$r2[ inf_idx ]&#xA;&#xA;# Final distance values&#xA;lf$dist &lt;- abs(lf$dist)&#xA;lf&#xA;```&#xA;&#xA;When I eyeball the polar graph and compare the length of each segment to the value of the `dist` column,  the numbers look correct." />
      <Message Id="6838625" ParentId="471" UserId="86978" Date="07/09/2012 05:08:02" Content="For reference,  here are the results using the current method (for ggplot2 0.9.1). The numbers don't look right.&#xA;&#xA;```&#xA;dat &lt;- data.frame(&#xA;  theta = c(0,  2*pi,    2,    6,  6,  1,     1,      0), &#xA;  r     = c(0,     0,  0.5,  0.5,  1,  1,  0.25,  0.125), &#xA;  g     = 1:8)&#xA;&#xA;# Visualize in polar coords&#xA;ggplot(dat,  aes(x=theta,  y=r,  colour = g)) + geom_path() + geom_point(alpha=0.5) + coord_polar()&#xA;&#xA;&#xA;px &lt;- dat$r * cos(dat$theta)&#xA;py &lt;- dat$r * sin(dat$theta)&#xA;pz &lt;- dat$theta * dat$r&#xA;&#xA;dist &lt;- sqrt(diff(px) ^ 2 + diff(py) ^ 2 + diff(pz) ^ 2)&#xA;d &lt;- data.frame(&#xA;  t1 = dat$theta[ -nrow(dat) ], &#xA;  t2 = dat$theta[ -1 ], &#xA;  r1 = dat$r[ -nrow(dat) ], &#xA;  r2 = dat$r[ -1 ], &#xA;  px1 = px[ -nrow(dat) ], &#xA;  px2 = px[ -1 ], &#xA;  py1 = py[ -nrow(dat) ], &#xA;  py2 = py[ -1 ], &#xA;  pz1 = pz[ -nrow(dat) ], &#xA;  pz2 = pz[ -1 ], &#xA;  dist = dist)&#xA;&#xA;d&#xA;```" />
      <Message Id="6838640" ParentId="471" UserId="4196" Date="07/09/2012 05:09:44" Content="Ok - you've convinced me!" />
      <Message Id="6838647" ParentId="471" UserId="86978" Date="07/09/2012 05:10:44" Content="Victory!" />
      <Message Id="6838649" ParentId="471" UserId="4196" Date="07/09/2012 05:10:58" Content="But I wish I understood this better in general - i.e. given the polar coordinates transformation,  why is that the correct distance metric?" />
      <Message Id="6838653" ParentId="471" UserId="227097" Date="07/09/2012 05:12:01" Content="&gt; But I wish I understood this better in general - i.e. given the polar coordinates transformation,  why is that the correct distance metric?&#xA;&#xA;me too!!" />
      <Message Id="6838792" ParentId="471" UserId="86978" Date="07/09/2012 05:32:10" Content="Maybe the reason it's clearer to me is because in the past I had experimented with `geom_abline` so that it would wrap around when `coord_polar` was used.&#xA;&#xA;It turns out that every abline that is &quot;angled&quot; (i.e.,  not circle arcs with constant `r` or rays with constant `theta`) is a section of a spiral. If you make the lines &quot;wrap around&quot;,  they always spiral into the center.&#xA;&#xA;When you draw a `geom_abline` in cartesian coordinates,  the x intercept is when `y==0`. If you use `coord_polar`,  the &quot;theta intercept&quot; is when `r==0`. This is the starting angle of the spiral.&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="472" Title="jitter should accept random seed">
    <Messages>
      <Message Id="0" ParentId="472" UserId="86978" Date="04/06/2012 17:40:37" Content="Functions like `position_jitter` should be able accept a random seed so that the results are reproducible. This would also make it possible to jitter two separate layers in exactly the same way,  which would be useful when,  for example,  plotting points with labels.&#xD;&#xA;&#xD;&#xA;Maybe it should also be possible to pass a random seed to `ggplot` so that all randomness within a plot is reproducible?" />
      <Message Id="5000542" ParentId="472" UserId="4196" Date="04/06/2012 18:59:18" Content="Hmmm,  I'm not really sure I see the point of this - you can already set a seed outside of ggplot2,  and if you want to reuse jitter across multiple layers,  just generate the randomness yourself." />
      <Message Id="7989988" ParentId="472" UserId="86978" Date="08/24/2012 01:43:43" Content="I spoke with someone today wanted this feature -- he pointed out that jittering it manually doesn't work when one of the axes is a factor. Here's an example he gave me where he wanted to align points and lines with jitter:&#xA;&#xA;http://rpubs.com/wch/1270&#xA;&#xA;I worked around it by converting x (which is a factor) to numeric,  but that's not a good general solution." />
      <Message Id="35939987" ParentId="472" UserId="4196" Date="02/24/2014 21:20:37" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="473" Title="Fix for polar spacing with x (fix #282)">
    <Messages>
      <Message Id="0" ParentId="473" UserId="86978" Date="04/06/2012 19:47:08" Content="This fixes #282.&#xD;&#xA;&#xD;&#xA;When using bars with `width` &lt; 1,  the spacing is uneven,  as demonstrated in #282:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=4)&#xD;&#xA;&#xD;&#xA;# Bad&#xD;&#xA;# A and C boxes touch - angle AC is smaller than AB and BC&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_bar() + coord_polar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;A longhand manual solution is to use `expand=TRUE` and set the `expand` values in both the x and y scales. The `expand` values that are appropriate for a circular graph are different from those for a rectangular graph. However,  this is really verbose:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Good&#xD;&#xA;# This removes the space in the middle&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_bar() +&#xD;&#xA;  coord_polar(expand=T) +&#xD;&#xA;  scale_x_discrete(expand=c(0,  .5)) +   # equal theta spacing&#xD;&#xA;  scale_y_continuous(expand=c(0,  0))    # don't leave a hole in the middle&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;As far as I can tell,  there's no reason to use `expand` values that are different from these ones,  in a polar graph. You don't want your theta/x to be spaced unevenly,  and you don't want a hole in the middle. If you really want to change these things,  you can set `xlim` and `ylim`.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;This pull request also overrides `expand` values for racetrack plots (where `theta=&quot;y&quot;`). In the existing code,  if you use `expand=TRUE` with a racetrack plot,  it doesn't form a full circle,  but I overrode it close the circle. Again,  if you want to override these values,  you should be able to set `xlim` and `ylim`.&#xD;&#xA;&#xD;&#xA;See the new visual tests for examples.&#xD;&#xA;&#xD;&#xA;Thoughts?" />
      <Message Id="5001363" ParentId="473" UserId="4196" Date="04/06/2012 19:53:20" Content="Random thought - maybe expand should default to `c(NA,  NA)` and the coordinate system supplies default values" />
      <Message Id="5005981" ParentId="473" UserId="227097" Date="04/07/2012 04:42:13" Content="I would say that using `NA` as a &quot;flag&quot; for something is not a good idea. " />
      <Message Id="5006013" ParentId="473" UserId="86978" Date="04/07/2012 04:55:39" Content="Here's a link to the visual test results -- see the last four images: http://stdout.org/~winston/vtest/html/coord-polar.html" />
      <Message Id="5027028" ParentId="473" UserId="86978" Date="04/09/2012 15:24:28" Content="I've made the changes discussed on the mailing list. Here are the highlights:&#xD;&#xA;&#xD;&#xA;* Changed default expand values for all scales to be `c(NA,  NA)`&#xD;&#xA;* Changed `scale_dimension()` to use 0 if an expansion value is NA&#xD;&#xA;* Changed instances of `scale_dimension(x,  expand=c(0, 0))` in stats to remove `expand` argument since it's no longer needed.&#xD;&#xA;* Added `coord_expand_defaults` S3 function,  which substitutes in default expand values&#xD;&#xA; * The default method uses values of `c(0,  0.6)` if discrete,  and `c(0.05,  0)` if continuous.&#xD;&#xA; * The polar method has different values for theta and r. For theta: `c(0,  0.5)` if discrete,  `c(0,  0)` if continuous. For r: `c(0,  0)` in all cases.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;It passes all tests. The visual tests have some slight changes. See the changed images and coord-polar section here: http://stdout.org/~winston/vtest/diff/&#xD;&#xA;&#xD;&#xA;Most of the changes involve polar plots and were expected,  but there are a couple changed images in the guide-axis section -- some of the facets seem wider,  and some seem narrower. I'm not sure why that's happening.&#xD;&#xA;" />
      <Message Id="5027126" ParentId="473" UserId="4196" Date="04/09/2012 15:29:56" Content="I'd guess that the calculations for discrete dimensions has changed slightly.&#xD;&#xA;&#xD;&#xA;We also need to say something about how `expand` is used in `continuous_scale` and `discrete_scale`" />
      <Message Id="5027259" ParentId="473" UserId="86978" Date="04/09/2012 15:35:46" Content="I think the calculations are in general the same,  since nothing else changed... I suspect the change has something to do with the facets,  as those are the only visual tests that have facets.&#xD;&#xA;&#xD;&#xA;I can add info about how expand is used.&#xD;&#xA;&#xD;&#xA;Is the approach I used to set the defaults a reasonable one? At the beginning of each version of `coord_train()`,  it calls `coord_expand_defaults()` to set default expand values. Since it's called from within `coord_train()`,  the &quot;top-level&quot; scales object doesn't get modified,  only the copy referenced inside `coord_train()`." />
      <Message Id="5027412" ParentId="473" UserId="227097" Date="04/09/2012 15:43:28" Content="`facet_panels.grid` uses `scale_dimension(x)`.&#xD;&#xA;" />
      <Message Id="5027477" ParentId="473" UserId="227097" Date="04/09/2012 15:47:04" Content="FacetGrid needs to know the expansion for the calculation of the width/height of each panel.&#xD;&#xA;These are very complex part of facetting and I'm aware of these point on the way of modification with writing new position grid. Finally I have not found good solution.&#xD;&#xA;Now I don't have enough time though... In Japan,  new semester begins April.&#xD;&#xA;&#xD;&#xA;But anyway,  I felt that the coords and facets can be simplified. Sorry I don't know how to do that..." />
      <Message Id="5033904" ParentId="473" UserId="86978" Date="04/09/2012 21:10:51" Content="I modified `ggplot_build()` to set the default expand values by modifying the plot object's scales. See `plot-build.r` for how it works.&#xD;&#xA;&#xD;&#xA;It's not the most elegant,  but it's not clear to me how else to do it. I had to set the default expand values twice -- it had to be done the second time in case one of the scales was created by a stat. For example when you make a histogram,  at first there will not be a `y` scale,  until after you run `stat_bin`.&#xD;&#xA;&#xD;&#xA;This recent change fixes the issue with faceting discussed above. It passes all tests,  and the only changed visual tests are the polar plots that were buggy." />
      <Message Id="5100149" ParentId="473" UserId="4196" Date="04/12/2012 20:40:42" Content="Maybe scale_dimension should come in two forms,  with one that defaults to zero expansion." />
      <Message Id="5101640" ParentId="473" UserId="86978" Date="04/12/2012 21:57:00" Content="I changed it to `waiver()` and rebased it on top of the current master.&#xD;&#xA;&#xD;&#xA;I think that splitting `scale_dimension()` into two is a good idea. As it stands,  I had to add some `is.waive()` checks to the `scale_dimension` functions,  for those cases where the function is called before the default expand values are set in the scale.&#xD;&#xA;&#xD;&#xA;It presently fails some tests involving coord_trans,  I think because `coord_train.trans` references `expand[ 1 ]`.&#xD;&#xA;&#xD;&#xA;Other than those issues,  what remains to be done is:&#xD;&#xA;&#xD;&#xA;* Change the expand_defaults stuff into a panel function&#xD;&#xA;* Figure out at what stage of `ggplot_build` the expansion should happen." />
      <Message Id="5129400" ParentId="473" UserId="227097" Date="04/14/2012 06:56:01" Content="&gt;- Change the expand_defaults stuff into a panel function&#xD;&#xA;- Figure out at what stage of ggplot_build the expansion should happen.&#xD;&#xA;&#xD;&#xA;Please see my commit.&#xD;&#xA;The `expand_default` is in coord function. I think this is reasonable.&#xD;&#xA;" />
      <Message Id="5129419" ParentId="473" UserId="227097" Date="04/14/2012 06:59:45" Content="Now I'm coming to think `scale` may not have `expand`.&#xD;&#xA;In the updated code,  coord has a responsibility for expansion.&#xD;&#xA;If this is okey, I have no idea where the **expand of scale** is required.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="474" Title="coord_train.polar: remove NA's in breaks (fix #422)">
    <Messages>
      <Message Id="0" ParentId="474" UserId="86978" Date="04/06/2012 21:18:07" Content="This fixes #422,  in which NA's show up in the theta breaks when using `coord_polar`.&#xD;&#xA;&#xD;&#xA;I modified `coord_train.polar()` to do something similar to what `coord_train.cartesian()` does (by calling `train_cartesian()`). See line 87 of [ coord-cartesian.r ](https://github.com/hadley/ggplot2/blob/master/R/coord-cartesian-.r).&#xD;&#xA;&#xD;&#xA;Now `coord_train.polar()` removes `NA`'s that are returned from `scale_breaks()`.&#xD;&#xA;&#xD;&#xA;This passes the tests,  and visual test results are unchanged." />
      <Message Id="5003461" ParentId="474" UserId="86978" Date="04/06/2012 22:11:13" Content="I also fixed `coord_train.trans`,  which also returned NA's,  and I added tests.&#xD;&#xA;&#xD;&#xA;The tests also helped me find a different bug in `coord_train.map`,  which I fixed (f272d50c7edc005d85582ea68beab58363c834e7) and pushed to master." />
      <Message Id="5026625" ParentId="474" UserId="4196" Date="04/09/2012 15:03:21" Content="We probably should figure out why they are returning NAs in the first place :/  Can you file a bug on the scales repo?" />
      <Message Id="5026779" ParentId="474" UserId="86978" Date="04/09/2012 15:11:39" Content="I think it's needed for matching labels to values,  or something like that. In an earlier attempt to fix it,  I changed some code to remove the NAs earlier in the pipeline (maybe in `scale_breaks()`?) and it failed some tests that expected the NAs to be there." />
      <Message Id="5027113" ParentId="474" UserId="86978" Date="04/09/2012 15:29:22" Content="I think it failed the the first test here when I modified `scale_breaks()` to not return NAs:&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/inst/tests/test-scales-breaks-labels.r" />
      <Message Id="5027151" ParentId="474" UserId="4196" Date="04/09/2012 15:30:57" Content="Hmmm,  that's vaguely coming back to me.  We may need to re-look at the entire dimensions/breaks/labels process in more depth (but maybe in the future)" />
      <Message Id="5027694" ParentId="474" UserId="227097" Date="04/09/2012 15:59:41" Content="IIRC,  at some time after 0.8.9,  scale_breaks are changed to set NA for out-of-range value.&#xD;&#xA;This is work well with non-positional scales,  since there is no mapping between oob-value and aes.&#xD;&#xA;But now I think positional scales should extend the breaks out-of-range if possible (e.g.,  linear scale).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5101780" ParentId="474" UserId="86978" Date="04/12/2012 22:04:34" Content="The changes have been rebased onto master." />
    </Messages>
  </Topic>
  <Topic Id="475" Title="alpha channel in hex colors broken in ggplot2 0.9 and R 2.15">
    <Messages>
      <Message Id="0" ParentId="475" UserId="1292401" Date="04/07/2012 10:46:45" Content="Hi,  &#xD;&#xA;hex colors in ggplot2 0.9 (in my case after updating to R 2.15) do not support the alpha channel anymore. Here is an example: &#xD;&#xA;    qplot(rnorm(100), rnorm(100), color=&quot;#cc000044&quot;)&#xD;&#xA;ignores the alpha channel. It used to work and &#xD;&#xA;    plot(rnorm(100), rnorm(100), bg=&quot;#cc000044&quot;, pch=21)&#xD;&#xA;also renders the colors correctly. &#xD;&#xA;&#xD;&#xA;There are two reasons why I think ggplot2 should still support hex colors with alpha channel even when alpha=xx is the standard way to set transparency:&#xD;&#xA;&#xD;&#xA;1) ggplot2 0.8X used to allow the setting of the alpha channel in hex colors so 0.9 breaks compatibility with the old code.&#xD;&#xA;2) hex colors with an alpha channel are standard syntax in R and I don't see why ggplot2 shouldn't support that (see the plot example above)&#xD;&#xA;&#xD;&#xA;Note that I started having this problem only after upgrading to R 2.15!&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5013590" ParentId="475" UserId="86978" Date="04/08/2012 05:41:32" Content="In `GeomPoint$draw`,  it uses `pointsGrob` with the following:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;gp=gpar(col=alpha(colour,  alpha),  fill = alpha(fill,  alpha),  fontsize = size * .pt)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It looks like this problem is happening because the `alpha()` function behaves slightly differently now.&#xD;&#xA;&#xD;&#xA;Previously,  the `alpha()` function was in ggplot2,  and now it's in the scales package. It looks like this commit changed how it handles the fourth (alpha) byte of a color: hadley/scales@e04a9b2d1f90605a1f0e721f34c8fa160af16fa8&#xD;&#xA;&#xD;&#xA;In the old (0.8.9) version,  if the color is specified as RGB,  then it uses the `alpha` argument to set the A value. But if the color is specifed as RGBA,  then it ignores the `alpha` arg:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; alpha(&quot;#000000&quot;,  0.5)&#xD;&#xA;[ 1 ] &quot;#00000080&quot;&#xD;&#xA;&gt; alpha(&quot;#000000&quot;,  1)&#xD;&#xA;[ 1 ] &quot;#000000FF&quot;&#xD;&#xA;&#xD;&#xA;&gt; alpha(&quot;#000000aa&quot;,  0.5)&#xD;&#xA;[ 1 ] &quot;#000000AA&quot;&#xD;&#xA;&gt; alpha(&quot;#000000aa&quot;,  1)&#xD;&#xA;[ 1 ] &quot;#000000AA&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;In the current version,  with `alpha()` from scales,  it always ignores the fourth (A) byte and only uses the `alpha` argument:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; alpha(&quot;#000000&quot;,  0.5)&#xD;&#xA;[ 1 ] &quot;#00000080&quot;&#xD;&#xA;&gt; alpha(&quot;#000000&quot;,  1)&#xD;&#xA;[ 1 ] &quot;#000000FF&quot;&#xD;&#xA;&#xD;&#xA;&gt; alpha(&quot;#000000aa&quot;,  0.5)&#xD;&#xA;[ 1 ] &quot;#00000080&quot;&#xD;&#xA;&gt; alpha(&quot;#000000aa&quot;,  1)&#xD;&#xA;[ 1 ] &quot;#000000FF&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If this is to be changed,  the question is,  how *should* the `alpha()` function behave -- what should happen when the color is RGBA,  and a value is given for `alpha`?" />
      <Message Id="5014244" ParentId="475" UserId="1292401" Date="04/08/2012 09:11:33" Content="Good point and I am not sure what the right behavior is. A warning massage would be useful for sure. I like the behavior with the new guides. legend=F still works to disable a legend but produces a warning that guide=none is now that standard. &#xD;&#xA;So a hex color with an alpha channel and without a alpha argument set could produce the 'correct' color but display a warning massage similar to the one for legend=F.&#xD;&#xA;hex color with alpha + alpha argument could behave as it does right now and display a warning message that the alpha channel is ignored. &#xD;&#xA;&#xD;&#xA;An alternative would be to add the different alpha values from the color and the alpha value so that the final color is more transparent. But I am not sure whether the is desired. " />
      <Message Id="5098181" ParentId="475" UserId="86978" Date="04/12/2012 19:02:05" Content="This is probably related to #335." />
      <Message Id="5098279" ParentId="475" UserId="86978" Date="04/12/2012 19:06:28" Content="I think the idea of giving a warning is good,  but one difficulty is detecting when this happens. If you *don't* set the value of `alpha`,  then somewhere along the line,  ggplot sets `alpha=1`. By the time it gets to the part where `alpha()` is called,  it can't distinguish between cases where `alpha` was not set vs. `alpha` was set to 1." />
      <Message Id="5099644" ParentId="475" UserId="4196" Date="04/12/2012 20:12:47" Content="I think the best way to fix this is to default alpha to NA,  and then modify `alpha()` to not overwrite alpha when it's missing." />
    </Messages>
  </Topic>
  <Topic Id="476" Title="scale_***_hue should reference discrete_scale">
    <Messages>
      <Message Id="0" ParentId="476" UserId="18445" Date="04/11/2012 15:26:06" Content="It currently references continuous_scale" />
      <Message Id="5071408" ParentId="476" UserId="4196" Date="04/11/2012 15:27:00" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="477" Title="stat_density2d bandwidth parameter not recognized">
    <Messages>
      <Message Id="0" ParentId="477" UserId="129072" Date="04/11/2012 15:53:01" Content="In the documentation it says extra parameters to stat_density2d are passed along to MASS::kde2d,  but this is not the case for the h parameter:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;f &lt;- data.frame(&#xD;&#xA;        x=rnorm(100), &#xD;&#xA;        y=rnorm(100))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(f) +&#xD;&#xA;  stat_density2d(aes(x,  y,  fill=..density..),  h=.1,  geom=&quot;raster&quot;,  contour=F)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;print(p)&#xD;&#xA;```" />
      <Message Id="5072151" ParentId="477" UserId="4196" Date="04/11/2012 15:58:16" Content="The easiest way to debug this sort of problem is to look at the layer:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; stat_density2d(aes(x,  y,  fill=..density..),  h=.1,  geom=&quot;raster&quot;,  contour=F)&#xD;&#xA;mapping: x = x,  y = y,  fill = ..density.. &#xD;&#xA;geom_raster: hjust = 0.1 &#xD;&#xA;stat_density2d: na.rm = FALSE,  contour = FALSE,  n = 100 &#xD;&#xA;position_identity: (width = NULL,  height = NULL)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;where you can see `h = 0.1` has been caught by the `hjust` parameter.  You can work around this by manually specifying geom and stat params:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; stat_density2d(aes(x,  y,  fill=..density..),  geom=&quot;raster&quot;,  stat_params = list(h = 0.1,  contour = F),  geom_params = list())&#xD;&#xA;mapping: x = x,  y = y,  fill = ..density.. &#xD;&#xA;geom_raster:  &#xD;&#xA;stat_density2d: h = 0.1,  contour = FALSE &#xD;&#xA;position_identity: (width = NULL,  height = NULL)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Unfortunately you have to set `geom_params` to an empty list because of a bug." />
      <Message Id="5072307" ParentId="477" UserId="129072" Date="04/11/2012 16:04:20" Content="Thanks Hadley" />
    </Messages>
  </Topic>
  <Topic Id="478" Title="Add plot.ggplot">
    <Messages>
      <Message Id="0" ParentId="478" UserId="4196" Date="04/11/2012 19:24:49" Content="As alias for `print.ggplot`" />
    </Messages>
  </Topic>
  <Topic Id="479" Title="Better control over clipping">
    <Messages>
      <Message Id="0" ParentId="479" UserId="4196" Date="04/11/2012 19:42:23" Content="Should be able to adjust clipping so (e.g.) text prints outside the plot viewport." />
      <Message Id="5077295" ParentId="479" UserId="4196" Date="04/11/2012 19:45:01" Content="And when points are placed on the margins with inf,  -inf" />
      <Message Id="5353030" ParentId="479" UserId="18970" Date="04/26/2012 09:55:42" Content="Maybe you'd want to have one clipGrob() attached to each layer,  so that e.g ablines don't go wild outside the plot panel when you turn clipping off for some text annotations." />
      <Message Id="6213613" ParentId="479" UserId="4196" Date="06/08/2012 21:36:04" Content="Moving to 0.9.3 - this should be tackled as part of the stats/geom rewrite. " />
      <Message Id="35940150" ParentId="479" UserId="4196" Date="02/24/2014 21:21:27" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="480" Title="coord_map plus geom_map doesn't work">
    <Messages>
      <Message Id="0" ParentId="480" UserId="4196" Date="04/11/2012 19:53:07" Content="```R&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(reshape2) # for melt&#xD;&#xA;crimes &lt;- data.frame(state = tolower(rownames(USArrests)),  USArrests)&#xD;&#xA;crimesm &lt;- melt(crimes,  id = 1)&#xD;&#xA;states_map &lt;- map_data(&quot;state&quot;)&#xD;&#xA;ggplot(crimes,  aes(map_id = state)) + geom_map(aes(fill = Murder),  map = states_map) + expand_limits(x = states_map$long,  y = states_map$lat) + coord_map()&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="5123325" ParentId="480" UserId="4196" Date="04/13/2012 19:27:16" Content="Fixed in cc0e53b865d0972b8f4138b2e07d5524ce67b5a2" />
    </Messages>
  </Topic>
  <Topic Id="481" Title="proposed geom to annotate significant differences">
    <Messages>
      <Message Id="0" ParentId="481" UserId="1422023" Date="04/11/2012 21:23:19" Content="I was interested in the possibility of a geom dedicated to indicating significantly different quantities-- [ this ](http://chestjournal.chestpubs.org/content/119/1/37/F2.medium.gif)  is of a type which is commonly used to demonstrate the significance of some parametric test. &#xD;&#xA;&#xD;&#xA;ggplot can handle this just fine -- [ here's ](https://lh5.googleusercontent.com/-JmQSJAdlfSI/T38cGclYG8I/AAAAAAAAIlo/DlI06-KNKQ4/s1600/mean+differences+by+court+and+retirement+party.png)  my attempt. As you can probably tell,  I used geom_line for the brackets and then geom_text to annotate the brackets. my (really inelegant) code is [ here ](http://pastebin.com/ZBtceBWV)&#xD;&#xA;&#xD;&#xA;i think this would make a moderately useful new geom. a user would be asked to  nominate the two breaks on an axis they intended to compare,  and then another option would ask for the user's intended textual annotation. " />
      <Message Id="12154736" ParentId="481" UserId="3246373" Date="01/11/2013 17:35:34" Content="I vote for this feature." />
      <Message Id="35069756" ParentId="481" UserId="1401053" Date="02/14/2014 09:48:18" Content="This has my vote,  too. It's the one thing I really miss in ggplot2." />
      <Message Id="35940188" ParentId="481" UserId="4196" Date="02/24/2014 21:21:35" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="482" Title="Split geom_hline into geom and annotation (fixes #426)">
    <Messages>
      <Message Id="0" ParentId="482" UserId="86978" Date="04/12/2012 03:13:03" Content="This fixes #426. As discussed,  it splits `geom_hline` into a geom and annotation.&#xD;&#xA;&#xD;&#xA;If this looks like the right approach,  I can do the same for vline and abline. If so,  should I put `annotate_hline`,  `annotate_vline`,  `annotate_abline` all in one file since they're quite simple? Or they could be added to their respective `geom-Xline.r` files.&#xD;&#xA;&#xD;&#xA;Also,  some of the visual tests will have to be updated." />
      <Message Id="5084445" ParentId="482" UserId="86978" Date="04/12/2012 04:40:58" Content="It also looks like there's a lot of code in the `stat_Xline` functions that's intended to remove duplicate lines. Can I remove that stuff? It would simplify the code a lot.&#xD;&#xA;&#xD;&#xA;Also,  stat_abline gives default values for slope and intercept. Is that necessary?" />
      <Message Id="5084754" ParentId="482" UserId="86978" Date="04/12/2012 05:25:46" Content="The code for the line stats is a bit simpler with the duplicate stuff removed. It might be a good idea to print a message when using a geom with fixed intercept values,  though,  because it's easy to do accidentally. I also removed the default values for `StatAbline`.&#xD;&#xA;&#xD;&#xA;Here's some code that tests what should be expected when the duplicate line prevention code is removed:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(x = wt,  y = mpg)) + geom_point()&#xD;&#xA;&#xD;&#xA;p + geom_abline(aes(intercept = mpg,  slope = mpg/5),  alpha = .2) # Lots of lines&#xD;&#xA;p + geom_abline(intercept = 20,  slope = 1,  alpha = .2)      # Should be dark&#xD;&#xA;p + geom_abline(aes(intercept = 20,  slope = 1),  alpha = .2) # Should be dark&#xD;&#xA;p + annotate_abline(intercept = 20,  slope = 1,  alpha = .2)  # Should be light&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_vline(aes(xintercept = wt),  alpha=.2)   # Lines through each point&#xD;&#xA;p + geom_vline(xintercept = 3,  alpha=.2)         # Should be dark&#xD;&#xA;p + geom_vline(aes(xintercept = 3),  alpha=.2)    # Should be dark&#xD;&#xA;p + annotate_vline(xintercept = 3,  alpha=.2)     # Should be light&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_hline(aes(yintercept = mpg),  alpha=.2)   # Lines through each point&#xD;&#xA;p + geom_hline(yintercept = 20,  alpha=.2)         # Should be dark&#xD;&#xA;p + geom_hline(aes(yintercept = 20),  alpha=.2)    # Should be dark&#xD;&#xA;p + annotate_hline(yintercept = 20,  alpha=.2)     # Should be light&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="5090134" ParentId="482" UserId="4196" Date="04/12/2012 12:48:19" Content="Looks good! I wonder now if the stat functions could be removed altogether and just moved into the geoms?  I'm trying to remember why I had separate stat functions - it's probably something to do with either correctly setting scale limits,  or with non-Cartesian coordinates.  If you have tests for those and they work fine,  I think we could go ahead and remove the stat functions." />
      <Message Id="5090139" ParentId="482" UserId="4196" Date="04/12/2012 12:48:39" Content="And we might not want to include this in 0.9.1 since it breaks backward compatability" />
      <Message Id="5092881" ParentId="482" UserId="86978" Date="04/12/2012 15:00:30" Content="Regarding removing the stat: it apparently also can work if passed a function for `intercept`. I think if that capability were removed,  it should be simple to move the remaining code into the geom." />
      <Message Id="5092922" ParentId="482" UserId="4196" Date="04/12/2012 15:02:41" Content="I now think that should be removed - it's not elegant,  and it's not inline with the way that the rest of ggplot2 works." />
      <Message Id="5095677" ParentId="482" UserId="86978" Date="04/12/2012 17:03:27" Content="OK,  I removed the stat and the examples I posted above still work. The code is much simpler now.&#xD;&#xA;&#xD;&#xA;What remains to (possibly) be done:&#xD;&#xA;&#xD;&#xA;* Merge help pages&#xD;&#xA;* Move `annotate_Xline` functions into `annotate()`" />
      <Message Id="5095958" ParentId="482" UserId="86978" Date="04/12/2012 17:17:00" Content="Another thought: as long as we're breaking compatibility,  all these geoms could probably be collapsed into a single one,  like `geom_line`.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;It could take `xintercept`,  `yintercept`,  and `slope`. The `xintercept` and `yintercept` would be incompatible,   but you could use `slope` with either x or y intercept." />
      <Message Id="5096484" ParentId="482" UserId="4196" Date="04/12/2012 17:42:43" Content="I deliberately made it three separate functions because I think it makes more sense to keep behaviours separate,  especially when you start having combinations of arguments that don't make sense." />
      <Message Id="5096578" ParentId="482" UserId="463252" Date="04/12/2012 17:47:35" Content="So a horizontal line would be specified with `yintercept=...` and `slope=0`,  a vertical line with `xintercept=...` and `slope=Inf`? Could the value of `slope` be inferred if missing and only one of `xintercept` or `yintercept` is specified (the assumption being if no slope is specified,  a horizontal or vertical line is desired)?" />
      <Message Id="5096941" ParentId="482" UserId="86978" Date="04/12/2012 18:06:00" Content="@BrianDiggs I was thinking of having `slope` default to `NULL`,  and infer whether it's horizontal or vertical by `yintercept` or `xintercept` is present.&#xD;&#xA;&#xD;&#xA;Come to think of it,  you can always specify a line with two of the three: `xintercept`,  `yintercept`,  and `slope`. And if you just have `xintercept` or `yintercept`,  you can assume that it's vertical or horizontal.&#xD;&#xA;&#xD;&#xA;Here's what combinations would be valid:&#xD;&#xA;&#xD;&#xA;| xintercept | yintercept | slope | valid? |&#xD;&#xA;| --- | --- | --- | --- |&#xD;&#xA;| yes | yes | yes | no |&#xD;&#xA;| yes | yes | no | yes |&#xD;&#xA;| yes | no |  yes | yes |&#xD;&#xA;| yes | no | no | yes |&#xD;&#xA;| no | yes | yes | yes |&#xD;&#xA;| no | yes | no | yes |&#xD;&#xA;| no | no | yes | no |&#xD;&#xA;| no | no | no | no |&#xD;&#xA;" />
      <Message Id="5098580" ParentId="482" UserId="4196" Date="04/12/2012 19:19:59" Content="Yes,  this is the way that `abline` works in base R - and I don't like it.  If you need a table to figure out what the valid combination of arguments is,  I think there's something wrong with your function!" />
      <Message Id="5123332" ParentId="482" UserId="86978" Date="04/13/2012 19:27:26" Content="I've consolidated the docs into `geom-hline.r`,  and clarified them a bit.&#xD;&#xA;&#xD;&#xA;There's one inconsistency between `annotate` form of `abline` and the others. With `hline` and `vline`,  you can pass a vector as the intercept values,  but with `abline`,  you can't:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Works&#xD;&#xA;p + annotate(&quot;hline&quot;,  yintercept = seq(10,  30,  by = 5))&#xD;&#xA;p + annotate(&quot;vline&quot;,  xintercept = 1:5)&#xD;&#xA;&#xD;&#xA;# Doesn't work&#xD;&#xA;p + annotate(&quot;abline&quot;,  intercept = c(17,  22),  slope = c(0.5,  1))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think this is because `annotate()` captures `xintercept` and `yintercept` explicitly and puts them in a list that serves as the data passed to `geom_xxx`,  but it doesn't capture `intercept` and `slope`,  so they just get passed as `...` args,  which are expected to be single values.&#xD;&#xA;&#xD;&#xA;In general,  I like the idea of being able to pass vectors as aesthetic properties using `annotate` -- then it could be used to draw any sort of geom based on vector values. This may require some retooling of how it works,  though." />
      <Message Id="5123371" ParentId="482" UserId="4196" Date="04/13/2012 19:29:25" Content="Oh hmmm,  good catch.  The problem in general is that putting other aesthetics in the data frame will cause them to be mapped - maybe we need some way to turn that off?  (But that seems like it would add a lot of complexity for little gain)" />
      <Message Id="5123529" ParentId="482" UserId="86978" Date="04/13/2012 19:38:42" Content="Could we just `rep` all the passed-in vectors to be the same length as the longest vector,  and then put them all into a data frame? That way,  none of the aesthetics would have to hard-coded into `annotate()`. Are values for `...` used for anything else besides aesthetic properties?&#xD;&#xA;" />
      <Message Id="5123547" ParentId="482" UserId="4196" Date="04/13/2012 19:39:56" Content="But how would you stop them from being mapped?  i.e. if you do `annotate(&quot;text&quot;,  label = &quot;My label&quot;,  colour = &quot;blue&quot;)` you don't want the scale to map blue to something else." />
      <Message Id="5123782" ParentId="482" UserId="4196" Date="04/13/2012 19:55:08" Content="The bug with `geom_abline` and multiple slopes/intercepts is probably related to https://github.com/hadley/ggplot2/issues/31" />
      <Message Id="5161511" ParentId="482" UserId="86978" Date="04/16/2012 20:23:17" Content="Regarding stopping vars from being mapped,  I can't see a way to avoid it right now. What if there were an option to pass a &quot;raw&quot; (unmapped) data frame to `layer()`?" />
      <Message Id="5161735" ParentId="482" UserId="4196" Date="04/16/2012 20:33:14" Content="I think that's something I explored a bit in the layers repo - lets not worry about it for now." />
      <Message Id="35940364" ParentId="482" UserId="4196" Date="02/24/2014 21:22:19" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="483" Title="Add position_beeswarm">
    <Messages>
      <Message Id="0" ParentId="483" UserId="7827" Date="04/12/2012 07:05:56" Content="Using jitter is nice for many points. Sometimes I have datasets with differing number of points,  and jitter looks strange when there are only few points. I would prefer them to be centered,  like in the [ beeswarm ](http://cran.r-project.org/web/packages/beeswarm/index.html) plot. &#xD;&#xA;&#xD;&#xA;There exists a solution to use the [ output of beeswarm for ggplot ](http://denishaine.wordpress.com/2011/09/16/beeswarm-plot-with-ggplot2/),  but this breaks down when I want to use facet_grid. &#xD;&#xA;&#xD;&#xA;Thus,  my feature request is to add a position_beeswarm option or something similar that works well for few and lots of points." />
      <Message Id="24949707" ParentId="483" UserId="274736" Date="09/23/2013 20:03:53" Content="FYI,  this github clone has a somewhat functioning implemention of position_beeswarm:&#xD;&#xA;&#xD;&#xA;  https://github.com/amackey/ggplot2&#xD;&#xA;&#xD;&#xA;because the positioning occurs separate from plotting,  it seems impossible to set the beeswarm cex param automatically,  so user code has to be used as such:&#xD;&#xA;&#xD;&#xA;qplot(...,  position=position_beeswarm(method=&quot;swarm&quot;,  corral=&quot;none&quot;,  extra=list(cex=4)))" />
      <Message Id="35940425" ParentId="483" UserId="4196" Date="02/24/2014 21:22:37" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="484" Title="Annotation limits are not scaled">
    <Messages>
      <Message Id="0" ParentId="484" UserId="4196" Date="04/12/2012 13:04:33" Content="" />
      <Message Id="5208432" ParentId="484" UserId="4196" Date="04/18/2012 20:49:03" Content="Duplicate of #500" />
    </Messages>
  </Topic>
  <Topic Id="485" Title="Annotation limits are not scaled">
    <Messages>
      <Message Id="0" ParentId="485" UserId="4196" Date="04/12/2012 13:04:33" Content="" />
      <Message Id="5096648" ParentId="485" UserId="463252" Date="04/12/2012 17:51:10" Content="Duplicate of Issue #484?" />
      <Message Id="5098719" ParentId="485" UserId="4196" Date="04/12/2012 19:26:24" Content="Doh" />
    </Messages>
  </Topic>
  <Topic Id="486" Title="Allow annotating in specific facets">
    <Messages>
      <Message Id="0" ParentId="486" UserId="86978" Date="04/12/2012 20:26:01" Content="Allow passing in a data frame that allows specifying facet." />
      <Message Id="5100340" ParentId="486" UserId="4196" Date="04/12/2012 20:49:59" Content="Called something like `filter` or `subset` or `facet`" />
      <Message Id="6213615" ParentId="486" UserId="4196" Date="06/08/2012 21:36:13" Content="This is harder to do than I thought.  The problem is a specification like:&#xA;&#xA;`annotate(x = 1,  y = 1,  labels = c(&quot;a&quot;,  &quot;b&quot;),  facets = data.frame(d = 1:2))`&#xA;&#xA;Because the labels are not in the data frame the facets have no information about how to split them up.  I don't see any easy way to resolve this,  except adding a new parameter to a layer that controls which aesthetics are scaled,  and which are left as is.  This would make `annotate` substantially` simpler as it would only have to construct a single data frame,  and then make sure that only position aesthetics are scaled.&#xA;&#xA;I'm not sure where else this would be useful - it's possibly useful in `qplot`,  and possibly if you're using a facet specific raster as a background,  and want to use fill for another variable.  It does seem like a useful generalisation though,  and I can imagine there's potential use cases that I've missed.&#xA;&#xA;A possible specification could be (e.g.) `aes(colour = I(colour))`" />
      <Message Id="11241393" ParentId="486" UserId="78048" Date="12/11/2012 12:19:03" Content="I don't know much about the backbone of ggplot2 but couldn't this programmed like the positioning of legends,  i.e.,  relative to the entire plot?" />
      <Message Id="35940450" ParentId="486" UserId="4196" Date="02/24/2014 21:22:45" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="487" Title="Annotate needs more examples">
    <Messages>
      <Message Id="0" ParentId="487" UserId="4196" Date="04/12/2012 20:26:48" Content="And need more examples in geoms that are often used as annotations like `geom_point`,  `geom_rect` and `geom_text`." />
    </Messages>
  </Topic>
  <Topic Id="488" Title="Add better help for annotate()">
    <Messages>
      <Message Id="0" ParentId="488" UserId="86978" Date="04/13/2012 19:30:36" Content="This is some slightly more informative help for `annotate()`. Suggestions on other improvements are welcome. Example code would be especially helpful.&#xD;&#xA;&#xD;&#xA;Fix #487" />
    </Messages>
  </Topic>
  <Topic Id="489" Title="annotate() won't take a vector for non-hard-coded arguments">
    <Messages>
      <Message Id="0" ParentId="489" UserId="86978" Date="04/13/2012 20:05:11" Content="`annotate()` can take a vector for `x`,  `xmin`,  and other hard-coded arguments,  but not for others,  such as `label`.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# OK&#xD;&#xA;ggplot(mtcars,  aes(x = wt,  y = mpg)) + geom_point() +&#xD;&#xA;  annotate(&quot;text&quot;,  x=2,  y=20,  label=&quot;my label&quot;)&#xD;&#xA;&#xD;&#xA;# Error&#xD;&#xA;ggplot(mtcars,  aes(x = wt,  y = mpg)) + geom_point() +&#xD;&#xA;  annotate(&quot;text&quot;,  x=2:3,  y=20:21,  label=c(&quot;my label&quot;,  &quot;label 2&quot;))&#xD;&#xA;# Error: When _setting_ aesthetics,  they may only take one value. Problems: label&#xD;&#xA;&#xD;&#xA;# This may need to wait for #482 to be merged before it gives this particular error&#xD;&#xA;ggplot(mtcars,  aes(x = wt,  y = mpg)) + geom_point() +&#xD;&#xA;  annotate(&quot;abline&quot;,  intercept = c(17,  22),  slope = c(0.5,  1))&#xD;&#xA;# Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;intercept&quot;,  value = c(17,  22)) : &#xD;&#xA;#  replacement has 2 rows,  data has 1&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="490" Title="Fix warnings for coord_polar minor breaks">
    <Messages>
      <Message Id="0" ParentId="490" UserId="86978" Date="04/13/2012 21:32:08" Content="This fixes the warnings for `coord_polar` introduced by #474.&#xD;&#xA;&#xD;&#xA;Let me know if it can be done more cleanly." />
    </Messages>
  </Topic>
  <Topic Id="491" Title="Removing remaining documentation referrences to reshape">
    <Messages>
      <Message Id="0" ParentId="491" UserId="463252" Date="04/13/2012 21:49:43" Content="ggpcp stated it was using reshape::melt,  but it is actually&#xD;&#xA;using reshape2::melt.&#xD;&#xA;&#xD;&#xA;The scale arguments to ggorder and ggstructure had a scale&#xD;&#xA;argument that was no longer used (corresponding argument in&#xD;&#xA;ggpcp removed in 030fadf59a0fd896865b28fd9e76da9698164ec2.&#xD;&#xA;Removed this argument (and its documentation which referenced&#xD;&#xA;reshape).&#xD;&#xA;&#xD;&#xA;Since I didn't have reshape installed on my newest R installation,  these references were generating a NOTE in R CMD check for me. Since ggplot2 doesn't rely on reshape,  but rather reshape2,  now,  I figured I would hunt down the source." />
      <Message Id="5125932" ParentId="491" UserId="4196" Date="04/13/2012 22:08:59" Content="Looks good - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="492" Title="coord_polar doesn't work with scale_x_continuous(breaks=NULL)">
    <Messages>
      <Message Id="0" ParentId="492" UserId="86978" Date="04/13/2012 22:30:27" Content="```R&#xD;&#xA;qplot(1:5,  1:5) + scale_x_continuous(breaks=NULL)  + coord_polar()&#xD;&#xA;# Error in if (ends_apart &lt; 0.05) {  : argument is of length zero&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The error is in `coord_render_fg.polar()`,  in `coord_polar.r`. I think it's trying to merge the two ends of the theta scale; this section of code maybe can be skipped when there are no theta breaks." />
      <Message Id="5226210" ParentId="492" UserId="227097" Date="04/19/2012 16:45:13" Content="Fixed in the branch wch/fix/polar-spacing" />
    </Messages>
  </Topic>
  <Topic Id="493" Title="now title is outside region of panel+guide (Fixes #432)">
    <Messages>
      <Message Id="0" ParentId="493" UserId="227097" Date="04/14/2012 03:33:14" Content="" />
    </Messages>
  </Topic>
  <Topic Id="494" Title="error when using a date variable called 'date' for colour scale">
    <Messages>
      <Message Id="0" ParentId="494" UserId="78918" Date="04/15/2012 16:01:56" Content=" The following code is taken (slightly simplified) from&#xD;&#xA;http://stackoverflow.com/questions/10155058/plot-correlations-between-2-y-axes&#xD;&#xA;&#xD;&#xA;  Basically,  if I have a variable name called 'date',  my plot fails, &#xD;&#xA;whereas it works if I either use dat$date (bad practice,  I know) or rename the variable.&#xD;&#xA;   &#xD;&#xA;&#xD;&#xA;dat &lt;- data.frame( words = c( &quot;Aliens&quot;,  &quot;Aliens&quot;,  &quot;Constitution&quot;,  &quot;Constitution&quot;,     &quot;Entitled&quot;,  &quot;Entitled&quot; ), &#xD;&#xA;              dates =  as.Date( c (&quot;2010-01-05&quot;,  &quot;2010-02-13&quot;,  &quot;2010-04-20&quot;,  &quot;2010-06-11&quot;, &quot;2010-03-18&quot;,  &quot;2010-09-13&quot; )),  &#xD;&#xA;                    Rep =    c( .18,  .14,  .16,  .45,  .33,  .71 ),  Dem = c( .16,  .38,  .24,  .11,  .59,  .34 ))&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;ggplot(dat, aes(Rep, Dem, colour=date))+geom_point()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Fails with:&#xD;&#xA; Error in data.frame(x = c(0.18,  0.14,  0.16,  0.45,  &#xD;&#xA;   0.33,  0.71),  y = c(0.16,   : &#xD;&#xA;  arguments imply differing number of rows: 6,  0&#xD;&#xA;&#xD;&#xA; either of the following hacks work:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;ggplot(dat, aes(Rep, Dem, colour=dat$date))+geom_point()&#xD;&#xA;dat$ddate &lt;- dat$date&#xD;&#xA;ggplot(dat, aes(Rep, Dem, colour=ddate))+geom_point()&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5140159" ParentId="494" UserId="227097" Date="04/15/2012 16:05:18" Content="```&#xD;&#xA;ggplot(dat, aes(Rep, Dem, colour=date))+geom_point()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;should be&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat, aes(Rep, Dem, colour=dates))+geom_point()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;You cannot use partial matching for aes.&#xD;&#xA;" />
      <Message Id="5140171" ParentId="494" UserId="78918" Date="04/15/2012 16:07:27" Content="doh!  Sorry,  thanks for your time. I'm glad you're not Brian Ripley." />
    </Messages>
  </Topic>
  <Topic Id="495" Title="Summary stats with continuous colour or fill result in error">
    <Messages>
      <Message Id="0" ParentId="495" UserId="86978" Date="04/15/2012 20:26:02" Content="This is from https://groups.google.com/forum/?fromgroups#!topic/ggplot2/dMe29LKICRQ.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;set.seed(121)&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=rnorm(30),  c=rnorm(30))&#xD;&#xA;&#xD;&#xA;# OK&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  colour=c)) + geom_point(stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;# Error: colour and fill&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  colour=c)) + geom_point(stat=&quot;summary&quot;,  fun.y=&quot;mean&quot;)&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=c)) + geom_point(stat=&quot;summary&quot;,  fun.y=&quot;mean&quot;)&#xD;&#xA;# Error in xyz %*% solve(M) : non-conformable arguments&#xD;&#xA;&#xD;&#xA;# OK: alpha and size&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  alpha=c)) + geom_point(stat=&quot;summary&quot;,  fun.y=&quot;mean&quot;)&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  size=c)) + geom_point(stat=&quot;summary&quot;,  fun.y=&quot;mean&quot;)&#xD;&#xA;```" />
      <Message Id="5209262" ParentId="495" UserId="227097" Date="04/18/2012 21:29:45" Content="Should summary on continuous variable work?&#xD;&#xA;The alpha and size example,  no error but it seems that they are simple ignored." />
      <Message Id="5247599" ParentId="495" UserId="4196" Date="04/20/2012 16:07:37" Content="Yes,  the bug is really something to do with colour scales,  but it still needs to be fixed." />
      <Message Id="5247827" ParentId="495" UserId="4196" Date="04/20/2012 16:18:29" Content="https://github.com/hadley/scales/commit/9f4ff0662e9ecb3f38677b46e39e0e0bcec658e7" />
    </Messages>
  </Topic>
  <Topic Id="496" Title="stat_smooth doesn't pass non-formal arguments to model function">
    <Messages>
      <Message Id="0" ParentId="496" UserId="86978" Date="04/15/2012 21:06:23" Content="`stat_smooth` doesn't pass non-formal arguments to model functions because of the way `safe.call()` is used. For example,  with the `locfit()` model function,  the `kern` argument is a non-formal argument (it's taken in `...` and passed along to another function) and so when `stat_smooth()` is called with `method=locfit,  kern=&quot;rect&quot;`,  the kern argument doesn't get passed to the `locfit()` function.&#xA;&#xA;```r&#xA;require(locfit)&#xA;&#xA;# sim data&#xA;set.seed(123)&#xA;data &lt;- data.frame(x=runif(1000),  y=rbinom(1000, 1, 0.5))&#xA;&#xA;&#xA;# With kern = &quot;rect&quot; :  lines do not match&#xA;model &lt;- locfit(y ~ lp(x,  h=0.2),  data=data,  kern=&quot;rect&quot;)&#xA;xseq &lt;- seq(0,  1,  length = 100)&#xA;pred &lt;- predict(model,  newdata = data.frame(x = xseq))&#xA;data.locfit &lt;- data.frame(x=xseq,  y=pred)&#xA;&#xA;ggplot(data, aes(x=x, y=y)) + &#xA;  stat_smooth(method=&quot;locfit&quot;, formula = y~lp(x, h=0.2),  kern = &quot;rect&quot;) + &#xA;  geom_line(data=data.locfit, aes(x=x, y=y)) +&#xA;  ylim(0, 1)&#xA;&#xA;&#xA;# Without kern = &quot;rect&quot; :  lines match&#xA;model &lt;- locfit(y ~ lp(x,  h=0.2),  data=data)&#xA;xseq &lt;- seq(0,  1,  length = 100)&#xA;pred &lt;- predict(model,  newdata = data.frame(x = xseq))&#xA;data.locfit &lt;- data.frame(x=xseq,  y=pred)&#xA;&#xA;ggplot(data, aes(x=x, y=y)) + &#xA;  stat_smooth(method=&quot;locfit&quot;, formula = y~lp(x, h=0.2)) + &#xA;  geom_line(data=data.locfit, aes(x=x, y=y)) +&#xA;  ylim(0, 1)&#xA;```" />
      <Message Id="6213621" ParentId="496" UserId="4196" Date="06/08/2012 21:36:30" Content="Pushing to 0.9.3. after the stat/geom rewrite,  we should have enough information to deal with this properly." />
      <Message Id="6265190" ParentId="496" UserId="1841518" Date="06/12/2012 08:11:40" Content="An ugly turn around to pass the ... arguments is the following:&#xA;```R&#xA;############## overload the locfit constructor&#xA;locfit.smooth &lt;- function(formula, data, weights=NULL, ...){ &#xA;   v=list(...)&#xA;   vv=v[ [ &quot;...&quot; ] ]&#xA;print(vv$kern)&#xA;   l=locfit(formula=formula,  data=data, &#xA;        kern=ifelse(is.null(vv$kern), &quot;rect&quot;, vv$kern))&#xA;   return(l)&#xA; }&#xA;&#xA;# With kern = &quot;rect&quot; :  lines match now&#xA;model &lt;- locfit(y ~ lp(x,  h=0.2),  data=data,  kern=&quot;rect&quot;)&#xA;xseq &lt;- seq(0,  1,  length = 100)&#xA;pred &lt;- predict(model,  newdata = data.frame(x = xseq))&#xA;data.locfit &lt;- data.frame(x=xseq,  y=pred)&#xA;&#xA;############## use this constructor in stat_smooth with ...=list( syntax&#xA;ggplot(data, aes(x=x, y=y)) + &#xA;  stat_smooth(method=locfit.smooth, formula = y~lp(x, h=0.2),  ...=list(kern = &quot;rect&quot;)) + &#xA;  geom_line(data=data.locfit, aes(x=x, y=y)) +&#xA;  ylim(0, 1)&#xA;&#xA;```" />
      <Message Id="7463390" ParentId="496" UserId="86978" Date="08/02/2012 18:09:43" Content="The problem is that functions like `locfit` use `...` and expect those arguments to get passed along to another function. In the example above,  I think `locfit() ends up calling `locfit.raw()`,  and passes along the `...`.&#xA;&#xA;This line in `StatSmooth$calculate` makes sure that only the formal args are passed along:&#xA;&#xA;```R&#xA;model &lt;- safe.call(method.special,  list(...),  names(formals(method)))&#xA;```&#xA;&#xA;I'm not sure that it's possible to fix this issue without making `safe.call` less safe,  or adding complexity.&#xA;&#xA;One possible way is to add an argument `args` to `stat_smooth`,  in which you pass it a list that is used for arguments,  similar to `do.call`:&#xA;&#xA;```R&#xA;stat_smooth(method=&quot;locfit&quot;,  args = list(formula = y~lp(x, h=0.2),  kern = &quot;rect&quot;))&#xA;```&#xA;&#xA;This would make it clear which arguments go to the smooth function,  and which go to `stat_smooth`. But this is inelegant and would break existing code.&#xA;&#xA;" />
      <Message Id="7463755" ParentId="496" UserId="4196" Date="08/02/2012 18:22:01" Content="Hmmmm - we may need to rethink this as part of the geom/stat rewrite.  There are just too many ... floating around for this strategy to succeed in general.  Let's push this to 0.10." />
      <Message Id="35940505" ParentId="496" UserId="4196" Date="02/24/2014 21:22:57" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="497" Title="facet_grid: as.table ignored">
    <Messages>
      <Message Id="0" ParentId="497" UserId="4196" Date="04/16/2012 13:31:36" Content="e.g.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + facet_grid(cyl ~ .,  as.table = F)&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + facet_grid(cyl ~ .,  as.table = T)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;because `layout_grid` lacks an `as.table` argument" />
    </Messages>
  </Topic>
  <Topic Id="498" Title="Inconsistent behavior of geom_line and geom_smooth wrt. color">
    <Messages>
      <Message Id="0" ParentId="498" UserId="185075" Date="04/16/2012 16:59:49" Content="`geom_smooth` does not pick up its color from a `scale_color_manual` unless `color` is explicitly added to the aesthetic; `geom_line` does.  Perhaps this is best explained by illustration:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;foo &lt;- data.frame(x = rnorm(30),   y = rnorm(30),   z = 1:3)&#xD;&#xA;foo$z &lt;-  factor(foo$z)&#xD;&#xA;# the below graph has blue smooth lines&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z)) + geom_smooth() + &#xD;&#xA;  scale_color_manual(values = c(&quot;black&quot;))&#xD;&#xA;# the below graph has black lines&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z)) + geom_line() + &#xD;&#xA;  scale_color_manual(values = c(&quot;black&quot;))&#xD;&#xA;# this makes the first line black,  but the other two don't show up&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z,  color = z)) + geom_smooth() + &#xD;&#xA;  scale_color_manual(values = c(&quot;black&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It seems like a bug for the two functions to behave differently,  but I can't tell which one is misbehaving.  I would prefer if they both behaved like `geom_line`,  because I am trying to &quot;zero out&quot; all the colors in a graph with the `scale_color_manual` (for a dead-tree version of a graph).  If there is an alternative,  better way to do that,  I would also be interested in hearing about it...&#xD;&#xA;&#xD;&#xA;Thanks." />
      <Message Id="5157065" ParentId="498" UserId="4196" Date="04/16/2012 17:03:04" Content="I'm still not sure what's causing the bug,  but if you just want black lines,  do `geom_line(colour = &quot;black&quot;)`" />
      <Message Id="5159412" ParentId="498" UserId="86978" Date="04/16/2012 18:47:43" Content="Is this a bug? I think it might be expected behavior.&#xD;&#xA;&#xD;&#xA;In this case,  the color in `scale_color_manual` *shouldn't* set the color of the line. This is because no variable is mapped to `color` -- therefore doing stuff to the color scale has no effect. `geom_smooth` and `geom_line` both behave the same way -- it's just that the default color of `geom_smooth` is blue and the default color of `geom_line` is black:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;foo &lt;- data.frame(x = rnorm(30),   y = rnorm(30),   z = 1:3)&#xD;&#xA;foo$z &lt;-  factor(foo$z)&#xD;&#xA;# Setting color in scale has no effect&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z)) + geom_smooth() + &#xD;&#xA;  scale_colour_manual(values = c(&quot;red&quot;))&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z)) + geom_line() + &#xD;&#xA;  scale_colour_manual(values = c(&quot;red&quot;))&#xD;&#xA;&#xD;&#xA;# Setting it directly works&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z)) + geom_smooth(colour=&quot;red&quot;)&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z)) + geom_line(colour=&quot;red&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;As for the issue,  regarding why the other lines don't show up when `colour` is mapped and the scale only has one value,  I think this is happening because the other values are assumed to be NA if they're not specified.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Only one line shows up,  in black&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z,  colour = z)) + geom_smooth() + &#xD;&#xA;  scale_colour_manual(values = c(&quot;black&quot;))&#xD;&#xA;&#xD;&#xA;# First and third lines show up&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z,  color = z)) + geom_smooth() + &#xD;&#xA;  scale_color_manual(values = c(&quot;black&quot;, NA, &quot;red&quot;))&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think it would probably be a good idea to print a message when not enough values are specified in a discrete scale.&#xD;&#xA;&#xD;&#xA;Update: I checked 0.8.9,  and the behavior is the same." />
      <Message Id="5163975" ParentId="498" UserId="4196" Date="04/16/2012 22:18:46" Content="Agreed,  this is expected behaviour.  I'm not sure if a warning would be the right thing to do:&#xD;&#xA;&#xD;&#xA;How would that differ from the following bevahiour? &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(foo,   aes(x = x,   y = y,  linetype=z,  color = z)) + &#xD;&#xA;  geom_smooth() + &#xD;&#xA;  scale_colour_manual(values = &quot;black&quot;,  na.value = &quot;red&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But maybe that behaviour is undesirable?" />
      <Message Id="5207940" ParentId="498" UserId="86978" Date="04/18/2012 20:28:33" Content="I have a hard time envisioning situations where using `na.value` this way would be desirable... when would you want to pass a vector with NAs to `values` and then tell it to substitute the NAs with something else?&#xD;&#xA;&#xD;&#xA;I guess the NA substitution makes sense for continuous color scales,  but in those cases,  the NAs are calculated from the scale -- they're not manually specified,  as is the case here." />
      <Message Id="5208052" ParentId="498" UserId="4196" Date="04/18/2012 20:33:02" Content="Good point.  I'll make the fix." />
      <Message Id="5234828" ParentId="498" UserId="185075" Date="04/19/2012 23:20:33" Content="Hrm.  I have lost track somewhat of the discussion.  I think I understand why the `geom_smooth` is blue whereas the `geom_line` is black.  &#xD;&#xA;&#xD;&#xA;From the point of view of a user,  it would be convenient if a quick print-suitable version of a graph could be generated by `last_plot() + theme_bw() + &lt;something&gt;`.  That is what I was trying to use the `scale_color_manual` to do -- to remove all the color from the plot.  So,  I think that the missing piece is one or both of:&#xD;&#xA;1. making `geom_smooth` and friends read their default color from the theme,  instead of having a global default.  This would let them be black in `theme_bw`,  but blue in `theme_default`&#xD;&#xA;2. adding a `scale_color_constant` function,  which would override any color that is specified by an aesthetic with a single value (in this case black).  This has the advantage of avoiding the need to specify black in each geom that makes up the graph.&#xD;&#xA;&#xD;&#xA;That turns this from a bug report into a feature request,  I suppose.  I've looked at the code involved,  and while I wouldn't say that I have wrapped my head around all its object-orientedness,  I could take a crack at implementing these things if there is interest in them." />
      <Message Id="5248365" ParentId="498" UserId="4196" Date="04/20/2012 16:46:54" Content="The manual scales issue is now #512.&#xD;&#xA;&#xD;&#xA;Currently,  there's no way to change the default aesthetics of geoms on mass.  This may be something that will be possible after the layer rewrite.  Could you please file that as a separate issue,  outlining your use case?&#xD;&#xA;&#xD;&#xA;Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="499" Title="Allow empty data frame">
    <Messages>
      <Message Id="0" ParentId="499" UserId="86978" Date="04/16/2012 21:43:44" Content="Fix #31 and fix #332. This should be considered just a rough attempt to illustrate how it could be done. I modified `facet-null.r`,  but `facet-wrap.r` and `facet-grid.r` should probably also be modified.&#xD;&#xA;&#xD;&#xA;Note that there's a change in behavior -- plots with 0 rows of data are now allowed. For example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;empty &lt;- data.frame(x=numeric(0),  y=numeric(0))&#xD;&#xA;&#xD;&#xA;ggplot(empty,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This works,  but there are no points,  and no breaks. It's just a gray plotting area with &quot;x&quot; and &quot;y&quot; axis labels. " />
      <Message Id="5163797" ParentId="499" UserId="86978" Date="04/16/2012 22:07:23" Content="This will also fix #176,  when #482 is also merged.&#xD;&#xA;" />
      <Message Id="5163833" ParentId="499" UserId="4196" Date="04/16/2012 22:09:50" Content="Cool - thanks. I guess another option would be to default to `data = waiver()` or possible `data = inherit()` (for a more obvious name in this context) and then NULLs could just be nulls." />
      <Message Id="5163897" ParentId="499" UserId="86978" Date="04/16/2012 22:14:13" Content="That makes sense. It may require some more extensive waiver checks in the code than what I added here,  because there are some operations that work fine with a 0-row data frame,  but don't work with NULL.&#xD;&#xA;&#xD;&#xA;Do you want to go with `waiver()` or `inherit()`?" />
      <Message Id="5163939" ParentId="499" UserId="4196" Date="04/16/2012 22:16:12" Content="I think `inherit` - it can just be defined as `inherit &lt;- waiver`,  but documented to describe a little bit about the default behaviour." />
      <Message Id="5163954" ParentId="499" UserId="86978" Date="04/16/2012 22:17:15" Content="Should it also define `is.inherit &lt;- is.waive`?" />
      <Message Id="5164005" ParentId="499" UserId="4196" Date="04/16/2012 22:20:28" Content="No,  it's more of a user-facing change than a developer-facing change.  (Although I might uniformly prefer inherit to waiver - I'm not sure)" />
      <Message Id="5164103" ParentId="499" UserId="86978" Date="04/16/2012 22:26:13" Content="Should all the geoms and stats be updated to have a default of `data = inherit()`,  or should they remain as `data = NULL`? The latter works right now because `fortify.null` simply returns `inherit()`." />
      <Message Id="5164122" ParentId="499" UserId="4196" Date="04/16/2012 22:27:24" Content="Probably all updated,  but let's hang off on that until the layer rewrite." />
      <Message Id="5164401" ParentId="499" UserId="86978" Date="04/16/2012 22:46:37" Content="I changed to `inherit()`,  rebased,  and pushed. Please check if the help makes sense. You said that `inherit()` is meant to be only a user-facing change,  but the user can't actually see it anywhere at this point,  since it's only called from `fortify.null` -- so should we use `waiver()` instead?&#xD;&#xA;&#xD;&#xA;A couple more things left before it can be merged. I have to test for facet grid and wrap,  and figure out why this fails:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(1:5,  1:5)&#xD;&#xA;# Error in data.frame(evaled,  PANEL = data$PANEL) : &#xD;&#xA;#  arguments imply differing number of rows: 5,  0&#xD;&#xA;&#xD;&#xA;ggplot() + geom_point(aes(x=1:5,  y=1:5))&#xD;&#xA;# Works fine&#xD;&#xA;```" />
      <Message Id="5190639" ParentId="499" UserId="86978" Date="04/18/2012 02:34:19" Content="Everything works now. There's slightly complicated logic at the end of `compute_aesthetics()` in `layer.r`. It was necessary to support weird cases,  like when `data` is not set,  but aesthetics are given vectors,  like `ggplot(mapping=aes(x=1:4,  y=1:4)) + geom_point()`.&#xD;&#xA;&#xD;&#xA;I also don't think defining `inherit()` is necessary,  since it's not used in any user-facing code. And,  as discussed above,  it's tested with `is.waive()`,  which I think is a little odd.&#xD;&#xA;&#xD;&#xA;This is the test battery I've been using. (It passes all the regular tests,  and visual tests are unchanged.) All of the tests with the one-row data frame are here for comparison,  but they could be removed. I'd prefer to turn these into regular (non-visual) tests,  but it's not clear to me what parts can be tested this way. Any advice?&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Zero rows of data&#xD;&#xA;df0 &lt;- data.frame(x=numeric(0),  y=numeric(0),  am=numeric(0),  cyl=numeric(0))&#xD;&#xA;# One row of data&#xD;&#xA;df1 &lt;- data.frame(x=1,  y=1,  am=1,  cyl=4)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# No visible points&#xD;&#xA;ggplot(df0,  aes(x=x, y=y)) + geom_point()&#xD;&#xA;ggplot() + geom_point(data=df0,  aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;# One point at 1,  1&#xD;&#xA;ggplot() + geom_point(data=df1,  aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Regular mtcars data,  x=mpg,  y=wt,  plus df0 data frame&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() + geom_point(data=df0,  aes(x=x,  y=y))&#xD;&#xA;&#xD;&#xA;# Regular mtcars data,  no visible points&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point(data=df0,  aes(x=x, y=y))&#xD;&#xA;&#xD;&#xA;# mtcars data with df1 data,  one red point at 1,  1&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() + geom_point(data=df1,  aes(x=x, y=y),  colour=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# == facets ==&#xD;&#xA;&#xD;&#xA;# mtcars data plus df0 data frame,  facet_wrap&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() + geom_point(data=df0,  aes(x=x, y=y)) + facet_wrap(~ cyl)&#xD;&#xA;# mtcars data plus df0 data frame,  facet_grid&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() + geom_point(data=df0,  aes(x=x, y=y)) + facet_grid(am ~ cyl)&#xD;&#xA;&#xD;&#xA;# mtcars data plus one red point at 1,  1,  cyl=4, facet_wrap&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() + geom_point(data=df1,  aes(x=x, y=y),  colour=&quot;red&quot;) +&#xD;&#xA;  facet_wrap(~ cyl)&#xD;&#xA;# mtcars data plus one red point at 1,  1,  am=1,  cyl=4,  facet_grid&#xD;&#xA;ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() + geom_point(data=df1,  aes(x=x, y=y),  colour=&quot;red&quot;) + &#xD;&#xA;  facet_grid(am ~ cyl)&#xD;&#xA;&#xD;&#xA;# Empty data,  facet_wrap,  throws error&#xD;&#xA;ggplot(df0,  aes(x=x,  y=y)) + geom_point() + facet_wrap(~ cyl)&#xD;&#xA;# Empty data,  facet_grid,  throws error&#xD;&#xA;ggplot(df0,  aes(x=x,  y=y)) + geom_point() + facet_grid(am ~ cyl)&#xD;&#xA;&#xD;&#xA;# One data point,  facet_wrap&#xD;&#xA;ggplot(df1,  aes(x=x,  y=y)) + geom_point() + facet_wrap(~ cyl)&#xD;&#xA;# One data point,  facet_grid&#xD;&#xA;ggplot(df1,  aes(x=x,  y=y)) + geom_point() + facet_grid(am ~ cyl)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Empty data with x and y mapped to vector of values&#xD;&#xA;qplot(1:5,  1:5)&#xD;&#xA;ggplot(mapping=aes(x=1:5,  y=1:5)) + geom_point()&#xD;&#xA;qplot(x,  y,  data=data.frame(x=1:5,  y=1:5))&#xD;&#xA;ggplot() + geom_point(aes(x=1:5,  y=1:5))&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="5196588" ParentId="499" UserId="4196" Date="04/18/2012 11:39:34" Content="Looks good - thanks! For the tests,  I'd suggest looking at the output from `ggplot_build` " />
      <Message Id="5208150" ParentId="499" UserId="4196" Date="04/18/2012 20:36:51" Content="I'm still a bit worried about the change to `compute_aesthetics`.  Could you add a test like:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + &#xD;&#xA;  facet_wrap(~cyl) + &#xD;&#xA;  geom_point(data = data.frame(),  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5)&#xD;&#xA;```" />
      <Message Id="5208378" ParentId="499" UserId="86978" Date="04/18/2012 20:46:27" Content="You're right - that added point is getting lost. I'll fix it.&#xD;&#xA;&#xD;&#xA;The point shows up,  though,  when data is NULL:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) +&#xD;&#xA;  facet_wrap(~cyl) +&#xD;&#xA;  geom_point(data = NULL,  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Now that I think about it,  I believe this is the correct behavior. If you want to add a single point,  you should use `annotate`; if you use a zero-row data frame,  there's no data for which the aesthetics should be set." />
      <Message Id="5208717" ParentId="499" UserId="86978" Date="04/18/2012 21:03:09" Content="Here's a roadblock for having `data.frame()` and `NULL` result in the same behavior. The `fortify` methods aren't the same:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;fortify.data.frame &lt;- function(model,  data,  ...) model&#xD;&#xA;fortify.NULL &lt;- function(model,  data,  ...) waiver()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;As things stand right now,  if you pass `data=NULL` to a layer,  that means that it should inherit the data. When we replace all the default `data=NULL` arguments with `data=waiver()` in the geoms and stats,  then we should be able to address this problem better. That is,  `waiver()` should behave one way,  and `data.frame()` and `NULL` should behave another.&#xD;&#xA;" />
      <Message Id="5211438" ParentId="499" UserId="4196" Date="04/18/2012 23:24:55" Content="I think I got confused before - `NULL` and `data.frame()` should behave differently.  (Eventually they'll be the same when we replace the default NULL behaviour with `waiver`).  `NULL` is translated to `waiver()` and so the layer inherits from the plot data frame.  `data.frame()` is for when you want a layer with no data associated with it - this can occur when you're subsetting,  or if you wanted to have no scaling,  just mapping." />
      <Message Id="5228261" ParentId="499" UserId="86978" Date="04/19/2012 18:12:25" Content="I've added more tests,  some of which presently fail. It would be good to discuss if the tests are correct." />
      <Message Id="5231676" ParentId="499" UserId="86978" Date="04/19/2012 20:46:33" Content="Also fixes #506 and fixes #507." />
      <Message Id="5232337" ParentId="499" UserId="86978" Date="04/19/2012 21:11:05" Content="OK,  it should be good to go. It passes all the new and old tests,  and visual tests are unchanged." />
    </Messages>
  </Topic>
  <Topic Id="500" Title="Annotation_raster does not work with scale_x_reverse">
    <Messages>
      <Message Id="0" ParentId="500" UserId="1650314" Date="04/17/2012 02:13:09" Content="Annotation_raster is not displayed,  when one scale is reversed.&#xD;&#xA;&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) +   annotation_raster(rainbow,  xmin = 15, xmax = 20,  ymin = 3,  ymax = 4)&#xD;&#xA;&#xD;&#xA;swiching xmin and xmax,  doesn't affect plotting&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) +   annotation_raster(rainbow,  xmin = 20,  xmax = 15,  ymin = 3,  ymax = 4)&#xD;&#xA;&#xD;&#xA;doesn't work&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) +   annotation_raster(rainbow,  xmin = 15,  xmax = 20,  ymin = 3,  ymax = 4) + scale_x_reverse()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Workaround: negative Coordinates&#xD;&#xA;    qplot(mpg,  wt,  data = mtcars) +   annotation_raster(rainbow,  xmin=-15, xmax=-20,  ymin=3,  ymax=4) + scale_x_reverse()" />
      <Message Id="35940540" ParentId="500" UserId="4196" Date="02/24/2014 21:23:07" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="501" Title="Interaction between breaks and scales is confusing">
    <Messages>
      <Message Id="0" ParentId="501" UserId="86978" Date="04/18/2012 15:34:25" Content="This is a followup to #264.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- qplot(mpg,  wt,  data = mtcars,  colour = factor(cyl))&#xD;&#xA;&#xD;&#xA;# Works (fixed in 264)&#xD;&#xA;p + scale_colour_manual(values = c(&quot;8&quot; = &quot;red&quot;, &quot;4&quot; = &quot;blue&quot;, &quot;6&quot; = &quot;green&quot;))&#xD;&#xA;&#xD;&#xA;# Doesn't work&#xD;&#xA;p + scale_colour_manual(breaks=c(8,  4,  6),  values=c(&quot;red&quot;,  &quot;green&quot;,  &quot;blue&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This should be added to the existing test:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test_that(&quot;names of values used in manual scales&quot;,  { &#xD;&#xA;  # ... other test already here...&#xD;&#xA;&#xD;&#xA;   s &lt;- scale_colour_manual(breaks = c(8,  4,  6),  values = c(&quot;c&quot;,  &quot;a&quot;,  &quot;b&quot;))&#xD;&#xA;   scale_train(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;))&#xD;&#xA;   expect_equal(scale_map(s,  c(&quot;4&quot;,  &quot;6&quot;,  &quot;8&quot;)),  c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;))  &#xD;&#xA; })&#xD;&#xA;```" />
      <Message Id="5225769" ParentId="501" UserId="227097" Date="04/19/2012 16:27:04" Content="```&#xD;&#xA;p + scale_colour_manual(limits=c(8,  4,  6),  values=c(&quot;red&quot;,  &quot;green&quot;,  &quot;blue&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;works.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p + scale_colour_manual(limits=c(8,  4,  6),  values=c(&quot;red&quot;,  &quot;green&quot;,  &quot;blue&quot;),  breaks = c(4, 8))&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;also works.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p + scale_colour_manual(limits=c(8,  4),  values=c(&quot;red&quot;,  &quot;green&quot;),  breaks = c(4, 8))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;in this case cyl=6 does not appear as expected.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;So the general rule is:&#xD;&#xA;&#xD;&#xA;- limits determines if the corresponding data appears in panel. With discrete scale it also determines the (internal) order of the variable.&#xD;&#xA;- breaks control guides.&#xD;&#xA;&#xD;&#xA;I agree that this may be confusing though." />
      <Message Id="5226345" ParentId="501" UserId="86978" Date="04/19/2012 16:50:52" Content="Do you mean that it works in your branch? It doesn't work on master for me.&#xD;&#xA;&#xD;&#xA;Update: oh,  nevermind,  it does work. I was confused. The limits/breaks thing trips me up sometimes." />
      <Message Id="5226366" ParentId="501" UserId="227097" Date="04/19/2012 16:51:45" Content="It works on master branch 5e89ea12ba89ad617157878d7586b778e86d419f" />
      <Message Id="5226555" ParentId="501" UserId="227097" Date="04/19/2012 16:59:02" Content="And now I'd think that the best way to control the order of discrete scale is to specify limits explicitly:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- qplot(factor(1:5,  labels = letters[ 5:1 ]),  1:5) + geom_point()&#xD;&#xA;p&#xD;&#xA;p + scale_x_discrete(limits = letters[ 1:5 ])&#xD;&#xA;p + scale_x_discrete(limits = letters[ c(1,  3,  2,  4,  5) ])&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This is easier than reordering the factor of data.&#xD;&#xA;&#xD;&#xA;This may be documented.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; limits: for continuous scale,  2 length vector of upper and lower bound.&#xD;&#xA;              for discrete scale,  the levels that appear in the plot (I think this is same as continuous). Furthermore,  the order of limits affects the order of the variable in the panel and legend.&#xD;&#xA;" />
      <Message Id="5235805" ParentId="501" UserId="227097" Date="04/20/2012 00:40:43" Content="@wch could you please document this?" />
      <Message Id="5236855" ParentId="501" UserId="86978" Date="04/20/2012 02:38:07" Content="Sure... do you think it should go in scale_x_discrete?" />
      <Message Id="5236886" ParentId="501" UserId="227097" Date="04/20/2012 02:42:24" Content="Thanks!&#xD;&#xA;&#xD;&#xA;I'd think we may have a group document for `scale` like `?Arithmetic` or `?Comparison`,  and each help of scale_X_Y may have `see also scale`.&#xD;&#xA;I'm not sure how we can do this by roxygen though..." />
      <Message Id="5236948" ParentId="501" UserId="227097" Date="04/20/2012 02:50:24" Content="And also it would be better if we have a grouped help page such as `?coord`,  `?stat`,  `?geom` etc that illustrate how and what each component do in general with the list of available children (ie,  coord_cartesian,  coord_polar,  etc).&#xD;&#xA;&#xD;&#xA;I'm not good at writing document,  and I imagine this will include a large work so milestone 0.9.2 or 1.0 is appropriate?" />
      <Message Id="5240358" ParentId="501" UserId="227097" Date="04/20/2012 09:07:15" Content="there is already `ggscale` for help document,  see scale-.r&#xD;&#xA;&#xD;&#xA;probably it can be improved:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;#' scales in ggplot2&#xD;&#xA;#'&#xD;&#xA;#' Scales are an S3 class with a single mutable component implemented with&#xD;&#xA;#' a reference class - the range of the data.  This mutability makes working&#xD;&#xA;#' with scales much easier,  because it makes it possible to distribute the&#xD;&#xA;#' training,  without having to worry about collecting all the pieces back &#xD;&#xA;#' together again.&#xD;&#xA;#'&#xD;&#xA;#' \section{ Components of scale }&#xD;&#xA;#'&#xD;&#xA;#' \enumerate{ &#xD;&#xA;#'  \item limits&#xD;&#xA;#'  \item breaks&#xD;&#xA;#'  \item labels&#xD;&#xA;#'  \item guide&#xD;&#xA;#'  }&#xD;&#xA;#'&#xD;&#xA;#' @name ggscale&#xD;&#xA;#' @S3method print scale&#xD;&#xA;#' @family scales&#xD;&#xA;NULL&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;all scale_x_y will refer this topic." />
      <Message Id="5248288" ParentId="501" UserId="4196" Date="04/20/2012 16:42:29" Content="Moving to 0.9.2 since this is a documentation issue" />
      <Message Id="6745454" ParentId="501" UserId="86978" Date="07/03/2012 20:20:46" Content="I pushed a change that fixes the original issue. The other issues that we discussed - maybe they should be filed as a new issue." />
    </Messages>
  </Topic>
  <Topic Id="502" Title="0.10">
    <Messages>
      <Message Id="0" ParentId="502" UserId="4196" Date="04/18/2012 20:47:47" Content="" />
    </Messages>
  </Topic>
  <Topic Id="503" Title="Guides can be manually ordered (fixed #470).">
    <Messages>
      <Message Id="0" ParentId="503" UserId="227097" Date="04/19/2012 04:46:21" Content="" />
      <Message Id="6766161" ParentId="503" UserId="86978" Date="07/04/2012 19:10:40" Content="Rebased,  cleaned up,  and merged in b453114c0a5de350a54977b3192445d182622f35." />
    </Messages>
  </Topic>
  <Topic Id="504" Title="map_id variable is ignored by geom_map">
    <Messages>
      <Message Id="0" ParentId="504" UserId="521337" Date="04/19/2012 08:53:03" Content="Consider the following example using geom_map:&#xD;&#xA;&#xD;&#xA;    crimes &lt;- data.frame(state = tolower(rownames(USArrests)),  USArrests)&#xD;&#xA;    states_map &lt;- map_data(&quot;state&quot;)&#xD;&#xA;    ggplot(crimes,  aes(map_id = state)) +&#xD;&#xA;       geom_map(aes(fill = Murder),  map = states_map) +&#xD;&#xA;       expand_limits(x = states_map$long,  y = states_map$lat) +&#xD;&#xA;       guides(fill = guide_colorbar(colours = topo.colors(10))) +&#xD;&#xA;       opts(legend.position = &quot;top&quot;)&#xD;&#xA;&#xD;&#xA;One would expect that by using `map_id = state`,  that a link was made between a column in `states_map` (the polygons) and a column in `crimes` (Murder). `crimes` contains a state column:&#xD;&#xA;&#xD;&#xA;    &gt; head(crimes)&#xD;&#xA;                   state Murder Assault UrbanPop Rape&#xD;&#xA;    Alabama       alabama   13.2     236       58 21.2&#xD;&#xA;    Alaska         alaska   10.0     263       48 44.5&#xD;&#xA;    Arizona       arizona    8.1     294       80 31.0&#xD;&#xA;    Arkansas     arkansas    8.8     190       50 19.5&#xD;&#xA;    California california    9.0     276       91 40.6&#xD;&#xA;    Colorado     colorado    7.9     204       78 38.7&#xD;&#xA;&#xD;&#xA;but states_map does not:&#xD;&#xA;&#xD;&#xA;    &gt; head(states_map)&#xD;&#xA;           long      lat group order  region subregion&#xD;&#xA;    1 -87.46201 30.38968     1     1 alabama      &lt;NA&gt;&#xD;&#xA;    2 -87.48493 30.37249     1     2 alabama      &lt;NA&gt;&#xD;&#xA;    3 -87.52503 30.37249     1     3 alabama      &lt;NA&gt;&#xD;&#xA;    4 -87.53076 30.33239     1     4 alabama      &lt;NA&gt;&#xD;&#xA;    5 -87.57087 30.32665     1     5 alabama      &lt;NA&gt;&#xD;&#xA;    6 -87.58806 30.32665     1     6 alabama      &lt;NA&gt;&#xD;&#xA;&#xD;&#xA;When using `geom_map`,  the variable that links the polygons to the value in the dataset is ignored. In stead,  the `region` variable in `states_maps` is always used. In this example above,  this is expected behavior. But in this StackOverflow question this present a problem:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/10219919/geom-map-all-subregions-the-same-color/10224042#10224042&#xD;&#xA;&#xD;&#xA;So,  I think the `map_id` variable should be interpreted correctly,  and not ignored." />
      <Message Id="5218764" ParentId="504" UserId="4196" Date="04/19/2012 10:37:16" Content="I don't think this is a bug - the `map_id` names the matching variable in the data data frame,  not the map data frame.  As documented,  that must always be called `id` or `region`" />
      <Message Id="5219700" ParentId="504" UserId="521337" Date="04/19/2012 11:46:02" Content="I edited the SO answer I wrote to reflect the documentation. Thanks for the feedback." />
    </Messages>
  </Topic>
  <Topic Id="505" Title="Allow alpha to affect colour">
    <Messages>
      <Message Id="0" ParentId="505" UserId="18445" Date="04/19/2012 11:38:54" Content="For all filled shapes (polygons,  reactangles,  etc.) alpha affected fill only.&#xA;One could set the stroke to be a transparent colour using&#xA;&#xA;	colour=scales::alpha(&quot;blue&quot;,  0.5)&#xA;&#xA;outside of aes() for example. But there was no way to map the colour of the&#xA;stroke to a semi transparent colour. This commit fixes it." />
      <Message Id="6174689" ParentId="505" UserId="4196" Date="06/07/2012 12:32:51" Content="This was a deliberate choice - whenever a geom has both colour and fill,  alpha only affects the fill.  I don't recall my exact reasoning (probably that you don't normally modify the alpha of a line border line),  but I don't think it's worth changing now." />
      <Message Id="6174690" ParentId="505" UserId="4196" Date="06/07/2012 12:32:52" Content="This was a deliberate choice - whenever a geom has both colour and fill,  alpha only affects the fill.  I don't recall my exact reasoning (probably that you don't normally modify the alpha of a line border line),  but I don't think it's worth changing now." />
      <Message Id="6174886" ParentId="505" UserId="18445" Date="06/07/2012 12:44:38" Content=" : -(" />
    </Messages>
  </Topic>
  <Topic Id="506" Title="When data=NULL and setting all aesthetics,  values get dropped">
    <Messages>
      <Message Id="0" ParentId="506" UserId="86978" Date="04/19/2012 18:09:51" Content="When `data=NULL`,  it should inherit `data`,  not replace it with a data frame with one row per panel.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Should have no red points&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + geom_point(data = data.frame(),  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5,  alpha=.1)&#xD;&#xA;&#xD;&#xA;# Should have many red points overplotted - presently only has one red point&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + geom_point(data = NULL,  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5,  alpha=.1)&#xD;&#xA;&#xD;&#xA;# Should have many red points overplotted in each facet,  one for each black point in that facet.&#xD;&#xA;# Presently has only one red point per facet.&#xD;&#xA;qplot(mpg,  wt,  data = mtcars) + geom_point(data = NULL,  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5,  alpha=.1) +&#xD;&#xA;  facet_wrap(~cyl)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think the problem is in `compute_aesthetics()` in layer.r.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Here are the tests that it should pass (should go in test-empty-data.r):&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;  # NULL should inherit data&#xD;&#xA;  d &lt;- pdata(ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() +&#xD;&#xA;    geom_point(data=NULL,  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5))&#xD;&#xA;  expect_equal(nrow(d[ [ 1 ] ]),  nrow(mtcars))&#xD;&#xA;  expect_equal(nrow(d[ [ 2 ] ]),  nrow(mtcars))&#xD;&#xA;&#xD;&#xA;  d &lt;- pdata(ggplot(mtcars,  aes(x=mpg,  y=wt)) + geom_point() +&#xD;&#xA;    geom_point(data=NULL,  x = 20,  y = 3,  colour = &quot;red&quot;,  size = 5) +&#xD;&#xA;    facet_wrap(~ cyl))&#xD;&#xA;  expect_equal(nrow(d[ [ 1 ] ]),  nrow(mtcars))&#xD;&#xA;  expect_equal(nrow(d[ [ 2 ] ]),  nrow(mtcars))&#xD;&#xA;  expect_equal(sort(d[ [ 1 ] ]$PANEL),  sort(d[ [ 2 ] ]$PANEL))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="507" Title="If aesthetics are vector,  they must be length one or the same length as the data">
    <Messages>
      <Message Id="0" ParentId="507" UserId="4196" Date="04/19/2012 20:32:06" Content="ie.  this should be an error:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(mpg,  wt)) + geom_point() + geom_point(aes(y = 1:2))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;by this should not:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(mpg,  wt)) + geom_point() + geom_point(data.frame(),  aes(x = 1:2,  y = 1:2))&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="508" Title="stat_cdf">
    <Messages>
      <Message Id="0" ParentId="508" UserId="227097" Date="04/20/2012 01:27:10" Content="I come across several requests to plot CDF. Something like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(data,  aes(x = foo)) + stat_cdf(geom = &quot;step&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Probably not difficult to implement.&#xD;&#xA;" />
      <Message Id="5252692" ParentId="508" UserId="86978" Date="04/20/2012 20:41:57" Content="Is this the same as #36?" />
      <Message Id="5258488" ParentId="508" UserId="227097" Date="04/21/2012 06:31:03" Content="Yes exactly. May I close #36?" />
    </Messages>
  </Topic>
  <Topic Id="509" Title="First commit of stat-ecdf (ref #508).">
    <Messages>
      <Message Id="0" ParentId="509" UserId="227097" Date="04/20/2012 08:25:49" Content="" />
      <Message Id="6174706" ParentId="509" UserId="4196" Date="06/07/2012 12:34:02" Content="Could you please rebase against master and include a note in NEWS?" />
      <Message Id="6587055" ParentId="509" UserId="227097" Date="06/26/2012 20:35:26" Content="Here is the usage and output:&#xA;&#xA;http://rpubs.com/kohske/656" />
      <Message Id="6588779" ParentId="509" UserId="86978" Date="06/26/2012 21:44:43" Content="I also suggest changing line 30,  so that it's not drawing a lot of lines (or points) with the same start and end point:&#xA;&#xA;```&#xA;   else                xvals &lt;- unique(x)&#xA;```&#xA;&#xA;Nice use of rpubs!" />
      <Message Id="6588985" ParentId="509" UserId="227097" Date="06/26/2012 21:54:07" Content="Yes exactly. `unique` should be after `ecdf`." />
      <Message Id="6589075" ParentId="509" UserId="86978" Date="06/26/2012 21:58:05" Content="Also,  for the documentation:&#xA;&#xA;```R&#xA;#' @param n if not NULL,  the number of points to interpolate with. If NULL,  do not interpolate.&#xA;```&#xA;&#xA;I actually made similar changes earlier but forgot to push them..." />
      <Message Id="6613009" ParentId="509" UserId="86978" Date="06/27/2012 19:23:02" Content="Rebased onto master,  cleaned up,  and merged in 1abe5676082d5dbbd813100e88766c7e895f5ac4." />
    </Messages>
  </Topic>
  <Topic Id="510" Title="ggsave does not handle emf file type">
    <Messages>
      <Message Id="0" ParentId="510" UserId="1662409" Date="04/20/2012 10:17:24" Content="Thank you for creating ggplot.  It looks really good.  I noticed that the ggsave function does not handle the emf file type,  just the wmf.  Can I suggest this addition to the save.r script at about line 49 of the current version.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;  emf &lt;- function(...,  width,  height)&#xD;&#xA;    grDevices::win.metafile(...,  width=width,  height=height)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Many thanks&#xD;&#xA;&#xD;&#xA;Charles" />
      <Message Id="5805131" ParentId="510" UserId="86978" Date="05/19/2012 22:06:16" Content="Fixed in 4bb6aa3e718fbae620ab46f15bf244a73a8af95b." />
    </Messages>
  </Topic>
  <Topic Id="511" Title="Two datasets one colour scale using na.value">
    <Messages>
      <Message Id="0" ParentId="511" UserId="1662852" Date="04/20/2012 13:31:09" Content="Hi the use case where i encountered this bug was when i was trying to plot county borders overlay-ed with colored lines of specific routes. I tried to plot the countries with geom_map.&#xD;&#xA;&#xD;&#xA;The example is a bit complicated therefore a small example that produces exactly the same traceback&#xD;&#xA;&#xD;&#xA;My idea was to use the NA colour to give a specific colour to one dataset (the country borders) and then use the color scale to give colours to the other dataset. So one dataset has only NA. I realize this is already a work around for plotting the borders but setting the colour arugment for geom_map did not seem to work:&#xD;&#xA;```R&#xD;&#xA;require(ggplot2)&#xD;&#xA;crimes &lt;- data.frame(state = tolower(rownames(USArrests)),  USArrests)&#xD;&#xA;crimes$Murder&lt;-NA&#xD;&#xA;states_map &lt;- map_data(&quot;state&quot;)&#xD;&#xA;ggplot(crimes,  aes(map_id = state)) +&#xD;&#xA;   geom_map(aes(fill = Murder),  map = states_map,  color=&quot;green&quot;) +&#xD;&#xA;   expand_limits(x = states_map$long,  y = states_map$lat) +&#xD;&#xA;        scale_fill_hue(na.value=NA)&#xD;&#xA;```&#xD;&#xA;produces an empty plot instead of green borders as expected. Using colour mapped as an aes seams to work:&#xD;&#xA;```R&#xD;&#xA;ggplot(crimes,  aes(map_id = state)) +&#xD;&#xA;   geom_map(aes(fill = Murder,  colour=Murder),  map = states_map) +&#xD;&#xA;   expand_limits(x = states_map$long,  y = states_map$lat) +&#xD;&#xA;        scale_fill_hue(na.value=NA)&#xD;&#xA;```&#xD;&#xA;but then i run into this problem below there one dataset has only NA in the colour column&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; a&lt;-data.frame(x=1:10,  y=1:10,  col=1:10);&#xD;&#xA;&gt; b&lt;-data.frame(x=1:10,  y=10:1,  col=NA); &#xD;&#xA;&gt; ggplot(data=a, aes(x=x, y=y, colour=col))+geom_point()+geom_point(data=b)+scale_colour_gradient(na.value=&quot;red&quot;)&#xD;&#xA;Error: Discrete value supplied to continuous scale&#xD;&#xA;&gt; traceback()&#xD;&#xA;12: stop(&quot;Discrete value supplied to continuous scale&quot;,  call. = FALSE)&#xD;&#xA;11: train_continuous(x,  range)&#xD;&#xA;10: scale$range$train(x)&#xD;&#xA;9: scale_train.continuous(scale,  df[ [ aesthetic ] ])&#xD;&#xA;8: scale_train(scale,  df[ [ aesthetic ] ])&#xD;&#xA;7: FUN(X[ [ 1L ] ],  ...)&#xD;&#xA;6: lapply(scales$scales,  scale_train_df,  df = df)&#xD;&#xA;5: FUN(X[ [ 2L ] ],  ...)&#xD;&#xA;4: lapply(data,  scales_train_df,  scales = npscales)&#xD;&#xA;3: ggplot_build(x)&#xD;&#xA;2: print.ggplot(list(data = list(x = 1:10,  y = 1:10,  col = 1:10),  &#xD;&#xA;       layers = list(&lt;environment&gt;,  &lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  &#xD;&#xA;       mapping = list(x = x,  y = y,  colour = col),  options = list(&#xD;&#xA;           labels = list(x = &quot;x&quot;,  y = &quot;y&quot;,  colour = &quot;col&quot;)),  coordinates = list(&#xD;&#xA;           limits = list(x = NULL,  y = NULL),  wise = FALSE),  facet = list(&#xD;&#xA;           shrink = TRUE),  plot_env = &lt;environment&gt;))&#xD;&#xA;1: print(list(data = list(x = 1:10,  y = 1:10,  col = 1:10),  layers = list(&#xD;&#xA;       &lt;environment&gt;,  &lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  &#xD;&#xA;       mapping = list(x = x,  y = y,  colour = col),  options = list(&#xD;&#xA;           labels = list(x = &quot;x&quot;,  y = &quot;y&quot;,  colour = &quot;col&quot;)),  coordinates = list(&#xD;&#xA;           limits = list(x = NULL,  y = NULL),  wise = FALSE),  facet = list(&#xD;&#xA;           shrink = TRUE),  plot_env = &lt;environment&gt;))&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But it seems to work as soon as the colour column of the b dataset does contain one non na value&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; a&lt;-data.frame(x=1:10,  y=1:10,  col=1:10);b&lt;-data.frame(x=1:10,  y=10:1,  col=c(1, rep(NA, 9))); ggplot(data=a, aes(x=x, y=y, colour=col))+geom_point()+geom_point(data=b)+scale_colour_gradient(na.value=&quot;red&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.0 (2012-03-30)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.0       &#xD;&#xA; [ 5 ] MASS_7.3-17        memoise_0.1        munsell_0.3        plyr_1.7.1        &#xD;&#xA; [ 9 ] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.0      &#xD;&#xA;[ 13 ] stringr_0.6  &#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="6213626" ParentId="511" UserId="4196" Date="06/08/2012 21:36:34" Content="The second problem is because `NA` is a logical,  which ggplot2 treats as a discrete vector - use `NA_real` instead:&#xA;&#xA;`b &lt;- data.frame(x = 1:10,  y = 10:1,  col = NA_real_)`" />
      <Message Id="6240593" ParentId="511" UserId="1662852" Date="06/11/2012 09:46:05" Content="Thanks for fixing! and the hint for NA_real_" />
    </Messages>
  </Topic>
  <Topic Id="512" Title="Manual scale should complain when insufficient values">
    <Messages>
      <Message Id="0" ParentId="512" UserId="4196" Date="04/20/2012 16:43:49" Content="```R&#xD;&#xA;df &lt;- data.frame(x = 1,  y = 1:2,  z = factor(1:2))&#xD;&#xA;qplot(x,  y,  data = df,  colour = z) + scale_colour_manual(values = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(x = 1,  y = 1:3,  z = factor(c(1:2,  NA),  exclude = NULL))&#xD;&#xA;qplot(x,  y,  data = df,  colour = z) + scale_colour_manual(values = &quot;black&quot;,  na.value = &quot;red&quot;)&#xD;&#xA;qplot(x,  y,  data = df,  colour = z) + scale_colour_manual(values = c(&quot;black&quot;,  &quot;black&quot;),  na.value = &quot;red&quot;)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="513" Title="Titles are no longer centered relative to plot area">
    <Messages>
      <Message Id="0" ParentId="513" UserId="86978" Date="04/20/2012 16:59:56" Content="See http://stdout.org/~winston/vtest-titles/diff/guide-position.html&#xD;&#xA;&#xD;&#xA;This was introduced by #493." />
    </Messages>
  </Topic>
  <Topic Id="514" Title="title is center on the panel (fixes #513).">
    <Messages>
      <Message Id="0" ParentId="514" UserId="227097" Date="04/21/2012 05:36:16" Content="This commit fixes #513" />
    </Messages>
  </Topic>
  <Topic Id="515" Title="coord map works with null breaks.">
    <Messages>
      <Message Id="0" ParentId="515" UserId="227097" Date="04/21/2012 05:48:50" Content="Fixes #430." />
    </Messages>
  </Topic>
  <Topic Id="516" Title="coord-rader">
    <Messages>
      <Message Id="0" ParentId="516" UserId="227097" Date="04/22/2012 07:57:11" Content="http://www.cloudstat.org/index.php?do=/kaichew/blog/radar-chart-with-r/&#xD;&#xA;&#xD;&#xA;This may be implemented by slight modification of coord_polar." />
      <Message Id="5279486" ParentId="516" UserId="4196" Date="04/23/2012 12:04:46" Content="Basically coord polar without munching,  I guess." />
      <Message Id="5283158" ParentId="516" UserId="227097" Date="04/23/2012 15:02:40" Content="Will you merge this if I implement?" />
      <Message Id="5296507" ParentId="516" UserId="4196" Date="04/24/2012 02:46:02" Content="Yes,  but for 0.9.2." />
      <Message Id="5296528" ParentId="516" UserId="227097" Date="04/24/2012 02:49:41" Content="OK,  thanks." />
      <Message Id="6213643" ParentId="516" UserId="4196" Date="06/08/2012 21:36:58" Content="Here's a basic implementation&#xA;&#xA;```R&#xA;&#xA;library(ggplot2)&#xA;&#xA;coord_radar &lt;- function(...) { &#xA;  structure(coord_polar(...),  class = c(&quot;radar&quot;,  &quot;polar&quot;,  &quot;coord&quot;))&#xA; }&#xA;is.linear.radar &lt;- function(coord) TRUE&#xA;&#xA;scaled &lt;- as.data.frame(lapply(mtcars,  ggplot2:::rescale01))&#xA;scaled$model &lt;- rownames(mtcars)&#xA;&#xA;mtcarsm &lt;- reshape2::melt(scaled)&#xA;qplot(variable,  value,  data = mtcarsm,  geom = &quot;line&quot;,  group = model) + &#xA;coord_radar()&#xA;```&#xA;&#xA;I'm not sure if it even deserves it's own class,  unless there was more that you were thinking of.  It would also be fairly easy to create a `make_linear` operator on coords,  so that `coord_radar() = make_linear(coord_polar())`.  Not sure if there are other use cases for this. " />
      <Message Id="35109352" ParentId="516" UserId="429368" Date="02/14/2014 18:13:30" Content="Thanks a lot I was looking for this! However this leaves the paths open. To close them,  you need to replicate the first variable in mtcarsm and rbind it at the end,  and use geom=&quot;path&quot; instead of &quot;line&quot;." />
      <Message Id="35940603" ParentId="516" UserId="4196" Date="02/24/2014 21:23:23" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="517" Title="ggsave() freezes/crashes R when width/height are too large and png">
    <Messages>
      <Message Id="0" ParentId="517" UserId="841437" Date="04/23/2012 20:04:44" Content="This is definitely in the category of &quot;users shouldn't do that&quot; ... but here we are. &#xD;&#xA;&#xD;&#xA;For a brief moment I forgot that `ggsave` takes the `width` and `height` arguments as inches and not pixels,  and I (stupidly) entered `400` for the width and height of my plot. The pdf option saved my graphic and it opened,  though the points were invisibly small. The `.png` version,  however,  killed R with an error on my OS X 10.6 machine,  and froze R as `Not Responding` on my OS X 10.7 machine. &#xD;&#xA;&#xD;&#xA;I don't know where the upper limit is on size handling for large rasters,  but if one is known,  it might be nice to have a check that warns the user and doesn't even try to execute the save if one/both of the dimensions are over that limit.&#xD;&#xA;&#xD;&#xA;Not a super important issue,  but I did just trip on it." />
      <Message Id="5554980" ParentId="517" UserId="86978" Date="05/07/2012 17:05:26" Content="I've done this many times also. I'd think that,  say,  20x20 inches is a reasonable limit -- if it's larger than that,  `ggsave` could print a message. Also,  it would be good to have an option to suppress the messages." />
    </Messages>
  </Topic>
  <Topic Id="518" Title="Print message when adding two scales for the same aesthetic">
    <Messages>
      <Message Id="0" ParentId="518" UserId="86978" Date="04/24/2012 16:42:37" Content="It's common (in my experience) add two scale objects for the same aesthetic,  and only have one take effect. For example,  when using `xlim` with `scale_x_continuous`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# xlim has no effect here,  and no message indicating why&#xD;&#xA;qplot(1:10, 1:10) + xlim(0, 4) + scale_x_continuous(breaks = 1:10)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Maybe the solution is to have it print a message if you add two scale objects for the same aesthetic.&#xD;&#xA;" />
      <Message Id="6174761" ParentId="518" UserId="4196" Date="06/07/2012 12:37:14" Content="I don't see any easy way to implement this." />
    </Messages>
  </Topic>
  <Topic Id="519" Title="geom_point doesn't accept integers for shape in aes()">
    <Messages>
      <Message Id="0" ParentId="519" UserId="1242554" Date="04/25/2012 22:54:37" Content="geom_point doesn't accept integers for shape in aes().&#xD;&#xA;&#xD;&#xA;&quot;ggplot(data=data.frame(x=c(1:16))) + geom_point(aes(x=x, y=x, shape=x))&quot; &#xD;&#xA;&#xD;&#xA;worked before R2.15.0 and now errors out with &quot;Error: A continuous variable can not be mapped to shape.&quot;  Even converting to factors (shape=factor(x))) seems to only accept 6 shapes  in the aes.  More notes at: http://www.win-vector.com/blog/2012/04/how-to-remember-point-shape-codes-in-r/" />
      <Message Id="5346656" ParentId="519" UserId="86978" Date="04/26/2012 00:01:12" Content="You have to use `scale_shape_identity` -- that tells it to use the numeric codes directly for point shapes:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(data=data.frame(x=c(1:16))) + geom_point(aes(x=x, y=x, shape=x)) +&#xD;&#xA;  scale_shape_identity()&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="5346741" ParentId="519" UserId="1242554" Date="04/26/2012 00:07:56" Content="You are correct,  sorry about that." />
    </Messages>
  </Topic>
  <Topic Id="520" Title="axis line below plot panel">
    <Messages>
      <Message Id="0" ParentId="520" UserId="18970" Date="04/26/2012 09:49:16" Content="The following example illustrates the problem:&#xD;&#xA;&#xD;&#xA;      qplot(1, 1) + opts(axis.line = theme_segment (colour = &quot;black&quot;,  size=10))&#xD;&#xA;&#xD;&#xA;The bottom (x) axis is above the plot panel,  but the left (y) axis is below." />
      <Message Id="5358061" ParentId="520" UserId="227097" Date="04/26/2012 14:43:54" Content="has been fixed in #305" />
      <Message Id="5365829" ParentId="520" UserId="18970" Date="04/26/2012 19:34:10" Content="I tried `install_github(&quot;ggplot2&quot;,  &quot;hadley&quot;)` and  `install_github(&quot;ggplot2&quot;,  &quot;kohske&quot;)`,  neither of them fixed this issue. Is it somewhere in a more experimental branch?" />
      <Message Id="5370919" ParentId="520" UserId="227097" Date="04/27/2012 00:03:40" Content="try `install_github(&quot;ggplot2&quot;,  &quot;hadley&quot;,  &quot;fix/axis&quot;)` and this version of ggplot2 requires the updated `scales` so also try `install_github(&quot;scales&quot;,  &quot;hadley&quot;)` before loading the newer version of ggplot2." />
      <Message Id="5374167" ParentId="520" UserId="18970" Date="04/27/2012 05:40:30" Content="I see,  thanks. I'd tried fix/axis but from your account and it failed to fetch. This fixes the problem." />
    </Messages>
  </Topic>
  <Topic Id="521" Title="labs() requires 'colour' vs 'color' to work properly">
    <Messages>
      <Message Id="0" ParentId="521" UserId="1682825" Date="04/26/2012 18:12:32" Content="I came across this problem with labs() recently.  I don't need a&#xD;&#xA;workaround -- I just want to get this problem into the queue for a&#xD;&#xA;future bug fix.&#xD;&#xA;&#xD;&#xA;My sessionInfo() is listed at the bottom in case it's helpful.&#xD;&#xA;&#xD;&#xA;thanks, &#xD;&#xA;&#xD;&#xA;Dave Cooper&#xD;&#xA;---------------------------------------------------------------------------------&#xD;&#xA;&#xD;&#xA;require(ggplot2)&#xD;&#xA;&#xD;&#xA;set.seed(123)&#xD;&#xA;d = expand.grid(group=1:2,  tx = rep(1:4,  2))&#xD;&#xA;d = transform(d,  y = tx + rnorm(16))&#xD;&#xA;&#xD;&#xA;qplot(tx,  y,  data=d,  color=factor(group),  main='Using &quot;+&#xD;&#xA;labs(colour=...)&quot;') +&#xD;&#xA;  labs(colour='Study site')&#xD;&#xA;&#xD;&#xA;qplot(tx,  y,  data=d,  color=factor(group),  main='Using &quot;+&#xD;&#xA;labs(color=...)&quot;') +&#xD;&#xA;  labs(color='Study site')&#xD;&#xA;&#xD;&#xA;# same problem,  using ggplot instead of qplot&#xD;&#xA;ggplot(d,  aes(x=tx,  y=y,  color=factor(group))) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  labs(colour='Study site')&#xD;&#xA;&#xD;&#xA;ggplot(d,  aes(x=tx,  y=y,  color=factor(group))) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  labs(color='Study site')&#xD;&#xA;&#xD;&#xA;# &gt; sessionInfo()&#xD;&#xA;# R version 2.14.1 (2011-12-22)&#xD;&#xA;# Platform: i386-pc-mingw32/i386 (32-bit)&#xD;&#xA;#&#xD;&#xA;# locale:&#xD;&#xA;#   [ 1 ] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United&#xD;&#xA;States.1252&#xD;&#xA;# [ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;LC_NUMERIC=C&#xD;&#xA;# [ 5 ] LC_TIME=English_United States.1252&#xD;&#xA;#&#xD;&#xA;# attached base packages:&#xD;&#xA;#   [ 1 ] stats     graphics  grDevices utils     datasets  methods&#xD;&#xA;base&#xD;&#xA;#&#xD;&#xA;# other attached packages:&#xD;&#xA;#   [ 1 ] nlme_3.1-103       stringr_0.6        ggplot2_0.9.0&#xD;&#xA;plyr_1.7.1&#xD;&#xA;# [ 5 ] reshape2_1.2.1     class_7.3-3        randomForest_4.6-6&#xD;&#xA;#&#xD;&#xA;# loaded via a namespace (and not attached):&#xD;&#xA;#   [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.1&#xD;&#xA;grid_2.14.1&#xD;&#xA;# [ 5 ] lattice_0.20-6     MASS_7.3-17        memoise_0.1&#xD;&#xA;munsell_0.3&#xD;&#xA;# [ 9 ] proto_0.3-9.2      RColorBrewer_1.0-5 scales_0.2.0&#xD;&#xA;tools_2.14.1 " />
    </Messages>
  </Topic>
  <Topic Id="522" Title="scale_x_continuous: data is dropped even when na.value is set">
    <Messages>
      <Message Id="0" ParentId="522" UserId="86978" Date="04/26/2012 18:13:19" Content="Examples:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=1:10)&#xD;&#xA;&#xD;&#xA;ggplot(dat,  aes(x=x,  y=x,  colour=x)) + geom_point()&#xD;&#xA;&#xD;&#xA;# Shrink colour range: out-of-range points get na.value&#xD;&#xA;ggplot(dat,  aes(x=x,  y=x,  colour=x)) + geom_point() +&#xD;&#xA;  scale_colour_continuous(limits=c(4, 7),  na.value=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;# Shrink x range: out-of-range points are removed&#xD;&#xA;# They should show up at x=5.5&#xD;&#xA;ggplot(dat,  aes(x=x,  y=x,  colour=x)) + geom_point() +&#xD;&#xA;  scale_x_continuous(limits=c(4, 7),  na.value=5.5)&#xD;&#xA;# Warning message:&#xD;&#xA;# Removed 6 rows containing missing values (geom_point). &#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="523" Title="Pulling off legend (with opts(keep='legend_box')) appears to be broken in 0.9">
    <Messages>
      <Message Id="0" ParentId="523" UserId="88556" Date="04/26/2012 22:16:19" Content="I had the functionality described in this wiki post&#xD;&#xA;&#xD;&#xA;https://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs&#xD;&#xA;&#xD;&#xA;set up and running beautifully with ggplot2 version 0.8.9. After our system underwent some maintenance,  we had to reinstall all of our packages and ggplot2 0.9 was installed. As it turns out,  this broke the functionality of `opts(keep='legend_box')`. Adding that option did not remove plot,  as expected. After reinstalling 0.8.9,  we got back the desired behavior.&#xD;&#xA;&#xD;&#xA;Is there a new way of doing this,  or is this a bug? If the former is the case,  could the above wiki post be updated?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Thanks,  and best regards&#xD;&#xA;&#xD;&#xA;Chris&#xD;&#xA;" />
      <Message Id="5370572" ParentId="523" UserId="18970" Date="04/26/2012 23:30:32" Content="You can't use this opts() anymore,  instead you need to extract the legend from gtable,  which is probably work in progress (gtable package). I've updated the wiki page with a way to do it manually.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5370598" ParentId="523" UserId="88556" Date="04/26/2012 23:32:51" Content="Great - thanks!" />
      <Message Id="6561928" ParentId="523" UserId="806435" Date="06/25/2012 22:28:14" Content="Thanks for the hard work.  No way to get this backward compatible?" />
      <Message Id="6609782" ParentId="523" UserId="4196" Date="06/27/2012 17:27:32" Content="It's not a priority at this point,  because it's not commonly used.  Sorry!" />
    </Messages>
  </Topic>
  <Topic Id="524" Title="Positional scales should not drop out-of-range values ">
    <Messages>
      <Message Id="0" ParentId="524" UserId="86978" Date="04/27/2012 16:33:21" Content="For `scale_x_continuous` and `scale_y_continuous`,  the default behavior is to drop values that go outside of the limits. The default behavior should be changed so that these values are not dropped. One way to do this is by setting `oob=rescale_none`.&#xD;&#xA;&#xD;&#xA;These example illustrates by shrinking the x range of the scale,  and then zooming out with `coord_cartesian`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Drops data outside limits&#xD;&#xA;qplot(1:10,  1:10) + scale_x_continuous(limits=c(4, 7)) +&#xD;&#xA;  coord_cartesian(xlim=c(0, 11))&#xD;&#xA;# Warning message:&#xD;&#xA;# Removed 6 rows containing missing values (geom_point). &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Data is not dropped when oob=rescale_none&#xD;&#xA;qplot(1:10,  1:10) + scale_x_continuous(limits=c(4, 7),  oob=rescale_none) +&#xD;&#xA;  coord_cartesian(xlim=c(0, 11))&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="35940663" ParentId="524" UserId="4196" Date="02/24/2014 21:23:50" Content="That behaviour seems like what I'd expect." />
    </Messages>
  </Topic>
  <Topic Id="525" Title="Violin plot with boxplot overlay: dodging error">
    <Messages>
      <Message Id="0" ParentId="525" UserId="999962" Date="04/28/2012 04:52:45" Content="In the [ geom_violin wiki ] (https://github.com/wch/ggplot2/wiki/geom_violin),  there are a number of examples.  One describes overlaying a boxplot on a violin plot that is dodged by a categorical variable:&#xD;&#xA;&#xD;&#xA;    # Generate some data&#xD;&#xA;    set.seed(111)&#xD;&#xA;    dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=rnorm(90))&#xD;&#xA;    # Get rid of half the C entries (to illustrate scaling to sample size)&#xD;&#xA;    dat &lt;- dat[  dat$x!=&quot;C&quot; | c(T, F),   ]&#xD;&#xA;&#xD;&#xA;    # Dodging with boxplot overlay&#xD;&#xA;    ggplot(dat,  aes(x=&quot;foo&quot;,  fill=x,  y=y)) + geom_violin() +&#xD;&#xA;      geom_boxplot(width=.1,  outlier.size=0,  fill=&quot;grey50&quot;,  position=position_dodge(.9)) +&#xD;&#xA;      stat_summary(fun.y=median,  geom=&quot;point&quot;,  fill=&quot;white&quot;,  shape=21,  size=4,  position=position_dodge(.9))&#xD;&#xA;&#xD;&#xA;When I run this code,  the 3 the violin plots are placed correctly,  but only a single boxplot and median point is placed (or perhaps all 3 are overlayed),  right in the center. &#xD;&#xA;&#xD;&#xA;It seems that the problem is caused by the *fill* definitions in the *geom_boxplot()* and *stat_summary()* functions.  Removing them causes 3 boxplots/points to be plotted,  but of course they are the same color as the violin plots.  &#xD;&#xA;&#xD;&#xA;In addition,  once the fill definition is removed,  the *position=position_dodge(.9)* definition is also apparently wrong,  as the 0.9 value plots the boxplots/points in the wrong position.  A value of 0.45 plots them correctly so they are inside the violin plots,  but I suspect that the problem is more likely the position of the violin plots,  as they appear squished in the center of the plot,  with lots of empty space on either side.&#xD;&#xA;&#xD;&#xA;Thanks, &#xD;&#xA;&#xD;&#xA;Jon" />
      <Message Id="5394790" ParentId="525" UserId="86978" Date="04/28/2012 06:21:18" Content="**Update**: I had some of the version numbers wrong before. I've edited it to correct the versions&#xD;&#xA;&#xD;&#xA;This looks like a change in dodging behavior from 0.9.0 to the current master,  c75fb70774bb4f249622cb941477fdec78ddaf54.&#xD;&#xA;&#xD;&#xA;* In 0.8.9 and 0.9.0,  if you mapped a variable to fill,  then *set* the variable to a value,  and then told it to use `position=&quot;dodge&quot;`,  then the geoms would be dodged.&#xD;&#xA;* In master,  if you do the same thing,  then the geoms are not dodged.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  &#xD;&#xA;                  y=c(10, 5, 8, 7, 9, 4), &#xD;&#xA;                  g=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;))&#xD;&#xA;dat&#xD;&#xA;# x  y g&#xD;&#xA;# A 10 a&#xD;&#xA;# B  5 a&#xD;&#xA;# C  8 a&#xD;&#xA;# A  7 b&#xD;&#xA;# B  9 b&#xD;&#xA;# C  4 b &#xD;&#xA;&#xD;&#xA;# Dodged bars&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;    geom_bar(position=&quot;dodge&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;# Set fill to white:&#xD;&#xA;#  In 0.9.0,  bars are dodged&#xD;&#xA;#  In master,  bars are not dodged&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;    geom_bar(position=&quot;dodge&quot;,  fill=&quot;white&quot;,  colour=&quot;black&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;One workaround is to map the variable to `group`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;    geom_bar(position=&quot;dodge&quot;,  aes(group=g),  fill=&quot;white&quot;,  colour=&quot;black&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;```" />
      <Message Id="5394856" ParentId="525" UserId="86978" Date="04/28/2012 06:36:23" Content="With a git bisect,  I found that 67939c1e45d2209a65956ebe4d1594571058c70e was the guilty commit." />
      <Message Id="5394953" ParentId="525" UserId="86978" Date="04/28/2012 07:02:37" Content="Here's a unit test:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;context(&quot;Dodging&quot;)&#xD;&#xA;&#xD;&#xA;test_that(&quot;Geoms will be dodged when mapping and then setting an aesthetic&quot;,  { &#xD;&#xA;  dat &lt;- data.frame(x=LETTERS[ 1:3 ],  &#xD;&#xA;                    y=c(10, 5, 8, 7, 9, 4), &#xD;&#xA;                    g=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;))&#xD;&#xA;&#xD;&#xA;  data &lt;- pdata(ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;      geom_bar(position=&quot;dodge&quot;,  fill=&quot;white&quot;,  colour=&quot;black&quot;,  stat=&quot;identity&quot;))[ [ 1 ] ]&#xD;&#xA;&#xD;&#xA;  # Check that every bar is 0.45 wide,  with some tolerance for rounding error&#xD;&#xA;  expect_true(all(data$xmax - data$xmin - 0.45 &lt; 1e-6))&#xD;&#xA; })&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="5420422" ParentId="525" UserId="463252" Date="04/30/2012 15:53:25" Content="I am seeing different behavior than you in 0.9.0.  &#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;    geom_bar(position=&quot;dodge&quot;,  fill=&quot;white&quot;,  colour=&quot;black&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;````&#xD;&#xA;gives me a plot where the columns are stacked,  not dodged.&#xD;&#xA;&#xD;&#xA;I'm going to make an argument that the current behavior (what I'm seeing in 0.9.0 and what you are seeing in master)  is the correct one:&#xD;&#xA;&#xD;&#xA;I'll start with a quote from the `ggplot2` book: &#xD;&#xA;&#xD;&#xA;&quot;By default,  the `group` is set to the interaction of all discrete variables in the plot.&quot; (Section 4.5.3,  page 49)&#xD;&#xA;&#xD;&#xA;On its surface,  this seems to support the idea that the boxplot in this case should be grouped by fill,  but I don't think it really does.  First,  &quot;variables&quot; is not that well defined of a concept,  so I think the best understanding of it is &quot;aesthetic&quot;,  and even more &quot;mapped aesthetics.&quot;  Also,  layers are independent of each other,  though a layer will inherit data and aesthetics from the base call -- unless they are overridden in that layer.  So I think that &quot;in the plot&quot; should really be &quot;in the layer&quot; (each layer determining default group separately).&#xD;&#xA;&#xD;&#xA;So if you agree that the more precise statement should be &quot;By default,  the `group` is set to the interaction of all discrete mapped aesthetics in the layer&quot;,  then the new behavior is correct. In the boxplot layer,  `fill` is no longer a mapped discrete aesthetic; it is a set value. &#xD;&#xA;&#xD;&#xA;Consider a different example:&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=factor(cyl))) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_smooth(method=&quot;lm&quot;) +&#xD;&#xA;  geom_smooth(method=&quot;lm&quot;,  colour=&quot;black&quot;)&#xD;&#xA;&#xD;&#xA;I would expect that the second `geom_smooth` would create a single best fit line for all the data,  and it does (in 0.9.0).&#xD;&#xA;&#xD;&#xA;Now,  I realize that you are talking about the behavior of `position_dodge` and not any of the summary statistics. However,  I would expect that dodge should use the same interpretation of what the grouping variables are as the layer it is in." />
      <Message Id="5426958" ParentId="525" UserId="86978" Date="04/30/2012 20:32:24" Content="@BrianDiggs Actually,  the bars aren't stacked or dodged -- they have `position=&quot;identity&quot;`,  so they're just overlaid on top of each other. It just looks like a stacked bar graph.&#xD;&#xA;&#xD;&#xA;Point taken that the new behavior may be more &quot;correct&quot; than the old behavior...&#xD;&#xA;" />
      <Message Id="5427988" ParentId="525" UserId="463252" Date="04/30/2012 21:19:32" Content="You're right; they aren't stacked.  However,  they do not have `position=&quot;identity&quot;` either. They are dodged,  just not visibly so; that is,  they are dodged but without anything to dodge with respect to. If you look at the summary,  then the layer with the bars does have it's position listed as dodge. Also:&#xD;&#xA;&#xD;&#xA;````r&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;    geom_bar(position=&quot;dodge&quot;,  fill=&quot;white&quot;,  colour=&quot;black&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;with(ggplot2:::PositionDodge,  debug(adjust))&#xD;&#xA;debug(ggplot2:::pos_dodge)&#xD;&#xA;p&#xD;&#xA;data&#xD;&#xA;c&#xD;&#xA;df&#xD;&#xA;c&#xD;&#xA;df&#xD;&#xA;c&#xD;&#xA;df&#xD;&#xA;c&#xD;&#xA;with(ggplot2:::PositionDodge,  undebug(adjust))&#xD;&#xA;undebug(ggplot2:::pos_dodge)&#xD;&#xA;````&#xD;&#xA;gives&#xD;&#xA;````r&#xD;&#xA;&gt; p &lt;- ggplot(dat,  aes(x=x,  y=y,  fill=g)) +&#xD;&#xA;+     geom_bar(position=&quot;dodge&quot;,  fill=&quot;white&quot;,  colour=&quot;black&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;&gt; &#xD;&#xA;&gt; with(ggplot2:::PositionDodge,  debug(adjust))&#xD;&#xA;&gt; debug(ggplot2:::pos_dodge)&#xD;&#xA;&gt; p&#xD;&#xA;debugging in: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;debug: { &#xD;&#xA;    if (empty(data)) &#xD;&#xA;        return(data.frame())&#xD;&#xA;    check_required_aesthetics(&quot;x&quot;,  names(data),  &quot;position_dodge&quot;)&#xD;&#xA;    collide(data,  .$width,  .$my_name(),  pos_dodge,  check.width = FALSE)&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; data&#xD;&#xA;  x  y PANEL group ymin ymax xmin xmax&#xD;&#xA;1 1 10     1     1    0   10 0.55 1.45&#xD;&#xA;2 2  5     1     2    0    5 1.55 2.45&#xD;&#xA;3 3  8     1     3    0    8 2.55 3.45&#xD;&#xA;4 1  7     1     1    0    7 0.55 1.45&#xD;&#xA;5 2  9     1     2    0    9 1.55 2.45&#xD;&#xA;6 3  4     1     3    0    4 2.55 3.45&#xD;&#xA;Browse[ 2 ]&gt; c&#xD;&#xA;debugging in: .fun(piece,  ...)&#xD;&#xA;debug: { &#xD;&#xA;    n &lt;- length(unique(df$group))&#xD;&#xA;    if (n == 1) &#xD;&#xA;        return(df)&#xD;&#xA;    if (!all(c(&quot;xmin&quot;,  &quot;xmax&quot;) %in% names(df))) { &#xD;&#xA;        df$xmin &lt;- df$x&#xD;&#xA;        df$xmax &lt;- df$x&#xD;&#xA;     }&#xD;&#xA;    d_width &lt;- with(df,  max(xmax - xmin))&#xD;&#xA;    diff &lt;- width - d_width&#xD;&#xA;    groupidx &lt;- match(df$group,  sort(unique(df$group)))&#xD;&#xA;    within(df,  { &#xD;&#xA;        xmin &lt;- xmin + width/n * (groupidx - 1) - diff * (n - &#xD;&#xA;            1)/(2 * n)&#xD;&#xA;        xmax &lt;- xmin + d_width/n&#xD;&#xA;        x &lt;- (xmin + xmax)/2&#xD;&#xA;     })&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; df&#xD;&#xA;  x  y PANEL group ymin ymax xmin xmax&#xD;&#xA;1 1 10     1     1    0   10 0.55 1.45&#xD;&#xA;4 1  7     1     1    0    7 0.55 1.45&#xD;&#xA;Browse[ 2 ]&gt; c&#xD;&#xA;exiting from: .fun(piece,  ...)&#xD;&#xA;debugging in: .fun(piece,  ...)&#xD;&#xA;debug: { &#xD;&#xA;    n &lt;- length(unique(df$group))&#xD;&#xA;    if (n == 1) &#xD;&#xA;        return(df)&#xD;&#xA;    if (!all(c(&quot;xmin&quot;,  &quot;xmax&quot;) %in% names(df))) { &#xD;&#xA;        df$xmin &lt;- df$x&#xD;&#xA;        df$xmax &lt;- df$x&#xD;&#xA;     }&#xD;&#xA;    d_width &lt;- with(df,  max(xmax - xmin))&#xD;&#xA;    diff &lt;- width - d_width&#xD;&#xA;    groupidx &lt;- match(df$group,  sort(unique(df$group)))&#xD;&#xA;    within(df,  { &#xD;&#xA;        xmin &lt;- xmin + width/n * (groupidx - 1) - diff * (n - &#xD;&#xA;            1)/(2 * n)&#xD;&#xA;        xmax &lt;- xmin + d_width/n&#xD;&#xA;        x &lt;- (xmin + xmax)/2&#xD;&#xA;     })&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; df&#xD;&#xA;  x y PANEL group ymin ymax xmin xmax&#xD;&#xA;2 2 5     1     2    0    5 1.55 2.45&#xD;&#xA;5 2 9     1     2    0    9 1.55 2.45&#xD;&#xA;Browse[ 2 ]&gt; c&#xD;&#xA;exiting from: .fun(piece,  ...)&#xD;&#xA;debugging in: .fun(piece,  ...)&#xD;&#xA;debug: { &#xD;&#xA;    n &lt;- length(unique(df$group))&#xD;&#xA;    if (n == 1) &#xD;&#xA;        return(df)&#xD;&#xA;    if (!all(c(&quot;xmin&quot;,  &quot;xmax&quot;) %in% names(df))) { &#xD;&#xA;        df$xmin &lt;- df$x&#xD;&#xA;        df$xmax &lt;- df$x&#xD;&#xA;     }&#xD;&#xA;    d_width &lt;- with(df,  max(xmax - xmin))&#xD;&#xA;    diff &lt;- width - d_width&#xD;&#xA;    groupidx &lt;- match(df$group,  sort(unique(df$group)))&#xD;&#xA;    within(df,  { &#xD;&#xA;        xmin &lt;- xmin + width/n * (groupidx - 1) - diff * (n - &#xD;&#xA;            1)/(2 * n)&#xD;&#xA;        xmax &lt;- xmin + d_width/n&#xD;&#xA;        x &lt;- (xmin + xmax)/2&#xD;&#xA;     })&#xD;&#xA; }&#xD;&#xA;Browse[ 2 ]&gt; df&#xD;&#xA;  x y PANEL group ymin ymax xmin xmax&#xD;&#xA;3 3 8     1     3    0    8 2.55 3.45&#xD;&#xA;6 3 4     1     3    0    4 2.55 3.45&#xD;&#xA;Browse[ 2 ]&gt; c&#xD;&#xA;exiting from: .fun(piece,  ...)&#xD;&#xA;exiting from: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;&gt; with(ggplot2:::PositionDodge,  undebug(adjust))&#xD;&#xA;&gt; undebug(ggplot2:::pos_dodge)&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5429338" ParentId="525" UserId="86978" Date="04/30/2012 22:25:29" Content="Right,  sorry,  I mixed up `stat=&quot;identity&quot;` and `position=&quot;identity&quot;` in my head." />
      <Message Id="5470965" ParentId="525" UserId="4196" Date="05/02/2012 20:08:54" Content="This behaviour is correct - setting an aesthetic is the same as not mapping.  I agree with Brian's description." />
      <Message Id="5474123" ParentId="525" UserId="86978" Date="05/02/2012 22:22:06" Content="Sounds good - I'll correct the example on the wiki page." />
    </Messages>
  </Topic>
  <Topic Id="526" Title="Unequal boxplot width when using facet_grid">
    <Messages>
      <Message Id="0" ParentId="526" UserId="373643" Date="04/28/2012 21:34:00" Content="Please try the following:&#xD;&#xA;&#xD;&#xA;df &lt;- expand.grid(y = rnorm(50),  x1 = c('a',  'b'),   x2 = c('a',  'b')) &#xD;&#xA;df$y[ df$x1 == 'a' &amp; df$x2 == 'a' ] &lt;- NA &#xD;&#xA;ggplot(df,  aes(x = x1,  y = y)) + geom_boxplot() + facet_grid(.~x2) &#xD;&#xA;&#xD;&#xA;As you can see,  the boxplot in the left panel has not the same width as those in the right panel." />
      <Message Id="5401835" ParentId="526" UserId="86978" Date="04/29/2012 01:38:08" Content="With a git bisect,  I found that 47d6210fcf490e60db92200ce7a4d3c566492ed9 is the guilty commit." />
      <Message Id="5425298" ParentId="526" UserId="86978" Date="04/30/2012 19:18:37" Content="I think the solution is to revert the change in 47d6210,  setting the return value to 1. This would also match with the documentation for the function.&#xD;&#xA;&#xD;&#xA;Then to avoid issue #388 (which 47d6210 fixed),  users could set the `expand` value for `scale_x_discrete`,  like this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(aes(x=survey_id,  y=count),  data=mydata) + geom_bar(stat=&quot;identity&quot;)  +scale_x_discrete(expand=c(1, 0))&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="527" Title="Backward compatibility with custom geoms">
    <Messages>
      <Message Id="0" ParentId="527" UserId="806435" Date="04/30/2012 16:45:45" Content="The newest version of ggplot (and dev version) break a few custom geom and stats.&#xD;&#xA;&#xD;&#xA;eg:  https://github.com/edielivon/FAAV/blob/master/r/stat-ellipse.R&#xD;&#xA;&#xD;&#xA;even after doing the ggplot2:::Stat and $new() changes.&#xD;&#xA;&#xD;&#xA;Are there any plans to make ggplot2 backward compatible?" />
      <Message Id="5421700" ParentId="527" UserId="806435" Date="04/30/2012 16:48:28" Content="The original is here:&#xD;&#xA;&#xD;&#xA;https://github.com/JoFrhwld/FAAV/blob/master/r/stat-ellipse.R&#xD;&#xA;&#xD;&#xA;This would make an amazing geom to include in base ggplot2.&#xD;&#xA;" />
      <Message Id="5425490" ParentId="527" UserId="463252" Date="04/30/2012 19:27:33" Content="Try changing the last line to&#xD;&#xA;&#xD;&#xA;````r&#xD;&#xA;stat_ellipse &lt;- function(mapping=NULL,  data=NULL,  geom=&quot;path&quot;,  position=&quot;identity&quot;,  ...) { &#xD;&#xA;  StatEllipse$new(mapping=mapping,  data=data,  geom=geom,  position=position,  ...)&#xD;&#xA; }&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;That works for me on a simple test.&#xD;&#xA;&#xD;&#xA;As for your question:&#xD;&#xA;&#xD;&#xA;&gt; Are there any plans to make ggplot2 backward compatible?&#xD;&#xA;&#xD;&#xA;I don't believe that there are. 0.9.0 changed a good bit of how things worked,  and making new geoms and stats were always considered tinkering under the hood and were never guaranteed to keep working. That said,  more changes over time are intended to make a more stable way to extend geoms and stats. Of course,  in doing so,  it will almost certainly break all the existing custom ones." />
      <Message Id="5426454" ParentId="527" UserId="806435" Date="04/30/2012 20:10:25" Content="Thanks that works.  Do you have suggestion for the move away from proto?" />
      <Message Id="5426530" ParentId="527" UserId="86978" Date="04/30/2012 20:14:11" Content="The plan is to move from proto to S3 methods,  but it's not yet determined exactly how things will work. The change will probably happen over the summer. Hopefully it will be easier to develop with ggplot2 once the change is made." />
    </Messages>
  </Topic>
  <Topic Id="528" Title="Change zero_range resolution to 1">
    <Messages>
      <Message Id="0" ParentId="528" UserId="86978" Date="04/30/2012 19:26:12" Content="Fixes #526" />
    </Messages>
  </Topic>
  <Topic Id="529" Title="mid ignored in annotation_logticks()">
    <Messages>
      <Message Id="0" ParentId="529" UserId="18970" Date="05/01/2012 03:37:26" Content="```r&#xD;&#xA;# Changing the length of the ticks&#xD;&#xA;library(grid)&#xD;&#xA;&#xD;&#xA;library(MASS)&#xD;&#xA;library(scales)&#xD;&#xA;a &lt;- ggplot(Animals,  aes(x = body,  y = brain)) + geom_point() +&#xD;&#xA;     scale_x_log10(breaks = trans_breaks(&quot;log10&quot;,  function(x) 10^x), &#xD;&#xA;                   labels = trans_format(&quot;log10&quot;,  math_format(10^.x))) +&#xD;&#xA;     scale_y_log10(breaks = trans_breaks(&quot;log10&quot;,  function(x) 10^x), &#xD;&#xA;                   labels = trans_format(&quot;log10&quot;,  math_format(10^.x))) +&#xD;&#xA;     theme_bw()&#xD;&#xA;a + annotation_logticks(short = unit(.5, &quot;mm&quot;),  mid = unit(10, &quot;mm&quot;),  long = unit(4, &quot;mm&quot;))&#xD;&#xA;```" />
      <Message Id="5434262" ParentId="529" UserId="86978" Date="05/01/2012 06:17:15" Content="I think this is happening because `mid` is a partial argument match for `middle`,  which is listed in `.all_aesthetics`. If I rename it to `mid1`,  it works fine. It looks like the partial matching is happening in `rename_aes()`. It's matching to `middle` since `mid` isn't in the `.all_aesthetic` list.&#xD;&#xA;&#xD;&#xA;Is partial argument matching really desirable?&#xD;&#xA;&#xD;&#xA;Update: I think the partial matching somehow doesn't really set `middle` to the value of `mid`. All that happens is that the value for `mid` gets thrown away somewhere (`middle` is not set at all)." />
    </Messages>
  </Topic>
  <Topic Id="530" Title="Change from partial to exact matching for aesthetics">
    <Messages>
      <Message Id="0" ParentId="530" UserId="86978" Date="05/01/2012 06:48:15" Content="This fixes #529.&#xD;&#xA;&#xD;&#xA;With this change,  it passes all tests,  and visual tests are unchanged." />
      <Message Id="5439338" ParentId="530" UserId="4196" Date="05/01/2012 14:15:06" Content="But this would then break (e.g.) `aes(col = x)`.  " />
      <Message Id="5442569" ParentId="530" UserId="86978" Date="05/01/2012 16:48:07" Content="Actually,  this change seems to have no effect on whether col `col` works. The behavior of all these examples is the same before and after this patch:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# &quot;colour&quot; works&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=cyl)) + geom_point()&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_point(colour=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;# &quot;color&quot; works&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  color=cyl)) + geom_point()&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_point(color=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;# &quot;col&quot; works&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  col=cyl)) + geom_point()&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_point(col=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;# &quot;colo&quot; doesn't work&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colo=cyl)) + geom_point()&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_point(colo=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# &quot;fill&quot; works&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  fill=cyl)) + geom_point(shape=21)&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_point(shape=21,  fill=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;# &quot;fil&quot; doesn't work&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  fil=cyl)) + geom_point(shape=21)&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_point(shape=21,  fil=&quot;red&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Maybe `col` is explicitly specified as an alias to `colour` somewhere?&#xD;&#xA;&#xD;&#xA;I'm not really sure what the partial matching with `charmatch` is doing here... As far as I can tell,  the only difference in behavior is that,  before the change,  `rename_aes()` would eat up arguments that were a partial match but not listed in `.all_aesthetics`,  so that they wouldn't get passed on to other stages in the plot building -- but it wouldn't assign values with partial matches. For example `colo=&quot;red&quot;` doesn't set `colour` to `&quot;red&quot;`,  and it also doesn't allow the value of `colo` to be passed on to the `$draw` function. The fix here allows `colo` to be passed along." />
      <Message Id="5442994" ParentId="530" UserId="463252" Date="05/01/2012 17:10:01" Content="As an aside,  `col` is separately mapped to `colour` as part of the support for being able to use base graphics names for aesthetics: https://github.com/hadley/ggplot2/blob/master/R/aes.r#L11 which then gets used in `rename_aes`" />
      <Message Id="5446065" ParentId="530" UserId="18970" Date="05/01/2012 19:32:07" Content="also,  maybe using `pmatch` instead of `charmatch` could prevent conflicts" />
      <Message Id="5471054" ParentId="530" UserId="86978" Date="05/02/2012 20:12:49" Content="Merged in 1a818ef." />
    </Messages>
  </Topic>
  <Topic Id="531" Title="ggmissing fails with options(stringsAsFactors=FALSE)">
    <Messages>
      <Message Id="0" ParentId="531" UserId="321235" Date="05/01/2012 15:10:06" Content="Example:&#xD;&#xA;&#xD;&#xA;&gt; options(stringsAsFactors=FALSE)&#xD;&#xA;&gt; example(ggmissing)&#xD;&#xA;&#xD;&#xA;ggmssn&gt; mmissing &lt;- movies&#xD;&#xA;&#xD;&#xA;ggmssn&gt; mmissing[ sample(nrow(movies),  1000),  sample(ncol(movies),  5) ] &lt;- NA&#xD;&#xA;&#xD;&#xA;ggmssn&gt; ggmissing(mmissing)&#xD;&#xA;Waiting to confirm page change...&#xD;&#xA;Error in pmin(y,  0) : object 'y' not found" />
      <Message Id="35940699" ParentId="531" UserId="4196" Date="02/24/2014 21:24:12" Content="ggmissing has been deprecated and unfortunately is no longer supported." />
    </Messages>
  </Topic>
  <Topic Id="532" Title="Factor names cannot have spaces">
    <Messages>
      <Message Id="0" ParentId="532" UserId="506275" Date="05/02/2012 08:59:57" Content="I had reported this a few years ago already in a private mail,  but it turned up again as a problem. I normally do not use spaces in factor names,  but some people insist on having space in their field names. Workaround is manual ylab.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# Factors names cannot have spaces&#xD;&#xA;library(ggplot2)&#xD;&#xA;dt = data.frame(x=1:10, y=rnorm(10))&#xD;&#xA;withSpace = &quot;Total Score&quot;&#xD;&#xA;dt[ , withSpace ] = dt$y&#xD;&#xA;ggplot(dt, aes_string(x=&quot;x&quot;, y=&quot;y&quot;)) + geom_line() # works&#xD;&#xA;ggplot(dt, aes_string(x=&quot;x&quot;, y=withSpace)) + geom_line() #error&#xD;&#xA;```" />
      <Message Id="5461309" ParentId="532" UserId="4196" Date="05/02/2012 13:28:23" Content="I think you want&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;withSpace = &quot;`Total Score`&quot;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="533" Title="scale_x_datetime converts POSIXct to local timezone">
    <Messages>
      <Message Id="0" ParentId="533" UserId="513923" Date="05/02/2012 18:23:21" Content="when passing POSIXct datetime values with GMT timezones,  scale_x_datetime appears to convert the x axis labels to the local machine timezone. There have a been a few posts on the google group and stack overflow related to this,  but I have not seen a resolution or found a bug filed here.&#xD;&#xA;&#xD;&#xA;I have tired passing tz=&quot;GMT&quot; but that is unused.&#xD;&#xA;&#xD;&#xA;reproducible example and sessionInfo() available at:&#xD;&#xA;https://gist.github.com/2578877&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5795427" ParentId="533" UserId="86978" Date="05/18/2012 20:49:24" Content="It looks like this is because the `to_time()` function in scales creates the POSIXct object but doesn't add the `tzone` attribute.&#xA;&#xA;Here's the function:&#xA;&#xA;```R&#xA;to_time &lt;- function(x)   structure(x,  class = c(&quot;POSIXt&quot;,  &quot;POSIXct&quot;))&#xA;```&#xA;&#xA;Here's a demonstration (with code borrowed from the time_trans help page).&#xA;&#xA;```R&#xA;library(scales)&#xA;t &lt;- time_trans()&#xA;&#xA;# Create times with EST&#xA;hours &lt;- seq(ISOdate(2000, 3, 20,  tz = &quot;EST&quot;),  by = &quot;hour&quot;,  length.out = 4)&#xA;hours&#xA;# [ 1 ] &quot;2000-03-20 12:00:00 EST&quot; &quot;2000-03-20 13:00:00 EST&quot;&#xA;# [ 3 ] &quot;2000-03-20 14:00:00 EST&quot; &quot;2000-03-20 15:00:00 EST&quot;&#xA;&#xA;attributes(hours)&#xA;# $class&#xA;# [ 1 ] &quot;POSIXct&quot; &quot;POSIXt&quot; &#xA;# &#xA;# $tzone&#xA;# [ 1 ] &quot;EST&quot;&#xA;&#xA;&#xA;# Attempt to pass it through time_trans&#xA;# Convert to numbers,  and then back to times&#xA;hours2 &lt;- t$inv(t$trans(hours))&#xA;&#xA;# Gets converted to local time&#xA;hours2&#xA;# [ 1 ] &quot;2000-03-20 11:00:00 CST&quot; &quot;2000-03-20 12:00:00 CST&quot;&#xA;# [ 3 ] &quot;2000-03-20 13:00:00 CST&quot; &quot;2000-03-20 14:00:00 CST&quot;&#xA;&#xA;# No tzone attribute&#xA;attributes(hours2)&#xA;# $class&#xA;# [ 1 ] &quot;POSIXt&quot;  &quot;POSIXct&quot;&#xA;```&#xA;&#xA;The question here is how to to allow passing in a value for tzone.&#xA;" />
      <Message Id="6213635" ParentId="533" UserId="4196" Date="06/08/2012 21:36:49" Content="Giving that the times are correct (they always refer to the same instant in time),  I think this is a display problem,  which means that date format needs an additional `tz` argument. &#xA;&#xA;I'm not sure how to set it up to preserve the original time zone,  though.  One option would be to modify `to_time` and `from_time` so that the first time `from_time` is used for a given transformer it captures the tz:&#xA;&#xA;```R&#xA;time2_trans &lt;- function() { &#xA;  &#xA;  tz &lt;- NULL&#xA;  to_time &lt;- function(x) { &#xA;    force(x)&#xA;    structure(x,  class = c(&quot;POSIXt&quot;,  &quot;POSIXct&quot;),  tzone = tz)&#xA;   }&#xA;&#xA;  from_time &lt;- function(x) { &#xA;    if (is.null(tz)) { &#xA;      tz &lt;&lt;- attr(as.POSIXlt(x),  &quot;tzone&quot;)[ [ 1 ] ]      &#xA;     }&#xA;    structure(as.numeric(x),  names = names(x))&#xA;   }&#xA;&#xA;  trans_new(&quot;time2&quot;,  &quot;from_time&quot;,  &quot;to_time&quot;)&#xA; }&#xA;&#xA;t2 &lt;- time2_trans()&#xA;hours &lt;- seq(ISOdate(2000, 3, 20,  tz = &quot;EST&quot;),  by = &quot;hour&quot;,  length.out = 4)&#xA;hours&#xA;&#xA;hours2 &lt;- t2$inv(t2$trans(hours))&#xA;hours2&#xA;```" />
      <Message Id="6783286" ParentId="533" UserId="4196" Date="07/05/2012 16:19:45" Content="Fixed in hadley/scales@274c1f9abd9a3c7726edd569c893b289e3886276" />
      <Message Id="17777118" ParentId="533" UserId="213894" Date="05/12/2013 12:24:32" Content="Any chance scale_x_datetime(trans=time_trans(tz=&quot;UTC&quot;)) will support trans argument?&#xD;&#xA;&#xD;&#xA;Looks like explicit `trans=&quot;time&quot;` in https://github.com/hadley/ggplot2/blob/master/R/scale-datetime.r#L91 blocks usage of trans argument for scale_x_datetime.&#xD;&#xA;&#xD;&#xA;The error message is like&#xD;&#xA;&#xD;&#xA;    Error in continuous_scale(aesthetics,  &quot;datetime&quot;,  identity,  breaks = breaks,   : &#xD;&#xA;      formal argument &quot;trans&quot; matches multiple real arguments&quot;" />
    </Messages>
  </Topic>
  <Topic Id="534" Title="Set up basic jekyll pages">
    <Messages>
      <Message Id="0" ParentId="534" UserId="4196" Date="05/02/2012 20:38:37" Content="Hosted on github using github pages" />
      <Message Id="5676483" ParentId="534" UserId="4196" Date="05/13/2012 14:06:15" Content="Done by Winston: http://ggplot2.org/" />
    </Messages>
  </Topic>
  <Topic Id="535" Title="Convert existing static content to markdown">
    <Messages>
      <Message Id="0" ParentId="535" UserId="4196" Date="05/02/2012 20:39:53" Content="Using http://johnmacfarlane.net/pandoc/try&#xD;&#xA;&#xD;&#xA;* Everything above reference manual&#xD;&#xA;* Book website (basic book info &amp; sample chapter,  code)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5676492" ParentId="535" UserId="4196" Date="05/13/2012 14:06:50" Content="Done by Winston." />
    </Messages>
  </Topic>
  <Topic Id="536" Title="Review wiki and suggest content that should be moved to website">
    <Messages>
      <Message Id="0" ParentId="536" UserId="4196" Date="05/02/2012 20:40:35" Content="" />
    </Messages>
  </Topic>
  <Topic Id="537" Title="Set up tumblr blog and recruit editors">
    <Messages>
      <Message Id="0" ParentId="537" UserId="4196" Date="05/02/2012 20:41:10" Content="" />
      <Message Id="6174711" ParentId="537" UserId="4196" Date="06/07/2012 12:34:14" Content="Done" />
    </Messages>
  </Topic>
  <Topic Id="538" Title="Integrate staticdocs">
    <Messages>
      <Message Id="0" ParentId="538" UserId="4196" Date="05/02/2012 20:42:36" Content="* One directory per release&#xD;&#xA;* Need to integrate into release process&#xD;&#xA;* Need fixed url that points to latest version&#xD;&#xA;" />
      <Message Id="5471757" ParentId="538" UserId="4196" Date="05/02/2012 20:43:23" Content="We also need to figure out how to generate the index page.  I think that we should provide some metadata to staticdocs so that it can generate something that looks like the current index with icons,  and with functions arranged thematically." />
      <Message Id="5471778" ParentId="538" UserId="4196" Date="05/02/2012 20:44:00" Content="Oh,  and I think these staticdocs should be stored in either a separate repo,  or directly on S3.  Each version will be quite large because it contains hundreds of example images." />
      <Message Id="5471842" ParentId="538" UserId="4196" Date="05/02/2012 20:46:36" Content="Ideally,  metadata should break index page into sections,  each section contains functions.  Functions are ordered alphabetically by default,  but that order can be overridden.  Each function has a title (taken my default from the rd title),  and will look for an icon named the same as the rd filename." />
    </Messages>
  </Topic>
  <Topic Id="539" Title="Buy domain names">
    <Messages>
      <Message Id="0" ParentId="539" UserId="4196" Date="05/02/2012 20:49:44" Content="" />
      <Message Id="5528194" ParentId="539" UserId="227097" Date="05/05/2012 16:05:58" Content="ggplot2.com or something else?" />
      <Message Id="5529686" ParentId="539" UserId="4196" Date="05/05/2012 19:12:35" Content="Probably .org " />
      <Message Id="5548216" ParentId="539" UserId="4196" Date="05/07/2012 11:40:00" Content="Purchased ggplot.org and ggplot2.org from namecheap." />
    </Messages>
  </Topic>
  <Topic Id="540" Title="Error in loadNamespace(i,  c(lib.loc,  .libPaths())) :    there is no package called ‘munsell’">
    <Messages>
      <Message Id="0" ParentId="540" UserId="1159142" Date="05/03/2012 00:13:02" Content="I updated the ggplot2 package in RStudio from the CRAN repo and loading the library gives the following error.  This is the first time I've had an issue loading the library.&#xD;&#xA;&#xD;&#xA;Error in loadNamespace(i,  c(lib.loc,  .libPaths())) : &#xD;&#xA;  there is no package called ‘munsell’&#xD;&#xA;Error: package/namespace load failed for ‘ggplot2’" />
      <Message Id="5475911" ParentId="540" UserId="4196" Date="05/03/2012 00:19:28" Content="Sounds like something went wrong with dependency installation: try `install.packages(&quot;munsell&quot;)`" />
      <Message Id="5476001" ParentId="540" UserId="1159142" Date="05/03/2012 00:26:43" Content="That worked.  Thank you!" />
    </Messages>
  </Topic>
  <Topic Id="541" Title="Formatter in scale_continuous error">
    <Messages>
      <Message Id="0" ParentId="541" UserId="1159142" Date="05/03/2012 00:54:59" Content="Using the following example from http://had.co.nz/ggplot2/scale_continuous.html&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;x &lt;- rnorm(10) * 100000&#xD;&#xA;y &lt;- seq(0,  1,  length = 10)&#xD;&#xA;p &lt;- qplot(x,  y)&#xD;&#xA;p + scale_y_continuous(formatter = &quot;percent&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Gives the error:&#xD;&#xA;&#xD;&#xA;**Error in continuous_scale(c(&quot;y&quot;,  &quot;ymin&quot;,  &quot;ymax&quot;,  &quot;yend&quot;,  &quot;yintercept&quot;,   : &#xD;&#xA;  unused argument(s) (formatter = &quot;percent&quot;)**&#xD;&#xA;" />
      <Message Id="5493007" ParentId="541" UserId="1159142" Date="05/03/2012 17:23:54" Content="It looks like **(formatter=&quot;percent&quot;)** has been replaced with **(labels=percent)**" />
    </Messages>
  </Topic>
  <Topic Id="542" Title="Scale-date formatting no longer working">
    <Messages>
      <Message Id="0" ParentId="542" UserId="1159142" Date="05/03/2012 18:29:25" Content="Using the scale date example from http://had.co.nz/ggplot2/scale_date.html&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;df &lt;- data.frame(date = seq(Sys.Date(),  len=100,  by=&quot;1 day&quot;)[ sample(100,  50) ],  price = runif(50))&#xD;&#xA;df &lt;- df[ order(df$date),   ]&#xD;&#xA;dt &lt;- qplot(date,  price,  data=df,  geom=&quot;line&quot;) + opts(aspect.ratio = 1/4)&#xD;&#xA;dt + scale_x_date(major=&quot;months&quot;,  minor=&quot;weeks&quot;,  format=&quot;%b&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Gives the error:&#xD;&#xA;**Error in continuous_scale(aesthetics,  &quot;date&quot;,  identity,  breaks = breaks,   : &#xD;&#xA;  unused argument(s) (major = &quot;months&quot;,  minor = &quot;weeks&quot;,  format = &quot;%b&quot;)**&#xD;&#xA;&#xD;&#xA;This was working the first week of April" />
      <Message Id="5529902" ParentId="542" UserId="86978" Date="05/05/2012 19:41:05" Content="It looks like this was broken by the scales revamp: b7d7bfc2a255e20c6517b45225de773f8950acf3" />
      <Message Id="5565350" ParentId="542" UserId="949275" Date="05/08/2012 01:29:20" Content="The arguments you used would apply to 0.8.9 but not to 0.9.0. As Winston mentioned,  setting certain positional scales is different in 0.9.0,  now using the scales package. This should be close to what you want:&#xD;&#xA;&#xD;&#xA;dt + scale_x_date(breaks = date_breaks(width = '1 month'), &#xD;&#xA;                   minor_breaks = '1 week', &#xD;&#xA;                   labels = date_format('%b-%Y'))" />
      <Message Id="5589812" ParentId="542" UserId="1159142" Date="05/09/2012 00:04:35" Content="Thank you for the detailed response.  Is there documentation for the scales package?  I had so many reports fail on 0.9.0 that I had to go back to 0.8.9." />
      <Message Id="5589966" ParentId="542" UserId="86978" Date="05/09/2012 00:14:15" Content="There are some examples with `scale_x_date` for 0.9.0 here: http://had.co.nz/ggplot2/docs/scale_date.html&#xD;&#xA;&#xD;&#xA;For the scales package you can do:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(scales)&#xD;&#xA;?date_breaks&#xD;&#xA;?date_format&#xD;&#xA;```" />
      <Message Id="5590151" ParentId="542" UserId="1159142" Date="05/09/2012 00:26:25" Content="Thank you!" />
      <Message Id="5597592" ParentId="542" UserId="949275" Date="05/09/2012 11:16:15" Content="Hi:&#xA;&#xA;The transition guide to 0.9.0 has some documentation re scales: http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf  See sections 6 and 7. This was written before the minor_breaks = argument was working,  so no examples using it are contained there (but I tried :).&#xA;&#xA;At the moment,  the help pages for the scales package,  the document mentioned above and the ggplot2 on-line help pages (had.co.nz/ggplot2/docs) are the only sources of documentation I know; a few posts on the ggplot2 list and maybe some at StackOverflow might provide a little more material of interest. However,  Hadley and I are commencing a fairly large documentation project that will encompass both ggplot2 and scales to be available on-line in a few months,  but that doesn't address your immediate concerns.&#xA;&#xA;&#xA;HTH, &#xA;Dennis&#xA;&#xA;&#xA;&#xA;________________________________&#xA; From: cfranko &lt;reply@reply.github.com&gt;&#xA;To: Dennis Murphy &lt;djmurphy0420@yahoo.com&gt; &#xA;Sent: Tuesday,  May 8,  2012 5:04 PM&#xA;Subject: Re: [ ggplot2 ] Scale-date formatting no longer working (#542)&#xA; &#xA;Thank you for the detailed response.  Is there documentation for the scales package?  I had so many reports fail on 0.9.0 that I had to go back to 0.8.9.&#xA;&#xA;---&#xA;Reply to this email directly or view it on GitHub:&#xA;https://github.com/hadley/ggplot2/issues/542#issuecomment-5589812" />
    </Messages>
  </Topic>
  <Topic Id="543" Title="facet reordering with new layer/data ">
    <Messages>
      <Message Id="0" ParentId="543" UserId="18970" Date="05/07/2012 11:49:17" Content="The facet order is broken when adding a new layer with new data.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;set.seed(123)&#xD;&#xA;&#xD;&#xA;d &lt;- data.frame(x=1:15,  y=rnorm(15),  f=factor(rep(letters[ 1:3 ], &#xD;&#xA;each=5),  levels=letters[ 1:3 ]))&#xD;&#xA;&#xD;&#xA;## all fine,  facets are a,  b,  c&#xD;&#xA;( p &lt;- ggplot(d,  aes(x,  y)) + facet_grid(f~.)+&#xD;&#xA; geom_path()  )&#xD;&#xA;&#xD;&#xA;d2 &lt;- data.frame(x=2,  y=2,  f=&quot;b&quot;, &#xD;&#xA;                           stringsAsFactors=FALSE) # to be sure&#xD;&#xA;&#xD;&#xA;## now the facets are in a different (wrong) order!&#xD;&#xA;p +  geom_blank(data=d2)&#xD;&#xA;```" />
      <Message Id="5778591" ParentId="543" UserId="227097" Date="05/18/2012 02:05:58" Content="This will be fixed at:&#xA;&#xA;```&#xA;base &lt;- unique(ldply(values[ has_all ]))    &#xA;````&#xA;&#xA;in `layout_base` of `facet-layout.r`.&#xA;&#xA;But things are complicated." />
      <Message Id="6174796" ParentId="543" UserId="4196" Date="06/07/2012 12:39:02" Content="I think this should use the same algorithm as discrete scales do when adding new values." />
    </Messages>
  </Topic>
  <Topic Id="544" Title="stat_density2d: arguments get passed to kde2d">
    <Messages>
      <Message Id="0" ParentId="544" UserId="86978" Date="05/07/2012 16:18:39" Content="This patch allows arguments to get passed properly to `kde2d`. For example,  with the `lims` argument,  it previously was getting confused because `lims` needs to be a vector,  but each element of `lims` vector was getting turned into an element in the *list*.&#xD;&#xA;&#xD;&#xA;This example now works -- density contours are drawn beyond the range of the data:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Set up the data&#xD;&#xA;sigm1 &lt;- diag(c(30, 50))&#xD;&#xA;sigm2 &lt;- diag(c(5, 3))&#xD;&#xA;mu1 &lt;- c(10, 15)&#xD;&#xA;mu2 &lt;- c(80, 60)&#xD;&#xA;library(mvtnorm)&#xD;&#xA;sample &lt;- round(rbind(rmvnorm(100, mu1, sigm1), rmvnorm(100, mu2, sigm2)))&#xD;&#xA;sample &lt;- sample[ ! (sample[ , 1 ] &lt;1 | sample[ , 2 ] &lt;1 | sample[ , 1 ]&gt; 100 |&#xD;&#xA;sample[ , 2 ]&gt;100),  ]&#xD;&#xA;d &lt;- as.data.frame(sample)&#xD;&#xA;names(d)&lt;-c(&quot;x&quot;, &quot;y&quot;)&#xD;&#xA;&#xD;&#xA;# lims now gets passed to stat_density2d&#xD;&#xA;ggplot(d,  aes(x, y)) + stat_density2d(bins=4,  lims=c(-20,  120,  0,  100)) + &#xD;&#xA;  geom_point() + xlim(-20, 120)&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Note that the limits need to be specified for ggplot,  with `xlim`,  and to `kde2d` (via `stat_density2d`),  with `lims=c(xmin,  xmax,  ymin,  ymax)`.&#xD;&#xA;&#xD;&#xA;It would be nice to get the values for `lims` from the scales,  instead of requiring the user to enter it twice." />
      <Message Id="5554208" ParentId="544" UserId="86978" Date="05/07/2012 16:33:57" Content="I updated it to automatically get `lims` from the scales.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    dens &lt;- safe.call(kde2d,  list(x = df$x,  y = df$y,  n = n, &#xD;&#xA;      lims = c(scale_dimension(scales$x),  scale_dimension(scales$y)),  ...))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Now this works:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(d,  aes(x, y)) + stat_density2d() + geom_point() +&#xD;&#xA;  xlim(-20, 120) + ylim(-10,  80)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="545" Title="labs() works with American spellings">
    <Messages>
      <Message Id="0" ParentId="545" UserId="86978" Date="05/07/2012 16:59:07" Content="This fixes #521." />
    </Messages>
  </Topic>
  <Topic Id="546" Title="Create modelvis package for model-plotting functions">
    <Messages>
      <Message Id="0" ParentId="546" UserId="86978" Date="05/07/2012 17:16:26" Content="It would be good to move functions from `stat-smooth-methods.r` into a separate modelvis package.&#xD;&#xA;&#xD;&#xA;See https://groups.google.com/forum/?fromgroups#!topic/ggplot2-dev/txxfT5y7drY.&#xD;&#xA;&#xD;&#xA;Also see https://gist.github.com/2520748 for some code to generate predictions from models." />
      <Message Id="35940740" ParentId="546" UserId="4196" Date="02/24/2014 21:24:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="547" Title="Make sure roxygen docs are properly commented">
    <Messages>
      <Message Id="0" ParentId="547" UserId="86978" Date="05/07/2012 20:09:46" Content="There are many roxygen documentation blocks that aren't properly commented. They have just `#`,  instead of `#'` marking the block,  and so they're ignored by roxygen2.&#xD;&#xA;&#xD;&#xA;For example,  the `firstUpper` function here:&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/aaa-.r&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Also,  a lot of these blocks have a typo where they use `@keyword` instead of `@keywords`." />
      <Message Id="5559645" ParentId="547" UserId="4196" Date="05/07/2012 20:16:08" Content="That's probably deliberate - I use `#` for internal docs." />
      <Message Id="5559712" ParentId="547" UserId="86978" Date="05/07/2012 20:18:53" Content="There are also many cases with `@keywords internal` that have `#'`. Should those be changed to `#`,  then?&#xD;&#xA;&#xD;&#xA;Or are there two types of internal docs you have in mind?" />
      <Message Id="5562129" ParentId="547" UserId="86978" Date="05/07/2012 22:06:23" Content="After some clarification from @hadley,  I think the code generally doesn't need to be changed:&#xD;&#xA;&#xD;&#xA;There are three levels of documentation:&#xD;&#xA;&#xD;&#xA;1) needed by package users&#xD;&#xA;2) need by some package users - i.e. if you wanted to develop a new geom&#xD;&#xA;3) needed only by hard core developers&#xD;&#xA;&#xD;&#xA;1 = #'&#xD;&#xA;2 = #'  + @keywords internal&#xD;&#xA;3 = #&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="548" Title="overlapping bins when aes(color) is used.">
    <Messages>
      <Message Id="0" ParentId="548" UserId="524923" Date="05/07/2012 20:28:31" Content="The following produces overlapping bins.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;n = 1000&#xD;&#xA;temp &lt;- data.frame( &#xD;&#xA;		   	       x= rnorm(n)&#xD;&#xA;			     ,  y = rnorm(n)&#xD;&#xA;			     ,  z = sample(1:5,  n,  replace = TRUE)&#xD;&#xA;			     ,  f = as.factor(sample(1:3,  n,  replace = TRUE,  prob = c(0.8,  0.15,  0.05)))&#xD;&#xA;			)&#xD;&#xA;&#xD;&#xA;ggplot(data = temp,  aes(x,  y,  z = z,  colour = f))+ stat_summary2d()&#xD;&#xA;```" />
      <Message Id="5560360" ParentId="548" UserId="86978" Date="05/07/2012 20:45:25" Content="This is happening because each group of the data is binned separately,  and for each group,  the bins are centered based on the data.&#xD;&#xA;&#xD;&#xA;A workaround is to specify the origin:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(data = temp,  aes(x,  y,  z = z,  colour = f)) +&#xD;&#xA;  stat_summary2d(origin=c(min(temp$x),  min(temp$y)))&#xD;&#xA;```&#xD;&#xA;Note that the outlines overlap and so it may look a little strange." />
      <Message Id="5577839" ParentId="548" UserId="524923" Date="05/08/2012 15:43:21" Content="Is it possible to specify which color ends up on top? Also was/is this the right place to talk about this?" />
      <Message Id="5579449" ParentId="548" UserId="86978" Date="05/08/2012 16:40:41" Content="Probably the mailing list is a better place to discuss this,  but it's OK here since this started out as a bug report.&#xD;&#xA;&#xD;&#xA;One way is to re-order the factor levels:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;temp$f &lt;- factor(temp$f,  levels=c(&quot;3&quot;,  &quot;1&quot;,  &quot;2&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(data = temp,  aes(x,  y,  z = z,  colour = f)) +&#xD;&#xA;  stat_summary2d(origin=c(min(temp$x),  min(temp$y)))&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="549" Title="Axis labelling fails with date_breaks and POSIXct dates">
    <Messages>
      <Message Id="0" ParentId="549" UserId="197589" Date="05/08/2012 10:08:14" Content="    library(lubridate)&#xD;&#xA;    library(scales)&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    &#xD;&#xA;    #Two sample datasets&#xD;&#xA;    dfr1 &lt;- data.frame(&#xD;&#xA;      date = seq(as.Date(&quot;2012-01-01&quot;),  as.Date(&quot;2012-12-31&quot;),  by = &quot;1 day&quot;), &#xD;&#xA;      value = runif(366)  &#xD;&#xA;    )&#xD;&#xA;    &#xD;&#xA;    dfr2 &lt;- data.frame(&#xD;&#xA;      date = seq(ymd(&quot;2012-01-01&quot;),  ymd(&quot;2012-12-31&quot;),  by = &quot;1 day&quot;), &#xD;&#xA;      value = runif(366)  &#xD;&#xA;    )&#xD;&#xA;    &#xD;&#xA;    #OK&#xD;&#xA;    (p &lt;- ggplot(dfr1,  aes(date,  value)) +&#xD;&#xA;      geom_line() +&#xD;&#xA;      scale_x_date(&#xD;&#xA;        breaks = date_breaks(&quot;months&quot;), &#xD;&#xA;        labels = date_format(&quot;%b&quot;)&#xD;&#xA;      )&#xD;&#xA;    )&#xD;&#xA;    &#xD;&#xA;    #No axis labels&#xD;&#xA;    p %+% dfr2&#xD;&#xA;&#xD;&#xA;`date_breaks()(dfr1$date)` and `date_breaks()(dfr2$date)` return the same dates (though with different classes),  so I suspect that the problem lies somewhere in the scale creation." />
      <Message Id="6213645" ParentId="549" UserId="4196" Date="06/08/2012 21:37:03" Content="The problem is that you're using `scale_date` with `POSIXct` values (it expects dates).  I think the solution is that somewhere in `scale_x_datetime` a warning needs to be raised if you're using the wrong type of data.  Probably the best place is in `to_time` and `to_date`" />
      <Message Id="6783028" ParentId="549" UserId="4196" Date="07/05/2012 16:10:30" Content="Fixed in hadley/scales#542b8149107776bdd37fdf07ac0cbe27021a7ba7" />
    </Messages>
  </Topic>
  <Topic Id="550" Title="Axis breaks misbehaving ">
    <Messages>
      <Message Id="0" ParentId="550" UserId="394973" Date="05/08/2012 20:06:33" Content="Thanks to David Kahle for the examples. &#xA;&#xA;```R&#xA;n &lt;- 10&#xA;&#xA;# original demonstration of problem&#xA;df &lt;- data.frame(x = 10^runif(n,  -19,  -13),  y = rnorm(n))&#xA;qplot(x,  y,  data = df) + scale_x_log10()&#xA;&#xA;# happens on normal scale,  too&#xA;qplot(x,  y,  data = df)&#xA;&#xA;# this helps to see where it happens&#xA;u &lt;- runif(n); y &lt;- rnorm(n)&#xA;df &lt;- NULL&#xA;for(k in 1:18){ &#xA;  df &lt;- rbind(df,  data.frame(x = 10^(-k-u),  y = y,  g = k))&#xA; }&#xA;&#xA;qplot(x,  y,  data = df) # ok&#xA;qplot(x,  y,  data = df) + scale_x_log10() # ok&#xA;qplot(x,  y,  data = df) + facet_wrap(~ g,  scales = 'free_x')&#xA;qplot(x,  y,  data = df) + facet_wrap(~ g,  scales = 'free_x') + scale_x_log10()&#xA;```" />
      <Message Id="5585542" ParentId="550" UserId="86978" Date="05/08/2012 20:32:18" Content="In `scale-.r`,  the function `scale_breaks.continuous()` calls `zero_range()` from scales,  which is defined as:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;function (x)  { &#xD;&#xA;    length(x) == 1 || isTRUE(all.equal(x[ 1 ] - x[ 2 ],  0))&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;The default tolerance for `all.equal` is `.Machine$double.eps ^ 0.5`. According to `?.Machine`,  `double.eps` is &quot;the smallest positive floating-point number x such that `1 + x != 1`.&quot;&#xD;&#xA;&#xD;&#xA;In general,  I think `scale_breaks.continuous()` needs a better way of figuring out whether a non-zero range is intended or due to floating point error. (I'm not sure this is possible,  though.)&#xD;&#xA;" />
      <Message Id="5594552" ParentId="550" UserId="394973" Date="05/09/2012 07:44:10" Content="I was sure it had something to do with the size of his values. Tiny values are tiny. " />
      <Message Id="6132647" ParentId="550" UserId="463252" Date="06/05/2012 18:32:17" Content="Collecting some comments/discussion on this.&#xA;&#xA;There was a patch to `scales` that addressed some aspects of this problem. That patch was hadley/scales#6 which I believe was at least partially in response to https://groups.google.com/d/topic/ggplot2/voh__Tl5hxA/discussion. However,  that fix does not seem to handle all the cases which are triggering false positives. In particular see two StackOverflow questions: http://stackoverflow.com/q/10900809/892313 and http://stackoverflow.com/q/10808056/892313 which deal with small numbers (on the order of 10^-11 and 10^-123).  &#xA;&#xA;The current fix applies to small differences in large numbers (based on the code in the tests in hadley/scales@e130daa74de012ee529e1203e1f1ad7f8bbec3f2). What is missing is not triggering a false positive on (relatively) large differences in very small numbers.&#xA;&#xA;There is also a discussion on ggplot-dev: https://groups.google.com/d/topic/ggplot2-dev/hNDrahVs94E/discussion" />
    </Messages>
  </Topic>
  <Topic Id="551" Title="Allow to draw gridlines on top of data">
    <Messages>
      <Message Id="0" ParentId="551" UserId="18445" Date="05/09/2012 15:54:06" Content="When using `geom_tile` or maps,  the grid lines are completely obscured by the data plotted on top of them. Sometimes,  particularly for maps,  it is desirable to still see the grid lines. Using transparency is a workaround but costly in terms of rendering,  compatibility (EPS does not support transparency) and legibility.&#xD;&#xA;&#xD;&#xA;Ideally,  one should be able to specify where to draw grid lines (at which level in the plot). For example,  one might want to draw them on top of a map/tile layer but below a points layer.&#xD;&#xA;&#xD;&#xA;Another way to look at it is to specify,  for each geom/layer wether is it above or below the grid lines." />
      <Message Id="35940756" ParentId="551" UserId="4196" Date="02/24/2014 21:24:35" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="552" Title="Setting breaks outside of axis ranges fails">
    <Messages>
      <Message Id="0" ParentId="552" UserId="18445" Date="05/10/2012 15:40:36" Content="&#xD;&#xA;    library(&quot;ggplot2&quot;)&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=1:10)&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=x))&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=x)) + scale_y_continuous(breaks=c(1, 5),  labels=c(&quot;foo&quot;,  &quot;bar&quot;))&#xD;&#xA;    # OK&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=x)) + scale_y_continuous(breaks=c(-1, 5),  labels=c(&quot;foo&quot;,  &quot;bar&quot;))&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=x)) + scale_y_continuous(breaks=c(1, 11),  labels=c(&quot;foo&quot;,  &quot;bar&quot;))&#xD;&#xA;    # Fails&#xD;&#xA;&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=x)) + scale_y_continuous(breaks=c(-1, 5),  labels=c(&quot;foo&quot;,  &quot;bar&quot;),  limits=c(-1, 10))&#xD;&#xA;    ggplot(d) + geom_point(aes(x=x,  y=x)) + scale_y_continuous(breaks=c(1, 11),  labels=c(&quot;foo&quot;,  &quot;bar&quot;),  limits=c(1,  11))&#xD;&#xA;    # OK,  because the scales are expanded&#xD;&#xA;&#xD;&#xA;What should happen is :&#xD;&#xA;&#xD;&#xA;* when limits are not explicitly set,  setting breaks outside of the data range expands the limits to those breaks&#xD;&#xA;* when limits are explicitly set,  breaks and labels outside of the limit range are dropped&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5641413" ParentId="552" UserId="227097" Date="05/11/2012 01:50:18" Content="good point. thanks." />
      <Message Id="5703264" ParentId="552" UserId="86978" Date="05/14/2012 21:56:34" Content="This was broken by 19da6a8a4ec313c7e447b493387c3241584d1535.&#xA;&#xA;Bisect script here: https://gist.github.com/2697594" />
      <Message Id="5706079" ParentId="552" UserId="227097" Date="05/15/2012 00:58:53" Content="Thanks @wch,  I figured out what is problem.&#xA;&#xA;The limits of coord (not limits of scale) will be determined by some ways.&#xA;&#xA;(1) coord limits&#xA;(2) scale limits&#xA;(3) scale breaks&#xA;(4) default (i.e.,  the range of data)&#xA;&#xA;So the rule is:&#xA;&#xA;a) If (1) coord limits is explicitly set,  use it and ignore the others including the *oob breaks*.&#xA;b) If (2) scale limits is explicitly set,  use it and ignore the *oob breaks*.&#xA;c) if (3) scale breaks is explicitly set and it spans out of data range,  expand the range to the scale breaks.&#xA;d) if all of 1-3 are absent,  or if (3) is set but it spans inside the data range,  use data range.&#xA;&#xA;I'm not sure if (b) and (c) is ok.&#xA;Do you have any ideas?&#xA;&#xA;Here is a pseudo code:&#xA;&#xA;```&#xA;range &lt;- data_limits&#xA;if (!is.null(coord_limits)) {  &#xA;  range &lt;- coord_lim &#xA;  drop_oob_breaks(range)&#xA; }&#xA;else if(!is.null(scale_limits))  { &#xA;  range &lt;- coord&#xA;  drop_oob_breaks(range)&#xA; }&#xA;else if(!is.null(scale_breaks)) { &#xA;  range[ 1 ] &lt;- min(range[ 1 ],  scale_breaks[ 1 ])&#xA;  range[ 2 ] &lt;- max(range[ 2 ],  scale_breaks[ 2 ])&#xA; }&#xA;```" />
      <Message Id="5707732" ParentId="552" UserId="227097" Date="05/15/2012 03:31:40" Content="The problemis if oob breaks expand the existing limits.&#xA;&#xA;Probably three ways:&#xA;&#xA;(1) oob breaks doesn't affect the scale/coord limits and simply will be dropped (@wch's suggestion and compatible with 0.9).&#xA;(2) oob breaks expands the scale/coord limits if they are not explicitly set (my tentative implementation).&#xA;(3) Parameters to scales such as `respect.breaks = T/F` to choose (1) or (2). I don't like this way. &#xA;&#xA;I like the @wch's suggestion,  because we can set limits explicitly if necessary.&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="553" Title="Allow equal width violins">
    <Messages>
      <Message Id="0" ParentId="553" UserId="18445" Date="05/11/2012 11:07:43" Content="* Reformat stat_ydensity to look more like stat_density.&#xA;&#xA;* Also get coding cues from stat_boxplot.&#xA;&#xA;* Introduce a new scale options to have equal width (useful when&#xA; comparing observations with very different densities).&#xA;&#xA;* Keep all computed densities and use a new variable to compute&#xA; the density actually used to plot the violin." />
      <Message Id="5654161" ParentId="553" UserId="18445" Date="05/11/2012 15:58:10" Content="&#xD;&#xA;Simple use case: compare distributions with very different sample sizes&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(a=c(&quot;a&quot;,  rep(&quot;b&quot;,  100),  rep(&quot;c&quot;,  100)),  x=c(1,  rnorm(100,  1,  50),  rnorm(100, 2, 30)))&#xD;&#xA;    library(&quot;ggplot2&quot;)&#xD;&#xA;    ggplot(d,  aes(x=a,  y=x)) + geom_violin()&#xD;&#xA;&#xD;&#xA;The two violins for b and c are useless. I agree that it is misleading because there is no indication of the difference in sample size,  but at least,  in routine checking having equal widths gives a readable plot.&#xD;&#xA;" />
      <Message Id="5654168" ParentId="553" UserId="86978" Date="05/11/2012 15:58:26" Content="I think the `equal` option (for equal area) should stay the same. And `width` should change to `equalwidth`. &#xD;&#xA;&#xD;&#xA;This will maintain compatibility with previous version,  and since `equalwidth` will probably not be commonly used,  I think it's OK for it to get the more verbose name.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="5659248" ParentId="553" UserId="18445" Date="05/11/2012 19:41:35" Content="Regarding the names of the arguments: I found &quot;equal&quot; to be a bit cryptic (what is equal exactly?) and I found your original ideas on this mater (scalearea and scalecount) clearer. So I thought it might be still time to change it; later will be too late. In particular since equal is the default,  so there's a really good chance that nobody explicitly specified it yet. Another possibility is to document &quot;area&quot;,  &quot;count&quot; and &quot;width&quot; only,  but also allow &quot;equal&quot; internally.&#xA;&#xA;Even if you still want to change back &quot;area&quot; to &quot;equal&quot;,  I think &quot;width&quot; can stay as it is,  can't it?" />
      <Message Id="6113151" ParentId="553" UserId="4196" Date="06/04/2012 22:22:42" Content="I really don't like that usage of `match.args` - I think it's better to not rely on special evaluation tricks and just give `match.args` all the arguments it needs." />
      <Message Id="6331490" ParentId="553" UserId="18445" Date="06/14/2012 15:11:54" Content="The last commits should solve the `match.args` issue (my original code was based on what I usually saw in R but I agree that in the context of proto functions which call each other many times it is not as clear).&#xA;&#xA;As for scale=&quot;area&quot; or scale=&quot;equal&quot; I made it so both can be used byt &quot;equal&quot; triggers a deprecated call (using .Deprecated,  that will help flag it and later remove it)" />
      <Message Id="7830430" ParentId="553" UserId="86978" Date="08/17/2012 18:09:17" Content="Rebased onto master and merged at aa9655e62f68bec5e8f1a70b0e014b7668502ad7." />
    </Messages>
  </Topic>
  <Topic Id="554" Title="Small cleanup of stat density">
    <Messages>
      <Message Id="0" ParentId="554" UserId="18445" Date="05/11/2012 13:08:52" Content="To keep the code clear and the documentation in line with the code." />
      <Message Id="5650103" ParentId="554" UserId="18445" Date="05/11/2012 13:09:25" Content="The most important change is explained in defail in the commit message of 538d75a" />
      <Message Id="7496310" ParentId="554" UserId="4196" Date="08/03/2012 22:35:34" Content="See discussion of #595 - any fix is going to require backward incompatible changes." />
      <Message Id="35940799" ParentId="554" UserId="4196" Date="02/24/2014 21:24:57" Content="Unfortunately that change would break existing code so isn't suitable for inclusion in a very mature package like ggplot2.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="555" Title="Default to colorbar for continuous colour scales">
    <Messages>
      <Message Id="0" ParentId="555" UserId="4196" Date="05/11/2012 16:28:54" Content="" />
      <Message Id="5655063" ParentId="555" UserId="86978" Date="05/11/2012 16:34:28" Content="My feeling is that it's harder to visually match up colors on a continuous color legend. Perhaps this is something that deserves empirical study,  e.g.,  see how accurately and quickly people can interpret graphs with with continuous vs. discrete guides." />
      <Message Id="5657238" ParentId="555" UserId="463252" Date="05/11/2012 18:07:33" Content="That seems to be an issue with representing a continuous variable with color (a feature that has been available for long time). This is just an issue of how the legend/guide is displayed. Now,  even a continuous mapping between color and data is represented by a few discrete labeled values. The colorbar guide draws the whole (or at least many more levels so that it looks continuous) range of colors and labels a select few with the corresponding data value. The colors that would be used on the graph would be unchanged from the current approach.&#xD;&#xA;&#xD;&#xA;That said,  it would be interesting to see empirical data on determining the data value given the color comparing the current blocked legend versus a colorbar legend." />
      <Message Id="5658147" ParentId="555" UserId="86978" Date="05/11/2012 18:49:05" Content="When there's a continuous colorbar,  I find my eyes going back and forth between the legend and the data a lot,  and without any practical gain in interpreting the data... For example,  compare these:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(mtcars,  aes(wt, mpg,  colour=disp)) + geom_point(size=4)&#xD;&#xA;&#xD;&#xA;ggplot(mtcars,  aes(wt, mpg,  colour=disp)) + geom_point(size=4) +&#xD;&#xA;    guides(colour=&quot;colourbar&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Here's what it feels like I'm doing:&#xD;&#xA;&#xD;&#xA;* With the discrete legend,  I can look at a point,  then at the legend,  at the point,  and then at the legend again. Then I can say,  that point is around 300 or so,  maybe in the direction of 400.&#xD;&#xA;* With the colorbar,  I look back and forth between the points and legend many more times,  trying to find the exact point on the bar that matches the color of a point. But in the end,  my interpretation of the values feels no more accurate than before. I think the gradient makes it difficult to accurately perceive a horizontal &quot;line&quot; of color on the legend -- the neighboring colors interfere with the perception of each line.&#xD;&#xA;&#xD;&#xA;Of course,  it would be nice to have data on this stuff.&#xD;&#xA;&#xD;&#xA;Semi-unrelated issue: I noticed that the discrete legend has the larger values on top,  while the continuous legend has smaller values on top. Is this difference intended?" />
      <Message Id="5663529" ParentId="555" UserId="227097" Date="05/11/2012 23:47:08" Content="I agree Hadley's proposal.&#xA;&#xA;The benefit of color bar is twofold.&#xA;First,  colorbar guide itself will tell viewers that the color is continuous scale. This is quite important.&#xA;Second,  it enables viewers create a complicated map (i.e.,  function) between value and color.&#xA;For example,  try this:&#xA;&#xA;```&#xA;ggplot(mtcars,  aes(wt, mpg,  colour=disp)) + geom_point(size=4) +&#xA;    guides(colour=&quot;colourbar&quot;) + scale_color_continuous(trans = &quot;log10&quot;)&#xA;ggplot(mtcars,  aes(wt, mpg,  colour=disp)) + geom_point(size=4) + &#xA;    scale_color_continuous(trans = &quot;log10&quot;)&#xA;```&#xA;&#xA;I imagine that few people will intend to show accurate value by continuous scale,  e.g.,  few people will be interested in whether the point is 400,  399,  or 401. By continuous color scale,  viewer will be required to grasp the relation between each data point. For this purpose,  gradient in the colorbar would be useful. If you want to show the precise value for continuous scale,  you'd better to use other way,  e.g.,  direct label.&#xA;&#xA;&#xA;&gt;Semi-unrelated issue: I noticed that the discrete legend has the larger values on top,  while the continuous legend has smaller values on top. Is this difference intended?&#xA;&#xA;Yes and no. When I write the colorbar,  I followed Matlab style,  so larger on top." />
    </Messages>
  </Topic>
  <Topic Id="556" Title="More sensitive to breaks/labels/limits (fixes #552).">
    <Messages>
      <Message Id="0" ParentId="556" UserId="227097" Date="05/15/2012 01:32:59" Content="I believe this will fix the problem. This passed all unit tests. May I write visual tests and additional unit test codes?" />
      <Message Id="5707101" ParentId="556" UserId="86978" Date="05/15/2012 02:27:25" Content="I think having unit tests is an excellent idea. Visual tests would also be useful. In order to keep the number of visual tests small (and therefore fast),  I think it would be good to &quot;exercise&quot; multiple things in one graph -- for example,  in one visual test,  do something to the x scale and do something different to the y scale." />
      <Message Id="5775701" ParentId="556" UserId="86978" Date="05/17/2012 22:22:07" Content="I'm adding some more tests... Can you explain what the difference is between `major` and `major_source`,  and the same for `minor` and `minor_source`? This will help me write better tests.&#xA;&#xA;**Edit:** Is `major_source` in the data space,  and `major` in the panel's native coordinates (ranging from 0 to 1)?" />
      <Message Id="5777153" ParentId="556" UserId="227097" Date="05/18/2012 00:05:14" Content="Thanks,  that's right. `major` and `minor` is in the native coords while `*_source` is in the data space.&#xA;`coord_map` and `coord_polor` requires that in the data space.&#xA;&#xA;But this may be changed into more consistent way." />
      <Message Id="5777360" ParentId="556" UserId="86978" Date="05/18/2012 00:22:44" Content="I squashed the commits into 22434e76375eaea3f530598db435751966f79264,  added some tests,  and merged in 7f2cbec26b2fa333de3a74659de29120473047b4." />
    </Messages>
  </Topic>
  <Topic Id="557" Title="Allow setting just one of the limits of scale">
    <Messages>
      <Message Id="0" ParentId="557" UserId="86978" Date="05/16/2012 06:11:07" Content="It would be handy to be able to set just the lower or upper limit of a scale. For example,  when making a line graph,  you might just want to set the lower y limit to 0,  but let ggplot automatically calculate the upper bound.&#xA;&#xA;```R&#xA;# Lower y value on plot is 8&#xA;ggplot(BOD,  aes(Time,  demand)) + geom_line()&#xA;&#xA;# Something like this would be useful&#xA;ggplot(BOD,  aes(Time,  demand)) + geom_line() + ylim(0, NULL)&#xA;```" />
      <Message Id="35940809" ParentId="557" UserId="4196" Date="02/24/2014 21:25:05" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="558" Title="Use colorbar guide as default for continuous color/fill scale (fixes #555)">
    <Messages>
      <Message Id="0" ParentId="558" UserId="227097" Date="05/17/2012 06:53:07" Content="" />
      <Message Id="5822093" ParentId="558" UserId="4196" Date="05/21/2012 13:17:05" Content="Could you please add a note to `NEWS`?" />
      <Message Id="5837970" ParentId="558" UserId="227097" Date="05/22/2012 01:51:21" Content="Updated." />
      <Message Id="5838716" ParentId="558" UserId="86978" Date="05/22/2012 03:15:05" Content="Should it be &quot;colourbar&quot; for spelling consistency?" />
      <Message Id="5839110" ParentId="558" UserId="227097" Date="05/22/2012 04:01:10" Content="@wch Thanks,  fixed." />
      <Message Id="5839145" ParentId="558" UserId="86978" Date="05/22/2012 04:06:58" Content="I mean,  should it be &quot;colourbar&quot; in the code?" />
      <Message Id="5839191" ParentId="558" UserId="227097" Date="05/22/2012 04:13:19" Content="Sure,  fixed ;-)" />
      <Message Id="6117700" ParentId="558" UserId="86978" Date="06/05/2012 05:12:29" Content="Rebased,  edited,  and merged in 81c847b25899ac3f62b4dac9d72e256da8fd68be." />
    </Messages>
  </Topic>
  <Topic Id="559" Title="geom_vline argument linetype does not accept a vector in v0.9.0/R2.14 although it did in v0.8.9/R2.12 ">
    <Messages>
      <Message Id="0" ParentId="559" UserId="464871" Date="05/21/2012 17:01:35" Content="Something like this is in my existing code:&#xA;&#xA;    ggplot(data = data.frame(x=1:3, y=1:3)) + &#xA;                geom_point(aes(x, y)) + &#xA;                geom_vline(aes(xintercept = c(0.5,  0.95,  1),  linetype = c(2, 1, 2)),  color = 'grey')&#xA;&#xA;&#xA;It works fine in ggplot v 0.8.9,  but in v. 0.9.0,  I get the following error:&#xA;&#xA;    Error: A continuous variable can not be mapped to linetype&#xA;&#xA;The problem is resolved by changing the code to `linetype = as.factor(c(2, 1, 2))`&#xA;&#xA;This change breaks old code,  I don't see the value in the change (although perhaps there is value). This is FYI - I can change my old code.&#xA;&#xA;Here is sessionInfo() where it works:&#xA;&#xA;```&#xA;&gt; sessionInfo()&#xA;R version 2.12.2 (2011-02-25)&#xA;Platform: x86_64-redhat-linux-gnu (64-bit)&#xA;&#xA;locale:&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xA; [ 5 ] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8   &#xA; [ 7 ] LC_PAPER=en_US.UTF-8       LC_NAME=C                 &#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xA;&#xA;attached base packages:&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods  &#xA;[ 8 ] base     &#xA;&#xA;other attached packages:&#xA;[ 1 ] ggplot2_0.8.9 proto_0.3-8   reshape_0.8.3 plyr_1.6     &#xA;&#xA;loaded via a namespace (and not attached):&#xA;[ 1 ] coda_0.13-5     digest_0.4.2    lattice_0.19-17 rjags_2.2.0-2  &#xA;```&#xA;&#xA;and where it doesn't work:&#xA;&#xA;&#xA;```&#xA;sessionInfo()&#xA;R version 2.14.2 (2012-02-29)&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xA;&#xA;locale:&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xA;&#xA;attached base packages:&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xA;&#xA;other attached packages:&#xA;[ 1 ] plyr_1.7.1    ggplot2_0.9.0&#xA;&#xA;loaded via a namespace (and not attached):&#xA; [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.14.2       &#xA; [ 5 ] MASS_7.3-18        memoise_0.1        munsell_0.3        proto_0.3-9.2     &#xA; [ 9 ] RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.0       stringr_0.6       &#xA;[ 13 ] tools_2.14.2      &#xA;```&#xA;" />
      <Message Id="5838693" ParentId="559" UserId="86978" Date="05/22/2012 03:12:06" Content="This looks just like a previous issue with `scale_shape_identity`: #402.&#xA;&#xA;I don't know if the solution (changing it to a continuous scale) is the same though. `linetype` can take string values,  so it may not play well if it's changed to continuous.&#xA;&#xA;&#xA;In the meantime,  the &quot;proper&quot; solution is to use `scale_linetype_identity`,  which tells ggplot that the linetype values should be passed directly:&#xA;&#xA;```R&#xA;ggplot(data = data.frame(x=1:3, y=1:3)) + &#xA;            geom_point(aes(x, y)) + &#xA;            geom_vline(aes(xintercept = c(0.5,  0.95,  1),  linetype = c(2, 1, 2)),  color = 'grey') +&#xA;            scale_linetype_identity()&#xA;```&#xA;" />
      <Message Id="5838944" ParentId="559" UserId="464871" Date="05/22/2012 03:41:13" Content="@wch I think you have it backward - &#xA;&#xA;&gt; I don't know if the solution (changing it to a continuous scale) is the same though. linetype can take string values,  so it may not play well if it's changed to continuous.&#xA;&#xA;the problem is that `c(1, 2, 1)` is a continuous numeric vector; my solution was to change it to a discrete vector (e.g. `as.factor`). This does seem similar to issue #402,  where a proposed solution was to use `as.integer` ,  although it appears that this didn't actually work." />
      <Message Id="5865296" ParentId="559" UserId="86978" Date="05/23/2012 05:06:09" Content="@dlebauer - I was referring to changing the *definition* of `scale_linetype` from a discrete scale to a continuous scale,  as 402 -- not changing the data that's passed in." />
      <Message Id="6113049" ParentId="559" UserId="4196" Date="06/04/2012 22:17:38" Content="The previous behaviour was a bug - you shouldn't be able to map linetype to a continuous value. " />
      <Message Id="6113447" ParentId="559" UserId="464871" Date="06/04/2012 22:36:38" Content="I understand your point,  but wouldn't this be analogous to&#xA;&#xA;``` &#xA;with(iris,  plot(Sepal.Length ~ Species,  lty = c(1, 2, 1)))&#xA;&#xA;```" />
      <Message Id="6113490" ParentId="559" UserId="4196" Date="06/04/2012 22:39:07" Content="That would be analogous to `qplot(Species,  Sepal.Length,  data = iris,  linetype = c(1, 2, 1)) + scale_linetype_identity()`" />
    </Messages>
  </Topic>
  <Topic Id="560" Title="guide_colourtext">
    <Messages>
      <Message Id="0" ParentId="560" UserId="227097" Date="05/22/2012 15:58:21" Content="https://groups.google.com/group/ggplot2/browse_thread/thread/cc472eec091b59c3&#xA;&#xA;Or,  more flexible way to control the legend guide." />
      <Message Id="35940821" ParentId="560" UserId="4196" Date="02/24/2014 21:25:13" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="561" Title="format argument to scale_x_datetime removed from v0.9.0?">
    <Messages>
      <Message Id="0" ParentId="561" UserId="464871" Date="05/22/2012 20:39:52" Content="I noticed that the following code works with 0.8.9 but not with 0.9.0 (same sessionInfo as #559)&#xA;&#xA;```&#xA;library(lubridate) &#xA;library(ggplot2) &#xA;&#xA;foo &lt;- ymd_hms(&quot;2012-02-06 15:47:00&quot;)&#xA;qplot(hour(foo)) + scale_x_datetime(format = &quot;%S:00&quot;)&#xA;```&#xA;&#xA;in 0.9.0 I get the error:&#xA;&#xA;```&#xA;Error in continuous_scale(aesthetics,  &quot;datetime&quot;,  identity,  breaks = breaks,   : &#xA;  unused argument(s) (format = &quot;%S:00&quot;)&#xA;```&#xA;" />
      <Message Id="5864699" ParentId="561" UserId="464871" Date="05/23/2012 03:59:40" Content="in version 0.9.0,  the format argument has been replaced by labels. &#xA;&#xA;```&#xA;qplot(hour(foo)) + scale_x_datetime(labels = &quot;%S:00&quot;)&#xA;```&#xA;&#xA;works. &#xA;&#xA;So,  at most this is a suggestion to maintain backward compatibility. Feel free to close" />
      <Message Id="5930579" ParentId="561" UserId="4196" Date="05/25/2012 13:42:20" Content="Yeah,  this was a change to make `scale_datetime` more similar to other scales." />
    </Messages>
  </Topic>
  <Topic Id="562" Title="Grid badly displayed with aitoff projection">
    <Messages>
      <Message Id="0" ParentId="562" UserId="1769186" Date="05/23/2012 09:53:49" Content="When trying to plot celestial object on the sky (basically with coordinates equivalent to latitude/longitude) using the `aitoff` projection of the `coord_map` function,  the grid is badly displayed,  i.e. residual horizontal lines are still displayed for latitudes non equal to zero along with their correct projections.&#xA;&#xA;Here is the code to reproduce this bug:&#xA;&#xA;    library(ggplot2)&#xA;    sky2 = data.frame(RA=0,  Dec=0)&#xA;    skyplot2 &lt;- qplot(RA, Dec, data=sky2, xlim=c(0, 360), ylim=c(-89.999, 89.999), &#xA;    xlab=&quot;R.A.(°)&quot;,  ylab=&quot;Decl. (°)&quot;, main=&quot;Source repartition on the sky&quot;)&#xA;    skyplot2 + coord_map(projection=&quot;aitoff&quot;, orientation=c(89.999, 180, 0)) + &#xA;    scale_y_continuous(breaks=(-2:2)*30, limits=c(-89.999, 89.999)) + &#xA;    scale_x_continuous(breaks=(0:8)*45, limits=c(0, 360),  labels=c(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;))&#xA;&#xA;And the resulting image:&#xA;![ skyplot ] (http://img3.imageshack.us/img3/5815/skyplotgrid.png)&#xA;&#xA;A quick hack is available here: http://stackoverflow.com/questions/10706632/grid-badly-displayed-using-ggplot2&#xA;" />
      <Message Id="7468726" ParentId="562" UserId="86978" Date="08/02/2012 21:27:37" Content="It looks like the problem is that in `coord_render_bg.map`,  the `xrange` values are expanded to go outside the range [ 0, 360 ].&#xA;&#xA;Browsing inside that function:&#xA;&#xA;```&#xA;Browse[ 1 ]&gt; xrange&#xA;[ 1 ] -97.2 457.2&#xA;```&#xA;&#xA;After they're projected,  the grid lines actually wrap around,  which is why there are the horizontal lines. I modified the code to draw semi-transparent lines,  and it made the wraparound very apparent.&#xA;&#xA;The solution is to limit `xrange` and `yrange` to values that won't wrap around." />
    </Messages>
  </Topic>
  <Topic Id="563" Title="geom_boxplot documentation typo">
    <Messages>
      <Message Id="0" ParentId="563" UserId="1747945" Date="05/23/2012 21:29:35" Content="There is a small typo in the documentation for geom_boxplot: &quot;the first and third quartiles (the 25th and 7th percentiles).&quot; Should read 25th and 75th." />
      <Message Id="5885506" ParentId="563" UserId="86978" Date="05/23/2012 21:44:38" Content="Thanks,  fixed in 31b5358fb521ef000559fa4319dc6ed9f2c1e6a3." />
    </Messages>
  </Topic>
  <Topic Id="564" Title="Alpha defaults to 0 on Mac OS X">
    <Messages>
      <Message Id="0" ParentId="564" UserId="1775316" Date="05/24/2012 19:06:00" Content="I've run into a peculiar problem.&#xA;&#xA;On Mac OS X,  R 2.15.0 and ggplot2 0.9.1 the alpha scale for all geoms seems to have been set to 0,  so&#xA;&#xA;    qplot(x=1:3,  y=1:3,  geom='point')&#xA;&#xA;creates an empty plot,  whereas&#xA;&#xA;    qplot(x=1:3,  y=1:3,  geom='point',  alpha=I(1))&#xA;&#xA;creates the expected scatterplot.&#xA;&#xA;This issue is not present on my windows installation." />
      <Message Id="5919092" ParentId="564" UserId="4196" Date="05/24/2012 22:15:42" Content="I suspect you need to update the scales package." />
    </Messages>
  </Topic>
  <Topic Id="565" Title="Odd facet_grid error">
    <Messages>
      <Message Id="0" ParentId="565" UserId="1775316" Date="05/25/2012 07:53:13" Content="Consider the following two data frames:&#xA;&#xA;test.1 &lt;- data.frame(title='something',  x=25,  y=110,  gridrow='a',  gridcol='a')&#xA;&#xA;test.2 &lt;- data.frame(title='something',  x=24,  y=110,  gridrow='a',  gridcol='a')&#xA;&#xA;(the only difference is the x column)&#xA;&#xA;    qplot(x=x,  y=y,  label=title,  geom='text',  data=test.1) + facet_grid(gridrow~gridcol)&#xA;&#xA;gives the error&#xA;&#xA;    Error in eval(expr,  envir,  enclos) : object 'expr' not found&#xA;&#xA;while&#xA;&#xA;    qplot(x=x,  y=y,  label=title,  geom='text',  data=test.2) + facet_grid(gridrow~gridcol)&#xA;&#xA;produces the plot. The problem only exists in conjunction with facet_grid() and is not confined to instances with only one-factor facet variables. The problem arises with all values of x between 25 and 25.9&#xA;&#xA;    &gt; sessionInfo()&#xA;    R version 2.15.0 (2012-03-30)&#xA;    Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)&#xA;    &#xA;    locale:&#xA;    [ 1 ] da_DK.UTF-8/da_DK.UTF-8/da_DK.UTF-8/C/da_DK.UTF-8/da_DK.UTF-8&#xA;    &#xA;    attached base packages:&#xA;    [ 1 ] grid      stats     graphics  grDevices utils    &#xA;    [ 6 ] datasets  methods   base     &#xA;    &#xA;    other attached packages:&#xA;    [ 1 ] ggplot2_0.9.1      RColorBrewer_1.0-5&#xA;    [ 3 ] plyr_1.7.1         reshape2_1.2.1    &#xA;    [ 5 ] Rcpp_0.9.10       &#xA;    &#xA;    loaded via a namespace (and not attached):&#xA;     [ 1 ] Biobase_2.16.0     BiocGenerics_0.2.0&#xA;     [ 3 ] Biostrings_2.24.1  caret_5.15-023    &#xA;     [ 5 ] codetools_0.2-8    colorspace_1.1-1  &#xA;     [ 7 ] dichromat_1.2-4    digest_0.5.2      &#xA;     [ 9 ] ggdendro_0.1-05    IRanges_1.14.2    &#xA;    [ 11 ] labeling_0.1       lattice_0.20-6    &#xA;    [ 13 ] MASS_7.3-18        memoise_0.1       &#xA;    [ 15 ] munsell_0.3        mzR_1.2.1         &#xA;    [ 17 ] OutlierD_1.20.0    pcaMethods_1.42.0 &#xA;    [ 19 ] pcaPP_1.9-46       pepmaps_1.5-1     &#xA;    [ 21 ] proto_0.3-9.2      scales_0.2.1      &#xA;    [ 23 ] stats4_2.15.0      stringr_0.6       &#xA;    [ 25 ] tools_2.15.0       xcms_1.32.0 &#xA;&#xA;&#xA;&#xA;edit: Fixed a glaring error in my test code : ) (Thanks Brian)" />
      <Message Id="5935813" ParentId="565" UserId="463252" Date="05/25/2012 17:23:40" Content="That is bizarre. But I can confirm that it is happening  (with the adjustment of the data names in the `qplot` call to match the given data frames).&#xA;&#xA;I tried to figure out what was wrong,  but finally got completely lost in the rabbit hole. Here is what I was able to figure out,  so that someone else can hopefully make it further.&#xA;&#xA;The error is happening in locate_grid,  at the line https://github.com/hadley/ggplot2/blob/master/R/facet-locate.r#L21&#xA;&#xA;```r&#xA;  values &lt;- compact(llply(data,  quoted_df,  vars = c(rows,  cols)))&#xA;```&#xA;&#xA;Playing around with this in the debugger,  it is the call to `compact` that is causing the error. Digging further,  it seems to be `quoted_df` (called inside the `llply` loop) which in turn calls `eval.quoted` which sometimes returns odd structures like&#xA;&#xA;```&#xA;[ [ 1 ] ]&#xA;[ [ 1 ] ][ [ 1 ] ]&#xA;NULL&#xA;&#xA;[ [ 1 ] ][ [ 2 ] ]&#xA;eval(expr,  envir,  enclos)&#xA;&#xA;[ [ 1 ] ][ [ 3 ] ]&#xA;function (e) &#xA;{ &#xA; }&#xA;&lt;environment: 0x000000000845d288&gt;&#xA;&#xA;&#xA;[ [ 2 ] ]&#xA;[ [ 2 ] ][ [ 1 ] ]&#xA;NULL&#xA;&#xA;[ [ 2 ] ][ [ 2 ] ]&#xA;eval(expr,  envir,  enclos)&#xA;&#xA;[ [ 2 ] ][ [ 3 ] ]&#xA;function (e) &#xA;{ &#xA; }&#xA;&lt;environment: 0x00000000065f8130&gt;&#xA;```&#xA;&#xA;At this point,  I was completely lost,  and so just leave this information for someone who understands the code better to figure out." />
      <Message Id="6028778" ParentId="565" UserId="86978" Date="05/31/2012 06:17:18" Content="@BrianDiggs Thanks for delving into this. This is a very weird bug. I can confirm that it happens in Linux and on OS X.&#xA;&#xA;It turns out that if you save the output of `llply()` and then run `compact()` on that,  it works fine!&#xA;&#xA;```&#xA;&gt; library(ggplot2)&#xA;&gt; debug(ggplot2:::locate_grid)&#xA;&gt; test.2 &lt;- data.frame(title='something',  x=24,  y=110,  gridrow='a',  gridcol='a')&#xA;&gt; qplot(x=x,  y=y,  label=title,  geom='text',  data=test.2) + facet_grid(gridrow~gridcol)&#xA;&#xA;debugging in: locate_grid(data,  layout,  facet$rows,  facet$cols,  facet$margins)&#xA;debug at /...../ggplot2/R/facet-locate.r#6: { &#xA;&lt;&lt;... etc ...&gt;&gt;&#xA;&#xA;&lt;&lt;Hit 'n' a few times until you get to this line:&gt;&gt;&#xA;&#xA; debug at /...../ggplot2/R/facet-locate.r#21: values &lt;- compact(llply(data,  quoted_df,  vars = c(rows,  cols)))&#xA;Browse[ 2 ]&gt; data&#xA;      title  x   y gridrow gridcol&#xA;1 something 24 110       a       a&#xA;Browse[ 2 ]&gt; llply(data,  quoted_df,  vars = c(rows,  cols))&#xA;$title&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$x&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$y&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$gridrow&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$gridcol&#xA;data frame with 0 columns and 0 rows&#xA;```&#xA;&#xA;At this point,  things are exactly the same for me with both data frames,  except that in one `data$x==24`,  and in the other `data$x==25`. The `llply()` returns the exact same thing in both cases.&#xA;&#xA;Also,  if you save the output of `llply()` and then run `compact()` on it,  it works fine in both cases:&#xA;&#xA;```&#xA;Browse[ 2 ]&gt; z &lt;- llply(data,  quoted_df,  vars = c(rows,  cols))&#xA;Browse[ 2 ]&gt; compact(z)&#xA;$title&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$x&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$y&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$gridrow&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$gridcol&#xA;data frame with 0 columns and 0 rows&#xA;```&#xA;&#xA;It's only when you run `compact(llply(...))` that things go awry with the data where `x==25`:&#xA;&#xA;```&#xA;### when x == 25&#xA;Browse[ 2 ]&gt; compact(llply(data,  quoted_df,  vars = c(rows,  cols)))&#xA;Error in eval(expr,  envir,  enclos) : object 'expr' not found&#xA;&#xA;&#xA;### when x == 24&#xA;Browse[ 2 ]&gt; compact(llply(data,  quoted_df,  vars = c(rows,  cols)))&#xA;$title&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$x&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$y&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$gridrow&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;$gridcol&#xA;data frame with 0 columns and 0 rows&#xA;```&#xA;&#xA;&#xA;The `compact()` function is very simple and just relies on functions in base R:&#xA;&#xA;```&#xA;&gt; compact&#xA;function (l) &#xA;Filter(Negate(is.null),  l)&#xA;&lt;environment: namespace:plyr&gt;&#xA;```&#xA;&#xA;This may be a bug in the way plyr evaluates things,  but it's also possible that this is a bug in R!" />
      <Message Id="6028928" ParentId="565" UserId="86978" Date="05/31/2012 06:32:37" Content="Hm,  it actually looks like even though this line sets `values`,  the variable is never used again. https://github.com/hadley/ggplot2/blob/master/R/facet-locate.r#L21&#xA;&#xA;```R&#xA;values &lt;- compact(llply(data,  quoted_df,  vars = c(rows,  cols)))&#xA;```&#xA;&#xA;It doesn't seem to make sense to run llply on it like that anyway.&#xA;&#xA;My guess is that this a piece of leftover test code. When the line was added in a4c85114c33105dd9ca66aec9d5edf679ccfc91a,  it was indented slightly differently from the surrounding code,  and even then `values` was set but never used again." />
      <Message Id="6040657" ParentId="565" UserId="463252" Date="05/31/2012 16:30:00" Content="Yeah,  I couldn't understand what that code was supposed to be doing.  Typically when I see `llply(data, ...` in ggplot code,  `data` is a list of `data.frame`s (one per layer). But here it is a single `data.frame`,  so the loop becomes over the columns of `data`. &#xA;&#xA;I also noticed that splitting up the `compact()` and `llply()` call didn't cause the error. And that seemed weird too.&#xA;&#xA;I also get that feeling that there is some bug lurking somewhere deeper (`plyr`?,  base R?,  or maybe `quoted_df`) It would take awhile to make a minimal reproducible example that doesn't rely on all the ggplot framework. And I have no idea what type of errors happen when a numeric value is between 24 and 26,  but not above or below that!&#xA;&#xA;You are also right that `values` is never used again. But it has been there since the very first import of that file. https://github.com/hadley/ggplot2/blob/a4c85114c33105dd9ca66aec9d5edf679ccfc91a/R/facet-locate.r#L14 And it was never used again there either. (As you noted.) None of those functions should have side effects,  so my recommendation would be to delete that line and see what happens.  &#xA;&#xA;Not the most comforting bug fix,  I admit." />
      <Message Id="6042028" ParentId="565" UserId="86978" Date="05/31/2012 17:23:17" Content="&#xA;I'm pretty sure the error has something to do with the call stack depth. I tried stripping down the problem to the bare minimum. If you run these from the top-level prompt,  they crash at different values of `i`:&#xA;&#xA;```R&#xA;library(plyr)&#xA;library(ggplot2)&#xA;&#xA;# Crashes at i==12&#xA;for (i in 1:100) { &#xA;  print(i)&#xA;  llply(data.frame(myvar=i),  ggplot2:::quoted_df,  vars = as.quoted(&quot;foo&quot;))&#xA; }&#xA;&#xA;# Wrapped with identity()&#xA;# Crashes at i==13&#xA;for (i in 1:100) { &#xA;  print(i)&#xA;  identity(&#xA;    llply(data.frame(myvar=i),  ggplot2:::quoted_df,  vars = as.quoted(&quot;foo&quot;)))&#xA; }&#xA;&#xA;# Wrapped with 2x identity()&#xA;# Crashes at i==14&#xA;for (i in 1:100) { &#xA;  print(i)&#xA;  identity(identity(&#xA;    llply(data.frame(myvar=i),  ggplot2:::quoted_df,  vars = as.quoted(&quot;foo&quot;))))&#xA; }&#xA;&#xA;```&#xA;&#xA;If you run them from within `locate_grid()`,  the numbers are 21,  22,  and 23.&#xA;&#xA;If you removing the `llply()`,  the code works without trouble.&#xA;" />
      <Message Id="6043207" ParentId="565" UserId="86978" Date="05/31/2012 18:10:09" Content="OK,  I think I've gotten to the bottom of it. The problem has to do with the way `eval` handles integer values.&#xA;&#xA;First,  take a look at the `quoted_df` function:&#xA;&#xA;```&#xA;&gt; ggplot2:::quoted_df&#xA;function(data,  vars) { &#xA;  values &lt;- eval.quoted(vars,  data,  emptyenv(),  try = TRUE)&#xA;  as.data.frame(compact(values))&#xA; }&#xA;```&#xA;&#xA;We'll use a simpler version of this function and to some tests with 11,  12,  and 11:12. The value 12 does something weird.&#xA;&#xA;```R&#xA;# A simpler version of quoted_df&#xA;test &lt;- function(data,  vars) { &#xA;  eval.quoted(vars,  data,  emptyenv(),  try = TRUE)&#xA; }&#xA;&#xA;llply(data.frame(myvar=11),  test,  vars = as.quoted(&quot;foo&quot;))&#xA;# myvar&#xA;# $myvar$foo&#xA;# NULL&#xA;&#xA;llply(data.frame(myvar=12),  test,  vars = as.quoted(&quot;foo&quot;))&#xA;# $myvar&#xA;# $myvar$foo&#xA;# $myvar$foo[ [ 1 ] ]&#xA;# NULL&#xA;# &#xA;# $myvar$foo[ [ 2 ] ]&#xA;# eval(expr,  envir,  enclos)&#xA;# &#xA;# $myvar$foo[ [ 3 ] ]&#xA;# function (e) &#xA;# { &#xA;#  }&#xA;# &lt;environment: 0x1060def58&gt;&#xA;&#xA;&#xA;llply(data.frame(myvar=11:12),  test,  vars = as.quoted(&quot;foo&quot;))&#xA;# myvar&#xA;# $myvar$foo&#xA;# NULL&#xA;```&#xA;&#xA;&#xA;The issue has something to do with `eval.quoted`,  which looks like this:&#xA;&#xA;```&#xA;&gt; eval.quoted&#xA;function (exprs,  envir = NULL,  enclos = NULL,  try = FALSE) &#xA;{ &#xA;    if (is.numeric(exprs)) &#xA;        return(envir[ exprs ])&#xA;    qenv &lt;- if (is.quoted(exprs)) &#xA;        attr(exprs,  &quot;env&quot;)&#xA;    else parent.frame()&#xA;    if (is.null(envir)) &#xA;        envir &lt;- qenv&#xA;    if (is.data.frame(envir) &amp;&amp; is.null(enclos)) &#xA;        enclos &lt;- qenv&#xA;    if (try) { &#xA;        results &lt;- lapply(exprs,  failwith(NULL,  eval,  quiet = TRUE),  &#xA;            envir = envir,  enclos = enclos)&#xA;     }&#xA;    else { &#xA;        results &lt;- lapply(exprs,  eval,  envir = envir,  enclos = enclos)&#xA;     }&#xA;    names(results) &lt;- names(exprs)&#xA;    results&#xA; }&#xA;&lt;environment: namespace:plyr&gt;&#xA;```&#xA;&#xA;It uses `lapply` to call `eval`. In the call to `eval`,  the value of `envir` is the `data` that's passed in.&#xA;&#xA;It turns out that if you call `eval` when `envir` is set to a number,  it treats it differently than if it's something else -- it specifies the frame number to evaluate the expression.&#xA;&#xA;So I would say the bug is in `quoted_df`. It should check for the special case where `data` is a single integer,  and wrap it up somehow so that `eval` uses it as the environment to evaluate in,  not as the frame number of the environment to evaluate in.&#xA;" />
      <Message Id="6054044" ParentId="565" UserId="463252" Date="06/01/2012 06:12:41" Content="Nice sleuthing. I think you are right that `quoted_df` should make sure that it is actually evaluating in a `data.frame`. That was probably the assumption for the function. Which also supports that the `values` line is not supposed to be in the code anyway." />
      <Message Id="6082548" ParentId="565" UserId="4196" Date="06/03/2012 03:08:55" Content="Thanks for the sleuthing - I agree that that line can be eliminated.  `eval.quoted` should probably do a better job of checking its inputs,  but that's another story." />
      <Message Id="6088669" ParentId="565" UserId="86978" Date="06/03/2012 20:23:24" Content="Fixed in c97be666dcbb5696d226a5b2add1aa93e23f2a1c. I've also filed an issue for plyr for `eval.quoted`: hadley/plyr#85." />
    </Messages>
  </Topic>
  <Topic Id="566" Title="widths/heights in facet_grid">
    <Messages>
      <Message Id="0" ParentId="566" UserId="227097" Date="05/25/2012 16:10:21" Content="see this commit: b19ff3fd75dd009744670a6527fd4e4a98938f40&#xA;&#xA;&#xA;" />
      <Message Id="35940830" ParentId="566" UserId="4196" Date="02/24/2014 21:25:17" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="567" Title="Finer control for grid and axis for coord_polar">
    <Messages>
      <Message Id="0" ParentId="567" UserId="227097" Date="05/29/2012 01:50:39" Content="http://stackoverflow.com/questions/10788436/ggplot2-polar-plot-axis-label-location&#xA;&#xA;Now the radius of circle is fixed to 0.45.&#xA;Perhaps coord_axis should have the parameter for setting radius and location of axis text for angle.&#xA;" />
      <Message Id="35940834" ParentId="567" UserId="4196" Date="02/24/2014 21:25:21" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="568" Title="Coord_map() and annotation_map does not work.">
    <Messages>
      <Message Id="0" ParentId="568" UserId="1796295" Date="05/31/2012 00:20:19" Content="This looks to be the same bug as Issue#480. Copying Hadley's code in 480:&#xA;&#xA;    library(ggplot2)&#xA;    library(reshape2) # for melt&#xA;    crimes &lt;- data.frame(state = tolower(rownames(USArrests)),  USArrests)&#xA;    crimesm &lt;- melt(crimes,  id = 1)&#xA;    states_map &lt;- map_data(&quot;state&quot;)&#xA;&#xA;    ggplot(crimes,  aes(map_id = state)) + geom_map(aes(fill = Murder),  map = states_map) + expand_limits(x == states_map$long,  y = states_map$lat) + annotation_map(states_map) + coord_map()&#xA;&#xA;Gets the error &quot;Error in validDetails.polygon(x) :   'x' and 'y' and 'id' must all be same length&quot;." />
      <Message Id="6028300" ParentId="568" UserId="86978" Date="05/31/2012 05:28:34" Content="this should be fixed in 0.9.1. Are you using that version?" />
      <Message Id="6029259" ParentId="568" UserId="1796295" Date="05/31/2012 07:03:31" Content="I downloaded and installed the new package today so I presume it is the latest and greatest. When I tried Hadley's original code with just geom_map() and coord_map() it worked. But when I added annotation_map() (see code) it failed with the original error for Issue#480." />
      <Message Id="6039765" ParentId="568" UserId="86978" Date="05/31/2012 15:56:03" Content="Got it. I've submitted a pull request for a fix." />
    </Messages>
  </Topic>
  <Topic Id="569" Title="Binning dates using qplot results in big problems">
    <Messages>
      <Message Id="0" ParentId="569" UserId="216319" Date="05/31/2012 03:20:02" Content="Having this issue in both 0.90 and 0.91. When binning dates,  qplot displays weird stuff sometimes. In the example below,  the qplot will display a tiny overlapping bar at the far right of the plot. One we add some alpha,  it becomes clear that there is more weird stuff&#xA;&#xA;    Set.seed(123)&#xA;    date &lt;- as.Date(Sys.time()) - round(runif(1000,  0,  60));&#xA;    value &lt;- factor(round(runif(10000,  1,  5)),  levels=1:5,  labels=c(&quot;Foo&quot;,  &quot;Bar&quot;,  &quot;Zoo&quot;,  &quot;Baz&quot;,  &quot;Dee&quot;))&#xA;    mydata &lt;- data.frame(date,  value)&#xA;&#xA;    ggplot(aes(x=date,  fill=value),  data=mydata) + geom_bar(binwidth = 7)&#xA;    qplot(date,  fill=value,  data=mydata) + geom_bar(binwidth = 7)&#xA;    qplot(date,  fill=value,  data=mydata) + geom_bar(binwidth = 7,  alpha=0.5)" />
      <Message Id="6027480" ParentId="569" UserId="86978" Date="05/31/2012 03:58:54" Content="This is happening because qplot is making one set of bars for the histogram (it automatically adds a geom_bar),  and then geom_bar is adding another set of bars on top. You probably want something like this:&#xA;&#xA;```R&#xA;# With ggplot:&#xA;ggplot(mydata,  aes(x=date,  fill=value)) + geom_bar(binwidth = 7,  alpha=0.5)&#xA;&#xA;# With qplot:&#xA;qplot(date,  fill=value,  data=mydata,  binwidth=7)&#xA;```&#xA;&#xA;" />
      <Message Id="6027492" ParentId="569" UserId="216319" Date="05/31/2012 04:00:07" Content="Ah you are right. Sorry." />
    </Messages>
  </Topic>
  <Topic Id="570" Title="Update documentation on webpage for scale_continuous">
    <Messages>
      <Message Id="0" ParentId="570" UserId="277168" Date="05/31/2012 14:02:10" Content="Today I wanted to format my labels as percentages. Since I do such things not on every day,  I checked http://had.co.nz/ggplot2/scale_continuous.html how to do it. There one can read: ```p + scale_y_continuous(formatter = &quot;percent&quot;)```. But when entering this code into **R**,  I get an error with the current version 0.9.1 of ggplot2.&#xA;&#xA;After some digging,  I found the correct usage in the source code of ggplot at https://github.com/hadley/ggplot2/blob/master/R/scale-continuous.r#L55 which is: ```p + scale_y_continuous(labels = percent)```.&#xA;&#xA;Since I expect that I am not the only one who looks things up at the mentioned webpage,  I would like to kindly ask for an update of the respective part.&#xA;&#xA;Philipp" />
      <Message Id="6039803" ParentId="570" UserId="86978" Date="05/31/2012 15:57:21" Content="The change to a new auto-generated web documentation system is currently in progress; hopefully the new pages will be up soon." />
      <Message Id="6056276" ParentId="570" UserId="277168" Date="06/01/2012 08:57:53" Content="Thanks for your fast answer. I definitely look forward to it!&#xA;&#xA;I support the idea of an automatic process since it not only helps to save time and reduces redundant work but also allows to fix things like my issue fast and... automatically ;-)" />
    </Messages>
  </Topic>
  <Topic Id="571" Title="annotation_map: get group id from munched data (Fixes #568)">
    <Messages>
      <Message Id="0" ParentId="571" UserId="86978" Date="05/31/2012 15:54:06" Content="Because `id` was being calculated from the un-munched data,  it sometimes ended up being a different length from `coords$x` and `$y`.&#xA;&#xA;I also removed the `match()` used to calculate `id`. The same information seems to be there already,  in `coords$group`,  but this should be double-checked." />
      <Message Id="6117533" ParentId="571" UserId="86978" Date="06/05/2012 04:48:27" Content="This branch was rebased onto master: aa29fc288c175042050b93a998c8a637c567a3d1." />
    </Messages>
  </Topic>
  <Topic Id="572" Title="Buggy default jittering values">
    <Messages>
      <Message Id="0" ParentId="572" UserId="100251" Date="06/03/2012 08:06:07" Content="The way the default amount of jittering is calculated in ggplot2 (0.9.1) seems buggy,  or at least sub-optimal. Here’s a simple example:&#xA;&#xA;````r&#xA;library(ggplot2)&#xA;&#xA;n = 100&#xA;vals = seq(1,  500,  50)&#xA;x = sample(vals,  n,  replace=TRUE)&#xA;y = sample(vals,  n,  replace=TRUE)&#xA;&#xA;qplot(x,  y,  geom=&quot;jitter&quot;)&#xA;````&#xA;&#xA;Even though the actual resolution in the data is 50,  the points drawn are almost overlapping. Compare this to the same code but with `vals = seq(0,  500,  50)`.&#xA;&#xA;The reason is the calculations in position-jitter.r:&#xA;&#xA;````r&#xA;if (is.null(.$width)) .$width &lt;- resolution(data$x) * 0.4&#xA;if (is.null(.$height)) .$height &lt;- resolution(data$y) * 0.4&#xA;&#xA;````&#xA;&#xA;If you add `zero=FALSE` to the two `resolution()` functions,  it will work as expected." />
      <Message Id="6117426" ParentId="572" UserId="86978" Date="06/05/2012 04:34:33" Content="Would you like to submit a pull request for this? Some instructions on getting started here:&#xA;https://github.com/hadley/ggplot2/wiki/Developing-ggplot2-using-github&#xA;&#xA;If not,  no problem." />
      <Message Id="6188086" ParentId="572" UserId="100251" Date="06/07/2012 21:11:25" Content="OK. I’ll try to submit a pull request. (Might be a few days before I get time to do it.)" />
    </Messages>
  </Topic>
  <Topic Id="573" Title="New theme system">
    <Messages>
      <Message Id="0" ParentId="573" UserId="86978" Date="06/04/2012 21:03:50" Content="" />
      <Message Id="6500522" ParentId="573" UserId="86978" Date="06/22/2012 04:45:44" Content="I added more commits,  and I think this branch is ready to be merged now." />
      <Message Id="6546956" ParentId="573" UserId="4196" Date="06/25/2012 13:16:21" Content="Let's go over this on Tuesday,  and then you can merge it." />
    </Messages>
  </Topic>
  <Topic Id="574" Title="built-in support for barchart of relative frequencies ">
    <Messages>
      <Message Id="0" ParentId="574" UserId="933680" Date="06/04/2012 22:49:37" Content="ggplot is designed to make some things easy,  but it's rather difficult to create a bar chart comparing the relatively frequencies of multiple groups with very different counts.  Each facet should add up to 100%,  and similar results should be achieved with position=dodge (instead of the facet).&#xA;&#xA;Current best solution is here:&#xA;http://stackoverflow.com/questions/10888117/ggplot-relative-frequencies-of-two-groups&#xA;&#xA;Thanks" />
      <Message Id="35940843" ParentId="574" UserId="4196" Date="02/24/2014 21:25:27" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="575" Title="Theme wishlist">
    <Messages>
      <Message Id="0" ParentId="575" UserId="86978" Date="06/05/2012 02:45:31" Content="These are things that will break existing code,  so they should be delayed until 0.10 or 1.0:&#xA;&#xA;&#xA;&#xA;* Increase axis title margin,  so that x and y axis titles aren't so close to tick labels&#xA;* Remove element_blank (?)&#xA;* Merge some element properties:&#xA;  * `xx.margin` into `xx.background`&#xA;  * `legend.key.height`/`width` into `legend.key`&#xA;  * `xx.align` into xx (NA or &quot;auto&quot; for text/number auto alignment)&#xA;  * `axis.ticks.length` into `axis.ticks`&#xA;* Convert `theme_grey()` from a function to a simple list&#xA;* Allow theming for geoms,  such as `geom_bar = element_geom(...)`&#xA;" />
      <Message Id="35940848" ParentId="575" UserId="4196" Date="02/24/2014 21:25:31" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="576" Title="empty plots with 0.9.1 and R 2.14.2">
    <Messages>
      <Message Id="0" ParentId="576" UserId="888980" Date="06/08/2012 14:26:11" Content="The examples in help(geom_point) and help(geom_line) produce empty plots - the axes and background are all set correctly,  there's just no points or lines. From a fresh R run with --vanilla.&#xA;&#xA;example(geom_line) shows empty plots (with the correct axes,  legend) up until the last one with geom_path,  which shows its lines in all its glory.&#xA;&#xA;Seems to be a problem with the alpha:&#xA;```&#xA;# visible,  looks right: &#xA;qplot(mpg,  wt,  data = mtcars,  size = I(5),  alpha = I(0.2))&#xA;# blank&#xA;qplot(mpg,  wt,  data = mtcars,  size = I(5))&#xA;```&#xA;&#xA;&#xA;Session Info:&#xA;&#xA;```&#xA;R version 2.14.2 (2012-02-29)&#xA;Platform: i486-pc-linux-gnu (32-bit)&#xA;```&#xA;other attached packages:&#xA;```&#xA;[ 1 ] ggplot2_0.9.1&#xA;&#xA;loaded via a namespace (and not attached):&#xA; [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.1       grid_2.14.2       &#xA; [ 5 ] MASS_7.3-16        memoise_0.1        munsell_0.3        plyr_1.7          &#xA; [ 9 ] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.0      &#xA;[ 13 ] stringr_0.6        tools_2.14.2      &#xA;```&#xA;Works fine in 2.15. Either needs fixing or kick the required version of R up a notch! I'm upgrading R now...&#xA;&#xA;" />
      <Message Id="6204740" ParentId="576" UserId="86978" Date="06/08/2012 14:55:49" Content="I think you also need the latest version of scales,  0.2.1 -- in fact,  installing ggplot2 0.9.1 lists scales 0.2.1 as a dependency,  so installing ggplot2 should automatically install that version of scales." />
      <Message Id="6206892" ParentId="576" UserId="888980" Date="06/08/2012 16:19:47" Content="I think I must have grabbed the latest ggplot using devtools from github and it didn't get scales to match.&#xA;&#xA;Seems to fix the problem. So user error I guess. " />
    </Messages>
  </Topic>
  <Topic Id="577" Title="geom_segment does not respect factor levels">
    <Messages>
      <Message Id="0" ParentId="577" UserId="932850" Date="06/09/2012 16:16:18" Content="Hi,  today I discovered a bug that was quite hard to pinpoint. Essentially,  I am using geom_point in combination with geom_segment,  with a factor on the y axis. The 2 geoms have separate data.frames,  but the factor has the same levels in each of these 2 data.frames. I expect that the y axis will be ordered from bottom to top using the levels of the factor from beginning to end. However,  this is only the case when I do ggplot()+geom_segment()+geom_point(),  and the factor levels are strangely not respected when I use ggplot()+geom_point()+geom_segment(). The current workaround I am using is to always use the first form,  but it would be nice to have these 2 forms be consistent. Here is some code that replicates the problem:&#xA;&#xA;```r&#xA;## ggplot2 weird bug.&#xA;library(grid)&#xA;library(ggplot2)&#xA;plotboth &lt;- function(low, up){ &#xA;  lowup &lt;- function(x)factor(x, c(low, up))&#xA;  dfs &lt;- list(segment=data.frame(min=1:2, max=2:3, y=lowup(c(up, low))), &#xA;              point=data.frame(x=1.5, y=lowup(low)))&#xA;  str(dfs)&#xA;&#xA;  grid.newpage()&#xA;  the.layout &lt;- grid.layout(ncol=2)&#xA;  pushViewport(viewport(layout=the.layout))&#xA;&#xA;  seg.layer &lt;- geom_segment(aes(x=min, xend=max, y=y, yend=y), data=dfs$segment)&#xA;  pt.layer &lt;- geom_point(aes(x, y), data=dfs$point)&#xA;  ## I would expect these 2 plots to be the same:&#xA;  plot.list &lt;- list(ok=ggplot()+seg.layer+pt.layer, &#xA;                    weird=ggplot()+pt.layer+seg.layer)&#xA;  for(i in seq_along(plot.list)){ &#xA;    plot.obj &lt;- plot.list[ [ i ] ]+opts(title=names(plot.list)[ i ])&#xA;    pushViewport(viewport(layout.pos.col=i))&#xA;    print(plot.obj, newpage=FALSE)&#xA;    popViewport()&#xA;   }&#xA; }&#xA;## I expect all of these to be the same!&#xA;plotboth(&quot;a&quot;, &quot;b&quot;) ## the same&#xA;plotboth(&quot;b&quot;, &quot;a&quot;) ## different&#xA;plotboth(1, 2) ## the same&#xA;plotboth(2, 1) ## different&#xA;&#xA;&#xA;```" />
      <Message Id="6224248" ParentId="577" UserId="86978" Date="06/09/2012 23:02:50" Content="I'm not sure if this is buggy behavior,  exactly,  or just not well-defined. The problem isn't with `geom_segment`,  but with adding geoms with data that introduce new factor levels. By default,  unused levels are dropped when you add a geom with its own data. But if you add another geom which uses more factor levels,  all the combined factor levels are put into a new factor,  with the levels ordered alphabetically.&#xA;&#xA;&#xA;Here's a simplified version of the code which distills the problem:&#xA;&#xA;```R&#xA;df1 &lt;- data.frame(x=1.5,  y=factor(&quot;b&quot;,         levels=c(&quot;b&quot;, &quot;a&quot;)))&#xA;df2 &lt;- data.frame(x=1:2,  y=factor(c(&quot;a&quot;, &quot;b&quot;),  levels=c(&quot;b&quot;, &quot;a&quot;)))&#xA;&#xA;p1 &lt;- geom_point(aes(x, y),  data=df1,  colour=&quot;red&quot;)&#xA;p2 &lt;- geom_point(aes(x, y),  data=df2)&#xA;&#xA;# Order (from origin) is &quot;a&quot;,  &quot;b&quot;&#xA;# This is different than the order of the factor levels&#xA;ggplot() + p1 + p2&#xA;&#xA;# Order (from origin) is &quot;b&quot;,  &quot;a&quot;&#xA;# This is the correct order,  based on order of factor levels&#xA;ggplot() + p2 + p1&#xA;```&#xA;&#xA;&#xA;The way to make it work as expected is to use `scale_y_discrete(drop=FALSE)`:&#xA;&#xA;```R&#xA;# b only&#xA;ggplot() + p1&#xA;# Only print point from df1,  but have both y levels &quot;b&quot;,  &quot;a&quot;&#xA;ggplot() + p1 + scale_y_discrete(drop=FALSE)&#xA;&#xA;&#xA;# Both of these have order &quot;b&quot;,  &quot;a&quot;&#xA;ggplot() + p1 + p2 + scale_y_discrete(drop=FALSE)&#xA;ggplot() + p2 + p1 + scale_y_discrete(drop=FALSE)&#xA;```&#xA;" />
      <Message Id="6246907" ParentId="577" UserId="4196" Date="06/11/2012 15:09:49" Content="Winston's explanation is right - this the behaviour is a bit confusing,  but I don't see any other way to deal with the problem of having different datasets on different layers.  You can either make sure the layers have the same factor setup,  or override it with scale limits." />
      <Message Id="6247258" ParentId="577" UserId="932850" Date="06/11/2012 15:22:32" Content="To be clear,  the factors in each layer DO each have the same levels, &#xA;but some of the levels do not appear in some of the layers. In my&#xA;mind,  I specified the order of the categorical variable using the&#xA;levels of the factors,  so it seems weird that the order in which I&#xA;specify the layers affects the order in which the factors are drawn.&#xA;&#xA;Anyway,  thanks for the pointer to scale_discrete(drop=FALSE),  which&#xA;indeed solves the problem." />
      <Message Id="6250598" ParentId="577" UserId="4196" Date="06/11/2012 17:25:57" Content="Oh,  hmmmm.  Now I see.  Maybe that is a bug" />
      <Message Id="6912605" ParentId="577" UserId="86978" Date="07/11/2012 16:55:49" Content="Maybe the way to fix this is to drop unused levels after they get combined together. Right now,  I think they're getting dropped early in the process,  before they are combined." />
      <Message Id="8314517" ParentId="577" UserId="86978" Date="09/05/2012 21:26:45" Content="It looks like the fix for this would require extensive changes to the scale training system,  or some ugly hacks. Since there's a workaround (use `drop=FALSE` or specify `breaks`),  I think the cost isn't worth the benefit in this case." />
      <Message Id="8354087" ParentId="577" UserId="86978" Date="09/07/2012 02:21:43" Content="If this bug is addressed in the future,  here is a set of test cases:&#xA;&#xA;&#xA;```R&#xA;df1 &lt;- data.frame(x1=1.5,  y1=factor(&quot;b&quot;,         levels=c(&quot;b&quot;, &quot;a&quot;)))&#xA;df2 &lt;- data.frame(x2=1:2,  y2=factor(c(&quot;a&quot;, &quot;b&quot;),  levels=c(&quot;b&quot;, &quot;a&quot;)))&#xA;&#xA;p1 &lt;- geom_jitter(aes(x1, y1),  data=df1,  colour=&quot;red&quot;)&#xA;p2 &lt;- geom_point(aes(x2, y2),  data=df2)&#xA;&#xA;# Order (from origin) is &quot;a&quot;,  &quot;b&quot;&#xA;# This is different than the order of the factor levels&#xA;ggplot() + p1 + p2&#xA;&#xA;# Order (from origin) is &quot;b&quot;,  &quot;a&quot;&#xA;# This is the correct order,  based on order of factor levels&#xA;ggplot() + p2 + p1&#xA;The way to make it work as expected is to use scale_y_discrete(drop=FALSE):&#xA;&#xA;# b only&#xA;ggplot() + p1&#xA;# Only print point from df1,  but have both y levels &quot;b&quot;,  &quot;a&quot;&#xA;ggplot() + p1 + scale_y_discrete(drop=FALSE)&#xA;&#xA;&#xA;# Both of these have order &quot;b&quot;,  &quot;a&quot;&#xA;ggplot() + p1 + p2 + scale_y_discrete(drop=FALSE)&#xA;ggplot() + p2 + p1 + scale_y_discrete(drop=FALSE)&#xA;&#xA;# Mixing discrete and continuous&#xA;ggplot() + p1 + p2 + geom_point(aes(x3, y3),  data=data.frame(x3=1.2,  y3=1.8),  colour=&quot;blue&quot;)&#xA;# With extra column&#xA;ggplot() + p1 + p2 + geom_point(aes(x3, y3, colour=g),  data=data.frame(x3=1.2,  y3=1.8,  g=&quot;foo&quot;))&#xA;&#xA;# Layer with data with new factor levels&#xA;ggplot() + p1 + p2 + geom_point(aes(x3, y3),  data=data.frame(x3=1.3,  y3=&quot;c&quot;),  colour=&quot;blue&quot;)&#xA;# With extra column&#xA;ggplot() + p1 + p2 + geom_point(aes(x3, y3, colour=g),  data=data.frame(x3=1.3,  y3=&quot;c&quot;,  g=&quot;foo&quot;))&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="578" Title="Allow several simultaneous colour scales">
    <Messages>
      <Message Id="0" ParentId="578" UserId="18445" Date="06/13/2012 10:47:22" Content="While we think about reorganizing `scale_colour/fill` functions in pull request #439,  here is an additional suggestion:&#xA;&#xA;I think it would be worthwhile to have a `variable` argument to the scale functions,  which would determine to which variable the scale applies and would therefore enable having several colour (or shape,  or ...) scales on the same plot for various variables. Of course this can be a problem perceptually (if the colour scales are too similar) but it can also be efficient and even required to represent complex data sets.&#xA;&#xA;Consider graphs like this: http://ars.els-cdn.com/content/image/1-s2.0-S1053811912001255-gr2.jpg where there are various colour scales for various data sources (regions of the brain in that case).&#xA;Or maps like this: http://comlmaps.org/mcintyre/ch11/image_n/nfg003.jpg/image_preview (sorry,  quite small) with a blue scale for depth and another scale (green to red) for species abundance.&#xA;&#xA;Here is a practical example&#xA;&#xA;    library(reshape2) # for melt&#xA;&#xA;    # volcano map,  which really is the background of the plot&#xA;    vd &lt;- melt(volcano)&#xA;    names(vd) &lt;- c(&quot;x&quot;,  &quot;y&quot;,  &quot;z&quot;)&#xA;&#xA;    # point measurements of something (abund) at a few locations&#xA;    d &lt;- data.frame(x=runif(30,  1,  80),  y=runif(30,  1,  60),  abund=rnorm(30))&#xA;&#xA;    # plot the points on top of the map&#xA;    ggplot(mapping=aes(x=x,  y=y)) + geom_tile(aes(fill=z),  data=vd) + geom_point(aes(colour=abund),  data=d,  size=3) + scale_colour_gradient(high=&quot;red&quot;,  low=&quot;green&quot;)&#xA;    # this works because I map *fill* in one geom and *colour* in the other&#xA;    &#xA;    # but this collapses the scales of the background and the points because both use fill&#xA;    ggplot(mapping=aes(x=x,  y=y)) + geom_tile(aes(fill=z),  data=vd) + geom_point(aes(fill=abund),  data=d,  size=3,  shape=21) + scale_fill_gradient(high=&quot;red&quot;,  low=&quot;green&quot;)&#xA;&#xA;    # I would like to do&#xA;    ggplot(mapping=aes(x=x,  y=y)) + geom_tile(aes(fill=z),  data=vd) + geom_point(aes(fill=abund),  data=d,  size=3,  shape=21) + scale_fill_gradient(variable=abund,  high=&quot;red&quot;,  low=&quot;green&quot;)&#xA;    # and get a result similar to the first plot above" />
      <Message Id="15241258" ParentId="578" UserId="3931960" Date="03/21/2013 14:23:53" Content="A quick +1 for this feature.  Being able to assign colour scales to variables separately would be enormously useful.&#xD;&#xA;&#xD;&#xA;For example,  being able to build up a composite plot or image by plotting semi-transparent layers with different colour scales." />
      <Message Id="18807981" ParentId="578" UserId="125001" Date="06/02/2013 15:30:12" Content="+1&#xD;&#xA;&#xD;&#xA;This would be useful,  for example,  to overlay a segmented line fit on top of a scatter plot,  each with their own color scales." />
      <Message Id="35940859" ParentId="578" UserId="4196" Date="02/24/2014 21:25:38" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35940859" ParentId="578" UserId="4196" Date="02/24/2014 21:25:38" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35940879" ParentId="578" UserId="4196" Date="02/24/2014 21:25:48" Content="(btw ggvis supports this)" />
    </Messages>
  </Topic>
  <Topic Id="579" Title="Using scale_fill_continuous(breaks=NULL) results in error">
    <Messages>
      <Message Id="0" ParentId="579" UserId="86978" Date="06/14/2012 02:53:20" Content="Some of the visual tests in visual_test/scale-breaks.r now throw errors. This was introduced by e6594a11b5cec0941a0c8c15b5c31ff41ba22be2,  where the colorbar guide started being used as the default.&#xA;&#xA;Here are the two bad tests:&#xA;&#xA;```R&#xA;dat &lt;- data.frame(x=1:3,  y=1:3)&#xA;&#xA;ggplot(dat,  aes(x=1,  y=y,  fill=x)) + geom_point(shape=21) + scale_fill_continuous(breaks=NULL)&#xA;&#xA;ggplot(dat,  aes(x=1,  y=y,  colour=x)) + geom_point() + scale_colour_continuous(breaks=NULL)&#xA;```&#xA;&#xA;We should also have some unit tests for this..." />
      <Message Id="6319360" ParentId="579" UserId="227097" Date="06/14/2012 03:01:42" Content="0.9.1 also results in error.&#xA;And legend guide also induce a warning.&#xA;What is the expected behavior if `breaks = NULL` for non-positional scales?&#xA;&#xA;" />
      <Message Id="6319463" ParentId="579" UserId="86978" Date="06/14/2012 03:12:11" Content="The error in master (1df1e826901a4631f36761536daabfc3068c4ddc) is this:&#xA;&#xA;```R&#xA;dat &lt;- data.frame(x=1:3,  y=1:3)&#xA;ggplot(dat,  aes(x=1,  y=y,  fill=x)) + geom_point(shape=21) + scale_fill_continuous(breaks=NULL)&#xA;# Error in names(guide$key) &lt;- c(output,  &quot;.label&quot;,  &quot;.value&quot;) : &#xA;#   'names' attribute [ 3 ] must be the same length as the vector [ 2 ]&#xA;&#xA;ggplot(dat,  aes(x=1,  y=y,  colour=x)) + geom_point() + scale_colour_continuous(breaks=NULL)&#xA;# Error in names(guide$key) &lt;- c(output,  &quot;.label&quot;,  &quot;.value&quot;) : &#xA;#  'names' attribute [ 3 ] must be the same length as the vector [ 2 ]&#xA;```&#xA;&#xA;Also,  this gives a warning:&#xA;&#xA;```R&#xA;ggplot(dat,  aes(x=1,  y=y,  size=x)) + geom_point() + scale_size_continuous(breaks=NULL)&#xA;# Warning message:&#xA;# In is.na(breaks) : is.na() applied to non-(list or vector) of type 'NULL'&#xA;```" />
      <Message Id="6319657" ParentId="579" UserId="227097" Date="06/14/2012 03:33:41" Content="I mean that these errors and warnings also happen in the released version 0.9.1.&#xA;&#xA;I'm sure why this error happens.&#xA;But I'm not sure how it should be. The `breaks = NULL` for non-positional scales would be meaningless.&#xA;&#xA;Should it be simply ignored,  with some warning message?&#xA;" />
      <Message Id="6319748" ParentId="579" UserId="86978" Date="06/14/2012 03:44:22" Content="In 0.9.1,  I get warnings only,  but no errors.&#xA;&#xA;```R&#xA;ggplot(dat,  aes(x=1,  y=y,  colour=x)) + geom_point() + scale_colour_continuous(breaks=NULL)&#xA;# Warning message:&#xA;# In is.na(breaks) : is.na() applied to non-(list or vector) of type 'NULL'&#xA;```&#xA;&#xA;Maybe it should not show the legend when `breaks=NULL`? I think that is the existing behavior in 0.9.1." />
      <Message Id="6319780" ParentId="579" UserId="227097" Date="06/14/2012 03:48:26" Content="@wch &#xA;&#xA;yes,  but in 0.9.1, &#xA;&#xA;```&#xA;&gt; ggplot(dat,  aes(x=1,  y=y,  colour=x)) + geom_point() + scale_colour_continuous(breaks=NULL,  guide = &quot;colorbar&quot;)&#xA;Error in names(guide$key) &lt;- c(output,  &quot;.label&quot;,  &quot;.value&quot;) : &#xA;  'names' attribute [ 3 ] must be the same length as the vector [ 2 ]&#xA;```&#xA;&#xA;So the bug(?) is not due to changing the colorbar as default.&#xA;&#xA;&gt; Maybe it should not show the legend when breaks=NULL? &#xA;&#xA;I agree. Do you think there is a situation where someone want to show colorbar without tick/lables?&#xA;" />
      <Message Id="6319830" ParentId="579" UserId="227097" Date="06/14/2012 03:52:47" Content="So possible solution for `break = NULL` for the non-positional scale is either,  &#xA;&#xA;1. Surpress showing guide,  with some warning messages.&#xA;2. Use default breaks (waiver()) instead,  with some warning messages.&#xA;&#xA;The warning message should be like:&#xA;&#xA;&gt; `breaks = NULL` for non-spatial scale is meaningless so the guide is not displayed.&#xA;&#xA;" />
      <Message Id="6320013" ParentId="579" UserId="86978" Date="06/14/2012 04:15:27" Content="Oh,  I see what you mean. Yes,  the bug is in colorbar." />
      <Message Id="6617623" ParentId="579" UserId="227097" Date="06/27/2012 22:44:44" Content="ah...,  if the branch referring the issue is merged on github,  those who commit the branch will close the issue,  I understand.&#xA;A bit surprising because I was sleeping at that time...&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="580" Title="Switch to using extended breaks">
    <Messages>
      <Message Id="0" ParentId="580" UserId="4196" Date="06/14/2012 22:11:42" Content="" />
      <Message Id="6536608" ParentId="580" UserId="86978" Date="06/24/2012 21:39:53" Content="I made the change to my copy of the scales package. It seems to work,  except for dates. I get the error:&#xA;&#xA;```R&#xA;d&gt; pretty_breaks()(as.Date(c(&quot;2008-01-01&quot;,  &quot;2009-01-01&quot;)))&#xA;    Jan 2008     Apr 2008     Jul 2008     Oct 2008     Jan 2009 &#xA;&quot;2008-01-01&quot; &quot;2008-04-01&quot; &quot;2008-07-01&quot; &quot;2008-10-01&quot; &quot;2009-01-01&quot; &#xA;&#xA;d&gt; extended_breaks()(as.Date(c(&quot;2008-01-01&quot;,  &quot;2009-01-01&quot;)))&#xA;Error in Math.difftime(122,  base = 10) : &#xA;  'log' not defined for &quot;difftime&quot; objects&#xA;```&#xA;" />
      <Message Id="6537452" ParentId="580" UserId="227097" Date="06/24/2012 23:37:38" Content="`labeling::extended` doesn't care about data/time,  so you may implement for date class.&#xA;Will `lubridate` implement the extended breaks for date/POSIXt classes?" />
      <Message Id="6538339" ParentId="580" UserId="86978" Date="06/25/2012 01:50:36" Content="Here are the lines of code from `labeling::extended`:&#xA;&#xA;```r&#xA;delta &lt;- (dmax-dmin)/(k+1)/j/q&#xA;z &lt;- ceiling(log(delta,  base=10))&#xA;```&#xA;&#xA;I think that the purpose of the `log` is to get the difference in number of digits between the smallest and the largest number in the ticks. So for dates,  I think `z` can just be set to zero. I'll contact the author of the labeling package and ask him." />
      <Message Id="6538416" ParentId="580" UserId="227097" Date="06/25/2012 02:00:39" Content="I think pretty breaks for date class need more specific works.&#xA;This is because,  making breaks along **day** is insufficient in some cases.&#xA;&#xA;```{ r }&#xA;&gt; pretty(as.Date(c(&quot;2008-01-01&quot;,  &quot;2009-01-01&quot;)))&#xA;[ 1 ] &quot;2008-01-01&quot; &quot;2008-04-01&quot; &quot;2008-07-01&quot; &quot;2008-10-01&quot; &quot;2009-01-01&quot;&#xA;&gt; as.Date(pretty(as.numeric(as.Date(c(&quot;2008-01-01&quot;,  &quot;2009-01-01&quot;)))),  origin = &quot;1970-01-01&quot;)&#xA;[ 1 ] &quot;2007-10-14&quot; &quot;2008-01-22&quot; &quot;2008-05-01&quot; &quot;2008-08-09&quot; &quot;2008-11-17&quot; &quot;2009-02-25&quot;&#xA;```&#xA;&#xA;even if setting `z` to `0`,  we will not get pretty breaks for date.&#xA;&#xA;You may also look through `grDevices:::prettyDate` to see how things are complicated." />
      <Message Id="6538446" ParentId="580" UserId="4196" Date="06/25/2012 02:04:01" Content="Yes,  extended breaks shouldn't be the default for dates and times.  Stick with the old default for them." />
      <Message Id="6538548" ParentId="580" UserId="86978" Date="06/25/2012 02:15:13" Content="I think this might require a wrapper function in scales which sends numerics to `extended_breaks()`,  and dates to `pretty_breaks()`.&#xA;" />
      <Message Id="6538578" ParentId="580" UserId="227097" Date="06/25/2012 02:18:15" Content="`extended_breaks` can return S3 function. Or internal dispatch may be sufficient here:&#xA;&#xA;```{ r }&#xA;extended_breaks &lt;- function (n = 5,  ...) &#xA;{ &#xA;  function(x) { &#xA;    if (is.Date(x)) { &#xA;      pretty(x)&#xA;     } else { &#xA;      extended(min(x),  max(x),  n,  only.loose = FALSE,  ...)&#xA;     }&#xA;   }&#xA; }&#xA;```" />
      <Message Id="6538579" ParentId="580" UserId="4196" Date="06/25/2012 02:18:20" Content="I think the defaults for `scale_datetime` should change from waiver to `pretty_breaks`" />
    </Messages>
  </Topic>
  <Topic Id="581" Title="Suppress guide for NULL breaks in non-position scales (Fixed #579).">
    <Messages>
      <Message Id="0" ParentId="581" UserId="227097" Date="06/16/2012 00:46:56" Content="" />
      <Message Id="6370642" ParentId="581" UserId="86978" Date="06/16/2012 03:58:03" Content="Thanks - does this pass all tests and visual tests?&#xA;&#xA;Also it should be 'suppressed',  not 'surpressed'." />
      <Message Id="6370746" ParentId="581" UserId="227097" Date="06/16/2012 04:25:27" Content="@wch passes all unit test. Which version of vtest should I use,  and which commit shoud the vtest do against?&#xA;&#xA;All vtest are passed. I mean vdiff in vtest.&#xA;" />
      <Message Id="6370878" ParentId="581" UserId="86978" Date="06/16/2012 04:57:49" Content="You should use the latest version of vtest from github. I think you should test it against `ggplot2-0.9.1` (but I'm not 100% sure).&#xA;&#xA;You can also try running `vdiffstat('recent')` or `vdiff_webpage('recent')`,  which should compare it against a somewhat newer commit (although that commit has the same resultset as 0.9.1)." />
      <Message Id="6371024" ParentId="581" UserId="227097" Date="06/16/2012 05:39:21" Content="@wch looks ok for visual comparison between the latest commit and tag 0.9.1." />
      <Message Id="6376081" ParentId="581" UserId="86978" Date="06/16/2012 20:21:13" Content="@kohske Thanks for running tests.&#xA;&#xA;I have a question about the warnings: Does it really need a warning when users do `breaks=NULL`? For positional scales (x and y),  `breaks=NULL` just means that nothing shows up on the guide (the axis ticks),  and there's no warning.&#xA;&#xA;In other words,  why is it valid to use `breaks=NULL` for x and y,  but invalid for colour,  fill,  etc?" />
      <Message Id="6377146" ParentId="581" UserId="227097" Date="06/16/2012 22:44:28" Content="@wch I think that non-positional guide without breaks is meaningless while positional guide without breaks is used in somewhere What do you think?&#xA;&#xA;At least,  legend guide cannot be drawn if there is no breaks." />
      <Message Id="6416556" ParentId="581" UserId="86978" Date="06/19/2012 05:49:56" Content="I think it makes sense for a non-positional guide to be suppressed when `breaks=NULL`,  but I don't think a warning is necessary. I guess we can see what Hadley thinks." />
      <Message Id="6445407" ParentId="581" UserId="227097" Date="06/20/2012 05:31:30" Content="Ok,  I will wait @hadley 's response." />
      <Message Id="6608068" ParentId="581" UserId="4196" Date="06/27/2012 16:23:15" Content="I vote for no warning." />
      <Message Id="6608161" ParentId="581" UserId="86978" Date="06/27/2012 16:27:05" Content="I took out the warnings and merged into master (2e7015c7f31027269e6f5e7c314d011254ede04b)." />
    </Messages>
  </Topic>
  <Topic Id="582" Title="binding between aes parameter and args for stat function">
    <Messages>
      <Message Id="0" ParentId="582" UserId="227097" Date="06/17/2012 00:05:27" Content="For example, &#xA;&#xA;```&#xA;d &lt;- expand.grid(x = c(-5,  5),  sd = 1:5)&#xA;ggplot(d,  aes(x,  colour = factor(sd))) + stat_function(fun = dnorm,  args = list(mean = 2,  sd = sd))&#xA;```&#xA;&#xA;Then,  parameter to function can be set within the data.&#xA;&#xA;" />
      <Message Id="35940894" ParentId="582" UserId="4196" Date="02/24/2014 21:25:56" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35940894" ParentId="582" UserId="4196" Date="02/24/2014 21:25:56" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="583" Title="ggplot2 print.proto breaks proto">
    <Messages>
      <Message Id="0" ParentId="583" UserId="491953" Date="06/18/2012 06:57:04" Content="I am using `proto` and `ggplot2`. I looks like the `print.proto` method in `ggplot2` is breaking `proto`.&#xA;&#xA;```&#xA;&gt; test_proto &lt;- proto(x=5)&#xA;&gt; print(test_proto)&#xA;Error in print.proto(test_proto) : attempt to apply non-function&#xA;&#xA;Enter a frame number,  or 0 to exit   &#xA;&#xA;1: print(test_proto)&#xA;2: print.proto(test_proto)&#xA;&#xA;Selection: 2&#xA;Called from: top level &#xA;Browse[ 1 ]&gt; getAnywhere(print.proto)&#xA;A single object matching ‘print.proto’ was found&#xA;It was found in the following places&#xA;  registered S3 method for print from namespace ggplot2&#xA;  namespace:ggplot2&#xA;with value&#xA;&#xA;function (x,  ...) &#xA;x$pprint(...)&#xA;&lt;environment: namespace:ggplot2&gt;&#xA;```&#xA;&#xA;Uninstalling `ggplot2` makes the problem go away.&#xA;&#xA;```&#xA;Error in loadNamespace(name) : there is no package called ‘ggplot2’&#xA;&#xA;&gt; library(proto)&#xA;&gt; test_proto &lt;- proto(y=5)&#xA;&gt; test_proto&#xA;&lt;environment: 0x7fc1dda1c8e8&gt;&#xA;attr(, &quot;class&quot;)&#xA;[ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xA;```&#xA;&#xA;Unfortunately,  I rely heavily on `ggplot2` and I am developing a package that uses `proto`. Any suggestions for a workaround would be appreciated." />
      <Message Id="7461080" ParentId="583" UserId="86978" Date="08/02/2012 16:48:28" Content="@hadley,  is `print.proto` needed anymore? I can't think of any cases where it would be used,  except debugging. And in that case,  the equivalent could be called with `x$pprint()`.&#xA;&#xA;edit: I take it back - it does look like it's used all the time. Maybe the fix should wait for the S3 rewrite?" />
      <Message Id="7461760" ParentId="583" UserId="4196" Date="08/02/2012 17:12:52" Content="Instead of `print.proto` we should either call it explicitly,  or give all proto elements a common class,  and use that." />
      <Message Id="7462060" ParentId="583" UserId="86978" Date="08/02/2012 17:23:45" Content="I think the printing is useful at the user level - for example,  when you run:&#xA;&#xA;```R&#xA;&gt; scale_x_continuous()&#xA;continuous_scale(aesthetics = c(&quot;x&quot;,  &quot;xmin&quot;,  &quot;xmax&quot;,  &quot;xend&quot;,  &#xA;    &quot;xintercept&quot;),  scale_name = &quot;position_c&quot;,  palette = identity,  &#xA;    expand = expand,  guide = &quot;none&quot;)&#xA;```&#xA;&#xA;Maybe the class could be `ggproto`?&#xA;" />
      <Message Id="7463893" ParentId="583" UserId="86978" Date="08/02/2012 18:26:25" Content="It looks like it will be tedious to add the class `ggproto` to all the proto objects in ggplot2. When you create a new proto object from a prototype,  it doesn't inherit the class.&#xA;&#xA;Here is something I added to `aaa-.r`:&#xA;&#xA;```R&#xA;class(TopLevel) &lt;- c(&quot;ggproto&quot;,  class(TopLevel))&#xA;```&#xA;&#xA;When you look at `TopLevel`,  it has the class:&#xA;&#xA;```R&#xA;class(TopLevel)&#xA;# [ 1 ] &quot;ggproto&quot;     &quot;proto&quot;       &quot;environment&quot;&#xA;```&#xA;&#xA;But its descendants don't get the added class:&#xA;&#xA;```R&#xA;class(Stat)&#xA;# [ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xA;class(stat_bin())&#xA;# [ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xA;&#xA;# Test it on a new object&#xA;&#xA;z &lt;- proto(TopLevel)&#xA;class(z)&#xA;# [ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xA;```&#xA;&#xA;I think we'd need to add the `ggproto` class manually to every proto object in ggplot2.&#xA;" />
      <Message Id="7464193" ParentId="583" UserId="4196" Date="08/02/2012 18:37:25" Content="We could just create `ggproto` to wrap `proto` and add the correct class" />
      <Message Id="7464801" ParentId="583" UserId="86978" Date="08/02/2012 18:57:30" Content="I tried this:&#xA;&#xA;```R&#xA;ggproto &lt;- function(...) { &#xA;  x &lt;- proto(...)&#xA;  class(x) &lt;- c(&quot;ggproto&quot;,  class(x))&#xA;  x&#xA; }&#xA;```&#xA;&#xA;and I replaced all instances of `proto()` with `ggproto()`. It doesn't seem happy,  though. Lots of stuff doesn't work anymore. For example:&#xA;&#xA;```&#xA;&gt; stat_bin()&#xA;Error in eval(expr,  envir,  enclos) : argument is missing,  with no default&#xA;&#xA;&gt; geom_point()&#xA;Error in eval(expr,  envir,  enclos) : argument is missing,  with no default&#xA;```&#xA;&#xA;*****&#xA;&#xA;I've also tried copying the call for proto more closely in the hopes of preserving the environment,  but it still doesn't work.&#xA;&#xA;```R&#xA;ggproto &lt;- function(. = parent.env(envir),  expr = {  }, &#xA;  envir = new.env(parent = parent.frame()),  ...,  funEnvir = envir) { &#xA;&#xA;  x &lt;- proto(. = .,  expr = expr,  envir = envir,  ...,  funEnvir = envir)&#xA;  class(x) &lt;- c(&quot;ggproto&quot;,  class(x))&#xA;  x&#xA; }&#xA;```&#xA;&#xA;When I try to load,  it's unhappy:&#xA;&#xA;```&#xA;&gt; load_all()&#xA;Loading ggplot2&#xA;Error in eval(expr,  envir,  enclos) : object 'expr' not found&#xA;```&#xA;&#xA;I think it may have something to do with this line `proto()`,  but I'm not sure:&#xA;&#xA;```R&#xA;   eval(substitute(eval(quote({ &#xA;        expr&#xA;     })))&#xA;```&#xA;" />
      <Message Id="7496157" ParentId="583" UserId="4196" Date="08/03/2012 22:25:51" Content="Then how about&#xA;&#xA;```R&#xA;gg &lt;- function(x) structure(x,  class = c(&quot;ggproto&quot;,  class(x))&#xA;&#xA;StatDensity &lt;- gg(proto(Stat,  {  }))&#xA;# etc.&#xA;```" />
      <Message Id="7559623" ParentId="583" UserId="86978" Date="08/07/2012 16:56:34" Content="Yup,  that looks like it works." />
      <Message Id="7732012" ParentId="583" UserId="86978" Date="08/14/2012 16:48:40" Content="Putting this off to release 0.10,  when we stop using proto." />
      <Message Id="35940955" ParentId="583" UserId="4196" Date="02/24/2014 21:26:30" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="584" Title="geom_vline with Character xintercept">
    <Messages>
      <Message Id="0" ParentId="584" UserId="628977" Date="06/19/2012 19:21:02" Content="Reposted from Stack Overflow (http://stackoverflow.com/questions/11093248/geom-vline-with-character-xintercept),  as requested:&#xA;&#xA;I have some ggplot code that worked fine in 0.8.9 but not in 0.9.1.&#xA;&#xA;I am going to plot the data in `theDF` and would like to plot a vertical line at `xintercept=&quot;2010 Q1.&quot;`  `theGrid` is merely used to create `theDF`.&#xA;&#xA;```R&#xA;theGrid &lt;- expand.grid(2009:2011,  1:4)&#xA;theDF &lt;- data.frame(YrQtr=sprintf(&quot;%s Q%s&quot;,  theGrid$Var1,  theGrid$Var2),  Minutes=c(1000,  2200,  1450,  1825,  1970,  1770,  1640,  1920,  1790,  1800,  1750,  1600))&#xA;```&#xA;&#xA;The code used is:&#xA;&#xA;```R&#xA;g &lt;- ggplot(theDF,  aes(x=YrQtr,  y=Minutes)) + geom_point() + opts(axis.text.x=theme_text(angle=90))&#xA;g + geom_vline(data=data.frame(Vert=&quot;2010 Q2&quot;),  aes(xintercept=Vert))&#xA;```&#xA;&#xA;Again,  this worked fine in R 2.13.2 with ggplot2 0.8.9,  but does not in R 2.14+ with ggplot2 0.9.1." />
      <Message Id="35940981" ParentId="584" UserId="4196" Date="02/24/2014 21:26:43" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="585" Title=" axis.line only changes one axis?">
    <Messages>
      <Message Id="0" ParentId="585" UserId="1837585" Date="06/21/2012 10:00:46" Content="After changing the default theme_grey to &#xA;&#xA;axis.line =         theme_segment(colour = &quot;grey25&quot;)&#xA;&#xA;only the x-axis has a grey line.&#xA;&#xA;E.g.&#xA;qplot(carat,  price,  data=diamonds)" />
      <Message Id="6481596" ParentId="585" UserId="86978" Date="06/21/2012 13:03:14" Content="I think this is the same underlying issue as #520,  and should be fixed with the gtable rewrite in the next release." />
    </Messages>
  </Topic>
  <Topic Id="586" Title="Documentation work">
    <Messages>
      <Message Id="0" ParentId="586" UserId="911841" Date="06/21/2012 23:38:10" Content="This is my first attempt,  and I'm brand new at GitHub,  so apologies if this is a mess. I wasn't sure how many commits to have in a pull request,  and if you have any advice on writing useful commit notes I'm all ears.&#xA;&#xA;The two big things I changed were altering aesthetics() in utilities-help.r to list the required aesthetics first,  in bold,  and giving continuous_scale a (mostly) complete argument list,  largely copying from discrete_scale where appropriate.&#xA;&#xA;The rest are minor typos,  linking to relevant documentation,  or slightly clarified descriptions." />
      <Message Id="6499829" ParentId="586" UserId="86978" Date="06/22/2012 03:23:55" Content="Thanks for taking the effort to improve the ggplot2 documentation! Some notes:&#xA;&#xA;* The &quot;right&quot; way to modify the documentation is to modify the .r files and then run the `document()` function from devtools (or the `roxygenize()` function from roxygen2). (I think you did this,  but not completely sure)&#xA;* Make a commit before you run `document()`; after running it,  make another commit with a message like &quot;Re-roxygenize&quot;. This will be especially helpful right now,  because there have been some changes to devtools (or roxygen2?) that changed the way text is sorted,  and this will cause merge conflicts that will be easier to fix if the roxygen step is in its own commit.&#xA;* The lines should be hard-wrapped around 72-80 characters (although sometimes slightly more)&#xA; " />
      <Message Id="6499997" ParentId="586" UserId="911841" Date="06/22/2012 03:41:37" Content="I was indeed doing the first,  but not the second two (except,  perhaps,  by chance). Do I need to redo anything relating to this pull request,  or were those suggestions for anything I do in the future?&#xA;&#xA;Thanks for being patient with me...I'll get up to speed quickly,  I promise!" />
      <Message Id="6500512" ParentId="586" UserId="86978" Date="06/22/2012 04:45:01" Content="I think it would be best to re-do the changes with a separate roxygen step,  because of merging issues. The branch with the new theming system should get merged soon,  and since it also updated documentation with roxygen,  there will be some merge conflicts that will be easier to fix if it's in a separate commit.&#xA;&#xA;You might want to make a new branch and pull request (there are ways of replacing this branch with a new one of the same name,  but it might just be simpler to make a new branch)." />
      <Message Id="6540250" ParentId="586" UserId="86978" Date="06/25/2012 06:06:45" Content="FYI,  you can delete this old branch from github with:&#xA;&#xA;```&#xA;git push origin :DocumentationWork&#xA;```&#xA;&#xA;This won't affect your local branch." />
    </Messages>
  </Topic>
  <Topic Id="587" Title="Error with empty (0 row) data.frame and aesthetic">
    <Messages>
      <Message Id="0" ParentId="587" UserId="463252" Date="06/22/2012 22:50:29" Content="# Summary&#xA;&#xA;ggplot will give an error if a layer has a 0-row data frame (though not 0 column) and a defined aesthetic. Without the aesthetic,  it will produce an (empty) plot.&#xA;&#xA;# Reproducible code&#xA;&#xA;```r&#xA;ggplot(mtcars,  aes(wt,  mpg)) +&#xA;  geom_point(data = mtcars[ mtcars$wt &gt; 6,  ],  aes(size=qsec))&#xA;```&#xA;&#xA;# Expected output&#xA;&#xA;A blank plot,  no errors&#xA;&#xA;# Actual output&#xA;&#xA;```r&#xA;&gt; ggplot(mtcars,  aes(wt,  mpg)) +&#xA;+   geom_point(data = mtcars[ mtcars$wt &gt; 6,  ],  aes(size=qsec))&#xA;Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xA;```&#xA;&#xA;# Discussion&#xA;&#xA;This came up because I was adding points to a plot (with other layers) only for certain points that met some criteria. In one case,  no points met this criteria and thus the data.frame that was being passed as the `data` argument was a 0-row data.frame. I saw this error.&#xA;&#xA;It is worth noting that without the `aes` call,  no error will be returned.&#xA;&#xA;Here are some more examples: the first 3 do not produce an error (when drawn; none produce an error on assignment); the last does&#xA;&#xA;```r&#xA;p1 &lt;- ggplot(mtcars,  aes(wt,  mpg)) +&#xA;  geom_point(data = mtcars[ mtcars$wt &gt; 5,  ]) &#xA;&#xA;p2 &lt;- ggplot(mtcars,  aes(wt,  mpg)) +&#xA;  geom_point(data = mtcars[ mtcars$wt &gt; 5,  ],  aes(size=qsec)) &#xA;&#xA;p3 &lt;- ggplot(mtcars,  aes(wt,  mpg)) +&#xA;  geom_point(data = mtcars[ mtcars$wt &gt; 6,  ]) &#xA;&#xA;p4 &lt;- ggplot(mtcars,  aes(wt,  mpg)) +&#xA;  geom_point(data = mtcars[ mtcars$wt &gt; 6,  ],  aes(size=qsec)) &#xA;```&#xA;&#xA;In particular,  the difference between the last two can be seen in the results of the data element of ggplot_build:&#xA;&#xA;```r&#xA;&gt; ggplot_build(p1)$data&#xA;[ [ 1 ] ]&#xA;      x    y PANEL group&#xA;1 5.250 10.4     1     1&#xA;2 5.424 10.4     1     1&#xA;3 5.345 14.7     1     1&#xA;&#xA;&gt; ggplot_build(p2)$data&#xA;[ [ 1 ] ]&#xA;  size     x    y PANEL group&#xA;1 6.00 5.250 10.4     1     1&#xA;2 4.57 5.424 10.4     1     1&#xA;3 1.00 5.345 14.7     1     1&#xA;&#xA;&gt; ggplot_build(p3)$data&#xA;[ [ 1 ] ]&#xA;data frame with 0 columns and 0 rows&#xA;&#xA;&gt; ggplot_build(p4)$data&#xA;[ [ 1 ] ]&#xA;NULL&#xA;```&#xA;&#xA;Without the `aes` call,  `data` contains (a list whose first element is) a 0-row (and 0-column) data frame. With the `aes` call,  `data` contains (a list whose first element is) NULL. The error is thrown by the `build_grob` function inside `ggplot_gtable` (plot-render.r:25),  but I believe the real problem happens in the build process as a NULL is where a data.frame should be.&#xA;" />
      <Message Id="6912691" ParentId="587" UserId="4196" Date="07/11/2012 16:59:04" Content="Closed - works in latest dev version." />
      <Message Id="18017674" ParentId="587" UserId="2557767" Date="05/16/2013 17:54:36" Content="I can reproduce this with 0.9.3.1 (just downloaded from CRAN). This is on Debian squeeze. &#xD;&#xA;&#xD;&#xA;    &gt; library(ggplot2)&#xD;&#xA;    &gt; sessionInfo()&#xD;&#xA;    R version 2.15.3 (2013-03-01)&#xD;&#xA;    Platform: i486-pc-linux-gnu (32-bit)&#xD;&#xA;&#xD;&#xA;    locale:&#xD;&#xA;     [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA;     [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA;     [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA;     [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xD;&#xA;     [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;    [ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;    attached base packages:&#xD;&#xA;    [ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;    other attached packages:&#xD;&#xA;    [ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;    loaded via a namespace (and not attached):&#xD;&#xA;     [ 1 ] colorspace_1.2-0   dichromat_1.2-4    digest_0.6.0       grid_2.15.3       &#xD;&#xA;     [ 5 ] gtable_0.1.2       labeling_0.1       MASS_7.3-23        munsell_0.4       &#xD;&#xA;     [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;    [ 13 ] scales_0.2.3       stringr_0.6.2     &#xD;&#xA;    &gt; ggplot(mtcars,  aes(wt,  mpg)) + geom_point(data = mtcars[ mtcars$wt &gt; 6,  ],  aes(size=qsec))&#xD;&#xA;    Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xD;&#xA;&#xD;&#xA;    apt-cache policy r-base&#xD;&#xA;   &#xD;&#xA;    r-base:&#xD;&#xA;      Installed: 2.15.3-1~squeezecran.0&#xD;&#xA;      Candidate: 2.15.3-1~squeezecran.0&#xD;&#xA;      Version table:&#xD;&#xA;     [ ... ]&#xD;&#xA;     *** 2.15.3-1~squeezecran.0 0&#xD;&#xA;            500 http://cran.r-project.org/bin/linux/debian/ squeeze-cran/ Packages&#xD;&#xA;            100 /var/lib/dpkg/status&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;I came across this while debugging https://github.com/hadley/ggplot2/issues/756#issuecomment-17866133&#xD;&#xA;&#xD;&#xA;BTW,  can some kind person tell me if there is an easy way to indent code 4 spaces here,  so I don't have to do it by hand? Thanks.&#xD;&#xA;I believe the problem happens early on ggplot_build,  in the map_layout function." />
      <Message Id="18024528" ParentId="587" UserId="86978" Date="05/16/2013 19:46:49" Content="For code,  you can put the it in blocks delimited by three backticks. See here for more info: https://help.github.com/articles/github-flavored-markdown" />
      <Message Id="18025281" ParentId="587" UserId="2557767" Date="05/16/2013 20:00:15" Content="Thanks for the tip,  Winston. It didn't occur to me that there was another way to do this." />
      <Message Id="18027048" ParentId="587" UserId="463252" Date="05/16/2013 20:30:51" Content="I concur; the bug is still there.&#xD;&#xA;&#xD;&#xA;```lang-r&#xD;&#xA;&gt; library(&quot;ggplot2&quot;)&#xD;&#xA;&gt; ggplot(mtcars,  aes(wt,  mpg)) +&#xD;&#xA;+   geom_point(data = mtcars[ mtcars$wt &gt; 6,  ],  aes(size=qsec))&#xD;&#xA;Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.0.0 (2013-04-03)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-2   dichromat_2.0-0    digest_0.6.3       grid_3.0.0        &#xD;&#xA; [ 5 ] gtable_0.1.2       labeling_0.1       MASS_7.3-26        munsell_0.4       &#xD;&#xA; [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2     &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I haven't tested it on the just-released R 3.0.1,  but I don't imagine that would have any effect.&#xD;&#xA;&#xD;&#xA;When it gets fixed again,  there should be a regression test to make sure it isn't broken again." />
      <Message Id="18029229" ParentId="587" UserId="2557767" Date="05/16/2013 21:08:54" Content="Thanks for the confirmation,  Brian. How does one reopen an issue here?" />
      <Message Id="18034120" ParentId="587" UserId="463252" Date="05/16/2013 22:48:15" Content="Only the repo owner (Hadley) or a collaborator (?) can reopen issues. Not even the original submitter of the issue (in this case,  me) can reopen it." />
      <Message Id="18245611" ParentId="587" UserId="2557767" Date="05/21/2013 22:19:01" Content="See my update https://github.com/hadley/ggplot2/issues/756#issuecomment-18244988.&#xD;&#xA;I think the patch you want to fix this is what I call PATCH 1. It is&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;PATCH 1&#xD;&#xA;--- a/R/plot-render.r&#xD;&#xA;+++ b/R/plot-render.r&#xD;&#xA;@@ -22, 7 +22, 7 @@ ggplot_gtable &lt;- function(data) { &#xD;&#xA;   theme &lt;- plot_theme(plot)&#xD;&#xA;&#xD;&#xA;   build_grob &lt;- function(layer,  layer_data) { &#xD;&#xA;-    if (nrow(layer_data) == 0) return()&#xD;&#xA;+    if ((is.null(layer_data)) || (nrow(layer_data) == 0)) return()&#xD;&#xA;&#xD;&#xA;     dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xD;&#xA;       panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="588" Title="Documentation Fixes">
    <Messages>
      <Message Id="0" ParentId="588" UserId="911841" Date="06/23/2012 01:30:13" Content="Hopefully I did a better job this time!" />
      <Message Id="6536495" ParentId="588" UserId="86978" Date="06/24/2012 21:23:54" Content="Looks pretty good. For future reference,  you don't have to rebuild the docs after each commit -- just once at the end would be fine." />
      <Message Id="6546849" ParentId="588" UserId="4196" Date="06/25/2012 13:11:59" Content="Looks great - thanks!  I've added a few comments about various details." />
      <Message Id="6609620" ParentId="588" UserId="4196" Date="06/27/2012 17:21:42" Content="Does this fix #501?" />
      <Message Id="6610960" ParentId="588" UserId="911841" Date="06/27/2012 18:09:20" Content="This doesn't address everything raised in #501,  which seemed to me to be a bigger project. I was just trying to remedy the fact that `discrete_scale` was documented but `continuous_scale` wasn't (along with a handful of other small issues). &#xA;&#xA;koshke mentions having generic help pages for `coord`,  `geom`,  `stat` etc. I can certainly work on that,  but that seems like a bigger project,  and I was trying to start fairly simple as I get comfortable with git and roxygen." />
      <Message Id="6629572" ParentId="588" UserId="4196" Date="06/28/2012 13:23:07" Content="Ok,  no problems - I just wanted to check.  In the future,  can you please either roxygenise within each commit,  or once at the end - otherwise the commit history gets a bit cluttered.&#xA;&#xA;@wch can you please help getting the commit to merge cleanly?" />
      <Message Id="6636019" ParentId="588" UserId="86978" Date="06/28/2012 17:27:16" Content="Sure,  I'll get it merged. In general,  I think it's good to keep the roxygenizing commits separate to make merging easier -- this makes it possible to drop the roxygenizing commits in case of conflicts,  and then re-run it later." />
      <Message Id="6636164" ParentId="588" UserId="86978" Date="06/28/2012 17:32:20" Content="I rebased it,  cleaned it up,  and merged at 4a64647f004636016e05414fd02bd35e4e252d4f." />
    </Messages>
  </Topic>
  <Topic Id="589" Title="broken Date class yearmon handling">
    <Messages>
      <Message Id="0" ParentId="589" UserId="13787" Date="06/24/2012 19:50:58" Content="```R&#xA;dates &lt;- as.yearmon(seq(as.Date('2008-12-01'),  by='month',  to=as.Date('2012-06-01')))&#xA;data &lt;- data.frame(Date=dates,  value=rnorm(length(dates)))&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line()&#xA;```&#xA;&gt; Error: Discrete value supplied to continuous scale&#xA;&#xA;While adding `scale_x_date()` produces a chart of sorts,  the X range is way off; instead expected 2008 - 2012 range it shows 1975-07-03 - 1975-07-06 (as seen with the latter example)&#xA;```R&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line() + scale_x_date()&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line() + scale_x_date(labels=date_format(&quot;%Y-%m-%d&quot;))&#xA;```" />
      <Message Id="6918668" ParentId="589" UserId="4196" Date="07/11/2012 20:35:15" Content="What package is `as.yearmon` in?" />
      <Message Id="6920420" ParentId="589" UserId="13787" Date="07/11/2012 21:31:55" Content="oh,  sorry,  I was sure I reproduced this in clear environment.&#xA;&#xA;`as.yearmon` is in `zoo`" />
      <Message Id="7474254" ParentId="589" UserId="86978" Date="08/03/2012 02:44:39" Content="With upcoming version of ggplot2 (0.9.2),  it gives a different error:&#xA;&#xA;```&#xA;&gt; ggplot(data,  aes(x=Date,  y=value)) + geom_line()&#xA;Don't know how to automatically pick scale for object of type yearmon. Defaulting to continuous&#xA;Error: Discrete value supplied to continuous scale&#xA;```&#xA;&#xA;Making it work would require modifying the scales package to support yearmon objects.&#xA;&#xA;Since yearmon (and yearqtr) are classes specific to zoo,  I don't think it makes sense to make the changes to ggplot2/scales. A simple way to handle this case is to convert it back to a Date object:&#xA;&#xA;```R&#xA;data$Date &lt;- as.Date(data$Date)&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line()&#xA;&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line() + scale_x_date()&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line() + scale_x_date(labels=date_format(&quot;%Y-%m-%d&quot;))&#xA;```" />
      <Message Id="7474505" ParentId="589" UserId="4196" Date="08/03/2012 03:05:42" Content="Or at least document how to make it work - e.g. extend the right method" />
      <Message Id="7489525" ParentId="589" UserId="86978" Date="08/03/2012 17:50:38" Content="Here's some sample code showing how to create a new transformer object.&#xA;&#xA;```R&#xA;# functions for yearmon transformer ================ &#xA;&#xA;# Convert from numeric to yearmon&#xA;to_yearmon &lt;- function(x)  as.yearmon(x)&#xA;&#xA;# Inverse: convert from yearmon to numeric&#xA;from_yearmon &lt;- function(x) { &#xA;  if (!inherits(x,  &quot;yearmon&quot;)) { &#xA;    stop(&quot;Invalid input: date_yearmon works with objects of class yearmon only&quot;, &#xA;      call. = FALSE)&#xA;   }&#xA;  as.numeric(x)&#xA; }&#xA;&#xA;# Returns a _function_ that takes a yearmon object as input and returns a &#xA;# yearmon object as output,  with approximately n breaks,  using pretty_breaks().&#xA;# Can't just use pretty_breaks() directly,  since it changes yearmon objects&#xA;# to numeric.&#xA;# n is number of breaks&#xA;# (Does this really need to be a function returning a function?)&#xA;yearmon_breaks &lt;- function(n = 5) { &#xA;  function(x) as.yearmon(pretty_breaks(n)(x))&#xA; }&#xA;&#xA;# Takes a yearmon as input and returns a string representation of it&#xA;yearmon_format &lt;- function(x) { &#xA;  paste(&quot;foo&quot;,  as.numeric(x))&#xA; }&#xA;&#xA;# yearmon transformation object ================ &#xA;&#xA;# Returns a function that creates a transformer&#xA;# (Does this really need to be a function returning a function?)&#xA;yearmon_trans &lt;- function() { &#xA;  trans_new(&quot;yearmon&quot;,  transform = from_yearmon,  inverse = to_yearmon, &#xA;    breaks = yearmon_breaks(),  format = yearmon_format)&#xA; }&#xA;&#xA;&#xA;# Example ====================================================================&#xA;&#xA;library(zoo)&#xA;dates &lt;- as.yearmon(seq(as.Date('2008-12-01'),  by='month',  to=as.Date('2012-06-01')))&#xA;data &lt;- data.frame(Date=dates,  value=rnorm(length(dates)))&#xA;&#xA;ggplot(data,  aes(x=Date,  y=value)) + geom_line() +&#xA;  scale_x_continuous(trans = yearmon_trans())&#xA;```" />
      <Message Id="7490251" ParentId="589" UserId="4196" Date="08/03/2012 18:20:35" Content="@wch Could you add a `scale_type` method and appropriately named scale and then send to Dennis to include in the book?&#xA;&#xA;@tko I don't think this is used commonly enough to be included in ggplot2,  but you could easily add to another package." />
    </Messages>
  </Topic>
  <Topic Id="590" Title="First stub of a length scale">
    <Messages>
      <Message Id="0" ParentId="590" UserId="18445" Date="06/24/2012 22:25:44" Content="It can be used whenever fixed segment lengths are drawn. Examples are given&#xA;with geom_rug but it could also be used with a segment geom that would be&#xA;defined in terms of angle and length rather than in terms of beginning and end&#xA;coords.&#xA;&#xA;The remaining issue is the length,  which currently just draws segments. It&#xA;should draw segments of lengths identical to the main plot but since the two&#xA;viewports (main plot and legend) do not have the same reference,  it might be&#xA;hard." />
      <Message Id="35941028" ParentId="590" UserId="4196" Date="02/24/2014 21:27:10" Content="&#xD;&#xA;Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="591" Title="Extended breaks">
    <Messages>
      <Message Id="0" ParentId="591" UserId="86978" Date="06/25/2012 05:14:48" Content="Fixes #580.&#xA;&#xA;This is to be used with hadley/scales#22,  where the default breaks algorithm is changed to `extended_breaks()`. Since `extended_breaks()` doesn't work with dates and times,  the default for dates/times needs to be set to the original `pretty_breaks()`.&#xA;&#xA;&#xA;This still has a problem: if you don't specify `scale_x_date()`,  it instead uses the plain old `scale_x_continuous()`,  which uses `extended_breaks()`:&#xA;&#xA;```R&#xA;set.seed(321)&#xA;df &lt;- data.frame(&#xA;  dx = seq(as.Date(&quot;2012-02-29&quot;),  len=100,  by=&quot;1 day&quot;)[ sample(100,  50) ], &#xA;  price = runif(50)&#xA;)&#xA;df &lt;- df[ order(df$dx),   ]&#xA;&#xA;# This works now:&#xA;qplot(dx,  price,  data=df,  geom=&quot;line&quot;) + scale_x_date()&#xA;&#xA;&#xA;# This doesn't:&#xA;qplot(dx,  price,  data=df,  geom=&quot;line&quot;) &#xA;# Error in Math.difftime(35.9333333333333,  base = 10) : &#xA;#   'log' not defined for &quot;difftime&quot; objects&#xA;```&#xA;&#xA;&#xA;I think the problem is that  `scales_add_defaults()` in scales-.r only appends `discrete` and `continuous` to the scale name,  when in this case it should append `date`." />
      <Message Id="6540218" ParentId="591" UserId="86978" Date="06/25/2012 06:00:43" Content="I've made changes to `scales_add_defaults()` so that it can properly distinguish between the different types of scales,  and create them appropriately.&#xA;&#xA;Visual tests results here (minus a couple tests from scale-breaks,  since they were broken by the recent colorbar change):&#xA;http://stdout.org/~winston/vtest/diff/&#xA;&#xA;Things look pretty good. One possible change is to increase the default number of breaks for `extended_breaks()` from 5 to something larger. See the geom-raster and line test pages for examples where there aren't enough breaks (in my opinion)." />
      <Message Id="6546525" ParentId="591" UserId="4196" Date="06/25/2012 12:56:57" Content="I think the current default `n` is fine - unless you want to test a few other values.&#xA;&#xA;Also,  since this change depends on a new version of an external package,  can you please increment the minor version number of scales and increment the required version in the `DESCRIPTION`?" />
      <Message Id="6555670" ParentId="591" UserId="86978" Date="06/25/2012 18:29:15" Content="I've incremented the version in the DESCRIPTION here and in scales (to 0.2.1.1). Do you think we should add another issue to 0.9.2 so that we don't forget to turn the version numbers to a 3-number format before release?&#xA;&#xA;Also,  I tried changing `n` from 5 to 6. Although some things looked a little better,  others looked worse,  so I guess we might as well leave it as is." />
    </Messages>
  </Topic>
  <Topic Id="592" Title="strange behavior in locale handling for dates">
    <Messages>
      <Message Id="0" ParentId="592" UserId="1888794" Date="06/25/2012 08:59:58" Content="When plotting time series data,  setting the locale (for date formatting on x-axis),  e.g. Sys.setlocale(&quot;LC_TIME&quot;, &quot;de_DE.UTF-8&quot;),  will only work with a fresh workspace. Setting an new locale for the same dataset after plotting once will not have any effect. Also funny: independently of the x-axis the same can be performed for y-axis: set locale once and ignore afterwards...&#xA;&#xA;```R&#xA;library(ggplot2)&#xA;test&lt;-data.frame(a=runif(12), b=as.Date(paste(&quot;2012&quot;, 1:12, &quot;1&quot;, sep=&quot;-&quot;)))&#xA;Sys.getlocale(&quot;LC_TIME&quot;)&#xA;Sys.setlocale(&quot;LC_TIME&quot;,  &quot;de_DE.UTF-8&quot;)&#xA;ggplot(test, aes(x=b, y=a)) + geom_point()&#xA;#look at result&#xA;Sys.setlocale(&quot;LC_TIME&quot;,  &quot;en_US.UTF-8&quot;)&#xA;ggplot(test, aes(x=b, y=a)) + geom_point()&#xA;#look at result - new locale igonred&#xA;ggplot(test, aes(x=a, y=b)) + geom_point()&#xA;#look at result - on the y-axis,  new locale is used&#xA;Sys.setlocale(&quot;LC_TIME&quot;,  &quot;de_DE.UTF-8&quot;)&#xA;ggplot(test, aes(x=a, y=b)) + geom_point()&#xA;#look at result - the second new locale ignored on y-axis,  too&#xA;```&#xA;" />
      <Message Id="7474305" ParentId="592" UserId="86978" Date="08/03/2012 02:50:05" Content="All of these examples look the same to me,  using ggplot2 0.9.1 and the 0.9.2 release candidate. The format of the dates is &quot;Jan 2012&quot;.&#xA;&#xA;Can you post the result of `sessionInfo()`?&#xA;&#xA;edit: Oh,  is it that it displays &quot;Okt 2012&quot; for the German locale?" />
      <Message Id="7474857" ParentId="592" UserId="86978" Date="08/03/2012 03:33:42" Content="I think the problem is that `train_cartesian()` is memoized,  so it's storing the result of the first call to `scale_break_info()`,  and does not run it again on subsequent calls to `ggplot()`.&#xA;&#xA;I'm not sure of a good solution - the ones I can think of are not very good:&#xA;&#xA;* Make `memoise()` detect changes to locale changes. But this seems too much of a special case.&#xA;* Provide a user-facing function to clear the memoization cache. But I don't think users would ever figure this out since it's so obscure.&#xA;* Provide an easy way to reload ggplot2 (which will create new environments for the memoization). But again,  I don't think most users would figure this out.&#xA;* Don't memoize the function." />
      <Message Id="7496291" ParentId="592" UserId="4196" Date="08/03/2012 22:34:19" Content="What are the performance implications of dropping the memoisation?" />
      <Message Id="7558358" ParentId="592" UserId="86978" Date="08/07/2012 16:14:09" Content="It looks like the speed difference is negligible.&#xA;&#xA;Here's some test code,  with no facets,  and with `facet_grid`:&#xA;&#xA;```R&#xA;n &lt;- 10&#xA;times &lt;- numeric(n)&#xA;&#xA;# Non-faceted version:&#xA;for (i in 1:n)&#xA;  times[ i ] &lt;- system.time(print(qplot(wt,  mpg,  data=mtcars)))[ 1 ]&#xA;&#xA;&#xA;# Or,  with facet_grid:&#xA;for (i in 1:n)&#xA;  times[ i ] &lt;- system.time(print(qplot(wt,  mpg,  data=mtcars) + facet_grid(am~cyl)))[ 1 ]&#xA;```&#xA;&#xA;I ran each test in a clean session. Here are the results without facets. It's basically the same with or without faceting:&#xA;&#xA;```R&#xA;# =========================&#xA;# Without facets&#xA;# =========================&#xA;&#xA;# ==== With memoise() ====&#xA;times&#xA;# [ 1 ] 0.262 0.164 0.162 0.159 0.158 0.152 0.162 0.175 0.171 0.157&#xA;mean(times)&#xA;# 0.1722&#xA;mean(times[ -1 ])&#xA;# 0.1622&#xA;&#xA;# ==== Without memoise() ====&#xA;times&#xA;# [ 1 ] 0.246 0.162 0.161 0.158 0.160 0.154 0.161 0.157 0.162 0.161&#xA;mean(times)&#xA;# 0.1682&#xA;mean(times[ -1 ])&#xA;# 0.1600&#xA;```&#xA;&#xA;Here are the results with facets:&#xA;&#xA;```R&#xA;# =========================&#xA;# With facet_grid(am ~ cyl)&#xA;# =========================&#xA;&#xA;# ==== With memoise() ====&#xA;times&#xA;# [ 1 ] 0.874 0.566 0.574 0.549 0.529 0.544 0.545 0.547 0.544 0.544&#xA;mean(times)&#xA;# 0.5816&#xA;mean(times[ -1 ])&#xA;# 0.5491&#xA;sd(times[ -1 ])&#xA;# 0.0133&#xA;&#xA;# ==== Without memoise() ====&#xA;times&#xA;# [ 1 ] 0.739 0.560 0.554 0.630 0.560 0.549 0.543 0.562 0.541 0.551&#xA;mean(times)&#xA;# 0.5789&#xA;mean(times[ -1 ])&#xA;# 0.5611&#xA;sd(times[ -1 ])&#xA;# 0.0270&#xA;```&#xA;I think we can just take it out." />
      <Message Id="7577940" ParentId="592" UserId="1888794" Date="08/08/2012 08:27:47" Content="Hi Winston, &#xA;excuse the late reply,  I am on vacation.&#xA;Thanks for your efforts and for the explanation. Knowing how to handle &#xA;the situation should be enough for most users since one usually doesn't &#xA;switch languages during a session (I work either on project A or B). I &#xA;guess it would be enough to have it included in a users guide or FAQ.&#xA;&#xA;Regards - Andre&#xA;&#xA;Am 03.08.2012 05:33,  schrieb Winston Chang:&#xA;&gt; I think the problem is that `train_cartesian()` is memoized,  so it's storing the result of the first call to `scale_break_info()`,  and does not run it again on subsequent calls to `ggplot()`.&#xA;&gt;&#xA;&gt; I'm not sure of a good solution - the ones I can think of are not very good:&#xA;&gt;&#xA;&gt; * Make `memoise()` detect changes to locale changes. But this seems too much of a special case.&#xA;&gt; * Provide a user-facing function to clear the memoization cache. But I don't think users would ever figure this out since it's so obscure.&#xA;&gt; * Provide an easy way to reload ggplot2 (which will create new environments for the memoization). But again,  I don't think most users would figure this out.&#xA;&gt;&#xA;&gt; ---&#xA;&gt; Reply to this email directly or view it on GitHub:&#xA;&gt; https://github.com/hadley/ggplot2/issues/592#issuecomment-7474857&#xA;&gt;" />
      <Message Id="7584610" ParentId="592" UserId="86978" Date="08/08/2012 14:12:34" Content="No worries - the issue was a bug,  and now it's fixed (by #643)." />
    </Messages>
  </Topic>
  <Topic Id="593" Title="Sys.setlocale(&quot;LC_TIME&quot;,  &quot;...&quot;) will be ignored for x-axis (sometimes)">
    <Messages>
      <Message Id="0" ParentId="593" UserId="1888623" Date="06/25/2012 09:15:59" Content="Ok - this is somewhat difficult to reconstruct,  as I was not able to reconstruct the misbehavior that some people have observed: only the first plot uses the correct language for the names of the months for axis labeling. &#xA;However I was able to reconstruct some strange and not tracable behaviors.&#xA;&#xA;So we try following on a fresh R-Console&#xA;```r&#xA;Sys.getlocale(&quot;LC_TIME&quot;)&#xA;Sys.setlocale(&quot;LC_TIME&quot;,  &quot;en_US&quot;)&#xA;library(ggplot2)&#xA;test&lt;-data.frame(a=runif(12), b=as.Date(paste(&quot;2012&quot;, 1:12, &quot;1&quot;, sep=&quot;-&quot;)))&#xA;ggplot(test, aes(b, a)) + geom_point() #Correct language on x-axis&#xA;months(test$b)&#xA;&#xA;Sys.setlocale(&quot;LC_TIME&quot;,  &quot;ru_RU&quot;)&#xA;test&lt;-data.frame(a=runif(12), b=as.Date(paste(&quot;2012&quot;, 1:12, &quot;1&quot;, sep=&quot;-&quot;)))&#xA;ggplot(test, aes(b, a)) + geom_point() #it stays english&#xA;months(test$b) #correct russian names&#xA;&#xA;&#xA;Sys.setlocale(&quot;LC_TIME&quot;,  &quot;de_DE&quot;)&#xA;test&lt;-data.frame(a=runif(12), b=as.Date(paste(&quot;2012&quot;, 1:12, &quot;1&quot;, sep=&quot;-&quot;)))&#xA;ggplot(test, aes(b, a)) + geom_point() #still english names&#xA;months(test$b) #correct german names&#xA;```&#xA;&#xA;Well im not really sure if it is a bug in ggplot2 or a strange implementation of language variables in R as R-Studio behaves a little different but as I also was able to create plots with German y-labels and English x-labels there might be somethig wrong in ggplot2.&#xA; &#xA; " />
      <Message Id="7475881" ParentId="593" UserId="86978" Date="08/03/2012 05:08:10" Content="This sounds like exactly the same issue as #592." />
      <Message Id="7584619" ParentId="593" UserId="86978" Date="08/08/2012 14:12:55" Content="Fixed in #643." />
    </Messages>
  </Topic>
  <Topic Id="594" Title="colour bar guides can correctly handle the expression labels">
    <Messages>
      <Message Id="0" ParentId="594" UserId="227097" Date="06/25/2012 16:31:10" Content="Passed all unit test and probably also visual test.&#xA;see this thread: https://groups.google.com/group/ggplot2/browse_thread/thread/3a9efa6d01b8500e&#xA;&#xA;but maybe the xxx_format should return the list of expression instead of list of call." />
      <Message Id="6569814" ParentId="594" UserId="227097" Date="06/26/2012 08:23:28" Content="```{ r }&#xA;p &lt;- qplot(1:10,  1:10,  colour = 1:10) + &#xA;  scale_colour_gradient(breaks = c(2,  5,  8),  labels = c(&quot;2^2&quot;,  &quot;2^3&quot;,  &quot;2^4&quot;))&#xA;&#xA;p + guides(colour = guide_legend(parse = TRUE))&#xA;p + guides(colour = guide_colourbar(parse = TRUE))&#xA;```" />
      <Message Id="6636865" ParentId="594" UserId="86978" Date="06/28/2012 17:59:50" Content="@kohske instead of merging master into these branches,  could you rebase the branch on top of the current master instead,  with `git rebase master mybranch`? I think this makes it easier to understand the changes made by each branch.&#xA;&#xA;" />
      <Message Id="6637090" ParentId="594" UserId="227097" Date="06/28/2012 18:08:20" Content="@wch done it. Is rebase safe in any case? I'm afraid that rebase may induce problem if someone already pull the branch,  but not sure though." />
      <Message Id="6638428" ParentId="594" UserId="86978" Date="06/28/2012 18:57:39" Content="@kohske,  I have done this many times and haven't had any problems yet. If someone does pulls your branch and then adds commits to it,  then it could cause problems for them -- it could make it harder to merge their changes back into your branch,  but these problems can still be fixed. In practice,  I don't think this is a big problem for ggplot2,  because it's been pretty uncommon for people to work off of someone else's branch.&#xA;&#xA;Rebasing the master branch would probably be a bad idea,  since a lot of people do pull master and work from it." />
      <Message Id="6638468" ParentId="594" UserId="227097" Date="06/28/2012 18:59:05" Content="@wch agreed. Then,  I don't need `git merge master` before `git rebase master mybranch`?" />
      <Message Id="6638592" ParentId="594" UserId="86978" Date="06/28/2012 19:03:52" Content="I think that's right -- you do not need a merge before the rebase." />
      <Message Id="6645789" ParentId="594" UserId="227097" Date="06/29/2012 00:53:51" Content="@wch Ok,  thanks." />
      <Message Id="6912489" ParentId="594" UserId="4196" Date="07/11/2012 16:51:46" Content="I don't think a parse argument is the right way to handle this - we should return calls from the trans object,  and the guides should correctly interpret them." />
      <Message Id="6923554" ParentId="594" UserId="227097" Date="07/11/2012 23:59:31" Content="@hadley could you tell in more details? I couldn't figure out the problem." />
      <Message Id="6923584" ParentId="594" UserId="86978" Date="07/12/2012 00:00:57" Content="I think you can use expressions directly here,  instead of passing in a string and parsing it." />
      <Message Id="7122682" ParentId="594" UserId="227097" Date="07/20/2012 05:30:43" Content="Does this commit still have a problem?" />
      <Message Id="7831671" ParentId="594" UserId="86978" Date="08/17/2012 18:53:57" Content="UPDATE: I was wrong about this working with master. Please see next comment.&#xA;&#xA;On the master branch with the latest version of scales,  labels can actually use expressions directly:&#xA;&#xA;```R&#xA;&#xA;p &lt;- qplot(1:10,  1:10,  colour = 1:10) + &#xA;  scale_colour_gradient(breaks = c(2,  5,  8),  labels = expression(2^2,  2^3,  2^4))&#xA;p&#xA;&#xA;p + guides(colour = &quot;legend&quot;)&#xA;```&#xA;&#xA;This is a slightly modified version of the example posted to the mailing list. It looks fine to me,  with superscripted exponents:&#xA;&#xA;```R&#xA;p &lt;- qplot(1:10,  1:10,  colour = 1:10) + &#xA;  scale_colour_gradient(trans='log10',  guide=guide_colorbar(),  &#xA;    breaks=trans_breaks('log10',  function(x) 10^x), &#xA;    labels=trans_format('log10',  math_format()))&#xA;p&#xA;```&#xA;&#xA;So,  is this problem already fixed?" />
      <Message Id="7833936" ParentId="594" UserId="86978" Date="08/17/2012 20:18:50" Content="In the previous comment,  I was right about expressions working with color bars,  but I was wrong about it working with the output of formatters like `math_format()`.&#xA;&#xA;To fix this,  I've adapted @kohske's code in commit 1567d9d76bd752b9f692127317739bd705a8da84." />
    </Messages>
  </Topic>
  <Topic Id="595" Title="geom_density: smoothing of groups is different">
    <Messages>
      <Message Id="0" ParentId="595" UserId="86978" Date="06/25/2012 18:44:07" Content="```R&#xA;# This is a data set where group1 has values between 0 and 0.1,  and&#xA;# group2 is all 0.&#xA;&#xA;set.seed(222)&#xA;dat &lt;- data.frame(x=c(runif(10,  max=0.1),  0,  0,  0),  g = c(rep(&quot;group1&quot;,  10),  rep(&quot;group2&quot;,  3)))&#xA;&#xA;# group2 looks flat relative to group1&#xA;ggplot(dat,  aes(x = x,  colour = g)) + geom_density()&#xA;&#xA;# Plotting group2 alone shows that it's not flat&#xA;ggplot(subset(dat,  g==&quot;group2&quot;),  aes(x = x,  colour = g)) + geom_density() +&#xA;  xlim(-2,  2)&#xA;```&#xA;&#xA;I think the problem is probably that the bandwidth is calculated separately for each data group,  and so they have very different smoothing levels.&#xA;&#xA;&#xA;I'm not sure whether this should be considered a feature or a bug." />
      <Message Id="6791803" ParentId="595" UserId="86978" Date="07/05/2012 21:51:19" Content="A very similar problem happens with stat_ydensity,  when one of the groups has all points at the same y value.&#xA;&#xA;```R&#xA;# mtcars data with all 4-cylinder models given 15 mpg&#xA;dat &lt;- mtcars&#xA;dat$mpg[ dat$cyl == 4 ] &lt;- 15&#xA;&#xA;ggplot(dat,  aes(x=factor(cyl),  y = mpg)) + geom_violin() + geom_point()&#xA;ggplot(dat,  aes(x=factor(cyl),  y = mpg)) + geom_violin(scale=&quot;count&quot;) + geom_point()&#xA;```&#xA;&#xA;I think the problem is that,  when all the points have the same value,  the bandwidth chosen by `density()` is arbitrary,  and it's a very different value than the values for the other groups. This can be seen by setting `trim=FALSE`:&#xA;&#xA;```R&#xA;ggplot(dat,  aes(x=factor(cyl),  y = mpg)) + geom_violin(trim=FALSE) + geom_point()&#xA;```&#xA;&#xA;The question is,  what bandwidth value do you use? What you want to use might depend on how the other groups are distributed,  so that the violins have somewhat-equal widths. To illustrate,  we can disperse the data for the 6 and 8 cylinder models by a factor of 10,  but leave the 4-cylinder models still all at the same value. This makes the 6 and 8 violins relatively narrower,  so the 4 violin is relatively wider,  even though the 4 violin hasn't changed at all.&#xA;&#xA;```R&#xA;# Disperse the data by a factor of 10&#xA;# 4-cylinder models are still all at 15&#xA;library(plyr)&#xA;dat2 &lt;- ddply(dat,  &quot;cyl&quot;,  transform,  mpg = (mpg - mean(mpg)) * 10 + mean(mpg))&#xA;&#xA;ggplot(dat2,  aes(x=factor(cyl),  y = mpg)) + geom_violin(trim=FALSE) + geom_point()&#xA;```&#xA;&#xA;One possible solution is to hard-code a width for these cases. But then this could throw off scaling to equal areas,  and scaling area relative to count.&#xA;" />
      <Message Id="6912328" ParentId="595" UserId="86978" Date="07/11/2012 16:46:10" Content="Maybe use this code from densityvis:&#xA;https://github.com/hadley/densityvis/blob/master/R/density-local.r" />
      <Message Id="6922666" ParentId="595" UserId="86978" Date="07/11/2012 23:10:20" Content="&#xA;It looks like there's different behavior when there's 1,  2,  or more observations for a group.&#xA;&#xA;&#xA;``` &#xA;set.seed(222)&#xA;dat &lt;- data.frame(x=c(runif(10,  max=0.1),  0,  0,  0),  g = c(rep(&quot;group1&quot;,  10),  rep(&quot;group2&quot;,  3)))&#xA;&#xA;# When group2 has 3 observations,  a line appears but it's not scaled appropriately&#xA;ggplot(dat,  aes(x = x,  colour = g)) + geom_density()&#xA;&#xA;# When group2 has 2 observations,  no line appears for group2&#xA;ggplot(dat[ 1:12,  ],  aes(x = x,  colour = g)) + geom_density()&#xA;&#xA;# When group2 has 1 observations,  error&#xA;ggplot(dat[ 1:11,  ],  aes(x = x,  colour = g)) + geom_density()&#xA;# Error in rowSums(vapply(x,  is.finite,  logical(nrow(x)))) : &#xA;#   'x' must be an array of at least two dimensions&#xA;# Error in UseMethod(&quot;scale_dimension&quot;) : &#xA;#   no applicable method for 'scale_dimension' applied to an object of class &quot;NULL&quot;&#xA;```&#xA;" />
      <Message Id="7437541" ParentId="595" UserId="4196" Date="08/01/2012 19:35:52" Content="I think this is also related to #629" />
      <Message Id="7495926" ParentId="595" UserId="4196" Date="08/03/2012 22:10:48" Content="To select a common bandwidth across all groups,  you can do something like this:&#xA;&#xA;```R&#xA;&#xA;  calculate_groups &lt;- function(.,  data,  scales,  bandwidth = NULL,  adjust = 1,  ...) { &#xA;    if (is.null(bandwidth)) { &#xA;      # Estimate bandwidth for each group separately,  then take the median&#xA;      bws &lt;- unlist(dlply(data,  &quot;group&quot;,  function(df) bw.SJ(df$x)))&#xA;      bandwidth &lt;- median(bws)&#xA;      &#xA;      message(&quot;stat_density: bandwidth not specified. Using: &quot;,  &#xA;        format(bandwidth,  digits = 3),  &quot; * &quot;,  format(adjust,  digits = 3))&#xA;     }&#xA;    &#xA;    .super$calculate_groups(.,  data,  scales,  &#xA;      bandwidth = bandwidth,  adjust = adjust,  ...)    &#xA;   }&#xA;```&#xA;&#xA;(along with similar changes to calculate)&#xA;&#xA;Taking the median is a rule of thumb that I read somewhere - it doesn't help in this case.  There's not enough data for `bw.SJ` to work (similar with `ucv` and `bcv` in `MASS`).  I think the real problem here is that the tails are trimmed off by default." />
      <Message Id="7495954" ParentId="595" UserId="4196" Date="08/03/2012 22:13:06" Content="Hmmm,  `trim = FALSE` is better,  but requires that the range be adjusted:&#xA;&#xA;```R&#xA;    bw &lt;- bw.nrd0(data$x)&#xA;&#xA;    range &lt;- scale_dimension(scales$x,  c(0,  0))&#xA;    if (!trim) { &#xA;      range &lt;- range + c(-1,  1) * 3 * bw&#xA;     }&#xA;```" />
      <Message Id="7496095" ParentId="595" UserId="4196" Date="08/03/2012 22:21:56" Content="This will require backward incompatible changes to fix properly,  so I'm going to move to `0.10`.&#xA;&#xA;It may be simpler to switch to using `locfit` (e.g. https://github.com/hadley/densityvis/blob/master/R/density-local.r) but this will have performance implications.&#xA;&#xA;" />
      <Message Id="35941125" ParentId="595" UserId="4196" Date="02/24/2014 21:28:06" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="596" Title="alpha does not work in geom_raster like it does in geom_tile">
    <Messages>
      <Message Id="0" ParentId="596" UserId="25964" Date="06/25/2012 20:50:55" Content="&#xA;    df &lt;- expand.grid(x = 1:5,  y = 1:5)&#xA;    df$z &lt;- rnorm(df$x)&#xA;    qplot(x,  y,  data=df,  geom = &quot;tile&quot;,  fill = z)&#xA;    # works as expected&#xA;    qplot(x,  y,  data=df,  geom = &quot;tile&quot;,  alpha = z)&#xA;&#xA;    # same as geom_tile&#xA;    qplot(x,  y,  data=df,  geom = &quot;raster&quot;,  fill = z)&#xA;    # UNEXPECTED not the same as geom tile&#xA;    qplot(x,  y,  data=df,  geom = &quot;raster&quot;,  alpha  = z)" />
    </Messages>
  </Topic>
  <Topic Id="597" Title="geom_raster now supports alpha (fixed #596)">
    <Messages>
      <Message Id="0" ParentId="597" UserId="227097" Date="06/25/2012 22:31:26" Content="Passed tests." />
      <Message Id="6612164" ParentId="597" UserId="86978" Date="06/27/2012 18:51:55" Content="Rebased,  squashed,  added NEWS,  and merged in c34750942c212427be188e4f4f2498c404e05f4c." />
    </Messages>
  </Topic>
  <Topic Id="598" Title="arrow of geom-path can be filled.">
    <Messages>
      <Message Id="0" ParentId="598" UserId="227097" Date="06/26/2012 01:17:06" Content="https://groups.google.com/forum/?fromgroups#!topic/ggplot2/QkdrXgj8tWk&#xA;&#xA;```{ r }&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=cyl))+&#xA;  geom_path(arrow=arrow(type=&quot;closed&quot;))&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=cyl,  fill = cyl))+&#xA;  geom_path(arrow=arrow(type=&quot;closed&quot;))&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=cyl,  fill = cyl))+&#xA;  geom_path(arrow=arrow(type=&quot;open&quot;))&#xA;```&#xA;&#xA;I set white as default,  in compatible with the previous behavior.&#xA;But maybe NA default,  i.e.,  transparent,  is better." />
      <Message Id="6587061" ParentId="598" UserId="4196" Date="06/26/2012 20:35:57" Content="And could you add a bullet to `NEWS` please?" />
      <Message Id="6587106" ParentId="598" UserId="227097" Date="06/26/2012 20:37:49" Content="Sure. I always forget that." />
      <Message Id="6594465" ParentId="598" UserId="4196" Date="06/27/2012 04:25:22" Content="Thanks!" />
      <Message Id="6594470" ParentId="598" UserId="4196" Date="06/27/2012 04:25:52" Content="Actually,  do we also need a similar fix for `geom_segment`? " />
      <Message Id="6594536" ParentId="598" UserId="227097" Date="06/27/2012 04:32:04" Content="Updated and tested for geom-segment." />
    </Messages>
  </Topic>
  <Topic Id="599" Title="Switch to external gtable package">
    <Messages>
      <Message Id="0" ParentId="599" UserId="86978" Date="06/26/2012 21:46:17" Content="This changes ggplot2 to use the external gtable package." />
      <Message Id="6588883" ParentId="599" UserId="86978" Date="06/26/2012 21:49:31" Content="Remaining:&#xA;&#xA;* Remove tests - check that they're in gtable package&#xA;* Using multiple legends doesn't seem to work,  e.g.: `dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=1,  c=1:3); ggplot(dat,  aes(x=x,  y=y,  fill=x,  colour=c)) + geom_point()`&#xA;* Make clear the name of each object&#xA;&#xA;" />
      <Message Id="6589322" ParentId="599" UserId="86978" Date="06/26/2012 22:08:21" Content="@kohske When I create multiple guides,  I get this error. Do you have any ideas where this is coming from?&#xA;&#xA;```R&#xA;dat &lt;- data.frame(x=LETTERS[ 1:3 ],  y=1,  c=1:3)&#xA;ggplot(dat,  aes(x=x,  y=y,  fill=x,  colour=c)) + geom_point()&#xA;# Error in grid.Call.graphics(L_downvppath,  name$path,  name$name,  strict) : &#xA;#   Viewport 'guide-1-2-2-2-2' was not found&#xA;# In addition: Warning messages:&#xA;# 1: In if (!(vp$parent$name %in% &quot;ROOT&quot;)) push.vp(vp$parent,  recording) :&#xA;#   the condition has length &gt; 1 and only the first element will be used&#xA;# 2: In while (!rootVP(pvp)) {  :&#xA;#   the condition has length &gt; 1 and only the first element will be used&#xA;# 3: In while (!rootVP(pvp)) {  :&#xA;#   the condition has length &gt; 1 and only the first element will be used&#xA;```" />
      <Message Id="6590179" ParentId="599" UserId="227097" Date="06/26/2012 22:50:21" Content="In general that's the problem of viewport when gtable contains gtable.&#xA;Here is the minimal example:&#xA;&#xA;```{ r }&#xA;grid.newpage()&#xA;&#xA;a &lt;- rectGrob(gp = gpar(fill = &quot;red&quot;))&#xA;b &lt;- circleGrob()&#xA;c &lt;- linesGrob()&#xA;&#xA;r1 &lt;- matrix(list(a,  b,  c),  nrow = 1)&#xA;r2 &lt;- matrix(list(c,  b,  a),  nrow = 1)&#xA;&#xA;gt1 &lt;- gtable_matrix(&quot;demo&quot;,  r1,  unit(c(1,  1,  1),  &quot;null&quot;),  unit(1,  &quot;null&quot;))&#xA;gt2 &lt;- gtable_matrix(&quot;demo&quot;,  r2,  unit(c(1,  1,  1),  &quot;null&quot;),  unit(1,  &quot;null&quot;))&#xA;&#xA;ggrobs &lt;- list(gt1,  gt2)&#xA;n &lt;- length(ggrobs)&#xA;&#xA;gt &lt;- gtable_row(name = paste(&quot;guide-&quot;,  seq(n),  sep = &quot;&quot;), &#xA;                 grobs = lapply(ggrobs,  gtable_gTree), &#xA;                 widths = unit(1,  &quot;null&quot;),  height = unit(c(1,  1),  &quot;null&quot;))&#xA;&#xA;grid.draw(gt)&#xA;```&#xA;&#xA;This is because `gtable_gList` edits the `vp` slot of element using the name given by the creation of gtable,  while there is no such viewport,  probably.&#xA;&#xA;I will look through gtable package later,  and probably will suggest solution.&#xA;" />
      <Message Id="6590207" ParentId="599" UserId="4196" Date="06/26/2012 22:51:58" Content="You should be able to completely delete `utilities-table.r` and `utilities-table-template.r`" />
      <Message Id="6590367" ParentId="599" UserId="227097" Date="06/26/2012 23:00:07" Content="Now gtable_gList edit the vp of children,  but why?" />
      <Message Id="6592088" ParentId="599" UserId="227097" Date="06/27/2012 00:51:26" Content="No,  sorry. this is relevant to `name = paste(&quot;guide-&quot;,  seq(n),  sep = &quot;&quot;)`,  which generates n-length vector.&#xA;" />
      <Message Id="6593028" ParentId="599" UserId="86978" Date="06/27/2012 02:15:47" Content="@hadley I was able to remove utilities-table-template.r,  but utilities-table.r contains `compute_grob_widths()` and heights,  which is called from `facet_render.wrap()`. I didn't find any equivalent functions in the gtable package." />
      <Message Id="6594305" ParentId="599" UserId="4196" Date="06/27/2012 04:10:29" Content="It seems like the fact we still need `compute_grob_widths` is a deficiency in the gtable api,  but I don't see an obvious easy way to fix it." />
      <Message Id="6595253" ParentId="599" UserId="86978" Date="06/27/2012 05:45:07" Content="Visual test results here (minus the two broken tests from the colorbar change): http://stdout.org/~winston/vtest-gtable/diff/&#xA;&#xA;Everything looks good to me,  except the last test in guide-position. The legend bounding boxes don't have the correct padding. The placement looks correct,  though.&#xA;" />
      <Message Id="6611695" ParentId="599" UserId="86978" Date="06/27/2012 18:33:36" Content="Rebased and merged in 6f8800a3613d6ffae430ca6d989429beea6ca8ff." />
    </Messages>
  </Topic>
  <Topic Id="600" Title="stat_sum doesn't sum but count">
    <Messages>
      <Message Id="0" ParentId="600" UserId="115336" Date="06/27/2012 12:19:23" Content="Hi, &#xA;&#xA;First of all,  I'm really impressed with ggplot2.&#xA;&#xA;I'm trying to use stat_sum to sum  data &#xA;&#xA;Currently I'm doing something like&#xA;    &#xA;     dd &lt;- ddply(d,  .(x, y),  transform,  z=sum(z))&#xA;     qplot(x, y,  data=dd,  size=z)&#xA;&#xA;but I feel I'm writting the same thing twice. It seems also that that's what stat_sum or stat_summary are made for?&#xA;But the only thing I can get from stat_sum is a count,  not a real sum.  Does stat_sum or anything else can do it ,  or should I group/aggregate my data beforehand ?&#xA;&#xA;Thanks" />
      <Message Id="6644139" ParentId="600" UserId="86978" Date="06/28/2012 22:55:12" Content="Hi,  I think this is a question that's probably more appropriate for the ggplot2 mailing list: https://groups.google.com/forum/?fromgroups#!forum/ggplot2" />
    </Messages>
  </Topic>
  <Topic Id="601" Title="Scales free for margins only">
    <Messages>
      <Message Id="0" ParentId="601" UserId="1763278" Date="06/27/2012 15:11:10" Content="I asked a question regarding the use of `scales = free` for margins only on stack overflow and was told this may be a related but easier to implement  feature request issue 187 [ (outstanding feature request LINK) ](https://github.com/hadley/ggplot2/issues/187).  Rather than repeating that question I figured I'd just link to here. [ click here for LINK to my scales free for margins only question ](http://stackoverflow.com/questions/10585463/ggplot2-free-the-margins-constrain-the-rest)" />
      <Message Id="35941139" ParentId="601" UserId="4196" Date="02/24/2014 21:28:15" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="602" Title="bug-fix">
    <Messages>
      <Message Id="0" ParentId="602" UserId="4196" Date="06/27/2012 17:24:24" Content="" />
    </Messages>
  </Topic>
  <Topic Id="603" Title="Axis line above panel">
    <Messages>
      <Message Id="0" ParentId="603" UserId="86978" Date="06/28/2012 06:51:14" Content="This fixes #585. It requires some modifications to gtable.&#xA;&#xA;Regular and `facet_wrap` work:&#xA;&#xA;```R&#xA;qplot(wt, mpg, colour=hp,  data=mtcars) + &#xA;    theme(axis.line = element_line(colour='black',  lineend='square',  size=4))&#xA;&#xA;qplot(wt, mpg, colour=hp,  data=mtcars) + &#xA;    theme(axis.line = element_line(colour='black',  lineend='square',  size=4)) +&#xA;    facet_wrap(~cyl)&#xA;```&#xA;&#xA;However,  `facet_grid` still doesn't work properly. I think there needs to be a good way to edit the z values (in `facet_render.grid`) after the gtable has been created.&#xA;&#xA;```R&#xA;qplot(wt, mpg, colour=hp,  data=mtcars) + &#xA;    theme(axis.line = element_line(colour='black',  lineend='square',  size=4)) +&#xA;    facet_grid(am~cyl)&#xA;```" />
      <Message Id="6784443" ParentId="603" UserId="86978" Date="07/05/2012 17:02:53" Content="Rebased onto master and merged at 13664066ecfc92294d28530d5bed6f0a843c0de3." />
    </Messages>
  </Topic>
  <Topic Id="604" Title="Warning messages when printing ggplot">
    <Messages>
      <Message Id="0" ParentId="604" UserId="565492" Date="06/28/2012 23:08:02" Content="We are interested in reproducing the functionality as noted here: http://stackoverflow.com/questions/11179666/ggplot2-raster-plotting-does-not-work-as-expected-when-setting-alpha-values&#xA;&#xA;We needed to get the latest version of ggplot2 to get this going so we did this:&#xA;&#xA;install.packages(&quot;devtools&quot;)&#xA;library(devtools)&#xA;dev_mode(on=T)&#xA;install_github(&quot;gtable&quot;)&#xA;install_github(&quot;ggplot2&quot;)&#xA;&#xA;When running this command:&#xA;```&#xA;#   Plot DEM layer with ggplot()&#xA;p1 &lt;- ggplot()+&#xA;  layer(geom=&quot;raster&quot;, data=ddf, mapping=aes(X, Y, fill=DEM))+&#xA;  scale_fill_gradientn(name=&quot;Altitude&quot;, colours = rainbow(100), breaks=b.dem)+&#xA;  scale_x_continuous(name=expression(paste(&quot;Longitude (&quot;, degree, &quot;)&quot;)), limits=c(-4, 2), expand=c(0, 0))+&#xA;  scale_y_continuous(name=expression(paste(&quot;Latitude (&quot;, degree, &quot;)&quot;)), limits=c(4, 12), expand=c(0, 0))+&#xA;  coord_equal()&#xA;print(p1)&#xA;```&#xA;&#xA;we get this error/warning messages:&#xA;&#xA;&gt;There were 37 warnings (use warnings() to see them)&#xA;&gt;There were 50 or more warnings (use warnings() to see the first 50)&#xA;warning()&#xA;Warning messages:&#xA;1: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),   ... :&#xA;  Font family not found in Windows font database&#xA;2: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),   ... :&#xA;  Font family not found in Windows font database&#xA;3: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),   ... :&#xA;  Font family not found in Windows font database&#xA;4: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),   ... :&#xA;.....&#xA;&#xA;and get this image as the output: &#xA;&#xA;https://dl.dropbox.com/u/43697/temp/r_error.jpg&#xA;&#xA;Any insights as to what's going on here?&#xA;&#xA;We've tried this in two different machines and we get the same behavior.&#xA;&#xA;" />
      <Message Id="6711213" ParentId="604" UserId="4196" Date="07/02/2012 15:27:44" Content="Hmmm,  weird.  Could you send the output of `sessionInfo()`?  @wch do you have any ideas?" />
      <Message Id="6714415" ParentId="604" UserId="565492" Date="07/02/2012 17:26:12" Content="I ran an update on ggplot2,  raster,  gdal,  and other packages and the script seems to be working now. Thank you." />
      <Message Id="74288938" ParentId="604" UserId="3031952" Date="02/13/2015 17:11:34" Content="When I run:&#xD;&#xA;surgeryData &lt;- read.delim(&quot;http://www.statisticshell.com/r_files/Cosmetic%20Surgery.dat&quot;,   header = TRUE)&#xD;&#xA;ggplot(data = surgeryData,  aes(x = Base_QoL,  y = Post_QoL)) + theme(title = element_text(&quot;a&quot;)) + geom_point(aes(colour = Surgery_Text)) + geom_smooth(aes(colour = Surgery_Text),  method = &quot;lm&quot;,  se = F) + facet_wrap(facets = ~Clinic,  ncol = 5) + labs(x = &quot;Quality of Life (Baseline)&quot;,  y = &quot;Quality of Life (After Surgery)&quot;)&#xD;&#xA;&#xD;&#xA;I get:&#xD;&#xA;Warning messages:&#xD;&#xA;1: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;2: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;3: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;4: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;5: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;&#xD;&#xA;sessionInfo():&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 digest_0.6.8     grid_3.1.1       gtable_0.1.2     labeling_0.3     MASS_7.3-37     &#xD;&#xA; [ 7 ] munsell_0.4.2    plyr_1.8.1       proto_0.3-10     Rcpp_0.11.4      reshape2_1.4.1   scales_0.2.4    &#xD;&#xA;[ 13 ] stringr_0.6.2    tools_3.1.1     &#xD;&#xA;Warning messages:&#xD;&#xA;1: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;2: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;3: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;4: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;5: In grid.Call(L_textBounds,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;6: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;7: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database&#xD;&#xA;8: In grid.Call.graphics(L_text,  as.graphicsAnnot(x$label),  x$x,  x$y,   :&#xD;&#xA;  font family not found in Windows font database" />
    </Messages>
  </Topic>
  <Topic Id="605" Title="Make sure there is enough padding with extended_breaks()">
    <Messages>
      <Message Id="0" ParentId="605" UserId="86978" Date="07/03/2012 16:00:28" Content="In the current master branch,  the use of `extended_breaks()` sometimes results in breaks at the extremes of a scale. This can look bad with facets because the tick labels for adjacent facets can be very close to each other.&#xA;&#xA;```R&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg,  colour=hp)) + geom_point() + facet_grid(am~cyl)&#xA;```" />
      <Message Id="35941218" ParentId="605" UserId="4196" Date="02/24/2014 21:29:01" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="606" Title="Convert guide_axis from frameGrob to gtable">
    <Messages>
      <Message Id="0" ParentId="606" UserId="86978" Date="07/04/2012 17:10:46" Content="Also run timings on plots before and after." />
      <Message Id="6787496" ParentId="606" UserId="86978" Date="07/05/2012 19:00:22" Content="This is going to be tough. With a frameGrob,  you can set the `just` of grobs inside -- in this case,  the `labels` grob is created so that the text has its own `hjust` and `vjust` values,  and then the `labels` grob is put inside the `frameGrob` with a separate `just` value (top/bottom/left/right). This makes it possible for separate facets to have the labels+ticks all justified to the top,  for the x axis.&#xA;&#xA;With gtable,  all the grobs in a row are centered. This is fine if they all have the same width and height,  but if they are different sizes,  it's impossible to justify all of the separate grobs to the top. Because the ticks+labels in each facet are created independently,  they can't be all set to the same size,  and it's impossible to top-justify them all.&#xA;&#xA;This illustrates the problem with facets:&#xA;&#xA;```R&#xA;&#xA;mpg2 &lt;- subset(mpg,  manufacturer %in% c(&quot;honda&quot;,  &quot;volkswagen&quot;))&#xA;&#xA;qplot(reorder(model,  hwy),  hwy,  data=mpg2) +&#xA;  facet_grid(. ~ manufacturer,  scales=&quot;free&quot;) +&#xA;  theme(axis.text.x = element_text(angle=90,  hjust=1,  vjust=0.5))&#xA;```&#xA;&#xA;This shows how gtable centers the grobs in each cell:&#xA;&#xA;```R&#xA;library(gtable)&#xA;&#xA;grob1 &lt;- rectGrob(width=unit(1, &quot;cm&quot;),  height=unit(1, &quot;cm&quot;))&#xA;grob2 &lt;- rectGrob(width=unit(.5, &quot;cm&quot;),  height=unit(.5, &quot;cm&quot;))&#xA;grobmat &lt;- matrix(list(grob1,  grob1,  grob1,  grob2,  grob1,  grob1),  nrow=2)&#xA;&#xA;gt &lt;- gtable_matrix(&quot;test&quot;,  grobmat, &#xA;  widths=unit(c(1, 1, 1), &quot;cm&quot;),  heights=unit(c(1, 1), &quot;cm&quot;) )&#xA;&#xA;plot(gt)&#xA;```&#xA;&#xA;This example is like the facets. The squares in the bottom row represent each facet's axis labels and ticks. They can be different sizes,  and they presently can't communicate their sizes with each other. What's needed is a way to top-justify the middle box." />
      <Message Id="6791202" ParentId="606" UserId="18970" Date="07/05/2012 21:30:12" Content="Last time I discussed justification with Hadley,  it was suggested to write a function that embeds a grob in a gTree. Consider this, &#xA;&#xA;```r&#xA;library(gtable)&#xA;&#xA;a &lt;- gtable(unit(5,  &quot;cm&quot;),  unit(c(3,  1),  &quot;cm&quot;))&#xA;&#xA;g1 &lt;- rectGrob(gp = gpar(lty=3,  fill=&quot;blue&quot;,  alpha=0.2))&#xA;&#xA;## doesn't work,  presumably vp is modified by gtable&#xA;g2 &lt;- xaxisGrob(seq(0,  1,  by=0.1),  vp=viewport(y=1,  just=&quot;bottom&quot;))&#xA;&#xA;## embedding in a gTree works,  as the child viewport is not overwritten&#xA;g2 &lt;- gTree(children=gList(xaxisGrob(seq(0,  1,  by=0.1), &#xA;              vp=viewport(y=1,  just=&quot;bottom&quot;))))&#xA;&#xA;a &lt;- gtable_add_grob(a,  g1,  1,  1)&#xA;a &lt;- gtable_add_grob(a,  g2,  2,  1)&#xA;plot(a)&#xA;```&#xA;&#xA;I'm still not convinced that gtable shouldn't support justification,  precisely because of such cases. " />
      <Message Id="6792132" ParentId="606" UserId="86978" Date="07/05/2012 22:05:25" Content="Ah,  I didn't know about the viewport justification with gTree." />
      <Message Id="6795473" ParentId="606" UserId="227097" Date="07/06/2012 01:50:38" Content="`gtable_layout` may respect some parameters of child nodes if exists." />
      <Message Id="6795621" ParentId="606" UserId="86978" Date="07/06/2012 02:04:33" Content="@kohske,  I know it's possible to set the justification of a rectGrob (with `just=&quot;botttom&quot;`),  but in this case,  the ticks and labels are put together in a `gList`,  which doesn't have a justification setting. But maybe Baptiste's method of wrapping in in a `gTree` with the `viewport` argument will work here." />
      <Message Id="6795683" ParentId="606" UserId="227097" Date="07/06/2012 02:10:31" Content="@wch I'm not sure if that will work well when `gtable` contains `gtable`.&#xA;Actually this was the case when I wrote legend guides.&#xA;You can find dirty hack around here: https://github.com/hadley/ggplot2/blob/master/R/plot-render.r#L87&#xA;&#xA;" />
      <Message Id="6808951" ParentId="606" UserId="86978" Date="07/06/2012 15:59:37" Content="&#xA;I've played with baptiste's code,  and it does look like you need to set the `vp` for a grob,  then wrap it in a gTree.&#xA;&#xA;This should plot a row of boxes,  then a row of red circles. The goal is to shift the circles up,  away from center.&#xA;&#xA;```R&#xA;grob1 &lt;- rectGrob(width=unit(1, &quot;cm&quot;),  height=unit(1, &quot;cm&quot;))&#xA;grob2 &lt;- circleGrob(r=unit(.25, &quot;cm&quot;),  gp = gpar(fill=&quot;red&quot;),  just=&quot;bottom&quot;)&#xA;grob3 &lt;- circleGrob(r=unit(.25, &quot;cm&quot;),  gp = gpar(fill=&quot;red&quot;),  vp = viewport(y=.5,  just=&quot;bottom&quot;))&#xA;grob4 &lt;- grobTree(grob3)&#xA;&#xA;&#xA;gt &lt;- gtable(widths=unit(c(1, 1, 1), &quot;cm&quot;),  heights=unit(c(1, 1), &quot;cm&quot;) )&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  1)&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  2)&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  3)&#xA;gt &lt;- gtable_add_grob(gt,  grob2,  2,  1) # Centered&#xA;gt &lt;- gtable_add_grob(gt,  grob3,  2,  2) # Centered&#xA;gt &lt;- gtable_add_grob(gt,  grob4,  2,  3) # Shifted up&#xA;gt&#xA;plot(gt)&#xA;```&#xA;&#xA;" />
      <Message Id="6811464" ParentId="606" UserId="86978" Date="07/06/2012 17:33:56" Content="OK,  I think I've distilled the problem. The challenge,  for anyone brave enough,  is to figure out how to justify the blue sub-table to the top of the cell in the example below.&#xA;&#xA;I'm creating a large 2x3 gtable,  then embedding two smaller 2x1 gtables into it. One of the sub-tables (red) is 2x1,  and takes up the entire cell that it's in. The other sub-table (blue) is 2x1,  and is only half the height of the cell that it's in.&#xA;&#xA;```R&#xA;grob1 &lt;- rectGrob()&#xA;grob2 &lt;- rectGrob(gp = gpar(fill=&quot;pink&quot;,  col=&quot;black&quot;))&#xA;grob3 &lt;- rectGrob(gp = gpar(fill=&quot;lightblue&quot;,  col=&quot;black&quot;))&#xA;&#xA;# The main 2x3 table,  with rect grobs on top row&#xA;gt &lt;- gtable(widths=unit(c(2, 2, 2, 2), &quot;cm&quot;),  heights=unit(c(2, 2), &quot;cm&quot;) )&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  1)&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  2)&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  3)&#xA;gt &lt;- gtable_add_grob(gt,  grob1,  1,  4)&#xA;gtable_show_layout(gt)&#xA;&#xA;&#xA;# a 2x1 sub-table,  with full (2cm) height,  with red grobs&#xA;subgt1 &lt;- gtable(widths=unit(2, &quot;cm&quot;),  heights=unit(c(1, 1), &quot;cm&quot;))&#xA;subgt1 &lt;- gtable_add_grob(subgt1,  grob2,  1,  1)&#xA;subgt1 &lt;- gtable_add_grob(subgt1,  grob2,  2,  1)&#xA;gtable_show_layout(subgt1)&#xA;&#xA;# a 2x1 sub-table with half (1cm) height,  with blue grubs&#xA;subgt2 &lt;- gtable(widths=unit(2, &quot;cm&quot;),  heights=unit(c(0.5, 0.5), &quot;cm&quot;))&#xA;subgt2 &lt;- gtable_add_grob(subgt2,  grob3,  1,  1)&#xA;subgt2 &lt;- gtable_add_grob(subgt2,  grob3,  2,  1)&#xA;gtable_show_layout(subgt2)&#xA;&#xA;&#xA;# Embed the first (larger) subtable into gt&#xA;gt &lt;- gtable_add_grob(gt,  gtable_gTree(subgt1),  2,  1)&#xA;&#xA;# Embed the second (smaller) subtable into gt&#xA;gt &lt;- gtable_add_grob(gt,  gtable_gTree(subgt2),  2,  2)&#xA;&#xA;gt&#xA;plot(gt)&#xA;```&#xA;&#xA;&#xA;It seems possible to use `vp` if you wrap it in a grobTree,  but I haven't figured out how to justify things properly. &#xA;&#xA;```R&#xA;# No effect&#xA;gt &lt;- gtable_add_grob(gt,  gtable_gTree(subgt2,  vp=viewport(just=&quot;bottom&quot;)),  2,  3)&#xA;&#xA;# Wrapping in another grobTree works.&#xA;# But this justifies _center_ of subtable to top of cell&#xA;gt &lt;- gtable_add_grob(gt,  grobTree(gtable_gTree(subgt2,  vp=viewport(just=&quot;bottom&quot;))),  2,  4)&#xA;&#xA;plot(gt)&#xA;```&#xA;&#xA;Again,  the goal is to justify the blue table to the top of its containing cell.&#xA;&#xA;If you try to solve it,  note that there's a bug in gtable where,  if you have two grobs in the same cell,  only the first one will render. Basically,  this means that you can't add a grob to a cell if something is already there -- you have to rebuild the whole gtable.&#xA;" />
      <Message Id="6813230" ParentId="606" UserId="227097" Date="07/06/2012 18:49:52" Content="Here is the way:&#xA;&#xA;gt &lt;- gtable_add_grob(gt,  grobTree(gtable_gTree(subgt2,  vp=viewport(just=&quot;bottom&quot;,  y = 0,  height = unit(1,  &quot;cm&quot;)))),  2,  4)&#xA;&#xA;basically you need to set the size of the child.&#xA;And this is similar to what I do in the plot-render: https://github.com/hadley/ggplot2/blob/master/R/plot-render.r#L87&#xA;" />
      <Message Id="6813301" ParentId="606" UserId="227097" Date="07/06/2012 18:52:11" Content="`height = sum(subgt2$heights)` is okey so gtable can wisely handle this problem." />
      <Message Id="6813654" ParentId="606" UserId="86978" Date="07/06/2012 19:06:01" Content="Thanks - I wish we didn't need either (a) the absolute dimension `unit(1,  &quot;cm&quot;)`,  or (b) going into the `subgt2` data structure directly with `subgt2$heights`. I may end up using the second method anyway.&#xA;&#xA;Hadley suggested modifying `gtable_viewport` so that each viewport knows exactly how big it should be,  but I haven't investigated this yet." />
      <Message Id="6814128" ParentId="606" UserId="227097" Date="07/06/2012 19:26:46" Content="Here is the example without wrapping another gTree:&#xA;&#xA;```r&#xA;&#xA;p &lt;- gtable_gTree(subgt2)&#xA;p$childrenvp$parent$y &lt;- unit(0,  &quot;npc&quot;)&#xA;p$childrenvp$parent$height &lt;- sum(subgt2$heights)&#xA;p$childrenvp$parent$justification &lt;- &quot;bottom&quot;&#xA;p$childrenvp$parent$valid.just &lt;- valid.just(&quot;bottom&quot;)&#xA;gt &lt;- gtable_add_grob(gt,  p,  2,  3)&#xA;&#xA;plot(gt)&#xA;```&#xA;&#xA;but it would be better that the gtable_viewport set the new viewport by respecting some params of the children." />
      <Message Id="6814832" ParentId="606" UserId="227097" Date="07/06/2012 19:57:24" Content="Here is the possible modification:&#xA;&#xA;```r&#xA;&#xA;gtable_viewport &lt;- function(x,  vp = NULL) { &#xA;  if (!is.null(vp)) { &#xA;    # respect&#xA;    vp$layout &lt;- gtable_layout(x)&#xA;    vp$name &lt;- x$name&#xA;    layout_vp &lt;- vp&#xA;   } else { &#xA;    layout_vp &lt;- viewport(layout = gtable_layout(x),  name = x$name)&#xA;   }&#xA;  vp &lt;- function(i) { &#xA;    vp &lt;- x$layout[ i,   ]&#xA;    viewport(&#xA;      name = vpname(vp),  &#xA;      layout.pos.row = vp$t:vp$b,  &#xA;      layout.pos.col = vp$l:vp$r,  &#xA;      clip = vp$clip&#xA;    )&#xA;   }&#xA;  children_vp &lt;- do.call(&quot;vpList&quot;,  lapply(seq_along(x$grobs),  vp))&#xA;  vpTree(layout_vp,  children_vp)&#xA; }&#xA;&#xA;&#xA;gtable_gTree &lt;- function(x,  vp  = NULL,  ...) { &#xA;  if (length(x) == 0) return(nullGrob())&#xA;&#xA;  children &lt;- gtable_gList(x)&#xA;  vp &lt;- gtable_viewport(x,  vp)&#xA;  gTree(children = children,  childrenvp = vp,  ...)&#xA; }&#xA;&#xA;```&#xA;&#xA;then, &#xA;&#xA;```r&#xA;p &lt;- gtable_gTree(subgt2,  &#xA;                  vp = viewport(y = 0,  height = sum(subgt2$heights),  just = &quot;bottom&quot;))&#xA;gt &lt;- gtable_add_grob(gt,  p,  2,  3)&#xA;```&#xA;" />
      <Message Id="6816352" ParentId="606" UserId="18970" Date="07/06/2012 21:12:06" Content="FWIW I much prefer that last one,  personally. Forcing the use of absolute units sounds too limiting,  and wrapping in a gTree is just ugly." />
      <Message Id="6827290" ParentId="606" UserId="86978" Date="07/07/2012 22:54:05" Content="I have a few thoughts,  not particularly well organized:&#xA;&#xA;@kohske I'm not sure it makes sense to have `gtable_gTree()` treat the `vp` argument differently from `gTree()`. In this case,  it uses `vp` to modify the `childrenvp` argument that's passed to `gTree()`,  right? With this method,  a gtable object will respect the `vp` argument for `gtable_gTree()`,  but not the `vp` argument for `gTree()`.&#xA;&#xA;If we wanted to go in this direction,  I think it would be better to make gtable respect the `vp` of grobs in general,  without requiring a `gTree` wrapper.&#xA;&#xA;&#xA;Another thought: it would be nice to have a general justification wrapper function,  something roughly like this:&#xA;&#xA;```R&#xA;grob_justify &lt;- function(grob,  just = &quot;center&quot;) { &#xA;  vp &lt;- switch(just, &#xA;    top    = viewport(y = 1,  height = grobWidth(grob),   just = &quot;left&quot;), &#xA;    right  = viewport(x = 1,  height = grobWidth(grob),   just = &quot;right&quot;), &#xA;    bottom = viewport(y = 0,  height = grobHeight(grob),  just = &quot;bottom&quot;), &#xA;    left   = viewport(x = 0,  height = grobHeight(grob),  just = &quot;top&quot;), &#xA;  )&#xA;&#xA;  grobTree(grob,  vp = vp)&#xA; }&#xA;&#xA;# Then you could do something like:&#xA;gt &lt;- gtable_add_grob(gt,  grob_justify(g2,  just=&quot;bottom&quot;),  2,  3)&#xA;```&#xA;&#xA;The problem is that `grobWidth` and `grobHeight` don't seem to work with gTree objects,  such as the ones returned by `gtable_gTree()`. Is this because the grobs within a gTree can be in different viewports? I don't understand it well enough to know...&#xA;&#xA;If it's impossible to write a function for justifying grobs in general,  another possibility is to have:&#xA;&#xA;* a function that justifies basic grobs (like rectGrob,  circleGrob,  etc) which work with `grobHeight`&#xA;* a function that justifies gtable objects for embedding in other gtables. For example,  you pass in a gtable,  and it returns something like `grobTree(gtable_gTree(x,  vp = viewport(y=0,  height=sum(x$heights),  just=&quot;bottom&quot;))`&#xA;" />
      <Message Id="6827371" ParentId="606" UserId="227097" Date="07/07/2012 23:07:23" Content="For ordinary grobs,  the justification is easy. So I'm talking about gtable in gtable.&#xA;&#xA;&gt;  With this method,  a gtable object will respect the vp argument for gtable_gTree(),  but not the vp argument for gTree().&#xA;&#xA;There is no `gTree` object before  calling `gtable_gTree`&#xA;&#xA;I think we can handle gtable and grobs for children of gtable in the same way." />
      <Message Id="6827402" ParentId="606" UserId="18970" Date="07/07/2012 23:12:32" Content="&#xA;&gt; The problem is that `grobWidth` and `grobHeight` don't seem to work with gTree objects,  such as the ones returned by `gtable_gTree()`. Is this because the grobs within a gTree can be in different viewports?&#xA;&#xA;I think the issue is that widthDetails.gTree is basically an empty default. If you give a class to the gTree you can then define your own method to calculate the size, &#xA;&#xA;```r&#xA;library(grid)&#xA;&#xA;g1 &lt;- rectGrob(width = unit(2,  &quot;cm&quot;))&#xA;g2 &lt;- textGrob(&quot;this text is somewhat longer&quot;)&#xA;g &lt;- gTree(children = gList(g1,  g2),  cl = &quot;test&quot;)&#xA;&#xA;convertWidth(grobWidth(g),  &quot;cm&quot;)&#xA;# [ 1 ] 0cm&#xA;&#xA;widthDetails.test &lt;- function(x)&#xA;  do.call(max,  lapply(x$children,  grobWidth))&#xA;&#xA;convertWidth(grobWidth(g),  &quot;cm&quot;)&#xA;# [ 1 ] 6.70277777777778cm&#xA;&#xA;```&#xA;&#xA;If there are multiple children,  of course the question of the size is non-trivial (their positions may be offset,  some may have relative units,  or undefined size,  etc.)" />
      <Message Id="6827927" ParentId="606" UserId="227097" Date="07/08/2012 00:49:56" Content="`gtable` may have options x,  y,  just = just,  hjust = hjust,  vjust = vjust,  rot = rot as in the other grobs.&#xA;And grobHeight.gtable/grobWidth.gtable can be defined.&#xA;They are something like:&#xA;&#xA;```&#xA;&#xA;function (x) &#xA;{ &#xA;    sum(x$heights)&#xA; }&#xA;```&#xA;" />
      <Message Id="6834117" ParentId="606" UserId="86978" Date="07/08/2012 20:05:20" Content="@baptiste,  I can see why it would be difficult/impossible to get the height of a regular gTree. It seems like the gTree returned by gtable_gTree is a special case where it is possible to get the height. Maybe another class should be added to those objects.&#xA;&#xA;@kohske,  I like that approach in general,  but I don't think it should be called grobHeight.gtable,  if it takes a gtable as an input,  since a gtable is not a grob." />
      <Message Id="6834324" ParentId="606" UserId="18970" Date="07/08/2012 20:31:17" Content="&gt; since a gtable is not a grob.&#xA;&#xA;btw,  is there a good reason that it isn't? That would certainly simplify the vocabulary (e.g the non-standard gtable_gTree,  this class issue,  etc.)" />
      <Message Id="6834405" ParentId="606" UserId="18970" Date="07/08/2012 20:40:13" Content="also,  I have a feeling that it should be `heightDetails.xxx` not `grobHeight.xxx`,  though it is very difficult to find a reason why the former is preferred in Paul's book (and code). I believe it has something to do with on-the-fly calculations when you resize an interactive device." />
    </Messages>
  </Topic>
  <Topic Id="607" Title="Add Winston to authors in DESCRIPTION">
    <Messages>
      <Message Id="0" ParentId="607" UserId="4196" Date="07/04/2012 19:21:00" Content="" />
      <Message Id="7084759" ParentId="607" UserId="86978" Date="07/18/2012 22:44:04" Content="Fixed in f91803b85f9cac594753cad8e3e4c0bd2546c949." />
    </Messages>
  </Topic>
  <Topic Id="608" Title="linetype in legend of geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="608" UserId="227097" Date="07/05/2012 08:09:52" Content="https://groups.google.com/forum/?fromgroups#!topic/ggplot2/eLpznvWZe7k" />
    </Messages>
  </Topic>
  <Topic Id="609" Title="Adding linetype to boxplot legend">
    <Messages>
      <Message Id="0" ParentId="609" UserId="1146990" Date="07/05/2012 16:11:13" Content="This fixes #608. Code fix was provided by Kohske Takahashi." />
      <Message Id="6784286" ParentId="609" UserId="86978" Date="07/05/2012 16:57:30" Content="Looks good - in the future,  it would be better to do the commit message a little differently: use a short description on the first line,  then add a blank line,  then add any other notes below that,  and hard-wrap the lines. Something like this:&#xA;&#xA;&#xA;```&#xA;Adding linetype functionality to boxplot legends. Fixes #608.&#xA;&#xA;Code fix was provided by Kohske Takahashi. Any other notes go here,  with&#xA;hard-wrapping of long lines.&#xA;```" />
      <Message Id="6784385" ParentId="609" UserId="86978" Date="07/05/2012 17:00:44" Content="I've rebased this patch onto master,  at 3e9c42bcfd7d2c367048b791d094ba05cb9245ea." />
    </Messages>
  </Topic>
  <Topic Id="610" Title="scale_rank">
    <Messages>
      <Message Id="0" ParentId="610" UserId="4196" Date="07/05/2012 16:32:58" Content="Moved from hadley/scales#13&#xA;&#xA;Should map data values to their ranks." />
      <Message Id="35941232" ParentId="610" UserId="4196" Date="02/24/2014 21:29:06" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="611" Title="Grob name change results in duplicated (and missing) geoms">
    <Messages>
      <Message Id="0" ParentId="611" UserId="86978" Date="07/05/2012 21:25:06" Content="The change in 0719eedf48668ea83950e6111d8c64f5bc175b4a changed the rendering of some geoms.&#xA;&#xA;See the visual tests comparing that commit to its parent:&#xA;http://stdout.org/~winston/vtest/diff/&#xA;&#xA;It appears that a single geom is being drawn multiple times. For example,  in the polar tests,  there should be six &quot;pie slices&quot; but there is only one -- but the edge looks jagged,  suggesting that it's there are multiple wedges with the exact same dimensions being plotted on top of each other. Also,  some of the dotplot tests are semi-transparent,  and they have become more opaque." />
      <Message Id="6807123" ParentId="611" UserId="86978" Date="07/06/2012 14:54:33" Content="I reverted 03a796248fab32e2d1e84b91da933bce31a8d011." />
    </Messages>
  </Topic>
  <Topic Id="612" Title="Ability to make axis labels for facet factor levels">
    <Messages>
      <Message Id="0" ParentId="612" UserId="379357" Date="07/06/2012 16:35:59" Content="I was looking for this ability recently as some of my facet factor levels are numeric so the actual strip text isn't very helpful for viewers unless they can tell by the numeric levels which variable combination they're looking at.&#xA;&#xA;The question was actually just asked on SO: http://stackoverflow.com/questions/11353287/how-do-you-add-a-general-label-to-facets-in-ggplot2&#xA;&#xA;There are a couple of similar questions linked in the question and in the comments. The question provides a  nice mockup of what this option would produce if the above wasn't clear." />
      <Message Id="6834055" ParentId="612" UserId="86978" Date="07/08/2012 19:59:11" Content="This discussion may also be of interest:&#xA;https://groups.google.com/forum/?fromgroups#!topic/ggplot2-dev/_gpWsOWrSDk" />
      <Message Id="6836677" ParentId="612" UserId="379357" Date="07/09/2012 00:50:27" Content="I linked to it on the SO question as well. Thanks!&#xA;&#xA;John&#xA;&#xA;On Sun,  Jul 8,  2012 at 2:59 PM,  Winston Chang&#xA;&lt;reply@reply.github.com&gt;&#xA;wrote:&#xA;&gt; This discussion may also be of interest:&#xA;&gt; https://groups.google.com/forum/?fromgroups#!topic/ggplot2-dev/_gpWsOWrSDk&#xA;&gt;&#xA;&gt; ---&#xA;&gt; Reply to this email directly or view it on GitHub:&#xA;&gt; https://github.com/hadley/ggplot2/issues/612#issuecomment-6834055" />
      <Message Id="10948991" ParentId="612" UserId="562380" Date="12/03/2012 11:10:40" Content="A similar feature request,  nested sets of factors levels on the model axis.&#xD;&#xA;&#xD;&#xA;https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/UbSzepDnJ24&#xD;&#xA;&#xD;&#xA;SantiM." />
      <Message Id="35941258" ParentId="612" UserId="4196" Date="02/24/2014 21:29:20" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="613" Title="Correct order of facets when adding layers. Fixes #543">
    <Messages>
      <Message Id="0" ParentId="613" UserId="86978" Date="07/08/2012 21:40:40" Content="This fixes #543. The reason this works is because a call to `ldply()` in `layout_base()`:&#xA;&#xA;```R&#xA;base &lt;- unique(ldply(values[ has_all ]))&#xA;```&#xA;&#xA;If the first data frame in the list contains all the levels of the variable,  then `base` will have that ordering of the variables. However,  if the first data frame does *not* contain all the levels,  then `base` will add the levels in the order they're encountered.&#xA;&#xA;To illustrate:&#xA;&#xA;```R&#xA;d1 &lt;- data.frame(f=factor(rep(letters[ 1:3 ],  each=5),  levels=letters[ 3:1 ]))&#xA;d2 &lt;- data.frame(f=rep(&quot;b&quot;,  15))&#xA;&#xA;str(d1)&#xA;# 'data.frame':   15 obs. of  1 variable:&#xA;#  $ f: Factor w/ 3 levels &quot;c&quot;, &quot;b&quot;, &quot;a&quot; :  3 3 3 3 3 2 2 2 2 2 ...&#xA;str(d2)&#xA;# 'data.frame':   15 obs. of  1 variable:&#xA;#  $ f: Factor w/ 1 level &quot;b&quot; :  1 1 1 1 1 1 1 1 1 1 ...&#xA;&#xA;str(unique(ldply(list(d1,  d2))))&#xA;# 'data.frame':   3 obs. of  1 variable:&#xA;#  $ f: Factor w/ 3 levels &quot;c&quot;, &quot;b&quot;, &quot;a&quot; :  3 2 1&#xA;str(unique(ldply(list(d2,  d1))))&#xA;# 'data.frame':   3 obs. of  1 variable:&#xA;#  $ f: Factor w/ 3 levels &quot;b&quot;, &quot;c&quot;, &quot;a&quot; :  1 3 2&#xA;```&#xA;&#xA;The fix is to put the default data frame from the ggplot object first,  rather than last.&#xA;" />
      <Message Id="6835755" ParentId="613" UserId="86978" Date="07/08/2012 22:50:19" Content="This passes all tests and visual tests are unchanged." />
      <Message Id="6913009" ParentId="613" UserId="86978" Date="07/11/2012 17:09:47" Content="Rebased onto master and merged at 3b8326d72a6ec87e61ad4c14ba79a3aaa8ccb153." />
    </Messages>
  </Topic>
  <Topic Id="614" Title="Use spiral arc length for polar distance calculation. Fixes #471">
    <Messages>
      <Message Id="0" ParentId="614" UserId="86978" Date="07/09/2012 04:56:38" Content="Fixes #471.&#xA;&#xA;This code fixes `coord_distance.polar` to give correct lengths. It could be cleaned up a bit,  and it could also use some tests.&#xA;&#xA;&#xA;The following code generates [ this PDF ](https://dl.dropbox.com/u/84377/spiraltest.pdf):&#xA;&#xA;```&#xA;# 80 concentric circles&#xA;df &lt;- data.frame(x = 0:1,  y=rep(c(1:80),  each=2))&#xA;ggplot(df,  aes(x=x,  y=y,  group=factor(y))) + geom_line() + coord_polar()&#xA;```&#xA;&#xA;It's somewhat of an improvement over the current method,  [ shown here ](https://dl.dropbox.com/u/84377/spiral_orig.pdf).&#xA;&#xA;The resolution toward the center still isn't high enough,  in my opinion. As I mentioned in #471,  there's often a greater information density (and therefore sharper turns) toward the center of the circle,  and so it would be useful to have higher resolution toward the center.&#xA;" />
      <Message Id="6838661" ParentId="614" UserId="4196" Date="07/09/2012 05:13:53" Content="That's definitely an improvement! I wonder what criterion we should really be satisfying in order to get smooth circles all the way down." />
      <Message Id="6838717" ParentId="614" UserId="86978" Date="07/09/2012 05:21:38" Content="I think we'd need a way of calculating the degree of curvature - the more curved it is,  the shorter the segments should be. Or maybe another way of thinking about it is that two segments in a row should never have an angle between them greater than some constant `k`. Maybe a value of one degree or 0.5 degrees would be reasonable.&#xA;&#xA;I suspect this would be slow,  since it seems like an iterative process. There might be a faster way that I'm not seeing,  though." />
      <Message Id="6858775" ParentId="614" UserId="86978" Date="07/09/2012 20:35:30" Content="Another possible method is to find the angle change between the start and end of each arc,  and break it into a number of segments proportional to the angular change.&#xA;&#xA;For example,  if the change in angle is 80 degrees,  you might want to use 80 segments. Actually,  now that I think about it more,  I think this is the optimal solution,  even for angled lines (which get turned into spiral arcs): a straight,  angled line gets warped by `coord_polar` so that the closer it is to the center,  the greater the curvature. It also happens that,  if you slice up the line into equal-length segments _before_ the transformation,  then _after_ the transformation,  the closer your are to the center,  the shorter the segments are. I don't know for sure,  but I think it probably works out so that each consecutive segment will have the same angle change (but different length).&#xA;" />
      <Message Id="6878839" ParentId="614" UserId="4196" Date="07/10/2012 15:27:02" Content="So basically we'd need a distance that capture this,  and then maybe think about doing the breaking recursively (or at least do a second round if the distances in the first round aren't so good)" />
      <Message Id="6879428" ParentId="614" UserId="86978" Date="07/10/2012 15:46:55" Content="Actually,  I was thinking that distance isn't the right metric. A function like `angle_delta()` would be more appropriate. For example,  if the post-transformation line is straight,  you still only need two points; and if the post-transformation line is a circle,  you may want,  say,  360 points. The same logic applies for map projections.&#xA;&#xA;That said,  distance may be useful as a a secondary factor -- a small 5mm circle probably doesn't need as many points as a large 50mm circle to look nice.&#xA;" />
      <Message Id="6880141" ParentId="614" UserId="86978" Date="07/10/2012 16:08:06" Content="The number of segments to use could be something like `delta_angle * length + 2`,  or `delta_angle * log(length) + 2`. The plus 2 is because you always need at least 2 points,  even if there's no angle change." />
      <Message Id="6913596" ParentId="614" UserId="86978" Date="07/11/2012 17:29:50" Content="This may not be the perfect solution,  but I rebased it and merged in 30e56bcc1d7bc5d4f890536cc2178498ef37d003." />
    </Messages>
  </Topic>
  <Topic Id="615" Title="geom_text fails when parsing variables with comma as decimal separator">
    <Messages>
      <Message Id="0" ParentId="615" UserId="456205" Date="07/09/2012 14:52:55" Content="Here's a self-contained reproducible example:&#xA;&#xA;```r&#xA;require(ggplot2)&#xA;&#xA;options(OutDec = ', ')&#xA;&#xA;x = 1.25&#xA;&#xA;print(qplot(1:10,  1:10) + geom_text(aes(x = 8,  y = 2),  label = paste('lambda == ',  x),  parse = TRUE))&#xA;```&#xA;&#xA;error:&#xA;&#xA;```r&#xA;Error in parse(text = lab) : &lt;text&gt;:1:13: unexpected ', '&#xA;1: lambda ==  1, &#xA;               ^&#xA;```&#xA;&#xA;relevant info:&#xA;&#xA;```r&#xA;&gt; sessionInfo()&#xA;R version 2.15.1 (2012-06-22)&#xA;Platform: x86_64-unknown-linux-gnu (64-bit)&#xA;&#xA;locale:&#xA; [ 1 ] LC_CTYPE=en_US.ISO-8859-1       LC_NUMERIC=C                   &#xA; [ 3 ] LC_TIME=en_US.ISO-8859-1        LC_COLLATE=en_US.ISO-8859-1    &#xA; [ 5 ] LC_MONETARY=en_US.ISO-8859-1    LC_MESSAGES=en_US.ISO-8859-1   &#xA; [ 7 ] LC_PAPER=C                      LC_NAME=C                      &#xA; [ 9 ] LC_ADDRESS=C                    LC_TELEPHONE=C                 &#xA;[ 11 ] LC_MEASUREMENT=en_US.ISO-8859-1 LC_IDENTIFICATION=C            &#xA;&#xA;attached base packages:&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xA;&#xA;other attached packages:&#xA;[ 1 ] ggplot2_0.9.1&#xA;&#xA;loaded via a namespace (and not attached):&#xA; [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.1       &#xA; [ 5 ] gtable_0.1.0.3     labeling_0.1       MASS_7.3-18        memoise_0.1       &#xA; [ 9 ] munsell_0.3        plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5&#xA;[ 13 ] reshape2_1.2.1     scales_0.2.1       stringr_0.6       &#xA;```" />
      <Message Id="6848986" ParentId="615" UserId="227097" Date="07/09/2012 14:59:18" Content="This behavior (not a bug probably) is not specific to ggplot2,  but try this:&#xA;&#xA;```r&#xA;print(qplot(1:10,  1:10) + geom_text(aes(x = 8,  y = 2),  label = paste('lambda == ',  deparse(x)),  parse = TRUE))&#xA;```&#xA;" />
      <Message Id="6857310" ParentId="615" UserId="18970" Date="07/09/2012 19:42:21" Content="There was [ a discussion ](http://r.789695.n4.nabble.com/Names-of-Greek-letters-stored-as-character-strings-plotmath-tp4630568p4630618.html) on r-help this year that might have some tips to go around `parse()`. I never found a reliable and general way." />
    </Messages>
  </Topic>
  <Topic Id="616" Title="scale_probit missing">
    <Messages>
      <Message Id="0" ParentId="616" UserId="415981" Date="07/10/2012 14:17:42" Content="I recently updated to ggplot2 v0.91 (R version 2.15.1)&#xA;My old ggplot scripts now fail due to two missing functions:&#xA;- comma&#xA;- scale_y_probit&#xA;&#xA;After searching the changelog and various lists I can't find any mention of the function being deprecated.&#xA;&#xA;example included:&#xA;&#xA;test&lt;-data.frame(ecdf=c(0.02040816, 0.04081633, 0.06122449, 0.08163265, 0.10204082, 0.14285714, 0.14285714, 0.16326531, 0.24489796, 0.24489796, 0.24489796, 0.24489796, 0.26530612, 0.28571429, 0.30612245, 0.32653061, 0.36734694, 0.36734694, 0.38775510, 0.40816327, 0.42857143, 0.46938776, 0.46938776, 0.48979592, 0.53061224, 0.53061224, 0.59183673, 0.59183673, 0.59183673, 0.61224490, 0.63265306, 0.65306122, 0.67346939, 0.69387755, 0.71428571, 0.73469388, 0.75510204, 0.77551020, 0.79591837, 0.81632653, 0.83673469, 0.85714286, 0.87755102, 0.89795918, 0.91836735, 0.93877551, 0.95918367, 0.97959184, 0.99900000), lat=c(50.7812, 66.4062, 70.3125, 97.6562, 101.5620, 105.4690, 105.4690, 109.3750, 113.2810, 113.2810, 113.2810, 113.2810, 125.0000, 136.7190, 148.4380, 164.0620, 167.9690, 167.9690, 171.8750, 175.7810, 183.5940, 187.5000, 187.5000, 191.4060, 195.3120, 195.3120, 234.3750, 234.3750, 234.3750, 238.2810, 261.7190, 312.5000, 316.4060, 324.2190, 417.9690, 507.8120, 511.7190, 562.5000, 664.0620, 683.5940, 957.0310, 1023.4400, 1050.7800, 1070.3100, 1109.3800, 1484.3800, 1574.2200, 1593.7500, 1750.0000))&#xA;&#xA;xbreaks&lt;-c(50, 100, 150, 200, 300, 500, 1000, 2000)&#xA;ybreaks&lt;-c(1, 2, 5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 95, 98, 99, 99.5, 99.9)/100&#xA;&#xA;p &lt;- ggplot( test,  aes(lat,  ecdf) ) &#xA;p+geom_point()+scale_y_probit(&quot;cumulative probability %&quot;,  formatter='formatter100',  breaks=ybreaks)+&#xA;scale_x_log10(breaks=xbreaks,  labels = comma(xbreaks)) &#xA;&#xA;" />
      <Message Id="6878580" ParentId="616" UserId="4196" Date="07/10/2012 15:18:23" Content="You need to explicitly load the `scales` package to get comma,  and use `scale_y_continuous(trans = probit)`." />
      <Message Id="6880190" ParentId="616" UserId="86978" Date="07/10/2012 16:09:58" Content="Also see the 0.9 transition guide: http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf" />
      <Message Id="6882059" ParentId="616" UserId="415981" Date="07/10/2012 17:11:06" Content="Thanks for the tips,  might be good to update the manual pages on the ggplot2 website too,  they still refer to the old scale_y_probit function.&#xA;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="617" Title="Remove framegrob from guide_axis. Fixes #606">
    <Messages>
      <Message Id="0" ParentId="617" UserId="86978" Date="07/11/2012 05:16:52" Content="This fixes #606,  and requires the modified version of gtable.&#xA;&#xA;I ran some timings on it,  and with no facets,  it's slightly faster than the old version,  but with facets,  it's slightly slower. All tests were run on installed versions of ggplot2 (not loaded via `load_all`).&#xA;&#xA;For all the test runs,  I ran the plots a few times before actually running the test.&#xA;&#xA;## No-facet tests&#xA;&#xA;Here's the code for the no-facet test:&#xA;&#xA;```&#xA;n &lt;- 10&#xA;times &lt;- numeric(n)&#xA;for (i in seq_len(n)) { &#xA;  t &lt;- system.time(print(ggplot(mtcars,  aes(wt, mpg)) + geom_point()))&#xA;  times[ i ] &lt;- t[ 1 ]&#xA; }&#xA;times&#xA;mean(times)&#xA;```&#xA;&#xA;The results for the old version:&#xA;&#xA;```&#xA;&gt; times&#xA; [ 1 ] 0.162 0.157 0.150 0.153 0.158 0.157 0.156 0.150 0.160 0.151&#xA;&gt; mean(times)&#xA;[ 1 ] 0.1554&#xA;```&#xA;&#xA;And the results for the new version:&#xA;&#xA;```&#xA;d&gt; times&#xA; [ 1 ] 0.151 0.149 0.140 0.149 0.147 0.158 0.146 0.147 0.144 0.149&#xA;d&gt; mean(times)&#xA;[ 1 ] 0.148&#xA;```&#xA;&#xA;&#xA;Since we're using R,  we might as well do a statistical test. :)&#xA;&#xA;```&#xA;&gt; t.test(times,  times2)&#xA;&#xA;    Welch Two Sample t-test&#xA;&#xA;data:  times and times2 &#xA;t = -3.7082,  df = 17.804,  p-value = 0.001634&#xA;alternative hypothesis: true difference in means is not equal to 0 &#xA;95 percent confidence interval:&#xA; -0.011595806 -0.003204194 &#xA;sample estimates:&#xA;mean of x mean of y &#xA;   0.1480    0.1554 &#xA;```&#xA;&#xA;&#xA;## Facet tests&#xA;&#xA;This code adds two faceting variables,  for a 2x3 grid.&#xA;&#xA;```&#xA;n &lt;- 10&#xA;times &lt;- numeric(n)&#xA;for (i in seq_len(n)) { &#xA;  t &lt;- system.time(print(ggplot(mtcars,  aes(wt, mpg)) + geom_point() + facet_grid(am~cyl)))&#xA;  times[ i ] &lt;- t[ 1 ]&#xA; }&#xA;```&#xA;&#xA;Results for the old version:&#xA;&#xA;```&#xA;&gt; times&#xA; [ 1 ] 0.511 0.516 0.492 0.533 0.496 0.480 0.500 0.498 0.500 0.489&#xA;&gt; mean(times)&#xA;[ 1 ] 0.5015&#xA;```&#xA;&#xA;&#xA;And the new version:&#xA;&#xA;```&#xA;d&gt; times&#xA; [ 1 ] 0.521 0.511 0.518 0.498 0.521 0.491 0.563 0.555 0.507 0.516&#xA;d&gt; mean(times)&#xA;[ 1 ] 0.5201&#xA;```&#xA;&#xA;And the t-test:&#xA;&#xA;```&#xA;&gt; t.test(times,  times2)&#xA;&#xA;    Welch Two Sample t-test&#xA;&#xA;data:  times and times2 &#xA;t = 2.1526,  df = 15.621,  p-value = 0.04735&#xA;alternative hypothesis: true difference in means is not equal to 0 &#xA;95 percent confidence interval:&#xA; 0.0002465331 0.0369534669 &#xA;sample estimates:&#xA;mean of x mean of y &#xA;   0.5201    0.5015 &#xA;```" />
      <Message Id="6898387" ParentId="617" UserId="227097" Date="07/11/2012 05:22:34" Content="Now we don't need the wrapping by gTree for justification." />
      <Message Id="6898415" ParentId="617" UserId="86978" Date="07/11/2012 05:25:18" Content="Oh right,  thanks for catching that.&#xA;&#xA;Update: On second thought,  I'm not sure that it makes sense to put the `vp` in the gtable -- see my comment in hadley/gtable#25." />
      <Message Id="6898439" ParentId="617" UserId="227097" Date="07/11/2012 05:27:08" Content="I hope that the `vpStack` trick will improve speed as well as introduce simplicity!!&#xA;Anyway,  thanks for the statistical test ;-p" />
      <Message Id="6898458" ParentId="617" UserId="227097" Date="07/11/2012 05:28:37" Content="You may implement the function for counting the elapsed time and performing statistical test from the previous commit in your visual test library ;-p" />
      <Message Id="6898612" ParentId="617" UserId="86978" Date="07/11/2012 05:42:49" Content="&gt; You may implement the function for counting the elapsed time and performing statistical test from the previous commit in your visual test library ;-p&#xA;&#xA;You may be joking,  but that's actually not a bad idea..." />
      <Message Id="7057462" ParentId="617" UserId="86978" Date="07/18/2012 05:55:59" Content="I've made changes so that this uses the latest version of gtable,  in which gtable objects are also grobs.&#xA;&#xA;I think everything works,  but some of the visual tests are broken (due to other bugs),  so I can't check for sure." />
      <Message Id="7084368" ParentId="617" UserId="86978" Date="07/18/2012 22:27:04" Content="Rebased and merged at 30413b6e569fdfac88c06cc5d7a5a0bf2a32b34e." />
    </Messages>
  </Topic>
  <Topic Id="618" Title="Allow geom_segment to set lineend">
    <Messages>
      <Message Id="0" ParentId="618" UserId="18445" Date="07/11/2012 16:17:01" Content="" />
      <Message Id="7441997" ParentId="618" UserId="86978" Date="08/01/2012 22:24:19" Content="I've rebased and merged into master at 89a61c5f547f2f58994e1ec24ccb106b3e1c2d2d." />
    </Messages>
  </Topic>
  <Topic Id="619" Title="Allow axes on top and right">
    <Messages>
      <Message Id="0" ParentId="619" UserId="86978" Date="07/11/2012 19:09:10" Content="Right now,  there's code in `guide_axis()` that allows putting the axes on the top and right,  but it looks like all the actual calls to that function are hard-coded to use `&quot;left&quot;` and `&quot;bottom&quot;`.&#xA;&#xA;There should also be visual tests of the results." />
      <Message Id="7438735" ParentId="619" UserId="4196" Date="08/01/2012 20:20:11" Content="I did start thinking about this - I think it should also be possible to change the position of the facet labels,  and then you also need some way of specifying whether the axes should be inside or outside of the facet labels." />
      <Message Id="8030433" ParentId="619" UserId="86978" Date="08/26/2012 05:37:44" Content="How should the sides be specified? It could be a theme element,  something like this:&#xA;&#xA;```&#xA;# Axes on all four sides&#xA;qplot(1:3,  1:3) + theme(axis.sides = &quot;trbl&quot;)&#xA;```&#xA;" />
      <Message Id="8030452" ParentId="619" UserId="227097" Date="08/26/2012 05:41:51" Content="Here is my previous ideas and implementations:&#xA;https://groups.google.com/forum/?fromgroups=#!topic/ggplot2-dev/JkJU5CLBkQw&#xA;&#xA;Now the internals of ggplot2 is largely changing,  so it cannot wokr as is.&#xA;" />
      <Message Id="35941269" ParentId="619" UserId="4196" Date="02/24/2014 21:29:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="620" Title="Stacked bar graphs produce warning">
    <Messages>
      <Message Id="0" ParentId="620" UserId="86978" Date="07/13/2012 03:43:23" Content="This is with the development version. It looks like stacked bar graphs now produce a warning about constant width:&#xA;&#xA;```R&#xA;ggplot(mpg,  aes(x=drv)) + geom_bar()&#xA;# Warning message:&#xA;# position_stack requires constant width: output may be incorrect &#xA;```&#xA;&#xA;It doesn't seem to happen with 0.9.1." />
      <Message Id="6954711" ParentId="620" UserId="4196" Date="07/13/2012 04:56:48" Content="That's probably because of the more sensitive `zero_range` :(" />
      <Message Id="6954858" ParentId="620" UserId="227097" Date="07/13/2012 05:13:20" Content="I think `zero_range` needs scale factor,  or tolerance.&#xA;" />
      <Message Id="7057541" ParentId="620" UserId="86978" Date="07/18/2012 06:03:02" Content="I think we need a clear specification of what `zero_range` is supposed to do. Its purpose is not entirely clear to me. It seems that sometimes `zero_range` is being used when we're trying to test &quot;are the values very close together?&quot;,  as we are here.&#xA;&#xA;Perhaps we need two separate functions,  or,  as @kohske suggests,  a tolerance/scale factor option." />
      <Message Id="7057757" ParentId="620" UserId="86978" Date="07/18/2012 06:23:54" Content="After taking a closer look at the recently-changed `zero_range` function,  I think that it will return TRUE only when the two values are *exactly* the same,  in which case you might as well use `==`.&#xA;&#xA;If you look at `?.Machine`,  it says: `double.eps: the smallest positive floating-point number ‘x’ such that ‘1 + x != 1’.` So _by definition_,  it's not possible for there to be a difference that's smaller than `double.eps` (if you're using 1 as the base value).&#xA;&#xA;This should illustrate:&#xA;&#xA;```&#xA;# Adding double.eps to 1 results in a detectable difference with ==&#xA;1 + .Machine$double.eps == 1&#xA;# FALSE&#xA;&#xA;# Same result with zero_range&#xA;zero_range(c(1 + .Machine$double.eps,  1))&#xA;# FALSE&#xA;&#xA;&#xA;&#xA;# Adding a value half the size of double.eps  -- they are identical&#xA;1 + .Machine$double.eps/2 == 1&#xA;# TRUE&#xA;&#xA;# Same result with zero_range&#xA;zero_range(c(1 + .Machine$double.eps/2,  1))&#xA;# TRUE&#xA;```&#xA;&#xA;&#xA;One possible change is to use some multiple of `.Machine$double.eps`. In the `quantile.default` function,  the epsilon value is defined as:&#xA;&#xA;```R&#xA;eps &lt;- 100 * .Machine$double.eps&#xA;```&#xA;&#xA;In the `?integer` page,  it defines the following function,  which uses the square root of `.Machine$double.eps`:&#xA;&#xA;```R&#xA;is.wholenumber &lt;- function(x,  tol = .Machine$double.eps^0.5)  abs(x - round(x)) &lt; tol&#xA;```&#xA;" />
      <Message Id="7081882" ParentId="620" UserId="86978" Date="07/18/2012 20:58:57" Content="Fixed with new version of scales,  at 33509e67a854d3171a4e90300131b213eb289665." />
    </Messages>
  </Topic>
  <Topic Id="621" Title="Recycle shapes.">
    <Messages>
      <Message Id="0" ParentId="621" UserId="1363467" Date="07/15/2012 01:27:32" Content="Hi, &#xA;&#xA;Shapes are not recycled in the latest ggplot from github on R 2.15.1.&#xA;&#xA;The following plots only 6 shapes instead of intended 25:&#xA;&#xA;```&#xA;df2 &lt;- data.frame(x = factor(1:5) ,  y = factor(1:25),  z = factor(1:25))&#xA;ggplot(df2,  aes(x = x,  y = y)) + geom_point(aes(shape = z),  size = 4)&#xA;```&#xA;&#xA;Thanks.&#xA;&#xA;" />
      <Message Id="6988471" ParentId="621" UserId="4196" Date="07/15/2012 02:21:04" Content="This is a feature,  not a bug.  It is extremely difficult to distinguish between more than six shapes - the next version will have an explicit warning to this effect." />
      <Message Id="6991082" ParentId="621" UserId="1363467" Date="07/15/2012 11:59:13" Content="  &gt;&gt; hadley wickham &lt;reply@reply.github.com&gt;&#xD;&#xA;  &gt;&gt; on Sat,  14 Jul 2012 19:21:05 -0700 wrote:&#xD;&#xA;&#xD;&#xA;  &gt; This is a feature,  not a bug.  It is extremely difficult to&#xD;&#xA;  &gt; distinguish between more than six shapes - the next version will&#xD;&#xA;  &gt; have an explicit warning to this effect. &#xD;&#xA;&#xD;&#xA;Not more shapes. I meant recycling of existing ones. I can map the same&#xD;&#xA;variable to colour and size.  In my case there are only 12 groups,  so&#xD;&#xA;it's pretty easy to distinguish. The problem is that 6 groups are not&#xD;&#xA;plotted altogether :)&#xD;&#xA;&#xD;&#xA;I guess there should be a way to do this manually.&#xD;&#xA;&#xD;&#xA;  &#xD;&#xA;BTW,  a slightly related issue. scale_shape(solid=F) doesn't  take effect&#xD;&#xA;if shape aesthetic is not explicitly mapped:&#xD;&#xA;&#xD;&#xA;   dsmall &lt;- diamonds[ sample(nrow(diamonds),  100),   ]&#xD;&#xA;   ggplot(dsmall,  aes(x = carat,  y = price,  colour = cut)) + geom_point() + scale_shape(solid = FALSE)&#xD;&#xA;&#xD;&#xA;Is this also intended? I find it a bit non-intuitive.&#xD;&#xA;&#xD;&#xA;Thanks." />
    </Messages>
  </Topic>
  <Topic Id="622" Title="stat_summary not working with Hmisc summaries">
    <Messages>
      <Message Id="0" ParentId="622" UserId="1363467" Date="07/15/2012 01:34:15" Content="Hi,  &#xA;&#xA;I didn't investigate if it's Hmisc or ggplot,  but the following example from &quot;stat_summary&quot; page is producing mambo jambo:&#xA;&#xA;```&#xA;&#xA;d &lt;- qplot(cyl,  mpg,  data=mtcars)&#xA;stat_sum_df &lt;- function(fun,  geom=&quot;crossbar&quot;,  ...) { &#xA;    stat_summary(fun.data=fun,  colour=&quot;red&quot;,  geom=geom,  width=0.2,  ...)&#xA; }&#xA;d + stat_sum_df(&quot;mean_cl_boot&quot;)&#xA;```&#xA;&#xA;Thanks." />
      <Message Id="7476199" ParentId="622" UserId="86978" Date="08/03/2012 05:41:48" Content="The issue is that with a continuous x axis,  grouping needs to be specified:&#xA;&#xA;```R&#xA;stat_sum_df &lt;- function(fun,  geom=&quot;crossbar&quot;,  ...) { &#xA;    stat_summary(fun.data=fun,  colour=&quot;red&quot;,  geom=geom,  width=0.2,  ...)&#xA; }&#xA;qplot(cyl,  mpg,  group=cyl,  data=mtcars) + stat_sum_df(&quot;mean_cl_boot&quot;)&#xA;```&#xA;&#xA;The underlying problem is that `stat_summary` calls `summarise_by_x()`: this function takes the data at each x value as a separate group for calculating the summary statistic,  but it doesn't actually set the `group` column in the data. Here's the relevant code from https://github.com/hadley/ggplot2/blob/master/R/stat-summary.r#L157:&#xA;&#xA;```R&#xA;summary &lt;- ddply(data,  .(group,  x),  summary,  ...)&#xA;```&#xA;&#xA;I don't think at this stage of processing it's really possible to change the `group` column. I believe the proper fix is to NOT have it group by x at all,  and instead use only the grouping defined by `group`. Users would always have to specify grouping explicitly,  as I showed above.&#xA;&#xA;In other words,  the code should look like this:&#xA;&#xA;```R&#xA;summary &lt;- ddply(data,  .(group),  summary,  ...)&#xA;```&#xA;&#xA;But this may break some existing user code.&#xA;&#xA;&#xA;edit: Now that I've thought about it more,  perhaps `stat_summary` should work like `stat_boxplot`,  with a `calculate()` function that is run for each group." />
      <Message Id="7498331" ParentId="622" UserId="4196" Date="08/04/2012 01:47:09" Content="I think `summarise_by_x` just needs to modify the group column - that's what most of the stats do (and what the default `calculate_groups` does." />
    </Messages>
  </Topic>
  <Topic Id="623" Title="linetype with NA in grouping factor throws error">
    <Messages>
      <Message Id="0" ParentId="623" UserId="1465806" Date="07/15/2012 18:35:23" Content="Example: &#xA;```&#xA;df &lt;- data.frame(&#xA;  trt = factor(c(1,  1,  2,  2, 3, 3)), &#xA;  resp = c(1,  5,  3,  2,  NA, 5), &#xA;  group = factor(c(1,  2,  1,  2,  NA, 2)), &#xA;  se = c(0.1,  0.3,  0.3,  0.2, NA, 0.2)&#xA;)&#xA;&#xA;p&lt;-ggplot(df,  aes(x=trt,  y=resp,  ymin=resp-se,  ymax=resp+se))&#xA;p+geom_pointrange(aes(linetype=group))&#xA;&#xA;#Error in grid.Call.graphics(L_segments,  x$x0,  x$y0,  x$x1,  x$y1,  x$arrow) : &#xA;#invalid hex digit in 'color' or 'lty'&#xA;&#xA;p+geom_pointrange(aes(color=group))&#xA;#Everything OK,  only warnings&#xA;```&#xA;&#xA;session_info():&#xA;```&#xA;&#xA;R version 2.15.1 (2012-06-22)&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xA;&#xA;locale:&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       &#xA; [ 4 ] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              &#xA;[ 10 ] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xA;&#xA;attached base packages:&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods   base     &#xA;&#xA;other attached packages:&#xA; [ 1 ] gtable_0.1.0.3 apaFormat_0.1  ggplot2_0.9.1  devtools_0.7   gridExtra_0.9  reshape_0.8.4 &#xA; [ 7 ] plyr_1.7.1     lattice_0.20-6 metafor_1.6-0  Formula_1.1-0  nlme_3.1-104  &#xA;```&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="624" Title="stat_vline complains about both intercept and xintercept arguments">
    <Messages>
      <Message Id="0" ParentId="624" UserId="908596" Date="07/16/2012 16:50:53" Content="Using ggplot 0.9.0&#xA;&#xA;    stat_vline(intercept=.5,  linetype=&quot;dotted&quot;)&#xA;&#xA;    Error in get(x,  envir = this,  inherits = inh)(this,  ...) : &#xA;      stat_vline now uses xintercept instead of intercept&#xA;&#xA;but:&#xA;&#xA;    +   stat_vline(xintercept=.5,  linetype=&quot;dotted&quot;)&#xA;    Error in do.call(&quot;layer&quot;,  list(mapping = mapping,  data = data,  geom = geom,   : &#xA;      argument &quot;intercept&quot; is missing,  with no default&#xA;&#xA;Using geom_vline instead works fine." />
      <Message Id="7057926" ParentId="624" UserId="86978" Date="07/18/2012 06:36:08" Content="Thanks,  fixed in 3debefc5c372bffb4cb38859be6cf2b15b9ee6fe." />
    </Messages>
  </Topic>
  <Topic Id="625" Title="Error with `minor_breaks` and dates ">
    <Messages>
      <Message Id="0" ParentId="625" UserId="86978" Date="07/18/2012 05:44:03" Content="This example is taken from the visual tests.&#xA;&#xA;```R&#xA;set.seed(342)&#xA;df &lt;- data.frame(&#xA;  date = seq(as.Date(&quot;2012-2-29&quot;),  len=100,  by=&quot;1 day&quot;)[ sample(100,  50) ], &#xA;  price = runif(50)&#xA;)&#xA;df &lt;- df[ order(df$date),   ]&#xA;&#xA;&#xA;# OK&#xA;qplot(date,  price,  data=df,  geom=&quot;line&quot;) +&#xA;  scale_x_date(labels = date_format(&quot;%m/%d&quot;),  breaks = date_breaks(&quot;month&quot;))&#xA;&#xA;# Error&#xA;qplot(date,  price,  data=df,  geom=&quot;line&quot;) +&#xA;  scale_x_date(labels = date_format(&quot;%m/%d&quot;),  breaks = date_breaks(&quot;month&quot;), &#xA;    minor_breaks = date_breaks(&quot;week&quot;))&#xA;# Error in Ops.Date((x - from[ 1 ]),  diff(from)) : &#xA;#  / not defined for Date objects&#xA;```" />
      <Message Id="7073554" ParentId="625" UserId="86978" Date="07/18/2012 16:16:19" Content="The problem seems to be with `scale_breaks_minor.date()`. I think this function can be removed,  and `scale_breaks_minor.continuous()` can be modified to handle things." />
    </Messages>
  </Topic>
  <Topic Id="626" Title="Fix minor breaks for dates">
    <Messages>
      <Message Id="0" ParentId="626" UserId="86978" Date="07/18/2012 16:55:09" Content="This fixes #625. Visual tests no longer error out.&#xA;&#xA;It also looks like I might have undone commit bfe9097f5ebf093eb894cbc67d97d632d1e99397. I'm not sure what the purpose of that commit was,  though." />
    </Messages>
  </Topic>
  <Topic Id="627" Title="Error when all data is outside limits of continuous scale">
    <Messages>
      <Message Id="0" ParentId="627" UserId="86978" Date="07/18/2012 23:02:16" Content="This is from the examples:&#xA;&#xA;```R&#xA;# OK&#xA;qplot(mpg,  wt,  data=mtcars) + ylim(0,  10)&#xA;&#xA;# All data is outside y limits - Error&#xA;qplot(mpg,  wt,  data=mtcars) + ylim(10,  20)&#xA;# Error: Discrete value supplied to continuous scale&#xA;```" />
      <Message Id="7085327" ParentId="627" UserId="4196" Date="07/18/2012 23:12:44" Content="I think this should be simple fix: make `censor` return `NA_real_` instead of `NA` (which is logical,  and hence counted as discrete).  Even better you should return an NA of the same type as `x` - but I don't know an easy way of doing that." />
    </Messages>
  </Topic>
  <Topic Id="628" Title="Use rgeos instead of gpclib for fortify polygon operations">
    <Messages>
      <Message Id="0" ParentId="628" UserId="1872825" Date="07/19/2012 09:36:19" Content="Following a discussion with Roger Bivand (author and contributor of many spatial packages for R) on r-sig-geo mailing list he suggested that rgeos should be used over gpclib (due to gpclib's restrictive license) for polygon operations in the fortify methods for spatial data. &#xA;Original discussion is [ here: ](http://r-sig-geo.2731867.n2.nabble.com/Help-with-gpclib-tp7580479p7580542.html)" />
      <Message Id="7097587" ParentId="628" UserId="4196" Date="07/19/2012 13:07:00" Content="Thanks Simon - but I think this already happens automatically if you have rgeos installed.  I don't want to make rgeos an explicit dependency because it's fairly heavy and requires an external geos install." />
    </Messages>
  </Topic>
  <Topic Id="629" Title="Inconsistent boxplot width between facets">
    <Messages>
      <Message Id="0" ParentId="629" UserId="18445" Date="07/20/2012 16:00:38" Content="```&#xA;library(&quot;ggplot2&quot;)&#xA;&#xA;# create a collection of cases&#xA;d &lt;- expand.grid(a=c(&quot;a&quot;,  &quot;b&quot;),  x=c(&quot;x1&quot;,  &quot;x2&quot;,  &quot;x3&quot;,  &quot;x4&quot;))&#xA;# with replicates&#xA;d &lt;- rbind(d,  d,  d)&#xA;# add data&#xA;set.seed(1)&#xA;d$y &lt;- runif(nrow(d))&#xA;&#xA;# plot everything&#xA;(p &lt;- ggplot(d) + geom_boxplot(aes(x=x,  y=y)) + facet_grid(a~.))&#xA;&#xA;# now make some holes: remove all observations for a given combination of x and a &#xA;ds &lt;- d[ -which(d$a == &quot;b&quot; &amp; d$x %in% c(&quot;x1&quot;,  &quot;x3&quot;)),  ]&#xA;p %+% ds&#xA;# -&gt; unequal width boxplots&#xA;&#xA;ds &lt;- d[ -which(d$x %in% c(&quot;x1&quot;) | d$a == &quot;b&quot; &amp; d$x %in% c(&quot;x3&quot;)),  ]&#xA;p %+% ds&#xA;# -&gt; ok,  because x1 was removed in all&#xA;p %+% ds + scale_x_discrete(drop=F)&#xA;# but when x1 is kept explicitly,  the issue reappears&#xA;```&#xA;&#xA;This may seem like a corner issue but in fact it appears quite often when plotting datasets with missing cases and `facet_grid`: in that situation,  most combinations of cases are kept because the levels exist in at least one the facets,  and this result in very erratic looking plots,  with boxplot of varying width across all facets.&#xA;&#xA;So it's actually pretty severe." />
      <Message Id="7490347" ParentId="629" UserId="86978" Date="08/03/2012 18:24:25" Content="It looks like the problem happens because `StatBoxplot$calculate_groups` is run on each facet separately,  and it determines width with this:&#xA;&#xA;```R&#xA;    width &lt;- width %||%  resolution(data$x) * 0.75&#xA;```&#xA;&#xA;Ideally,  it would check whether `x` is a discrete or continuous scale,  and do the width calculation accordingly. But I don't think that information is available at this stage.&#xA;&#xA;One workaround is of course to specify the width:&#xA;&#xA;```R&#xA;set.seed(323)&#xA;d &lt;- expand.grid(g = c(&quot;A&quot;,  &quot;B&quot;),  x=c(&quot;x1&quot;,  &quot;x2&quot;,  &quot;x3&quot;,  &quot;x4&quot;))&#xA;d &lt;- rbind(d,  d,  d)&#xA;d$y &lt;- runif(nrow(d))&#xA;&#xA;# Sort&#xA;d &lt;- arrange(d,  g)&#xA;&#xA;# All combinations: looks OK&#xA;ggplot(d) + geom_boxplot(aes(x=x,  y=y)) + facet_grid(g ~ .)&#xA;&#xA;&#xA;# Drop every other x value in facet B&#xA;d2 &lt;- subset(d,  g == &quot;A&quot; | (x == &quot;x2&quot; | x == &quot;x4&quot;))&#xA;&#xA;# Boxes too wide in bottom&#xA;ggplot(d2) + geom_boxplot(aes(x=x,  y=y)) + facet_grid(g ~ .)&#xA;&#xA;# Specify width: looks OK&#xA;ggplot(d2) + geom_boxplot(aes(x=x,  y=y),  width=1) + facet_grid(g ~ .)&#xA;```&#xA;&#xA;Incidentally,  it looks like the width of the boxes is actually 0.75 times the specified width,  as the code below demonstrates. This seems a bit odd to me.&#xA;&#xA;```R&#xA;# Use default width&#xA;ggplot(d) + geom_boxplot(aes(x=x,  y=y)) + facet_grid(g ~ .) +&#xA;  geom_vline(xintercept = 1.375,  colour=&quot;red&quot;)&#xA;&#xA;# width=1: appears same as above&#xA;ggplot(d) + geom_boxplot(aes(x=x,  y=y),  width=1) + facet_grid(g ~ .) +&#xA;  geom_vline(xintercept = 1.375,  colour=&quot;red&quot;)&#xA;&#xA;# width=0.9: narrower boxes&#xA;ggplot(d) + geom_boxplot(aes(x=x,  y=y),  width=0.9) + facet_grid(g ~ .) +&#xA;  geom_vline(xintercept = 1.375,  colour=&quot;red&quot;)&#xA;&#xA;```&#xA;" />
      <Message Id="7498265" ParentId="629" UserId="4196" Date="08/04/2012 01:34:35" Content="I think you can distinguish between discrete and continuous because discrete will be integers.  Maybe resolution should include a specific check for that?  Or maybe we should have `ggresolution` which is specialised for this feature of ggplot2?" />
      <Message Id="7561288" ParentId="629" UserId="86978" Date="08/07/2012 17:54:48" Content="Yes,  it does appear that,  in `stat_boxplot`:&#xA;&#xA;* when the incoming x data is discrete,  `data$x` is integer&#xA;* when the incoming x data is continuous,  `data$x` is numeric -- even if the incoming data is of type integer.&#xA;&#xA;But I think relying on this distinction to determine width is a fragile solution. Ideally the stats and geoms could query the plot object to find if the scales are discrete or continuous,  and adjust behavior accordingly. Either that,  or the data structure passed to the stat/geom would report whether each variable is discrete or continuous.&#xA;" />
      <Message Id="7565317" ParentId="629" UserId="86978" Date="08/07/2012 20:14:40" Content="Now that I've looked around a bit,  it looks like testing for integers is used elsewhere,  like in `StatBin$calculate()`. It seems to work fine there,  so maybe it's not so bad." />
    </Messages>
  </Topic>
  <Topic Id="630" Title="dropping factors in facets gets ignored when xlim is manually specified">
    <Messages>
      <Message Id="0" ParentId="630" UserId="908596" Date="07/20/2012 23:03:49" Content="I create bar charts with coord_flip,  unfortunately this creates a reverse alphabetical order y scale. I would commonly reorder the factors in the underlying data,  but always found this slightly cumbersome.&#xA;&#xA;Recently I figured out I could use `xlim(rev(levels(x$variable)))` instead to fix the order,  however this seems to &quot;reset&quot; the dropped factors when paired with facets." />
      <Message Id="7148608" ParentId="630" UserId="86978" Date="07/21/2012 00:45:17" Content="Can you provide a (simple) reproducible example?" />
      <Message Id="7153306" ParentId="630" UserId="908596" Date="07/21/2012 14:22:57" Content="	# plot some bar charts with states on the axis split up between two facets&#xA;	state &lt;- factor(sample(state.name,  size=10))&#xA;	value &lt;- sample(50:60,  size=10)&#xA;	facet &lt;- factor(sample(1:2,  size=10,  replace=T))&#xA;&#xA;	data &lt;- data.frame(state,  value,  facet)&#xA;&#xA;	# the below graph appears to have the final y axis &quot;backwards&quot;,  that is if I&#xA;	# read top to bottom it is in reverse alphabetical order,  note this is&#xA;	# expected behavior via coord_flip()&#xA;	ggplot(data,  aes(x=state,  y=value)) +&#xA;	  facet_wrap(~ facet,  ncol=1,  scales=&quot;free_x&quot;) +&#xA;	  geom_bar(stat=&quot;identity&quot;) +&#xA;	  coord_flip()&#xA;&#xA;	# one way to fix this is to just reorder the underlying factor&#xA;	data$state.rev &lt;- factor(data$state,  levels=rev(levels(data$state)))&#xA;	ggplot(data,  aes(x=state.rev,  y=value)) +&#xA;	  facet_wrap(~ facet,  ncol=1,  scales=&quot;free_x&quot;) +&#xA;	  geom_bar(stat=&quot;identity&quot;) +&#xA;	  coord_flip()&#xA;&#xA;	# but rather than modify our underlying factor,  we could use xlim instead&#xA;	# however this seems to now ignore the scales=&quot;free_x&quot; and puts all&#xA;	# states on the y axis for both facets&#xA;	ggplot(data,  aes(x=state,  y=value)) +&#xA;	  facet_wrap(~ facet,  ncol=1,  scales=&quot;free_x&quot;) +&#xA;	  geom_bar(stat=&quot;identity&quot;) +&#xA;	  coord_flip() +&#xA;	  xlim(rev(levels(data$state)))&#xA;&#xA;	# maybe we need to add drop=T (I'm not sure of the interaction here),  but that&#xA;	# doesn't seem to change anything&#xA;	ggplot(data,  aes(x=state,  y=value)) +&#xA;	  facet_wrap(~ facet,  ncol=1,  scales=&quot;free_x&quot;,  drop=TRUE) +&#xA;	  geom_bar(stat=&quot;identity&quot;) +&#xA;	  coord_flip() +&#xA;	  xlim(rev(levels(data$state)))" />
      <Message Id="7941337" ParentId="630" UserId="4196" Date="08/22/2012 17:03:28" Content="This is by design - setting the limits overrides the scales so that they don't look at the data at all.  It's probably not that desirable in this case,  but there's an easy workaround and fixing it would be hard." />
      <Message Id="7945372" ParentId="630" UserId="908596" Date="08/22/2012 19:03:37" Content="Thanks,  that makes sense." />
    </Messages>
  </Topic>
  <Topic Id="631" Title="For new docs website,  set up url canonicalisation/redirects">
    <Messages>
      <Message Id="0" ParentId="631" UserId="4196" Date="07/26/2012 15:38:28" Content="So that that /latest is the canonical url,  but if you bookmark a page you stick with the older version?" />
    </Messages>
  </Topic>
  <Topic Id="632" Title="Add clearer error messages with geom_bar">
    <Messages>
      <Message Id="0" ParentId="632" UserId="86978" Date="07/26/2012 17:34:41" Content="From: https://groups.google.com/forum/?fromgroups#!searchin/ggplot2/from:powell/ggplot2/oXFE3WkV2UM/41u1SYs3WJwJ&#xA;&#xA;```&#xA;library(ggplot2)&#xA;df &lt;- data.frame( variable = c(&quot;resembles&quot;,  &quot;does not resemble&quot;),  value = c(80,  20)  ) &#xA;&#xA;# Works&#xA;ggplot(df,  aes(x = &quot;&quot;,  y = value,  fill = variable)) + geom_bar(width = 1) &#xA;&#xA;&#xA;# Gives confusing error message&#xA;ggplot(df,  aes(x = &quot;&quot;,  y = value)) + geom_bar(width = 1) &#xA;# Error in pmin(y,  0) : object 'y' not found&#xA;```&#xA;&#xA;I think this has to do with it using `stat=&quot;identity&quot;` vs. `stat=&quot;bin&quot;`.&#xA;" />
      <Message Id="7498295" ParentId="632" UserId="4196" Date="08/04/2012 01:41:02" Content="Changing `geom_bar$reparameterise` to &#xA;&#xA;```R&#xA;  reparameterise &lt;- function(.,  df,  params) { &#xA;    df$width &lt;- df$width %||% &#xA;      params$width %||% (resolution(df$x,  FALSE) * 0.9)&#xA;    &#xA;    if (is.null(df$y)) stop(&quot;geom_bar: missing y aesthetic&quot;,  call. = FALSE)&#xA;    if (is.null(df$x)) stop(&quot;geom_bar: missing x aesthetic&quot;,  call. = FALSE)&#xA;    &#xA;    df$ymin &lt;- pmin(df$y,  0)&#xA;    df$ymax &lt;- pmax(df$y,  0)&#xA;    df$xmin &lt;- df$x - df$width / 2&#xA;    df$xmax &lt;- df$x + df$width / 2&#xA;&#xA;    df&#xA;   }&#xA;```&#xA;&#xA;helps a little but is still not that informative." />
      <Message Id="7498305" ParentId="632" UserId="4196" Date="08/04/2012 01:43:47" Content="We could also add&#xA;&#xA;```&#xA;    if (is.null(df$y) &amp;&amp; !is.null(df$count)) { &#xA;      df$y &lt;- df$count&#xA;     }&#xA;```&#xA;&#xA;and in `stat_bin` maybe use `y` if `weight` is not specified.  Or is that too magical?" />
      <Message Id="7877918" ParentId="632" UserId="86978" Date="08/20/2012 18:07:41" Content="This points to something that I've found confusing about `stat_bin` for a long time: when you map something to `y` and there's one data point per `x` value,  then it behaves like `stat_identity`.&#xA;&#xA;Here are examples of the normal behavior for each:&#xA;&#xA;```R&#xA;dat &lt;- data.frame(g=c(&quot;a&quot;, &quot;a&quot;, &quot;b&quot;),  val=c(3, 2, 6))&#xA;&#xA;# Plot counts using stat_bin (the default stat)&#xA;ggplot(dat,  aes(x=g)) + geom_bar(stat=&quot;bin&quot;)&#xA;&#xA;# Plot values using stat_identity (with outlines to make stacking clear)&#xA;ggplot(dat,  aes(x=g,  y=val)) +&#xA;  geom_bar(stat=&quot;identity&quot;,  colour=&quot;black&quot;,  fill=&quot;white&quot;)&#xA;```&#xA;&#xA;&#xA;And here's an example of the confusing behavior with `stat_bin`:&#xA;&#xA;```R&#xA;# stat_bin: plot values when values are mapped to y,  and one data point per x&#xA;# &quot;a&quot; bar is removed; &quot;b&quot; bar is present,  but shows values&#xA;ggplot(dat,  aes(x=g,  y=val)) + geom_bar(stat=&quot;bin&quot;)&#xA;# Warning message:&#xA;# Removed 1 rows containing missing values (position_stack). &#xA;ggplot(dat,  aes(x=g,  y=val)) + geom_bar() # Same as above; 'bin' is default&#xA;```&#xA;&#xA;How about making this less confusing by having more consistent behavior? There's a possibility that this could break a lot of existing user code,  though.&#xA;" />
      <Message Id="7878966" ParentId="632" UserId="4196" Date="08/20/2012 18:38:54" Content="I think that's reasonable - I really don't how the current behaviour makes any sense." />
    </Messages>
  </Topic>
  <Topic Id="633" Title="cumulative version of stat_bin">
    <Messages>
      <Message Id="0" ParentId="633" UserId="45133" Date="07/29/2012 16:38:11" Content="I found myself needing a cumulative stat_bin function for some graphing work I was doing,  similar to the discussion here https://groups.google.com/d/msg/ggplot2/UT8f5K5Agf0/eWZM_GKoGI0J.  Anyway,  as this is my first foray into the ggplot2 code,  it is possible there is a better way solution.  Still,  I hacked stat_cbin together and it has worked quite well for my needs so I thought I'd pass it on in case is useful for inclusion." />
      <Message Id="7358279" ParentId="633" UserId="86978" Date="07/30/2012 00:58:38" Content="There's actually a `stat_ecdf` in the current development branch,  which will be released in a month. It's not quite the same,  but it's similar to this." />
      <Message Id="7358338" ParentId="633" UserId="227097" Date="07/30/2012 01:07:49" Content="or, &#xA;&#xA;```&#xA;ggplot(simple,  aes(x)) + stat_bin(aes(y = cumsum(..count..)))&#xA;```&#xA;&#xA;will work similarly." />
      <Message Id="7438897" ParentId="633" UserId="4196" Date="08/01/2012 20:25:57" Content="Thanks for the contribution - I don't think it's commonly enough to include in ggplot2,  but we're working on ways to make it easier to distribute additional geoms/stats in external packages." />
    </Messages>
  </Topic>
  <Topic Id="634" Title="outdated changelog">
    <Messages>
      <Message Id="0" ParentId="634" UserId="222586" Date="07/30/2012 19:54:12" Content="Is there a reason to have both a CHANGELOG and a NEWS file? Looks like the former hasn't been updated.  " />
      <Message Id="7438648" ParentId="634" UserId="4196" Date="08/01/2012 20:16:43" Content="No reason.  I think we can either delete `CHANGELOG` or move it into `NEWS`" />
      <Message Id="7460997" ParentId="634" UserId="86978" Date="08/02/2012 16:45:10" Content="I merged it into NEWS and fixed the formatting,  at 84358c575e6ff38da78fbe53b257b3ff9be8dc47." />
    </Messages>
  </Topic>
  <Topic Id="635" Title="Should have better way of making a balloon plot with value proportional to area">
    <Messages>
      <Message Id="0" ParentId="635" UserId="86978" Date="07/31/2012 04:01:31" Content="Here are some attempts of mine,  to get a balloon plot with the value proportional to area&#xA;&#xA;```R&#xA;# Make data&#xA;dat &lt;- data.frame(x = 3:9)&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=1,  size=x)) + geom_point() + xlim(2.5,  9.5)&#xA;&#xA;&#xA;&#xA;# linear mapping from position on scale to radius&#xA;# values 3-9 gets mapped to radius 1-6&#xA;p&#xA;# Bad: Value is NOT proportional to area&#xA;&#xA;# linear mapping from position on scale to area (I think)&#xA;# values 3-9 gets mapped to area 1-6&#xA;p + scale_area()&#xA;# Bad: Value is NOT proportional to area&#xA;&#xA;# To make value proportional to area&#xA;# values 0-9 get mapped to area 0-6&#xA;# Actual values 3-9 get mapped linearly to area 2-6&#xA;p + scale_area(limits=c(0, 9),  range=c(0, 6))&#xA;# Good: Value is proportional to area&#xA;# But this has unneeded legend key at 0&#xA;&#xA;# I think this should do something similar to above:&#xA;# Map values 3-9 to area 2-6&#xA;p + scale_area(limits=range(dat$x),  range=range(dat$x) * 2/3)&#xA;# Bad: Value is NOT proportional to area&#xA;# It doesn't actually work&#xA;# Maybe scale_area doesn't pay attention to limits in determining area?&#xA;&#xA;# This will map values 3-9 to radius 2*sqrt(3) to 2*sqrt(9)&#xA;ggplot(dat,  aes(x=x,  y=1,  size=2*sqrt(x))) + geom_point() +&#xA;    scale_size_identity()&#xA;# Good: Value is proportional to area&#xA;# But no legend&#xA;```&#xA;&#xA;I think the following is to take the 3rd method above and add `breaks`:&#xA;&#xA;```R&#xA;# To make value proportional to area&#xA;# values 0-9 get mapped to area 0-6&#xA;# Actual values 3-9 get mapped linearly to area 2-6&#xA;p + scale_area(limits=c(0, 9),  range=c(0, 6),  breaks=c(3, 5, 7, 9))&#xA;```&#xA;&#xA;But it seems unnecessarily complicated; with `scale_area` it should be easier to make a plot with both:&#xA;&#xA;* Area proportional to value&#xA;* A decent-looking legend&#xA;" />
      <Message Id="7438650" ParentId="635" UserId="86978" Date="08/01/2012 20:16:48" Content="This might be fixable by setting the `rescaler` argument in the call to `continuous_scale`. See the examples in `?scale_colour_gradientn`." />
      <Message Id="7438665" ParentId="635" UserId="4196" Date="08/01/2012 20:17:25" Content="And should `scale_area` be the default?  If so,  that will have to happen in a non-backward compatible release." />
      <Message Id="7438768" ParentId="635" UserId="86978" Date="08/01/2012 20:21:04" Content="I think it shouldn't be the default because it would be a strange thing to use for lines.&#xA;&#xA;I'd suggest adding a notes to the help pages for `geom_point()` and `scale_size_continuous()`,  saying that you may want to use `scale_area()`." />
      <Message Id="7498236" ParentId="635" UserId="4196" Date="08/04/2012 01:31:23" Content="Maybe something like this?&#xA;&#xA;```R&#xA;scale_area &lt;- function(...,  max_size = 6) { &#xA;  continuous_scale(&quot;size&quot;,  &quot;area&quot;,  &#xA;    pal = abs_area(max_size),  &#xA;    rescaler = rescale_max,  ...)&#xA; }&#xA;&#xA;abs_area &lt;- function(max) { &#xA;  function(x) rescale(sqrt(abs(x)),  c(0,  max),  c(0,  1))&#xA; }&#xA;&#xA;rescale_max &lt;- function(x,  to = c(0,  1),  from = range(x,  na.rm = TRUE)) { &#xA;  x / from[ 2 ] * to[ 2 ] &#xA; }&#xA;```&#xA;&#xA;It may also need a warning if the size is negative.  And maybe these function should live in the scales package.  &#xA;&#xA;This probably should be the default for `scale_area` but is not backwards compatible." />
      <Message Id="8409265" ParentId="635" UserId="86978" Date="09/09/2012 20:59:00" Content="To preserve backward compatibility,  how about introducing `scale_size_area` with the new code,  and deprecating the old `size_area`? This would also make the scale naming more consistent." />
      <Message Id="9398291" ParentId="635" UserId="1406263" Date="10/13/2012 00:03:28" Content="`abs_area` and `rescale_max` never made it into the code." />
      <Message Id="9400508" ParentId="635" UserId="86978" Date="10/13/2012 03:34:03" Content="Those functions are in the scales package." />
      <Message Id="9401131" ParentId="635" UserId="1406263" Date="10/13/2012 05:32:24" Content="Ah. Not sure why ggplot2 wasn't importing scales but&#xD;&#xA;rebuilding/reinstalling the packages fixed it.&#xD;&#xA;&#xD;&#xA;On Fri,  Oct 12,  2012 at 8:34 PM,  Winston Chang &lt;notifications@github.com&gt;wrote:&#xD;&#xA;&#xD;&#xA;&gt; Those functions are in the scales package.&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/635#issuecomment-9400508&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
    </Messages>
  </Topic>
  <Topic Id="636" Title="Some combinations of theme items cause errors">
    <Messages>
      <Message Id="0" ParentId="636" UserId="86978" Date="08/01/2012 21:37:52" Content="Test text.&#xA;&#xA;```R&#xA;# These three together result in an error&#xA;theme_nothing &lt;- function(base_size = 12,  base_family = &quot;Helvetica&quot;) { &#xA;    theme_grey(base_size = base_size,  base_family = base_family) %+replace%&#xA;      theme(&#xA;            axis.text = element_blank(), &#xA;            axis.ticks.length = unit(0,  &quot;lines&quot;), &#xA;            axis.ticks.margin = unit(0,  &quot;lines&quot;)&#xA;           )&#xA;     }&#xA;&#xA;qplot(1:3,  1:3) + theme_nothing()&#xA;# Error in grid.Call.graphics(L_setviewport,  pvp,  TRUE) : &#xA;#   Non-finite location and/or size for viewport&#xA;```&#xA;&#xA;If you take out any one of those three theme items,  it works.&#xA;" />
      <Message Id="7915686" ParentId="636" UserId="86978" Date="08/21/2012 20:51:22" Content="This appears to happen with zero-height gtable objects.&#xA;&#xA;```R&#xA;library(grid)&#xA;library(gtable)&#xA;r1 &lt;- rectGrob(gp=gpar(fill=&quot;red&quot;))&#xA;r2 &lt;- rectGrob(gp=gpar(fill=&quot;blue&quot;))&#xA;r3 &lt;- rectGrob(gp=gpar(fill=&quot;green&quot;))&#xA;h1 &lt;- unit(0,  &quot;mm&quot;)&#xA;h2 &lt;- unit(0,  &quot;mm&quot;)&#xA;h3 &lt;- unit(0,  &quot;mm&quot;)&#xA;gt &lt;- gtable_col(&quot;test&quot;,  grobs = list(r1,  r2,  r3),  heights = c(h1, h2, h3))&#xA;grid.newpage()&#xA;grid.draw(gt)&#xA;# Error in grid.Call.graphics(L_setviewport,  pvp,  TRUE) : &#xA;#   Non-finite location and/or size for viewport&#xA;```&#xA;&#xA;If any of the heights is set to a non-zero value,  it works fine.&#xA;&#xA;Strangely,  it seems to work when the heights are specified as `unit(c(...))` instead of `c(unit(...),  unit(...))`:&#xA;&#xA;```R&#xA;# OK&#xA;h1 &lt;- unit(c(0, 0, 0),  &quot;cm&quot;)&#xA;gt1 &lt;- gtable_col(&quot;test&quot;,  grobs = list(r1,  r2,  r3),  heights = h1)&#xA;grid.newpage()&#xA;grid.draw(gt1)&#xA;&#xA;# Error&#xA;h2 &lt;- c(unit(0, &quot;cm&quot;), unit(0, &quot;cm&quot;), unit(0, &quot;cm&quot;))&#xA;gt2 &lt;- gtable_col(&quot;test&quot;,  grobs = list(r1,  r2,  r3),  heights = h2)&#xA;grid.newpage()&#xA;grid.draw(gt1)&#xA;```&#xA;&#xA;It also works if you use `unit.c` instead of `c`:&#xA;&#xA;```R&#xA;gt &lt;- gtable_col(&quot;test&quot;,  grobs = list(r1,  r2,  r3),  heights = unit.c(h1, h2, h3))&#xA;grid.newpage()&#xA;grid.draw(gt)&#xA;```&#xA;&#xA;How you put unit objects together seems to matter:&#xA;&#xA;```R&#xA;# Notice that z2 is NOT a unit object,  which causes problems&#xA;z1 &lt;- unit(c(0, 0, 0),  &quot;cm&quot;)&#xA;z2 &lt;- c(unit(0, &quot;cm&quot;), unit(0, &quot;cm&quot;), unit(0, &quot;cm&quot;))&#xA;z3 &lt;- unit.c(unit(0, &quot;cm&quot;), unit(0, &quot;cm&quot;), unit(0, &quot;cm&quot;))&#xA;str(unclass(z1))&#xA;str(unclass(z2))&#xA;str(unclass(z3))&#xA;```" />
      <Message Id="7917408" ParentId="636" UserId="86978" Date="08/21/2012 21:41:55" Content="Even with `unit.c`,  there is still a problem when the unit is `null`,  which happens in the gtable layouts:&#xA;&#xA;```R&#xA;library(grid)&#xA;library(gtable)&#xA;r1 &lt;- rectGrob(gp=gpar(fill=&quot;red&quot;))&#xA;r2 &lt;- rectGrob(gp=gpar(fill=&quot;blue&quot;))&#xA;h1 &lt;- unit(0,  &quot;mm&quot;)&#xA;h2 &lt;- unit(0,  &quot;null&quot;)&#xA;gt &lt;- gtable_col(&quot;test&quot;,  grobs = list(r1,  r2),  heights = unit.c(h1, h2))&#xA;grid.newpage()&#xA;grid.draw(gt)&#xA;# Error in grid.Call.graphics(L_setviewport,  pvp,  TRUE) : &#xA;#   Non-finite location and/or size for viewport&#xA;```" />
      <Message Id="7925271" ParentId="636" UserId="227097" Date="08/22/2012 05:50:21" Content="`axis.ticks.length = unit(0,  &quot;lines&quot;)` makes the height or width for the ticks zero,  but still gtable of axis ticks is drawn.&#xA;I think it should not be drawn when length is zero." />
      <Message Id="8019274" ParentId="636" UserId="86978" Date="08/25/2012 02:13:50" Content="This is confirmed by Paul Murrell as a bug in grid. Hopefully it'll be fixed in the next release of R.&#xA;&#xA;I somewhat agree that the ticks shouldn't be drawn when length is zero,  but I think this is a pretty unusual case and the benefit does not outweigh cost (in terms of complexity) of adding the extra code." />
    </Messages>
  </Topic>
  <Topic Id="637" Title="Limit map gridline range. Fixes #562">
    <Messages>
      <Message Id="0" ParentId="637" UserId="86978" Date="08/02/2012 21:29:57" Content="This fixes #562. Examples that are fixed by this:&#xA;&#xA;```R&#xA;sky2 &lt;- data.frame(RA=0,  Dec=0)&#xA;&#xA;skyplot2 &lt;- qplot(RA, Dec, data=sky2, xlim=c(0, 360), ylim=c(-89.999, 89.999))&#xA;&#xA;skyplot2 + coord_map(projection=&quot;aitoff&quot;, orientation=c(89.999, 180, 0)) + &#xA;  scale_y_continuous(breaks=(-2:2)*30, limits=c(-89, 89)) + &#xA;  scale_x_continuous(breaks=(0:8)*45, limits=c(0, 360),  labels=c(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)) +&#xA;   theme(panel.grid.major = theme_line(colour='black'))&#xA;&#xA;&#xA;skyplot2 + coord_map(projection=&quot;lagrange&quot;, orientation=c(89.999, 180, 0)) + &#xA;  scale_y_continuous(breaks=(-2:2)*30, limits=c(-89.999, 89.999)) + &#xA;  scale_x_continuous(breaks=(0:8)*45, limits=c(0, 360),  labels=c(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)) +&#xA;  theme(panel.grid.major = theme_line(colour='black'))&#xA;```" />
      <Message Id="7472293" ParentId="637" UserId="4196" Date="08/03/2012 00:24:27" Content="Looks good!" />
      <Message Id="7473937" ParentId="637" UserId="86978" Date="08/03/2012 02:20:09" Content="I rebased the commit onto master at 70ea0bc732ff776d81cebf184af1b65a08c624cf." />
    </Messages>
  </Topic>
  <Topic Id="638" Title="geom_segment: remove cases where linetype is NA. Fixes #623">
    <Messages>
      <Message Id="0" ParentId="638" UserId="86978" Date="08/02/2012 22:07:08" Content="Fixes #623.&#xA;&#xA;The code is essentially copied over from `geom_point`,  except that `na.rm` is set to FALSE so it will always display the warning message; there's not the option to change it.&#xA;&#xA;It also checks x,  y,  xend,  yend,  size,  and shape for NA.&#xA;&#xA;&#xA;I also tried modifying `scale_linetype_discrete` so that it would use `na.value=&quot;01&quot;`,  hoping it would make a blank line,  but grid apparently doesn't like zeros in the `lty`:&#xA;&#xA;```&#xA;Error in grid.Call.graphics(L_segments,  x$x0,  x$y0,  x$x1,  x$y1,  x$arrow) : &#xA;  invalid line type: zeroes are not allowed&#xA;```&#xA;" />
      <Message Id="7472302" ParentId="638" UserId="4196" Date="08/03/2012 00:24:53" Content="Why no `na.rm` argument?" />
      <Message Id="7473747" ParentId="638" UserId="86978" Date="08/03/2012 02:07:39" Content="Good point,  I'll add it in there." />
    </Messages>
  </Topic>
  <Topic Id="639" Title="Loop over taus in stat_quantile.">
    <Messages>
      <Message Id="0" ParentId="639" UserId="4196" Date="08/03/2012 21:55:59" Content="Fixes #188.  Also general tidy up of code and improved examples" />
      <Message Id="8019411" ParentId="639" UserId="86978" Date="08/25/2012 02:33:47" Content="NEWS item for this change?" />
      <Message Id="8566634" ParentId="639" UserId="86978" Date="09/14/2012 16:17:54" Content="Rebased and merged at 53912e788dac033f9788712e94e5b6b9cbaa206a." />
    </Messages>
  </Topic>
  <Topic Id="640" Title="guide_legend should omit the extra title padding if there's no title">
    <Messages>
      <Message Id="0" ParentId="640" UserId="325899" Date="08/03/2012 23:13:15" Content="In the following example,  the legend background covers more space above the legend items than it does on the other three sides.  This appears to be because the padding below the title is still present even though the title has been suppressed (with legend.title=theme_blank()).  Suppressing the title should also make this extra padding go away.&#xA;&#xA;    library(grid)&#xA;    library(ggplot2)&#xA;    library(reshape2)&#xA;&#xA;    dat &lt;- melt(data.frame(x=1:20, &#xA;                           a=cumsum(rnorm(20)), &#xA;                           b=cumsum(runif(20)), &#xA;                           c=cumsum(rexp(20))), &#xA;                id.vars='x')&#xA;&#xA;    ggplot(dat,  aes(x=x,  y=value,  colour=variable)) +&#xA;      geom_line() +&#xA;      opts(legend.title=theme_blank(), &#xA;           legend.key.height=unit(0.6, &quot;lines&quot;), &#xA;           legend.background=theme_rect(colour=&quot;black&quot;), &#xA;           legend.margin=unit(0, &quot;cm&quot;))" />
      <Message Id="35941291" ParentId="640" UserId="4196" Date="02/24/2014 21:29:37" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="68401506" ParentId="640" UserId="3807850" Date="12/30/2014 21:39:55" Content="line 312 of ``guide-legend.r``&#xD;&#xA;&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/guide-legend.r#L312&#xD;&#xA;&#xD;&#xA; # title&#xD;&#xA;title.theme &lt;- guide$title.theme %||% calc_element(&quot;legend.title&quot;,  theme)&#xD;&#xA;title.hjust &lt;- title.x &lt;- guide$title.hjust %||% theme$legend.title.align %||% 0&#xD;&#xA;title.vjust &lt;- title.y &lt;- guide$title.vjust %||% 0.5&#xD;&#xA;&#xD;&#xA;looks like ``title.vjust`` is assigned 0.5 rather than the 0  ``title.hjust`` is getting.&#xD;&#xA;&#xD;&#xA;(just an idea)" />
    </Messages>
  </Topic>
  <Topic Id="641" Title="Update R/theme-defaults.r">
    <Messages>
      <Message Id="0" ParentId="641" UserId="18970" Date="08/06/2012 23:31:08" Content="Such a minimal theme is generally quite popular; rather than redefining it in many packages,  could it be included here?" />
      <Message Id="7943423" ParentId="641" UserId="86978" Date="08/22/2012 18:06:09" Content="Thanks - can you please re-indent it so it looks like the code for `theme_bw`?" />
      <Message Id="8019330" ParentId="641" UserId="86978" Date="08/25/2012 02:21:14" Content="Rebased,  cleaned up,  and merged at 96132d08f73d71c38aeef6a4b4f5c14c92e72462" />
      <Message Id="8895408" ParentId="641" UserId="424139" Date="09/26/2012 16:10:33" Content="As a similar kind of thing,  I would suggest a theme_normal as in&#xA;&#xA;```&#xA;theme_barebones &lt;- function(base_size = 12,  base_family = &quot;&quot;){ &#xA;  theme_bw(base_size,  base_family) %+replace%&#xA;    theme(&#xA;      panel.border = element_rect(fill = NA,  colour = NA), &#xA;      axis.line=element_line(colour=&quot;black&quot;), &#xA;      panel.grid.major = element_line(colour = NA), &#xA;      panel.grid.minor = element_line(colour = NA)&#xA;    )&#xA; }&#xA;&#xA;qplot(displ,  hwy,  data = mpg) + theme_barebones()&#xA;```&#xA;&#xA;I don't know what the policies are these days about adding themes into ggplot2,  but it seems reasonable to put in a collection of prominent ones." />
      <Message Id="8900798" ParentId="641" UserId="86978" Date="09/26/2012 18:50:48" Content="I like this theme. What about calling it `theme_classic`?" />
      <Message Id="8903199" ParentId="641" UserId="424139" Date="09/26/2012 20:03:35" Content="Yea,  much better!" />
    </Messages>
  </Topic>
  <Topic Id="642" Title="Change proto() to gg(proto()). Fixes #583">
    <Messages>
      <Message Id="0" ParentId="642" UserId="86978" Date="08/07/2012 17:35:18" Content="This fixes #583. It passes all tests,  and visual tests are unchanged.&#xA;&#xA;I'm not sure it should be merged though -- although it solves the printing problem,  it'll break all code where people define their own geoms and stats in external packages.&#xA;&#xA;There's also some weird behavior with printing that I don't understand. Depending on how you print it,  it might or might not tell you that it's a `ggproto` object:&#xA;&#xA;```R&#xA;str(z)&#xA;# proto object &#xA;#  $ mapping    : NULL &#xA;#  $ geom_params:List of 1 &#xA;#  $ stat_params: Named list() &#xA;#  $ stat       :proto object  &#xA;#   ..parent: proto object  &#xA;#  .. .. parent: proto object  &#xA;#  $ inherit.aes: logi TRUE &#xA;#  $ geom       :proto object  &#xA;#   ..parent: proto object  &#xA;#  .. .. parent: proto object  &#xA;#  $ position   :proto object  &#xA;#   ..parent: proto object  &#xA;#  .. .. parent: proto object  &#xA;#  .. .. .. parent: proto object  &#xA;#  $ subset     : NULL &#xA;#  $ data       : list() &#xA;#   ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot; &#xA;#  $ show_guide : logi NA &#xA;#  parent: proto object &#xA;&#xA;z&#xA;# geom_point: na.rm = FALSE &#xA;# stat_identity:  &#xA;# &lt;environment: 0x10c9fcb08&gt;&#xA;# attr(, &quot;class&quot;)&#xA;# [ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xA;&#xA;class(z)&#xA;# [ 1 ] &quot;ggproto&quot;     &quot;proto&quot;       &quot;environment&quot;&#xA;```&#xA;&#xA;There's another bizarre property of proto objects. If you set the class via `structure()`,  even if you _don't_ assign it back to the variable,  it modifies the class of the object.&#xA;&#xA;```R&#xA;class(z)&#xA;# [ 1 ] &quot;ggproto&quot;     &quot;proto&quot;       &quot;environment&quot;&#xA;&#xA;structure(z,  class = c(&quot;foo&quot;,  class(z)))&#xA;# geom_point: na.rm = FALSE &#xA;# stat_identity:  &#xA;# &lt;environment: 0x10c9fcb08&gt;&#xA;# attr(, &quot;class&quot;)&#xA;# [ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xA;&#xA;class(z)&#xA;# [ 1 ] &quot;foo&quot;         &quot;ggproto&quot;     &quot;proto&quot;       &quot;environment&quot;&#xA;```&#xA;&#xA;I'm concerned that,  because proto is so opaque and confusing,  there may be unintended consequences of this change.&#xA;" />
      <Message Id="7574506" ParentId="642" UserId="4196" Date="08/08/2012 04:06:39" Content="Hmmm,  it will break printing,  but it shouldn't be anything else? And it will stop breaking for other's who are using proto.&#xA;&#xA;I suspect this will be the last release with proto,  so it probably doesn't matter much either way." />
      <Message Id="7731976" ParentId="642" UserId="86978" Date="08/14/2012 16:47:44" Content="Since we're going to change to S3 anyway,  I'd prefer not to merge these changes." />
    </Messages>
  </Topic>
  <Topic Id="643" Title="Remove memoise. Fixes #592">
    <Messages>
      <Message Id="0" ParentId="643" UserId="86978" Date="08/07/2012 18:12:38" Content="This fixes #592. It passes all tests,  and visual tests are unchanged.&#xA;&#xA;It did make a warning go away in a couple visual tests in `scale-date.r`,  though:&#xA;&#xA;```&#xA;dt + scale_x_date(breaks = &quot;3 weeks&quot;)&#xA;# Warning message:&#xA;# 'package:ggplot2' may not be available when loading &#xA;```&#xA;" />
      <Message Id="7574481" ParentId="643" UserId="4196" Date="08/08/2012 04:04:58" Content="Looks good." />
    </Messages>
  </Topic>
  <Topic Id="644" Title="geom_path: colour maps to group with factored color argument">
    <Messages>
      <Message Id="0" ParentId="644" UserId="1662852" Date="08/08/2012 09:39:05" Content=" I wanted to colour a path by a colour&#xA;```R &#xA;d&lt;-data.frame(x=c(1, 1, 2, 2),  y=c(2, 1, 1, 2),  c=factor(c(1, 2, 1, 2)))&#xA;&#xA; ggplot(d,  aes(x=x, y=y, colour=c))+geom_path()&#xA;```&#xA; results in a cross while the path is square&#xA;```R&#xA; ggplot(d,  aes(x=x, y=y))+geom_path()&#xA;```&#xA; gives the right square&#xA; now try a continues colour&#xA;```R&#xA; d&lt;-data.frame(x=c(1, 1, 2, 2),  y=c(2, 1, 1, 2),  c=1:4)&#xA; ggplot(d,  aes(x=x, y=y))+geom_path()&#xA; ggplot(d,  aes(x=x, y=y, colour=c))+geom_path()&#xA;```&#xA; both seem to work fine &#xA; it also work if i define one continues group&#xA;```R&#xA;d&lt;-data.frame(x=c(1, 1, 2, 2),  y=c(2, 1, 1, 2),  c=factor(c(1, 2, 1, 2)),  g=rep(1, 4))&#xA; ggplot(d,  aes(x=x, y=y, colour=c,  group=g))+geom_path()&#xA;````" />
      <Message Id="7584972" ParentId="644" UserId="4196" Date="08/08/2012 14:26:24" Content="Yes,  this is just a consequence of the way the grouping works in ggplot2 - if you don't specifically define it,  it's taken as the interaction of all categorical variables in the plot." />
    </Messages>
  </Topic>
  <Topic Id="645" Title="Potential error in gridArrange() switch statement">
    <Messages>
      <Message Id="0" ParentId="645" UserId="330036" Date="08/09/2012 02:13:46" Content="First,  two points:&#xA;&#xA;1. Technically I think this is an issue with [ `gridArrange()` ][ 1 ] in @baptiste's gridExtra package,  but I depend on that function for my plot layout.&#xA;2. I'm using the CRAN version of @baptiste's package,  so maybe commit baptiste@6178d07113736121839e79c1958568f8f427061e fixes this error?&#xA;&#xA;## Steps to reproduce&#xA;&#xA;```r&#xA;# Loading the Release Candidate for ggplot2&#xA;install.packages(&quot;granovaGG&quot;)&#xA;install.packages(&quot;devtools&quot;) # optional&#xA;library(devtools)&#xA;library(granovaGG)&#xA;dev_mode()&#xA;install_github(&quot;gtable&quot;,  branch = &quot;gtable-0.1.1-rc&quot;)&#xA;install_github(&quot;scales&quot;,  branch = &quot;scales-0.2.2-rc&quot;)&#xA;install_github(&quot;ggplot2&quot;,  branch = &quot;ggplot2-0.9.2-rc&quot;)&#xA;&#xA;# Throwing the presumable error&#xA;data(arousal)  &#xA;contrasts22 &lt;- data.frame( c(-.5, -.5, .5, .5),  &#xA;  c(-.5, .5, -.5, .5),  c(.5, -.5, -.5, .5) )&#xA;names(contrasts22) &lt;- c(&quot;Drug.A&quot;,  &quot;Drug.B&quot;,  &quot;Drug.A.B&quot;)&#xA;granovagg.contr(arousal,  contrasts = contrasts22)&#xA;```&#xA;&#xA;## Contents of Error Message&#xA;&#xA;```&#xA;Error in switch(ct,  ggplot = ggplotGrob(grobs[ [ ii.table ] ]),  trellis = latticeGrob(grobs[ [ ii.table ] ]),   : &#xA;  EXPR must be a length 1 vector&#xA;```&#xA;&#xA;/cc @WilDoane &#xA;&#xA;[ 1 ]: https://github.com/baptiste/gridextra/blob/master/R/arrange.r#L95-99" />
      <Message Id="7603879" ParentId="645" UserId="18970" Date="08/09/2012 02:46:03" Content="i noticed it this morning,  https://github.com/baptiste/gridextra/commit/6178d07113736121839e79c1958568f8f427061e fixes it but I also sent an email to ggplot2-dev to know more about the new class &quot;gg&quot;,  &quot;ggplot&quot;" />
      <Message Id="7603916" ParentId="645" UserId="330036" Date="08/09/2012 02:48:39" Content="@baptiste - If you don't submit a new version of your package,  though,  I can't make my package depend on the fix you've issued. Will you be submitting gridExtra back to CRAN with an updated version number? If so,  what is it,  so I can be sure my package depends on the new version of yours." />
      <Message Id="7603935" ParentId="645" UserId="18970" Date="08/09/2012 02:50:44" Content="I'm testing it,  version 0.9.1. Unfortunately I'm leaving tomorrow for a month,  so we'll have to cross fingers that all goes smoothly with the CRAN submission..." />
      <Message Id="7605955" ParentId="645" UserId="18970" Date="08/09/2012 05:55:31" Content="on [ its way to CRAN ](http://cran.r-project.org/web/packages/gridExtra/index.html) now" />
    </Messages>
  </Topic>
  <Topic Id="646" Title="ggplot stopped working after latest update">
    <Messages>
      <Message Id="0" ParentId="646" UserId="2135886" Date="08/11/2012 16:15:20" Content="Hi, &#xA;&#xA;I just updated ggplot to the latest version &#xA;&#xA;Installing package(s) into ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library’ (as ‘lib’ is unspecified)&#xA;trying URL 'http://www.stats.bris.ac.uk/R/bin/macosx/leopard/contrib/2.15/ggplot2_0.9.1.tgz'&#xA;&#xA;and then running it on any dataset of my choice leads to:&#xA;&#xA;Error in as.trans(trans) : internal error -3 in R_decompress1&#xA;In addition: Warning message:&#xA;In as.trans(trans) : restarting interrupted promise evaluation&#xA;&#xA;Data plots fine with lattice. " />
      <Message Id="7669529" ParentId="646" UserId="86978" Date="08/11/2012 19:34:20" Content="Try updating your packages with `update.packages()` and starting with a new R session. I think this probably has something to do with the scales package being out of date." />
    </Messages>
  </Topic>
  <Topic Id="647" Title="coord_flip() and coord_cartesian() are exclusive">
    <Messages>
      <Message Id="0" ParentId="647" UserId="393576" Date="08/13/2012 19:45:50" Content="It seems like i can't use `coord_cartesian()` with `coord_flip()`. It is one or the other,  but can't combine them (always using the last one).&#xA;&#xA;demo:&#xA;```&#xA;# regular&#xA;p &lt;- qplot(disp,  wt,  data=mtcars) + geom_smooth(method = &quot;loess&quot;)&#xA;&#xA;# just flip&#xA;p + coord_flip()&#xA;# crop then flip (only flip)&#xA;p + coord_cartesian(ylim = c(3, 5),  xlim = c(100,  400)) + coord_flip()&#xA;&#xA;# just crop&#xA;p + coord_cartesian(ylim = c(3, 5),  xlim = c(100,  400))&#xA;# flip then crop (only crop)&#xA;p + coord_flip() + coord_cartesian(ylim = c(3, 5),  xlim = c(100,  400))&#xA;```" />
      <Message Id="7706420" ParentId="647" UserId="393576" Date="08/13/2012 20:11:33" Content="I just found the solution...&#xA;```&#xA;p + coord_flip(ylim = c(3, 5),  xlim = c(100,  400))&#xA;```&#xA;Sorry for the noise" />
    </Messages>
  </Topic>
  <Topic Id="648" Title="Better error messages for stat_bin">
    <Messages>
      <Message Id="0" ParentId="648" UserId="86978" Date="08/20/2012 21:17:39" Content="This fixes #632. It provides clearer error messages when the user makes a graph with `stat_bin` and also maps something to a `y` value.&#xA;&#xA;A couple notes:&#xA;&#xA;* I'm not sure the error message will be clear to a novice -- someone who uses `geom_bar` might not even realize that they're using `stat=&quot;bin&quot;`.&#xA;* It might break existing user code that relies on the buggy behavior where you can use `stat=&quot;bin&quot;` and map values to y,  provided that there's only one y value per group. This could possibly affect a lot of existing code.&#xA;&#xA;It should also have some tests added." />
      <Message Id="7943333" ParentId="648" UserId="86978" Date="08/22/2012 18:03:41" Content="I've changed the error to a very long warning message. Even though it's really long,  I think it is worth keeping,  since this is probably a very common issue and it can be confusing." />
    </Messages>
  </Topic>
  <Topic Id="649" Title="Deprecate plotmatrix()">
    <Messages>
      <Message Id="0" ParentId="649" UserId="167164" Date="08/21/2012 02:22:24" Content="Can we get a message in plotmatrix that GGally is prefered? I was using it for a while,  not realising that it's basically deprecated,  until I read https://github.com/hadley/ggplot2/issues/158. " />
      <Message Id="7943823" ParentId="649" UserId="86978" Date="08/22/2012 18:18:01" Content="Thanks,  fixed in 2431a1593384c23668d4d1d9932d2ecad2a46f4e." />
    </Messages>
  </Topic>
  <Topic Id="650" Title="ggsave() only saves single plot from ggpairs grid">
    <Messages>
      <Message Id="0" ParentId="650" UserId="167164" Date="08/21/2012 02:28:48" Content="Pretty self explanitory: &#xA;&#xA;    ggpairs(iris,  colour='Species',  alpha=0.4)&#xA;    ggsave(&quot;/tmp/iris_pairs.png&quot;)&#xA;&#xA;Only plots a basically empty graph (one of the diagonals - no data,  just labels). Would be good if it plotted the whole grid." />
      <Message Id="8696466" ParentId="650" UserId="86978" Date="09/19/2012 16:15:03" Content="Sorry,  `ggsave` just won't work in this situation,  since it only saves the last ggplot object,  and ggpairs creates many ggplot objects. You can still use `pdf()` or `png()` to save the image." />
      <Message Id="9249525" ParentId="650" UserId="167164" Date="10/09/2012 05:35:42" Content="Ok,  thanks.&#xD;&#xA;&#xD;&#xA;For others in this situation,  `dev.copy2pdf()` also works retrospectively,  although it certainly isn't as nice as ggsave. &#xD;&#xA;&#xD;&#xA;`grid.arrange()` plots also have this problem." />
      <Message Id="48198339" ParentId="650" UserId="1019198" Date="07/07/2014 15:59:41" Content="A little bit late to the party,  but if you need SVG output,  you can use&#xD;&#xA;```r&#xD;&#xA;svg(&quot;filename.svg&quot;, height=8, width=8)&#xD;&#xA;ggpairs(data) &#xD;&#xA;dev.off()&#xD;&#xA;```&#xD;&#xA;Cheers, &#xD;&#xA;Max" />
      <Message Id="65086626" ParentId="650" UserId="9048995" Date="12/01/2014 16:04:58" Content="For future reference here is a small function that creates and saves a ggpairs plot to a png file&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;createCorrelationPlots &lt;- function(path,  filename,  df) { &#xD;&#xA;  corrPlot &lt;- ggpairs(&#xD;&#xA;    df,  diag=list(continuous=&quot;density&quot;),  axisLabels='show')&#xD;&#xA;  png(file.path(path,  filename),  height=1000,  width=1000)&#xD;&#xA;  print(corrPlot)&#xD;&#xA;  dev.off()&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Notice the explicit call print(corrPlot).&#xD;&#xA;Feel free to change png to pdf or whatever output you want,  check Table 1.1 [ here ](https://www.stat.auckland.ac.nz/~paul/RGraphics/chapter1.pdf) for available formats." />
    </Messages>
  </Topic>
  <Topic Id="651" Title="geom_tile() potential issues with width,  height">
    <Messages>
      <Message Id="0" ParentId="651" UserId="253192" Date="08/21/2012 17:09:50" Content="Maybe I am wrong,  I always think if the aesthetics control is not mapped to variable,  I don't  have to pass it with aes(). But looks it's not true with geom_tile.&#xA;&#xA;1.  Here is an example&#xA;&#xA;```&#xA;# Generate data&#xA;library(ggplot2)&#xA;pp &lt;- function (n, r=4){  &#xA;  x &lt;- seq(-r*pi,  r*pi,  len=n) &#xA;  df &lt;- expand.grid(x=x,  y=x) &#xA;  df$r &lt;- sqrt(df$x^2 + df$y^2) &#xA;  df$z &lt;- cos(df$r^2)*exp(-df$r/6) &#xA;  df &#xA; } &#xA;&#xA;## doens't work&#xA;ggplot(pp(20)) + geom_tile(aes(x = x,  y = y,  fill = z),  width = 0.3,  height = 0.3)&#xA;## works&#xA;ggplot(pp(20)) + geom_tile(aes(x = x,  y = y,  fill = z,  width = 0.3,  height = 0.3))&#xA;```&#xA;```&#xA;&gt; sessionInfo()&#xA;R Under development (unstable) (2012-07-17 r59871)&#xA;Platform: x86_64-unknown-linux-gnu (64-bit)&#xA;&#xA;locale:&#xA; [ 1 ] LC_CTYPE=zh_CN.UTF-8       LC_NUMERIC=C              &#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xA;&#xA;attached base packages:&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xA;&#xA;other attached packages:&#xA;[ 1 ] ggplot2_0.9.1&#xA;&#xA;loaded via a namespace (and not attached):&#xA; [ 1 ] colorspace_1.1-1   compiler_2.16.0    dichromat_1.2-4    digest_0.5.1      &#xA; [ 5 ] grid_2.16.0        labeling_0.1       MASS_7.3-19        memoise_0.1       &#xA; [ 9 ] munsell_0.3        plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5&#xA;[ 13 ] reshape2_1.2.1     scales_0.2.1       stringr_0.6.1      tools_2.16.0    &#xA;```" />
      <Message Id="8568664" ParentId="651" UserId="86978" Date="09/14/2012 17:20:38" Content="This looks like an issue with `stat_identity`:&#xA;&#xA;```R&#xA;# Width works with bin&#xA;ggplot(PlantGrowth,  aes(x=group)) + geom_boxplot(width=.2,  stat=&quot;bin&quot;)&#xA;&#xA;# Width doesn't work with identity&#xA;pgsub &lt;- PlantGrowth[ c(1, 11, 21),   ]&#xA;ggplot(pgsub,  aes(x=group,  y=weight)) + geom_bar(width=.2,  stat=&quot;identity&quot;)&#xA;&#xA;# Width works when in aes()&#xA;ggplot(pgsub,  aes(x=group,  y=weight)) + geom_bar(aes(width=.2),  stat=&quot;identity&quot;)&#xA;&#xA;```&#xA;" />
      <Message Id="9462776" ParentId="651" UserId="86978" Date="10/15/2012 21:39:58" Content="Fixed in 06914a7940822a782e43f7a33cd90e223e128b32." />
    </Messages>
  </Topic>
  <Topic Id="652" Title="trim parameter of stat_density does not work">
    <Messages>
      <Message Id="0" ParentId="652" UserId="1153434" Date="08/23/2012 15:33:38" Content="The trim parameter of stat_density is not working.See the plots in the [ documentation ](http://had.co.nz/ggplot2/docs/stat_density.html): most of them are trimmed,  altough trim is FALSE by default.&#xA;&#xA;Culprit is the passing of range to the call to density,  which trims its estimate to the data range,  regardless of trim,  instead of to a range determined by the density parameter cut=3 as the documentation says.&#xA;&#xA;If `range` is removed,  everything works fine." />
      <Message Id="7976672" ParentId="652" UserId="1153434" Date="08/23/2012 17:09:52" Content="Hadley responded on the ggplot2-dev group:&#xA;&quot;See the discussion in #595.&#xA;&#xA;The problem is that I'd rather fix it properly by using a different&#xA;class of density estimators,  but that's a backward incompatible&#xA;change,  so it needs to wait for 0.10. &quot;&#xA;&#xA;So this is more complicated than I thought,  and overlaps with #595." />
    </Messages>
  </Topic>
  <Topic Id="653" Title="does discrete x variable work?">
    <Messages>
      <Message Id="0" ParentId="653" UserId="227097" Date="08/25/2012 09:14:19" Content="scales:  8fa5a67b2556da16dff076af4f9ecf564918942f&#xA;gtable: d20948645d0a0a8b3e83dd92ed8e6358f2c1c10c&#xA;ggplot2: e4fd80a3b2c46e2e540890b5f8c39390bbada438&#xA;&#xA;&#xA;```&#xA;qplot(letters[ 1:3 ],  1:3)&#xA;```&#xA;&#xA;fails to:&#xA;&#xA;```&#xA;Error: Discrete value supplied to continuous scale&#xA;```&#xA;&#xA;" />
      <Message Id="8030126" ParentId="653" UserId="86978" Date="08/26/2012 04:29:03" Content="It works fine for me,  with the same versions of the packages. Can you provide more information?" />
      <Message Id="8031274" ParentId="653" UserId="227097" Date="08/26/2012 08:27:27" Content="By `load_all`ing the relevant packages:&#xA;&#xA;```&#xA;load_all(&quot;~/Dropbox/dev/R/scales/&quot;)&#xA;load_all(&quot;~/Dropbox/dev/R/gtable/&quot;)&#xA;load_all(&quot;~/Dropbox/dev/R/ggplot2/&quot;)&#xA;```&#xA;&#xA;by `library`ing,  it wokrs:&#xA;&#xA;Am I missing something (maybe w.r.t. devtools)?&#xA;" />
      <Message Id="8046689" ParentId="653" UserId="86978" Date="08/27/2012 04:09:26" Content="It's possible that the old version of devtools loaded things in a way that didn't work quite right.&#xA;&#xA;Try installing the latest github version of devtools and doing `load_all` -- there have been a lot of changes,  and it now loads packages in a way that is much more like loading a package with `library()`.&#xA;" />
      <Message Id="8047033" ParentId="653" UserId="227097" Date="08/27/2012 04:59:36" Content="Worked with the latest devtools,  thanks.&#xA;BTW,  why was the `~/Rpackages` support removed?" />
      <Message Id="8047140" ParentId="653" UserId="86978" Date="08/27/2012 05:11:44" Content="I'm glad it works for you.&#xA;&#xA;Hadley decided that removing `~/.Rpackages` would make thing simpler,  and he thought he was the only person who used it. I guess he was wrong about the second part. :)" />
      <Message Id="8047152" ParentId="653" UserId="227097" Date="08/27/2012 05:13:48" Content="&gt;  I guess he was wrong about the second part. :)&#xA;&#xA;Definitely yes :-)&#xA;Here is the other person who loves the `.Rpackages`.&#xA;&#xA;But okey,  I can manage things by myself." />
    </Messages>
  </Topic>
  <Topic Id="654" Title="Add facet headers to facet_grid">
    <Messages>
      <Message Id="0" ParentId="654" UserId="86978" Date="08/26/2012 05:17:30" Content="This is a first pass at adding facet headers. Examples here: http://rpubs.com/wch/1306&#xA;&#xA;Things that need to be done:&#xA;&#xA;* Improve appearance&#xA;* Decide whether to allow this for `facet_wrap`,  and if so,  how&#xA;* Control over whether each header is drawn&#xA;* Syntax for setting header labels to something other than the default&#xA;* Figure out what to do when facet has two variables on one axis,  like `facet_grid(. ~ am + cyl)`&#xA;&#xA;Maybe the labels could be controlled like this:&#xA;&#xA;```&#xA;facet_grid(am ~ cyl,  titles = &quot;auto/manual&quot; ~ NULL)&#xA;```&#xA;&#xA;Where `NULL` means not to draw facet headers for that variable." />
      <Message Id="30324903" ParentId="654" UserId="1741643" Date="12/11/2013 14:39:23" Content="I have an implementation for &#xD;&#xA;&#xD;&#xA;&gt; Syntax for setting header labels to something other than the default&#xD;&#xA;&#xD;&#xA;using the labeller (called with `value = NULL`). Would you be available to review it?" />
      <Message Id="35941342" ParentId="654" UserId="4196" Date="02/24/2014 21:30:06" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="35954061" ParentId="654" UserId="1741643" Date="02/24/2014 23:33:34" Content="@wch: Would you like to collaborate on this feature?" />
      <Message Id="36020276" ParentId="654" UserId="86978" Date="02/25/2014 15:38:28" Content="@krlmlr Unfortunately,  I'm pretty busy with other stuff at the moment. I'm happy to look at whatever you come up with though. Feel free to base it off this if you want." />
      <Message Id="36021577" ParentId="654" UserId="1741643" Date="02/25/2014 15:49:00" Content="@wch: Please see wch/ggplot2#6." />
    </Messages>
  </Topic>
  <Topic Id="655" Title="stat_sum uses numbers with decimals even if data has none">
    <Messages>
      <Message Id="0" ParentId="655" UserId="2223593" Date="08/26/2012 21:01:44" Content="I had already posted this to the mailing list in https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/0YO0Ez3Z10s but received no reply to solve this specific issue. After using Google I figured out there is a bug tracker for ggplot2 here,  which was not advertised on the ggplot2 website to my surprise.&#xA;&#xA;I made some scatter plots which use stat_sum to display sums of observations. Please use the script and the data I attach (apparently I can't attach right away,  will do so after submitting the issue) to see how this doesn't work completely as would be expected.&#xA;&#xA;The data only contains integers. The plot scatterAPPRES_ggplot2.png is drawn correctly and you see integers from one to five in the legend. However,  with the scatter plots for BSPRES,  FPRSSR and FRAGHA stat_sum decides to use numbers with decimals (1.5 and so on).&#xA;&#xA;Besides that,  I think it deserves to be mentioned that ggplot2 is an excellent package,  it produces much better graphics than the vanilla R functionality." />
      <Message Id="8037215" ParentId="655" UserId="2223593" Date="08/26/2012 21:05:10" Content="Apparently I can't attach files at all,  which is silly. Anyway,  just follow the link and download the two files attached there." />
      <Message Id="8125200" ParentId="655" UserId="4196" Date="08/29/2012 13:31:33" Content="As per discussion on the mailing list,  this isn't a bug - if you want to only display integers on the legend,  you'll need to set them (using `breaks` yourself)." />
    </Messages>
  </Topic>
  <Topic Id="656" Title="Allow parsing expressions in facet_wrap">
    <Messages>
      <Message Id="0" ParentId="656" UserId="86978" Date="09/04/2012 16:53:22" Content="Fixes #25.&#xA;&#xA;This should have visual tests before it's merged." />
      <Message Id="8270409" ParentId="656" UserId="86978" Date="09/04/2012 16:54:24" Content="Some useful examples:&#xA;&#xA;&#xA;```R&#xA;&#xA;m &lt;- mpg&#xA;levels(m$drv) &lt;- paste(&quot;Y[ &quot;,  1:3,  &quot; ]&quot;,  sep=&quot;&quot;)&#xA;p &lt;- ggplot(m,  aes(x = displ,  y = cty)) + geom_point()&#xA;p + facet_wrap(~drv,  labeller = label_parsed)&#xA;p + facet_wrap(~drv+fl,  labeller = label_parsed)&#xA;p + facet_wrap(~drv)&#xA;p + facet_wrap(~drv+fl)&#xA;p + facet_wrap(~drv+fl,  labeller = label_both)&#xA;```" />
      <Message Id="8275537" ParentId="656" UserId="411740" Date="09/04/2012 19:28:06" Content="That doesn't work with multiple factors because &quot;, &quot; is not a possible plotmath expression. I fixed it but I'm not sure how  submit it." />
      <Message Id="8275630" ParentId="656" UserId="86978" Date="09/04/2012 19:31:12" Content="See here:&#xA;https://github.com/hadley/ggplot2/wiki/Developing-ggplot2-using-github&#xA;&#xA;Although it may be a bit more complicated since you're making a modification of my branch,  instead of Hadley's master branch. If that ends up being too much trouble,  you can just cut/paste the patch here. " />
      <Message Id="8285776" ParentId="656" UserId="86978" Date="09/05/2012 02:23:12" Content="I think its better to use an expression list,  which separates the expressions with commas - see my latest commit.&#xA;&#xA;It will render the example you provided,  with commas:&#xA;&#xA;```R&#xA;p + facet_wrap(~drv+fl,  labeller = label_parsed)&#xA;```&#xA;&#xA;It might be better to add a new labeler function to scales that makes a list automatically." />
      <Message Id="8290794" ParentId="656" UserId="86978" Date="09/05/2012 08:15:04" Content="The problem is in `train_position`,  where it loops over calls to `scale_apply`,  for each layer. In `scale_apply`,  it calls `scale_train.discrete`,  which uses the `drop` parameter of the scale object.&#xA;&#xA;I think the way to do this is to first loop over all the layers with `scale_train`,  then do the drop afterward. But doing that correctly could be tricky." />
      <Message Id="8313996" ParentId="656" UserId="4196" Date="09/05/2012 21:10:30" Content="The problem with this approach is that it doesn't allow for other labeller functions.  To really fix this we need a more flexible specification of labeller functions - they should take a matrix (or other richer data structure) as an argument.  But this will mean that we need to rewrite the existing labeller functions and hence is an API breaking change,  which means we need to push it off to a future version." />
      <Message Id="21980737" ParentId="656" UserId="88556" Date="08/02/2013 01:06:09" Content="This is making me sad... +1 for future version feature request.&#xD;&#xA;&#xD;&#xA;Thanks!" />
      <Message Id="22437454" ParentId="656" UserId="5202481" Date="08/10/2013 10:17:35" Content="Same here. This doesn't seem to have been fixed. writing a (variable-specific) labeler function every time I'd like to relabel facets seems tedious. Sorry,  if this has been fixed and I missed it. cheers." />
      <Message Id="35941399" ParentId="656" UserId="4196" Date="02/24/2014 21:30:42" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="46570045" ParentId="656" UserId="4465050" Date="06/19/2014 14:50:10" Content="Hello, &#xD;&#xA;&#xD;&#xA;I tried Winston's patch and it seems fully functional,  on par with facet_grid's labeller.&#xD;&#xA;Can I ask what was wrong? If there is a problem I'd like to try to solve it." />
      <Message Id="111701524" ParentId="656" UserId="4465050" Date="06/13/2015 11:36:28" Content="@hadley what was the problem with this labeller exactly? last time I tried it it seemed to work fine. If it works in most situations,  maybe it'd still be nice to have it with informative error messages when it doesn't work." />
      <Message Id="111704706" ParentId="656" UserId="4196" Date="06/13/2015 12:09:53" Content="@lionel- I don't remember. If you want to do a fresh PR now is a good time. " />
    </Messages>
  </Topic>
  <Topic Id="657" Title="train_position: combine data with rbind.fill before training scales">
    <Messages>
      <Message Id="0" ParentId="657" UserId="86978" Date="09/05/2012 08:39:32" Content="This is a potential fix for #577.&#xA;&#xA;Instead of training the scales on each layer separately,  the data frames in the list `data` are combined first with `rbind.fill`,  and then the scales are trained.&#xA;&#xA;It fixes the test cases from above. Here are some more tests. It now gives warnings about when you mix in layers with continuous values.&#xA;&#xA;```R&#xA;# Mixing discrete and continuous - Warning&#xA;ggplot() + p1 + p2 + geom_point(aes(x, y),  data=data.frame(x=1.2,  y=1.8),  colour=&quot;blue&quot;)&#xA;# With extra column - Warning&#xA;ggplot() + p1 + p2 + geom_point(aes(x, y, colour=g),  data=data.frame(x=1.2,  y=1.8,  g=&quot;foo&quot;))&#xA;# Warning message:&#xA;# In `[ &lt;-.factor`(`*tmp*`,  rng,  value = c(1L,  2L,  1L,  NA)) :&#xA;#   invalid factor level,  NAs generated&#xA;&#xA;&#xA;# Layer with data with new factor levels - OK&#xA;ggplot() + p1 + p2 + geom_point(aes(x, y),  data=data.frame(x=1.3,  y=&quot;c&quot;),  colour=&quot;blue&quot;)&#xA;# With extra column - OK&#xA;ggplot() + p1 + p2 + geom_point(aes(x, y, colour=g),  data=data.frame(x=1.3,  y=&quot;c&quot;,  g=&quot;foo&quot;))&#xA;```&#xA;&#xA;This change passes all tests. But I have a feeling that there are cases where adding in layers with different data and aesthetics might have different behavior now." />
      <Message Id="8296418" ParentId="657" UserId="4196" Date="09/05/2012 12:35:00" Content="And this definitely needs a test case so we're aware of it in the future." />
    </Messages>
  </Topic>
  <Topic Id="658" Title="ggplot2 0.9.2 - Error using element_text in guide_legend()">
    <Messages>
      <Message Id="0" ParentId="658" UserId="1090101" Date="09/06/2012 23:05:44" Content="Hi, &#xA;&#xA;I encountered the following error when trying to alter the font size in my plot legend that&#xA;can be reproduced with other data:&#xA;&#xA;p &lt;- qplot(mpg,  wt,  data=mtcars,  colour=factor(cyl))&#xA;p + guides(colour = guide_legend(label.theme = element_text(size = 6)))&#xA;&#xA;Error in if (angle == 90) {  : argument is of length zero&#xA;Calls: print ... lapply -&gt; FUN -&gt; element_grob -&gt; element_grob.element_text&#xA;&#xA;Explicitly setting the angle it works:&#xA;&#xA;p + guides(colour = guide_legend(label.theme = element_text(angle = 0,  size = 6)))&#xA;&#xA;Cheers, &#xA;Marc&#xA;&#xA;R Under development (unstable) (2012-04-18 r59079)&#xA;Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)&#xA;&#xA;locale:&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xA;&#xA;attached base packages:&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xA;&#xA;other attached packages:&#xA;[ 1 ] ggplot2_0.9.2  setwidth_1.0-0 colorout_0.9-9&#xA;&#xA;loaded via a namespace (and not attached):&#xA; [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.16.0        gtable_0.1.1      &#xA; [ 6 ] labeling_0.1       MASS_7.3-18        memoise_0.1        munsell_0.3        plyr_1.7.1        &#xA;[ 11 ] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.2       stringr_0.6       &#xA;" />
      <Message Id="8568021" ParentId="658" UserId="86978" Date="09/14/2012 16:59:51" Content="Hm,  this is happening because the oddball elements used in `guide_legend` weren't added to the element inheritance tree. They don't fit in well with the new theme system,  so fixing this will require some thought." />
      <Message Id="8862413" ParentId="658" UserId="86978" Date="09/25/2012 17:17:59" Content="I've added a slightly more informative check and error message for this situation." />
    </Messages>
  </Topic>
  <Topic Id="659" Title="Adding theme(panel.border=element_rect(...)) resets the plot">
    <Messages>
      <Message Id="0" ParentId="659" UserId="123968" Date="09/08/2012 00:18:59" Content="The following code produces a weird error. It renders the plot twice,  the second time producing a plot with almost nothing on it. This doesn't appear when adding themes with other elements.&#xA;&#xA;```R&#xA;dsamp &lt;- diamonds[ sample(nrow(diamonds),  1000),   ] &#xA;(qplot(carat,  price,  data=dsamp,  colour=clarity)&#xA; + theme(panel.border = element_rect()))&#xA;```&#xA;&#xA;This produces the same error&#xA;&#xA;```R&#xA;(qplot(carat,  price,  data=dsamp,  colour=clarity)&#xA; + theme(panel.border = element_rect(colour=&quot;black&quot;)))&#xA;```&#xA;&#xA;This doesn't produce an error&#xA;&#xA;```R&#xA;(qplot(carat,  price,  data=dsamp,  colour=clarity)&#xA; + theme(panel.background = element_rect(colour=&quot;black&quot;)))&#xA;```&#xA;" />
      <Message Id="8384783" ParentId="659" UserId="86978" Date="09/08/2012 05:36:07" Content="Previously the default `fill` for `theme_rect()` was `NA`,  but now it default to the value set by the top-level `rect` element. In `theme_grey()`,  this top-level fill value is white. The white fill is overlaid on the plot,  which is why you can't see anything. To make it go away,  set `fill=NA`:&#xA;&#xA;```&#xA;dsamp &lt;- diamonds[ sample(nrow(diamonds),  1000),   ]&#xA;&#xA;qplot(carat,  price,  data=dsamp,  colour=clarity) +&#xA;  theme(panel.border=element_rect(fill=NA))&#xA;```" />
      <Message Id="8387384" ParentId="659" UserId="123968" Date="09/08/2012 13:04:29" Content="Thanks. I guess I was confused about the difference between panel.border and panel.background." />
      <Message Id="8388506" ParentId="659" UserId="86978" Date="09/08/2012 15:17:24" Content="No worries. It's true that the difference isn't well documented. The purpose for panel border is to draw a bounding rectangle that is on top of things like tick marks. I've improved the help for it in the dev version:&#xA;https://github.com/hadley/ggplot2/blob/master/R/theme.r#L127" />
      <Message Id="8388737" ParentId="659" UserId="123968" Date="09/08/2012 15:34:27" Content="I'm glad I made the mistake; this makes a lot more sense now." />
      <Message Id="14262217" ParentId="659" UserId="3732054" Date="02/28/2013 22:38:46" Content="Thanks for the help,  wch! I had the exact same problem. It would be good to add this note to http://docs.ggplot2.org/0.9.2.1/theme.html as,  currently,  panel.border makes the entire graph disappear (in the example,  ~3/4 of the way down the page).." />
    </Messages>
  </Topic>
  <Topic Id="660" Title="added fatten parameter to geom_pointrange and GeomPointrange">
    <Messages>
      <Message Id="0" ParentId="660" UserId="123968" Date="09/09/2012 19:18:58" Content="The relative size of the point to the lines in GeomPointrange was hardcoded as 4.  I added a new parameter `fatten` (as in geom_crossbar) to `geom_pointrange` and `GeomPointrange` to allow the user to adjust the size of the point." />
      <Message Id="35941436" ParentId="660" UserId="4196" Date="02/24/2014 21:31:00" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="661" Title="getGrob() and str(ggplotGrob(...)) not working anymore">
    <Messages>
      <Message Id="0" ParentId="661" UserId="488603" Date="09/10/2012 13:26:18" Content="Hi&#xA;&#xA;The following example shows the issues I have with the new version of ggplot2.&#xA;&#xA;```&#xA;require(ggplot2)&#xA;require(grid)&#xA;require(lme4)&#xA;plt &lt;- ggplot(Penicillin,  aes(diameter,  plate,  color = sample)) + geom_point()&#xA;grob &lt;- ggplotGrob(plt)&#xA;&#xA;lls &lt;- getGrob(grob,  gPath='xlab-',  grep=TRUE,  global=TRUE)&#xA;## Error in getGrob(grob,  gPath = &quot;xlab-&quot;,  grep = TRUE,  global = TRUE) : &#xA;##   It is only valid to get a child from a 'gTree'&#xA;&#xA;## also str(grob) results in an error:&#xA;str(grob)&#xA;## [ cut ]&#xA;## .. .. .. ..$ NA:Error in object[ [ i ] ] : subscript out of bounds&#xA;```&#xA;&#xA;When using ggplot2 version 0.9.1 the above code works just fine.&#xA;&#xA;Thanks for having a look, &#xA;&#xA;Manuel&#xA;&#xA;&#xA;```&#xA;sessionInfo()&#xA;## R version 2.15.1 (2012-06-22)&#xA;## Platform: x86_64-unknown-linux-gnu (64-bit)&#xA;&#xA;## locale:&#xA;##  [ 1 ] LC_CTYPE=de_CH.UTF-8       LC_NUMERIC=C              &#xA;##  [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=de_CH.UTF-8    &#xA;##  [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_CH.UTF-8   &#xA;##  [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xA;##  [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xA;## [ 11 ] LC_MEASUREMENT=de_CH.UTF-8 LC_IDENTIFICATION=C       &#xA;&#xA;## attached base packages:&#xA;## [ 1 ] graphics  grDevices datasets  stats     utils     methods   base     &#xA;&#xA;## other attached packages:&#xA;## [ 1 ] ggplot2_0.9.2  fortunes_1.5-0 sfsmisc_1.0-20&#xA;&#xA;## loaded via a namespace (and not attached):&#xA;##  [ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.1       &#xA;##  [ 5 ] gtable_0.1.1       labeling_0.1       MASS_7.3-21        memoise_0.1       &#xA;##  [ 9 ] munsell_0.3        plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5&#xA;## [ 13 ] reshape2_1.2.1     scales_0.2.2       stringr_0.6.1      tools_2.15.1   &#xA;```" />
      <Message Id="8423769" ParentId="661" UserId="4196" Date="09/10/2012 13:42:34" Content="What are you trying to do? Working directly with grobs has never been advisable." />
      <Message Id="8424241" ParentId="661" UserId="488603" Date="09/10/2012 13:57:26" Content="I want to be able to modify legend,  axis texts,  etc,  so that I can put expressions everywhere,  rename things,  etc. without having to modify the data. Basically what I did here:&#xA;http://cran.r-project.org/web/packages/robustbase/vignettes/lmrob_simulation.pdf,  e.g.,  Figure 8." />
      <Message Id="8438544" ParentId="661" UserId="4196" Date="09/10/2012 21:11:16" Content="Unfortunately using grid is a fragile way to modify ggplot2 graphics (at least until we finalise finalise the naming conventions). But there doesn't seem to be anything on that pdf you can't do with standard ggplot2." />
      <Message Id="8448270" ParentId="661" UserId="488603" Date="09/11/2012 06:22:49" Content="It sure is a lot easier to modify the grob instead of using labeller,  creating a new scale with another breaks or name,  etc. depending on where I want my expressions to be. &#xA;&#xA;Btw. I would very much appreciate it if there was a link in the documentation to a list of,  e.g.,  labellers,  instead of a labeller: NULL,  which only leaves me with google." />
      <Message Id="8449121" ParentId="661" UserId="488603" Date="09/11/2012 07:13:42" Content="To illustrate my above comment a little:&#xA;Say I have a plot with four facets where four different scenarios are shown. Additionally,  there is a fifth scenario that is added as a reference to all the facets. It seems to me,  the easiest way to do this is to add another geom_point using the data argument. If the data.frame does not contain the variable that is used to create the facets,  it will show up in all four facets. This works very nicely with ggplot,  if there is a color variable,  we even get the correct legend,  namely all the levels of colors in the four facets plus the reference. &#xA;But if I want to replace the labels of the color scale with my own labels,  this gives me a major headache. I have to figure out the levels in the legend and make sure the legend is correct myself." />
      <Message Id="19147297" ParentId="661" UserId="2557767" Date="06/08/2013 11:28:49" Content="I'm having a similar issue with ggplotGrob. @kollerma did you ever figure out what was going on here?" />
      <Message Id="19186014" ParentId="661" UserId="488603" Date="06/10/2013 08:23:42" Content="I am not sure,  whether it still applies to the above mentioned problem,  but I got back the functionality I was looking for with the code appended below. Most of the expressions I need in plots can be placed by using things like the `labeller` argument in `facet_grid`. But putting expressions in facet titles `facet_wrap` still seems not to be supported,  so I change them in the grobs directly using the code below.&#xD;&#xA;&#xD;&#xA;If I recall correctly,  the only things I had to change were to use not the returned object of ggplotGrob (`g` below) but `g$grobs` and skip over all elements of class `gTree`.&#xD;&#xA;&#xD;&#xA;    require(ggplot2)&#xD;&#xA;    require(grid)&#xD;&#xA;&#xD;&#xA;    ## this is just a helper function&#xD;&#xA;    replaceLabel &lt;- function(label,  legend.mod) { &#xD;&#xA;        if (!is.null(label) &amp;&amp; !is.expression(label) &amp;&amp;&#xD;&#xA;            length(label) &gt; 0 &amp;&amp; label %in% names(legend.mod)) { &#xD;&#xA;            return(legend.mod[ [ label ] ])&#xD;&#xA;         } else { &#xD;&#xA;            return(label)&#xD;&#xA;         }&#xD;&#xA;     }&#xD;&#xA;&#xD;&#xA;    ## this function does the actual work&#xD;&#xA;    grobApplyLegend &lt;- function(grob,  legend.mod) { &#xD;&#xA;        if (!inherits(grob,  &quot;gTree&quot;)) return(grob)&#xD;&#xA;        ## edit grob: change legends,  axis and strip text&#xD;&#xA;        lls &lt;- getGrob(grob,  gPath='(xlab-|ylab-|title-|label-|legend.text.text|strip.text.x.text|strip.text.y.text|axis.text.y.text)', &#xD;&#xA;                       grep=TRUE,  global=TRUE)&#xD;&#xA;        if (is.grob(lls)) lls &lt;- gList(lls)&#xD;&#xA;        ## walk all legend texts&#xD;&#xA;        for(le in lls) { &#xD;&#xA;            if (is.expression(le$label)) next&#xD;&#xA;            newlabels &lt;- sapply(le$label,  replaceLabel,  legend.mod = legend.mod)&#xD;&#xA;            if (length(newlabels) &gt; 0 &amp;&amp;&#xD;&#xA;                (any(is.expression(newlabels)) || any(newlabels != le$label))) { &#xD;&#xA;                grob &lt;- editGrob(grob,  gPath=le$name,  label = newlabels)&#xD;&#xA;             }&#xD;&#xA;         }&#xD;&#xA;        ## also: remove alpha in legend key points&#xD;&#xA;        lls &lt;- getGrob(grob,  gPath='key.points',  grep=TRUE,  global=TRUE)&#xD;&#xA;        for (le in lls) { &#xD;&#xA;            if (is.character(le$gp$col) &amp;&amp; grepl('^\\#',  le$gp$col)) { &#xD;&#xA;                lgp &lt;- le$gp&#xD;&#xA;                lgp$col &lt;- substr(lgp$col,  1,  7)&#xD;&#xA;                grob &lt;- editGrob(grob,  gPath=le$name,  gp=lgp)&#xD;&#xA;             }&#xD;&#xA;         }&#xD;&#xA;        ## also: change spacing of legends&#xD;&#xA;        grob$children$legends$framevp$layout$heights &lt;-&#xD;&#xA;            grob$children$legends$framevp$layout$heights * .91&#xD;&#xA;        grob&#xD;&#xA;     }&#xD;&#xA;&#xD;&#xA;    ## and I replaced print.ggplot by this function&#xD;&#xA;    ## that has the additional argument legend.mod&#xD;&#xA;    print.ggplot &lt;- function(x,  newpage = is.null(vp),  vp = NULL,  ..., &#xD;&#xA;                             legend.mod = NULL)&#xD;&#xA;    { &#xD;&#xA;        ggplot2:::set_last_plot(x)&#xD;&#xA;        if (newpage)&#xD;&#xA;            grid.newpage()&#xD;&#xA;        g &lt;- ggplotGrob(x,  ...)&#xD;&#xA;        if (packageVersion(&quot;ggplot2&quot;) &gt; &quot;0.9.1&quot;) { &#xD;&#xA;            g$grobs &lt;- lapply(g$grobs,  grobApplyLegend,  legend.mod=legend.mod)&#xD;&#xA;         } else g &lt;- grobApplyLegend(g,  legend.mod)&#xD;&#xA;        grid.draw(g)&#xD;&#xA;     }&#xD;&#xA;&#xD;&#xA;    ## test it with this basic example&#xD;&#xA;    data &lt;- data.frame(Type=factor(c(&quot;SMD.Wtau&quot;,  &quot;SMDM.Wtau&quot;,  &quot;MM.Avar1&quot;)), &#xD;&#xA;                       x=1:3,  y=1:3)&#xD;&#xA;    &#xD;&#xA;    ## replace labels that match the names of this list&#xD;&#xA;    ## with the corresponding expressions.&#xD;&#xA;    legend.mod &lt;- list(`SMD.Wtau` = expression(paste('SMD.W', tau)), &#xD;&#xA;                       `SMDM.Wtau` = expression(paste('SMDM.W', tau)), &#xD;&#xA;                       `MM.Avar1` = expression(paste('MM.', Avar[ 1 ])))&#xD;&#xA;&#xD;&#xA;    print(ggplot(data,  aes(x,  y)) + geom_point() + facet_wrap(~ Type), &#xD;&#xA;          legend.mod=legend.mod)&#xD;&#xA;" />
      <Message Id="19512436" ParentId="661" UserId="2557767" Date="06/16/2013 13:40:33" Content="@kollerma I wasn't notified of your message,  though I am watching this thread. To be clear, &#xD;&#xA;I was asking about the &quot;out of bounds&quot; error you got.&#xD;&#xA;I ran into something similar recently - see &#xD;&#xA;http://stackoverflow.com/q/17127339/350713&#xD;&#xA;&#xD;&#xA;It seems you've worked around the problem. Is that correct?&#xD;&#xA;" />
      <Message Id="19530158" ParentId="661" UserId="488603" Date="06/17/2013 07:38:24" Content="@fmitha I see. Sorry,  I don't really have a workaround for the out of bounds problem. After having figured out that I can do everything within $grobs,  this was no issue anymore for me." />
    </Messages>
  </Topic>
  <Topic Id="662" Title="add param to alter width of rug segments in geom_rug">
    <Messages>
      <Message Id="0" ParentId="662" UserId="123968" Date="09/10/2012 16:09:23" Content="I noticed that the width of the segments in geom_rug was hardcoded as 0.03.  I added a parameter to allow the user to change it.  But,  I'm not sure that is the most idiomatic way to do it. Perhaps it should just use the width aes. " />
      <Message Id="8566807" ParentId="662" UserId="86978" Date="09/14/2012 16:23:13" Content="It might be better if it would accept a unit object,  so that the length could be specified in absolute or relative lengths.  The default could still be `unit(0.03,  &quot;npc&quot;)`.&#xA;&#xA;Also,  for future reference: there are a lot of spurious whitespace changes in the diff - better not to have those." />
      <Message Id="8587130" ParentId="662" UserId="123968" Date="09/15/2012 18:02:53" Content="Good idea. I'll change it to units(). &#xA;&#xA;Sorry about the whitespace. I have my text editor set to kill all trailing whitespace. I'll make sure that those whitespace changes don't happen again. " />
      <Message Id="8587625" ParentId="662" UserId="123968" Date="09/15/2012 18:49:10" Content="Okay,  I now have rugwidth accepting units arguments. How do you think it should handle the case,  if the user does not pass it a unit object?" />
      <Message Id="8805565" ParentId="662" UserId="86978" Date="09/24/2012 01:42:12" Content="I think it should only work with unit objects. There are other places where unit objects are required..." />
      <Message Id="8806228" ParentId="662" UserId="123968" Date="09/24/2012 02:49:32" Content="So should I check that rugwith has class unit,  and stop if it is not? Or try to coerce the argument into a unit object? " />
      <Message Id="8806896" ParentId="662" UserId="86978" Date="09/24/2012 03:53:08" Content="I think that it would be good to check that it's a unit,  and give an error if it's not." />
      <Message Id="8816859" ParentId="662" UserId="123968" Date="09/24/2012 12:20:28" Content="I added a check on the class of the `rugwidth` argument and a corresponding unit test." />
      <Message Id="8861075" ParentId="662" UserId="86978" Date="09/25/2012 16:41:08" Content="Looks good! Just FYI,  it'll probably be a while before this is merged,  since the next release,  0.9.3,  will be bugfixes. After that,  ggplot2 will be converted from proto to S3,  and I think that will be the time to add features like this." />
      <Message Id="8868487" ParentId="662" UserId="123968" Date="09/25/2012 20:14:24" Content="no problem; I'm in no rush.  I had noticed this while tweaking the geom to produce Tufte's range frames,  and thought it would be a good idea to push it upstream.  " />
      <Message Id="35941503" ParentId="662" UserId="4196" Date="02/24/2014 21:31:35" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="663" Title="`Imports:` dependency no longer sufficient for dependent package plotting">
    <Messages>
      <Message Id="0" ParentId="663" UserId="841437" Date="09/11/2012 01:49:35" Content="The following was my the first stage problem after getting stuck fixing an error from `R CMD check mypkg`; after updating some of the ways in which custom ggplot2 graphics are produced in mypkg. However,  after trying some simple fixes suggested by Hadley and Winston,  this superficial bug disappeared to reveal a namespace issue no reflected in the title of this issue tracker post.&#xA;&#xA;&quot;&#xA;Why does this appear when trying to plot/render a ggplot object using v0.9.2?&#xA;&#xA;Default print/show/plot for ggplot object now results in a prompt:&#xA;```&#xA;Hit &lt;Return&gt; to see next plot:&#xA;```&#xA;rather than just rendering the graphic.&#xA;&#xA;That is,  `show(p)` used to be indistinguishable from `print(p)`,  and both would automatically produce a graphic on the default graphic device. Now `show(p)` et al result in the above prompt. Unfortunately,  this is stalling some of my ggplot2-dependent function examples. I have not seen this in previous versions.&#xA;&quot;&#xA;&#xA;Note that the `print(p)` problem could be fixed with `library(ggplot2)`,  and that this was one of the indications of the namespace change in v0.9.2 of ggplot2." />
      <Message Id="8444760" ParentId="663" UserId="4196" Date="09/11/2012 02:00:20" Content="Restart with a clean session?" />
      <Message Id="8445389" ParentId="663" UserId="86978" Date="09/11/2012 02:43:24" Content="I think this happens when you run `par(ask=TRUE)`,  but I don't think this should have anything to do with ggplot2." />
      <Message Id="8448041" ParentId="663" UserId="841437" Date="09/11/2012 06:07:05" Content="After restarting with fresh sessions,  trying different IDEs,  trying an explicit `par(ask=FALSE)`,  I managed to get a more useful error:&#xA;&#xA;```&#xA;Error in as.environment(where) : &#xA;  no item called &quot;package:ggplot2&quot; on the search list&#xA;```&#xA;&#xA;This error occurs when using a standard call to one of the custom ggplot2-based plot functions in my package,  phyloseq,  which has been using ggplot2 as an `Imports:` dependency. I'm not sure what changed with the namespace of ggplot2,  but until now users of phyloseq were able to get graphics to print/show/render without first calling `library(ggplot2)`. Somehow the requisite functions/methods for building the graphics are no longer in the search list. For confirmation,  I changed ggplot2 to a `Depends:` dependency in phyloseq,  and that appears to solve the problem,  with custom graphics functions working fine. &#xA;&#xA;On some level,  I'm okay with making phyloseq users fully load ggplot2,  because it gets them that much closer to adding their own customizations to their graphics and using other features of ggplot2. On the other hand,  it means adding a lot more &quot;space junk&quot; that wasn't at as much risk of colliding with the `Imports:` dependency. &#xA;&#xA;So while I think I've found a fix that might even be good for my particular case,  I'm wondering&#xA;- (1) Is this the best fix?&#xA;- (2) Are you aware of the namespace change,  and consequence for dependent packages? And also,  is it intentional (and therefore has some extra benefit/purpose)? &#xA;&#xA;Thanks for not immediately closing the issue. I should have narrowed the problem better before the original question post." />
      <Message Id="8457020" ParentId="663" UserId="4196" Date="09/11/2012 11:50:56" Content="That's a bug and we just pushed a fix to cran. " />
    </Messages>
  </Topic>
  <Topic Id="664" Title="The fatten parameter is not mentioned in the geom_boxplot documentation">
    <Messages>
      <Message Id="0" ParentId="664" UserId="521337" Date="09/18/2012 11:46:33" Content="This question of StackOverflow:&#xA;&#xA;http://stackoverflow.com/questions/12475865/change-thickness-median-line-geom-boxplot&#xA;&#xA;I was able to solve using the `flatten` argument to `geom_boxplot`. That one could use this was only obvious from the source code. Maybe it would be good to add this option under `...`. Lattice for example does this a lot where the options that can be passed through `...` are explicitly mentioned." />
      <Message Id="35941536" ParentId="664" UserId="4196" Date="02/24/2014 21:31:55" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="665" Title="coord_equal() doesn't work as expected or as demonstrated in its reference page">
    <Messages>
      <Message Id="0" ParentId="665" UserId="67058" Date="09/18/2012 18:52:45" Content="According to this reference page on ggplot2,  the following command should give an equal aspect ration of x and y.&#xA;&#xA;qplot(mpg,  wt,  data = mtcars) + coord_equal(ratio = 1) &#xA;&#xA;http://had.co.nz/ggplot2/coord_equal.html&#xA;&#xA;Instead,  it shows a rectangle shape." />
      <Message Id="8670918" ParentId="665" UserId="86978" Date="09/18/2012 21:15:48" Content="What `coord_equal` means is that 5 (for example) on the x axis is the same as 5 on the y axis. Are you seeing this,  or something else?" />
      <Message Id="8672263" ParentId="665" UserId="67058" Date="09/18/2012 21:59:39" Content="what I am hoping to see is,  as in the reference link provide above,  same&#xD;&#xA;dataset,  same command,  the reference page have aspect ration of 1:1,  a&#xD;&#xA;perfect square. However I am seeing a skewed aspect. If your interpretation&#xD;&#xA;is the case,  then I am puzzled as to how to achieve 1:1 ratio (or square) -&#xD;&#xA;I can do this through manual calculation of x,  y limit,  but it is utterly&#xD;&#xA;cumbersome,  IMO.&#xD;&#xA;&#xD;&#xA;On Tue,  Sep 18,  2012 at 5:15 PM,  Winston Chang &lt;notifications@github.com&gt;wrote:&#xD;&#xA;&#xD;&#xA;&gt; What coord_equal means is that 5 (for example) on the x axis is the same&#xD;&#xA;&gt; as 5 on the y axis. Are you seeing this,  or something else?&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/665#issuecomment-8670918&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
      <Message Id="8672487" ParentId="665" UserId="86978" Date="09/18/2012 22:07:47" Content="I believe that's a bug in the documentation -- it was generated with an older version of ggplot2. A draft of the documentation system is here: http://docs.ggplot2.org/0.9.2/coord_fixed.html&#xA;&#xA;If you want it to be a square,  you can specify the height and width when you save the output file,  as in:&#xA;&#xA;```&#xA;ggsave(&quot;image.png&quot;,  width=5,  height=4)&#xA;```&#xA;" />
      <Message Id="8672803" ParentId="665" UserId="67058" Date="09/18/2012 22:18:39" Content="thanks for clarification. I suspect that this will present a problem when&#xD;&#xA;legend is presented outside the drawing area,  it *sounds* like it will make&#xD;&#xA;sure the final output is in square shape. A quick thought would be to use&#xD;&#xA;coord_fixed(ratio = y_max/x_max),  y_max and x_max are the max value of the&#xD;&#xA;axis.&#xD;&#xA;&#xD;&#xA;On Tue,  Sep 18,  2012 at 6:07 PM,  Winston Chang &lt;notifications@github.com&gt;wrote:&#xD;&#xA;&#xD;&#xA;&gt; I believe that's a bug in the documentation -- it was generated with an&#xD;&#xA;&gt; older version of ggplot2. A draft of the documentation system is here:&#xD;&#xA;&gt; http://docs.ggplot2.org/0.9.2/coord_fixed.html&#xD;&#xA;&gt;&#xD;&#xA;&gt; If you want it to be a square,  you can specify the height and width when&#xD;&#xA;&gt; you save the output file,  as in:&#xD;&#xA;&gt;&#xD;&#xA;&gt; ggsave(&quot;image.png&quot;,  width=5,  height=4)&#xD;&#xA;&gt;&#xD;&#xA;&gt;  —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/665#issuecomment-8672487&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
      <Message Id="8672882" ParentId="665" UserId="86978" Date="09/18/2012 22:21:43" Content="Actually,  now that I look at it again,  it appears that this was a change of behavior between 0.8.9 to 0.9.0. I'm not sure if it was intended or not..." />
      <Message Id="8696356" ParentId="665" UserId="86978" Date="09/19/2012 16:11:23" Content="If you want to control the overall size of the plot,  try this:&#xA;&#xA;```&#xA;qplot(mpg,  wt,  data = mtcars) + theme(aspect.ratio=1)&#xA;```" />
      <Message Id="8699660" ParentId="665" UserId="67058" Date="09/19/2012 17:44:59" Content="yes,  this works for me. Many thanks&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;On Wed,  Sep 19,  2012 at 12:11 PM,  Winston Chang &lt;notifications@github.com&gt;wrote:&#xD;&#xA;&#xD;&#xA;&gt; If you want to control the overall size of the plot,  try this:&#xD;&#xA;&gt;&#xD;&#xA;&gt; qplot(mpg,  wt,  data = mtcars) + theme(aspect.ratio=1)&#xD;&#xA;&gt;&#xD;&#xA;&gt;  —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/665#issuecomment-8696356&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
    </Messages>
  </Topic>
  <Topic Id="666" Title="Draw a world map is ridiculously slow">
    <Messages>
      <Message Id="0" ParentId="666" UserId="4196" Date="09/19/2012 19:00:10" Content="```R&#xA;&#xA;library(ggplot2)&#xA;&#xA;world_map &lt;- geom_polygon(aes(long,  lat,  group = group), &#xA;  data = map_data(&quot;world&quot;),  fill = NA,  colour = &quot;white&quot;,  inherit.aes = FALSE)&#xA;&#xA;ggplot() + world_map&#xA;```" />
      <Message Id="8863897" ParentId="666" UserId="86978" Date="09/25/2012 18:02:10" Content="I just tested this out with earlier version (0.8.9,  0.9.0,  0.9.1),  and it's still slow. I suspect it's because there are just a lot of segments in a whole world map. I think it's possible to request lower resolution polygons from the maps package." />
      <Message Id="8870583" ParentId="666" UserId="4196" Date="09/25/2012 21:16:02" Content="`geom_path` is much much much faster.  It's probably because `geom_polygon` creates a grob for each group,  rather than one grob with the appropriate `id` set" />
      <Message Id="9409117" ParentId="666" UserId="86978" Date="10/13/2012 20:44:13" Content="Do you think there would be any problems with changing `geom_polygon` so it uses one grob for all the groups? It is extremely slow." />
      <Message Id="9445156" ParentId="666" UserId="4196" Date="10/15/2012 13:43:17" Content="I don't think so - and it should have a big performance impact. I can't believe that I didn't notice this before." />
    </Messages>
  </Topic>
  <Topic Id="667" Title="Header and footer for plots">
    <Messages>
      <Message Id="0" ParentId="667" UserId="2385506" Date="09/20/2012 11:54:48" Content="Currently,  there is no native option for putting headers and footers on plots (could work similar to the regular title,  in smaller grey font). &#xA;&#xA;This would be very useful for marking plots with additional information that do not belong anywhere else - like the script that was used to produce the plots,  the name of the clinical trial or article for which it was produced etc. " />
      <Message Id="35941542" ParentId="667" UserId="4196" Date="02/24/2014 21:32:00" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="668" Title="In scale_size_area can't find abs_area">
    <Messages>
      <Message Id="0" ParentId="668" UserId="2389377" Date="09/20/2012 22:46:47" Content="Downloaded the lastet Github version of ggplot2 using devtools but R complains it can't find this function. " />
      <Message Id="8754295" ParentId="668" UserId="86978" Date="09/21/2012 03:41:56" Content="The development version of ggplot2 also requires the development version of the scales package." />
      <Message Id="8755479" ParentId="668" UserId="2389377" Date="09/21/2012 05:26:25" Content="Thanks Winston..." />
    </Messages>
  </Topic>
  <Topic Id="669" Title="(Also in scale_size_area) scale$palette(uniq) : could not find function &quot;rescale&quot;">
    <Messages>
      <Message Id="0" ParentId="669" UserId="2389377" Date="09/21/2012 00:18:10" Content="Manually inserted the code for abs_area and rescale_max but now get this error. Not sure from where." />
      <Message Id="8750436" ParentId="669" UserId="2389377" Date="09/21/2012 00:41:05" Content="Ok... found that I needed to update Scales,  too,  to fix this error." />
    </Messages>
  </Topic>
  <Topic Id="670" Title="Unequal panel border size">
    <Messages>
      <Message Id="0" ParentId="670" UserId="393576" Date="09/21/2012 15:23:24" Content="Since I haven't found a [ solution ](https://groups.google.com/d/topic/ggplot2/bUfiiw7VoSs/discussion),  I think it could be considered as a bug.&#xA;&#xA;I have a double thick line on the bottom and right borders of the panel when I plot the following code. In fact,  it seems like it appears in every device,  only that in vector devices it's less obvious.&#xA;```&#xA;library(&quot;ggplot2&quot;)&#xA;qplot(mpg,  wt,  data=mtcars) + opts(panel.border = theme_rect(size = 1))&#xA;```" />
      <Message Id="8768444" ParentId="670" UserId="86978" Date="09/21/2012 15:32:24" Content="This bug was fixed in version 0.9.2." />
      <Message Id="8768542" ParentId="670" UserId="86978" Date="09/21/2012 15:35:28" Content="The bug had to do with the order that panel elements were drawn. Also,  you'll probably need to use `fill=NA` in the new version. See #659 for more info.&#xA;" />
      <Message Id="8770239" ParentId="670" UserId="393576" Date="09/21/2012 16:31:17" Content="Ok. I've updated to 0.9.2.1,  but still have the same issue. Am I doing it right ?&#xA;```&#xA;qplot(mpg,  wt,  data=mtcars) + theme(panel.border=element_rect(fill=NA,  size = 1))&#xA;```" />
      <Message Id="8772368" ParentId="670" UserId="86978" Date="09/21/2012 16:40:33" Content="That should be right... Can you post a picture somewhere,  say on imgur.com?&#xA;" />
      <Message Id="8774098" ParentId="670" UserId="393576" Date="09/21/2012 17:06:49" Content="It's pretty much the same than the one in the thread...&#xD;&#xA;http://imgur.com/wORTW&#xD;&#xA;&#xD;&#xA;2012/9/21 Winston Chang &lt;notifications@github.com&gt;&#xD;&#xA;&#xD;&#xA;&gt; That should be right... Can you post a picture somewhere,  say on imgur.com&#xD;&#xA;&gt; ?&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/670#issuecomment-8772368&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
      <Message Id="8774367" ParentId="670" UserId="86978" Date="09/21/2012 17:19:05" Content="I think this is probably happening because of the lack of anti-aliasing when this is rendered with the Windows graphics device. (This image looks like it was made in Windows.) The lines,  pre-rendering,  don't align perfectly with the pixels locations in Windows.&#xA;&#xA;See this for more information:&#xA;http://stackoverflow.com/questions/6023179/anti-aliasing-in-r-graphics-under-windows-as-per-mac&#xA;&#xA;If you don't want to use that solution,  you may be able to get it to look better by fiddling with different values for the line thickness. You might also try different values for `png(res=xxx)`,  or `ggsave(dpi=xxx)`,  where `xxx` is replaced with some value for pixels per inch (the default is 72,  I believe).&#xA;" />
      <Message Id="8789185" ParentId="670" UserId="393576" Date="09/22/2012 14:18:53" Content="I'm not sure it is only anti-aliasing. When I render the plot with &#xA;```&#xA;library(&quot;cairoDevice&quot;)&#xA;Cairo_svg(&quot;test.svg&quot;,  width = 4,  height = 4)&#xA;qplot(mpg,  wt,  data=mtcars) + theme(panel.border=element_rect(fill=NA,  size = 1))&#xA;dev.off()&#xA;```&#xA;And open the graph in Inkscape,  the borders are still unequal (same for pdf). However,  If I ungroup the elements,  at a certain point the borders appear equal. It seems that one of the clip path is not correctly aligned with the width of the stroke (`clip-path=&quot;url(#clip2)&quot;` in this case). &#xA;I'll give it a try on linux,  but I think it is more related to plot size (it's more obvious in small plots) than OS." />
      <Message Id="8798660" ParentId="670" UserId="393576" Date="09/23/2012 13:54:25" Content="I confirm that I observe the same behavior if I render under linux (ubuntu). " />
      <Message Id="12899692" ParentId="670" UserId="3323947" Date="01/30/2013 16:56:05" Content="I can confirm this bug in 0.9.3 on Linux.&#xD;&#xA;Here is the output generated with&#xD;&#xA;```&#xD;&#xA;qplot(1,  1) + theme(panel.border=element_rect(fill=NA))&#xD;&#xA;```&#xD;&#xA;in different formats:&#xD;&#xA;https://sites.google.com/site/nfdisco/home/panel.border.svg&#xD;&#xA;https://sites.google.com/site/nfdisco/home/panel.border.png&#xD;&#xA;https://sites.google.com/site/nfdisco/home/panel.border.pdf&#xD;&#xA;" />
      <Message Id="12901797" ParentId="670" UserId="393576" Date="01/30/2013 17:35:39" Content="I thought I replied to this thread,  however it seems I can't find my reply.&#xD;&#xA;So here's a similar observation,  since it might help.&#xD;&#xA;&#xD;&#xA;It looks like the cliping window is too tight. In your svg,  (&#xD;&#xA;https://sites.google.com/site/nfdisco/home/panel.border.svg) the clip path&#xD;&#xA;named clip20 doesn't allow the full stroke of the frame :&#xD;&#xA;&lt;clipPath id=&quot;clip20&quot;&gt;&#xD;&#xA;  &lt;path d=&quot;M 49.488281 14.398438 L 266.601562 14.398438 L 266.601562&#xD;&#xA;167.511719 L 49.488281 167.511719 Z &quot;/&gt;&#xD;&#xA;&lt;/clipPath&gt;&#xD;&#xA;And the frame is&#xD;&#xA;&lt;g clip-path=&quot;url(#clip20)&quot; clip-rule=&quot;nonzero&quot;&gt;&#xD;&#xA;&lt;path&#xD;&#xA;style=&quot;fill:none;stroke-width:1.062992;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%, 0%, 0%);stroke-opacity:1;stroke-miterlimit:10;&quot;&#xD;&#xA;d=&quot;M 49.488281 166.511719 L 265.601562 166.511719 L 265.601562 14.398438 L&#xD;&#xA;49.488281 14.398438 Z &quot;/&gt;&#xD;&#xA;&lt;/g&gt;&#xD;&#xA;&#xD;&#xA;So on top and left side,  you end up with a smaller stroke. in the svg,  if&#xD;&#xA;you suppress that clip-path,  you get an nice uniform frame. However I&#xD;&#xA;couldn't find the criminal in ggplot2 code.&#xD;&#xA;&#xD;&#xA;Etienne&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;2013/1/30 nfdisco &lt;notifications@github.com&gt;&#xD;&#xA;&#xD;&#xA;&gt; I can confirm this bug in 0.9.3 on Linux.&#xD;&#xA;&gt; Here is the output generated with&#xD;&#xA;&gt;&#xD;&#xA;&gt; qplot(1,  1) + theme(panel.border=element_rect(fill=NA))&#xD;&#xA;&gt;&#xD;&#xA;&gt; in different formats:&#xD;&#xA;&gt; https://sites.google.com/site/nfdisco/home/panel.border.svg&#xD;&#xA;&gt; https://sites.google.com/site/nfdisco/home/panel.border.png&#xD;&#xA;&gt; https://sites.google.com/site/nfdisco/home/panel.border.pdf&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/670#issuecomment-12899692&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
      <Message Id="12912613" ParentId="670" UserId="86978" Date="01/30/2013 21:09:22" Content="The SVG and PNG have unequal border sizes,  but the PDF looks OK to me.  When I run the same code on my Mac,  the lines all look the same. Not sure what's causing this... Can you post images with thicker lines:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(1,  1) + theme(panel.border=element_rect(fill=NA,  size=2))&#xD;&#xA;```" />
      <Message Id="12915177" ParentId="670" UserId="393576" Date="01/30/2013 22:04:21" Content="I think it's just less obvious,  but it's still there :&#xD;&#xA;&#xD;&#xA;`qplot(1,  1) + theme(panel.border=element_rect(fill=NA,  size=2))`&#xD;&#xA;&#xD;&#xA;https://www.dropbox.com/s/y09nztarublyzzv/panel.border.tick.pdf&#xD;&#xA;https://www.dropbox.com/s/u9fqu7ztgaa56c3/panel.border.tick.png&#xD;&#xA;https://www.dropbox.com/s/9xnudgusyezricp/panel.border.tick.svg&#xD;&#xA;&#xD;&#xA;As you mentionned,  pdf doesn't seem to be affected.&#xD;&#xA;&#xD;&#xA;Etienne&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;2013/1/30 Winston Chang &lt;notifications@github.com&gt;&#xD;&#xA;&#xD;&#xA;&gt; The SVG and PNG have unequal border sizes,  but the PDF looks OK to me.&#xD;&#xA;&gt; When I run the same code on my Mac,  the lines all look the same. Not sure&#xD;&#xA;&gt; what's causing this... Can you post images with thicker lines:&#xD;&#xA;&gt;&#xD;&#xA;&gt; qplot(1,  1) + theme(panel.border=element_rect(fill=NA,  size=2))&#xD;&#xA;&gt;&#xD;&#xA;&gt;  —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/670#issuecomment-12912613&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
      <Message Id="12918676" ParentId="670" UserId="3323947" Date="01/30/2013 23:25:42" Content="The PDF is affected. In the one I uploaded,  the lines should be the same width as the major grid lines and instead they are thinner. It seems that is not affected because all four sides are affected,  so they all look the same.&#xD;&#xA;&#xD;&#xA;I noticed that which sides of the rectangle are affected changes in a seemingly random fashion depending on things such as the line width,  the size of the plot,  maybe also the order of the arguments passed to theme..." />
      <Message Id="12949054" ParentId="670" UserId="3323947" Date="01/31/2013 15:56:36" Content="Hi,  the problem is self-evident in the following picture:&#xD;&#xA;https://sites.google.com/site/nfdisco/home/panel.border.clip.png&#xD;&#xA;which has been generated with&#xD;&#xA;```&#xD;&#xA;ggplot(NULL,  aes(xmax=1,  xmin=0,  ymax=1,  ymin=0)) +&#xD;&#xA;  geom_rect(size=3,  colour='black',  fill=NA) +&#xD;&#xA;  theme(panel.border=element_rect(size=3,  colour='black',  fill=NA,  linetype=2))&#xD;&#xA;```&#xD;&#xA;(The inner rectangle is for reference.) The panel border is clipped. The code responsible for this can be found in facet-null.r:&#xD;&#xA;```&#xD;&#xA;  layout &lt;- gtable_matrix(&quot;layout&quot;,  all, &#xD;&#xA;    widths = unit.c(grobWidth(axis_v),  unit(1,  &quot;null&quot;)), &#xD;&#xA;    heights = unit.c(unit(aspect_ratio,  &quot;null&quot;),  grobHeight(axis_h)), &#xD;&#xA;    respect = respect,  clip = c(&quot;off&quot;,  &quot;off&quot;,  &quot;on&quot;,  &quot;off&quot;), &#xD;&#xA;    z = matrix(c(3,  2,  1,  4),  ncol = 2,  byrow = TRUE)&#xD;&#xA;  )&#xD;&#xA;```&#xD;&#xA;Change the &quot;on&quot; to &quot;off&quot; and the clipping disappears:&#xD;&#xA;https://sites.google.com/site/nfdisco/home/panel.border.noclip.png" />
      <Message Id="12961587" ParentId="670" UserId="393576" Date="01/31/2013 19:42:11" Content="The origin of the problem seem to be to be that frame and clip don't share&#xD;&#xA;the same coordinates.&#xD;&#xA;How did you plot that second figure ? I couldn't figure how to turn off the&#xD;&#xA;clip.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;2013/1/31 nfdisco &lt;notifications@github.com&gt;&#xD;&#xA;&#xD;&#xA;&gt; Hi,  the problem is self-evident in the following picture:&#xD;&#xA;&gt; https://sites.google.com/site/nfdisco/home/panel.border.clip.png&#xD;&#xA;&gt; which has been generated with&#xD;&#xA;&gt;&#xD;&#xA;&gt; ggplot(NULL,  aes(xmax=1,  xmin=0,  ymax=1,  ymin=0)) +&#xD;&#xA;&gt;   geom_rect(size=3,  colour='black',  fill=NA) +&#xD;&#xA;&gt;   theme(panel.border=element_rect(size=3,  colour='black',  fill=NA,  linetype=2))&#xD;&#xA;&gt;&#xD;&#xA;&gt; (The inner rectangle is for reference.) The panel border is clipped. The&#xD;&#xA;&gt; code responsible for this can be found in facet-null.r:&#xD;&#xA;&gt;&#xD;&#xA;&gt;   layout &lt;- gtable_matrix(&quot;layout&quot;,  all, &#xD;&#xA;&gt;     widths = unit.c(grobWidth(axis_v),  unit(1,  &quot;null&quot;)), &#xD;&#xA;&gt;     heights = unit.c(unit(aspect_ratio,  &quot;null&quot;),  grobHeight(axis_h)), &#xD;&#xA;&gt;     respect = respect,  clip = c(&quot;off&quot;,  &quot;off&quot;,  &quot;on&quot;,  &quot;off&quot;), &#xD;&#xA;&gt;     z = matrix(c(3,  2,  1,  4),  ncol = 2,  byrow = TRUE)&#xD;&#xA;&gt;   )&#xD;&#xA;&gt;&#xD;&#xA;&gt; Change the &quot;on&quot; to &quot;off&quot; and the clipping disappears:&#xD;&#xA;&gt; https://sites.google.com/site/nfdisco/home/panel.border.noclip.png&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/670#issuecomment-12949054&gt;.&#xD;&#xA;&gt;&#xD;&#xA;&gt;" />
      <Message Id="12963416" ParentId="670" UserId="3323947" Date="01/31/2013 20:18:45" Content="But why do you want to clip? With clipping the line width will always be wrong,  even if the clip area and frame are perfectly aligned.&#xD;&#xA;For the second plot you have to download the source code,  change the &quot;clip&quot; argument in the code referenced in my previous comment,  reinstall the package and restart R. On Linux:&#xD;&#xA;```&#xD;&#xA;wget http://cran.r-project.org/src/contrib/ggplot2_0.9.3.tar.gz&#xD;&#xA;tar xzf ggplot2_0.9.3.tar.gz&#xD;&#xA;&lt;&lt;change the file&gt;&gt;&#xD;&#xA;tar czf ggplot2.tar.gz ggplot2&#xD;&#xA;R CMD INSTALL ggplot2.tar.gz&#xD;&#xA;```" />
      <Message Id="12964825" ParentId="670" UserId="393576" Date="01/31/2013 20:47:15" Content="&gt;&#xA;&gt; But why do you want to clip?&#xA;&gt;&#xA;Is it possible to still keep sharp corners ? I don't really like the round&#xA;corners :)" />
      <Message Id="12968475" ParentId="670" UserId="3323947" Date="01/31/2013 22:02:53" Content="Not possible at the moment,  but if you want sharp corners this is not the way to do it. Also,  be aware that all other rectangular elements in the plot have round corners." />
      <Message Id="12978043" ParentId="670" UserId="4196" Date="02/01/2013 02:39:38" Content="Clipping keeps all sorts of other elements inside the plot. It's not a trivial change unfortunately. " />
      <Message Id="13033411" ParentId="670" UserId="3323947" Date="02/02/2013 16:55:53" Content="I think I have got a solution,  basically add the panel border in the appropriate gtable cell afterwards without clipping. I think this will still clip the other elements inside the plot,  although I'm not familiar with gtable so I can be wrong.&#xD;&#xA;```diff&#xD;&#xA;--- ggplot2/R/facet-null.r.orig	2013-01-31 16:29:42.037012615 +0100&#xD;&#xA;+++ ggplot2/R/facet-null.r	2013-02-02 17:46:21.506877897 +0100&#xD;&#xA;@@ -46, 8 +46, 8 @@&#xD;&#xA; &#xD;&#xA;   # Flatten layers - we know there's only one panel&#xD;&#xA;   geom_grobs &lt;- lapply(geom_grobs,  &quot;[ [ &quot;,  1)&#xD;&#xA;-  panel_grobs &lt;- c(list(bg),  geom_grobs,  list(fg))&#xD;&#xA;-  &#xD;&#xA;+  panel_grobs &lt;- c(list(bg),  geom_grobs)&#xD;&#xA;+&#xD;&#xA;   panel_grob &lt;- gTree(children = do.call(&quot;gList&quot;,  panel_grobs))  &#xD;&#xA;   axis_h &lt;- coord_render_axis_h(coord,  range,  theme)&#xD;&#xA;   axis_v &lt;- coord_render_axis_v(coord,  range,  theme)&#xD;&#xA;@@ -63, 7 +63, 8 @@&#xD;&#xA;     respect = respect,  clip = c(&quot;off&quot;,  &quot;off&quot;,  &quot;on&quot;,  &quot;off&quot;), &#xD;&#xA;     z = matrix(c(3,  2,  1,  4),  ncol = 2,  byrow = TRUE)&#xD;&#xA;   )&#xD;&#xA;-  layout$layout$name &lt;- c(&quot;axis-l&quot;,  &quot;spacer&quot;,  &quot;panel&quot;,  &quot;axis-b&quot;)&#xD;&#xA;+  layout &lt;- gtable_add_grob(layout,  fg,  t=1,  l=2,  z=2,  clip=&quot;off&quot;)&#xD;&#xA;+  layout$layout$name &lt;- c(&quot;axis-l&quot;,  &quot;spacer&quot;,  &quot;panel&quot;,  &quot;axis-b&quot;,  &quot;panel-border&quot;)&#xD;&#xA;   &#xD;&#xA;   layout&#xD;&#xA;  }&#xD;&#xA;```" />
      <Message Id="13106434" ParentId="670" UserId="3323947" Date="02/04/2013 23:35:10" Content="Unfortunately,  faceted plots are also affected and those are more difficult to fix." />
      <Message Id="35941567" ParentId="670" UserId="4196" Date="02/24/2014 21:32:15" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="671" Title="Header and footer in plot">
    <Messages>
      <Message Id="0" ParentId="671" UserId="2385506" Date="09/23/2012 09:58:28" Content="Hi Hadley, &#xA;&#xA;I just implemented the header and footer feature for the plots. There are now new themes for plot.header and plot.footer. They default to grey50 with a relative size of 0.8 and are left aligned&#xA;&#xA;I changed ggplot_gtable so that a header grob is added at the top and a footer grop is added at the bottom of the tables. The text in them come from the labels &quot;header&quot; and &quot;footer&quot;,  &#xA;&#xA;would be great if you could merge it into the package.&#xA;&#xA;Thanks&#xA;&#xA;Holger" />
      <Message Id="10621187" ParentId="671" UserId="327708" Date="11/22/2012 01:46:05" Content="This would be great to have,  but would it be possible to have the text &quot;word-wrapped&quot; so that one doesn't need to add in hard carriage returns for multi-line headers/footers?&#xD;&#xA;&#xD;&#xA;Any chance of seeing this get in the main ggplot2 soon?" />
    </Messages>
  </Topic>
  <Topic Id="672" Title="gg_dep function">
    <Messages>
      <Message Id="0" ParentId="672" UserId="4196" Date="09/23/2012 16:02:56" Content="This should have arguments message and version.  If version differs by a minor version,  output is a message,  if it differs by one major version it should be a warning,  and if more than one it should be an error." />
    </Messages>
  </Topic>
  <Topic Id="673" Title="Using coord_flip() with facet_wrap(scales = free_y) in ggplot2 gives unexpected facet axis tick marks">
    <Messages>
      <Message Id="0" ParentId="673" UserId="2410222" Date="09/24/2012 09:11:33" Content="This is discussed in detail at [ stackoverflow ] (http://stackoverflow.com/questions/12560858/using-coord-flip-with-facet-wrapscales-free-y-in-ggplot2-seems-to-give-une).&#xA;&#xA;When I combine coord_flip() and facet_wrap(scales= &quot;free_y&quot; or &quot;free_x&quot;) it makes the horizontal axis scale variable but it repeats the tick marks for the vertical facet axes only instead of for the horizontal facet axes only:&#xA;&#xA;```R&#xA;    c &lt;- ggplot(diamonds,  aes(clarity)) + geom_bar()&#xA;    c + facet_wrap(~cut,  scales = &quot;free_y&quot;) + coord_flip()&#xA;```&#xA;&#xA;I am running ggplot2 version 0.9.2.1 on R 2.15.1 under Mac OS X. I would be very interested to hear of any potential workarounds.&#xA;&#xA;Also,  I am not sure that this is the place for it,  but ggplot2 is great.&#xA;&#xA;" />
      <Message Id="8811770" ParentId="673" UserId="4196" Date="09/24/2012 09:29:00" Content="You can not use free scales with a non-Cartesian coordinate system - we need to more clearly advertise this with an error or warning." />
      <Message Id="9428094" ParentId="673" UserId="86978" Date="10/14/2012 21:35:50" Content="OK,  I changed it to to an error,  then rebased and merged at 272d3cb." />
    </Messages>
  </Topic>
  <Topic Id="674" Title="geom_tile documentation missing width and height">
    <Messages>
      <Message Id="0" ParentId="674" UserId="1267747" Date="09/25/2012 16:25:51" Content="The documentation for geom_tile doesn't list width and height as possible aesthetics:&#xA;&#xA;http://docs.ggplot2.org/current/geom_tile.html" />
      <Message Id="35941601" ParentId="674" UserId="4196" Date="02/24/2014 21:32:33" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35941601" ParentId="674" UserId="4196" Date="02/24/2014 21:32:33" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="675" Title="Add warning for non-cartesian coords and free scales">
    <Messages>
      <Message Id="0" ParentId="675" UserId="86978" Date="09/25/2012 17:48:09" Content="This fixes #673." />
      <Message Id="9428110" ParentId="675" UserId="86978" Date="10/14/2012 21:36:43" Content="OK,  I changed it to to an error,  then rebased and merged at 272d3cb." />
    </Messages>
  </Topic>
  <Topic Id="676" Title="geom_density gives confusing error when a group has only one observation">
    <Messages>
      <Message Id="0" ParentId="676" UserId="86978" Date="09/27/2012 20:39:09" Content="&#xA;```R&#xA;dat &lt;- data.frame(x=rnorm(7),  g=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot;))&#xA;ggplot(dat,  aes(x=x,  colour=g)) + geom_density()&#xA;#Error in rowSums(vapply(x,  is.finite,  logical(nrow(x)))) : &#xA;#  'x' must be an array of at least two dimensions&#xA;#Error in UseMethod(&quot;scale_dimension&quot;) : &#xA;#  no applicable method for 'scale_dimension' applied to an object of class &quot;NULL&quot;&#xA;&#xA;&#xA;# For an even simpler version:&#xA;dat &lt;- data.frame(x=3,  g=&quot;a&quot;)&#xA;ggplot(dat,  aes(x=x)) + geom_density()&#xA;&#xA;```&#xA;" />
      <Message Id="9724274" ParentId="676" UserId="86978" Date="10/24/2012 01:01:09" Content="It actually gives this error when there are &lt; 3 observations:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# Error&#xD;&#xA;dat &lt;- data.frame(x=3)&#xD;&#xA;ggplot(dat,  aes(x=x)) + geom_density()&#xD;&#xA;&#xD;&#xA;# Error&#xD;&#xA;dat &lt;- data.frame(x=3:4)&#xD;&#xA;ggplot(dat,  aes(x=x)) + geom_density()&#xD;&#xA;&#xD;&#xA;# OK&#xD;&#xA;dat &lt;- data.frame(x=3:5)&#xD;&#xA;ggplot(dat,  aes(x=x)) + geom_density()&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="677" Title="Use adaptive resampling for coord munching">
    <Messages>
      <Message Id="0" ParentId="677" UserId="4196" Date="09/29/2012 16:13:24" Content="http://bl.ocks.org/3795544" />
      <Message Id="35941603" ParentId="677" UserId="4196" Date="02/24/2014 21:32:36" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35941603" ParentId="677" UserId="4196" Date="02/24/2014 21:32:36" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="678" Title="Allow panel.margin.x and panel.margin.y in addition to panel.margin">
    <Messages>
      <Message Id="0" ParentId="678" UserId="463252" Date="10/02/2012 16:13:46" Content="With the new theme system,  inheritance makes the addition of more detail of control less burdensome (on the theme specifier).  Could `panel.margin` gain two children: `panel.margin.x` and `panel.margin.y` so that the spacing between panels can be controlled separately?&#xD;&#xA;&#xD;&#xA;Two references to wanting/asking about this:&#xD;&#xA;&#xD;&#xA;  * https://groups.google.com/forum/#!topic/ggplot2/tMQsVb5P69s/discussion&#xD;&#xA;  * http://stackoverflow.com/q/12252750/892313" />
      <Message Id="19361283" ParentId="678" UserId="484282" Date="06/12/2013 23:00:12" Content="+1" />
      <Message Id="35941611" ParentId="678" UserId="4196" Date="02/24/2014 21:32:40" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="679" Title="Make more things themeable">
    <Messages>
      <Message Id="0" ParentId="679" UserId="890156" Date="10/05/2012 17:18:45" Content="This comes from the discussion at  jrnold/ggthemes#2: Basically I would like to be able to do something like this&#xD;&#xA;&#xD;&#xA;``` R&#xD;&#xA;xkcd &lt;- T&#xD;&#xA;bw_journal &lt;- F&#xD;&#xA;if (xkcd) { &#xD;&#xA;    ggplot_default_style(xkcd)&#xD;&#xA; } else if (bw_journal) { &#xD;&#xA;     ggplot_default_style(tufte)&#xD;&#xA; } else { &#xD;&#xA;    ggplot_default_style(default)&#xD;&#xA; }&#xD;&#xA;plot &lt;- ... # without any color of similar appearance definitions&#xD;&#xA;plot&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;In the discussion jrnold/ggthemes#2 @jrnold said that this is currently not possible as you have to add more ggplot2 calls to change the plot to the desired appearance. This includes different color schemes,  different axis and in the case of xkcd-style plots a special jittery line style (for every drawn line).&#xD;&#xA;&#xD;&#xA;Would it be possible to enhance themes so that they can effect this things so that as long as you don't change colors and so on,  the theme will be able to overwrite such defaults?" />
      <Message Id="9197745" ParentId="679" UserId="890156" Date="10/06/2012 12:32:53" Content="Mathematica can do it with one call per plot:  http://mathematica.stackexchange.com/questions/11350/xkcd-style-graphs&#xD;&#xA;&#xD;&#xA;:-)" />
      <Message Id="9199549" ParentId="679" UserId="86978" Date="10/06/2012 16:17:00" Content="It looks like with the Mathematica version,  the image get rasterized before making it all squiggly:&#xD;&#xA;http://blog.wolfram.com/2012/10/05/automating-xkcd-diagrams-transforming-serious-to-funny/&#xD;&#xA;&#xD;&#xA;So if that were implemented for R,  then the present ggplot2 themes would be sufficient.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Drawing squiggly lines directly with the theme system would probably require some new grobs -- and a big rewrite of the theme system!&#xD;&#xA;" />
      <Message Id="35941634" ParentId="679" UserId="4196" Date="02/24/2014 21:32:49" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="680" Title="default title position without legend is ugly">
    <Messages>
      <Message Id="0" ParentId="680" UserId="890156" Date="10/07/2012 14:18:04" Content="```&#xD;&#xA;df.test = data.frame(a=c(4, 4, 4, 5, 5, 5, 5, 6, 6, 6, 7, 7, 8, 9, 9, 9, 9, 10))&#xD;&#xA;ggplot(df.test,  aes(x=factor(a))) +&#xD;&#xA;  ggtitle(&quot;Top 10 (relative variance=0.19 and F1=0.77)&quot;)+&#xD;&#xA;  geom_bar(binwidth = 1) &#xD;&#xA;```&#xD;&#xA;-&gt; The title is more or les directly on the upper side. Please leave at least a little space. This isn't a problem when there is a legend positioned between title and plot (`theme(legend.position=&quot;top&quot;)`).&#xD;&#xA;&#xD;&#xA;And BTW: how do I actually adjust something like this?" />
      <Message Id="35941650" ParentId="680" UserId="4196" Date="02/24/2014 21:32:55" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="681" Title="Make long titles wrap automatically and center above the whole plot">
    <Messages>
      <Message Id="0" ParentId="681" UserId="890156" Date="10/07/2012 14:30:13" Content="These are two problems:&#xD;&#xA;&#xD;&#xA;1. Long titles have to be manually wrapped (with &quot;\n&quot; inserted). it would be nice if ggtitle would offer a `wrap=T` parameter.&#xD;&#xA;2. The title is centered over the &quot;box&quot; and not over the whole plotting &quot;window&quot;. &#xD;&#xA;&#xD;&#xA;Both problems can be seen in the following code from http://stackoverflow.com/questions/10975518/how-to-align-ggplot-title-with-window-rather-than-plot-grid&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(&#xD;&#xA;  text = c(&#xD;&#xA;    &quot;It made me feel very positive to brand X&quot;,  &#xD;&#xA;    &quot;It was clear and easy to understand&quot;, &#xD;&#xA;    &quot;I didn't like it al all&quot;), &#xD;&#xA;  value=runif(3)&#xD;&#xA;)&#xD;&#xA;library(ggplot2)&#xD;&#xA;ggplot(dat,  aes(text,  value)) + &#xD;&#xA;  geom_bar(stat=&quot;identity&quot;) +&#xD;&#xA;  coord_flip() +&#xD;&#xA;  opts(title=&quot;Thinking about the ad that you've just seen,  do you agree with the following statements? I agree that...&quot;) +&#xD;&#xA;  theme_bw(16)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;There is also a solution mentioned,  but I don't come even close to understand it. :-(&#xD;&#xA;&#xD;&#xA;Please wrap titles (and maybe even axis titles and so on) per default and center the title over the whole plot. Or at least make it a them option. &#xD;&#xA;&#xD;&#xA;Thanks a lot!" />
      <Message Id="35941667" ParentId="681" UserId="4196" Date="02/24/2014 21:33:03" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="682" Title="make annotations outside of the plot area possible">
    <Messages>
      <Message Id="0" ParentId="682" UserId="890156" Date="10/07/2012 15:30:46" Content="I would like to print some &quot;explanation&quot; next/below the plot. This seems to be really hard:&#xD;&#xA;http://stackoverflow.com/questions/10014187/displaying-text-below-the-plot-generated-by-ggplot2&#xD;&#xA;&#xD;&#xA;It would be nice if ggplot would have a call like &#xD;&#xA;```&#xD;&#xA;p &lt;- ...&#xD;&#xA;p &lt;- p + description(position=&quot;below&quot;,  text=&quot;some explanation about the plot&quot;,  wrap=T)&#xD;&#xA;p&#xD;&#xA;```&#xD;&#xA;which would print the description below the plot (and wraps it,  if needed -&gt; see #681)." />
      <Message Id="9209352" ParentId="682" UserId="4196" Date="10/07/2012 16:04:25" Content="This is something that I think is outside of the scope of ggplot2 - and it's usually much easier to do outside of R." />
      <Message Id="9615613" ParentId="682" UserId="890156" Date="10/19/2012 19:31:57" Content="From my point of view it is the same as `ggtitle(&quot;...&quot;)` :-) Having to do this outside of R would mean that it can't be used in knitr/... and inside R like in the mentioned stackoverflow question is really hard.&#xD;&#xA;&#xD;&#xA;This isn't about adding a captions (like in latex) but more like &quot;(C) ggplot2 developers&quot;,  &quot;Data from &gt;&gt;big survey of anything&lt;&lt; project&quot; or &quot;Plot based on data with x=3 and y=4&quot;.&#xD;&#xA;&#xD;&#xA;It would be nice if you could reconsider this issue. Thanks!" />
      <Message Id="9616708" ParentId="682" UserId="1509626" Date="10/19/2012 20:03:09" Content="Umm,  can you give an actual example Jan? Normally when inserting figures,  you would then provide the caption text,  yourself. What is so hard about putting the text in the latex or markdown after the figure is generated? Unless you had a bunch of figures with some kind of pre-generated attributes that don't fit in the title. But if that is the case then I can imagine using a loop,  and perhaps printing ggplot plots,  and then printing text. But I think @hadley is right,  this normally is outside the scope of the plotting routine. But I'd be curious to see an actual example where it is necessary." />
      <Message Id="9620872" ParentId="682" UserId="890156" Date="10/19/2012 21:11:20" Content="In my case I just saved several similar plots where I subsetted my original dataframe and putting &quot;(at x=5,  y=6)&quot; in the title became really ugly. I was later adding the plots to a powerpoint presentation,  where it was nice that the actual &quot;description&quot; of the plot was all contained in the png." />
      <Message Id="9622121" ParentId="682" UserId="86978" Date="10/19/2012 22:01:10" Content="I think you should be able to do this using gtable - create a grob for the entire plot using `ggplotGrob()` and a textGrob with your label,  then put them into a new gtable object.&#xD;&#xA;" />
      <Message Id="75565319" ParentId="682" UserId="7386756" Date="02/23/2015 15:32:18" Content="I'm currently generating a line chart and I was looking for this functionality. This is good idea and comparable functionalities are available in major statistical packages (i.e. Stata - note and caption). It is a commonly recognised good practice that the chart should be understandable if taken outside the context. The ideal solution is to encapsulate the relevant information with the graph definition.&#xD;&#xA;@rmflight  Putting text in markdown or latex can prove cumbersome in a long run. Let's that I generated the chart that I want to include in a paper but may also include in a presentation or web publication. In addition re-running the chart command I will have to update bits and pieces of the text that maybe scatters across different media. It would be much easier to re-run the command with all the notes and captions and simply replace the graphic. " />
    </Messages>
  </Topic>
  <Topic Id="683" Title="Reorder class attributes for element subclasses">
    <Messages>
      <Message Id="0" ParentId="683" UserId="123968" Date="10/07/2012 23:32:06" Content="I reordered the class attribute of element objects so that the subclass is listed first. As it stands now,  an S3 method could not be written for element_blank,  etc. " />
      <Message Id="9325815" ParentId="683" UserId="86978" Date="10/11/2012 01:29:31" Content="Could you reapply the changes,  basing them off of hadley/master? And also be careful about the spurious changes...&#xD;&#xA;&#xD;&#xA;More info here:&#xD;&#xA;https://github.com/hadley/ggplot2/wiki/Developing-ggplot2-using-github" />
      <Message Id="9326222" ParentId="683" UserId="123968" Date="10/11/2012 01:53:21" Content="Will do.  I'm sorry about the spurious changes,  and I'm not trying to sound like a dick,  but problem is with the ggplot source The ggplot source it is filled with trailing whitespace,  something which most projects disallow for this very reason. Could you cleanup the code to remove all the trailing whitespace? Or I could submit a patch that does it." />
      <Message Id="9326797" ParentId="683" UserId="86978" Date="10/11/2012 02:36:31" Content="I personally am not a fan of trailing whitespace either,  but allow me to reframe this from the perspective of someone who uses a different text editor: the problem is that your editor automatically modifies the text.&#xD;&#xA;&#xD;&#xA;I'm not opposed to having a patch that removes trailing whitespace,  but I'm a little wary about the possibility of bugs. It's probably best to get Hadley's input on that." />
      <Message Id="9327344" ParentId="683" UserId="123968" Date="10/11/2012 03:15:42" Content="And I was loathe to mention it because it is your project,  so you set the coding style. It is just that in this case the consensus appears to be to not allow them: [ R internals ](http://cran.r-project.org/doc/manuals/R-ints.html),  Linux kernel,  Drupal,  Mozilla,  Keberos [ SO ](http://stackoverflow.com/questions/3515597/git-add-only-non-whitespace-changes) and basically any coding convention I can find prohibit trailing whitespace. Even without a text editor,  pre-commit hooks can be added to git to strip out the trailing whitespace. [ Here ](https://github.com/jrnold/ggplot2/compare/fix/kill-trailing-whitespace) is a diff that removes all the trailing whitespace: there were 2290 lines in the r files.&#xD;&#xA;&#xD;&#xA;But I know that you set the coding standards,  and I'll adjust. And I know that it is frustrating from you end to have extraneous lines in diffs,  but it is also frustrating from the submitters end. I have a couple of patches that I've sat on because I it is too tedious to add back in trailing whitespace to get it to work. &#xD;&#xA;&#xD;&#xA;Is Rstudio going to add that feature soon? &#xD;&#xA;&#xD;&#xA;Also,  what do you mean by branching from hadley/master? I keep jrnold/master in-sync with hadley/master and then make a new branch for any feature / fix.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="9328270" ParentId="683" UserId="86978" Date="10/11/2012 04:24:59" Content="I'm looking at the SO thread,  and it seems that plenty of people think that the person asking the question should just turn off the auto-whitespace trimming. The R internals page doesn't say anything about trailing whitespace. It has an example config for ESS in which it says the state of `ess-nuke-trailing-whitespace-p` is `'ask` -- I don't use ESS,  but does this mean it will ask about the trailing whitespace? The R source code has many,  many lines with trailing whitespace (you can grep it for yourself).  I've looked at the GNU coding standards and I don't see anything about trailing whitespace. Google's R standards don't say anything about them either. And for ggplot2,  there's this: https://github.com/hadley/devtools/wiki/Style&#xD;&#xA;&#xD;&#xA;Let me draw an analogy: the R source code has a mix of tabs and spaces,  which I personally find very annoying because of the way my text editor handles tabs and indentation. Let's say my editor auto-replaced tabs with spaces. I wouldn't submit a patch that also replaces all the tabs with spaces,  and then tell them that the problem is that they use tabs the wrong way.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;I'm not sure I understand what feature you're asking about in RStudio. Are you asking if it will add back whitespace that has been removed?&#xD;&#xA;&#xD;&#xA;As for branching from `hadley/master`: there's a merge commit that has nothing in it: 19afd44. It's not the end of the world,  but it makes a cleaner and easier-to-understand project history if it's branched off of `hadley/master`. I don't know why you have the commit,  but my guess is that it has something to do with a `--no-ff` merge." />
      <Message Id="9328564" ParentId="683" UserId="123968" Date="10/11/2012 04:50:56" Content="I was taking the example ESS config file `ess-nuke-trailing-whitespace-p` as endorsing no trailing whitespace. But I didn't grep it,  so apparently,  that isn't followed in practice.  Google's coding standards for C++ excludes trailing whitespace,  and so does the [ Linux kernell ](http://www.kernel.org/doc/Documentation/CodingStyle) with references to git. I still think it is better to require no trailing whitespace in any code that versioned,  but the decision isn't mine to make,  so at this point I'll shut up and make sure to turn off nuking whitespace when I edit ggplot.&#xD;&#xA;&#xD;&#xA;I'll close this request and open a new branch to make those couple of changes without all the extraneous line diffs. &#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="684" Title="Allow setting one of the limits of scale">
    <Messages>
      <Message Id="0" ParentId="684" UserId="205275" Date="10/10/2012 15:43:03" Content="Implements setting of only one limit of a continuous scale by specifying&#xD;&#xA;NA for the limit which you don't want to set.  See #557.&#xD;&#xA;&#xD;&#xA;I had to use NA instead of NULL to implement this,  as is.null() is not &#xD;&#xA;vectorized,  a vector with null at any location is TRUE." />
      <Message Id="9316506" ParentId="684" UserId="86978" Date="10/10/2012 19:37:44" Content="Nice,  this is a useful feature. I've made some comments on the code." />
      <Message Id="9339051" ParentId="684" UserId="205275" Date="10/11/2012 13:07:22" Content="I agree with all of your comments,  the new commit should fix them.  Also thanks for pointing out the any function,  I was not aware of it,  and it makes the code much clearer,  I always thought the sum(logicals) idiom seemed hacky.  Thanks for the comments!" />
      <Message Id="11584767" ParentId="684" UserId="205275" Date="12/20/2012 18:26:51" Content="Is there anything else you need from this pull request in order to merge it?  I would be happy to make any changes needed." />
      <Message Id="11741014" ParentId="684" UserId="86978" Date="12/28/2012 20:38:45" Content="Hi Jim - at the moment I'm working on other projects besides ggplot2,  but when I get back to it I'll be able to take a closer look at the pull request. Offhand it looks fine,  but merging changes like this requires some careful consideration to make sure it that it's done right,  and also that it doesn't introduce subtle bugs." />
      <Message Id="35941694" ParentId="684" UserId="4196" Date="02/24/2014 21:33:18" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="35941694" ParentId="684" UserId="4196" Date="02/24/2014 21:33:18" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="685" Title="Add geom_central">
    <Messages>
      <Message Id="0" ParentId="685" UserId="205275" Date="10/10/2012 18:13:52" Content="Adds a new geom_central geom,  fixes #250" />
      <Message Id="35941781" ParentId="685" UserId="4196" Date="02/24/2014 21:34:04" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="686" Title="put subclass first for class attributes of subclasses of element">
    <Messages>
      <Message Id="0" ParentId="686" UserId="123968" Date="10/11/2012 05:15:57" Content="Cleaner commit of pull request #683. &#xD;&#xA;&#xD;&#xA;I reordered the class attribute of element objects so that the subclass is listed first. As it stands now,  an S3 method could not be written for element_blank,  etc." />
      <Message Id="9362196" ParentId="686" UserId="86978" Date="10/11/2012 23:42:07" Content="Looks good,  thanks." />
    </Messages>
  </Topic>
  <Topic Id="687" Title="theme docs: added more explanation of plot.margin">
    <Messages>
      <Message Id="0" ParentId="687" UserId="123968" Date="10/11/2012 05:42:26" Content="The documentation of the `plot.margin` element in `themes` did not indicate what margins its elements correspond to." />
      <Message Id="9339549" ParentId="687" UserId="4196" Date="10/11/2012 13:22:37" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="688" Title="Automatic dodging or position_dodge not enforced on boxplots with missing values">
    <Messages>
      <Message Id="0" ParentId="688" UserId="585791" Date="10/11/2012 20:56:34" Content="I started this issue as a question in StackOverflow:&#xD;&#xA;http://stackoverflow.com/questions/12806260/how-to-enforce-ggplots-position-dodge-on-categories-with-no-data&#xD;&#xA;&#xD;&#xA;I'm trying to obtain boxplots of two different signals (ind) sharing the same categories (cat).  When there is a category with data for one signal but not for the other one,  the boxplot for the signal with data covers all the horizontal spacing,  and does not respect the position_dodge instruction for that particular category.  As you can see on the example below,  the signal x has no data for category B,  so it loses the space reserved by position_dodge.&#xD;&#xA;&#xD;&#xA;Thanks in advance.&#xD;&#xA;&#xD;&#xA;    data&lt;-data.frame(cat=c('A', 'A', 'A', 'A', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B'),  &#xD;&#xA;                     values=c(3, 2, 1, 4, NA, NA, 4, 5, 6, 7, 8, 9),  &#xD;&#xA;                     ind=c('x', 'x', 'x', 'x', 'x', 'x', 'y', 'y', 'y', 'y', 'y', 'y'))&#xD;&#xA;&#xD;&#xA;    print(ggplot() +&#xD;&#xA;            scale_colour_hue(guide='none') +&#xD;&#xA;          geom_boxplot(&#xD;&#xA;               aes(x=as.factor(cat),  y=values,  &#xD;&#xA;                   fill=ind),  &#xD;&#xA;               position=position_dodge(width=.60),  &#xD;&#xA;               data=data, &#xD;&#xA;               outlier.size = 1.2, &#xD;&#xA;               na.rm=T))&#xD;&#xA;&#xD;&#xA;![ graph with original problem ][ 1 ]&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Here is what I have attempted so far:&#xD;&#xA;&#xD;&#xA;1.  I first tried to change the color of boxes with missing data.  I couldn't figure out how to directly inject the desired color for a single box,  as color information is automatically generated from signals (fill = data$ind in this case).&#xD;&#xA;&#xD;&#xA;2.  Since that did not work,  I exaggerated the dummy values out of the normal y-axis range (-1000),  and I found something interesting happening that looks like a ggplot2 bug:&#xD;&#xA;&#xD;&#xA;Here is the example data with a dummy value for the category with missing data:&#xD;&#xA;&#xD;&#xA;    data            &lt;- data.frame(&#xD;&#xA;    cat=c('A', 'A', 'A', 'A', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B', 'B'),  &#xD;&#xA;    values=c(3, 2, 1, 4, NA, NA, 4, 5, 6, 7, 8, 9,  -1000),  &#xD;&#xA;    ind=c('x', 'x', 'x', 'x', 'x', 'x', 'y', 'y', 'y', 'y', 'y', 'y', 'x'))&#xD;&#xA;&#xD;&#xA;    p  &lt;- ggplot() +&#xD;&#xA;          scale_colour_hue(guide='none') +&#xD;&#xA;          geom_boxplot(aes(x=as.factor(cat),  y=values,  fill=ind), &#xD;&#xA;          position=position_dodge(width=.60),  &#xD;&#xA;          data=data, &#xD;&#xA;          outlier.size = 1.2, &#xD;&#xA;          na.rm=T)&#xD;&#xA;&#xD;&#xA;As shown below,  printing the plot as it is without defining y-axis limits,  we get the correct behavior on the x-axis.  Of course the undesired dummy boxplot will also show up.&#xD;&#xA;&#xD;&#xA;    print(p)&#xD;&#xA;&#xD;&#xA;![ with no y-axis limits ][ 2 ]&#xD;&#xA;&#xD;&#xA;But if we add the y limits,  we still get the original undesired behavior.&#xD;&#xA;&#xD;&#xA;    print(p + ylim(0,  10))&#xD;&#xA;&#xD;&#xA;![ with y-axis limits ][ 3 ]&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;  [ 1 ]: http://i.stack.imgur.com/rKbeq.png&#xD;&#xA;  [ 2 ]: http://i.stack.imgur.com/M3rXi.png&#xD;&#xA;  [ 3 ]: http://i.stack.imgur.com/FldHV.png" />
      <Message Id="9358023" ParentId="688" UserId="4196" Date="10/11/2012 21:08:53" Content="That's by design of `position_dodge`.  Try using facetting for the behaviour you want." />
      <Message Id="9445351" ParentId="688" UserId="585791" Date="10/15/2012 13:49:37" Content="After some workarounds,  I came up with the outcome I was looking for... (kind of) &#xD;&#xA;&#xD;&#xA;    data            &lt;- data.frame(&#xD;&#xA;    cat=c('A', 'A', 'A', 'A', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B', 'B'),  &#xD;&#xA;    values=c(3, 2, 1, 4, NA, NA, 4, 5, 6, 7, 8, 9,  0),  &#xD;&#xA;    ind=c('x', 'x', 'x', 'x', 'x', 'x', 'y', 'y', 'y', 'y', 'y', 'y', 'x'))&#xD;&#xA;&#xD;&#xA;    p  &lt;- ggplot() +&#xD;&#xA;          scale_colour_hue(guide='none') +&#xD;&#xA;          geom_boxplot(aes(x=as.factor(cat),  y=values,  fill=ind), &#xD;&#xA;          position=position_dodge(width=.60),  &#xD;&#xA;          data=data, &#xD;&#xA;          outlier.size = 1.2, &#xD;&#xA;          na.rm=T) +&#xD;&#xA;          geom_line(aes(x=x,  y=y),  &#xD;&#xA;                    data=data.frame(x=c(0, 3), y=rep(0, 2)),  &#xD;&#xA;                    size = 1,  &#xD;&#xA;                    col='white')&#xD;&#xA;    print(p)&#xD;&#xA;&#xD;&#xA;![ solution with workaround ][ 2 ]&#xD;&#xA;&#xD;&#xA;Unfortunately,  faceting doesn't give the effect I'm looking for.  The final graph I was looking for is shown below:&#xD;&#xA;&#xD;&#xA;![ final graph ][ 3 ]&#xD;&#xA;&#xD;&#xA;If you notice,  the white major tick mark at y = 10 is thicker than the other tick marks.  This thicker line is the geom_line with size=1 that hides unwanted boxplots.&#xD;&#xA;&#xD;&#xA;I wish we could combine different geom objects more seamlessly.  I guess I'm using ggplot2 in a non-standard way and workarounds are the way to go on these kind of issues.  Anyhow,  thank you for your fast response,  Hadley.  And thanks for putting together ggplot2,  wish I love.&#xD;&#xA;&#xD;&#xA;  [ 1 ]: http://i.stack.imgur.com/rKbeq.png&#xD;&#xA;  [ 2 ]: http://i.stack.imgur.com/G66bR.png&#xD;&#xA;  [ 3 ]: http://i.stack.imgur.com/HHTZ8.png" />
      <Message Id="9445568" ParentId="688" UserId="4196" Date="10/15/2012 13:55:28" Content="Hmmm,  maybe we should have an option to `position_dodge` (maybe `drop = FALSE`) that would support this behaviour. It is a fairly common request." />
      <Message Id="35941812" ParentId="688" UserId="4196" Date="02/24/2014 21:34:21" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="689" Title="Latitude lines are missing with coord_map()">
    <Messages>
      <Message Id="0" ParentId="689" UserId="86978" Date="10/11/2012 23:37:51" Content="This is in the development version&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(maps)&#xD;&#xA;states_map &lt;- map_data(&quot;state&quot;)&#xD;&#xA;&#xD;&#xA;# OK&#xD;&#xA;ggplot(states_map,  aes(x=long,  y=lat,  group=group)) + geom_path()&#xD;&#xA;&#xD;&#xA;# Bad: no latitude lines&#xD;&#xA;ggplot(states_map,  aes(x=long,  y=lat,  group=group)) + geom_path() + coord_map()&#xD;&#xA;```" />
      <Message Id="9676338" ParentId="689" UserId="86978" Date="10/22/2012 19:06:40" Content="A git bisect finds that this bug was introduced by 70ea0bc732ff776d81cebf184af1b65a08c624cf,  which was a fix for #562." />
    </Messages>
  </Topic>
  <Topic Id="690" Title="theme element text angle">
    <Messages>
      <Message Id="0" ParentId="690" UserId="2547204" Date="10/12/2012 19:50:17" Content="Hi - the angle of the strip text does not seem to be working properly.  If I have to turn text by 90 degrees to make it horizontal,  it needs to be changed by 360 degree.  &#xD;&#xA;&#xD;&#xA;Here is my code.&#xD;&#xA;&#xD;&#xA;thanks, &#xD;&#xA;Vivek&#xD;&#xA;&#xD;&#xA;a &lt;- rnorm(100)&#xD;&#xA;b &lt;- rep(&quot;Group1&quot;,  &quot;Group2&quot;, &quot;Group3&quot;, &quot;Group4&quot;,  25)&#xD;&#xA;cdata &lt;- data.frame(a, b)&#xD;&#xA;&#xD;&#xA;ggplot() +&#xD;&#xA;geom_point(aes(x = b, y = a), data=cdata, na.rm = TRUE)+&#xD;&#xA;facet_grid(facets = b ~ .) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;dev.new()&#xD;&#xA;ggplot() +&#xD;&#xA;geom_point(aes(x = b, y = a), data=cdata, na.rm = TRUE)+&#xD;&#xA;facet_grid(facets = b ~ .) +&#xD;&#xA;theme(strip.text.y = element_text(angle =90))	 ## this turns by 180 degrees&#xD;&#xA;&#xD;&#xA;dev.new()&#xD;&#xA;ggplot() +&#xD;&#xA;geom_point(aes(x = b, y = a), data=cdata, na.rm = TRUE)+&#xD;&#xA;facet_grid(facets = b ~ .) +&#xD;&#xA;theme(strip.text.y = element_text(angle =180))&#xD;&#xA;&#xD;&#xA;dev.new()&#xD;&#xA;ggplot() +&#xD;&#xA;geom_point(aes(x = b, y = a), data=cdata, na.rm = TRUE)+&#xD;&#xA;facet_grid(facets = b ~ .) +&#xD;&#xA;theme(strip.text.y = element_text(angle =270)) ## this turns by 90 degrees&#xD;&#xA;&#xD;&#xA;dev.new()&#xD;&#xA;ggplot() +&#xD;&#xA;geom_point(aes(x = b, y = a), data=cdata, na.rm = TRUE)+&#xD;&#xA;facet_grid(facets = b ~ .) +&#xD;&#xA;theme(strip.text.y = element_text(angle =360))" />
      <Message Id="9389268" ParentId="690" UserId="463252" Date="10/12/2012 20:29:00" Content="The angle as specified in `element_text` is not a rotation from the current orientation,  but rather a specification of an absolute rotation angle from horizontal. So to get a horizontal label,  you want `theme(strip.text.y=element_text(angle=0))`. That is 0 degrees from horizontal,  not 0 degree rotation from previous orientation.&#xD;&#xA;&#xD;&#xA;Another way to say this is that the default value for the angle for `strip.text.y` is `-90` and when you use `element_text`,  you reset (replace) it,  not add to it." />
      <Message Id="9389532" ParentId="690" UserId="2547204" Date="10/12/2012 20:39:40" Content="OK,  got it.  Thank Brian!" />
    </Messages>
  </Topic>
  <Topic Id="691" Title="Suggestion for documentation">
    <Messages>
      <Message Id="0" ParentId="691" UserId="506275" Date="10/13/2012 10:19:32" Content="Please add the &quot;type&quot; trick to the ggsave documentation,  it's not that easy to find:&#xD;&#xA;&#xD;&#xA;https://gist.github.com/3777731&#xD;&#xA;" />
      <Message Id="35941842" ParentId="691" UserId="4196" Date="02/24/2014 21:34:34" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="692" Title="New themes suitable for extending">
    <Messages>
      <Message Id="0" ParentId="692" UserId="123968" Date="10/14/2012 20:17:46" Content="I added some new themes which are not meant to be used directly but are designed to make extending and writing new themes easier.  I noticed when writing themes that using `theme_gray()`or `theme_bw()` as the base theme required finding which non-top level elements were defined by those themes.   `theme_base0` is a  complete theme that only defines top-level elements.  `theme_base_sizes` defines various size elements that are used in `theme_gray`,  and users are less likely to want to alter than colors.  `theme_base` combines `theme_base0` and `theme_base_sizes`." />
      <Message Id="9445026" ParentId="692" UserId="4196" Date="10/15/2012 13:39:04" Content="I like the idea,  but I don't really like the names." />
      <Message Id="9450879" ParentId="692" UserId="123968" Date="10/15/2012 16:13:05" Content="I don't really have any good ideas on the names: theme_alpha,  theme_foundation,  theme_naught? " />
      <Message Id="11634639" ParentId="692" UserId="123968" Date="12/22/2012 07:11:29" Content="I renamed theme_base to theme_foundation,  and made theme_foundation the only exported function. This seems like a more intuitive name,  because the theme provides a foundation to build new themes from.  " />
      <Message Id="35941880" ParentId="692" UserId="4196" Date="02/24/2014 21:34:58" Content="Does `theme_blank()`/`theme_minimal()` now do this?" />
    </Messages>
  </Topic>
  <Topic Id="693" Title="improved print methods for theme and element classes">
    <Messages>
      <Message Id="0" ParentId="693" UserId="123968" Date="10/14/2012 20:57:24" Content="I added new print methods for `theme` and `element` objects which are easier to understand than the existing methods.  Additionally,  the output of print can be evaluated to recreate the object. This makes it easy to create a new theme by printing an existing theme and making edits to the output. &#xD;&#xA;&#xD;&#xA;Example of print output for `theme_gray`&#xD;&#xA;&#xD;&#xA;``` r-console&#xD;&#xA;&gt; print(theme_gray()$rect)&#xD;&#xA;element(fill = &quot;white&quot;,  colour = &quot;black&quot;,  size = 0.5,  linetype = 1) &#xD;&#xA;&gt; print(theme_gray())&#xD;&#xA;theme(line = element(colour = &quot;black&quot;,  size = 0.5,  linetype = 1,  lineend = &quot;butt&quot;), &#xD;&#xA;rect = element(fill = &quot;white&quot;,  colour = &quot;black&quot;,  size = 0.5,  linetype = 1), &#xD;&#xA;text = element(family = &quot;&quot;,  face = &quot;plain&quot;,  colour = &quot;black&quot;,  size = 12,  hjust = 0.5,  vjust = 0.5,  angle = 0,  lineheight = 0.9), &#xD;&#xA;axis.text = element(colour = &quot;grey50&quot;,  size = rel(0.8)), &#xD;&#xA;strip.text = element(size = rel(0.8)), &#xD;&#xA;axis.line = element(), &#xD;&#xA;axis.text.x = element(vjust = 1), &#xD;&#xA;axis.text.y = element(hjust = 1), &#xD;&#xA;axis.ticks = element(colour = &quot;grey50&quot;), &#xD;&#xA;axis.title.x = element(), &#xD;&#xA;axis.title.y = element(angle = 90), &#xD;&#xA;axis.ticks.length = unit(0.15,  &quot;cm&quot;), &#xD;&#xA;axis.ticks.margin = unit(0.1,  &quot;cm&quot;), &#xD;&#xA;legend.background = element(colour = NA), &#xD;&#xA;legend.margin = unit(0.2,  &quot;cm&quot;), &#xD;&#xA;legend.key = element(fill = &quot;grey95&quot;,  colour = &quot;white&quot;), &#xD;&#xA;legend.key.size = unit(1.2,  &quot;lines&quot;), &#xD;&#xA;legend.key.height = NULL, &#xD;&#xA;legend.key.width = NULL, &#xD;&#xA;legend.text = element(size = rel(0.8)), &#xD;&#xA;legend.text.align = NULL, &#xD;&#xA;legend.title = element(face = &quot;bold&quot;,  size = rel(0.8),  hjust = 0), &#xD;&#xA;legend.title.align = NULL, &#xD;&#xA;legend.position = &quot;right&quot;, &#xD;&#xA;legend.direction = NULL, &#xD;&#xA;legend.justification = &quot;center&quot;, &#xD;&#xA;legend.box = NULL, &#xD;&#xA;panel.background = element(fill = &quot;grey90&quot;,  colour = NA), &#xD;&#xA;panel.border = element(), &#xD;&#xA;panel.grid.major = element(colour = &quot;white&quot;), &#xD;&#xA;panel.grid.minor = element(colour = &quot;grey95&quot;,  size = 0.25), &#xD;&#xA;panel.margin = unit(0.25,  &quot;lines&quot;), &#xD;&#xA;strip.background = element(fill = &quot;grey80&quot;,  colour = NA), &#xD;&#xA;strip.text.x = element(), &#xD;&#xA;strip.text.y = element(angle = -90), &#xD;&#xA;plot.background = element(colour = &quot;white&quot;), &#xD;&#xA;plot.title = element(size = rel(1.2)), &#xD;&#xA;plot.margin = unit(c(1,  1,  0.5,  0.5),  &quot;lines&quot;), &#xD;&#xA;complete = TRUE) &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The print output evaluates to the original object.&#xD;&#xA;&#xD;&#xA;``` r-console&#xD;&#xA;&gt; identical(eval(parse(text=as.character(theme_gray()))),  theme_gray())&#xD;&#xA;TRUE&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="9444985" ParentId="693" UserId="4196" Date="10/15/2012 13:38:03" Content="I made a few smaller comments,  but I'm not entirely sure that printing the object should produce something you can easily copy and pasted." />
      <Message Id="9451638" ParentId="693" UserId="123968" Date="10/15/2012 16:33:35" Content="This and #692 are really two solutions to the same problem. My workflow when extend a theme has generally gone as follows. I'd start with `theme_gray`,  and make a few additions. Wonder why the axis ticks were still gray. Repeat those two steps a couple of times. Then give up and just copy the source code of theme_gray() and manually edit it. The later step arose because of the nature of the basic themes (as in #692),  but also because the print output of themes makes it hard to get a quick global understanding of what is going on. I found that the source code used to create the theme was more understandable than the theme itself.  #692 mitigates some of the need for this. However,  this did come out of a real need in my workflow.&#xD;&#xA;&#xD;&#xA;I'd generally agree with you on the dangers of copy and pasting.  However,  in this case,  I tend to think of the themes more like data than code. Inheriting from other themes is a quick way to fill in the entries of the data. But once I have the set of elements in a theme,  I don't mind if its entries are no longer tied to the themes that it was created from,  and in many cases I may not want it to change if the definition of the other theme changes.  &#xD;&#xA;&#xD;&#xA;I myself do not put p=1 that this is the best way to do it,  but I thought that I'd throw the idea out there and see whether it was useful. " />
      <Message Id="35941896" ParentId="693" UserId="4196" Date="02/24/2014 21:35:07" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="694" Title="Errors with `facet_grid` and devel version of plyr ">
    <Messages>
      <Message Id="0" ParentId="694" UserId="86978" Date="10/14/2012 22:03:55" Content="Not sure yet whether this is a bug or a feature in plyr. Examples:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- data.frame(x=1:8,  y=1:8,  f=c(&quot;a&quot;, &quot;b&quot;))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x,  y)) + geom_point()&#xD;&#xA;&#xD;&#xA;p                  # OK&#xD;&#xA;p + facet_wrap(~f) # OK&#xD;&#xA;&#xD;&#xA;p + facet_grid(.~f)&#xD;&#xA;# Error: Results must have one or more dimensions.&#xD;&#xA;p + facet_grid(f~.)&#xD;&#xA;# Error: Results must have one or more dimensions.&#xD;&#xA;```" />
      <Message Id="9461931" ParentId="694" UserId="86978" Date="10/15/2012 21:15:26" Content="Fixed in 90b8bcb9c45fa0b036627ff1a9cbf398421392f9,  by switching to `apply()`." />
    </Messages>
  </Topic>
  <Topic Id="695" Title="facet_wrap fill by column">
    <Messages>
      <Message Id="0" ParentId="695" UserId="1763278" Date="10/15/2012 02:00:13" Content="As far as I can tell `facet_wrap` fills by row. In the same way you can specify how to fill a `matrix` with `byrow` I was hoping you could do the same with `facet_wrap`. I know I could reorder the levels of a factor to plot in this manner but this seems like a bit of work if this could be incorporated into the `facet_grid` arguments.&#xD;&#xA;&#xD;&#xA;LINKED SO question: http://stackoverflow.com/questions/12888302/facet-wrap-fill-by-column" />
      <Message Id="35941937" ParentId="695" UserId="4196" Date="02/24/2014 21:35:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="696" Title="Error: (converted from warning) Removed 1463 rows containing missing values (geom_point).">
    <Messages>
      <Message Id="0" ParentId="696" UserId="1689944" Date="10/15/2012 22:01:16" Content="I ran into a probable bug. I am working with big dataset and data.table package. Though it is hard to reproduce,  or I am not aware of way of doing it...&#xD;&#xA;&#xD;&#xA;First I have some data,  that print graphs in this form &#xD;&#xA;&#xD;&#xA;      plot_cleared &lt;- ggplot(crude_dataset_2[ abs(log_ret)&gt;0.003 ],  aes(strptime(Time, &quot;%H%M&quot;),  log_ret))&#xD;&#xA;      plot_cleared + geom_point(alpha = 1/10) + xlab(&quot;Time&quot;) + ylab(&quot;Log-return&quot;) + scale_y_continuous(limits=c(-0.015, 0.015))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;it works fine,  I draw several graphs,  it always warns that some rows contain missing values (as in the subject above,  but after some playing around with graphs (generally changing parameter like 0.003 to something different) starts to produce error from the warning.&#xD;&#xA;&#xD;&#xA;It seems as if something internally changed `options(warnings = )` to a value that converts warnings to errors. (I haven't been able to check it,  because it hasn't happened since I came up with this explanation.) The data didn't change at all,  so the only explanation is `ggplot2` or some interaction between `data.table` and `ggplot2`,  which is weird,  because `data.table` should pretend to be `data.frame`...&#xD;&#xA;&#xD;&#xA;The error doesn't go away with unloading of the package (so it supports the option variant),  but when I restart the r-session,  it is fine.&#xD;&#xA;&#xD;&#xA;I cannot even share the data,  because they are confidential :(." />
      <Message Id="9464307" ParentId="696" UserId="86978" Date="10/15/2012 22:28:31" Content="This doesn't sound like a ggplot2 problem. I agree that it's likely that `options(warning=2)` is getting set,  but ggplot2 doesn't do that anywhere. I think the mailing list might be more able to help (and be sure to include `sessionInfo()`)." />
    </Messages>
  </Topic>
  <Topic Id="697" Title="geom_contour: fallback to &quot;fill&quot; aesthetic if no &quot;z&quot; mapping is present">
    <Messages>
      <Message Id="0" ParentId="697" UserId="890156" Date="10/19/2012 19:11:15" Content="For the following example,  I was expecting that geom_contour would work without adding additional mappings:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;x = c(1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5)&#xD;&#xA;y = c(1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5)&#xD;&#xA;x2 = x*y&#xD;&#xA;df_test = data.frame(a=x,  b=y,  c=x2)&#xD;&#xA;plot = ggplot(df_test,  aes(x=a,  y=b,  fill=c)) +   &#xD;&#xA;  geom_tile() &#xD;&#xA;plot&#xD;&#xA;plot + geom_contour()&#xD;&#xA;# Error: stat_contour requires the following missing aesthetics: z&#xD;&#xA;plot +   geom_contour(aes(z=c))&#xD;&#xA;# works&#xD;&#xA;```" />
      <Message Id="9614242" ParentId="697" UserId="86978" Date="10/19/2012 19:16:47" Content="I'm pretty sure that's how it's supposed to work. The mailing list might be helpful if you're looking to contours with fill. Also see http://docs.ggplot2.org/0.9.2.1/stat_contour.html." />
      <Message Id="9615868" ParentId="697" UserId="890156" Date="10/19/2012 19:41:09" Content="I was just surprised that it didn't work: More or less I wanted a tile plot with contours and I thought that both of them represent the same data mappings. " />
    </Messages>
  </Topic>
  <Topic Id="698" Title="Fix map lines">
    <Messages>
      <Message Id="0" ParentId="698" UserId="86978" Date="10/22/2012 22:04:18" Content="This fixes #689. It should also give correct results for  #562.&#xD;&#xA;&#xD;&#xA;I've also added some visual tests for the projections.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="699" Title="Draw geom_polygon as a single grob">
    <Messages>
      <Message Id="0" ParentId="699" UserId="86978" Date="10/22/2012 22:40:35" Content="This fixes #666.&#xD;&#xA;&#xD;&#xA;These are the times with the old version (ggplot2 0.9.2.1). First is `geom_polygon`,  then `geom_path`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(maps)&#xD;&#xA;system.time(print(ggplot(map_data(&quot;world&quot;)) + geom_polygon(aes(long,  lat,  group = group))))&#xD;&#xA;#   user  system elapsed &#xD;&#xA;# 11.701   0.247  46.543 &#xD;&#xA;system.time(print(ggplot(map_data(&quot;world&quot;)) + geom_path(aes(long,  lat,  group = group))))&#xD;&#xA;#   user  system elapsed &#xD;&#xA;#  2.802   0.123   3.044&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;These are the times after the fix:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(maps)&#xD;&#xA;system.time(print(ggplot(map_data(&quot;world&quot;)) + geom_polygon(aes(long,  lat,  group = group))))&#xD;&#xA;#   user  system elapsed &#xD;&#xA;#  0.922   0.098   1.157 &#xD;&#xA;system.time(print(ggplot(map_data(&quot;world&quot;)) + geom_path(aes(long,  lat,  group = group))))&#xD;&#xA;#   user  system elapsed &#xD;&#xA;#  3.038   0.146   3.319 &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;`geom_polygon` is now about 12.5x faster than it was before -- and it's now 3x faster than `geom_path`. Not bad!&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;All the tests pass,  and visual tests are unchanged (which is a little surprising -- I would have expected the change in polygon grouping to result in some changes to the PDF)." />
      <Message Id="9683606" ParentId="699" UserId="86978" Date="10/22/2012 22:43:41" Content="Now that `geom_polygon()` is faster,  examples that use `geom_path()` but draw closed polygons (not open paths) should probably be changed to use `geom_polygon(colour=&quot;black&quot;,  fill=NA)`." />
      <Message Id="9683637" ParentId="699" UserId="4196" Date="10/22/2012 22:44:57" Content="Nice! That definitely deserves a bullet in the news." />
    </Messages>
  </Topic>
  <Topic Id="700" Title="Theme classic">
    <Messages>
      <Message Id="0" ParentId="700" UserId="86978" Date="10/23/2012 20:25:56" Content="This is from @dkahle's suggestion in #641.&#xD;&#xA;&#xD;&#xA;This example illustrates the output:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;theme_classic &lt;- function(base_size = 12,  base_family = &quot;&quot;){ &#xD;&#xA;  theme_bw(base_size = base_size,  base_family = base_family) %+replace%&#xD;&#xA;    theme(&#xD;&#xA;      panel.border     = element_blank(), &#xD;&#xA;      axis.line        = element_line(colour = &quot;black&quot;), &#xD;&#xA;      panel.grid.major = element_blank(), &#xD;&#xA;      panel.grid.minor = element_blank()&#xD;&#xA;    )&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;qplot(displ,  hwy,  data = mpg,  colour=class) + theme_classic()&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="701" Title="Gradual deprecation with gg_dep">
    <Messages>
      <Message Id="0" ParentId="701" UserId="86978" Date="10/23/2012 23:33:55" Content="This fixes #672. To use it,  you specify the last version where the function was *good*. Example usage:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;gg_dep(&quot;0.8.9&quot;,  &quot;blah blah blah&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Sample output:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# Differs by subminor version number&#xD;&#xA;qplot(1:3,  1:3) + coord_cartesian(wise=T)&#xD;&#xA;# wise argument to coord_cartesian is ignored (Deprecated; last used in version 0.9.0)&#xD;&#xA;&#xD;&#xA;# Differs by minor version number&#xD;&#xA;qplot(1:3,  1:3,  colour=1:3) + scale_colour_continuous(legend=T)&#xD;&#xA;# Warning message:&#xD;&#xA;# &quot;legend&quot; argument in scale_XXX is deprecated. Use guide=&quot;none&quot; for suppress the guide display. (Deprecated; last used in version 0.8.9) &#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="9743449" ParentId="701" UserId="4196" Date="10/24/2012 15:20:49" Content="Looks good!" />
    </Messages>
  </Topic>
  <Topic Id="702" Title="Fix density">
    <Messages>
      <Message Id="0" ParentId="702" UserId="86978" Date="10/24/2012 02:44:52" Content="This partially fixes #676. It fixes the first case,  where there are some groups with &gt;= 3 points. But there are still errors if all groups have &lt; 3 points. This is because `StatDensity$calculate` returns an empty data frame with no y values to train the scale. I'm not sure what the proper solution is. Maybe return a data frame with `y=0`?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;For the fix that I've done so far,  I had to infer the correct behavior of `finite.cases()`. @hadley,  it would be good if you could look at the tests I wrote to check if I was right.&#xD;&#xA;" />
      <Message Id="9745381" ParentId="702" UserId="4196" Date="10/24/2012 16:07:44" Content="What was wrong with the old behaviour of finite cases?  I can't intuit how your version is different." />
      <Message Id="9745738" ParentId="702" UserId="86978" Date="10/24/2012 16:17:06" Content="Previously,  it would throw an error if the input had only one row:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; ggplot2:::finite.cases(data.frame(x=4))&#xD;&#xA;Error in rowSums(vapply(x,  is.finite,  logical(nrow(x)))) : &#xD;&#xA;  'x' must be an array of at least two dimensions&#xD;&#xA;&#xD;&#xA;&gt; ggplot2:::finite.cases(data.frame(x=4,  y=11))&#xD;&#xA;Error in rowSums(vapply(x,  is.finite,  logical(nrow(x)))) : &#xD;&#xA;  'x' must be an array of at least two dimensions&#xD;&#xA;&#xD;&#xA;&gt; ggplot2:::finite.cases(data.frame(x=4:5))&#xD;&#xA;[ 1 ] TRUE TRUE&#xD;&#xA;```" />
      <Message Id="9745871" ParentId="702" UserId="4196" Date="10/24/2012 16:21:06" Content="Ok got it - I think it's probably related to http://r.789695.n4.nabble.com/simplify2array-edge-case-td4645894.html.  Your fix looks good." />
      <Message Id="9753301" ParentId="702" UserId="86978" Date="10/24/2012 19:36:48" Content="The remaining error happens because no y scale gets created. For example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dat &lt;- data.frame(x=3)&#xD;&#xA;ggplot(dat,  aes(x=x)) + geom_density()&#xD;&#xA;#Error in UseMethod(&quot;scale_dimension&quot;) : &#xD;&#xA;#  no applicable method for 'scale_dimension' applied to an object of class &quot;NULL&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think the place to add the y scale is in `scales_add_defaults()`. This is where it happens when the stat returns a non-empty data frame." />
    </Messages>
  </Topic>
  <Topic Id="703" Title="Topology preserving line simplification">
    <Messages>
      <Message Id="0" ParentId="703" UserId="4196" Date="10/24/2012 21:21:29" Content="http://www.jasondavies.com/maps/simplify/" />
      <Message Id="35942277" ParentId="703" UserId="4196" Date="02/24/2014 21:38:35" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="704" Title="Legend order is not synchronized with coord_flip">
    <Messages>
      <Message Id="0" ParentId="704" UserId="1363467" Date="10/25/2012 14:48:20" Content="On coord_flip order of legend is precisely the opposite of what is needed. &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(factor(cyl),  mpg))&#xD;&#xA;p + geom_boxplot(aes(fill = factor(am))) + coord_flip()&#xD;&#xA;```&#xD;&#xA;![ barplot ](http://vitalie.spinu.info/tmp/ggplot.png)&#xD;&#xA;&#xD;&#xA;This happens with other geoms as well.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;(p &lt;- qplot(1:5,  1,  colour = letters[ 1:5 ]))&#xD;&#xA;(p &lt;- qplot(1:5,  1,  colour = letters[ 1:5 ]) +coord_flip())&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I know that this can be fixed with `guide_legend( reverse = T)` but it looks to me that it's quite natural to flip the legend automatically  when the coordinates are flipped.&#xD;&#xA;&#xD;&#xA;This is my real case example:&#xD;&#xA;![ barplot2 ](http://vitalie.spinu.info/tmp/ggplot3.png)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="18646134" ParentId="704" UserId="2822757" Date="05/29/2013 21:05:23" Content="I want to report the same issue... Yes,  is a little annoying when there is a lot of factors (17 levels) :/" />
      <Message Id="35942294" ParentId="704" UserId="4196" Date="02/24/2014 21:38:48" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35942294" ParentId="704" UserId="4196" Date="02/24/2014 21:38:48" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="705" Title="Setting facet labels to blank_theme() returns only some of the space">
    <Messages>
      <Message Id="0" ParentId="705" UserId="1442021" Date="10/25/2012 18:16:05" Content="In the course of a project this week I needed to arrange a faceted plot above an unfacted plot for comparison. I noticed that the grid lines of the two plots (using the same x axis scale) did not line up. &#xD;&#xA;&#xD;&#xA;I realized that  setting facet labels to blank_theme() returns some horizontal space but not all of it. &#xD;&#xA;&#xD;&#xA;Stacking graphs with grid.layout() reveals that faceted plots without labels are still not as wide as a plot without facets. See my example at http://pastebin.com/xJedJr1b " />
      <Message Id="35942376" ParentId="705" UserId="4196" Date="02/24/2014 21:39:24" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="706" Title="scale_y_reverse doesn't reverse xend and yend for annotate()">
    <Messages>
      <Message Id="0" ParentId="706" UserId="86978" Date="10/26/2012 04:46:04" Content="Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;points &lt;- data.frame(x=runif(50,  -1,  1),  y=runif(50,  -1,  1))&#xD;&#xA;segments &lt;- data.frame(a=0.75,  b=-0.75,  c=-0.5,  d=0.5)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Base plot with points&#xD;&#xA;p &lt;- ggplot() + geom_point(aes(x=x,  y=y),  data=points) &#xD;&#xA;&#xD;&#xA;# With geom_segment: OK&#xD;&#xA;p1 &lt;- p + geom_segment(aes(x=a,  xend=b,  y=c,  yend=d),  data=segments)&#xD;&#xA;p1&#xD;&#xA;&#xD;&#xA;# With geom_segment and scale_y_reverse: OK&#xD;&#xA;p1 + scale_y_reverse()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# With annotate: OK&#xD;&#xA;p2 &lt;- p + annotate(&quot;segment&quot;,  x=0.75,  xend=-0.75,  y=-0.5,  yend=0.5)&#xD;&#xA;p2&#xD;&#xA;&#xD;&#xA;# With annotate and scale_y_reverse: Not OK&#xD;&#xA;p2 + scale_y_reverse()&#xD;&#xA;```" />
      <Message Id="35942384" ParentId="706" UserId="4196" Date="02/24/2014 21:39:27" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="707" Title="Feature request: Add a 'step' option to geom_ribbon">
    <Messages>
      <Message Id="0" ParentId="707" UserId="1068987" Date="10/26/2012 15:56:24" Content="I'm interested in being able to plot confidence intervals/bands for step functions (such as nonparametric estimated survival curves) using geom_ribbon. I've hacked up a solution using geom_rect,  but I thought it would be nice if I could use geom_ribbon instead.&#xD;&#xA;&#xD;&#xA;Here is an example using geom_rect:&#xD;&#xA;```R&#xD;&#xA;library(survival)&#xD;&#xA;aml.fit = survfit(Surv(time,  status) ~ 1,  data = aml)&#xD;&#xA;aml.gg = do.call(data.frame, &#xD;&#xA;                 summary(aml.fit)[ c('time',  'surv',  'lower',  'upper') ])&#xD;&#xA;aml.rect = aml.gg[ -nrow(aml.gg),   ]&#xD;&#xA;aml.rect$timemax = aml.gg$time[ -1 ]&#xD;&#xA;ggplot(aml.gg) +&#xD;&#xA;  geom_step(aes(x = time,  y = surv)) +&#xD;&#xA;  geom_rect(data = aml.rect, &#xD;&#xA;            aes(xmin = time,  xmax = timemax,  ymin = lower,  ymax = upper), &#xD;&#xA;            alpha = 0.1)&#xD;&#xA;```&#xD;&#xA;Here is how I would hope to use geom_ribbon instead:&#xD;&#xA;```R&#xD;&#xA;ggplot(aml.gg) +&#xD;&#xA;  geom_step(aes(x = time,  y = surv)) +&#xD;&#xA;  geom_ribbon(aes(x = time,  ymin = lower,  ymax = upper), &#xD;&#xA;              step = T)&#xD;&#xA;```" />
      <Message Id="35942392" ParentId="707" UserId="4196" Date="02/24/2014 21:39:33" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="708" Title="Fixes for gg_dep">
    <Messages>
      <Message Id="0" ParentId="708" UserId="463252" Date="10/26/2012 22:51:28" Content="The documentation for gg_dep and the function arguments disagreed on&#xD;&#xA;the name of the second argument. Fixed documentation to agree with code.&#xD;&#xA;&#xD;&#xA;Two instances of multiple character strings being passed to gg_dep&#xD;&#xA;(where it was possible to pass them to message/warning) were fixed&#xD;&#xA;by wrapping them in paste with a sep of \n (like was done in other&#xD;&#xA;functions).&#xD;&#xA;&#xD;&#xA;There is no function error,  it is stop." />
      <Message Id="9829674" ParentId="708" UserId="86978" Date="10/26/2012 22:56:35" Content="Wow,  I made a mess of that. Thanks for the fixes!" />
    </Messages>
  </Topic>
  <Topic Id="709" Title="geom_dotplot doesn't work with position=position_dodge()">
    <Messages>
      <Message Id="0" ParentId="709" UserId="86978" Date="10/28/2012 07:40:27" Content="It results in an error of `position=position_dodge()` or `position_stack().&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(ToothGrowth,  aes(factor(dose),  len,  fill=supp)) +&#xD;&#xA;  geom_dotplot(binaxis=&quot;y&quot;,  position=position_dodge(0.2))&#xD;&#xA;#Error in position == &quot;stack&quot; : &#xD;&#xA;#  comparison (1) is possible only for atomic and list types&#xD;&#xA;&#xD;&#xA;ggplot(ToothGrowth,  aes(factor(dose),  len,  fill=supp)) +&#xD;&#xA;  geom_dotplot(binaxis=&quot;y&quot;,  position=position_stack())&#xD;&#xA;#Error in position == &quot;stack&quot; : &#xD;&#xA;#  comparison (1) is possible only for atomic and list types&#xD;&#xA;&#xD;&#xA;# OK: use position=&quot;dodge&quot; or &quot;stack&quot;&#xD;&#xA;ggplot(ToothGrowth,  aes(factor(dose),  len,  fill=supp)) +&#xD;&#xA;  geom_dotplot(binaxis=&quot;y&quot;,  position=&quot;dodge&quot;)&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="710" Title="online documentation formatting">
    <Messages>
      <Message Id="0" ParentId="710" UserId="402025" Date="10/29/2012 02:36:27" Content="I'm not sure if this a `ggplot2` issue or a `staticdocs` issue,  but for at least all the `stat_....` help pages&#xD;&#xA;&#xD;&#xA;http://docs.ggplot2.org/current/stat_bin.html&#xD;&#xA;&#xD;&#xA;etc, &#xD;&#xA;&#xD;&#xA;The *Value* section is not formatted correctly. I would presume that the list of `data, frame` columns should be formatted either like the *Argument* section or the *Aesthetics* section.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35942582" ParentId="710" UserId="4196" Date="02/24/2014 21:41:12" Content="Moved to https://github.com/hadley/staticdocs/issues/54" />
    </Messages>
  </Topic>
  <Topic Id="711" Title="NA's in linetype scales cause error">
    <Messages>
      <Message Id="0" ParentId="711" UserId="86978" Date="10/29/2012 18:16:59" Content="From https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/w6PA7ifC_lc&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(data=msleep,  aes(x=brainwt,  y=bodywt,  linetype=factor(vore)),  group=vore)+ geom_line()&#xD;&#xA;# Error in grid.Call.graphics(L_lines,  x$x,  x$y,  index,  x$arrow) : &#xD;&#xA;#   invalid hex digit in 'color' or 'lty'&#xD;&#xA;# In addition: Warning message:&#xD;&#xA;# Removed 25 rows containing missing values (geom_path). &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# This works&#xD;&#xA;ms &lt;- msleep[  !is.na(msleep$vore),   ]&#xD;&#xA;ggplot(data=ms,  aes(x=brainwt,  y=bodywt,  linetype=factor(vore)),  group=vore)+ geom_line()&#xD;&#xA;```" />
      <Message Id="9879610" ParentId="711" UserId="86978" Date="10/29/2012 18:19:12" Content="Maybe the solution is to have it default to `na.value=&quot;solid&quot;` (or some other value)?" />
      <Message Id="9880181" ParentId="711" UserId="463252" Date="10/29/2012 18:35:03" Content="I would think it would be better for `na.value` to default to `&quot;blank&quot;`; that is,  missing data would,  by default,  not show up.&#xD;&#xA;&#xD;&#xA;This is related to Issue #623 and Issue #638. There,  the specific geom (`geom_segment`) was modified to eliminate `NA`. Addressing this at the scale level would mean that each geom would not have to be changed. Changes here should be then see if the changes in #638 should be reverted (so that `geom_segment` can represent NA values if desired).&#xD;&#xA;&#xD;&#xA;Finally,  the changes need to appear in both `scale_linetype` and `scale_linetype_manual` because that has a different instantiation path. I don't know if `scale_linetype_identity` should have this as well.&#xD;&#xA;&#xD;&#xA;Effectively,  the problem is that the default value for `na.value` (`NA`) is not a valid value for linetypes and so any use of linetype must have a different default. Citation for `NA` not being valid is in the help for `par` under the &quot;Line Type Specification&quot; section.&#xD;&#xA;&#xD;&#xA;&gt; Note that `NA` is not a valid value for `lty`. &#xD;&#xA;&#xD;&#xA;(I see that I'm not typing fast enough because a commit has already been made on this,  but the above points need to be addressed for this to be considered closed.)" />
      <Message Id="9880653" ParentId="711" UserId="86978" Date="10/29/2012 18:48:28" Content="@BrianDiggs thanks for taking a close look at this. As you noticed,  I also decided to set it to `&quot;blank&quot;`.&#xD;&#xA;&#xD;&#xA;I think it's OK to leave `scale_linetype_identity` unchanged. As for `scale_linetype_manual`,  it's less clear to me whether it `na.value` should be changed. If so,  then manual scales with similar behavior should also be changed (like shape).&#xD;&#xA;" />
      <Message Id="9882003" ParentId="711" UserId="463252" Date="10/29/2012 19:27:28" Content="@wch Well,  I think having a default value which will result in an error,  especially as cryptic an error as this gives,  is a problem.  Consider:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(data=msleep,  aes(x=brainwt,  y=bodywt,  linetype=factor(vore)),  group=vore) + &#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_linetype_manual(values=c(&quot;solid&quot;,  &quot;22&quot;,  &quot;42&quot;,  &quot;44&quot;))&#xD;&#xA;# Error in grid.Call.graphics(L_lines,  x$x,  x$y,  index,  x$arrow) : &#xD;&#xA;#   invalid hex digit in 'color' or 'lty'&#xD;&#xA;# In addition: Warning message:&#xD;&#xA;# Removed 25 rows containing missing values (geom_path). &#xD;&#xA;ggplot(data=msleep,  aes(x=brainwt,  y=bodywt,  linetype=factor(vore)),  group=vore) + &#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_linetype_manual(values=c(&quot;solid&quot;,  &quot;22&quot;,  &quot;42&quot;,  &quot;44&quot;),  na.value=&quot;blank&quot;)&#xD;&#xA;# Warning message:&#xD;&#xA;# Removed 27 rows containing missing values (geom_path). &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Identity is even worse,  because it seems `na.value` does not even have an effect (possibly an altogether different bug):&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;mymsleep &lt;- &#xD;&#xA;  transform(msleep, &#xD;&#xA;            linetype = factor(vore,  &#xD;&#xA;                              levels = c(&quot;carni&quot;,  &quot;herbi&quot;,  &quot;insecti&quot;,  &quot;omni&quot;), &#xD;&#xA;                              labels = c(&quot;solid&quot;,  &quot;22&quot;,  &quot;42&quot;,  &quot;44&quot;)))&#xD;&#xA;&#xD;&#xA;ggplot(data=mymsleep,  aes(x=brainwt,  y=bodywt,  linetype=linetype),  group=vore) + &#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_linetype_identity()&#xD;&#xA;# Error in grid.Call.graphics(L_lines,  x$x,  x$y,  index,  x$arrow) : &#xD;&#xA;#   invalid hex digit in 'color' or 'lty'&#xD;&#xA;# In addition: Warning message:&#xD;&#xA;# Removed 25 rows containing missing values (geom_path). &#xD;&#xA;&#xD;&#xA;ggplot(data=mymsleep,  aes(x=brainwt,  y=bodywt,  linetype=linetype),  group=vore) + &#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_linetype_identity(na.value = &quot;blank&quot;)&#xD;&#xA;# Error in grid.Call.graphics(L_lines,  x$x,  x$y,  index,  x$arrow) : &#xD;&#xA;#   invalid hex digit in 'color' or 'lty'&#xD;&#xA;# In addition: Warning message:&#xD;&#xA;# Removed 25 rows containing missing values (geom_path). &#xD;&#xA;&#xD;&#xA;mymsleep &lt;- &#xD;&#xA;  transform(msleep, &#xD;&#xA;            linetype2 = factor(vore, &#xD;&#xA;                               levels = c(&quot;carni&quot;,  &quot;herbi&quot;,  &quot;insecti&quot;,  &quot;omni&quot;,  &quot;NA&quot;), &#xD;&#xA;                               labels = c(&quot;solid&quot;,  &quot;22&quot;,  &quot;42&quot;,  &quot;44&quot;,  &quot;blank&quot;)))&#xD;&#xA;mymsleep$linetype2[ is.na(mymsleep$linetype2) ] &lt;- &quot;blank&quot;&#xD;&#xA;&#xD;&#xA;ggplot(data=mymsleep,  aes(x=brainwt,  y=bodywt,  linetype=linetype2),  group=vore) + &#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_linetype_identity()&#xD;&#xA;# Warning message:&#xD;&#xA;# Removed 27 rows containing missing values (geom_path). &#xD;&#xA;&#xD;&#xA;ggplot(data=mymsleep,  aes(x=brainwt,  y=bodywt,  linetype=linetype2),  group=vore) + &#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_linetype_identity(na.value = &quot;blank&quot;)&#xD;&#xA;# Warning message:&#xD;&#xA;# Removed 27 rows containing missing values (geom_path). &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Perhaps this is more a discussion of how things need to be dealt with in regard to Issue #712,  but I decided to continue the discussion here." />
      <Message Id="9894382" ParentId="711" UserId="86978" Date="10/30/2012 04:05:50" Content="I haven't tried all of the examples,  but I think that the missing values are because of NAs in the x and y variables,  not the linetype.&#xD;&#xA;&#xD;&#xA;Edit: oh wait,  I see that you're talking about the manual and identity scales." />
    </Messages>
  </Topic>
  <Topic Id="712" Title="Make sure NA values in data are handled consistently across different scales">
    <Messages>
      <Message Id="0" ParentId="712" UserId="86978" Date="10/29/2012 18:52:35" Content="In some scales (like linetype,  shape,  x,  and y),  NAs values result in the geom not being displayed. In other scales (like colour and fill),  NAs result in the the geom showing,  with a special value. This is something that should be made consistent at some point,  or documented thoroughly.&#xD;&#xA;&#xD;&#xA;For example,  see #711." />
      <Message Id="35942590" ParentId="712" UserId="4196" Date="02/24/2014 21:41:19" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="713" Title="Reliance on positional matching when also passing ... is error prone">
    <Messages>
      <Message Id="0" ParentId="713" UserId="463252" Date="10/29/2012 23:14:25" Content="When passing specifying certain arguments to functions and passing the rest from the calling function via `...`,  reliance on positional matching of arguments rather than using named arguments can lead to the wrong arguments being assigned to the wrong formals.&#xD;&#xA;&#xD;&#xA;This issue came to light in a discussion about the `palette` argument to `discrete_scale` which is not available to,  for example,  `scale_shape_discrete` (see https://groups.google.com/d/topic/ggplot2/XeC40tWpIPw/discussion). &#xD;&#xA;&#xD;&#xA;Using `scale_shape` as an example because it is simple:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;scale_shape &lt;- function(...,  solid = TRUE) { &#xD;&#xA;  discrete_scale(&quot;shape&quot;,  &quot;shape_d&quot;,  shape_pal(solid),  ...)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The first three arguments to `discrete_scale` are `aesthetics`,  `scale_name`,  and `palette`. If an argument is specified with any of these names in the `scale_shape` call,  it will preferentially be matched to the named argument (according to the rules of argument matching). The given unnamed arguments are then assigned positionally to the remaining arguments and so do not get to the right place. This was the problem in the mailing list discussion referenced above.&#xD;&#xA;&#xD;&#xA;Note especially the value of the `name` element:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; p.test &lt;- function(n) {  21:(20+n)  }&#xD;&#xA;&gt; dput(scale_shape(palette=p.test))&#xD;&#xA;structure(list(call = discrete_scale(aesthetics = &quot;shape&quot;,  scale_name = &quot;shape_d&quot;,  &#xD;&#xA;    palette = ..1,  name = shape_pal(solid)),  aesthetics = &quot;shape&quot;,  &#xD;&#xA;    scale_name = &quot;shape_d&quot;,  palette = function (n) &#xD;&#xA;    { &#xD;&#xA;        21:(20 + n)&#xD;&#xA;     },  range = &lt;S4 object of class structure(&quot;DiscreteRange&quot;,  package = &quot;scales&quot;)&gt;,  &#xD;&#xA;    limits = NULL,  na.value = NA,  expand = structure(list(),  class = &quot;waiver&quot;),  &#xD;&#xA;    name = function (n) &#xD;&#xA;    { &#xD;&#xA;        if (n &gt; 6) { &#xD;&#xA;            msg &lt;- paste(&quot;The shape palette can deal with a maximum of 6 discrete &quot;,  &#xD;&#xA;                &quot;values because more than 6 becomes difficult to discriminate; &quot;,  &#xD;&#xA;                &quot;you have &quot;,  n,  &quot;. Consider specifying shapes manually. if you &quot;,  &#xD;&#xA;                &quot;must have them.&quot;,  sep = &quot;&quot;)&#xD;&#xA;            warning(paste(strwrap(msg),  collapse = &quot;\n&quot;),  call. = FALSE)&#xD;&#xA;         }&#xD;&#xA;        if (solid) { &#xD;&#xA;            c(16,  17,  15,  3,  7,  8)[ seq_len(n) ]&#xD;&#xA;         }&#xD;&#xA;        else { &#xD;&#xA;            c(1,  2,  0,  3,  7,  8)[ seq_len(n) ]&#xD;&#xA;         }&#xD;&#xA;     },  breaks = structure(list(),  class = &quot;waiver&quot;),  labels = structure(list(),  class = &quot;waiver&quot;),  &#xD;&#xA;    legend = NULL,  drop = TRUE,  guide = &quot;legend&quot;),  .Names = c(&quot;call&quot;,  &#xD;&#xA;&quot;aesthetics&quot;,  &quot;scale_name&quot;,  &quot;palette&quot;,  &quot;range&quot;,  &quot;limits&quot;,  &quot;na.value&quot;,  &#xD;&#xA;&quot;expand&quot;,  &quot;name&quot;,  &quot;breaks&quot;,  &quot;labels&quot;,  &quot;legend&quot;,  &quot;drop&quot;,  &quot;guide&quot;&#xD;&#xA;),  class = c(&quot;shape_d&quot;,  &quot;discrete&quot;,  &quot;scale&quot;))&#xD;&#xA;&gt; str(scale_shape(palette=p.test))&#xD;&#xA;List of 14&#xD;&#xA; $ call      : language discrete_scale(aesthetics = &quot;shape&quot;,  scale_name = &quot;shape_d&quot;,  palette = ..1,       name = shape_pal(solid))&#xD;&#xA; $ aesthetics: chr &quot;shape&quot;&#xD;&#xA; $ scale_name: chr &quot;shape_d&quot;&#xD;&#xA; $ palette   :function (n)  &#xD;&#xA;  ..- attr(*,  &quot;srcref&quot;)=Class 'srcref'  atomic [ 1:8 ] 1 11 1 35 11 35 1 1&#xD;&#xA;  .. .. ..- attr(*,  &quot;srcfile&quot;)=Classes 'srcfilecopy',  'srcfile' &lt;environment: 0x000000001f0dabc0&gt; &#xD;&#xA; $ range     :Reference class 'DiscreteRange' [ package &quot;scales&quot; ] with 1 fields&#xD;&#xA;  ..$ range: NULL&#xD;&#xA;  ..and 14 methods,  of which 3 are possibly relevant:&#xD;&#xA;  ..  initialize,  reset,  train&#xD;&#xA; $ limits    : NULL&#xD;&#xA; $ na.value  : logi NA&#xD;&#xA; $ expand    : list()&#xD;&#xA;  ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA; $ name      :function (n)  &#xD;&#xA; $ breaks    : list()&#xD;&#xA;  ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA; $ labels    : list()&#xD;&#xA;  ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA; $ legend    : NULL&#xD;&#xA; $ drop      : logi TRUE&#xD;&#xA; $ guide     : chr &quot;legend&quot;&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;shape_d&quot; &quot;discrete&quot; &quot;scale&quot;&#xD;&#xA;```&#xD;&#xA;If `scale_shape` was instead defined as&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;scale_shape &lt;- function(...,  solid = TRUE) { &#xD;&#xA;  discrete_scale(aesthetics = &quot;shape&quot;,  scale_name = &quot;shape_d&quot;,  palette = shape_pal(solid),  ...)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Then at least specifying `palette` in the `scale_shape` call would fail sooner with:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p.test &lt;- function(n) {  21:(20+n)  }&#xD;&#xA;&gt; scale_shape(palette=p.test)&#xD;&#xA;Error in discrete_scale(aesthetics = &quot;shape&quot;,  scale_name = &quot;shape_d&quot;,   : &#xD;&#xA;  formal argument &quot;palette&quot; matched by multiple actual arguments&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Ideally,  the `...` argument would be parsed and any disallowed values would be ignored or warned about.  Perhaps something like&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;scale_shape &lt;- function(...,  solid = TRUE) { &#xD;&#xA;  dots &lt;- list(...)&#xD;&#xA;  dots[ [ &quot;aesthetics&quot; ] ] &lt;- &quot;shape&quot;&#xD;&#xA;  dots[ [ &quot;scale_name&quot; ] ] &lt;- &quot;shape_d&quot;&#xD;&#xA;  dots[ [ &quot;palette&quot; ] ] &lt;- shape_pal(solid)&#xD;&#xA;  do.call(&quot;discrete_scale&quot;,  dots)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;All instances that pass `...` on to other functions and rely on positional matching of arguments need to be assessed. &#xD;&#xA;" />
      <Message Id="10017698" ParentId="713" UserId="4196" Date="11/02/2012 15:21:39" Content="I think the best solution is to explicitly name all the arguments `discrete_scale` etc. I rather fix the problem with standard R approaches,  rather than having to do something special." />
      <Message Id="35942609" ParentId="713" UserId="4196" Date="02/24/2014 21:41:28" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="714" Title="Box plot boxes do not appear">
    <Messages>
      <Message Id="0" ParentId="714" UserId="86978" Date="10/30/2012 16:31:34" Content="This bug was introduced by commit 810fafe4d825dec533a120e5e3fba15006ebb1a0.&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(mtcars,  aes(factor(cyl),  mpg)) + geom_boxplot()&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="715" Title="Support for raster/vector files for point shapes">
    <Messages>
      <Message Id="0" ParentId="715" UserId="86978" Date="10/31/2012 17:04:58" Content="It would be nice to be able to do something like:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;scale_shape_manual(values = list(raster_shape('file1.png'),  vector_shape('file2.svg'))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;There also needs to be some way to control the relative sizing of the shapes.&#xD;&#xA;&#xD;&#xA;Also,  it would be nice to be able to use shapes for legends,  even when there are no point geoms. Like the example in the first answer here: http://stackoverflow.com/questions/13148404/use-image-instead-of-labels-in-ggplot2-legend/13148768&#xD;&#xA;" />
      <Message Id="35942664" ParentId="715" UserId="4196" Date="02/24/2014 21:41:53" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="716" Title="bug when combining geom_hline() and coord_trans()">
    <Messages>
      <Message Id="0" ParentId="716" UserId="446636" Date="11/06/2012 13:57:50" Content="the first two plots work,  the last one does not.&#xD;&#xA;&#xD;&#xA;    dataset &lt;- data.frame(A = runif(100,  1,  10),  B = rnorm(100))&#xD;&#xA;    ggplot(dataset,  aes(x = A,  y = B)) + geom_point() + coord_trans(x = &quot;log10&quot;)&#xD;&#xA;    ggplot(dataset,  aes(x = A,  y = B)) + geom_point() + geom_hline(yintercept = 1)&#xD;&#xA;    ggplot(dataset,  aes(x = A,  y = B)) + geom_point() + coord_trans(x = &quot;log10&quot;) + geom_hline(yintercept = 1)&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: i386-w64-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=Dutch_Belgium.1252  LC_CTYPE=Dutch_Belgium.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=Dutch_Belgium.1252 LC_NUMERIC=C                  &#xD;&#xA;[ 5 ] LC_TIME=Dutch_Belgium.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] plyr_1.7.1      Epi_1.1.38      scales_0.2.2    ggplot2_0.9.2.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.2       &#xD;&#xA; [ 5 ] gtable_0.1.1       labeling_0.2       MASS_7.3-22        memoise_0.1       &#xD;&#xA; [ 9 ] munsell_0.4        proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    &#xD;&#xA;[ 13 ] stringr_0.6.1      tools_2.15.2" />
      <Message Id="35942678" ParentId="716" UserId="4196" Date="02/24/2014 21:41:58" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="717" Title="Improvements for documentation of shapes">
    <Messages>
      <Message Id="0" ParentId="717" UserId="463252" Date="11/06/2012 19:37:35" Content="I've made a few improvements to the examples showing different shapes. I've submitted this at two separate commits within the same pull request. The first fixes errors in the documentation: there are 26 (0-25) shapes and shapes 19 and 20 do not have a fill.  The second presents a better version of the shape catalog.&#xD;&#xA;&#xD;&#xA;The first should be applied as it corrects factual errors; the second is optional,  but I think a significant improvement." />
      <Message Id="19718902" ParentId="717" UserId="463252" Date="06/19/2013 22:15:12" Content="Merged this into a different branch that is a bigger overhaul of aesthetic documentation,  so this pull request is no longer needed/relevant." />
    </Messages>
  </Topic>
  <Topic Id="718" Title="POSIXt looks weird when mapped to color">
    <Messages>
      <Message Id="0" ParentId="718" UserId="86978" Date="11/07/2012 20:15:30" Content="Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(plyr)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;dat &lt;- mutate(data.frame(x=seq(0, 10, 0.1)), &#xD;&#xA;              y = sin(x), &#xD;&#xA;              t = as.POSIXct(sprintf(&quot;2012-07-18 20:%d:%f&quot;,  as.integer(x),  x)))&#xD;&#xA;&#xD;&#xA;# Weird discrete colors&#xD;&#xA;ggplot(dat) + geom_point(aes(x=x,  y=y,  color=t))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# It should look something like this (with gradient)&#xD;&#xA;ggplot(dat) + geom_point(aes(x=x,  y=y,  color=unclass(t)))&#xD;&#xA;```" />
      <Message Id="10181095" ParentId="718" UserId="1345526" Date="11/08/2012 09:21:27" Content="Bisecting this issue gives the following commit. I hope that helps.&#xD;&#xA;&#xD;&#xA;1b3ff24a6a8b8fa9bbecb499aa01883e3b610d64 is the first bad commit&#xD;&#xA;commit 1b3ff24a6a8b8fa9bbecb499aa01883e3b610d64&#xD;&#xA;Author: Winston Chang &lt;winston@stdout.org&gt;&#xD;&#xA;Date:   Mon Jun 25 00:53:50 2012 -0500&#xD;&#xA;&#xD;&#xA;    scales_add_defaults: find discrete/date/datetime/continuous scale type&#xD;&#xA;    &#xD;&#xA;    Previously,  it used trans_type to find the appropriate transformation.&#xD;&#xA;    Now it uses scale_type to find the appropriate scale -- and the scale&#xD;&#xA;    definitions contain information about which trans to use (&quot;date&quot;, &#xD;&#xA;    &quot;time&quot;,  &quot;identity&quot;).&#xD;&#xA;&#xD;&#xA;:040000 040000 e16b33654d4813f72c22688ac371fe21c1b677ad a8b6100702848be4eaa34c5f18b0a8ecc8bd0441 M	R&#xD;&#xA;" />
      <Message Id="10193772" ParentId="718" UserId="86978" Date="11/08/2012 16:15:46" Content="Thanks for the bisect! I suspected it had something to do with that change." />
      <Message Id="10904491" ParentId="718" UserId="86978" Date="11/30/2012 21:25:44" Content="It appears that it has to do with the change from this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;   if (disc) { &#xD;&#xA;      args &lt;- list()&#xD;&#xA;     } else { &#xD;&#xA;      args &lt;- list(trans = trans_type(datacols[ [ aes ] ]))&#xD;&#xA;     }&#xD;&#xA;    scale &lt;- do.call(scale_f,  args)&#xD;&#xA;    scales$add(scale)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;to this:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    scales$add(scale_f())&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Previously,  when the scale was non-discrete (which includes datetimes) the code called `scale_f()` with the argument `trans=xx`. Now it doesn't pass in a `trans` argument.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# Old version did something like this:&#xD;&#xA;scale_colour_gradient(trans=&quot;time&quot;)&#xD;&#xA;#continuous_scale(aesthetics = &quot;colour&quot;,  scale_name = &quot;gradient&quot;,  &#xD;&#xA;#    palette = seq_gradient_pal(low,  high,  space),  na.value = na.value,  &#xD;&#xA;#    trans = &quot;time&quot;,  guide = guide)&#xD;&#xA;&#xD;&#xA;# New version does something like this:&#xD;&#xA;scale_colour_gradient()&#xD;&#xA;#continuous_scale(aesthetics = &quot;colour&quot;,  scale_name = &quot;gradient&quot;,  &#xD;&#xA;#    palette = seq_gradient_pal(low,  high,  space),  na.value = na.value,  &#xD;&#xA;#    guide = guide)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# And for plain old continuous scale:&#xD;&#xA;# Old version&#xD;&#xA;scale_x_continuous(trans=&quot;identity&quot;)&#xD;&#xA;# continuous_scale(aesthetics = c(&quot;x&quot;,  &quot;xmin&quot;,  &quot;xmax&quot;,  &quot;xend&quot;,  &#xD;&#xA;#     &quot;xintercept&quot;),  scale_name = &quot;position_c&quot;,  palette = identity,  &#xD;&#xA;#     expand = expand,  trans = &quot;identity&quot;,  guide = &quot;none&quot;)&#xD;&#xA;&#xD;&#xA;# New version&#xD;&#xA;scale_x_continuous()&#xD;&#xA;# continuous_scale(aesthetics = c(&quot;x&quot;,  &quot;xmin&quot;,  &quot;xmax&quot;,  &quot;xend&quot;,  &#xD;&#xA;#     &quot;xintercept&quot;),  scale_name = &quot;position_c&quot;,  palette = identity,  &#xD;&#xA;#     expand = expand,  guide = &quot;none&quot;)&#xD;&#xA;&#xD;&#xA;# Also,  Date objects got trans=&quot;date&quot;&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;The goal of that commit was to get rid of the `trans_type()` function and replace it with `scale_type()` instead. Maybe the default `trans` should be set in the scales,  like `scale_x_datetime`,  `scale_x_continuous`,  etc?&#xD;&#xA;" />
      <Message Id="10904872" ParentId="718" UserId="4196" Date="11/30/2012 21:36:33" Content="So maybe it should be `scales$add(scale_f(trans = type)) ?`" />
      <Message Id="10905184" ParentId="718" UserId="86978" Date="11/30/2012 21:43:59" Content="Wouldn't that defeat the purpose of getting rid of the `trans_type()` function?&#xD;&#xA;&#xD;&#xA;I was thinking of redefining `scale_x_continuous` and the like. For example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;scale_x_datetime &lt;- function(...,  expand = waiver(),  breaks = pretty_breaks(), &#xD;&#xA;  minor_breaks = waiver()) { &#xD;&#xA;  &#xD;&#xA;  scale_datetime(c(&quot;x&quot;,  &quot;xmin&quot;,  &quot;xmax&quot;,  &quot;xend&quot;),  expand = expand, &#xD;&#xA;    breaks = breaks,  minor_breaks = minor_breaks,  trans = &quot;time&quot;,  ...)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think that would be more in line with the purpose of the change from `trans_type` to `scale_type` (but my memory on this is a bit hazy).&#xD;&#xA;&#xD;&#xA;Edit: Actually,  nevermind the part about `scale_x_datetime` -- it looks like `scale_datetime` already has `trans=&quot;time&quot;`. The issue is that `scale_colour_gradient` needs to get `trans=&quot;time&quot;` somehow,  and obviously that can't be the default setting for the scale. So maybe we need another `trans_type()` replacement,  or we should rethink how this works.&#xD;&#xA;" />
      <Message Id="35942689" ParentId="718" UserId="4196" Date="02/24/2014 21:42:03" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="719" Title="geom_step does not work when group has exactly one point">
    <Messages>
      <Message Id="0" ParentId="719" UserId="2757484" Date="11/09/2012 08:48:35" Content="Using R and ggplot2 version 2.15.1&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=1:3, y=1:3, g=c('a', 'a', 'b'))&#xD;&#xA;    ggplot(d,  aes(x=x, y=y,  color=g)) + geom_point() + geom_step()&#xD;&#xA;    &#xD;&#xA;    # Error in isIncomplete(con) : invalid connection&#xD;&#xA;    # Error in isIncomplete(con) : invalid connection&#xD;&#xA;    # Error in grid.Call.graphics(L_lines,  x$x,  x$y,  index,  x$arrow) : &#xD;&#xA;    #   invalid line type&#xD;&#xA;&#xD;&#xA;The same occurs with geom_line() in place of geom_step()&#xD;&#xA;I would expect that geom_step simply draw nothing when group has size 1" />
      <Message Id="10509865" ParentId="719" UserId="2757484" Date="11/19/2012 11:08:30" Content="Same behavior for geom_density: works when group has size 2 or more,  but throw an error when size is exactly 1&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=runif(100), f=factor(c(0, 0, 1, rep(2, 97))))&#xD;&#xA;    ggplot(d,  aes(x=x, fill=f)) + geom_bar()       # OK&#xD;&#xA;    ggplot(d,  aes(x=x, fill=f)) + geom_density()&#xD;&#xA;    ## Error in rowSums(vapply(x,  is.finite,  logical(nrow(x)))) : &#xD;&#xA;    ##         'x' must be an array of at least two dimensions&#xD;&#xA;    ## Error in UseMethod(&quot;scale_dimension&quot;) : &#xD;&#xA;    ##         no applicable method for 'scale_dimension' applied to an object of class &quot;NULL&quot;&#xD;&#xA;    ggplot(subset(d, f!=1),  aes(x=x, fill=f)) + geom_density() # OK" />
      <Message Id="35942699" ParentId="719" UserId="4196" Date="02/24/2014 21:42:08" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="720" Title="Inconsistent default scale behaviour when using facet_grid then when not using facet_grid">
    <Messages>
      <Message Id="0" ParentId="720" UserId="2817747" Date="11/16/2012 23:47:41" Content="Well I know you don't export ``scale_type`` but if a user tries to use it to automatically call their own scales it works fine if you don't use facet_grid but stops working when you starting adding facets:&#xA;&#xA;```R&#xA;as_gender_convention &lt;- function(x) { &#xA;    y = factor(x,  levels=c(&quot;FEMALE&quot;,  &quot;MALE&quot;))&#xA;    class(y) &lt;- c(&quot;convention&quot;,  class(y))&#xA;    attr(y,  &quot;convention&quot;) &lt;- &quot;gender&quot;&#xA;    y&#xA; }&#xA;scale_type.convention &lt;- function(x) {  &#xA;    attr(x,  &quot;convention&quot;)&#xA; }&#xA;scale_colour_gender &lt;- function(...) {  &#xA;    scale_colour_manual(...,  &#xA;         values=c(&quot;FEMALE&quot;=&quot;pink&quot;,  &quot;MALE&quot;=&quot;blue&quot;))&#xA; }&#xA;scale_y_gender &lt;- function(...) {  scale_y_discrete(...)  }&#xA;scale_x_gender &lt;- function(...) {  scale_x_discrete(...)  }&#xA;&#xA;&#xA;gender &lt;- rep(c(&quot;FEMALE&quot;,  &quot;MALE&quot;),  5)&#xA;x &lt;- rnorm(10)&#xA;y &lt;- rnorm(10)&#xA;df2 &lt;- data.frame(x,  y,  gender=as_gender_convention(gender))&#xA;&#xA;gg &lt;- ggplot(df2,  aes(x=x,  y=y,  colour=gender)) &#xA;# automatically uses scale_colour_gender()&#xA;gg + geom_point() &#xA;# but add facets and suddenly it &#xA;# does not use scale_colour_gender() and gives an error&#xA;gg + facet_grid(. ~ gender) + geom_point()&#xA;# but we can explicitly add scale_colour_gender() &#xA;# and we don't get an error&#xA;gg + facet_grid(. ~ gender) + geom_point() + &#xA;     scale_colour_gender()&#xA;&#xA;```&#xA;&#xA;Thanks, &#xA;&#xA;Trevor" />
      <Message Id="35943838" ParentId="720" UserId="4196" Date="02/24/2014 21:52:22" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="721" Title="Default when order is not specifiied is not the ordering of the factors">
    <Messages>
      <Message Id="0" ParentId="721" UserId="463252" Date="11/17/2012 00:12:42" Content="# Summary&#xA;&#xA;When the order aesthetic is not specified,  stacked bar plots are not stacked in the order of the factors which differentiate them (say,  fill). This was the case in 0.8.9,  but has not been in 0.9.0 onward. I believe it should be the case again.&#xA;&#xA;# Example code&#xA;&#xA;    DF &lt;- expand.grid(A = c(&quot;A&quot;, &quot;B&quot;),  B = c(&quot;a&quot;,  &quot;b&quot;))&#xA;    DF$y &lt;- seq_len(nrow(DF))&#xA;    DF$B &lt;- factor(DF$B,  levels=rev(levels(DF$B)))&#xA;&#xA;    ggplot(DF,  aes(x=A,  y=y,  fill=B)) +&#xA;        geom_bar(stat=&quot;identity&quot;)&#xA;&#xA;In this,  the bars are stacked with &quot;a&quot; on the bottom. The expected behavior can be achieved with &#xA;&#xA;    ggplot(DF,  aes(x=A,  y=y,  fill=B,  order=B)) +&#xA;      geom_bar(stat=&quot;identity&quot;)&#xA;&#xA;However,  in the absence of a defined order,  the order of the factor levels should be used.&#xA;&#xA;The commit which changed this behavior is e2291558a6282bbf18c0ef8b70907c7ebd3bd8df&#xA;" />
      <Message Id="11359525" ParentId="721" UserId="463252" Date="12/13/2012 23:59:17" Content="git bisect script (for use with bisectr) that I used to isolate the commit at https://gist.github.com/4281241" />
      <Message Id="11388809" ParentId="721" UserId="86978" Date="12/14/2012 19:26:01" Content="Nice! It's good to know I'm not the only person who uses bisectr." />
      <Message Id="14518479" ParentId="721" UserId="463252" Date="03/06/2013 18:51:53" Content="Another aspect of why this can be a problem: the order of bars depends on the order that things appear in the data. Generally this is not the case for ggplot (`geom_path` being a notable exception). Here is an example:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;plyr&quot;)&#xD;&#xA;&#xD;&#xA;set.seed(1)&#xD;&#xA;df &lt;- data.frame(x = rep(1:3, each = 3), &#xD;&#xA;                 y = runif(9), &#xD;&#xA;                 cat = factor(rep(letters[ 1:3 ], times = 3)))&#xD;&#xA;df2 &lt;- arrange(df, y)&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(mapping=aes(x,  y,  fill=cat)) + geom_bar(stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;p %+% df&#xD;&#xA;p %+% df2&#xD;&#xA;```&#xD;&#xA;In general,  shouldn't plots be invariant to permutations of rows of the data? Or is it going to a model where the ordering of the data in the data.frame carries relevant information (thus needing an explicit order aesthetic set when consistent ordering,  as opposed to data.frame ordering,  is desired)?" />
      <Message Id="14519562" ParentId="721" UserId="4196" Date="03/06/2013 19:09:23" Content="The display of a plot should be invariant to the order of the data frame - anything else is a bug.  Unfortunately Winston and I are busy with other projects at the moment,  but hopefully we'll be able to allocate a couple of weeks to bug fixing later in the year." />
      <Message Id="17452482" ParentId="721" UserId="146335" Date="05/05/2013 14:27:59" Content="my issue is most likely related:&#xD;&#xA;the factor level order is not respected in the legend when using geom_point(aes(time,  surv, color=group)).&#xD;&#xA;when leaving this &quot;layer&quot; out,  the legend is fine. otherwise it is sorted alphabetically.&#xD;&#xA;best greetings,  daniel" />
      <Message Id="35942712" ParentId="721" UserId="4196" Date="02/24/2014 21:42:14" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="722" Title="discrete color scale limits do not remove geoms">
    <Messages>
      <Message Id="0" ParentId="722" UserId="177979" Date="11/19/2012 17:03:36" Content="setting limits on a discrete color scale does not remove geoms.&#xA;&#xA;This does not work:&#xA;&#xA;```&#xA;d &lt;- data.frame(x=1:9,  y=1:9,  z=factor(rep(c(1, 2, 3),  3)))&#xA;p &lt;- ggplot(aes(x=x,  y=y,  color=z),  data=d)  + geom_point(size=5)&#xA;p + scale_color_discrete(limits=c(1,  2))&#xA;```&#xA;&#xA;&#xA;This works:&#xA;&#xA;```&#xA;p + scale_color_manual(limits=c(1, 2),  values=c('red',  'blue'))&#xA;```&#xA;" />
      <Message Id="35942809" ParentId="722" UserId="4196" Date="02/24/2014 21:43:14" Content="See `na.value`" />
      <Message Id="35942809" ParentId="722" UserId="4196" Date="02/24/2014 21:43:14" Content="See `na.value`" />
      <Message Id="35943497" ParentId="722" UserId="177979" Date="02/24/2014 21:49:10" Content="Slightly more verbose explanation (in case somebody uses this as reference):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d &lt;- data.frame(x=1:9,  y=1:9,  z=factor(rep(c(1, 2, 3),  3)))&#xD;&#xA;p &lt;- ggplot(aes(x=x,  y=y,  color=z),  data=d)  + geom_point(size=5)&#xD;&#xA;p + scale_color_discrete(limits=c(1,  2),  na.value=NA)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="723" Title="Allow named layers">
    <Messages>
      <Message Id="0" ParentId="723" UserId="167164" Date="11/20/2012 04:16:19" Content="Not sure if this is entirely possible,  but at the moment,  there's no way to apply different scales to different layers. Arguably this is a good thing,  because it stops people doing stupid things,  but I am of the mind that rope is just a tool,  and if some people feel like hanging themselves,  that shouldn't stop the rest of us using it for something sensible. &#xA;&#xA;My example: I need to create a figure similar to the one at https://www.ipcc.ch/publications_and_data/ar4/wg1/en/figure-ts-23.html : multiple model time-series,  with an observations time series,  and a mean (I actually need to show 3 different means). To do this,  at the moment,  basically requires giving each dataset (models,  observations,  means) an extra variable that identifies the data type,  so that a colour can be applied to each type. This get *really* messy once you start needing multiple versions of each figure (ie. some with less data showing,  some in greyscale,  etc.),  because `scale_color_manual` can only be applied once for a whole graph. If layers could be named,  then you could do something like this:&#xA;&#xA;    ggplot(models,  aes(x=year,  y=temp,  group=model)) + geom_line()&#xA;      + scale_colour_manual(layer='base',  values=c('yellow'))&#xA;      + geom_line(data=mean,  layer='mean') + scale_colour_manual(layer='mean',  values=c('red'))&#xA;      + geom_line(data=obs,  layer='obs') + scale_colour_manual(layer='obs',  values=c('black'))&#xA;&#xA;Which would make it *really easy* and intuitive to remove parts of the graph: just comment out a line - the order of the colour scale doesn't have to change. It also makes it easier to change the colour (or size,  or linetype etc.),  as the colours are visually mapped to specific datasets in the code (you don't have a single `scale_colour_manual(values=c('black',  'red',  'yellow'))` that you have to remember the order of).&#xA;&#xA;Does that make sense? " />
      <Message Id="10604676" ParentId="723" UserId="2855408" Date="11/21/2012 16:47:19" Content="I'd sincerely love this possibility! I just started to use ggplot,  however this is something that would be really useful. For example one could also just add +scale_color_hue(l=80) to a certain layer..." />
      <Message Id="35942820" ParentId="723" UserId="4196" Date="02/24/2014 21:43:21" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="724" Title="problems combining scale_x_date and xlab">
    <Messages>
      <Message Id="0" ParentId="724" UserId="585791" Date="11/20/2012 19:22:53" Content="Here is an example:&#xA;&#xA;    library(ggplot2)&#xA;    df &lt;- data.frame(Date=as.Date(c('2010-01-01',  '2010-12-31')),  X = c(1, 1))&#xA;    p   &lt;- ggplot()&#xA;    p   &lt;- p + xlab('') # want to ommit the x label&#xA;    p   &lt;- p + geom_point(data=df,  aes(x=Date,  y=X))&#xA;&#xA;If I'm gong to print it as it is now:&#xA;&#xA;    print(p)&#xA;&#xA;But if I'm printing it specifying the scale_x_date,  the default x label is printed,  which is not what I want.&#xA;&#xA;    print(p + scale_x_date(aes(x=Date, y=X)))&#xA;&#xA;I think this is a bug,  correct?" />
      <Message Id="35942903" ParentId="724" UserId="4196" Date="02/24/2014 21:43:59" Content="No,  this (unfortunately) how scales work.  You need to `print(p + scale_x_date(aes(x=Date, y=X),  label = &quot;&quot;))`" />
    </Messages>
  </Topic>
  <Topic Id="725" Title="layout order of polygons obstructs higher levels">
    <Messages>
      <Message Id="0" ParentId="725" UserId="38066" Date="11/21/2012 03:41:15" Content="Using code from [ http://www.inside-r.org/packages/cran/ggplot2/docs/stat_density2d ](http://www.inside-r.org/packages/cran/ggplot2/docs/stat_density2d)&#xA;&#xA;Specifically, &#xA;&#xA;```r&#xA;library(&quot;MASS&quot;)&#xA;data(geyser,  &quot;MASS&quot;)&#xA; &#xA;m &lt;- ggplot(geyser,  aes(x = duration,  y = waiting)) +&#xA;  geom_point() + xlim(0.5,  6) + ylim(40,  110)&#xA;m + geom_density2d()&#xA; &#xA;dens &lt;- kde2d(geyser$duration,  geyser$waiting,  n = 50, &#xA;              lims = c(0.5,  6,  40,  110))&#xA;densdf &lt;- data.frame(expand.grid(duration = dens$x,  waiting = dens$y), &#xA; z = as.vector(dens$z))&#xA;m + geom_contour(aes(z=z),  data=densdf)&#xA; &#xA;m + geom_density2d() + scale_y_log10()&#xA;m + geom_density2d() + coord_trans(y=&quot;log10&quot;)&#xA; &#xA;m + stat_density2d(aes(fill = ..level..),  geom=&quot;polygon&quot;)&#xA; ```&#xA;&#xA;There is a problem with the order in which the layers are drawn and so higher levels (which are smaller) get obstructed. Here is a video of what is happening.&#xA;&#xA;https://www.youtube.com/watch?v=Fj376ASw-WU&#xA;&#xA;It seems to me that when rendering `stat_contour` ggplot2 should know to render higher layers after lower layers." />
      <Message Id="10614602" ParentId="725" UserId="4196" Date="11/21/2012 21:15:21" Content="Can you try adding `order = ..level..` to your aes spec?" />
      <Message Id="10616858" ParentId="725" UserId="38066" Date="11/21/2012 22:24:48" Content="just tried it and it doesn't fix the issue." />
      <Message Id="14272105" ParentId="725" UserId="86978" Date="03/01/2013 03:54:14" Content="Fixed by #771." />
    </Messages>
  </Topic>
  <Topic Id="726" Title="Scale_*_manual documentation incomplete">
    <Messages>
      <Message Id="0" ParentId="726" UserId="167164" Date="11/22/2012 01:12:45" Content="There is no description of what the `values` passed to `scale_*_manual` actually represent. For colour-related scales,  this is obvious,  and some good examples are given,  but for `scale_size_manual`,  `scale_linetype_manual`,  and `scale_shape_manual`,  there is not description,  and the user is relying on guess work.&#xA;&#xA;Are the size values in points?" />
      <Message Id="10762653" ParentId="726" UserId="463252" Date="11/27/2012 15:44:51" Content="Would a link to the `aes_linetype_size_shape` (http://docs.ggplot2.org/current/aes_linetype_size_shape.html) documentation be sufficient? Or is more detail needed than what is presented there?" />
      <Message Id="11228185" ParentId="726" UserId="167164" Date="12/11/2012 02:11:22" Content="@BrianDiggs: that would probably be sufficient,  yeah. Needs to be fairly prominent though." />
    </Messages>
  </Topic>
  <Topic Id="727" Title="R session crashes with ggplot2-0.9.3-rc">
    <Messages>
      <Message Id="0" ParentId="727" UserId="1091843" Date="11/23/2012 18:44:52" Content="Hi Winston, &#xA;&#xA;sorry for the late reply. I've tried the RCs as suggested and got crashing R sessions in RStudio (0.97.168),  R-GUI and R with Eclipse/StatET. The following is a reproducible example:&#xA;&#xA;```&#xA;install.packages(&quot;devtools&quot;)&#xA;library(devtools)&#xA;install_github(&quot;plyr&quot;,  ref = &quot;plyr-1.8-rc&quot;)&#xA;install_github(&quot;gtable&quot;,  ref = &quot;gtable-0.1.2-rc&quot;)&#xA;install_github(&quot;scales&quot;,  ref = &quot;scales-0.2.3-rc&quot;)&#xA;install_github(&quot;ggplot2&quot;,  ref = &quot;ggplot2-0.9.3-rc&quot;)&#xA;&#xA;require(ggplot2)&#xA;g = ggplot(mtcars,  aes(x = wt,  y = disp)) + geom_point()&#xA;print(g) # RStudio,  R-GUI and R in Eclipse/StatET crash here&#xA;```&#xA;&#xA;My details are as follows:&#xA;&#xA;```&#xA;&gt; sessionInfo()&#xA;R version 2.15.2 (2012-10-26)&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xA;&#xA;locale:&#xA;[ 1 ] LC_COLLATE=German_Switzerland.1252  LC_CTYPE=German_Switzerland.1252   &#xA;[ 3 ] LC_MONETARY=German_Switzerland.1252 LC_NUMERIC=C                       &#xA;[ 5 ] LC_TIME=German_Switzerland.1252    &#xA;&#xA;attached base packages:&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xA;&#xA;other attached packages:&#xA;[ 1 ] ggplot2_0.9.3       XLConnect_0.2-3     XLConnectJars_0.2-0 rJava_0.9-3        &#xA;&#xA;loaded via a namespace (and not attached):&#xA;[ 1 ] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.2        gtable_0.1.2      &#xA; [ 6 ] labeling_0.1       MASS_7.3-22        munsell_0.3        plyr_1.8           proto_0.3-9.2     &#xA;[ 11 ] RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.3       stringr_0.6.1      tools_2.15.2      &#xA;```&#xA;&#xA;I'm running on Windows 7 Professional 64-bit. If you require any additional details or want me to do any additional tests please let me know.&#xA;&#xA;Best regards, &#xA;Martin&#xA;(Maintainer of XLConnect)&#xA;" />
      <Message Id="10862392" ParentId="727" UserId="86978" Date="11/29/2012 19:27:31" Content="Hi Martin - can you try again with the latest versions of ggplot2 and plyr? There was a bug in plyr that resulted in crashing R sessions on Windows in some cases.&#xD;&#xA;&#xD;&#xA;Installation instructions here: https://gist.github.com/4171260" />
      <Message Id="10867980" ParentId="727" UserId="1091843" Date="11/29/2012 21:48:31" Content="I still get crashing R sessions. I tried both &quot;ggplot2-0.9.3-rc&quot; and &quot;master&quot; but I get the same behavior." />
      <Message Id="10874270" ParentId="727" UserId="86978" Date="11/30/2012 01:12:39" Content="When you install plyr from github,  do you see this error?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;installing to C:/Documents and Settings/user/My Documents/R/plyr/libs/i386&#xD;&#xA;Warning in file.copy(files,  dest,  overwrite = TRUE) :&#xD;&#xA;  problem copying .\plyr.dll to C:\Documents and Settings\user\My Documents\R\plyr\libs\i386\plyr.dll: Permission denied&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If so,  the problem may be that the old (1.7.1) version of the plyr.dll isn't being overwritten because it's currently open,  since devtools itself loads plyr. In that version,  the C function split_indices() has a different call interface,  taking 3 arguments instead of 2. If the new 1.8-rc version of the R code is calling the 1.7.1 version of the C code,  this could be why it's crashing.&#xD;&#xA;&#xD;&#xA;It may also explain why we've only heard of this error on Windows - Unixlike platforms will let you overwrite a DLL while it's open,  whereas Windows won't.&#xD;&#xA;" />
      <Message Id="10880995" ParentId="727" UserId="1091843" Date="11/30/2012 07:39:33" Content="Yep,  you're spot on. That was the issue. I didn't recognize the warning before. After downloading and installing the plyr-1.8-rc sources manually,  things worked fine." />
      <Message Id="10882158" ParentId="727" UserId="86978" Date="11/30/2012 08:41:50" Content="Great,  glad it worked. We'll have to be more attentive to this issue in the future." />
      <Message Id="100040099" ParentId="727" UserId="12306963" Date="05/07/2015 22:41:06" Content="Hi all, &#xD;&#xA;I am experiencing this same issue (crashing whenever geom_point() is called). I don't know how to install the plyr-1.8-rc sources manually. Can anyone advise me on the best way to fix this issue?&#xD;&#xA;Thanks, &#xD;&#xA;Caroline" />
      <Message Id="100222616" ParentId="727" UserId="4196" Date="05/08/2015 12:48:40" Content="@carolinewilliams I think this is probably a different problem." />
    </Messages>
  </Topic>
  <Topic Id="728" Title="geom_density2d and weight">
    <Messages>
      <Message Id="0" ParentId="728" UserId="463252" Date="11/28/2012 16:40:54" Content="Transcription of Documentation Feedback #972; I don't know anything about this bug,  but was just filing it in a more appropriate place:&#xA;&#xA;_What docs are you commenting on?_ 	geom_density2d&#xA;_What needs improving?_ 	Hi Hadley,  This is more to raise an error with you (apologies if this isn't the place to do it). I found that geom_density2d doesn't accept weight but the guidance page says it does (according to a more knowledgable person on Stack Overflow it does accept it but doesn't pass it on to MASS::kde2d). Discussion thread here: http://stackoverflow.com/questions/13530028/ggplot2-2d-density-weights&#xA;_Name_ 	Simon Hailstone &#xA;_Email_ 	simonhailstone@nhs.net &#xA;&#xA;" />
      <Message Id="10821035" ParentId="728" UserId="86978" Date="11/28/2012 20:54:01" Content="Thanks for the report. I've fixed the help in ee452262256a1f377a5bd6dd0c743bf8ac1c2b8e." />
    </Messages>
  </Topic>
  <Topic Id="729" Title="insufficient documentation of geom_bar with stat=&quot;identity&quot;">
    <Messages>
      <Message Id="0" ParentId="729" UserId="557951" Date="12/03/2012 12:31:35" Content="The Details section states &quot;If you have presummarised data,  use stat=&quot;identity&quot; to turn off the default summary.&quot;,  which is fine. However,  the Aesthetics section doesn't tell that then x and y instead of x and weight are needed. There is a single example for stat=identity,  but that doesn't show the used aesthetics because qplot does this implicitly.&#xA;" />
      <Message Id="35942943" ParentId="729" UserId="4196" Date="02/24/2014 21:44:15" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="730" Title="Apply scale transformations in stat_function">
    <Messages>
      <Message Id="0" ParentId="730" UserId="979369" Date="12/03/2012 12:56:40" Content="stat_function is ignoring scale transformations when passing arguments to its function.&#xA;&#xA;For example, &#xA;&#xA;```R&#xA;qplot(1:10,  log10(1:10)) + stat_function(fun=function(x) x)&#xA;qplot(1:10,  log10(1:10)) + stat_function(fun=function(x) x) + scale_x_log10()&#xA;```&#xA;&#xA;In the first plot,  the function y=x sits far above the data points. After applying the scale transformation,  the function now crosses the data points.&#xA;&#xA;This patch fixes this bug." />
      <Message Id="35943018" ParentId="730" UserId="4196" Date="02/24/2014 21:44:48" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="731" Title="text message false theme_segment in theme_element.r">
    <Messages>
      <Message Id="0" ParentId="731" UserId="1834695" Date="12/03/2012 23:26:09" Content="         theme_segment &lt;- function(...) { &#xA;           gg_dep(&quot;0.9.1&quot;,  &quot;theme_segment is deprecated. Use 'element_segment' instead.&quot;)&#xA;           element_line(...)&#xA;          }&#xA;&#xA;Use element_line and not element segment&#xA;&#xA; agstudy.&#xA;&#xA;&#xA;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="732" Title="No path with stat=&quot;summary&quot;">
    <Messages>
      <Message Id="0" ParentId="732" UserId="806435" Date="12/05/2012 18:19:01" Content="Thank you for all the good work.&#xD;&#xA;&#xD;&#xA;This comes from a discussion on google group:&#xD;&#xA;https://groups.google.com/forum/?fromgroups=#!search/With$20stat=%22summary%22, $20fun.y=%22mean%22$20get$20%22Each$20group$20consist$20of$20only$20one$20observation%22/ggplot2/ECI59jsdOYc/CCm1MOxXnhEJ&#xD;&#xA;&#xD;&#xA;Examples:&#xD;&#xA;```R&#xD;&#xA;d &lt;- qplot(cyl,  mpg,  data=mtcars)&#xD;&#xA;d + geom_line(stat=&quot;summary&quot;,  fun.y=&quot;mean&quot;)&#xD;&#xA;```&#xD;&#xA;or&#xD;&#xA;```R&#xD;&#xA;stat_sum_single &lt;- function(fun,  geom=&quot;point&quot;,  ...) { &#xD;&#xA;  stat_summary(fun.y=fun,  colour=&quot;red&quot;,  geom=geom,  size = 3,  ...)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;d + stat_sum_single(mean,  geom=&quot;line&quot;,  aes(group=as.character(cyl)))&#xD;&#xA;```&#xD;&#xA;or&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(x=cyl,  y=mpg)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  stat_summary(fun.y=mean,  geom=&quot;line&quot;,  aes(group=factor(cyl)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;or&#xD;&#xA;...&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;all give&#xD;&#xA;&quot;geom_path: Each group consist of only one observation. Do you need to adjust the group aesthetic?&quot;&#xD;&#xA;&#xD;&#xA;with no path traced on plot&#xD;&#xA;" />
      <Message Id="11265679" ParentId="732" UserId="806435" Date="12/11/2012 21:43:50" Content="same as https://github.com/hadley/ggplot2/issues/739 ?" />
      <Message Id="11495994" ParentId="732" UserId="1006144" Date="12/18/2012 17:16:55" Content="Also,  this error seems to have propagated to the documentation (for example,  plot nbr 6): &#xD;&#xA;http://docs.ggplot2.org/current/stat_summary.html " />
      <Message Id="11759127" ParentId="732" UserId="78918" Date="12/29/2012 23:42:15" Content="bump ... ? any thoughts from developers about whether this is easy or hard to fix,  or work around?&#xD;&#xA;" />
      <Message Id="12084159" ParentId="732" UserId="57457" Date="01/10/2013 08:02:39" Content="Bump...&#xD;&#xA;&#xD;&#xA;breaks lots of plots.  Does anyone know which version to one should revert to in order to get the desired behaviour?" />
      <Message Id="12375595" ParentId="732" UserId="130809" Date="01/17/2013 16:28:37" Content="This is a pretty frustrating regression. Would love to see a fix,  or at least a comment on it,  soon..." />
      <Message Id="12393247" ParentId="732" UserId="86978" Date="01/17/2013 21:42:57" Content="Sorry,  we've been occupied with other things recently. We'll probably have a 0.9.3.1 release with a fix for this." />
      <Message Id="12470463" ParentId="732" UserId="227097" Date="01/20/2013 13:14:18" Content="I write an temporary patch that can draw the line with `stat_summary`.&#xD;&#xA;I write it for my own use,  but as this change may introduce huge problem (even for me...),  I put it on gist.&#xD;&#xA;&#xD;&#xA;Here is a simple usage:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(devtools)&#xD;&#xA;source_gist(&quot;https://gist.github.com/4578531&quot;)&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;d &lt;- qplot(cyl,  mpg,  data=mtcars)&#xD;&#xA;d &lt;- d + aes(colour = factor(vs)) + stat_summary(fun.y = mean,  geom=&quot;line&quot;)&#xD;&#xA;d&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Note that you need to install `devtools`.&#xD;&#xA;&#xD;&#xA;@hadley and @wch Please let me know if I should not share this on gist." />
      <Message Id="12640196" ParentId="732" UserId="86978" Date="01/24/2013 07:12:49" Content="@kohske,  so this basically changes `StatSummary` back to the previous 0.9.2.1 version? I think that should be OK as a temporary fix. " />
      <Message Id="12646851" ParentId="732" UserId="227097" Date="01/24/2013 11:16:13" Content="@wch yes. It is same as 0.9.2.1." />
      <Message Id="13085564" ParentId="732" UserId="806435" Date="02/04/2013 16:38:22" Content="@kohske,  thanks a lot.  This really saved my plots!" />
      <Message Id="14274271" ParentId="732" UserId="86978" Date="03/01/2013 05:54:11" Content="Fixed by #770." />
    </Messages>
  </Topic>
  <Topic Id="733" Title="date scale with boxplot">
    <Messages>
      <Message Id="0" ParentId="733" UserId="933680" Date="12/05/2012 19:45:54" Content="```&#xA;# Fake data&#xA;mydf &lt;-data.frame(&#xA;	date=rep(as.Date(sprintf(&quot;%04d-%02d-%02d&quot;,  2012,  1:12, 1)),  10), &#xA;	value=rnorm(120))&#xA;&#xA;# There should be 12 boxplots,  but there is only one.&#xA;ggplot(mydf,  aes(date,  value)) + geom_boxplot()&#xA;&#xA;# This plots,  but x isn't a date scale.&#xA;ggplot(mydf,  aes(factor(date),  value)) + geom_boxplot()&#xA;&#xA;# Error: Invalid input: date_trans works with objects of class Date only&#xA;ggplot(mydf,  aes(factor(date),  value)) + geom_boxplot() + scale_x_date()&#xA;```" />
      <Message Id="11059179" ParentId="733" UserId="86978" Date="12/05/2012 20:33:14" Content="Because the x variable is continuous,  you need to specify grouping:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;mydf &lt;-data.frame(&#xD;&#xA;    date=rep(as.Date(sprintf(&quot;%04d-%02d-%02d&quot;,  2012,  1:12, 1)),  10), &#xD;&#xA;    value=rnorm(120))&#xD;&#xA;&#xD;&#xA;ggplot(mydf,  aes(date,  value,  group=date)) + geom_boxplot()&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="734" Title="Documentation of continuous scale breaks">
    <Messages>
      <Message Id="0" ParentId="734" UserId="933256" Date="12/05/2012 23:47:14" Content="The documentation of continuous scale breaks refers to character vectors when in fact it works with numeric vectors:&#xA;&#xA;For example:&#xA;documentation reads 'a character vector giving the breaks as they should appear on the axis or in the legend.' However,  it really needs a numeric vector." />
      <Message Id="35943040" ParentId="734" UserId="4196" Date="02/24/2014 21:44:57" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35968434" ParentId="734" UserId="933256" Date="02/25/2014 02:28:51" Content="It should just be a change in the documentation,  not a new feature.I can write something up and submit a pull request..." />
      <Message Id="36005111" ParentId="734" UserId="4196" Date="02/25/2014 13:07:14" Content="That would be great :)" />
    </Messages>
  </Topic>
  <Topic Id="735" Title="Date requires conversion to numeric for geom_vline">
    <Messages>
      <Message Id="0" ParentId="735" UserId="394973" Date="12/06/2012 18:05:33" Content="Sorry for being non-minimal,  but at least it's reproducible. &#xA;```r&#xA;require(ggplot2)&#xA;&#xA;require(lubridate)&#xA;&#xA;tasks&lt;-structure(list(SMC.PI = c(8893L,  8893L,  8893L,  8893L,  8893L,  8893L,  8893L,  8893L,  8893L,  8893L),  SubProject = structure(c(1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L),  .Label = &quot;Ripening Physiology&quot;,  class = &quot;factor&quot;),      SubSubProject = structure(c(1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,      1L,  1L),  .Label = &quot;Fruit Color&quot;,  class = &quot;factor&quot;),  Workstream.ID = structure(c(1L,      1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L),  .Label = c(&quot;1.2.1.04&quot;,      &quot;1.2.1.06&quot;),  class = &quot;factor&quot;),  Workstream.Name = structure(c(1L,      1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L),  .Label = c(&quot;Pepper&quot;,      &quot;Tomato&quot;),  class = &quot;factor&quot;),  Process = structure(c(8L,  3L,      5L,  6L,  1L,  7L,  4L,  5L,  2L,  8L),  .Label = c(&quot;Analytical&quot;,      &quot;Candidate Gene&quot;,  &quot;Cultivation&quot;,  &quot;Data Analysis&quot;,  &quot;QTL Analysis&quot;,      &quot;Sampling&quot;,  &quot;Sequencing&quot;,  &quot;Total&quot;),  class = &quot;factor&quot;),  Owner = structure(c(4L,      6L,  3L,  2L,  5L,  1L,  4L,  3L,  4L,  4L),  .Label = c(&quot;?&quot;,  &quot;BA&quot;,      &quot;GPL&quot;,  &quot;Hurr&quot;,  &quot;Kende&quot;,  &quot;Nicolet&quot;),  class = &quot;factor&quot;),  Location = structure(c(2L,      3L,  1L,  3L,  2L,  4L,  2L,  1L,  2L,  2L),  .Label = c(&quot;FRSS&quot;,  &quot;GBJH&quot;,      &quot;MAAG&quot;,  &quot;USRE&quot;),  class = &quot;factor&quot;),  Cost = c(NA,  NA,  NA,      NA,  NA,  NA,  NA,  NA,  NA,  NA),  DurationMonths = c(36L,  9L,      1L,  1L,  3L,  2L,  1L,  1L,  1L,  36L),  Start = structure(c(1293840000,      1351728000,  1359676800,  1367366400,  1370044800,  1370044800,      1377993600,  1380585600,  1383264000,  1317427200),  tzone = &quot;UTC&quot;,  class = c(&quot;POSIXct&quot;,      &quot;POSIXt&quot;)),  End = structure(c(1388534400,  1375315200,  1362096000,      1370044800,  1377993600,  1375315200,  1380585600,  1383264000,      1385856000,  1412121600),  tzone = &quot;UTC&quot;,  class = c(&quot;POSIXct&quot;,      &quot;POSIXt&quot;)),  ymin = c(1L,  2L,  3L,  4L,  5L,  6L,  7L,  8L,  9L,      1L)),  .Names = c(&quot;SMC.PI&quot;,  &quot;SubProject&quot;,  &quot;SubSubProject&quot;,  &quot;Workstream.ID&quot;,  &quot;Workstream.Name&quot;,  &quot;Process&quot;,  &quot;Owner&quot;,  &quot;Location&quot;,  &quot;Cost&quot;,  &quot;DurationMonths&quot;,  &quot;Start&quot;,  &quot;End&quot;,  &quot;ymin&quot;),  row.names = c(NA,  -10L),  class = &quot;data.frame&quot;)&#xA;today&lt;-parse_date_time(Sys.Date(),  orders=&quot;Y-m-d&quot;)&#xA;&#xA;ggplot(tasks,  aes(xmin = Start&#xA;,  xmax = End&#xA;,  ymin = ymin&#xA;,  ymax = ymin+ 1&#xA;,  fill = Process&#xA;)&#xA;) +&#xA;geom_rect() +&#xA;facet_grid(Workstream.ID+Workstream.Name+SubSubProject+SubProject+SMC.PI~.) +&#xA;geom_vline(aes(xintercept=today))+&#xA;theme(axis.text.y = element_blank(),  axis.ticks.y = element_blank()) +&#xA;labs(x=&quot;Year&quot;)&#xA;&#xA;####Error: Discrete value supplied to continuous scale&#xA;```&#xA;Change to as.numeric and everything is fine. &#xA;&#xA;```r&#xA;ggplot(tasks,  aes(xmin = Start&#xA;,  xmax = End&#xA;,  ymin = ymin&#xA;,  ymax = ymin+ 1&#xA;,  fill = Process&#xA;)&#xA;) +&#xA;geom_rect() +&#xA;facet_grid(Workstream.ID+Workstream.Name+SubSubProject+SubProject+SMC.PI~.) +&#xA;geom_vline(aes(xintercept=as.numeric(today)))+&#xA;theme(axis.text.y = element_blank(),  axis.ticks.y = element_blank()) +&#xA;labs(x=&quot;Year&quot;)&#xA;```" />
      <Message Id="35943113" ParentId="735" UserId="4196" Date="02/24/2014 21:45:36" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="736" Title="stat_summary not drawing min/max line">
    <Messages>
      <Message Id="0" ParentId="736" UserId="979369" Date="12/07/2012 13:18:00" Content="The following code from the docs:&#xA;&#xA;```R&#xA;qplot(cyl,  mpg,  data=mtcars) + stat_summary(fun.y = mean,  fun.ymin = min,  fun.ymax=max,  colour='red')&#xA;```&#xA;&#xA;correctly draws min/max bars in red.&#xA;&#xA;Plot just the summary&#xA;&#xA;```R&#xA;qplot(cyl,  mpg,  data=mtcars,  stat='summary',  fun.y = mean,  fun.ymin = min,  fun.ymax=max,  colour='red')&#xA;```&#xA;&#xA;and the min/max bars disappear (though space is left for them on the y scale)." />
      <Message Id="11211302" ParentId="736" UserId="86978" Date="12/10/2012 18:45:19" Content="I think this isn't a bug,  but rather some slightly confusing behavior of qplot. Each layer has a geom and a stat.&#xD;&#xA;&#xD;&#xA;The default geom for `qplot`,  given just x and y variables,  is `geom_point`,  and in the example you've given,  you've set `stat=&quot;summary&quot;`.&#xD;&#xA;&#xD;&#xA;But when you use `stat_summary()`,  the default is to create a layer with `stat=&quot;summary&quot;` and `geom=&quot;pointrange&quot;`. The following will give you the output you're looking for:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(cyl,  mpg,  data=mtcars,  stat='summary',  geom='pointrange', &#xD;&#xA;   fun.y = mean,  fun.ymin = min,  fun.ymax=max,  colour='red')&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;I'd suggest using `ggplot` instead of `qplot` for anything that's not super-simple,  to make it clearer what's going on::&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(x=cyl,  y=mpg)) + geom_point() + &#xD;&#xA;  stat_summary(fun.y = mean,  fun.ymin = min,  fun.ymax=max,  colour='red')&#xD;&#xA;```" />
      <Message Id="11240018" ParentId="736" UserId="979369" Date="12/11/2012 11:23:24" Content="It seems unnecessarily confusing to have the default geom overridden by qplot. Perhaps I should just raise that separately,  though :)" />
      <Message Id="11240030" ParentId="736" UserId="979369" Date="12/11/2012 11:23:54" Content="Thanks for investigating,  though!" />
    </Messages>
  </Topic>
  <Topic Id="737" Title="plyr 1.8 breaks ggplot2 0.9.3 (?)">
    <Messages>
      <Message Id="0" ParentId="737" UserId="78918" Date="12/07/2012 15:35:54" Content="This was reported on StackOverflow: http://stackoverflow.com/questions/13765835/unusual-error-in-all-ggplot2-commands&#xA;&#xA;(I note that the plot appears just fine,  so this is really just a nuisance ...)&#xA;&#xA;I couldn't reproduce it with ggplot2 0.9.3 until I updated plyr to 1.8,  then I could:&#xA;&#xA;```&#xA;&gt; library(ggplot2)&#xA;qplot(1:10, 1&gt; , y=1:10)1:10&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xA;&gt; sessionInfo()&#xA;R Under development (unstable) (2012-11-20 r61133)&#xA;Platform: i686-pc-linux-gnu (32-bit)&#xA;&#xA;locale: [ snip ]&#xA;attached base packages: [ snip ]&#xA;other attached packages:&#xA;[ 1 ] ggplot2_0.9.3&#xA;&#xA;loaded via a namespace (and not attached):&#xA; [ 1 ] colorspace_1.2-0   dichromat_1.2-4    digest_0.5.2       grid_2.16.0       &#xA; [ 5 ] gtable_0.1.1       labeling_0.2       MASS_7.3-22        munsell_0.4       &#xA; [ 9 ] plyr_1.8           proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    &#xA;[ 13 ] scales_0.2.3       stringr_0.6.1     &#xA;&gt; &#xA;```" />
      <Message Id="11134892" ParentId="737" UserId="86978" Date="12/07/2012 15:54:23" Content="This is probably the same issue as hadley/plyr#122. There's some sort of issue with upgrading plyr,  and ggplot2. Also see http://blog.rstudio.org/2012/12/06/ggplot2-plyr-release/ " />
      <Message Id="11135203" ParentId="737" UserId="78918" Date="12/07/2012 16:03:20" Content="Weird.  I had installed both from source (although separately) on Ubuntu 12.04.  Re-running `install.packages(c(&quot;ggplot2&quot;, &quot;plyr&quot;))` appears to have fixed it. (... ??? ...)  Sorry for the extra noise.&#xD;&#xA;" />
      <Message Id="11135342" ParentId="737" UserId="4196" Date="12/07/2012 16:07:24" Content="@bbolker don't blame yourself,  blame `install.packages`." />
      <Message Id="11141259" ParentId="737" UserId="1659085" Date="12/07/2012 18:41:46" Content="I tried installing separately,  then together,  then again separately,  but I still receive the same error. @hadley @bbolker  any suggestion? Also,  the warning about doMC not being available was always there? It's harmless,  right?" />
      <Message Id="11142505" ParentId="737" UserId="78918" Date="12/07/2012 19:17:21" Content="@juancentro : I still don't claim to understand this,  but have you followed the instructions *exactly* (open *clean* R sesssion (say,  command-line version with `--vanilla`,  just to be sure) and `install.packages(c(&quot;ggplot2&quot;, &quot;plyr&quot;), dependencies=TRUE)`) ?  And you don't have any versions of these packages stashed away in other libraries? " />
      <Message Id="11142662" ParentId="737" UserId="1659085" Date="12/07/2012 19:21:51" Content="@bbolker thanks for the answer. I hadn't tried the vanilla option. The issue remains unsolved though" />
      <Message Id="11142723" ParentId="737" UserId="78918" Date="12/07/2012 19:23:40" Content="`i1 &lt;- installed.packages(); i1[ &quot;plyr&quot;,  ]` ... ?&#xD;&#xA;" />
      <Message Id="11142767" ParentId="737" UserId="86978" Date="12/07/2012 19:25:00" Content="I just tried installing in a clean session on Windows XP,  and I'm running into the same problem! But it only seems to happen in Windows for me.&#xD;&#xA;&#xD;&#xA;This should work,  but for some reason,  the correct version of plyr isn't getting installed in Windows:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;install.packages(c(&quot;ggplot2&quot;,  &quot;gtable&quot;,  &quot;scales&quot;,  &quot;plyr&quot;))&#xD;&#xA;```" />
      <Message Id="11339535" ParentId="737" UserId="1659085" Date="12/13/2012 15:56:05" Content="Today I installed from the RStudio mirror plyr and ggplot2 at the same time and the issue was solved.&#xD;&#xA;```r&#xD;&#xA;install.packages(c(&quot;ggplot2&quot;, &quot;plyr&quot;), dep=T)&#xD;&#xA;```" />
      <Message Id="11341657" ParentId="737" UserId="86978" Date="12/13/2012 16:37:58" Content="OK,  glad to hear it worked for you. Since we haven't heard a whole lot of other complaints,  I'll close this." />
    </Messages>
  </Topic>
  <Topic Id="738" Title="Typo in geom_errorbarh required aesthetics">
    <Messages>
      <Message Id="0" ParentId="738" UserId="1956468" Date="12/07/2012 19:32:26" Content="The help page for geom_errorbarh says it requires x,  xmax,  and xmin,  but it should say requires y,  xmax,  and xmin.&#xA;&#xA;In contrast,  the geom_errorbar says (correctly) that it requires x,  ymax,  and ymin.&#xA;&#xA;To reproduce: ?geom_errorbarh in ggplot 0.9.3." />
    </Messages>
  </Topic>
  <Topic Id="739" Title="stat_summary makes groups too small">
    <Messages>
      <Message Id="0" ParentId="739" UserId="86978" Date="12/10/2012 16:27:42" Content="This bug was probably introduced by f2f5e8c629813b280d61bb387615468458300331,  which was a fix for #622.&#xA;&#xA;This should have lines connecting the means:&#xA;&#xA;```R&#xA;ggplot(mtcars,  aes(cyl,  hp,  colour = factor(gear))) + geom_point() +&#xA;  stat_summary(aes(group = factor(gear)),  fun.y = mean,  geom = &quot;line&quot;)&#xA;# geom_path: Each group consist of only one observation. Do you need to adjust the group aesthetic?&#xA;&#xA;```&#xA;" />
      <Message Id="11265654" ParentId="739" UserId="806435" Date="12/11/2012 21:43:17" Content="same as https://github.com/hadley/ggplot2/issues/732 ?&#xD;&#xA;&#xD;&#xA;Cheers" />
    </Messages>
  </Topic>
  <Topic Id="740" Title="Improved aesthetic documentation">
    <Messages>
      <Message Id="0" ParentId="740" UserId="463252" Date="12/11/2012 21:05:44" Content="This wishlist item is inspired by a recent issue (Issue #726),  an email on the help list  (https://groups.google.com/d/topic/ggplot2/4rVJ1xWsLeQ/discussion),  and some previous work I have done (Issue #717).&#xD;&#xA;&#xD;&#xA;I think the documentation of aesthetics themselves needs to be overhauled/improved and I wanted to create this issue to put down some of my ideas. This has always been a thin part of the documentation. The ggplot2 book has it as Appendix B which is only 3 pages. JakeRuss added documentation of linetype,  size,  shape,  colour,  fill,  and alpha in June 2011. Documentation for position,  order,  and group was added in January 2012. But is is jumbled and not well linked.&#xD;&#xA;&#xD;&#xA;Here are my suggestions:&#xD;&#xA;&#xD;&#xA;* Rename the documents/topics to start with &quot;aesthetic&quot; rather than &quot;aes&quot; to distinguish them from the `aes` family of functions (`aes`,  `aes_string`,  `aes_all`,  `aes_auto`).&#xD;&#xA;* Divide the documentation into separate topics for each aesthetic. *Very* closely related concepts (such as the position aesthetics,  `hjust` and `vjust`,  `colour` and `fill`) can be kept together,  but `shape` and `linetype` don't belong together. For the cases with combined documentation,  there should be aliases to each separately (aesthetic-hjust,  for example).&#xD;&#xA;* Document all the aesthetics&#xD;&#xA;&#xD;&#xA;    ```r&#xD;&#xA;&gt; unique(names(aes_all(ggplot2:::.all_aesthetics)))&#xD;&#xA; [ 1 ] &quot;hjust&quot;      &quot;alpha&quot;      &quot;angle&quot;      &quot;fill&quot;       &quot;size&quot;      &#xD;&#xA; [ 6 ] &quot;colour&quot;     &quot;group&quot;      &quot;label&quot;      &quot;linetype&quot;   &quot;lower&quot;     &#xD;&#xA;[ 11 ] &quot;ymax&quot;       &quot;middle&quot;     &quot;ymin&quot;       &quot;order&quot;      &quot;shape&quot;     &#xD;&#xA;[ 16 ] &quot;radius&quot;     &quot;sample&quot;     &quot;upper&quot;      &quot;vjust&quot;      &quot;weight&quot;    &#xD;&#xA;[ 21 ] &quot;width&quot;      &quot;x&quot;          &quot;xend&quot;       &quot;xmax&quot;       &quot;xmin&quot;      &#xD;&#xA;[ 26 ] &quot;xintercept&quot; &quot;y&quot;          &quot;yend&quot;       &quot;yintercept&quot; &quot;z&quot;         &#xD;&#xA;    ```&#xD;&#xA;&#xD;&#xA;Taking out those already documented,  that leaves `hjust`,  `angle`,  `label`,  `lower`,   `middle`,  `radius`,  `sample`,  `upper`,  `vjust`,  `weight`,  `width`,  and `z` (and,  according to `geom_text`,   `family`,  `fontface` and `lineheight`; are there others?)&#xD;&#xA;* In the list of aesthetics in each geom,  add links for each to its corresponding aesthetic page (the consistent naming and/or aliasing based on the aesthetic should make this template-able)&#xD;&#xA;&#xD;&#xA;Ultimately,  this will address the problem of &quot;what does that aesthetic control?&quot; or &quot;why would I want to set that?&quot; or the reverse questions of &quot;what aesthetic controls such-and-such aspect of the plot?&quot;&#xD;&#xA;&#xD;&#xA;If anyone else thinks this could be useful,  I'll make a branch on my clone of the repository and attach it as a pull request to which people can comment an contribute." />
      <Message Id="11340355" ParentId="740" UserId="86978" Date="12/13/2012 16:12:04" Content="This sounds like a good idea to me. I believe that the aesthetics in the help page are automatically generated,  so that's something to keep in mind." />
      <Message Id="11392795" ParentId="740" UserId="463252" Date="12/14/2012 21:21:42" Content="I've started the pull request,  but the changes are not done yet so it is not ready to pull. I am accepting pull requests onto my doc/aesthetics branch. Things still to do:&#xD;&#xA;&#xD;&#xA;* Add rest of aesthetics&#xD;&#xA;* Make sure each aesthetic has examples with &#xD;&#xA;    * setting it&#xD;&#xA;    * using it as a discrete mapped scale (if appropriate)&#xD;&#xA;    * using it as a continuous mapped scale (if appropriate)&#xD;&#xA;    * using a manual scale&#xD;&#xA;    * using an identity scale&#xD;&#xA;* Something which demonstrates the palette,  if appropriate&#xD;&#xA;* Links/references to the underlying grid/par concept&#xD;&#xA;* Update code which generates the aesthetic section of the documentation to include links (and defaults?)&#xD;&#xA;" />
      <Message Id="19123656" ParentId="740" UserId="2557767" Date="06/07/2013 18:12:36" Content="What is the status of this? Just wondering." />
      <Message Id="19125521" ParentId="740" UserId="463252" Date="06/07/2013 18:44:01" Content="I haven't really looked at this seriously in several months. The core infrastructure is there. What is needed is more examples and descriptions. I'm happy to review pull requests to this branch that add examples. When I notice good ones on the mailing list or elsewhere,  I try to add them,  but I have not had time to sit down and systematically write examples like I would like to. It's something I'd like to do,  but not something I have a time table to get done." />
      <Message Id="19127747" ParentId="740" UserId="2557767" Date="06/07/2013 19:25:04" Content="&#xA;&#xA;On Fri,  7 Jun 2013,  Brian Diggs wrote:&#xA;&#xA;&gt; &#xA;&gt; I haven't really looked at this seriously in several months. The core &#xA;&gt; infrastructure is there. What is needed is more examples and &#xA;&gt; descriptions. I'm happy to review pull requests to this branch that add &#xA;&gt; examples. When I notice good ones on the mailing list or elsewhere,  I &#xA;&gt; try to add them,  but I have not had time to sit down and systematically &#xA;&gt; write examples like I would like to. It's something I'd like to do,  but &#xA;&gt; not something I have a time table to get done.&#xA;&#xA;Thanks for the clarification,  Brian." />
      <Message Id="35943382" ParentId="740" UserId="4196" Date="02/24/2014 21:48:05" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;&#xD;&#xA;This looks great!" />
    </Messages>
  </Topic>
  <Topic Id="741" Title="stat_density2d after ggplot2 0.9.3 update">
    <Messages>
      <Message Id="0" ParentId="741" UserId="777651" Date="12/12/2012 18:07:10" Content="Formerly a plot similar to this simple example worked,  but after updating to 0.9.3 I'm running into a warning message &#xD;&#xA;```&#xD;&#xA;library(MASS)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;m &lt;- ggplot(geyser,  aes(x = duration,  y = waiting)) + geom_point() + xlim(0.5,  6) + ylim(40,  110)&#xD;&#xA;m &lt;- m + stat_density2d(aes(fill = ..level..),  geom=&quot;polygon&quot;)&#xD;&#xA;(m)&#xD;&#xA;&#xD;&#xA;Warning message:&#xD;&#xA;In validDetails.polygon(x) : NAs introduced by coercion&#xD;&#xA;```&#xD;&#xA;If I just use + stat_density2d() without the fill command,  the lines are drawn as would be expected. It seems something breaks when I add the fill=..level..  and 'polygon' parts. " />
      <Message Id="14272113" ParentId="741" UserId="777651" Date="03/01/2013 03:54:37" Content="Awesome,  thanks Winston!" />
    </Messages>
  </Topic>
  <Topic Id="742" Title="hjust and vjust for x axis labels ignored with coord_polar">
    <Messages>
      <Message Id="0" ParentId="742" UserId="911841" Date="12/17/2012 17:26:13" Content="Example:&#xD;&#xA;&#xD;&#xA;    dat &lt;- data.frame(x = sample(letters[ 1:5 ], 100, replace = TRUE))&#xD;&#xA;&#xD;&#xA;    p &lt;- ggplot(dat, aes(x = x)) + &#xD;&#xA;			    geom_bar() + &#xD;&#xA;			    coord_polar()&#xD;&#xA;&#xD;&#xA;    #These are all identical&#xD;&#xA;    p + theme(axis.text.x = element_text(hjust = 0))&#xD;&#xA;    p + theme(axis.text.x = element_text(hjust = 0.5))&#xD;&#xA;    p + theme(axis.text.x = element_text(hjust = 1))" />
      <Message Id="35943419" ParentId="742" UserId="4196" Date="02/24/2014 21:48:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="743" Title="Wrong evaluation environment for expressions in aes()">
    <Messages>
      <Message Id="0" ParentId="743" UserId="86978" Date="12/20/2012 22:45:20" Content="&#xD;&#xA;Expressions in `aes()` are evaluated in the global environment,  but they should be evaluated in the calling environment. Example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;foo &lt;- 4&#xD;&#xA;ggplot(mtcars,  aes(x = wt + foo,  y = mpg)) +&#xD;&#xA;  geom_point()&#xD;&#xA;# Works&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;f &lt;- function() { &#xD;&#xA;  foo2 &lt;- 4&#xD;&#xA;  ggplot(mtcars,  aes(x = wt + foo2,  y = mpg)) +&#xD;&#xA;    geom_point()&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;f()&#xD;&#xA;# Error in eval(expr,  envir,  enclos) : object 'foo2' not found&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It can be worked around by using `environment=environment()`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;g &lt;- function() { &#xD;&#xA;  foo3 &lt;- 4&#xD;&#xA;  ggplot(mtcars,  aes(x = wt + foo3,  y = mpg), &#xD;&#xA;         environment = environment()) +&#xD;&#xA;    geom_point()&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;g()&#xD;&#xA;# Works&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think that should be the default behavior. @hadley,  is the current behavior a bug or a feature?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;The problem is the definition of `ggplot.data.frame` in plot.r:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot.data.frame &lt;- function(data,  mapping=aes(),  ..., &#xD;&#xA;  environment = globalenv())&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Changing it to use `parent.env()` fixes the problem:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot.data.frame &lt;- function(data,  mapping=aes(),  ..., &#xD;&#xA;  environment = parent.env())&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="35943465" ParentId="743" UserId="4196" Date="02/24/2014 21:48:52" Content="It's a bug,  but I don't think we can fix it now." />
      <Message Id="36005578" ParentId="743" UserId="472045" Date="02/25/2014 13:13:34" Content="Hadley,  is there a way to note the work-around in the documentation for aes()?" />
    </Messages>
  </Topic>
  <Topic Id="744" Title="Evaluate aes() in calling environment. Fixes #743">
    <Messages>
      <Message Id="0" ParentId="744" UserId="86978" Date="12/20/2012 22:47:21" Content="This fixes #743." />
      <Message Id="11845958" ParentId="744" UserId="4196" Date="01/03/2013 14:51:26" Content="Does this also fix #248?" />
      <Message Id="11847578" ParentId="744" UserId="86978" Date="01/03/2013 15:33:23" Content="It partially fixes #248. Each `aes()` is evaluated in the scope of the `ggplot` call,  not in the scope where each `aes()` is called." />
      <Message Id="21767819" ParentId="744" UserId="2957716" Date="07/30/2013 03:44:37" Content="It doesn't seem that it is fixed. If I run the code below...&#xD;&#xA;I may have forgot something,  but this is very sad because it makes it difficult to use ggplot2 in a function!&#xD;&#xA;&#xD;&#xA;    s1 &lt;- 2&#xD;&#xA;&#xD;&#xA;    test &lt;- function(){ &#xD;&#xA;       s1 &lt;- 4&#xD;&#xA;       TEST &lt;- data.frame(num=c(1, 2, 3, 4),  name=c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;))&#xD;&#xA;       print(with(TEST,  num/s1))&#xD;&#xA;       print(qplot(data = TEST,  x=name,  y=num/s1))&#xD;&#xA;       print(ggplot(data = TEST) + geom_bar( aes(x=name,  y=num/s1) ,  stat= 'identity'))&#xD;&#xA;     }" />
      <Message Id="35939188" ParentId="744" UserId="4196" Date="02/24/2014 21:16:49" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="35939188" ParentId="744" UserId="4196" Date="02/24/2014 21:16:49" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="745" Title="remove_geom: a function to remove layers from a ggplot2 object">
    <Messages>
      <Message Id="0" ParentId="745" UserId="702394" Date="12/21/2012 22:21:58" Content="* `remove_geom` function to remove layers from a ggplot2 object" />
      <Message Id="35943528" ParentId="745" UserId="4196" Date="02/24/2014 21:49:28" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="746" Title="added scale_dichromat">
    <Messages>
      <Message Id="0" ParentId="746" UserId="123968" Date="12/22/2012 06:39:53" Content="Added color and fill scales corresponding to for the color-blind dichromat palettes in  `scales::dichromat_pal`,  in the same way that `scales_*_brewer` are defined for `scales::brewer_pal`." />
      <Message Id="35943581" ParentId="746" UserId="4196" Date="02/24/2014 21:49:54" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="747" Title="documentation regarding values for geoms and stats is misleading">
    <Messages>
      <Message Id="0" ParentId="747" UserId="722231" Date="12/27/2012 21:19:14" Content="Example,  from stat_bin:&#xD;&#xA;&#xD;&#xA;Value&#xD;&#xA;&#xD;&#xA;New data frame with additional columns:&#xD;&#xA;&#xD;&#xA;count	&#xD;&#xA;number of points in bin&#xD;&#xA;&#xD;&#xA;density	&#xD;&#xA;density of points in bin,  scaled to integrate to 1&#xD;&#xA;&#xD;&#xA;ncount	&#xD;&#xA;count,  scaled to maximum of 1&#xD;&#xA;&#xD;&#xA;ndensity	&#xD;&#xA;density,  scaled to maximum of 1&#xD;&#xA;&#xD;&#xA;But stat_bin() is not returning a data frame.&#xD;&#xA;```r&#xD;&#xA;&gt; class(stat_bin())&#xD;&#xA;[ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="35943631" ParentId="747" UserId="4196" Date="02/24/2014 21:50:27" Content="Hmm,  that's what's returned when you run `stat_bin()` on the data. Not sure how to describe better." />
      <Message Id="35945727" ParentId="747" UserId="722231" Date="02/24/2014 22:09:26" Content="```&#xD;&#xA;&gt; class(stat_bin(data=faithful))&#xD;&#xA;[ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xD;&#xA;&gt; class( stat_bin( data=data.frame(x=1:20) ) )&#xD;&#xA;[ 1 ] &quot;proto&quot;       &quot;environment&quot;&#xD;&#xA;```&#xD;&#xA;What kind of data must be given as a an input to make stat_bin() return a data frame?  Does it only work when called in a certain environment?  Am I just being dense?&#xD;&#xA;" />
      <Message Id="35948451" ParentId="747" UserId="4196" Date="02/24/2014 22:33:46" Content="That documentation tells you what variables you can use in `aes()` like `aes(y = ..count..)`" />
    </Messages>
  </Topic>
  <Topic Id="748" Title="combine_elements should work by property name,  not position">
    <Messages>
      <Message Id="0" ParentId="748" UserId="1406263" Date="12/28/2012 05:33:00" Content="This is a one line fix that makes sure combine_elements implements inheritance by property name rather than position. This allows child theme elements to have additional properties that the parent elements don't. &#xD;&#xA;&#xD;&#xA;For example,  I made a plot where text axis labels have graphical icons attached,  by implementing a class that inherited from `element_text`,  with additional properties and an `element_grob` method. This worked but required this small change." />
      <Message Id="35943692" ParentId="748" UserId="4196" Date="02/24/2014 21:50:57" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?" />
    </Messages>
  </Topic>
  <Topic Id="749" Title="stat_density2d error when using polygon geom">
    <Messages>
      <Message Id="0" ParentId="749" UserId="1909707" Date="12/29/2012 02:12:19" Content="Using the example within R documentation:&#xD;&#xA;&#xD;&#xA;    library(&quot;MASS&quot;)&#xD;&#xA;    data(geyser,  &quot;MASS&quot;)&#xD;&#xA;&#xD;&#xA;    m &lt;- ggplot(geyser,  aes(x = duration,  y = waiting)) + geom_point() + xlim(0.5,  6) + ylim(40,  110)&#xD;&#xA;    m + geom_density2d()&#xD;&#xA;&#xD;&#xA;works fine but &#xD;&#xA;&#xD;&#xA;    m + stat_density2d(aes(fill = ..level..),  geom=&quot;polygon&quot;)&#xD;&#xA;&#xD;&#xA;does not work&#xD;&#xA;the error message is:&#xD;&#xA;&#xD;&#xA;    Warning message:&#xD;&#xA;    In validDetails.polygon(x) : NAs introduced by coercion&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="12101867" ParentId="749" UserId="777651" Date="01/10/2013 15:26:30" Content="Just FYI - this error message is also posted as issue 741." />
      <Message Id="12132964" ParentId="749" UserId="463252" Date="01/11/2013 06:07:24" Content="Echoing previous comment so that it will link: &#xD;&#xA;this error message is also posted as issue #741. " />
      <Message Id="12994030" ParentId="749" UserId="3448877" Date="02/01/2013 13:30:46" Content="This also happens with stat_contour,  its a geom=&quot;polygon&quot; bug.&#xD;&#xA;Maybe it has something to do with the last update to 0.9.3&#xD;&#xA;&quot;`geom_polygon` draws multiple polygons as a single grob instead of as&#xD;&#xA;  separate grobs. This results in much better performance. For example, &#xD;&#xA;  drawing a world map is about 12 times faster. (Winston Chang. Fixes #666)&quot;" />
    </Messages>
  </Topic>
  <Topic Id="750" Title="set_geom_params: set a geom's parameters for an existing ggplot2 object">
    <Messages>
      <Message Id="0" ParentId="750" UserId="702394" Date="01/03/2013 19:24:41" Content="New function to allow setting of geom parameters for existing ggplot2 objects." />
      <Message Id="35943738" ParentId="750" UserId="4196" Date="02/24/2014 21:51:19" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="751" Title="fortifying the data from a SpatialLinesDataFrame">
    <Messages>
      <Message Id="0" ParentId="751" UserId="1662852" Date="01/09/2013 16:33:17" Content="I'm new to the git,  i hope this is the right way to suggest small changes,  I noted the data from a spatial lines data frame did not get included when fortified and thought this patch was a small easy solution" />
      <Message Id="35943936" ParentId="751" UserId="4196" Date="02/24/2014 21:53:07" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="752" Title="polygon with holes">
    <Messages>
      <Message Id="0" ParentId="752" UserId="227097" Date="01/14/2013 00:58:33" Content="holes of polygon is handled by `grid.path`,  but current implementation of `geom_polygon` only uses `grid.polygon`.&#xD;&#xA;Refer to this article by Paul for details.&#xD;&#xA;http://journal.r-project.org/archive/2012-2/RJournal_2012-2_Murrell2.pdf&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Will you provide a `grid.path` version of `geom_polygon`?&#xD;&#xA;&#xD;&#xA;Here is a quick implementation and example.&#xD;&#xA;http://rpubs.com/kohske/3522&#xD;&#xA;&#xD;&#xA;You can see the &quot;hole&quot; at lat = 35.29 and long = 140.30.&#xD;&#xA;See the bottom panel that indicates the hole by red fill.&#xD;&#xA;&#xD;&#xA;kohske" />
      <Message Id="35943972" ParentId="752" UserId="4196" Date="02/24/2014 21:53:31" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="40751013" ParentId="752" UserId="413384" Date="04/17/2014 19:08:44" Content="@kohske Thank you! Your geom_holygon works well for me!" />
    </Messages>
  </Topic>
  <Topic Id="753" Title="Setting axis.ticks.length to 0 produces error">
    <Messages>
      <Message Id="0" ParentId="753" UserId="2257540" Date="01/14/2013 12:00:47" Content="Sample code:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(grid)&#xD;&#xA;theme_no_axes &lt;- theme(&#xD;&#xA;  axis.line = element_blank(),  &#xD;&#xA;  axis.text.x = element_blank(),  &#xD;&#xA;  axis.text.y = element_blank(), &#xD;&#xA;  axis.ticks = element_blank(),  &#xD;&#xA;  axis.title.x = element_blank(),  &#xD;&#xA;  axis.title.y = element_blank(),  &#xD;&#xA;  axis.ticks.margin = unit(c(0, 0, 0, 0),  &quot;lines&quot;), &#xD;&#xA;  axis.ticks.length = unit(0,  &quot;mm&quot;) # BUG&#xD;&#xA;  # Error in grid.Call.graphics(L_setviewport,  pvp,  TRUE) : &#xD;&#xA;    #Non-finite location and/or size for viewport&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;ggplot() + &#xD;&#xA;  geom_area (data=economics,  aes(x = date,  y = unemploy),  linetype=0) +&#xD;&#xA;  theme_no_axes&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Setting axis.ticks.length to 0.01 fixes the problem,  but it's a hack." />
      <Message Id="14258254" ParentId="753" UserId="86978" Date="02/28/2013 21:20:34" Content="This is a bug in grid; see #636. It's fixed in the development version of R,  so it should work in 2.15.3 and 3.0.0. The workaround for now to do exactly what you suggest: use a very small value like `unit(0.01,  'mm')`.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="754" Title="Setting legend title.position via theme system">
    <Messages>
      <Message Id="0" ParentId="754" UserId="890156" Date="01/19/2013 17:10:35" Content="It seems that the title.position of a `guides(...)` can't be set via a theme call but only at the call of the `guides(...)` method:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; left &lt;- regression_2500_std_by_f1_sigma2 + ggtitle(&quot;(a) standard deviation&quot;) + theme(legend.position=&quot;bottom&quot;,  legend.title.position=&quot;left&quot;)&#xD;&#xA;Fehler in function (el,  elname)  : &#xD;&#xA;  &quot;legend.title.position&quot; is not a valid theme element name.&#xD;&#xA;```&#xD;&#xA;Would it be possible to make this &quot;themeable&quot;?" />
      <Message Id="35943981" ParentId="754" UserId="4196" Date="02/24/2014 21:53:36" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="755" Title="position_dodge examples are incorrect">
    <Messages>
      <Message Id="0" ParentId="755" UserId="321235" Date="01/19/2013 19:21:18" Content="Examples 3-7 in position_dodge documentation are incorrect. As it is there is no dodging. The base plot needs to be set up something like&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(x=c(&quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;),  y=1:4,  g = rep(1:2,  2))&#xD;&#xA;(p &lt;- qplot(x,  y,  data=df,  group=g,  position=&quot;dodge&quot;,  geom=&quot;bar&quot;, &#xD;&#xA;stat=&quot;identity&quot;))&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="14258023" ParentId="755" UserId="86978" Date="02/28/2013 21:15:58" Content="Fixed,  thanks!" />
    </Messages>
  </Topic>
  <Topic Id="756" Title="aesthetic inheritance and annotation_custom">
    <Messages>
      <Message Id="0" ParentId="756" UserId="140350" Date="01/20/2013 22:04:59" Content="I posted this at SO and bring it here since it seems to be a real issue (and not just my confusion).  SO post: http://stackoverflow.com/questions/14415073/inheritance-of-aesthetics-in-ggplot2-0-9-3-the-behavior-of-annotation-custom&#xD;&#xA;&#xD;&#xA;I looked at the code for annotation_custom and it has a hard-wired inherit.aes = TRUE which I think is the problem. I don't see why this function needs any aesthetic at all. I did try several ways to override it and set inherit.aes = FALSE but I was unable to fully penetrate the namespace and make it stick.&#xD;&#xA;&#xD;&#xA;Here is a MWE which illustrates the problem:&#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;grid&quot;)&#xD;&#xA;&#xD;&#xA;# Case 1,  works as expected&#xD;&#xA;&#xD;&#xA;td1 &lt;- data.frame(x = rnorm(10),  y = rnorm(10))&#xD;&#xA;&#xD;&#xA;tf1 &lt;- function(df) {  # works as expected&#xD;&#xA;	p &lt;- ggplot(aes(x = x,  y = y),  data = df)&#xD;&#xA;	p &lt;- p + geom_point(color = &quot;red&quot;)&#xD;&#xA;	p &lt;- p + annotation_custom(circleGrob())&#xD;&#xA;	print(p)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;tf1(td1)&#xD;&#xA;&#xD;&#xA;# Case 2,  no error,  but circle is not drawn&#xD;&#xA;&#xD;&#xA;tf2 &lt;- function(df) {  # circle isn't draw,  but no error either&#xD;&#xA;	p &lt;- ggplot()&#xD;&#xA;	p &lt;- p + geom_point(data = df,  aes(x = x,  y = y),  color = &quot;red&quot;)		&#xD;&#xA;	p &lt;- p + annotation_custom(circleGrob())&#xD;&#xA;	print(p)&#xD;&#xA;	 }&#xD;&#xA;&#xD;&#xA;tf2(td1)&#xD;&#xA;&#xD;&#xA;# Case 3,  works if annotation is commented out&#xD;&#xA;&#xD;&#xA;td3 &lt;- data.frame(r = c(rnorm(5,  5,  1.5),  rnorm(5,  8,  2)), &#xD;&#xA;	f1 = c(rep(&quot;L&quot;,  5),  rep(&quot;H&quot;,  5)),  f2 = rep(c(&quot;A&quot;,  &quot;B&quot;),  5))&#xD;&#xA;&#xD;&#xA;tf3 &lt;- function(df) { &#xD;&#xA;	p &lt;- ggplot()&#xD;&#xA;	p &lt;- p + geom_point(data = df,  &#xD;&#xA;		aes(x = f1,  y = r,  color = f2,  group = f2))		&#xD;&#xA;#	p &lt;- p + annotation_custom(circleGrob()) # comment out and it works&#xD;&#xA;	print(p)&#xD;&#xA;	 }&#xD;&#xA;&#xD;&#xA;tf3(td3)&#xD;&#xA;````&#xD;&#xA;" />
      <Message Id="12505927" ParentId="756" UserId="4196" Date="01/21/2013 16:43:03" Content="Weird. I'm not sure why `inherit.aes = TRUE` would ever be a good idea." />
      <Message Id="12509263" ParentId="756" UserId="140350" Date="01/21/2013 17:53:13" Content="Thanks for looking into this Hadley.  The troubleshooting that led to this discovery really helped my understanding of how ggplot2 works under the hood,  but this issue sure makes building custom functions with it tough!&#xD;&#xA;&#xD;&#xA;A quick look shows ````inherit.aes```` is only rarely true:&#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;NEWS:* stat: statistics now also respect layer parameter inherit.aes (thanks to bug&#xD;&#xA;R/annotation-custom.r:    position = &quot;identity&quot;,  data = NULL,  inherit.aes = TRUE)&#xD;&#xA;R/annotation-map.r:    NULL,  inherit.aes = FALSE)&#xD;&#xA;R/annotation-raster.r:    stat = &quot;identity&quot;,  position = &quot;identity&quot;,  data = NULL,  inherit.aes = TRUE)&#xD;&#xA;R/annotation.r:    inherit.aes = FALSE, &#xD;&#xA;R/geom-abline.r:    .super$new(.,  ...,  mapping = mapping,  inherit.aes = FALSE)&#xD;&#xA;R/geom-hline.r:    .super$new(.,  data = data,  mapping = mapping,  inherit.aes = FALSE,  &#xD;&#xA;R/geom-vline.r:    .super$new(.,  data = data,  mapping = mapping,  inherit.aes = FALSE,  &#xD;&#xA;R/layer.r:  inherit.aes &lt;- FALSE&#xD;&#xA;R/layer.r:  new &lt;- function (.,  geom=NULL,  geom_params=NULL,  stat=NULL,  stat_params=NULL,  data=NULL,  mapping=NULL,  position=NULL,  params=NULL,  ...,  inherit.aes = TRUE,  legend = NA,  subset = NULL,  show_guide = NA) { &#xD;&#xA;R/layer.r:      inherit.aes = inherit.aes, &#xD;&#xA;R/layer.r:    if (.$inherit.aes) { &#xD;&#xA;R/layer.r:    if (.$inherit.aes) { &#xD;&#xA;R/limits.r:  geom_blank(aes_all(names(data)),  data,  inherit.aes = FALSE)&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;I assume that ````inherit.aes```` does exactly what it sounds like,  and thus should be FALSE in the case of ````annotation_custom```` but I don't completely trust myself with these things!" />
      <Message Id="17832404" ParentId="756" UserId="2557767" Date="05/13/2013 18:51:00" Content="Having reviewed Bryan's excellently written question on SO,  including the MWE above,  &#xD;&#xA;I think this is most probably the same bug I just ran into - &#xD;&#xA;see [ Positioning two legends independently in a faceted ggplot2 plot ](http://stackoverflow.com/q/16501999/350713). &#xD;&#xA;The corresponding problem in that question is what I refer to as version 2,  which is in the code snippet `minimal2.R`. This is&#xD;&#xA;&#xD;&#xA;    ## Add data type legend: version 2 (data type legend should be somewhere in the interior)&#xD;&#xA;    ## plotNew &lt;- stat + annotation_custom(grob = dataleg,  xmin = 7,  xmax = 10,  ymin = 0,  ymax = 4)&#xD;&#xA;&#xD;&#xA;Here `dataleg` object is extracted from a ggplot object,  unlike in Bryan's example,  namely using:&#xD;&#xA;&#xD;&#xA;    ## Extract data type legend&#xD;&#xA;    dataleg &lt;- gtable_filter(ggplot_gtable(ggplot_build(stat1)),  &quot;guide-box&quot;)&#xD;&#xA;&#xD;&#xA;The error message I get it a bit different from what Bryan gets,  but is probably the same underlying issue showing up differently.&#xD;&#xA;If I use `print(plotNew)` I get&#xD;&#xA;&#xD;&#xA;    Error in if (empty(data)) {  : missing value where TRUE/FALSE needed&#xD;&#xA;    Calls: simplot ... facet_map_layout -&gt; facet_map_layout.grid -&gt; locate_grid.&#xD;&#xA;&#xD;&#xA;The basic issue seems to be that if one creates a ggplot object starting with just `ggplot()`,  which one may need to do to avoid multiple aesthetics from mixing together,  then `annotation_custom` has problems dealing with it. It appears the objects created by adding a `ggplot` object to the output of `annotation_custom` gives something that looks like a ggplot object,  but is not. At least the sanity checks in `print` fail early. At least in my case,  the function `print.ggplot` in `plot-render.r` errors out in the call to `ggplot_build`. It looks like Bryan's example fails a little further,  in `ggplot_gtable`.&#xD;&#xA;&#xD;&#xA;I won't attempt my own MWE unless someone asks for it,  because Bryan's example shows the problem well." />
      <Message Id="17834076" ParentId="756" UserId="140350" Date="05/13/2013 19:18:36" Content="It looks like starting with just an empty ggplot() call is critical when writing your own fairly complicated functions using ggplot2. In a rather cruel twist,  I did not originally use an empty ggplot() call.  I was having the problems described on SO in several places,  then got what seemed to be really good advice from experienced folks to start with an empty call.  Totally in the spirit of building up layers.  Fixed some problems nicely,  and conceptually is it much cleaner/clearer.  But,  I was still having the problems with annotation_custom etc.  So I think I was having the same problem all along and any of my approaches might have worked in principle (but not in practice).  fmitha has done a lot of valuable troubleshooting which I appreciate.   Long story short,  I think his conclusion is almost certainly spot-on.  Hopefully someone can look into this in the near future.  Bryan&#xD;&#xA;&#xD;&#xA;On May 13,  2013,  at 2:51 PM,  fmitha &lt;notifications@github.com&gt; wrote:&#xD;&#xA;&#xD;&#xA;&gt; Having reviewed Bryan's excellently written question on SO,  including the MWE above,  &#xD;&#xA;&gt; I think this is most probably the same bug I just ran into - &#xD;&#xA;&gt; see Positioning two legends independently in a faceted ggplot2 plot. &#xD;&#xA;&gt; The corresponding problem in that question is what I refer to as version 2,  which is in the code snippet minimal2.R. This is&#xD;&#xA;&gt; &#xD;&#xA;&gt; ## Add data type legend: version 2 (data type legend should be somewhere in the interior)&#xD;&#xA;&gt; ## plotNew &lt;- stat + annotation_custom(grob = dataleg,  xmin = 7,  xmax = 10,  ymin = 0,  ymax = 4)&#xD;&#xA;&gt; Here dataleg object is extracted from a ggplot object,  unlike in Bryan's example,  namely using:&#xD;&#xA;&gt; &#xD;&#xA;&gt; ## Extract data type legend&#xD;&#xA;&gt; dataleg &lt;- gtable_filter(ggplot_gtable(ggplot_build(stat1)),  &quot;guide-box&quot;)&#xD;&#xA;&gt; The error message I get it a bit different from what Bryan gets,  but is probably the same underlying issue showing up differently.&#xD;&#xA;&gt; If I use print(plotNew) I get&#xD;&#xA;&gt; &#xD;&#xA;&gt; Error in if (empty(data)) {  : missing value where TRUE/FALSE needed&#xD;&#xA;&gt; Calls: simplot ... facet_map_layout -&gt; facet_map_layout.grid -&gt; locate_grid.&#xD;&#xA;&gt; The basic issue seems to be that if one creates a ggplot object starting with just ggplot(),  which one may need to do to avoid multiple aesthetics from mixing together,  then annotation_custom has problems dealing with it. It appears the objects created by adding a ggplot object to the output of annotation_custom gives something that looks like a ggplot object,  but is not. At least the sanity checks in print fail early. At least in my case,  the function print.ggplot in plot-render.r errors out in the call to ggplot_build. It looks like Bryan's example fails a little further,  in ggplot_gtable.&#xD;&#xA;&gt; &#xD;&#xA;&gt; I won't attempt my own MWE unless someone asks for it,  because Bryan's example shows the problem well.&#xD;&#xA;&gt; &#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub.&#xD;&#xA;&gt; " />
      <Message Id="17836163" ParentId="756" UserId="18970" Date="05/13/2013 19:53:36" Content="since no-one knows why `inherit.aes = TRUE` would have been used (I certainly don't!),  it sounds like a trivial pull request to make (after testing that it works with FALSE)." />
      <Message Id="17837715" ParentId="756" UserId="2557767" Date="05/13/2013 20:19:42" Content="&#xA;On Mon,  13 May 2013,  baptiste wrote:&#xA;&#xA;&gt; since no-one knows why inherit.aes = TRUE would have been used (I &#xA;&gt; certainly don't!),  it sounds like a trivial pull request to make (after &#xA;&gt; testing that it works with FALSE).&#xA;&#xA;I could certainly test it,  if you think that is the only thing that is &#xA;wrong. What is the best way to do this? Should I patch the git repository &#xA;and install from that? Is the git version of ggplot2 stable?&#xA;&#xA;                                                           Regards,  Faheem" />
      <Message Id="17847110" ParentId="756" UserId="18970" Date="05/13/2013 23:07:24" Content="The procedure is outlined here: https://github.com/hadley/ggplot2/wiki/Improving-the-ggplot2-documentation&#xD;&#xA;&#xD;&#xA;if you're familiar with installing ggplot2 with `devtools::install_github` then in theory you should be all set to test your own fork of ggplot2 with a few clicks." />
      <Message Id="17866133" ParentId="756" UserId="2557767" Date="05/14/2013 09:38:26" Content="I patched 0.9.3.1 to change to `inherit.aes = FALSE`. (I built a Debian package for it.) It didn't make any difference to Bryan's test or mine. I don't think this was the problem.&#xD;&#xA;&#xD;&#xA;Does anyone have any other ideas? I am not familar at all with the design of `ggplot2`,  and it looks very complicated,  so I &#xD;&#xA;won't attempt to debug it. Transcript with Bryan's code (case 3) follows.&#xD;&#xA;&#xD;&#xA;    &gt; library(ggplot2)&#xD;&#xA;    &gt; annotation_custom&#xD;&#xA;    function (grob,  xmin = -Inf,  xmax = Inf,  ymin = -Inf,  ymax = Inf) &#xD;&#xA;    { &#xD;&#xA;        GeomCustomAnn$new(geom_params = list(grob = grob,  xmin = xmin,  &#xD;&#xA;            xmax = xmax,  ymin = ymin,  ymax = ymax),  stat = &quot;identity&quot;,  &#xD;&#xA;            position = &quot;identity&quot;,  data = NULL,  inherit.aes = FALSE)&#xD;&#xA;     }&#xD;&#xA;    &lt;environment: namespace:ggplot2&gt;&#xD;&#xA;    &gt; source(&quot;bryan.R&quot;)&#xD;&#xA;    Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xD;&#xA;" />
      <Message Id="18018333" ParentId="756" UserId="2557767" Date="05/16/2013 18:04:47" Content="This is related to https://github.com/hadley/ggplot2/issues/587,  I think" />
      <Message Id="18242781" ParentId="756" UserId="2557767" Date="05/21/2013 21:38:56" Content="&#xA;Here is an analysis of this issue (#756). Ggplot2 developers,  I'd&#xA;appreciate comments,  corrections,  clarifications and other feedback.&#xA;&#xA;Bryan,  if you don't want to read the whole thing,  you can apply PATCH&#xA;1 and PATCH 2,  though you really only need PATCH 2,  and check if it&#xA;fixes things for you. It is intended as a workaround,  not a proper&#xA;fix.&#xA;&#xA;For the record,  the original problem that brought me to this issue is&#xA;illustrated by [ Positioning two legends independently in a faceted&#xA;ggplot2 plot ](http://stackoverflow.com/q/16501999/350713). I checked&#xA;that PATCH 1 and PATCH 2 fixed the issue described as Version 2&#xA;(Version 1 was user error I think). The resulting (faceted) graph now&#xA;has *two* identical legends,  one for each facet,  which is a bit&#xA;annoying,  but it is better than nothing at all.&#xA;&#xA;Consider the following modified version of Bryan's code&#xA;&#xA;     ## EXAMPLE 1&#xA;     library(&quot;ggplot2&quot;)&#xA;     library(&quot;grid&quot;)&#xA;     library(&quot;proto&quot;)&#xA;     len = 2&#xA;     d &lt;- data.frame(r = c( 6.279072,  2.995998,  8.193851,  11.274669), &#xA;          f1 = c(rep(&quot;L&quot;,  len),  rep(&quot;H&quot;,  len)),  f2 = rep(c(&quot;A&quot;,  &quot;B&quot;),  len))&#xA;&#xA;     p &lt;- ggplot(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xA;     p &lt;- p + geom_point()&#xA;     pbuild = ggplot_build(p)&#xA;     pA &lt;- p + annotation_custom(circleGrob())&#xA;     pAbuild = ggplot_build(pA)&#xA;&#xA;     pnew &lt;- ggplot()&#xA;     pnew &lt;- pnew + geom_point(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xA;     pnewbuild = ggplot_build(pnew)&#xA;     pnewA &lt;- pnew + annotation_custom(circleGrob())&#xA;     pnewAbuild = ggplot_build(pnewA)&#xA;&#xA;PART 1: WHY PRINT GIVES AN ERROR FOR `pnewA`.&#xA;=============================================&#xA;&#xA;Here `pA` and `pnewA` are the objects after the annotation has been added.&#xA;Printing `pnewA` gives the same error as Bryan's example,  version 3,  namely&#xA;&#xA;     Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xA;&#xA;It is not difficult to see what is going wrong. A fix is less obvious.&#xA;&#xA;The object `pAbuild` and `pnewAbuild` resulting from the call to&#xA;`ggplot_build` look like this. You can call `str` on them to see the&#xA;structure. Here the data frames correspond to e.g. `str(pa$data[ [ 1 ] ])` and&#xA;`str(pa$data[ [ 2 ] ])`.&#xA;&#xA;```&#xA;                                      ------------data frame NON NULL&#xA;             |                       |&#xA;pAbuild --- |                       |&#xA;             ------data (list) ------|&#xA;             |                       |&#xA;             |                       |&#xA;                                      ------------data frame NON NULL&#xA;&#xA;&#xA;                                      ------------data frame NON NULL&#xA;             |                       |&#xA;pnewAbuild- |                       |&#xA;             ------data (list) ------|&#xA;             |                       |&#xA;             |                       |&#xA;                                      ------------data frame NULL&#xA;```&#xA;&#xA;ggplot2 does not like it if the any of the data frames in the `data`&#xA;list are zero,  and it gives this error,  specifically,  from&#xA;`ggplot_gtable` from inside the print function `print.ggplot` in&#xA;&quot;plot-render.r&quot;. Detailed analysis follows&#xA;&#xA;##################################################################&#xA;Detailed analysisb for PART 1 begins&#xA;##################################################################&#xA;&#xA;Say `p` is the object. Then we are passing it to `print.ggplot` (in&#xA;&quot;plot-render.r&quot;).&#xA;&#xA;First `print.ggplot` calls `ggplot_build` (in &quot;plot-build.r&quot;). This is&#xA;the line in `print.ggplot`:&#xA;&#xA;     data &lt;- ggplot_build(x)&#xA;&#xA;Then it calls `ggplot_gtable` (also in `plot-render.r`) on the&#xA;resulting object,  `data`. This is the line in `print.ggplot`:&#xA;&#xA;     gtable &lt;- ggplot_gtable(data)&#xA;&#xA;`ggplot_gtable` begins with the lines (... means lines omitted)&#xA;&#xA;     gplot_gtable &lt;- function(data) { &#xA;       ...&#xA;       data &lt;- data$data&#xA;       ...&#xA;       build_grob &lt;- function(layer,  layer_data) { &#xA;         if (nrow(layer_data) == 0) return()&#xA;       ...&#xA;       # List by layer,  list by panel&#xA;       geom_grobs &lt;- Map(build_grob,  plot$layer,  data)&#xA;&#xA;So,  `data$data` is passed as the `layer_data` argument to&#xA;`geom_grobs`. Recall that `data` here is `ggplot_build` applied to&#xA;`p`. So the object we are looking at is&#xA;&#xA;     ggplot_build(p)$data&#xA;&#xA;This is a list of data frames. This is where the error is thrown, &#xA;because `Map` calls `build_grob` on each component of the list&#xA;`ggplot_build(p)$data`,  These components are data frames. For problem&#xA;object `pnewA`, &#xA;&#xA;     ggplot_build(pnewA)$data&#xA;&#xA;contains two data frames,  one of which is empty (`NULL`).&#xA;&#xA;The code `if (nrow(layer_data) == 0) return()` checks if any of those&#xA;data frames is empty,  and if so,  returns to the calling function. In&#xA;other words,  if the data frame is non-null but has zero rows,  the&#xA;function will return and the program will continue.&#xA;&#xA;In this case,  the data frame is `NULL`,  so the computation is&#xA;&#xA;     if (nrow(NULL) == 0) return()&#xA;&#xA;Since `nrow(NULL)` is `NULL`,  `(NULL == 0)` returns `logical(0)`, &#xA;However,  `if` can only deal with `True` or `False`,  so it returns an&#xA;error. `argument zero` refers to the fact that `logical(0)` is of&#xA;length 0. It seems to me that this line should be modified to deal&#xA;with `NULL` objects as well,  because there is no effective difference&#xA;between `NULL` and an empty data set. We can do this with the&#xA;following patch.&#xA;&#xA;```&#xA;PATCH 1&#xA;--- a/R/plot-render.r&#xA;+++ b/R/plot-render.r&#xA;@@ -22, 7 +22, 7 @@ ggplot_gtable &lt;- function(data) { &#xA;    theme &lt;- plot_theme(plot)&#xA;&#xA;    build_grob &lt;- function(layer,  layer_data) { &#xA;-    if (nrow(layer_data) == 0) return()&#xA;+    if ((is.null(layer_data)) || (nrow(layer_data) == 0)) return()&#xA;&#xA;      dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xA;        panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xA;```&#xA;&#xA;##################################################################&#xA;Detailed analysis for PART 1 ends&#xA;##################################################################&#xA;&#xA;PART 2: ANNOTATION_CUSTOM LAYER HAS A NULL DATA ATTRIBUTE AND IS THAT A PROBLEM?&#xA;&#xA;We now look at what `ggplot_build` does.&#xA;&#xA;We can diagramatically represent the structure of `pA` and `pnewA` as follows.&#xA;&#xA;```&#xA;       ---data (default) D     ----------obj corresponding to geom_point ------- data NULL&#xA;      |                       |&#xA;      |                       |&#xA;pA - |                       |&#xA;       ---layers------------- |&#xA;                              |&#xA;                              |&#xA;                              |&#xA;                               ------------obj corresponding to geom_point ----- data NULL&#xA;&#xA;&#xA;        --data (default) NULL -----------obj corresponding to geom_point ------- data D&#xA;        |                     |&#xA;        |                     |&#xA;pnewA- |                     |&#xA;        ---layers-------------|&#xA;                              |&#xA;                              |&#xA;                              |&#xA;                               ----------obj corresponding to geom_point ------- data NULL&#xA;```&#xA;&#xA;Here the data objects in `pnewA` correspond to `pnewA$data`&#xA;`pnewA$layers[ [ 1 ] ]$data` etc.&#xA;&#xA;When ggplot_build takes e.g. `pA` as an argument,  it first selects the&#xA;layer data elements as a list,  calling this `layer_data`. If any of&#xA;these elements are empty,  it replaces them with the top level data&#xA;attribute,  `pnewA$data`. In the case of `pA`,  both layer data elements&#xA;are replaced with the default `D`. For `pnewA`,  since the default is&#xA;empty,  we are still left with one non-empty and one empty.&#xA;&#xA;This happens at the beginning of `ggplot_build`,  in the `map_layout`&#xA;function.  I assume it is done like this because each layer is&#xA;supposed to be associated with data,  and if it isn't,  then one falls&#xA;back on the default (if it exists),  corresponding to&#xA;`ggplot(data)`. There isn't really another candidate for default data.&#xA;&#xA;Now,  when the remaining functions in `gglot_build` act on the result&#xA;of `map_layout` the data corresponding to the `annotation_custom`&#xA;layer in `pnewA` quickly becomes `NULL` and stays `NULL`. Whereas in&#xA;the case of the data in the annotation_custom for `pA`,  the value for&#xA;data returned from `gglot_build` is&#xA;&#xA;```&#xA;&gt; str(pAbuild$data)&#xA;List of 2&#xA;  $ :'data.frame':	4 obs. of  5 variables:&#xA;   ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;   ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;   ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;   ..$ group : int [ 1:4 ] 1 2 1 2&#xA;   ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;  $ :'data.frame':	4 obs. of  5 variables: &lt;-- corresponds to annotation_custom&#xA;   ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;   ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;   ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;   ..$ group : int [ 1:4 ] 1 2 1 2&#xA;   ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;```&#xA;&#xA;where the second data frame corresponds to `annotation_custom`.&#xA;However,  it does not appear that this data is actually used for the&#xA;custom_annotation. Let's assume that it is not. The problem we had&#xA;with `pnewA` was that there was no default data to replace the `NULL`&#xA;`annotation_custom` layer data with. How about if we replace it with&#xA;dummy data? If the data is not actually used it might work. We can do&#xA;this as follows:&#xA;&#xA;```&#xA;PATCH 2&#xA;--- a/R/panel.r&#xA;+++ b/R/panel.r&#xA;@@ -47, 6 +47, 8 @@ train_layout &lt;- function(panel,  facet,  d&#xA;  # @param data list of data frames (one for each layer)&#xA;  # @param plot_data default plot data frame&#xA;  map_layout &lt;- function(panel,  facet,  data,  plot_data) { &#xA;+  if (is.waive(plot_data) || empty(plot_data))&#xA;+    plot_data = data.frame(dummy=c(1))&#xA;    lapply(data,  function(data) { &#xA;      if (is.waive(data)) data &lt;- plot_data&#xA;      facet_map_layout(facet,  data,  panel$layout)&#xA;```&#xA;&#xA;This patch fixes `pnewA` in EXAMPLE 1,  which now shows the circle&#xA;custom_annotation correctly. This confirms that the actual data used&#xA;does not matter,  as long as it is non-empty. Furthermore,  note that&#xA;the difference between `pnewAbuild` with and without PATCH 2 is just&#xA;&#xA;```&#xA;List of 3&#xA;  $ data :List of 2&#xA;   ..$ :'data.frame':	4 obs. of  5 variables:&#xA;   .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;   .. ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;   .. ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;   .. ..$ group : int [ 1:4 ] 1 2 1 2&#xA;   .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;   ..$ : NULL&#xA;```&#xA;vs&#xA;```&#xA;List of 3&#xA;  $ data :List of 2&#xA;   ..$ :'data.frame':	4 obs. of  5 variables:&#xA;   .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;   .. ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;   .. ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;   .. ..$ group : int [ 1:4 ] 1 2 1 2&#xA;   .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;   ..$ :'data.frame':	1 obs. of  2 variables:&#xA;   .. ..$ PANEL: int 1&#xA;   .. ..$ group: int 1&#xA;```&#xA;i.e. the rest of the structure is the same.&#xA;&#xA;So,  we return to the question,  if it doesn't matter what data is used, &#xA;why is any data at all needed here?&#xA;&#xA;Recall from our detailed discussion of PART 1,  we observed at the end&#xA;that&#xA;&#xA;     if (nrow(layer_data) == 0) return()&#xA;&#xA;was the reason that `print` was rejecting `ggplot_build(pnewA) =&#xA;pnewAbuild`. This can be easily fixed by allowing `NULL` values. As&#xA;discussed earlier,  the current code can deal with data frames with 0&#xA;rows,  but not `NULL` values. PATCH 1 fixes this. If we apply this&#xA;instead of PATCH 2,  we see that EXAMPLE 1 does not error out any more, &#xA;but it does not render the annotation either.&#xA;&#xA;So,  we have the curious situation that ggplot does not actually use&#xA;the data associated with the annotation custom layer (at least in&#xA;EXAMPLE 1),  but still expects it to be there for rendering to&#xA;happen. I think this requires looking into the rendering code to see&#xA;why this is so. It looks to me like a bug.&#xA;&#xA;Actually,  if we take the `pAbuild` object and replace each of the two&#xA;data frames in `pAbuild$data` with empty data frames,  or just `NULL`&#xA;values,  and the plot still renders,  however,  if we zero out&#xA;`pAbuild$plot$data`,  then the plot fails to render. So,  in fact,  it&#xA;looks like the `data` attribute is not used at all for rendering, &#xA;which makes it doubly puzzling that `pnewAbuild` does not work without&#xA;PATCH 2.&#xA;&#xA;It seems that the function `grid.draw` from the `grid` package is used&#xA;for the actual rendering,  but I'm not sure how it works.&#xA;&#xA;##################################################################&#xA;Detailed analysis for Part 2 begins&#xA;##################################################################&#xA;&#xA;The output of `layer_data` for `ggplot_build` run on `pA` for the&#xA;first couple of functions is:&#xA;&#xA;     [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xA;     List of 2&#xA;      $ :'data.frame':       4 obs. of  4 variables:&#xA;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xA;      $ :'data.frame':       4 obs. of  4 variables:&#xA;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xA;&#xA;     [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xA;     List of 2&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xA;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xA;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&#xA;The final result for `ggplot_build` on `pA` is&#xA;&#xA;     List of 2&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xA;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ group : int [ 1:4 ] 1 2 1 2&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xA;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ group : int [ 1:4 ] 1 2 1 2&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&#xA;The output for `ggplot_build` run on problem object `pnewA` for the&#xA;first couple of functions is:&#xA;&#xA;     [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xA;     List of 2&#xA;      $ :'data.frame':       4 obs. of  4 variables:&#xA;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xA;      $ : list()&#xA;       ..- attr(*,  &quot;dim&quot;)= int [ 1:2 ] 0 2&#xA;       ..- attr(*,  &quot;dimnames&quot;)=List of 2&#xA;       .. ..$ : NULL&#xA;       .. ..$ : chr [ 1:2 ] &quot;data&quot; &quot;PANEL&quot;&#xA;&#xA;     [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xA;     List of 2&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xA;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;      $ :'data.frame':       0 obs. of  0 variables&#xA;&#xA;The final result for `ggplot_build` on `pnewA` is&#xA;&#xA;     List of 2&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xA;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;       ..$ group : int [ 1:4 ] 1 2 1 2&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;      $ : NULL&#xA;&#xA;As can clearly be seen from this,  things appear to go wrong from&#xA;`map_layout`. I'm assuming if they go wrong,  then they continue to go&#xA;wrong. Already by the second transformation on `pnewA`,  `dlapply&#xA;(function(d,  p) p$compute_aesthetics(d,  plot))` the data frame is&#xA;empty.&#xA;&#xA;In the case of `pA`,  the data is close to its final form after the&#xA;second transformation - call to `dlapply (function(d,  p)&#xA;p$compute_aesthetics(d,  plot))`.&#xA;&#xA;`map_layout` is in &quot;panel.r&quot;. This mostly calls `facet_map_layout` in&#xA;&quot;facet-.r&quot;. This calls some `facet_map_layout` method. There are&#xA;methods in &quot;facet-grid-.r&quot;,  &quot;facet-null.r&quot;,  and &quot;facet-wrap.r&quot;. In&#xA;this case it turns out to call the method in &quot;facet-null.r&quot;,  since&#xA;there is no actual faceting here.&#xA;&#xA;`map_layout` does the following operations:&#xA;&#xA;STEP 1: For each data attribute in `layers`,  `pA$layers[ [ i ] ]$data`,  it&#xA;checks if it is a waiver object,  basically meaning the calling&#xA;function should use the default value.&#xA;&#xA;     if (is.waive(data))&#xA;&#xA;If so,  it then replaces the `pA$layers[ [ i ] ]$data` with the top level&#xA;data attribute,  e.g. `pA$data`,  and passes down to&#xA;`facet_map_layout.null` (in this case).&#xA;&#xA;STEP 2:If the data object constructed from above is either a waiver object or&#xA;empty,  then it does a cbind and then returns the result&#xA;&#xA;     if (is.waive(data) || empty(data))&#xA;       return(cbind(data,  PANEL = integer(0)))&#xA;&#xA;otherwise it adds a `PANEL` attribute to `data`.&#xA;&#xA;     data$PANEL &lt;- 1L&#xA;&#xA;and returns.&#xA;&#xA;STEP 1 is the important step here.&#xA;&#xA;So to summarize what happens&#xA;&#xA;First,  extract the layer data.&#xA;&#xA;            ggplot_build&#xA;     pnewA ----------------&gt; layer_data (lapply(pnewA$layers,  function(y) y$data))&#xA;&#xA;Second,  pass `layer_data` to `map_layout`,  replacing empty elements with&#xA;pnewA$data.&#xA;&#xA;In this case of `pnewA`,  this results in one non-empty element,  and one&#xA;empty element.&#xA;&#xA;In this case of `pA`,  this results in two non-empty elements.&#xA;&#xA;##################################################################&#xA;Detailed analysis for Part 2 ends&#xA;##################################################################" />
      <Message Id="18244925" ParentId="756" UserId="140350" Date="05/21/2013 22:04:49" Content="Outstanding and detailed analysis!  When I had the problem,  I had looked at the ggplot2 object and could see there was a difference between the pieces,  but I didn't have the patience you applied to really ferret this one out.  Great job,  and a huge service to the community.  Hopefully this can be evaluated soon and a fix issued.  Bryan&#xD;&#xA;&#xD;&#xA;On May 21,  2013,  at 5:39 PM,  fmitha &lt;notifications@github.com&gt; wrote:&#xD;&#xA;&#xD;&#xA;&gt; &#xD;&#xA;&gt; Here is an analysis of this issue (#756). Ggplot2 developers,  I'd&#xD;&#xA;&gt; appreciate comments,  corrections,  clarifications and other feedback.&#xD;&#xA;&gt; &#xD;&#xA;&gt; Bryan,  if you don't want to read the whole thing,  you can apply PATCH&#xD;&#xA;&gt; 1 and PATCH 2,  though you really only need PATCH 2,  and check if it&#xD;&#xA;&gt; fixes things for you. It is intended as a workaround,  not a proper&#xD;&#xA;&gt; fix.&#xD;&#xA;&gt; &#xD;&#xA;&gt; For the record,  the original problem that brought me to this issue is&#xD;&#xA;&gt; illustrated by [ Positioning two legends independently in a faceted&#xD;&#xA;&gt; ggplot2 plot ](http://stackoverflow.com/q/16501999/350713). I checked&#xD;&#xA;&gt; that PATCH 1 and PATCH 2 fixed the issue described as Version 2&#xD;&#xA;&gt; (Version 1 was user error I think). The resulting (faceted) graph now&#xD;&#xA;&gt; has *two* identical legends,  one for each facet,  which is a bit&#xD;&#xA;&gt; annoying,  but it is better than nothing at all.&#xD;&#xA;&gt; &#xD;&#xA;&gt; Consider the following modified version of Bryan's code&#xD;&#xA;&gt; &#xD;&#xA;&gt; ## EXAMPLE 1&#xD;&#xA;&gt; library(&quot;ggplot2&quot;)&#xD;&#xA;&gt; library(&quot;grid&quot;)&#xD;&#xA;&gt; library(&quot;proto&quot;)&#xD;&#xA;&gt; len = 2&#xD;&#xA;&gt; d &lt;- data.frame(r = c( 6.279072,  2.995998,  8.193851,  11.274669), &#xD;&#xA;&gt; f1 = c(rep(&quot;L&quot;,  len),  rep(&quot;H&quot;,  len)),  f2 = rep(c(&quot;A&quot;,  &quot;B&quot;),  len))&#xD;&#xA;&gt; &#xD;&#xA;&gt; p &lt;- ggplot(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xD;&#xA;&gt; p &lt;- p + geom_point()&#xD;&#xA;&gt; pbuild = ggplot_build(p)&#xD;&#xA;&gt; pA &lt;- p + annotation_custom(circleGrob())&#xD;&#xA;&gt; pAbuild = ggplot_build(pA)&#xD;&#xA;&gt; &#xD;&#xA;&gt; pnew &lt;- ggplot()&#xD;&#xA;&gt; pnew &lt;- pnew + geom_point(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xD;&#xA;&gt; pnewbuild = ggplot_build(pnew)&#xD;&#xA;&gt; pnewA &lt;- pnew + annotation_custom(circleGrob())&#xD;&#xA;&gt; pnewAbuild = ggplot_build(pnewA)&#xD;&#xA;&gt; &#xD;&#xA;&gt; PART 1: WHY PRINT GIVES AN ERROR FOR `pnewA`.&#xD;&#xA;&gt; =============================================&#xD;&#xA;&gt; &#xD;&#xA;&gt; Here `pA` and `pnewA` are the objects after the annotation has been added.&#xD;&#xA;&gt; Printing `pnewA` gives the same error as Bryan's example,  version 3,  namely&#xD;&#xA;&gt; &#xD;&#xA;&gt; Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xD;&#xA;&gt; &#xD;&#xA;&gt; It is not difficult to see what is going wrong. A fix is less obvious.&#xD;&#xA;&gt; &#xD;&#xA;&gt; The object `pAbuild` and `pnewAbuild` resulting from the call to&#xD;&#xA;&gt; `ggplot_build` look like this. You can call `str` on them to see the&#xD;&#xA;&gt; structure. Here the data frames correspond to e.g. `str(pa$data[ [ 1 ] ])` and&#xD;&#xA;&gt; `str(pa$data[ [ 2 ] ])`.&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```&#xD;&#xA;&gt; ------------data frame NON NULL&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; pAbuild --- | |&#xD;&#xA;&gt; ------data (list) ------|&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; ------------data frame NON NULL&#xD;&#xA;&gt; &#xD;&#xA;&gt; &#xD;&#xA;&gt; ------------data frame NON NULL&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; pnewAbuild- | |&#xD;&#xA;&gt; ------data (list) ------|&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; ------------data frame NULL&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot2 does not like it if the any of the data frames in the `data`&#xD;&#xA;&gt; list are zero,  and it gives this error,  specifically,  from&#xD;&#xA;&gt; `ggplot_gtable` from inside the print function `print.ggplot` in&#xD;&#xA;&gt; &quot;plot-render.r&quot;. Detailed analysis follows&#xD;&#xA;&gt; &#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; Detailed analysisb for PART 1 begins&#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; &#xD;&#xA;&gt; Say `p` is the object. Then we are passing it to `print.ggplot` (in&#xD;&#xA;&gt; &quot;plot-render.r&quot;).&#xD;&#xA;&gt; &#xD;&#xA;&gt; First `print.ggplot` calls `ggplot_build` (in &quot;plot-build.r&quot;). This is&#xD;&#xA;&gt; the line in `print.ggplot`:&#xD;&#xA;&gt; &#xD;&#xA;&gt; data &lt;- ggplot_build(x)&#xD;&#xA;&gt; &#xD;&#xA;&gt; Then it calls `ggplot_gtable` (also in `plot-render.r`) on the&#xD;&#xA;&gt; resulting object,  `data`. This is the line in `print.ggplot`:&#xD;&#xA;&gt; &#xD;&#xA;&gt; gtable &lt;- ggplot_gtable(data)&#xD;&#xA;&gt; &#xD;&#xA;&gt; `ggplot_gtable` begins with the lines (... means lines omitted)&#xD;&#xA;&gt; &#xD;&#xA;&gt; gplot_gtable &lt;- function(data) { &#xD;&#xA;&gt; ...&#xD;&#xA;&gt; data &lt;- data$data&#xD;&#xA;&gt; ...&#xD;&#xA;&gt; build_grob &lt;- function(layer,  layer_data) { &#xD;&#xA;&gt; if (nrow(layer_data) == 0) return()&#xD;&#xA;&gt; ...&#xD;&#xA;&gt; # List by layer,  list by panel&#xD;&#xA;&gt; geom_grobs &lt;- Map(build_grob,  plot$layer,  data)&#xD;&#xA;&gt; &#xD;&#xA;&gt; So,  `data$data` is passed as the `layer_data` argument to&#xD;&#xA;&gt; `geom_grobs`. Recall that `data` here is `ggplot_build` applied to&#xD;&#xA;&gt; `p`. So the object we are looking at is&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot_build(p)$data&#xD;&#xA;&gt; &#xD;&#xA;&gt; This is a list of data frames. This is where the error is thrown, &#xD;&#xA;&gt; because `Map` calls `build_grob` on each component of the list&#xD;&#xA;&gt; `ggplot_build(p)$data`,  These components are data frames. For problem&#xD;&#xA;&gt; object `pnewA`, &#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot_build(pnewA)$data&#xD;&#xA;&gt; &#xD;&#xA;&gt; contains two data frames,  one of which is empty (`NULL`).&#xD;&#xA;&gt; &#xD;&#xA;&gt; The code `if (nrow(layer_data) == 0) return()` checks if any of those&#xD;&#xA;&gt; data frames is empty,  and if so,  returns to the calling function. In&#xD;&#xA;&gt; other words,  if the data frame is non-null but has zero rows,  the&#xD;&#xA;&gt; function will return and the program will continue.&#xD;&#xA;&gt; &#xD;&#xA;&gt; In this case,  the data frame is `NULL`,  so the computation is&#xD;&#xA;&gt; &#xD;&#xA;&gt; if (nrow(NULL) == 0) return()&#xD;&#xA;&gt; &#xD;&#xA;&gt; Since `nrow(NULL)` is `NULL`,  `(NULL == 0)` returns `logical(0)`, &#xD;&#xA;&gt; However,  `if` can only deal with `True` or `False`,  so it returns an&#xD;&#xA;&gt; error. `argument zero` refers to the fact that `logical(0)` is of&#xD;&#xA;&gt; length 0. It seems to me that this line should be modified to deal&#xD;&#xA;&gt; with `NULL` objects as well,  because there is no effective difference&#xD;&#xA;&gt; between `NULL` and an empty data set. We can do this with the&#xD;&#xA;&gt; following patch.&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```&#xD;&#xA;&gt; PATCH 1&#xD;&#xA;&gt; --- a/R/plot-render.r&#xD;&#xA;&gt; +++ b/R/plot-render.r&#xD;&#xA;&gt; @@ -22, 7 +22, 7 @@ ggplot_gtable &lt;- function(data) { &#xD;&#xA;&gt; theme &lt;- plot_theme(plot)&#xD;&#xA;&gt; &#xD;&#xA;&gt; build_grob &lt;- function(layer,  layer_data) { &#xD;&#xA;&gt; - if (nrow(layer_data) == 0) return()&#xD;&#xA;&gt; + if ((is.null(layer_data)) || (nrow(layer_data) == 0)) return()&#xD;&#xA;&gt; &#xD;&#xA;&gt; dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xD;&#xA;&gt; panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; Detailed analysis for PART 1 ends&#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; &#xD;&#xA;&gt; PART 2: ANNOTATION_CUSTOM LAYER HAS A NULL DATA ATTRIBUTE AND IS THAT A PROBLEM?&#xD;&#xA;&gt; &#xD;&#xA;&gt; We now look at what `ggplot_build` does.&#xD;&#xA;&gt; &#xD;&#xA;&gt; We can diagramatically represent the structure of `pA` and `pnewA` as follows.&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```&#xD;&#xA;&gt; ---data (default) D ----------obj corresponding to geom_point ------- data NULL&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; pA - | |&#xD;&#xA;&gt; ---layers------------- |&#xD;&#xA;&gt; |&#xD;&#xA;&gt; |&#xD;&#xA;&gt; |&#xD;&#xA;&gt; ------------obj corresponding to geom_point ----- data NULL&#xD;&#xA;&gt; &#xD;&#xA;&gt; &#xD;&#xA;&gt; --data (default) NULL -----------obj corresponding to geom_point ------- data D&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; | |&#xD;&#xA;&gt; pnewA- | |&#xD;&#xA;&gt; ---layers-------------|&#xD;&#xA;&gt; |&#xD;&#xA;&gt; |&#xD;&#xA;&gt; |&#xD;&#xA;&gt; ----------obj corresponding to geom_point ------- data NULL&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &#xD;&#xA;&gt; Here the data objects in `pnewA` correspond to `pnewA$data`&#xD;&#xA;&gt; `pnewA$layers[ [ 1 ] ]$data` etc.&#xD;&#xA;&gt; &#xD;&#xA;&gt; When ggplot_build takes e.g. `pA` as an argument,  it first selects the&#xD;&#xA;&gt; layer data elements as a list,  calling this `layer_data`. If any of&#xD;&#xA;&gt; these elements are empty,  it replaces them with the top level data&#xD;&#xA;&gt; attribute,  `pnewA$data`. In the case of `pA`,  both layer data elements&#xD;&#xA;&gt; are replaced with the default `D`. For `pnewA`,  since the default is&#xD;&#xA;&gt; empty,  we are still left with one non-empty and one empty.&#xD;&#xA;&gt; &#xD;&#xA;&gt; This happens at the beginning of `ggplot_build`,  in the `map_layout`&#xD;&#xA;&gt; function. I assume it is done like this because each layer is&#xD;&#xA;&gt; supposed to be associated with data,  and if it isn't,  then one falls&#xD;&#xA;&gt; back on the default (if it exists),  corresponding to&#xD;&#xA;&gt; `ggplot(data)`. There isn't really another candidate for default data.&#xD;&#xA;&gt; &#xD;&#xA;&gt; Now,  when the remaining functions in `gglot_build` act on the result&#xD;&#xA;&gt; of `map_layout` the data corresponding to the `annotation_custom`&#xD;&#xA;&gt; layer in `pnewA` quickly becomes `NULL` and stays `NULL`. Whereas in&#xD;&#xA;&gt; the case of the data in the annotation_custom for `pA`,  the value for&#xD;&#xA;&gt; data returned from `gglot_build` is&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &gt; str(pAbuild$data)&#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame':	4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ :'data.frame':	4 obs. of 5 variables: &lt;-- corresponds to annotation_custom&#xD;&#xA;&gt; ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &#xD;&#xA;&gt; where the second data frame corresponds to `annotation_custom`.&#xD;&#xA;&gt; However,  it does not appear that this data is actually used for the&#xD;&#xA;&gt; custom_annotation. Let's assume that it is not. The problem we had&#xD;&#xA;&gt; with `pnewA` was that there was no default data to replace the `NULL`&#xD;&#xA;&gt; `annotation_custom` layer data with. How about if we replace it with&#xD;&#xA;&gt; dummy data? If the data is not actually used it might work. We can do&#xD;&#xA;&gt; this as follows:&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```&#xD;&#xA;&gt; PATCH 2&#xD;&#xA;&gt; --- a/R/panel.r&#xD;&#xA;&gt; +++ b/R/panel.r&#xD;&#xA;&gt; @@ -47, 6 +47, 8 @@ train_layout &lt;- function(panel,  facet,  d&#xD;&#xA;&gt; # @param data list of data frames (one for each layer)&#xD;&#xA;&gt; # @param plot_data default plot data frame&#xD;&#xA;&gt; map_layout &lt;- function(panel,  facet,  data,  plot_data) { &#xD;&#xA;&gt; + if (is.waive(plot_data) || empty(plot_data))&#xD;&#xA;&gt; + plot_data = data.frame(dummy=c(1))&#xD;&#xA;&gt; lapply(data,  function(data) { &#xD;&#xA;&gt; if (is.waive(data)) data &lt;- plot_data&#xD;&#xA;&gt; facet_map_layout(facet,  data,  panel$layout)&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; &#xD;&#xA;&gt; This patch fixes `pnewA` in EXAMPLE 1,  which now shows the circle&#xD;&#xA;&gt; custom_annotation correctly. This confirms that the actual data used&#xD;&#xA;&gt; does not matter,  as long as it is non-empty. Furthermore,  note that&#xD;&#xA;&gt; the difference between `pnewAbuild` with and without PATCH 2 is just&#xD;&#xA;&gt; &#xD;&#xA;&gt; ```&#xD;&#xA;&gt; List of 3&#xD;&#xA;&gt; $ data :List of 2&#xD;&#xA;&gt; ..$ :'data.frame':	4 obs. of 5 variables:&#xD;&#xA;&gt; .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; .. ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; .. ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; .. ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; ..$ : NULL&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; vs&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; List of 3&#xD;&#xA;&gt; $ data :List of 2&#xD;&#xA;&gt; ..$ :'data.frame':	4 obs. of 5 variables:&#xD;&#xA;&gt; .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; .. ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; .. ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; .. ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; ..$ :'data.frame':	1 obs. of 2 variables:&#xD;&#xA;&gt; .. ..$ PANEL: int 1&#xD;&#xA;&gt; .. ..$ group: int 1&#xD;&#xA;&gt; ```&#xD;&#xA;&gt; i.e. the rest of the structure is the same.&#xD;&#xA;&gt; &#xD;&#xA;&gt; So,  we return to the question,  if it doesn't matter what data is used, &#xD;&#xA;&gt; why is any data at all needed here?&#xD;&#xA;&gt; &#xD;&#xA;&gt; Recall from our detailed discussion of PART 1,  we observed at the end&#xD;&#xA;&gt; that&#xD;&#xA;&gt; &#xD;&#xA;&gt; if (nrow(layer_data) == 0) return()&#xD;&#xA;&gt; &#xD;&#xA;&gt; was the reason that `print` was rejecting `ggplot_build(pnewA) =&#xD;&#xA;&gt; pnewAbuild`. This can be easily fixed by allowing `NULL` values. As&#xD;&#xA;&gt; discussed earlier,  the current code can deal with data frames with 0&#xD;&#xA;&gt; rows,  but not `NULL` values. PATCH 1 fixes this. If we apply this&#xD;&#xA;&gt; instead of PATCH 2,  we see that EXAMPLE 1 does not error out any more, &#xD;&#xA;&gt; but it does not render the annotation either.&#xD;&#xA;&gt; &#xD;&#xA;&gt; So,  we have the curious situation that ggplot does not actually use&#xD;&#xA;&gt; the data associated with the annotation custom layer (at least in&#xD;&#xA;&gt; EXAMPLE 1),  but still expects it to be there for rendering to&#xD;&#xA;&gt; happen. I think this requires looking into the rendering code to see&#xD;&#xA;&gt; why this is so. It looks to me like a bug.&#xD;&#xA;&gt; &#xD;&#xA;&gt; Actually,  if we take the `pAbuild` object and replace each of the two&#xD;&#xA;&gt; data frames in `pAbuild$data` with empty data frames,  or just `NULL`&#xD;&#xA;&gt; values,  and the plot still renders,  however,  if we zero out&#xD;&#xA;&gt; `pAbuild$plot$data`,  then the plot fails to render. So,  in fact,  it&#xD;&#xA;&gt; looks like the `data` attribute is not used at all for rendering, &#xD;&#xA;&gt; which makes it doubly puzzling that `pnewAbuild` does not work without&#xD;&#xA;&gt; PATCH 2.&#xD;&#xA;&gt; &#xD;&#xA;&gt; It seems that the function `grid.draw` from the `grid` package is used&#xD;&#xA;&gt; for the actual rendering,  but I'm not sure how it works.&#xD;&#xA;&gt; &#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; Detailed analysis for Part 2 begins&#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; &#xD;&#xA;&gt; The output of `layer_data` for `ggplot_build` run on `pA` for the&#xD;&#xA;&gt; first couple of functions is:&#xD;&#xA;&gt; &#xD;&#xA;&gt; [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 4 variables:&#xD;&#xA;&gt; ..$ r : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ f1 : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;&gt; ..$ f2 : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 4 variables:&#xD;&#xA;&gt; ..$ r : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ f1 : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;&gt; ..$ f2 : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; &#xD;&#xA;&gt; [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ x : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ x : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; &#xD;&#xA;&gt; The final result for `ggplot_build` on `pA` is&#xD;&#xA;&gt; &#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; &#xD;&#xA;&gt; The output for `ggplot_build` run on problem object `pnewA` for the&#xD;&#xA;&gt; first couple of functions is:&#xD;&#xA;&gt; &#xD;&#xA;&gt; [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 4 variables:&#xD;&#xA;&gt; ..$ r : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ f1 : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;&gt; ..$ f2 : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ : list()&#xD;&#xA;&gt; ..- attr(*,  &quot;dim&quot;)= int [ 1:2 ] 0 2&#xD;&#xA;&gt; ..- attr(*,  &quot;dimnames&quot;)=List of 2&#xD;&#xA;&gt; .. ..$ : NULL&#xD;&#xA;&gt; .. ..$ : chr [ 1:2 ] &quot;data&quot; &quot;PANEL&quot;&#xD;&#xA;&gt; &#xD;&#xA;&gt; [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ x : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ :'data.frame': 0 obs. of 0 variables&#xD;&#xA;&gt; &#xD;&#xA;&gt; The final result for `ggplot_build` on `pnewA` is&#xD;&#xA;&gt; &#xD;&#xA;&gt; List of 2&#xD;&#xA;&gt; $ :'data.frame': 4 obs. of 5 variables:&#xD;&#xA;&gt; ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;&gt; ..$ x : int [ 1:4 ] 2 2 1 1&#xD;&#xA;&gt; ..$ y : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;&gt; ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;&gt; ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&gt; $ : NULL&#xD;&#xA;&gt; &#xD;&#xA;&gt; As can clearly be seen from this,  things appear to go wrong from&#xD;&#xA;&gt; `map_layout`. I'm assuming if they go wrong,  then they continue to go&#xD;&#xA;&gt; wrong. Already by the second transformation on `pnewA`,  `dlapply&#xD;&#xA;&gt; (function(d,  p) p$compute_aesthetics(d,  plot))` the data frame is&#xD;&#xA;&gt; empty.&#xD;&#xA;&gt; &#xD;&#xA;&gt; In the case of `pA`,  the data is close to its final form after the&#xD;&#xA;&gt; second transformation - call to `dlapply (function(d,  p)&#xD;&#xA;&gt; p$compute_aesthetics(d,  plot))`.&#xD;&#xA;&gt; &#xD;&#xA;&gt; `map_layout` is in &quot;panel.r&quot;. This mostly calls `facet_map_layout` in&#xD;&#xA;&gt; &quot;facet-.r&quot;. This calls some `facet_map_layout` method. There are&#xD;&#xA;&gt; methods in &quot;facet-grid-.r&quot;,  &quot;facet-null.r&quot;,  and &quot;facet-wrap.r&quot;. In&#xD;&#xA;&gt; this case it turns out to call the method in &quot;facet-null.r&quot;,  since&#xD;&#xA;&gt; there is no actual faceting here.&#xD;&#xA;&gt; &#xD;&#xA;&gt; `map_layout` does the following operations:&#xD;&#xA;&gt; &#xD;&#xA;&gt; STEP 1: For each data attribute in `layers`,  `pA$layers[ [ i ] ]$data`,  it&#xD;&#xA;&gt; checks if it is a waiver object,  basically meaning the calling&#xD;&#xA;&gt; function should use the default value.&#xD;&#xA;&gt; &#xD;&#xA;&gt; if (is.waive(data))&#xD;&#xA;&gt; &#xD;&#xA;&gt; If so,  it then replaces the `pA$layers[ [ i ] ]$data` with the top level&#xD;&#xA;&gt; data attribute,  e.g. `pA$data`,  and passes down to&#xD;&#xA;&gt; `facet_map_layout.null` (in this case).&#xD;&#xA;&gt; &#xD;&#xA;&gt; STEP 2:If the data object constructed from above is either a waiver object or&#xD;&#xA;&gt; empty,  then it does a cbind and then returns the result&#xD;&#xA;&gt; &#xD;&#xA;&gt; if (is.waive(data) || empty(data))&#xD;&#xA;&gt; return(cbind(data,  PANEL = integer(0)))&#xD;&#xA;&gt; &#xD;&#xA;&gt; otherwise it adds a `PANEL` attribute to `data`.&#xD;&#xA;&gt; &#xD;&#xA;&gt; data$PANEL &lt;- 1L&#xD;&#xA;&gt; &#xD;&#xA;&gt; and returns.&#xD;&#xA;&gt; &#xD;&#xA;&gt; STEP 1 is the important step here.&#xD;&#xA;&gt; &#xD;&#xA;&gt; So to summarize what happens&#xD;&#xA;&gt; &#xD;&#xA;&gt; First,  extract the layer data.&#xD;&#xA;&gt; &#xD;&#xA;&gt; ggplot_build&#xD;&#xA;&gt; pnewA ----------------&gt; layer_data (lapply(pnewA$layers,  function(y) y$data))&#xD;&#xA;&gt; &#xD;&#xA;&gt; Second,  pass `layer_data` to `map_layout`,  replacing empty elements with&#xD;&#xA;&gt; pnewA$data.&#xD;&#xA;&gt; &#xD;&#xA;&gt; In this case of `pnewA`,  this results in one non-empty element,  and one&#xD;&#xA;&gt; empty element.&#xD;&#xA;&gt; &#xD;&#xA;&gt; In this case of `pA`,  this results in two non-empty elements.&#xD;&#xA;&gt; &#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; Detailed analysis for Part 2 ends&#xD;&#xA;&gt; ##################################################################&#xD;&#xA;&gt; &#xD;&#xA;&gt; Reply to this email directly or view it on GitHub.&#xD;&#xA;&gt; " />
      <Message Id="18244988" ParentId="756" UserId="2557767" Date="05/21/2013 22:06:01" Content="Here is an analysis of this issue (#756). Ggplot2 developers,  I'd&#xD;&#xA;appreciate comments,  corrections,  clarifications and other feedback.&#xD;&#xA;&#xD;&#xA;Bryan,  if you don't want to read the whole thing,  you can apply PATCH&#xD;&#xA;1 and PATCH 2,  though you really only need PATCH 2,  and check if it&#xD;&#xA;fixes things for you. It is intended as a workaround,  not a proper&#xD;&#xA;fix.&#xD;&#xA;&#xD;&#xA;For the record,  the original problem that brought me to this issue is&#xD;&#xA;illustrated by [ Positioning two legends independently in a faceted&#xD;&#xA;ggplot2 plot ](http://stackoverflow.com/q/16501999/350713). I checked&#xD;&#xA;that PATCH 1 and PATCH 2 fixed the issue described as Version 2&#xD;&#xA;(Version 1 was user error I think). The resulting (faceted) graph now&#xD;&#xA;has *two* identical legends,  one for each facet,  which is a bit&#xD;&#xA;annoying,  but it is better than nothing at all.&#xD;&#xA;&#xD;&#xA;Consider the following modified version of Bryan's code&#xD;&#xA;&#xD;&#xA;     ## EXAMPLE 1&#xD;&#xA;     library(&quot;ggplot2&quot;)&#xD;&#xA;     library(&quot;grid&quot;)&#xD;&#xA;     library(&quot;proto&quot;)&#xD;&#xA;     len = 2&#xD;&#xA;     d &lt;- data.frame(r = c( 6.279072,  2.995998,  8.193851,  11.274669), &#xD;&#xA;          f1 = c(rep(&quot;L&quot;,  len),  rep(&quot;H&quot;,  len)),  f2 = rep(c(&quot;A&quot;,  &quot;B&quot;),  len))&#xD;&#xA;&#xD;&#xA;     p &lt;- ggplot(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xD;&#xA;     p &lt;- p + geom_point()&#xD;&#xA;     pbuild = ggplot_build(p)&#xD;&#xA;     pA &lt;- p + annotation_custom(circleGrob())&#xD;&#xA;     pAbuild = ggplot_build(pA)&#xD;&#xA;&#xD;&#xA;     pnew &lt;- ggplot()&#xD;&#xA;     pnew &lt;- pnew + geom_point(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xD;&#xA;     pnewbuild = ggplot_build(pnew)&#xD;&#xA;     pnewA &lt;- pnew + annotation_custom(circleGrob())&#xD;&#xA;     pnewAbuild = ggplot_build(pnewA)&#xD;&#xA;&#xD;&#xA;PART 1: WHY PRINT GIVES AN ERROR FOR `pnewA`.&#xD;&#xA;&#xD;&#xA;Here `pA` and `pnewA` are the objects after the annotation has been added.&#xD;&#xA;Printing `pnewA` gives the same error as Bryan's example,  version 3,  namely&#xD;&#xA;&#xD;&#xA;     Error in if (nrow(layer_data) == 0) return() : argument is of length zero&#xD;&#xA;&#xD;&#xA;It is not difficult to see what is going wrong. A fix is less obvious.&#xD;&#xA;&#xD;&#xA;The object `pAbuild` and `pnewAbuild` resulting from the call to&#xD;&#xA;`ggplot_build` look like this. You can call `str` on them to see the&#xD;&#xA;structure. Here the data frames correspond to e.g. `str(pa$data[ [ 1 ] ])` and&#xD;&#xA;`str(pa$data[ [ 2 ] ])`.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;                                      ------------data frame NON NULL&#xD;&#xA;             |                       |&#xD;&#xA;pAbuild --- |                       |&#xD;&#xA;             ------data (list) ------|&#xD;&#xA;             |                       |&#xD;&#xA;             |                       |&#xD;&#xA;                                      ------------data frame NON NULL&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;                                      ------------data frame NON NULL&#xD;&#xA;             |                       |&#xD;&#xA;pnewAbuild- |                       |&#xD;&#xA;             ------data (list) ------|&#xD;&#xA;             |                       |&#xD;&#xA;             |                       |&#xD;&#xA;                                      ------------data frame NULL&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;ggplot2 does not like it if the any of the data frames in the `data`&#xD;&#xA;list are zero,  and it gives this error,  specifically,  from&#xD;&#xA;`ggplot_gtable` from inside the print function `print.ggplot` in&#xD;&#xA;&quot;plot-render.r&quot;. Detailed analysis follows&#xD;&#xA;&#xD;&#xA;##################################################################&#xD;&#xA;Detailed analysis for PART 1 begins&#xD;&#xA;##################################################################&#xD;&#xA;&#xD;&#xA;Say `p` is the object. Then we are passing it to `print.ggplot` (in&#xD;&#xA;&quot;plot-render.r&quot;).&#xD;&#xA;&#xD;&#xA;First `print.ggplot` calls `ggplot_build` (in &quot;plot-build.r&quot;). This is&#xD;&#xA;the line in `print.ggplot`:&#xD;&#xA;&#xD;&#xA;     data &lt;- ggplot_build(x)&#xD;&#xA;&#xD;&#xA;Then it calls `ggplot_gtable` (also in `plot-render.r`) on the&#xD;&#xA;resulting object,  `data`. This is the line in `print.ggplot`:&#xD;&#xA;&#xD;&#xA;     gtable &lt;- ggplot_gtable(data)&#xD;&#xA;&#xD;&#xA;`ggplot_gtable` begins with the lines (... means lines omitted)&#xD;&#xA;&#xD;&#xA;     gplot_gtable &lt;- function(data) { &#xD;&#xA;       ...&#xD;&#xA;       data &lt;- data$data&#xD;&#xA;       ...&#xD;&#xA;       build_grob &lt;- function(layer,  layer_data) { &#xD;&#xA;         if (nrow(layer_data) == 0) return()&#xD;&#xA;       ...&#xD;&#xA;       # List by layer,  list by panel&#xD;&#xA;       geom_grobs &lt;- Map(build_grob,  plot$layer,  data)&#xD;&#xA;&#xD;&#xA;So,  `data$data` is passed as the `layer_data` argument to&#xD;&#xA;`geom_grobs`. Recall that `data` here is `ggplot_build` applied to&#xD;&#xA;`p`. So the object we are looking at is&#xD;&#xA;&#xD;&#xA;     ggplot_build(p)$data&#xD;&#xA;&#xD;&#xA;This is a list of data frames. This is where the error is thrown, &#xD;&#xA;because `Map` calls `build_grob` on each component of the list&#xD;&#xA;`ggplot_build(p)$data`,  These components are data frames. For problem&#xD;&#xA;object `pnewA`, &#xD;&#xA;&#xD;&#xA;     ggplot_build(pnewA)$data&#xD;&#xA;&#xD;&#xA;contains two data frames,  one of which is empty (`NULL`).&#xD;&#xA;&#xD;&#xA;The code `if (nrow(layer_data) == 0) return()` checks if any of those&#xD;&#xA;data frames is empty,  and if so,  returns to the calling function. In&#xD;&#xA;other words,  if the data frame is non-null but has zero rows,  the&#xD;&#xA;function will return and the program will continue.&#xD;&#xA;&#xD;&#xA;In this case,  the data frame is `NULL`,  so the computation is&#xD;&#xA;&#xD;&#xA;     if (nrow(NULL) == 0) return()&#xD;&#xA;&#xD;&#xA;Since `nrow(NULL)` is `NULL`,  `(NULL == 0)` returns `logical(0)`, &#xD;&#xA;However,  `if` can only deal with `True` or `False`,  so it returns an&#xD;&#xA;error. `argument zero` refers to the fact that `logical(0)` is of&#xD;&#xA;length 0. It seems to me that this line should be modified to deal&#xD;&#xA;with `NULL` objects as well,  because there is no effective difference&#xD;&#xA;between `NULL` and an empty data set. We can do this with the&#xD;&#xA;following patch.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;PATCH 1&#xD;&#xA;--- a/R/plot-render.r&#xD;&#xA;+++ b/R/plot-render.r&#xD;&#xA;@@ -22, 7 +22, 7 @@ ggplot_gtable &lt;- function(data) { &#xD;&#xA;   theme &lt;- plot_theme(plot)&#xD;&#xA;   &#xD;&#xA;   build_grob &lt;- function(layer,  layer_data) { &#xD;&#xA;-    if (nrow(layer_data) == 0) return()&#xD;&#xA;+    if ((is.null(layer_data)) || (nrow(layer_data) == 0)) return()&#xD;&#xA; &#xD;&#xA;     dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xD;&#xA;       panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xD;&#xA;```&#xD;&#xA;##################################################################&#xD;&#xA;Detailed analysis for PART 1 ends&#xD;&#xA;##################################################################&#xD;&#xA;&#xD;&#xA;PART 2: ANNOTATION_CUSTOM LAYER HAS A NULL DATA ATTRIBUTE AND IS THAT A PROBLEM?&#xD;&#xA;&#xD;&#xA;We now look at what `ggplot_build` does.&#xD;&#xA;&#xD;&#xA;We can diagramatically represent the structure of `pA` and `pnewA` as follows.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;       ---data (default) D     ----------obj corresponding to geom_point ------- data NULL&#xD;&#xA;      |                       |&#xD;&#xA;      |                       |&#xD;&#xA;pA - |                       |&#xD;&#xA;       ---layers------------- |&#xD;&#xA;                              |&#xD;&#xA;                              |&#xD;&#xA;                              |&#xD;&#xA;                               ------------obj corresponding to geom_point ----- data NULL&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;        --data (default) NULL -----------obj corresponding to geom_point ------- data D&#xD;&#xA;        |                     |&#xD;&#xA;        |                     |&#xD;&#xA;pnewA- |                     |&#xD;&#xA;        ---layers-------------|&#xD;&#xA;                              |&#xD;&#xA;                              |&#xD;&#xA;                              |&#xD;&#xA;                               ----------obj corresponding to geom_point ------- data NULL&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Here the data objects in `pnewA` correspond to `pnewA$data`&#xD;&#xA;`pnewA$layers[ [ 1 ] ]$data` etc.&#xD;&#xA;&#xD;&#xA;When ggplot_build takes e.g. `pA` as an argument,  it first selects the&#xD;&#xA;layer data elements as a list,  calling this `layer_data`. If any of&#xD;&#xA;these elements are empty,  it replaces them with the top level data&#xD;&#xA;attribute,  `pnewA$data`. In the case of `pA`,  both layer data elements&#xD;&#xA;are replaced with the default `D`. For `pnewA`,  since the default is&#xD;&#xA;empty,  we are still left with one non-empty and one empty.&#xD;&#xA;&#xD;&#xA;This happens at the beginning of `ggplot_build`,  in the `map_layout`&#xD;&#xA;function.  I assume it is done like this because each layer is&#xD;&#xA;supposed to be associated with data,  and if it isn't,  then one falls&#xD;&#xA;back on the default (if it exists),  corresponding to&#xD;&#xA;`ggplot(data)`. There isn't really another candidate for default data.&#xD;&#xA;&#xD;&#xA;Now,  when the remaining functions in `gglot_build` act on the result&#xD;&#xA;of `map_layout` the data corresponding to the `annotation_custom`&#xD;&#xA;layer in `pnewA` quickly becomes `NULL` and stays `NULL`. Whereas in&#xD;&#xA;the case of the data in the annotation_custom for `pA`,  the value for&#xD;&#xA;data returned from `gglot_build` is&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; str(pAbuild$data)&#xD;&#xA;List of 2&#xD;&#xA;  $ :'data.frame':	4 obs. of  5 variables:&#xD;&#xA;   ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;   ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;   ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;   ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;   ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;  $ :'data.frame':	4 obs. of  5 variables: &lt;-- corresponds to annotation_custom&#xD;&#xA;   ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;   ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;   ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;   ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;   ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;where the second data frame corresponds to `annotation_custom`.&#xD;&#xA;However,  it does not appear that this data is actually used for the&#xD;&#xA;custom_annotation. Let's assume that it is not. The problem we had&#xD;&#xA;with `pnewA` was that there was no default data to replace the `NULL`&#xD;&#xA;`annotation_custom` layer data with. How about if we replace it with&#xD;&#xA;dummy data? If the data is not actually used it might work. We can do&#xD;&#xA;this as follows:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;PATCH 2&#xD;&#xA;--- a/R/panel.r&#xD;&#xA;+++ b/R/panel.r&#xD;&#xA;@@ -47, 6 +47, 8 @@ train_layout &lt;- function(panel,  facet,  d&#xD;&#xA;  # @param data list of data frames (one for each layer)&#xD;&#xA;  # @param plot_data default plot data frame&#xD;&#xA;  map_layout &lt;- function(panel,  facet,  data,  plot_data) { &#xD;&#xA;+  if (is.waive(plot_data) || empty(plot_data))&#xD;&#xA;+    plot_data = data.frame(dummy=c(1))&#xD;&#xA;    lapply(data,  function(data) { &#xD;&#xA;      if (is.waive(data)) data &lt;- plot_data&#xD;&#xA;      facet_map_layout(facet,  data,  panel$layout)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This patch fixes `pnewA` in EXAMPLE 1,  which now shows the circle&#xD;&#xA;custom_annotation correctly. This confirms that the actual data used&#xD;&#xA;does not matter,  as long as it is non-empty. Furthermore,  note that&#xD;&#xA;the difference between `pnewAbuild` with and without PATCH 2 is just&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;List of 3&#xD;&#xA;  $ data :List of 2&#xD;&#xA;   ..$ :'data.frame':	4 obs. of  5 variables:&#xD;&#xA;   .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;   .. ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;   .. ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;   .. ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;   .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;   ..$ : NULL&#xD;&#xA;```&#xD;&#xA;vs&#xD;&#xA;```&#xD;&#xA;List of 3&#xD;&#xA;  $ data :List of 2&#xD;&#xA;   ..$ :'data.frame':	4 obs. of  5 variables:&#xD;&#xA;   .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;   .. ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;   .. ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;   .. ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;   .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;   ..$ :'data.frame':	1 obs. of  2 variables:&#xD;&#xA;   .. ..$ PANEL: int 1&#xD;&#xA;   .. ..$ group: int 1&#xD;&#xA;```&#xD;&#xA;i.e. the rest of the structure is the same.&#xD;&#xA;&#xD;&#xA;So,  we return to the question,  if it doesn't matter what data is used, &#xD;&#xA;why is any data at all needed here?&#xD;&#xA;&#xD;&#xA;Recall from our detailed discussion of PART 1,  we observed at the end&#xD;&#xA;that&#xD;&#xA;&#xD;&#xA;     if (nrow(layer_data) == 0) return()&#xD;&#xA;&#xD;&#xA;was the reason that `print` was rejecting `ggplot_build(pnewA) =&#xD;&#xA;pnewAbuild`. This can be easily fixed by allowing `NULL` values. As&#xD;&#xA;discussed earlier,  the current code can deal with data frames with 0&#xD;&#xA;rows,  but not `NULL` values. PATCH 1 fixes this. If we apply this&#xD;&#xA;instead of PATCH 2,  we see that EXAMPLE 1 does not error out any more, &#xD;&#xA;but it does not render the annotation either.&#xD;&#xA;&#xD;&#xA;So,  we have the curious situation that ggplot does not actually use&#xD;&#xA;the data associated with the annotation custom layer (at least in&#xD;&#xA;EXAMPLE 1),  but still expects it to be there for rendering to&#xD;&#xA;happen. I think this requires looking into the rendering code to see&#xD;&#xA;why this is so. It looks to me like a bug.&#xD;&#xA;&#xD;&#xA;Actually,  if we take the `pAbuild` object and replace each of the two&#xD;&#xA;data frames in `pAbuild$data` with empty data frames,  or just `NULL`&#xD;&#xA;values,  and the plot still renders,  however,  if we zero out&#xD;&#xA;`pAbuild$plot$data`,  then the plot fails to render. So,  in fact,  it&#xD;&#xA;looks like the `data` attribute is not used at all for rendering, &#xD;&#xA;which makes it doubly puzzling that `pnewAbuild` does not work without&#xD;&#xA;PATCH 2.&#xD;&#xA;&#xD;&#xA;It seems that the function `grid.draw` from the `grid` package is used&#xD;&#xA;for the actual rendering,  but I'm not sure how it works.&#xD;&#xA;&#xD;&#xA;##################################################################&#xD;&#xA;Detailed analysis for Part 2 begins&#xD;&#xA;##################################################################&#xD;&#xA;&#xD;&#xA;The output of `layer_data` for `ggplot_build` run on `pA` for the&#xD;&#xA;first couple of functions is:&#xD;&#xA;&#xD;&#xA;     [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xD;&#xA;     List of 2&#xD;&#xA;      $ :'data.frame':       4 obs. of  4 variables:&#xD;&#xA;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xD;&#xA;      $ :'data.frame':       4 obs. of  4 variables:&#xD;&#xA;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xD;&#xA;&#xD;&#xA;     [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xD;&#xA;     List of 2&#xD;&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xD;&#xA;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xD;&#xA;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&#xD;&#xA;The final result for `ggplot_build` on `pA` is&#xD;&#xA;&#xD;&#xA;     List of 2&#xD;&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xD;&#xA;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xD;&#xA;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;&#xD;&#xA;The output for `ggplot_build` run on problem object `pnewA` for the&#xD;&#xA;first couple of functions is:&#xD;&#xA;&#xD;&#xA;     [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xD;&#xA;     List of 2&#xD;&#xA;      $ :'data.frame':       4 obs. of  4 variables:&#xD;&#xA;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xD;&#xA;      $ : list()&#xD;&#xA;       ..- attr(*,  &quot;dim&quot;)= int [ 1:2 ] 0 2&#xD;&#xA;       ..- attr(*,  &quot;dimnames&quot;)=List of 2&#xD;&#xA;       .. ..$ : NULL&#xD;&#xA;       .. ..$ : chr [ 1:2 ] &quot;data&quot; &quot;PANEL&quot;&#xD;&#xA;&#xD;&#xA;     [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xD;&#xA;     List of 2&#xD;&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xD;&#xA;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xD;&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xD;&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;      $ :'data.frame':       0 obs. of  0 variables&#xD;&#xA;&#xD;&#xA;The final result for `ggplot_build` on `pnewA` is&#xD;&#xA;&#xD;&#xA;     List of 2&#xD;&#xA;      $ :'data.frame':       4 obs. of  5 variables:&#xD;&#xA;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xD;&#xA;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xD;&#xA;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xD;&#xA;       ..$ group : int [ 1:4 ] 1 2 1 2&#xD;&#xA;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xD;&#xA;      $ : NULL&#xD;&#xA;&#xD;&#xA;As can clearly be seen from this,  things appear to go wrong from&#xD;&#xA;`map_layout`. I'm assuming if they go wrong,  then they continue to go&#xD;&#xA;wrong. Already by the second transformation on `pnewA`,  `dlapply&#xD;&#xA;(function(d,  p) p$compute_aesthetics(d,  plot))` the data frame is&#xD;&#xA;empty.&#xD;&#xA;&#xD;&#xA;In the case of `pA`,  the data is close to its final form after the&#xD;&#xA;second transformation - call to `dlapply (function(d,  p)&#xD;&#xA;p$compute_aesthetics(d,  plot))`.&#xD;&#xA;&#xD;&#xA;`map_layout` is in &quot;panel.r&quot;. This mostly calls `facet_map_layout` in&#xD;&#xA;&quot;facet-.r&quot;. This calls some `facet_map_layout` method. There are&#xD;&#xA;methods in &quot;facet-grid-.r&quot;,  &quot;facet-null.r&quot;,  and &quot;facet-wrap.r&quot;. In&#xD;&#xA;this case it turns out to call the method in &quot;facet-null.r&quot;,  since&#xD;&#xA;there is no actual faceting here.&#xD;&#xA;&#xD;&#xA;`map_layout` does the following operations:&#xD;&#xA;&#xD;&#xA;STEP 1: For each data attribute in `layers`,  `pA$layers[ [ i ] ]$data`,  it&#xD;&#xA;checks if it is a waiver object,  basically meaning the calling&#xD;&#xA;function should use the default value.&#xD;&#xA;&#xD;&#xA;     if (is.waive(data))&#xD;&#xA;&#xD;&#xA;If so,  it then replaces the `pA$layers[ [ i ] ]$data` with the top level&#xD;&#xA;data attribute,  e.g. `pA$data`,  and passes down to&#xD;&#xA;`facet_map_layout.null` (in this case).&#xD;&#xA;&#xD;&#xA;STEP 2:If the data object constructed from above is either a waiver object or&#xD;&#xA;empty,  then it does a cbind and then returns the result&#xD;&#xA;&#xD;&#xA;     if (is.waive(data) || empty(data))&#xD;&#xA;       return(cbind(data,  PANEL = integer(0)))&#xD;&#xA;&#xD;&#xA;otherwise it adds a `PANEL` attribute to `data`.&#xD;&#xA;&#xD;&#xA;     data$PANEL &lt;- 1L&#xD;&#xA;&#xD;&#xA;and returns.&#xD;&#xA;&#xD;&#xA;STEP 1 is the important step here.&#xD;&#xA;&#xD;&#xA;So to summarize what happens&#xD;&#xA;&#xD;&#xA;First,  extract the layer data.&#xD;&#xA;&#xD;&#xA;            ggplot_build&#xD;&#xA;     pnewA ----------------&gt; layer_data (lapply(pnewA$layers,  function(y) y$data))&#xD;&#xA;&#xD;&#xA;Second,  pass `layer_data` to `map_layout`,  replacing empty elements with&#xD;&#xA;pnewA$data.&#xD;&#xA;&#xD;&#xA;In this case of `pnewA`,  this results in one non-empty element,  and one&#xD;&#xA;empty element.&#xD;&#xA;&#xD;&#xA;In this case of `pA`,  this results in two non-empty elements.&#xD;&#xA;&#xD;&#xA;##################################################################&#xD;&#xA;Detailed analysis for Part 2 ends&#xD;&#xA;##################################################################" />
      <Message Id="18358979" ParentId="756" UserId="86978" Date="05/23/2013 17:32:38" Content="@fmitha Thanks for the very detailed analysis. I don't get errors running your example code -- was that addressed by your fix for #587? So that seems to make PATCH 1 unnecessary.&#xD;&#xA;&#xD;&#xA;As for the second problem,  the circle not rendering for `pnewA`,  PATCH 2 does seem to make the circle render properly - but I think adding in the dummy data at that stage isn't quite the right solution. This is because the `data` object in `ggplot_build()` will from that point on have some incorrect data in it. Also,  I believe it doesn't handle cases where the inherited data set has columns,  but no rows. For example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p3 &lt;- ggplot(data.frame(foo = numeric(0)))&#xD;&#xA;p3 &lt;- p3 + geom_point(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xD;&#xA;p3 + annotation_custom(circleGrob())&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I don't know the exact source of the bug,  but I think it should be possible to have a more targeted bug fix.&#xD;&#xA;&#xD;&#xA;There is a bug in `&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```" />
      <Message Id="18360523" ParentId="756" UserId="2557767" Date="05/23/2013 17:57:39" Content="Hi Faheem - thanks for taking a look at this problem. I've replied on the&#xA;Github issue:&#xA;https://github.com/hadley/ggplot2/issues/756&#xA;&#xA;&#xA;&#xA;&#xA;On Tue,  May 21,  2013 at 4:38 PM,  Faheem Mitha &lt;faheem@faheem.info&gt; wrote:&#xA;&#xA;&gt;&#xA;&gt; Here is an analysis of this issue (#756). Ggplot2 developers,  I'd&#xA;&gt; appreciate comments,  corrections,  clarifications and other feedback.&#xA;&gt;&#xA;&gt; Bryan,  if you don't want to read the whole thing,  you can apply PATCH&#xA;&gt; 1 and PATCH 2,  though you really only need PATCH 2,  and check if it&#xA;&gt; fixes things for you. It is intended as a workaround,  not a proper&#xA;&gt; fix.&#xA;&gt;&#xA;&gt; For the record,  the original problem that brought me to this issue is&#xA;&gt; illustrated by [ Positioning two legends independently in a faceted&#xA;&gt; ggplot2 plot ](http://stackoverflow.**com/q/16501999/350713&lt;http://stackoverflow.com/q/16501999/350713&gt;).&#xA;&gt; I checked&#xA;&gt; that PATCH 1 and PATCH 2 fixed the issue described as Version 2&#xA;&gt; (Version 1 was user error I think). The resulting (faceted) graph now&#xA;&gt; has *two* identical legends,  one for each facet,  which is a bit&#xA;&gt; annoying,  but it is better than nothing at all.&#xA;&gt;&#xA;&gt; Consider the following modified version of Bryan's code&#xA;&gt;&#xA;&gt;     ## EXAMPLE 1&#xA;&gt;     library(&quot;ggplot2&quot;)&#xA;&gt;     library(&quot;grid&quot;)&#xA;&gt;     library(&quot;proto&quot;)&#xA;&gt;     len = 2&#xA;&gt;     d &lt;- data.frame(r = c( 6.279072,  2.995998,  8.193851,  11.274669), &#xA;&gt;          f1 = c(rep(&quot;L&quot;,  len),  rep(&quot;H&quot;,  len)),  f2 = rep(c(&quot;A&quot;,  &quot;B&quot;),  len))&#xA;&gt;&#xA;&gt;     p &lt;- ggplot(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xA;&gt;     p &lt;- p + geom_point()&#xA;&gt;     pbuild = ggplot_build(p)&#xA;&gt;     pA &lt;- p + annotation_custom(circleGrob()**)&#xA;&gt;     pAbuild = ggplot_build(pA)&#xA;&gt;&#xA;&gt;     pnew &lt;- ggplot()&#xA;&gt;     pnew &lt;- pnew + geom_point(data = d,  aes(x = f1,  y = r,  color = f2, &#xA;&gt; group = f2))&#xA;&gt;     pnewbuild = ggplot_build(pnew)&#xA;&gt;     pnewA &lt;- pnew + annotation_custom(circleGrob()**)&#xA;&gt;     pnewAbuild = ggplot_build(pnewA)&#xA;&gt;&#xA;&gt; PART 1: WHY PRINT GIVES AN ERROR FOR `pnewA`.&#xA;&gt; ==============================**===============&#xA;&gt;&#xA;&gt; Here `pA` and `pnewA` are the objects after the annotation has been added.&#xA;&gt; Printing `pnewA` gives the same error as Bryan's example,  version 3,  namely&#xA;&gt;&#xA;&gt;     Error in if (nrow(layer_data) == 0) return() : argument is of length&#xA;&gt; zero&#xA;&gt;&#xA;&gt; It is not difficult to see what is going wrong. A fix is less obvious.&#xA;&gt;&#xA;&gt; The object `pAbuild` and `pnewAbuild` resulting from the call to&#xA;&gt; `ggplot_build` look like this. You can call `str` on them to see the&#xA;&gt; structure. Here the data frames correspond to e.g. `str(pa$data[ [ 1 ] ])` and&#xA;&gt; `str(pa$data[ [ 2 ] ])`.&#xA;&gt;&#xA;&gt; ```&#xA;&gt;                                      ------------data frame NON NULL&#xA;&gt;             |                       |&#xA;&gt; pAbuild --- |                       |&#xA;&gt;             ------data (list) ------|&#xA;&gt;             |                       |&#xA;&gt;             |                       |&#xA;&gt;                                      ------------data frame NON NULL&#xA;&gt;&#xA;&gt;&#xA;&gt;                                      ------------data frame NON NULL&#xA;&gt;             |                       |&#xA;&gt; pnewAbuild- |                       |&#xA;&gt;             ------data (list) ------|&#xA;&gt;             |                       |&#xA;&gt;             |                       |&#xA;&gt;                                      ------------data frame NULL&#xA;&gt; ```&#xA;&gt;&#xA;&gt; ggplot2 does not like it if the any of the data frames in the `data`&#xA;&gt; list are zero,  and it gives this error,  specifically,  from&#xA;&gt; `ggplot_gtable` from inside the print function `print.ggplot` in&#xA;&gt; &quot;plot-render.r&quot;. Detailed analysis follows&#xA;&gt;&#xA;&gt; ##############################**##############################**######&#xA;&gt; Detailed analysisb for PART 1 begins&#xA;&gt; ##############################**##############################**######&#xA;&gt;&#xA;&gt; Say `p` is the object. Then we are passing it to `print.ggplot` (in&#xA;&gt; &quot;plot-render.r&quot;).&#xA;&gt;&#xA;&gt; First `print.ggplot` calls `ggplot_build` (in &quot;plot-build.r&quot;). This is&#xA;&gt; the line in `print.ggplot`:&#xA;&gt;&#xA;&gt;     data &lt;- ggplot_build(x)&#xA;&gt;&#xA;&gt; Then it calls `ggplot_gtable` (also in `plot-render.r`) on the&#xA;&gt; resulting object,  `data`. This is the line in `print.ggplot`:&#xA;&gt;&#xA;&gt;     gtable &lt;- ggplot_gtable(data)&#xA;&gt;&#xA;&gt; `ggplot_gtable` begins with the lines (... means lines omitted)&#xA;&gt;&#xA;&gt;     gplot_gtable &lt;- function(data) { &#xA;&gt;       ...&#xA;&gt;       data &lt;- data$data&#xA;&gt;       ...&#xA;&gt;       build_grob &lt;- function(layer,  layer_data) { &#xA;&gt;         if (nrow(layer_data) == 0) return()&#xA;&gt;       ...&#xA;&gt;       # List by layer,  list by panel&#xA;&gt;       geom_grobs &lt;- Map(build_grob,  plot$layer,  data)&#xA;&gt;&#xA;&gt; So,  `data$data` is passed as the `layer_data` argument to&#xA;&gt; `geom_grobs`. Recall that `data` here is `ggplot_build` applied to&#xA;&gt; `p`. So the object we are looking at is&#xA;&gt;&#xA;&gt;     ggplot_build(p)$data&#xA;&gt;&#xA;&gt; This is a list of data frames. This is where the error is thrown, &#xA;&gt; because `Map` calls `build_grob` on each component of the list&#xA;&gt; `ggplot_build(p)$data`,  These components are data frames. For problem&#xA;&gt; object `pnewA`, &#xA;&gt;&#xA;&gt;     ggplot_build(pnewA)$data&#xA;&gt;&#xA;&gt; contains two data frames,  one of which is empty (`NULL`).&#xA;&gt;&#xA;&gt; The code `if (nrow(layer_data) == 0) return()` checks if any of those&#xA;&gt; data frames is empty,  and if so,  returns to the calling function. In&#xA;&gt; other words,  if the data frame is non-null but has zero rows,  the&#xA;&gt; function will return and the program will continue.&#xA;&gt;&#xA;&gt; In this case,  the data frame is `NULL`,  so the computation is&#xA;&gt;&#xA;&gt;     if (nrow(NULL) == 0) return()&#xA;&gt;&#xA;&gt; Since `nrow(NULL)` is `NULL`,  `(NULL == 0)` returns `logical(0)`, &#xA;&gt; However,  `if` can only deal with `True` or `False`,  so it returns an&#xA;&gt; error. `argument zero` refers to the fact that `logical(0)` is of&#xA;&gt; length 0. It seems to me that this line should be modified to deal&#xA;&gt; with `NULL` objects as well,  because there is no effective difference&#xA;&gt; between `NULL` and an empty data set. We can do this with the&#xA;&gt; following patch.&#xA;&gt;&#xA;&gt; ```&#xA;&gt; PATCH 1&#xA;&gt; --- a/R/plot-render.r&#xA;&gt; +++ b/R/plot-render.r&#xA;&gt; @@ -22, 7 +22, 7 @@ ggplot_gtable &lt;- function(data) { &#xA;&gt;    theme &lt;- plot_theme(plot)&#xA;&gt;&#xA;&gt;    build_grob &lt;- function(layer,  layer_data) { &#xA;&gt; -    if (nrow(layer_data) == 0) return()&#xA;&gt; +    if ((is.null(layer_data)) || (nrow(layer_data) == 0)) return()&#xA;&gt;&#xA;&gt;      dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xA;&gt;        panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xA;&gt; ```&#xA;&gt;&#xA;&gt; ##############################**##############################**######&#xA;&gt; Detailed analysis for PART 1 ends&#xA;&gt; ##############################**##############################**######&#xA;&gt;&#xA;&gt; PART 2: ANNOTATION_CUSTOM LAYER HAS A NULL DATA ATTRIBUTE AND IS THAT A&#xA;&gt; PROBLEM?&#xA;&gt;&#xA;&gt; We now look at what `ggplot_build` does.&#xA;&gt;&#xA;&gt; We can diagramatically represent the structure of `pA` and `pnewA` as&#xA;&gt; follows.&#xA;&gt;&#xA;&gt; ```&#xA;&gt;       ---data (default) D     ----------obj corresponding to geom_point&#xA;&gt; ------- data NULL&#xA;&gt;      |                       |&#xA;&gt;      |                       |&#xA;&gt; pA - |                       |&#xA;&gt;       ---layers------------- |&#xA;&gt;                              |&#xA;&gt;                              |&#xA;&gt;                              |&#xA;&gt;                               ------------obj corresponding to geom_point&#xA;&gt; ----- data NULL&#xA;&gt;&#xA;&gt;&#xA;&gt;        --data (default) NULL -----------obj corresponding to geom_point&#xA;&gt; ------- data D&#xA;&gt;        |                     |&#xA;&gt;        |                     |&#xA;&gt; pnewA- |                     |&#xA;&gt;        ---layers-------------|&#xA;&gt;                              |&#xA;&gt;                              |&#xA;&gt;                              |&#xA;&gt;                               ----------obj corresponding to geom_point&#xA;&gt; ------- data NULL&#xA;&gt; ```&#xA;&gt;&#xA;&gt; Here the data objects in `pnewA` correspond to `pnewA$data`&#xA;&gt; `pnewA$layers[ [ 1 ] ]$data` etc.&#xA;&gt;&#xA;&gt; When ggplot_build takes e.g. `pA` as an argument,  it first selects the&#xA;&gt; layer data elements as a list,  calling this `layer_data`. If any of&#xA;&gt; these elements are empty,  it replaces them with the top level data&#xA;&gt; attribute,  `pnewA$data`. In the case of `pA`,  both layer data elements&#xA;&gt; are replaced with the default `D`. For `pnewA`,  since the default is&#xA;&gt; empty,  we are still left with one non-empty and one empty.&#xA;&gt;&#xA;&gt; This happens at the beginning of `ggplot_build`,  in the `map_layout`&#xA;&gt; function.  I assume it is done like this because each layer is&#xA;&gt; supposed to be associated with data,  and if it isn't,  then one falls&#xA;&gt; back on the default (if it exists),  corresponding to&#xA;&gt; `ggplot(data)`. There isn't really another candidate for default data.&#xA;&gt;&#xA;&gt; Now,  when the remaining functions in `gglot_build` act on the result&#xA;&gt; of `map_layout` the data corresponding to the `annotation_custom`&#xA;&gt; layer in `pnewA` quickly becomes `NULL` and stays `NULL`. Whereas in&#xA;&gt; the case of the data in the annotation_custom for `pA`,  the value for&#xA;&gt; data returned from `gglot_build` is&#xA;&gt;&#xA;&gt; ```&#xA;&gt;&#xA;&gt;&gt; str(pAbuild$data)&#xA;&gt;&gt;&#xA;&gt; List of 2&#xA;&gt;  $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;   ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;   ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;   ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;   ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;   ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;  $ :'data.frame':       4 obs. of  5 variables: &lt;-- corresponds to&#xA;&gt; annotation_custom&#xA;&gt;   ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;   ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;   ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;   ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;   ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt; ```&#xA;&gt;&#xA;&gt; where the second data frame corresponds to `annotation_custom`.&#xA;&gt; However,  it does not appear that this data is actually used for the&#xA;&gt; custom_annotation. Let's assume that it is not. The problem we had&#xA;&gt; with `pnewA` was that there was no default data to replace the `NULL`&#xA;&gt; `annotation_custom` layer data with. How about if we replace it with&#xA;&gt; dummy data? If the data is not actually used it might work. We can do&#xA;&gt; this as follows:&#xA;&gt;&#xA;&gt; ```&#xA;&gt; PATCH 2&#xA;&gt; --- a/R/panel.r&#xA;&gt; +++ b/R/panel.r&#xA;&gt; @@ -47, 6 +47, 8 @@ train_layout &lt;- function(panel,  facet,  d&#xA;&gt;  # @param data list of data frames (one for each layer)&#xA;&gt;  # @param plot_data default plot data frame&#xA;&gt;  map_layout &lt;- function(panel,  facet,  data,  plot_data) { &#xA;&gt; +  if (is.waive(plot_data) || empty(plot_data))&#xA;&gt; +    plot_data = data.frame(dummy=c(1))&#xA;&gt;    lapply(data,  function(data) { &#xA;&gt;      if (is.waive(data)) data &lt;- plot_data&#xA;&gt;      facet_map_layout(facet,  data,  panel$layout)&#xA;&gt; ```&#xA;&gt;&#xA;&gt; This patch fixes `pnewA` in EXAMPLE 1,  which now shows the circle&#xA;&gt; custom_annotation correctly. This confirms that the actual data used&#xA;&gt; does not matter,  as long as it is non-empty. Furthermore,  note that&#xA;&gt; the difference between `pnewAbuild` with and without PATCH 2 is just&#xA;&gt;&#xA;&gt; ```&#xA;&gt; List of 3&#xA;&gt;  $ data :List of 2&#xA;&gt;   ..$ :'data.frame':    4 obs. of  5 variables:&#xA;&gt;   .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;   .. ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;   .. ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;   .. ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;   .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;   ..$ : NULL&#xA;&gt; ```&#xA;&gt; vs&#xA;&gt; ```&#xA;&gt; List of 3&#xA;&gt;  $ data :List of 2&#xA;&gt;   ..$ :'data.frame':    4 obs. of  5 variables:&#xA;&gt;   .. ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;   .. ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;   .. ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;   .. ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;   .. ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;   ..$ :'data.frame':    1 obs. of  2 variables:&#xA;&gt;   .. ..$ PANEL: int 1&#xA;&gt;   .. ..$ group: int 1&#xA;&gt; ```&#xA;&gt; i.e. the rest of the structure is the same.&#xA;&gt;&#xA;&gt; So,  we return to the question,  if it doesn't matter what data is used, &#xA;&gt; why is any data at all needed here?&#xA;&gt;&#xA;&gt; Recall from our detailed discussion of PART 1,  we observed at the end&#xA;&gt; that&#xA;&gt;&#xA;&gt;     if (nrow(layer_data) == 0) return()&#xA;&gt;&#xA;&gt; was the reason that `print` was rejecting `ggplot_build(pnewA) =&#xA;&gt; pnewAbuild`. This can be easily fixed by allowing `NULL` values. As&#xA;&gt; discussed earlier,  the current code can deal with data frames with 0&#xA;&gt; rows,  but not `NULL` values. PATCH 1 fixes this. If we apply this&#xA;&gt; instead of PATCH 2,  we see that EXAMPLE 1 does not error out any more, &#xA;&gt; but it does not render the annotation either.&#xA;&gt;&#xA;&gt; So,  we have the curious situation that ggplot does not actually use&#xA;&gt; the data associated with the annotation custom layer (at least in&#xA;&gt; EXAMPLE 1),  but still expects it to be there for rendering to&#xA;&gt; happen. I think this requires looking into the rendering code to see&#xA;&gt; why this is so. It looks to me like a bug.&#xA;&gt;&#xA;&gt; Actually,  if we take the `pAbuild` object and replace each of the two&#xA;&gt; data frames in `pAbuild$data` with empty data frames,  or just `NULL`&#xA;&gt; values,  and the plot still renders,  however,  if we zero out&#xA;&gt; `pAbuild$plot$data`,  then the plot fails to render. So,  in fact,  it&#xA;&gt; looks like the `data` attribute is not used at all for rendering, &#xA;&gt; which makes it doubly puzzling that `pnewAbuild` does not work without&#xA;&gt; PATCH 2.&#xA;&gt;&#xA;&gt; It seems that the function `grid.draw` from the `grid` package is used&#xA;&gt; for the actual rendering,  but I'm not sure how it works.&#xA;&gt;&#xA;&gt; ##############################**##############################**######&#xA;&gt; Detailed analysis for Part 2 begins&#xA;&gt; ##############################**##############################**######&#xA;&gt;&#xA;&gt; The output of `layer_data` for `ggplot_build` run on `pA` for the&#xA;&gt; first couple of functions is:&#xA;&gt;&#xA;&gt;     [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xA;&gt;     List of 2&#xA;&gt;      $ :'data.frame':       4 obs. of  4 variables:&#xA;&gt;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;&gt;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xA;&gt;      $ :'data.frame':       4 obs. of  4 variables:&#xA;&gt;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;&gt;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xA;&gt;&#xA;&gt;     [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xA;&gt;     List of 2&#xA;&gt;      $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;&gt;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;      $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;&gt;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;&#xA;&gt; The final result for `ggplot_build` on `pA` is&#xA;&gt;&#xA;&gt;     List of 2&#xA;&gt;      $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;      $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;&#xA;&gt; The output for `ggplot_build` run on problem object `pnewA` for the&#xA;&gt; first couple of functions is:&#xA;&gt;&#xA;&gt;     [ 1 ] &quot;map_layout(panel,  plot$facet,  layer_data,  plot$data) finished&quot;&#xA;&gt;     List of 2&#xA;&gt;      $ :'data.frame':       4 obs. of  4 variables:&#xA;&gt;       ..$ r    : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ f1   : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;&gt;       ..$ f2   : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ PANEL: int [ 1:4 ] 1 1 1 1&#xA;&gt;      $ : list()&#xA;&gt;       ..- attr(*,  &quot;dim&quot;)= int [ 1:2 ] 0 2&#xA;&gt;       ..- attr(*,  &quot;dimnames&quot;)=List of 2&#xA;&gt;       .. ..$ : NULL&#xA;&gt;       .. ..$ : chr [ 1:2 ] &quot;data&quot; &quot;PANEL&quot;&#xA;&gt;&#xA;&gt;     [ 1 ] &quot;dlapply (function(d,  p) p$compute_aesthetics(d,  plot)) finished&quot;&#xA;&gt;     List of 2&#xA;&gt;      $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;       ..$ x     : Factor w/ 2 levels &quot;H&quot;, &quot;L&quot; :  2 2 1 1&#xA;&gt;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ colour: Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ group : Factor w/ 2 levels &quot;A&quot;, &quot;B&quot; :  1 2 1 2&#xA;&gt;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;      $ :'data.frame':       0 obs. of  0 variables&#xA;&gt;&#xA;&gt; The final result for `ggplot_build` on `pnewA` is&#xA;&gt;&#xA;&gt;     List of 2&#xA;&gt;      $ :'data.frame':       4 obs. of  5 variables:&#xA;&gt;       ..$ colour: chr [ 1:4 ] &quot;#F8766D&quot; &quot;#00BFC4&quot; &quot;#F8766D&quot; &quot;#00BFC4&quot;&#xA;&gt;       ..$ x     : int [ 1:4 ] 2 2 1 1&#xA;&gt;       ..$ y     : num [ 1:4 ] 6.28 3 8.19 11.27&#xA;&gt;       ..$ group : int [ 1:4 ] 1 2 1 2&#xA;&gt;       ..$ PANEL : int [ 1:4 ] 1 1 1 1&#xA;&gt;      $ : NULL&#xA;&gt;&#xA;&gt; As can clearly be seen from this,  things appear to go wrong from&#xA;&gt; `map_layout`. I'm assuming if they go wrong,  then they continue to go&#xA;&gt; wrong. Already by the second transformation on `pnewA`,  `dlapply&#xA;&gt; (function(d,  p) p$compute_aesthetics(d,  plot))` the data frame is&#xA;&gt; empty.&#xA;&gt;&#xA;&gt; In the case of `pA`,  the data is close to its final form after the&#xA;&gt; second transformation - call to `dlapply (function(d,  p)&#xA;&gt; p$compute_aesthetics(d,  plot))`.&#xA;&gt;&#xA;&gt; `map_layout` is in &quot;panel.r&quot;. This mostly calls `facet_map_layout` in&#xA;&gt; &quot;facet-.r&quot;. This calls some `facet_map_layout` method. There are&#xA;&gt; methods in &quot;facet-grid-.r&quot;,  &quot;facet-null.r&quot;,  and &quot;facet-wrap.r&quot;. In&#xA;&gt; this case it turns out to call the method in &quot;facet-null.r&quot;,  since&#xA;&gt; there is no actual faceting here.&#xA;&gt;&#xA;&gt; `map_layout` does the following operations:&#xA;&gt;&#xA;&gt; STEP 1: For each data attribute in `layers`,  `pA$layers[ [ i ] ]$data`,  it&#xA;&gt; checks if it is a waiver object,  basically meaning the calling&#xA;&gt; function should use the default value.&#xA;&gt;&#xA;&gt;     if (is.waive(data))&#xA;&gt;&#xA;&gt; If so,  it then replaces the `pA$layers[ [ i ] ]$data` with the top level&#xA;&gt; data attribute,  e.g. `pA$data`,  and passes down to&#xA;&gt; `facet_map_layout.null` (in this case).&#xA;&gt;&#xA;&gt; STEP 2:If the data object constructed from above is either a waiver object&#xA;&gt; or&#xA;&gt; empty,  then it does a cbind and then returns the result&#xA;&gt;&#xA;&gt;     if (is.waive(data) || empty(data))&#xA;&gt;       return(cbind(data,  PANEL = integer(0)))&#xA;&gt;&#xA;&gt; otherwise it adds a `PANEL` attribute to `data`.&#xA;&gt;&#xA;&gt;     data$PANEL &lt;- 1L&#xA;&gt;&#xA;&gt; and returns.&#xA;&gt;&#xA;&gt; STEP 1 is the important step here.&#xA;&gt;&#xA;&gt; So to summarize what happens&#xA;&gt;&#xA;&gt; First,  extract the layer data.&#xA;&gt;&#xA;&gt;            ggplot_build&#xA;&gt;     pnewA ----------------&gt; layer_data (lapply(pnewA$layers,  function(y)&#xA;&gt; y$data))&#xA;&gt;&#xA;&gt; Second,  pass `layer_data` to `map_layout`,  replacing empty elements with&#xA;&gt; pnewA$data.&#xA;&gt;&#xA;&gt; In this case of `pnewA`,  this results in one non-empty element,  and one&#xA;&gt; empty element.&#xA;&gt;&#xA;&gt; In this case of `pA`,  this results in two non-empty elements.&#xA;&gt;&#xA;&gt; ##############################**##############################**######&#xA;&gt; Detailed analysis for Part 2 ends&#xA;&gt; ##############################**##############################**######&#xA;&gt;&#xA;&gt; --&#xA;&gt; You received this message because you are subscribed to the Google Groups&#xA;&gt; &quot;ggplot2-dev&quot; group.&#xA;&gt; To unsubscribe from this group and stop receiving emails from it,  send an&#xA;&gt; email to ggplot2-dev+unsubscribe@**googlegroups.com&lt;ggplot2-dev%2Bunsubscribe@googlegroups.com&gt;&#xA;&gt; .&#xA;&gt; For more options,  visit https://groups.google.com/**groups/opt_out&lt;https://groups.google.com/groups/opt_out&gt;&#xA;&gt; .&#xA;&gt;&#xA;&gt;&#xA;&gt;" />
      <Message Id="18362628" ParentId="756" UserId="2557767" Date="05/23/2013 18:31:47" Content="Hi Winston, &#xD;&#xA;&#xD;&#xA;Thanks for the reply.&#xD;&#xA;&#xD;&#xA;On Thu,  23 May 2013,  Winston Chang wrote:&#xD;&#xA;&#xD;&#xA;&gt; @fmitha Thanks for the very detailed analysis. I don't get errors&#xD;&#xA;&gt; running your example code -- was that addressed by your fix for&#xD;&#xA;&gt; #587? So that seems to make PATCH 1 unnecessary.&#xD;&#xA;&#xD;&#xA;By my example code,  I assume you mean what I call EXAMPLE 1?&#xD;&#xA;&#xD;&#xA;If so,  yes,  the fix for #587 makes PATCH 1 unnecessary. They have the&#xD;&#xA;same effect,  but in different ways. PATCH 1 allows NULL values for&#xD;&#xA;elements of the top level data attribute to go through in the&#xD;&#xA;rendering code,  whereas the #587 fix changes apparently the only place&#xD;&#xA;in the `ggplot_build` code where an empty data frame is changed to NULL, &#xD;&#xA;hence making PATCH 1 unnecessary.&#xD;&#xA;&#xD;&#xA;Of course,  with just the #587 fix,  the circle does not render for my&#xD;&#xA;example,  or for Bryans similar one,  which is really the main point of this issue.&#xD;&#xA;&#xD;&#xA;Let me take this opportunity to ask - is it considered undesirable to&#xD;&#xA;have a NULL as a list value in the top level `data`? It seems clear&#xD;&#xA;from the code that an empty data set is Ok.&#xD;&#xA;&#xD;&#xA;&gt; As for the second problem,  the circle not rendering for pnewA,  PATCH&#xD;&#xA;&gt; 2 does seem to make the circle render properly - but I think adding&#xD;&#xA;&gt; in the dummy data at that stage isn't quite the right solution. This&#xD;&#xA;&gt; is because the data object in ggplot_build() will from that point on&#xD;&#xA;&gt; have some incorrect data in it. Also,  I believe it doesn't handle&#xD;&#xA;&gt; cases where the inherited data set has columns,  but no rows. For&#xD;&#xA;&gt; example:&#xD;&#xA;```&#xD;&#xA;&gt; p3 &lt;- ggplot(data.frame(foo = numeric(0)))&#xD;&#xA;&gt; p3 &lt;- p3 + geom_point(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))&#xD;&#xA;&gt; p3 + annotation_custom(circleGrob())&#xD;&#xA;```&#xD;&#xA;&gt; I don't know the exact source of the bug,  but I think it should be&#xD;&#xA;&gt; possible to have a more targeted bug fix.&#xD;&#xA;&#xD;&#xA;Oh,  this clearly isn't the correct solution for this bug. I hoped it&#xD;&#xA;might help someone who knows the code better than I do to get a proper&#xD;&#xA;fix. Generally fixes by non-experts are not proper fixes,  but can&#xD;&#xA;still save the experts time.&#xD;&#xA;&#xD;&#xA;I'll take a look at your counterexample,  and see if I can think of&#xD;&#xA;anything else.&#xD;&#xA;&#xD;&#xA;Did you see my comments about the fact that the rendering is &#xD;&#xA;not affected by zeroing out the top level data attribute,  at least in my&#xD;&#xA;example? It is quite odd. Perhaps the top level data attribute is just&#xD;&#xA;not used in my case. But I don't understand how the rendering happens at all.&#xD;&#xA;Any pointers? I think this may be done by the grid package,  is that right?&#xD;&#xA;&#xD;&#xA;&gt; When digging into this,  I did find that there is a bug in&#xD;&#xA;&gt; facet_map_layout.null where,  when the input is a waiver object,  it&#xD;&#xA;&gt; returns a list instead of a data frame. This should fix it (though&#xD;&#xA;&gt; it doesn't change the final result at all):&#xD;&#xA;&#xD;&#xA;Ok. Are you going to commit this?&#xD;&#xA;&#xD;&#xA;BTW,  I'd appreciate it if you could help me figure out why my tests&#xD;&#xA;are failing. I'm not sure who else to ask. I posted to the general&#xD;&#xA;list about this earlier. I can create an issue for this if you&#xD;&#xA;want. If I can't run the tests,  it is difficult to test patches, &#xD;&#xA;obviously.&#xD;&#xA;&#xD;&#xA;                                                                              Regards,  Faheem.&#xD;&#xA;```&#xD;&#xA;&gt; --- a/R/facet-null.r&#xD;&#xA;&gt; +++ b/R/facet-null.r&#xD;&#xA;&gt; @@ -22, 7 +22, 9 @@ facet_train_layout.null &lt;- function(facet,  data) { &#xD;&#xA;&gt;  facet_map_layout.null &lt;- function(facet,  data,  layout) { &#xD;&#xA;&gt;    # Need the is.waive check for special case where no data,  but &#xD;&#xA;&gt; aesthetics&#xD;&#xA;&gt;    # are mapped to vectors,  like qplot(1:5,  1:5)&#xD;&#xA;&gt; -  if (is.waive(data) || empty(data))&#xD;&#xA;&gt; +  if (is.waive(data))&#xD;&#xA;&gt; +    return(data.frame(PANEL = integer(0)))&#xD;&#xA;&gt; +  else if (empty(data))&#xD;&#xA;&gt;      return(cbind(data,  PANEL = integer(0)))&#xD;&#xA;&gt;    data$PANEL &lt;- 1L&#xD;&#xA;&gt;    data &#xD;&#xA;```" />
      <Message Id="18787207" ParentId="756" UserId="2557767" Date="06/01/2013 11:06:32" Content="I spent some more time looking at the code. The following patch fixes&#xD;&#xA;at least EXAMPLE 1,  as well as Bryan's similar code at the beginning&#xD;&#xA;of this issue. Also,  it passes the unit tests (I ran them using `R CMD&#xD;&#xA;CHECK .`,  which is apparently how one runs the unit tests,  though it&#xD;&#xA;seems nobody could be bothered to tell me). It also passes the visual&#xD;&#xA;tests.&#xD;&#xA;&#xD;&#xA;Note: I noticed the unit tests failing far more often than the visual&#xD;&#xA;tests. In fact,  I tried a few different patches (including PATCH 2&#xD;&#xA;above),  and I did not see any failures. It is possible I am not&#xD;&#xA;running the visual tests correctly. Patches that break the visual&#xD;&#xA;tests in interesting ways would be appreciated.&#xD;&#xA;&#xD;&#xA;NB: If this patch or any later one is used,  I want credit for it.&#xD;&#xA;&#xD;&#xA;Discussion follows.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;--- a/R/panel.r&#xD;&#xA;+++ b/R/panel.r&#xD;&#xA;@@ -43, 10 +43, 18 @@ train_layout &lt;- function(panel,  facet,  d&#xD;&#xA; # caused problems when they had names of aesthetics (like colour or group).&#xD;&#xA; # &#xD;&#xA; # @param panel a trained panel object&#xD;&#xA;-# @param the facetting specification&#xD;&#xA;+# @param facet the facetting specification&#xD;&#xA; # @param data list of data frames (one for each layer)  &#xD;&#xA; # @param plot_data default plot data frame&#xD;&#xA; map_layout &lt;- function(panel,  facet,  data,  plot_data) { &#xD;&#xA;+  ## if plot_data is itself a waiver object,  then select the first&#xD;&#xA;+  ## non-waiver element of data as the new default&#xD;&#xA;+  if(is.waive(plot_data))&#xD;&#xA;+    { &#xD;&#xA;+      firstnonwaivepos = match(TRUE,  lapply(data,  function(x) !is.waive(x)))&#xD;&#xA;+      if(!is.na(firstnonwaivepos))&#xD;&#xA;+        plot_data = data[ [ firstnonwaivepos ] ]&#xD;&#xA;+     }&#xD;&#xA;   lapply(data,  function(data) { &#xD;&#xA;     if (is.waive(data)) data &lt;- plot_data&#xD;&#xA;     facet_map_layout(facet,  data,  panel$layout)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;DISCUSSION:&#xD;&#xA;&#xD;&#xA;I should first say I don't really understand the details of this code;&#xD;&#xA;it is very complex. However,  we can break down the basic structure.&#xD;&#xA;&#xD;&#xA;(1) Create ggplot object by adding layers. This corresponds&#xD;&#xA;approximately to `add_ggplot` in &quot;plot-construction.r&quot;.&#xD;&#xA;&#xD;&#xA;(2) Convert the ggplot object to an object than can be rendered. This&#xD;&#xA;corresponds approximately to the function `ggplot_build` in&#xD;&#xA;&quot;plot-build.r&quot;.&#xD;&#xA;&#xD;&#xA;(3) Build the pieces (grobs) of the plot,  so it can be passed to&#xD;&#xA;grid.draw(). At the end of this step the plot has been completely&#xD;&#xA;described programatically. This corresponds approximately to&#xD;&#xA;`ggplot_gtable` in &quot;plot-render.r&quot;.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Let us consider EXAMPLE 1. Getting rid of the bug described in&#xD;&#xA;https://github.com/hadley/ggplot2/issues/587 helped to simplify&#xD;&#xA;things,  so now if we apply the patch for that issue,  we don't get an&#xD;&#xA;error. However,  the circle still does not render for `pnewA`.&#xD;&#xA;&#xD;&#xA;Now,  the function `ggplot_build` starts with the function&#xD;&#xA;`build_grob`. This seems to be where the basic grobs are built for&#xD;&#xA;rendering,  and we can see the circle fails to build there already.&#xD;&#xA;&#xD;&#xA;Consider the code inside `ggplot_gtable`:&#xD;&#xA;&#xD;&#xA;    [ ... ]&#xD;&#xA;    ggplot_gtable &lt;- function(data) { &#xD;&#xA;&#xD;&#xA;      plot &lt;- data$plot&#xD;&#xA;      panel &lt;- data$panel&#xD;&#xA;      data &lt;- data$data&#xD;&#xA;      theme &lt;- plot_theme(plot)&#xD;&#xA;      # loop over layers eg. one layer is points,  second layer is data&#xD;&#xA;      build_grob &lt;- function(layer,  layer_data) { &#xD;&#xA;        if (nrow(layer_data) == 0) return()&#xD;&#xA;        # dlply loops over facets,  e.g. panel 1 and panel 2&#xD;&#xA;        dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xD;&#xA;          panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)&#xD;&#xA;          layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],  cs = plot$coord)&#xD;&#xA;         },  .drop = FALSE)&#xD;&#xA;       }&#xD;&#xA;&#xD;&#xA;      # List by layer,  list by panel&#xD;&#xA;      geom_grobs &lt;- Map(build_grob,  plot$layer,  data)&#xD;&#xA;&#xD;&#xA;We see that the `geom_grob` call corresponds to `build_grob` looping&#xD;&#xA;over the layers using `Map`. The first argument to `build_grob&#xD;&#xA;`(`layer`) is the layer. This corresponds to&#xD;&#xA;`pnewAbuild$plot$layer[ [ i ] ]`,  where `i=1,  2` for a total of two&#xD;&#xA;layers,  the points and the circle.&#xD;&#xA;&#xD;&#xA;The second argument is (`layer_data`),  which corresponds to the data&#xD;&#xA;`pAbuild$data[ [ i ] ]` for `i=1,  2`.&#xD;&#xA;&#xD;&#xA;As discussed earlier,  `pAbuild$data[ [ 2 ] ]`,  which corresponds to the&#xD;&#xA;data for the circle,  is an empty data frame. This forces an immediate&#xD;&#xA;exit from `build_grob` via the code&#xD;&#xA;&#xD;&#xA;    if (nrow(layer_data) == 0) return()&#xD;&#xA;&#xD;&#xA;That means the result returned for the circle layer is empty. Even if&#xD;&#xA;we disregard this line,  we see that the following `dlply` loop,  which&#xD;&#xA;loops over facets,  splits `layer_data` into sub data frames via the&#xD;&#xA;PANEL variable. Then matches are looked for in&#xD;&#xA;`pnewAbuild$panel$layout$PANEL`. I think this corresponds to different&#xD;&#xA;facets. Of course,  this is completely fails if `pAbuild$data[ [ i ] ]` is&#xD;&#xA;empty. The upshot is that if the data is empty for any layer at the&#xD;&#xA;rendering stage,  it will not render,  and this does not seem like&#xD;&#xA;something that one should try to change.&#xD;&#xA;&#xD;&#xA;Backing up a step,  the `pAbuild$data` is constructed in&#xD;&#xA;`ggplot_build`. The first step,  namely `map_layout` is where the&#xD;&#xA;initial construction is made. The code is&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;map_layout &lt;- function(panel,  facet,  data,  plot_data) { &#xD;&#xA;  lapply(data,  function(data) { &#xD;&#xA;    if (is.waive(data)) data &lt;- plot_data&#xD;&#xA;    facet_map_layout(facet,  data,  panel$layout)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;So,  `plot_data = pnewA$data` is the default data. The `data`&#xD;&#xA;corresponds to `pnewA$layer[ [ i ] ]$data` for i=1,  2. This code replaces&#xD;&#xA;`pnewA$layer[ [ i ] ]$data` with `pnewA$data` if `pnewA$layer[ [ i ] ]$data`&#xD;&#xA;is a waiver object. If `pnewA$data` is itself a waiver object,  then&#xD;&#xA;the result is still a waiver object,  as is the case for `pnewA`. If&#xD;&#xA;`data` is still empty at the point of being passed to&#xD;&#xA;`facet_map_layout`,  no PANEL information will get added,  and it seems&#xD;&#xA;likely that the data frame will end up as empty at the end of&#xD;&#xA;`ggplot_build`. So our options here are limited,  it seems,  to changing&#xD;&#xA;things at the point where `map_layout` is called.&#xD;&#xA;&#xD;&#xA;The situation is that the `annotation_custom` circle does not have any&#xD;&#xA;data associated at the construction step. This seems&#xD;&#xA;reasonable. However,  it also seems clear that the `annotation_custom`&#xD;&#xA;layer does need some data in general,  if only in the case of&#xD;&#xA;faceting. The faceting is determined by aesthetics data,  and this is&#xD;&#xA;done by another layer. But the `annotation_custom` circle needs to sit&#xD;&#xA;inside the panel. Now the faceting happens relative to some data&#xD;&#xA;set. So the `annotation_custom` layer needs to get access to that data&#xD;&#xA;for the facet information.&#xD;&#xA;&#xD;&#xA;The bottom line is that it seems we need to copy some data to the&#xD;&#xA;`annotation_custom` layer at the `map_layout` step. What data should&#xD;&#xA;we copy? Well,  the closest thing to the default data is the first data&#xD;&#xA;set that appears in the construction step - this would the first data&#xD;&#xA;set in the layers. Now,  see the previous para. I don't know what&#xD;&#xA;transformation `ggplot2` does to the data. Since the faceting could&#xD;&#xA;happen at some later step,  at first glance the `annotation_custom`&#xD;&#xA;layer could get data that does not tell it about the faceting,  but the&#xD;&#xA;same objections apply to the original setup where the default data&#xD;&#xA;appears first,  i.e. the `ggplot(data=d)` situation,  and it does the&#xD;&#xA;right thing there. I'm guessing that `ggplot2` copies the aesthetics&#xD;&#xA;over from other layers as necesary in later steps.&#xD;&#xA;&#xD;&#xA;ADDENDUM: I notice that `annotation_custom` puts the same object&#xD;&#xA;in every facet of a faceted plot. It would be nice to have a version&#xD;&#xA;where one could choose which facet to have it in.&#xD;&#xA;&#xD;&#xA;Comments,  corrections,  and any other feedback welcome,  of course.&#xD;&#xA;" />
      <Message Id="21238259" ParentId="756" UserId="2557767" Date="07/19/2013 08:44:20" Content="For the record,  the patch given at the beginning of the previous posting breaks Winston Chang's example earlier in the thread. This example is:&#xD;&#xA;```&#xD;&#xA;library(ggplot2)                                                               &#xD;&#xA;library(grid)                                                                                                           &#xD;&#xA;len = 2                                                                                                                 &#xD;&#xA;d &lt;- data.frame(r = c( 6.279072,  2.995998,  8.193851,  11.274669),                                                         &#xD;&#xA;                 f1 = c(rep(&quot;L&quot;,  len),  rep(&quot;H&quot;,  len)),  f2 = rep(c(&quot;A&quot;,  &quot;B&quot;),  len))                                      &#xD;&#xA;p3 &lt;- ggplot(data.frame(foo = numeric(0)))                                                                              &#xD;&#xA;p3 &lt;- p3 + geom_point(data = d,  aes(x = f1,  y = r,  color = f2,  group = f2))                                             &#xD;&#xA;p3 = p3 + annotation_custom(circleGrob())&#xD;&#xA;```" />
      <Message Id="35947322" ParentId="756" UserId="2557767" Date="02/24/2014 22:23:47" Content="This issue was closed without explanation,  and I don't see anything in the repository that fixes it. Note there is a patch that (appears) to fix the problem,  though I don't know if it is completely correct. If you want a pull request,  please say so." />
      <Message Id="35948643" ParentId="756" UserId="4196" Date="02/24/2014 22:35:38" Content="Please resubmit a PR with minimal discussion. Unfortunately I don't have time to read this massive thread." />
      <Message Id="35949656" ParentId="756" UserId="2557767" Date="02/24/2014 22:45:40" Content="Ok,  will do. Should I do so on this issue,  or create a new issue?&#xD;&#xA;" />
      <Message Id="35950069" ParentId="756" UserId="4196" Date="02/24/2014 22:49:28" Content="New issue please." />
    </Messages>
  </Topic>
  <Topic Id="757" Title="Use default aesthetics from geom_point as defaults for goem_boxplot outliers">
    <Messages>
      <Message Id="0" ParentId="757" UserId="3323947" Date="01/21/2013 00:35:03" Content="Currently,  the default values for the outlier arguments to geom_boxplot,  that control the shape,  colour and size of outliers,  cannot be changed with update_geom_defaults. It makes sense because technically these parameters are not aesthetics. On the other hand,  if the user changes,  say,  the default shape of geom_point,  the result will be that geom_point and geom_boxplot will produce points with different shapes,  which probably is not desirable or entirely expected.&#xD;&#xA;&#xD;&#xA;One solution is to use the default values from geom_point as defaults for the outlier arguments in geom_boxplot,  so that&#xD;&#xA;&#xD;&#xA;update_geom_defaults(&quot;point&quot;,  list(shape = 1,  colour='blue', size=4))&#xD;&#xA;&#xD;&#xA;also affects the shape,  colour and size of the outlier points produced by geom_boxplot. Find patch attached." />
      <Message Id="12481066" ParentId="757" UserId="3323947" Date="01/21/2013 00:42:55" Content="I don't seem to be able to attach files so I will just paste the diff output below.&#xD;&#xA;&#xD;&#xA;```diff&#xD;&#xA;--- R/geom-boxplot.r.old	2013-01-21 00:41:53.950280570 +0100&#xD;&#xA;+++ R/geom-boxplot.r	2013-01-21 00:56:16.922267982 +0100&#xD;&#xA;@@ -94, 8 +94, 12 @@&#xD;&#xA; #' b + geom_boxplot(aes(fill = X1),  stat = &quot;identity&quot;)&#xD;&#xA; #'  }&#xD;&#xA; geom_boxplot &lt;- function (mapping = NULL,  data = NULL,  stat = &quot;boxplot&quot;,  position = &quot;dodge&quot;,  &#xD;&#xA;-outlier.colour = &quot;black&quot;,  outlier.shape = 16,  outlier.size = 2, &#xD;&#xA;+outlier.colour = NULL,  outlier.shape = NULL,  outlier.size = NULL, &#xD;&#xA; notch = FALSE,  notchwidth = .5,  ...) { &#xD;&#xA;+  outlier_defaults &lt;- Geom$find('point')$default_aes()&#xD;&#xA;+  outlier.colour &lt;- outlier.colour %||% outlier_defaults$colour&#xD;&#xA;+  outlier.shape &lt;- outlier.shape %||% outlier_defaults$shape&#xD;&#xA;+  outlier.size &lt;- outlier.size %||% outlier_defaults$size&#xD;&#xA;   GeomBoxplot$new(mapping = mapping,  data = data,  stat = stat,  &#xD;&#xA;   position = position,  outlier.colour = outlier.colour,  outlier.shape = outlier.shape,  &#xD;&#xA;   outlier.size = outlier.size,  notch = notch,  notchwidth = notchwidth,  ...)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="35944121" ParentId="757" UserId="4196" Date="02/24/2014 21:55:09" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="758" Title="Subset in geom leaves empty panels in grid">
    <Messages>
      <Message Id="0" ParentId="758" UserId="878107" Date="01/22/2013 08:25:28" Content="Hi, &#xD;&#xA;&#xD;&#xA;I'm playing with the subset argument of `geom_*` and I'm finding that I end up with empty panels in the grid. I'm using version 0.9.3 of ggplot2.&#xD;&#xA;&#xD;&#xA;Here is my toy-example:&#xD;&#xA;```R&#xD;&#xA;d = data.frame(&#xD;&#xA;  x=ceiling(seq(1,  30) / 3),  y=runif(30), &#xD;&#xA;  group=as.factor(rep(c('A',  'B',  'C'),  10))&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;ggplot(d,  aes(x=x,  y=y,  group=group,  color=group)) +&#xD;&#xA;geom_point(subset=.(group != 'B')) +&#xD;&#xA;facet_grid(group ~ .,  drop=TRUE)&#xD;&#xA;```&#xD;&#xA;Note: It makes no difference if group is a `factor` or not.&#xD;&#xA;&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/878107/85606/0774e2a0-646d-11e2-8925-efc3db9c0adb.png)&#xD;&#xA;&#xD;&#xA;The legend correctly omits B,  but the empty panel for B is still present.&#xD;&#xA;&#xD;&#xA;The obvious workaround is to subset the data upfront,  e.g.&#xD;&#xA;```R&#xD;&#xA;ggplot(subset(d,  group != 'B'),  aes(x=x,  y=y,  group=group,  color=group)) +&#xD;&#xA;geom_point() +&#xD;&#xA;facet_grid(group ~ .)&#xD;&#xA;```&#xD;&#xA;Note: If I set `drop=FALSE` in `facet_grid` in the workaround example,  then I end up with the same result as above.&#xD;&#xA;&#xD;&#xA;However,  it seems to me like the subset argument of `geom_*` could potentially take care of this. If this is not a bug,  I would like to make it a feature request (and if I get my head around the code-base,  I might take a stab :)&#xD;&#xA;&#xD;&#xA;Cheers, &#xD;&#xA;Josh" />
      <Message Id="12545615" ParentId="758" UserId="878107" Date="01/22/2013 14:05:00" Content="I'm not sure how one should reference this properly in github,  but this commit to my fork (with the few preceding it) is an initial attempt at addressing this issue (as I see it):&#xD;&#xA;&#xD;&#xA;joshbode/ggplot2@d2a66d30d646178ca9fd357c911b60573143f8b4" />
      <Message Id="12546094" ParentId="758" UserId="4196" Date="01/22/2013 14:16:14" Content="I'm not convinced that this is a bug - to me it seems like subsetting at the geom level should affect the display of the individual geoms,  but not the panels.  It would help if you could provide more reasons why this behaviour is confusing or causing problems - as you've pointed out,  there's already a work around for it,  and the code that deals with subsetting is already quite fragile :/" />
      <Message Id="12564838" ParentId="758" UserId="878107" Date="01/22/2013 20:33:45" Content="The reason I was thinking about this was because I was trying to set up a basic plot (call it `p`) (with data,  headings,  etc. but with no geoms) that I could then repeatedly re-use by adding on subsetted geoms and produce individual faceted plots that way,  e.g.&#xD;&#xA;```R&#xD;&#xA;p = ggplot(d,  aes(x=x,  y=y,  group=group,  color=group)) +&#xD;&#xA;facet_grid(group ~ .)&#xD;&#xA;&#xD;&#xA;p + geom_point(subset=.(group != 'B'))&#xD;&#xA;&#xD;&#xA;p + geom_point(subset=.(group != 'A'))&#xD;&#xA;```&#xD;&#xA;rather than have to redefine `p` for each individual plot,  however,  as I discussed,  this leads to plots with empty panels. My toy example didn't have many groups,  but for what I intended to use this,  I actually have many groups of sub-groups that I would like to display this way,  reusing a common base `p`.&#xD;&#xA;&#xD;&#xA;Also,  it seemed to me to be inconsistent behaviour that the drop argument of `facet_grid` actually would remove the empty panels (due to being passed subsetted data frame with empty levels at the outset),  however the subset argument of the `geom_*` elements still produced empty panels,  even though there was no `geom_*` actively requesting them." />
      <Message Id="12565303" ParentId="758" UserId="878107" Date="01/22/2013 20:43:36" Content="By the way,  `devtools` made it so easy for me to muck around with this ;) So,  uh,  thanks for that!" />
      <Message Id="35944149" ParentId="758" UserId="4196" Date="02/24/2014 21:55:28" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="759" Title="Allow alpha as argument to element_rect">
    <Messages>
      <Message Id="0" ParentId="759" UserId="424139" Date="01/24/2013 19:19:30" Content="This will allow for semi-transparent legends when they are put on top of a graphic (map)." />
      <Message Id="14257602" ParentId="759" UserId="86978" Date="02/28/2013 21:06:59" Content="You can currently use alpha with the `alpha()` function:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;qplot(1:3,  1:3,  colour=1:3) +&#xD;&#xA;  theme(legend.background = element_rect(fill=alpha('red',  0.2)), &#xD;&#xA;        legend.position = c(.5,  .5))&#xD;&#xA;```" />
      <Message Id="68654292" ParentId="759" UserId="3807850" Date="01/04/2015 23:17:13" Content="function ``alpha()`` is (now) in the ``scales`` package" />
    </Messages>
  </Topic>
  <Topic Id="760" Title="Problem with Tikz and options(DecOut=', ')">
    <Messages>
      <Message Id="0" ParentId="760" UserId="1266815" Date="01/30/2013 19:14:38" Content="When **changing the decimal** sign in R to &quot;, &quot;,  plotting to a tikz device is possible using standard plot function but **not using ggplot**. &#xD;&#xA;&#xD;&#xA;**Building the tikz dictionary** (before changing the decimal separator) by plotting using ggplot2 *solves* the problem.&#xD;&#xA;&#xD;&#xA;Even through it could also be a tikz bug *please* try to fix or at least *warn* the user as I spent more than an hour trying to find a solution. Thanks for providing this great tool!&#xD;&#xA;&#xD;&#xA;Minimal Examples:&#xD;&#xA;**R**:&#xD;&#xA;&#xD;&#xA;	options(OutDec = &quot;, &quot;)&#xD;&#xA;	require(ggplot2)&#xD;&#xA;	require(tikzDevice)&#xD;&#xA;	tikz('example.tex', standAlone = TRUE,  width = 5, height = 5)&#xD;&#xA;	qplot(1:4, 1:4, xlab=&quot;$\\pi$&quot;);&#xD;&#xA;	dev.off()&#xD;&#xA;&#xD;&#xA;**knitr**:&#xD;&#xA;&#xD;&#xA;	\documentclass{ artcl }&#xD;&#xA;	\begin{ document }&#xD;&#xA;	\begin{ figure }&#xD;&#xA;	&lt;&lt;example, dev='tikz', cache=FALSE&gt;&gt;=&#xD;&#xA;	options(OutDec = &quot;, &quot;)&#xD;&#xA;	require(ggplot2)&#xD;&#xA;	qplot(1:4, 1:4, xlab=&quot;$\\pi$&quot;);&#xD;&#xA;	@&#xD;&#xA;	\caption{ I need comma as decimal point.\label{ fig:example } }&#xD;&#xA;	\end{ figure }&#xD;&#xA;	\end{ document }&#xD;&#xA;&#xD;&#xA;in either case the error is:&#xD;&#xA;&#xD;&#xA;	(C:\Users\Jan\AppData\Roaming\MiKTeX\2.8\tex\generic\pgf\basiclayer\pgfcoregraphic Fehler in getMetricsFromLatex(TeXMetrics) : &#xD;&#xA;	TeX was unable to calculate metrics for the following string or character:&#xD;&#xA;&#xD;&#xA;	1:4&#xD;&#xA;	&#xD;&#xA;	Common reasons for failure include:&#xD;&#xA;	  * The string contains a character which is special to LaTeX unless&#xD;&#xA;	    escaped properly,  such as % or $.&#xD;&#xA;	  * The string makes use of LaTeX commands provided by a package and&#xD;&#xA;	    the tikzDevice was not told to load the package.&#xD;&#xA;	&#xD;&#xA;	The contents of the LaTeX log of the aborted run have been printed above, &#xD;&#xA;	it may contain additional details as to why the metric calculation failed.&#xD;&#xA;" />
      <Message Id="35944191" ParentId="760" UserId="4196" Date="02/24/2014 21:55:48" Content="Weird,  sorry about that." />
    </Messages>
  </Topic>
  <Topic Id="761" Title="Error in loadNamespace(i[ [ 1L ] ],  c(lib.loc,  .libPaths())) :    there is no package called 慸ichromat?">
    <Messages>
      <Message Id="0" ParentId="761" UserId="3444067" Date="02/01/2013 01:57:10" Content="So I tried to install the ggplot2 function using install.packages(&quot;ggplot2&quot;),  and it says it's successfully unpacked and installed,  but when I tried running ggplot2 using library(ggplot2) or require(ggplot2),  it gave me the error message:&#xD;&#xA;&#xD;&#xA;&quot;Loading required package: ggplot2&#xD;&#xA;Error in loadNamespace(i[ [ 1L ] ],  c(lib.loc,  .libPaths())) : &#xD;&#xA;  there is no package called 慸ichromat?&quot;&#xD;&#xA;&#xD;&#xA;I tried reinstalling the package several times,  either via CRAN or using the install.packages function,  but it still give me the same error message. I also tried updating my R and RStudio to the latest version,  but still gave me the same issue. I go into my R\win-library\2.15 folder,  and the ggplot2 folder is indeed there...&#xD;&#xA;&#xD;&#xA;All other packages are importing fine,  but I just have problem with this one package...." />
      <Message Id="12996400" ParentId="761" UserId="4196" Date="02/01/2013 14:32:06" Content="What version of R do you have?" />
      <Message Id="13024071" ParentId="761" UserId="3444067" Date="02/02/2013 03:32:39" Content="I was using 2.15.1 then at one point it gave me a message saying ggplot2 not available for R 2.15.1 so I downloaded the 2.15.2 and still gave me the same loadnamespace error " />
      <Message Id="13093282" ParentId="761" UserId="4196" Date="02/04/2013 19:06:39" Content="You might want to also try re-installing the `dichromat` package,  since that's what the error seems to be about." />
    </Messages>
  </Topic>
  <Topic Id="762" Title="geomHexbin plots wrong size if no &quot;diagonally&quot; adjacent bins are in the facet/plot">
    <Messages>
      <Message Id="0" ParentId="762" UserId="223185" Date="02/02/2013 18:18:46" Content="see a detailed description at stackoverflow http://stackoverflow.com/questions/14495111/setting-hex-bins-in-ggplot2-to-same-size,  in the lower part of my answer (http://stackoverflow.com/a/14586941/755257) you'll find reproducible examples. &#xD;&#xA;&#xD;&#xA;My guess is that `hexBin` should produce width and height analogously to `StatBin2d` yielding all four corner coordinates for each bin,  so `geom_hex` knows what it should draw. Incidentally,  this would make `geom_hex` more general.&#xD;&#xA;&#xD;&#xA;Unofrtunately,  at the moment I don't have time to produce a patch.&#xD;&#xA;&#xD;&#xA;Thanks a lot, &#xD;&#xA;&#xD;&#xA;Claudia" />
      <Message Id="35944208" ParentId="762" UserId="4196" Date="02/24/2014 21:55:58" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="763" Title="you -&gt; your">
    <Messages>
      <Message Id="0" ParentId="763" UserId="463252" Date="02/14/2013 20:53:02" Content="Reported by Documentation feedback [ #1009 ]" />
      <Message Id="14074875" ParentId="763" UserId="86978" Date="02/25/2013 20:53:41" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="764" Title="geom_circle">
    <Messages>
      <Message Id="0" ParentId="764" UserId="571752" Date="02/17/2013 02:38:34" Content="I would like to have a geom_circle function that maps to aesthetics &quot;x&quot;,  &quot;y&quot; and &quot;radius&quot;,  which draws circles of &quot;radius&quot; in plot units.  Right now this can be done by one using `annotate_custom(grob=circleGrob(...` for a single circle." />
      <Message Id="35944219" ParentId="764" UserId="4196" Date="02/24/2014 21:56:03" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="765" Title="guide_legend broken when color and shape vary">
    <Messages>
      <Message Id="0" ParentId="765" UserId="1733683" Date="02/20/2013 06:03:34" Content="With 0.9.3, &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;p &lt;- ggplot(diamonds,  aes(carat,  price,  colour=cut)) + geom_point()&#xD;&#xA;p = p + guides(colour=guide_legend(title.hjust = -1))&#xD;&#xA;p&#xD;&#xA;```&#xD;&#xA;correctly moves the legend title,  but&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;p &lt;- ggplot(diamonds,  aes(carat,  price,  colour=cut)) + geom_point(aes(shape=cut))&#xD;&#xA;p = p + guides(colour=guide_legend(title.hjust = -1))&#xD;&#xA;p&#xD;&#xA;```&#xD;&#xA;doesn't seem to.&#xD;&#xA;&#xD;&#xA;Am I doing something wrong?" />
      <Message Id="35944230" ParentId="765" UserId="4196" Date="02/24/2014 21:56:10" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="766" Title="ggplot2 issue">
    <Messages>
      <Message Id="0" ParentId="766" UserId="3665350" Date="02/22/2013 02:40:32" Content="I tried running the following code but got the following error message. &#xD;&#xA;&gt; football&lt;-read.csv(&quot;http://www.tc.umn.edu/~zief0002/Data/Football.csv&quot;)&#xD;&#xA;&gt; ggplot(data = football,  aes(x = WGR,  y = BGR)) +&#xD;&#xA;+ 	geom_point() +&#xD;&#xA;+ 	geom_smooth(method = &quot;lm&quot;,  se = FALSE)&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;The following `from` values were not present in `x`: col,  color,  pch,  cex,  lty,  lwd,  srt,  adj,  bg,  fg,  min,  max&#xD;&#xA;Error in plyr:::split_indices(seq_len(nrow(data)),  scale_id,  n) : &#xD;&#xA;  unused argument(s) (n)&#xD;&#xA;&#xD;&#xA;I saw in past issues that i should reinstall ggplot2 or reinstall ggplot2 and plyr at the same time including their dependencies. I did both of this and it did not fix it. I also checked my session info and it showed that i have the most current versions of both packages. Here is my session info:&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.1 (2012-06-22)&#xD;&#xA;Platform: i386-apple-darwin9.8.0/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-0   dichromat_1.2-4    digest_0.5.2       grid_2.15.1        gtable_0.1.1       labeling_0.1      &#xD;&#xA; [ 7 ] lattice_0.20-6     MASS_7.3-18        memoise_0.1        munsell_0.4        nlme_3.1-104       plyr_1.8          &#xD;&#xA;[ 13 ] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.3       stringr_0.6.2      tools_2.15.1   &#xD;&#xA;&#xD;&#xA;Any suggestions?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="13926002" ParentId="766" UserId="3665350" Date="02/22/2013 02:55:20" Content="Nevermind. Quitting my R session and restarting it solved my problem. Thanks anyway. :)" />
    </Messages>
  </Topic>
  <Topic Id="767" Title="logticks drawn in wrong color">
    <Messages>
      <Message Id="0" ParentId="767" UserId="1932" Date="02/22/2013 16:10:19" Content="When plotting using `scale_color` together with `annotation_logticks`,  my ticks come out the wrong color.  I'd guess that this is just a matter of resetting drawing parameters before drawing the annotation.  Let me know if an example of failure is needed." />
      <Message Id="13953325" ParentId="767" UserId="86978" Date="02/22/2013 16:28:14" Content="A reproducible example would be helpful." />
      <Message Id="13977809" ParentId="767" UserId="1932" Date="02/22/2013 22:54:28" Content="```&#xD;&#xA;require(ggplot2)&#xD;&#xA;df &lt;- cbind(x=data.frame(1),  y=c(1, 10, 100, 1000),  z=c('a', 'b', 'a', 'b'))&#xD;&#xA;qplot(X1,  y,  color=z,  data=df,  geom=&quot;point&quot;) +&#xD;&#xA;  scale_y_log10() +&#xD;&#xA;  scale_color_manual(values=c(1, 2)) +&#xD;&#xA;  annotation_logticks(sides=&quot;l&quot;)&#xD;&#xA;```&#xD;&#xA;This produces red logticks on the left side of the plot.  I would prefer black ones." />
      <Message Id="14027884" ParentId="767" UserId="86978" Date="02/25/2013 06:43:35" Content="Hm,  that is odd. It appears to be drawing two sets of log ticks: red ones on top of black ones.&#xD;&#xA;&#xD;&#xA;In the meantime you can work around it by specifying the color of the logticks:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x=1,  y=c(1, 10, 100, 1000),  z=c('a', 'b', 'a', 'b'))&#xD;&#xA;ggplot(df,  aes(x=x,  y=y,  colour=z))+&#xD;&#xA;  geom_point() +&#xD;&#xA;  scale_y_log10() +&#xD;&#xA;  scale_color_manual(values=c(&quot;red&quot;,  &quot;black&quot;)) +&#xD;&#xA;  annotation_logticks(sides=&quot;l&quot;,  colour=&quot;black&quot;)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="14050768" ParentId="767" UserId="1932" Date="02/25/2013 16:09:51" Content="Awesome; thanks for the workaround.  I hope the bug is as easy to fix so no workaround is needed." />
    </Messages>
  </Topic>
  <Topic Id="768" Title="geom_crossbar &amp; fill">
    <Messages>
      <Message Id="0" ParentId="768" UserId="1880318" Date="02/27/2013 08:45:52" Content="I have a problem with the combination of geom_crossbar and &quot;fill&quot;. &#xD;&#xA;What I want,  is crossbars which are colored (filled) accordingly to the &quot;Group1&quot; variable (see example below) - what is no problem at all. &#xD;&#xA;The problem is that the legend does not show the fill colors,  but black lines. I tried a lot but could not find any workaround to fix this!&#xD;&#xA;&#xD;&#xA;Thank you!&#xD;&#xA;Manuel&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# create data&#xD;&#xA;set.seed(907)&#xD;&#xA;means &lt;- rnorm(9, 280, 20)&#xD;&#xA;sds   &lt;- runif(9, 0.5, 1.5)&#xD;&#xA;q25   &lt;- means - rnorm(9, 30, 2)&#xD;&#xA;q75   &lt;- means + rnorm(9, 33, 2)&#xD;&#xA;&#xD;&#xA;CDAT &lt;- data.frame(&quot;XA&quot;=rep(c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;), each=3), &quot;Group1&quot;=factor(c(1, 2, 3)),  &quot;MEAN&quot;=means,  &quot;SE&quot;=sds, &quot;q25&quot;=q25,  &quot;q75&quot;=q75)&#xD;&#xA;&#xD;&#xA;# plotting&#xD;&#xA;g1 &lt;- ggplot(data=CDAT, aes(x=XA,  y=MEAN,  ymin=MEAN - 1.96*SE,   ymax=MEAN + 1.96*SE,  fill=Group1))&#xD;&#xA;g2 &lt;- g1 + geom_crossbar(position = position_dodge(width = 0.62),  alpha=1,  width=0.6)&#xD;&#xA;g2&#xD;&#xA;```" />
      <Message Id="14306389" ParentId="768" UserId="1880318" Date="03/01/2013 19:22:29" Content="thank you!" />
    </Messages>
  </Topic>
  <Topic Id="769" Title="Fix crossbar legend symbol">
    <Messages>
      <Message Id="0" ParentId="769" UserId="86978" Date="02/27/2013 19:25:15" Content="This fixes #768. Are there any problems that might be caused by drawing these symbols in the legend?" />
      <Message Id="14271046" ParentId="769" UserId="4196" Date="03/01/2013 03:02:41" Content="Looks good." />
    </Messages>
  </Topic>
  <Topic Id="770" Title="Fixes for stat_summary">
    <Messages>
      <Message Id="0" ParentId="770" UserId="86978" Date="02/27/2013 19:28:26" Content="This fixes #732 and #739. It reverts the change that fixed #622,  so that will break again. Unfortunately,  I don't think it's possible to make it so that `stat_summary` can satisfy both the path and crossbar drawing because of the way grouping works. This change favors path drawing because that is seems to be a more common use case." />
      <Message Id="14270983" ParentId="770" UserId="4196" Date="03/01/2013 02:59:36" Content="Can we make this an option?" />
      <Message Id="14274264" ParentId="770" UserId="86978" Date="03/01/2013 05:53:48" Content="I've decided to not add the `by_x` option we discussed -- if the user wants to set grouping at each x,  they can use `group`." />
    </Messages>
  </Topic>
  <Topic Id="771" Title="Fix polygon grouping bug">
    <Messages>
      <Message Id="0" ParentId="771" UserId="86978" Date="02/28/2013 17:34:40" Content="Fixes #741 and fixes #749.&#xD;&#xA;&#xD;&#xA;The problem is that the `group` returned from `coord_munch` is sometimes a character vector,  and it was passed to `polygonGrob` as the `id` value. But `id` must be a numeric vector,  according to the help page:&#xD;&#xA;&#xD;&#xA;&gt; id: A numeric vector used to separate locations in ‘x’ and ‘y’ into multiple polygons.  All locations with the same ‘id’ belong to the same polygon.&#xD;&#xA;&#xD;&#xA;Converting it to a factor ensures that it's numeric. I had to use `mode()` because this is one of those times where `is.numeric` is reporting something other than what's desired. What's needed is something that will report TRUE for factors,  integers,  and floats,  and FALSE for strings. `mode()` is the function that does the trick&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;char  &lt;- &quot;A&quot;&#xD;&#xA;fac   &lt;- factor(&quot;A&quot;)&#xD;&#xA;int   &lt;- 1L&#xD;&#xA;float &lt;- 1.1&#xD;&#xA;&#xD;&#xA;typeof(char)&#xD;&#xA;# [ 1 ] &quot;character&quot;&#xD;&#xA;storage.mode(char)&#xD;&#xA;# [ 1 ] &quot;character&quot;&#xD;&#xA;mode(char)&#xD;&#xA;# [ 1 ] &quot;character&quot;&#xD;&#xA;is.numeric(char)&#xD;&#xA;# [ 1 ] FALSE&#xD;&#xA;is.integer(char)&#xD;&#xA;# [ 1 ] FALSE&#xD;&#xA;&#xD;&#xA;typeof(fac)&#xD;&#xA;# [ 1 ] &quot;integer&quot;&#xD;&#xA;storage.mode(fac)&#xD;&#xA;# [ 1 ] &quot;integer&quot;&#xD;&#xA;mode(fac)&#xD;&#xA;# [ 1 ] &quot;numeric&quot;&#xD;&#xA;is.numeric(fac)&#xD;&#xA;# [ 1 ] FALSE&#xD;&#xA;is.integer(fac)&#xD;&#xA;# [ 1 ] FALSE&#xD;&#xA;&#xD;&#xA;typeof(int)&#xD;&#xA;# [ 1 ] &quot;integer&quot;&#xD;&#xA;storage.mode(int)&#xD;&#xA;# [ 1 ] &quot;integer&quot;&#xD;&#xA;mode(int)&#xD;&#xA;# [ 1 ] &quot;numeric&quot;&#xD;&#xA;is.numeric(int)&#xD;&#xA;# [ 1 ] TRUE&#xD;&#xA;is.integer(int)&#xD;&#xA;# [ 1 ] TRUE&#xD;&#xA;&#xD;&#xA;typeof(float)&#xD;&#xA;# [ 1 ] &quot;double&quot;&#xD;&#xA;storage.mode(float)&#xD;&#xA;# [ 1 ] &quot;double&quot;&#xD;&#xA;mode(float)&#xD;&#xA;# [ 1 ] &quot;numeric&quot;&#xD;&#xA;is.numeric(float)&#xD;&#xA;# [ 1 ] TRUE&#xD;&#xA;is.integer(float)&#xD;&#xA;# [ 1 ] FALSE&#xD;&#xA;```" />
      <Message Id="14245919" ParentId="771" UserId="86978" Date="02/28/2013 17:38:42" Content="One more thing to note: The order that the layers are drawn might not be desirable -- the levels that should be higher can be obscured. See these two examples:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(faithful,  aes(x = eruptions,  y = waiting)) +&#xD;&#xA;  stat_density2d(aes(colour = ..level..),  geom=&quot;path&quot;) +&#xD;&#xA;  xlim(0.5,  6) + ylim(40,  110)&#xD;&#xA;&#xD;&#xA;ggplot(faithful,  aes(x = eruptions,  y = waiting)) +&#xD;&#xA;  stat_density2d(aes(fill = ..level..),  geom=&quot;polygon&quot;,  colour=&quot;white&quot;) +&#xD;&#xA;  xlim(0.5,  6) + ylim(40,  110)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But I believe this is the same behavior as with 0.9.2.1." />
      <Message Id="14249614" ParentId="771" UserId="4196" Date="02/28/2013 18:43:15" Content="Looks like a reasonable fix to me." />
      <Message Id="14251555" ParentId="771" UserId="86978" Date="02/28/2013 19:17:36" Content="I think it actually needs a bit more work,  to make sure that the factor levels are set in the proper order. For example,  here's what it does now,  when you go into the function:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;levels(factor(munched$group))&#xD;&#xA;#  [ 1 ] &quot;1-1&quot;  &quot;1-10&quot; &quot;1-11&quot; &quot;1-12&quot; &quot;1-13&quot; &quot;1-14&quot; &quot;1-15&quot; &quot;1-16&quot; &quot;1-17&quot; &quot;1-18&quot;&#xD;&#xA;# [ 11 ] &quot;1-19&quot; &quot;1-2&quot;  &quot;1-3&quot;  &quot;1-4&quot;  &quot;1-5&quot;  &quot;1-6&quot;  &quot;1-7&quot;  &quot;1-8&quot;  &quot;1-9&quot; &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But what's needed is something like this,  in order for the polygons to be layered properly:&#xD;&#xA;```R&#xD;&#xA;levels(factor(munched$group))&#xD;&#xA;#  [ 1 ] &quot;1-1&quot;  &quot;1-2&quot;  &quot;1-3&quot;  &quot;1-4&quot;  &quot;1-5&quot;  &quot;1-6&quot;  &quot;1-7&quot;  &quot;1-8&quot;  &quot;1-9&quot;  &quot;1-10&quot;&#xD;&#xA;# [ 11 ] &quot;1-11&quot; &quot;1-12&quot; &quot;1-13&quot; &quot;1-14&quot; &quot;1-15&quot; &quot;1-16&quot; &quot;1-17&quot; &quot;1-18&quot; &quot;1-19&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It looks like `data` has these values before it goes into `munch_data`,  so maybe the best solution is to convert it to a factor (with proper ordering) earlier in the pipeline." />
      <Message Id="14254339" ParentId="771" UserId="86978" Date="02/28/2013 20:05:36" Content="Apparently,  even if the stat returns a factor for `group`,  it gets converted to a char vector by the `aesdefaults()` function,  before `$draw` is called,  and I don't want to mess with that. So converting to a factor in the stat won't work.&#xD;&#xA;&#xD;&#xA;I've decided to paste in 3-digit numbers for the grouping during the stat calculation,  so that when `factor()` is called in the draw phase,  it will correctly figure out the order.&#xD;&#xA;&#xD;&#xA;Attached are the results before this sorting fix,  and after.&#xD;&#xA;&#xD;&#xA;![ bad_order ](https://f.cloud.github.com/assets/86978/207047/2aa4426a-81e2-11e2-92ca-764f1f2a7bc6.png)&#xD;&#xA;![ good_order ](https://f.cloud.github.com/assets/86978/207049/2f340068-81e2-11e2-8b8b-2593a3c39671.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="772" Title="Fix logticks color (#767)">
    <Messages>
      <Message Id="0" ParentId="772" UserId="86978" Date="02/28/2013 21:01:50" Content="This fixes #767. I adapted some of the code from `annotate`. I'm not sure this is the cleanest way to do it,  but it works.&#xD;&#xA;&#xD;&#xA;Examples:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;df &lt;- data.frame(x=1,  y=c(1, 10, 100, 1000),  z=c('a', 'b', 'a', 'b'))&#xD;&#xA;p &lt;- ggplot(df,  aes(x=x,  y=y,  colour=z))+&#xD;&#xA;  geom_point() +&#xD;&#xA;  scale_y_log10() +&#xD;&#xA;  scale_color_manual(values=c(&quot;red&quot;,  &quot;black&quot;))&#xD;&#xA;&#xD;&#xA;p + annotation_logticks(sides=&quot;lrtb&quot;)&#xD;&#xA;&#xD;&#xA;p + annotation_logticks(sides=&quot;lrtb&quot;,  alpha = .3,  colour = &quot;red&quot;)&#xD;&#xA;&#xD;&#xA;p + annotation_logticks(sides=&quot;lrtb&quot;,  alpha = .3,  color = &quot;red&quot;)&#xD;&#xA;&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="773" Title="Arrows misoriented with coord_polar">
    <Messages>
      <Message Id="0" ParentId="773" UserId="3761302" Date="03/04/2013 06:08:51" Content="Arrows at the ends of geom_segment objects are not oriented properly when using polar coordinates. An example:&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(grid)&#xD;&#xA;&#xD;&#xA;    testdata &lt;- data.frame(mon=1:12, noise=abs(rnorm(12)))&#xD;&#xA;    ggplot(testdata, aes(x=mon, y=0)) + geom_segment(aes(xend=mon, yend=noise),  arrow=arrow()) + coord_polar()" />
      <Message Id="35944238" ParentId="773" UserId="4196" Date="02/24/2014 21:56:15" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="774" Title="geom_path linejoin=mitre does not actually produce mitre">
    <Messages>
      <Message Id="0" ParentId="774" UserId="1818581" Date="03/05/2013 05:27:24" Content="When producing a simple geom_path in ggplot2 0.9.3.1 as [ suggested by the documentation ](http://docs.ggplot2.org/current/geom_path.html):&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;df &lt;- data.frame(x = 1:3,  y = c(4,  1,  9))&#xD;&#xA;base &lt;- ggplot(df,  aes(x,  y))&#xD;&#xA;base + geom_path(size = 10,  linejoin = &quot;mitre&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This actually produces a bevel,  not a mitre (the definitions can be found at [ this tutorial ](http://www.html5canvastutorials.com/tutorials/html5-canvas-line-joins/)). I thought this might just be a bug in the documentation,  but it seems that `linejoin='bevel'` and `linejoin='mitre'` do exactly the same thing.&#xD;&#xA;" />
      <Message Id="35944255" ParentId="774" UserId="4196" Date="02/24/2014 21:56:26" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="775" Title="stat_summary broken in 0.9.3.1">
    <Messages>
      <Message Id="0" ParentId="775" UserId="187033" Date="03/05/2013 19:07:10" Content="The stat_summary() examples that use functions from Hmisc are broken in 0.9.3.1. You can see this directly in the docs - compare the second &quot;mean_cl_boot&quot; example from http://docs.ggplot2.org/current/stat_summary.html with http://docs.ggplot2.org/0.9.3/stat_summary.html. Also verified by running example(stat_summary) with ggplot2 0.9.3.1 and R 2, .15.3 on Windows." />
      <Message Id="14751123" ParentId="775" UserId="1494842" Date="03/12/2013 00:07:22" Content="I have the same problem with a plot that has worked in the past. Both my plot as well as `d + stat_sum_single(mean,  geom=&quot;line&quot;)` and some other examples from the [ docs ](http://docs.ggplot2.org/current/stat_summary.html) are now broken and yield the following error:&#xD;&#xA;&#xD;&#xA;&gt;geom_path: Each group consist of only one observation. Do you need to adjust the group aesthetic?&#xD;&#xA;&#xD;&#xA;This error persists even when group is specified.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="14751529" ParentId="775" UserId="86978" Date="03/12/2013 00:18:50" Content="@kent37,  these problems were caused by a fix for another bug; unfortunately,  it's probably not possible to make both of them work. See #770 (and the issues it links to) for more info. The examples do have to be fixed.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d &lt;- qplot(cyl,  mpg,  data=mtcars)&#xD;&#xA;&#xD;&#xA;stat_sum_df &lt;- function(fun,  geom=&quot;crossbar&quot;,  ...) { &#xD;&#xA;  stat_summary(fun.data=fun,  colour=&quot;red&quot;,  geom=geom,  width=0.2,  ...)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;# Old version&#xD;&#xA;d + stat_sum_df(&quot;mean_cl_boot&quot;)&#xD;&#xA;&#xD;&#xA;# Fixed version&#xD;&#xA;d + stat_sum_df(&quot;mean_cl_boot&quot;,  mapping = aes(group = cyl))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;@mfcovington Are you using version 0.9.3 or 0.9.3.1? I believe that issue should be fixed in 0.9.3.1 (that's the fix that caused problems for the examples mentioned by @kent37).&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="776" Title="Reduce example run time">
    <Messages>
      <Message Id="0" ParentId="776" UserId="4196" Date="03/08/2013 14:49:15" Content="(again)" />
    </Messages>
  </Topic>
  <Topic Id="777" Title="Why is ggplot2 boxplot different?">
    <Messages>
      <Message Id="0" ParentId="777" UserId="4196" Date="03/08/2013 15:03:56" Content="```R&#xD;&#xA;x &lt;- c(8.9,  8.19,  8.16,  8.12,  8.09,  8.02,  7.97,  7.94,  7.94,  7.93,  7.9,  7.89,  7.71,  7.66,  7.51,  7.44)&#xD;&#xA;boxplot(x)&#xD;&#xA;ggplot2::qplot(factor(0),  x,  geom = &quot;boxplot&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;note the lower outlier.&#xD;&#xA;&#xD;&#xA;(Reported by Antony Unwin)" />
      <Message Id="14624832" ParentId="777" UserId="86978" Date="03/08/2013 15:09:41" Content="From the geom_boxplot help page:&#xD;&#xA;&#xD;&#xA;&gt; The upper and lower &quot;hinges&quot; correspond to the first and third quartiles (the 25th and 75th percentiles). This differs slightly from the method used by the ‘boxplot’ function,  and may be apparent with small samples. See ‘boxplot.stats’ for for more information on how hinge positions are calculated for ‘boxplot’.&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="778" Title="Theme elements axis.line.x and axis.line.y do not work">
    <Messages>
      <Message Id="0" ParentId="778" UserId="321235" Date="03/08/2013 19:01:28" Content="axis.line.x and axis.line.y do not set the theme for the x axis line and y axis line as expected. &#xD;&#xA;&#xD;&#xA;Minimal reproducible example:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p &lt;- ggplot() + geom_blank(aes(x=1:10,  y=1:10))&#xD;&#xA;p + theme(panel.border=element_blank(),  axis.line=element_line()) ## works&#xD;&#xA;p + theme(panel.border=element_blank(),  axis.line.x=element_line()) ## does not work&#xD;&#xA;p + theme(panel.border=element_blank(),  axis.line.y=element_line()) ## does not work&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It is possible to set just one or the other by setting axis.line then turning one &quot;off&quot; : &#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p + theme(panel.border=element_blank(),  axis.line=element_line(),  axis.line.y=element_blank()) ## works&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But I don't think this is how it's supposed to work.&#xD;&#xA;" />
      <Message Id="35944279" ParentId="778" UserId="4196" Date="02/24/2014 21:56:44" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="779" Title="position_stack gives warnings when &gt;128 discrete items on x axis">
    <Messages>
      <Message Id="0" ParentId="779" UserId="86978" Date="03/09/2013 00:04:31" Content="From: https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/XImz-gJOVlk&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;hapCount &lt;- 4&#xD;&#xA;markerCount &lt;- 129    # 128 results in no warning&#xD;&#xA;&#xD;&#xA;set.seed(3893393)&#xD;&#xA;fakeyData &lt;- data.frame(&#xD;&#xA;  value          = runif(markerCount* hapCount), &#xD;&#xA;  markerPosition = paste(&quot;pos&quot;,  rep(1: markerCount,  hapCount),  sep=&quot;&quot;), &#xD;&#xA;  haplotype      = paste(&quot;hap&quot;,  rep(1: hapCount,  each= markerCount),  sep=&quot;&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(fakeyData,  aes(x=markerPosition,  y=value,  fill=haplotype,  color=haplotype)) + &#xD;&#xA;  geom_bar(stat=&quot;identity&quot;,  position=&quot;stack&quot;) &#xD;&#xA;# Warning message:&#xD;&#xA;# position_stack requires constant width: output may be incorrect &#xD;&#xA;```" />
      <Message Id="35944294" ParentId="779" UserId="4196" Date="02/24/2014 21:56:50" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="780" Title="mapproj required for tests to run cleanly">
    <Messages>
      <Message Id="0" ParentId="780" UserId="1007591" Date="03/09/2013 18:13:56" Content="But mapproj is only a suggested package.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="14669303" ParentId="780" UserId="4196" Date="03/09/2013 19:49:19" Content="Suggested packages are required for tests." />
      <Message Id="14669303" ParentId="780" UserId="4196" Date="03/09/2013 19:49:19" Content="Suggested packages are required for tests." />
    </Messages>
  </Topic>
  <Topic Id="781" Title="In validDetails.polygon(x) : NAs introduced by coercion ERROR still...">
    <Messages>
      <Message Id="0" ParentId="781" UserId="328624" Date="03/15/2013 21:32:58" Content="I have updated my ggplot2 package,  but if I use your example in Fix #741:&#xD;&#xA;&#xD;&#xA;&gt;ggplot(faithful,  aes(x = eruptions,  y = waiting)) +&#xD;&#xA;+   stat_density2d(aes(colour = ..level..),  geom=&quot;polygon&quot;) +&#xD;&#xA;+   xlim(0.5,  6) + ylim(40,  110)&#xD;&#xA;&#xD;&#xA;I am still getting the same error: &#xD;&#xA;&#xD;&#xA;Warning message:&#xD;&#xA;In validDetails.polygon(x) : NAs introduced by coercion&#xD;&#xA;&#xD;&#xA;Wasn't this suppose to be fixed in the version ggplot2 0.9.3.1?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: i386-apple-darwin9.8.0/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 7 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] proto_0.3-10    MASS_7.3-23     mapproj_1.2-0  &#xD;&#xA;[ 4 ] maps_2.3-2      ggmap_2.2       ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1    dichromat_2.0-0    &#xD;&#xA; [ 3 ] digest_0.6.3        grid_2.15.2        &#xD;&#xA; [ 5 ] gtable_0.1.2        labeling_0.1       &#xD;&#xA; [ 7 ] munsell_0.4         plyr_1.8           &#xD;&#xA; [ 9 ] png_0.1-4           RColorBrewer_1.0-5 &#xD;&#xA;[ 11 ] reshape2_1.2.2      RgoogleMaps_1.2.0.2&#xD;&#xA;[ 13 ] rjson_0.2.12        scales_0.2.3       &#xD;&#xA;[ 15 ] stringr_0.6.2       tools_2.15.2   " />
      <Message Id="15012720" ParentId="781" UserId="86978" Date="03/16/2013 21:39:21" Content="Duplicate of #782." />
    </Messages>
  </Topic>
  <Topic Id="782" Title="In validDetails.polygon(x) : NAs introduced by coercion ERROR still...">
    <Messages>
      <Message Id="0" ParentId="782" UserId="328624" Date="03/15/2013 21:34:11" Content="I have updated my ggplot2 package,  but if I use your example in Fix #741:&#xD;&#xA;&#xD;&#xA;&gt;ggplot(faithful,  aes(x = eruptions,  y = waiting)) +&#xD;&#xA;+   stat_density2d(aes(colour = ..level..),  geom=&quot;polygon&quot;) +&#xD;&#xA;+   xlim(0.5,  6) + ylim(40,  110)&#xD;&#xA;&#xD;&#xA;I am still getting the same error: &#xD;&#xA;&#xD;&#xA;Warning message:&#xD;&#xA;In validDetails.polygon(x) : NAs introduced by coercion&#xD;&#xA;&#xD;&#xA;Wasn't this suppose to be fixed in the version ggplot2 0.9.3.1?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: i386-apple-darwin9.8.0/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 7 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] proto_0.3-10    MASS_7.3-23     mapproj_1.2-0  &#xD;&#xA;[ 4 ] maps_2.3-2      ggmap_2.2       ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1    dichromat_2.0-0    &#xD;&#xA; [ 3 ] digest_0.6.3        grid_2.15.2        &#xD;&#xA; [ 5 ] gtable_0.1.2        labeling_0.1       &#xD;&#xA; [ 7 ] munsell_0.4         plyr_1.8           &#xD;&#xA; [ 9 ] png_0.1-4           RColorBrewer_1.0-5 &#xD;&#xA;[ 11 ] reshape2_1.2.2      RgoogleMaps_1.2.0.2&#xD;&#xA;[ 13 ] rjson_0.2.12        scales_0.2.3       &#xD;&#xA;[ 15 ] stringr_0.6.2       tools_2.15.2   " />
      <Message Id="15012715" ParentId="782" UserId="86978" Date="03/16/2013 21:38:42" Content="Did you restart R after installing the new version of ggplot2? Simply detaching and re-loading the package doesn't always work properly." />
      <Message Id="15012784" ParentId="782" UserId="328624" Date="03/16/2013 21:44:47" Content="I did so this morning,  and it worked. Thanks so much. Sorry for the false&#xD;&#xA;issue.&#xD;&#xA;&#xD;&#xA;On Sat,  Mar 16,  2013 at 2:38 PM,  Winston Chang &lt;notifications@github.com&gt;wrote:&#xD;&#xA;&#xD;&#xA;&gt; Did you restart R after installing the new version of ggplot2? Simply&#xD;&#xA;&gt; detaching and re-loading the package doesn't always work properly.&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/782#issuecomment-15012715&gt;&#xD;&#xA;&gt; .&#xD;&#xA;&gt;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;-- &#xD;&#xA;Casey L. McKnight" />
    </Messages>
  </Topic>
  <Topic Id="783" Title="Misleading error message from scale_x_discrete">
    <Messages>
      <Message Id="0" ParentId="783" UserId="321235" Date="03/17/2013 00:00:25" Content="The error generated when dates are passed to scale_x_discrete is misleading:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;tmp &lt;- data.frame(x = as.Date(c(&quot;2012-03-15&quot;,  &quot;2012-03-16&quot;,  &quot;2012-03-17&quot;)), &#xD;&#xA;                  y = 1:3)&#xD;&#xA;ggplot(tmp,  aes(x=x,  y=y)) +&#xD;&#xA;  geom_line() +&#xD;&#xA;  scale_x_discrete()&#xD;&#xA;```&#xD;&#xA;gives&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error: Discrete value supplied to continuous scale&#xD;&#xA;```&#xD;&#xA;The error is incorrect: the problem is that a Date was passed to a discrete scale,  not that a discrete value was provided to a continuous scale.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: x86_64-unknown-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] reshape2_1.2.2  ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1   compiler_2.15.2    dichromat_2.0-0    digest_0.6.3      &#xD;&#xA; [ 5 ] grid_2.15.2        gtable_0.1.2       labeling_0.1       MASS_7.3-23       &#xD;&#xA; [ 9 ] munsell_0.4        plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5&#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2      tools_2.15.2      &#xD;&#xA;```" />
      <Message Id="35944325" ParentId="783" UserId="4196" Date="02/24/2014 21:57:05" Content="This sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="784" Title="fix in stat_ecdf for Inf and NA values">
    <Messages>
      <Message Id="0" ParentId="784" UserId="1537140" Date="03/21/2013 17:08:03" Content="```stat_ecdf``` fails when at least one value in ```data$x``` is ```NA``` or ```Inf```:&#xD;&#xA;- for ```NA```,  the ```min```/```max``` become ```NA```,  leading to an error in ```seq```&#xD;&#xA;- for ```Inf``` the min/max become infinite,  and the finite end of the range is the only finite point in the result of the ```seq```-call. &#xD;&#xA;&#xD;&#xA;The fix removes ```NA``` and ```Inf``` for the purpose of computing the x-range. Note that all values are still included in the call to ```ecdf``` (which removes NAs,  but handles ```Inf```s correctly)." />
      <Message Id="35944417" ParentId="784" UserId="4196" Date="02/24/2014 21:57:51" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="785" Title="Plotting aes(fill=`integer column`) or aes(colour=`integer column`) fail with unrelated error message">
    <Messages>
      <Message Id="0" ParentId="785" UserId="360279" Date="03/24/2013 02:31:37" Content="To borrow an example from [ stackoverflow ](http://stackoverflow.com/questions/3541713/how-to-plot-two-histograms-together-in-r):&#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;chicks &lt;- data.frame(length = rnorm(100,  4,  2),  animal = 2)&#xD;&#xA;carrots &lt;- data.frame(length = rnorm(500,  9,  3),  animal = 1)&#xD;&#xA;&#xD;&#xA;measured_things &lt;- rbind(chicks,  carrots)&#xD;&#xA;&#xD;&#xA;ggplot(measured_things,  aes(x=length,  fill=animal)) + geom_bar()&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;Which produces the flabbergasting error message:&#xD;&#xA;&#xD;&#xA;&gt; Error in unit(tic_pos.c,  &quot;mm&quot;) : 'x' and 'units' must have length &gt; 0&#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;measured_things$status = c('animal',  'not')[ measured_things$animal ]&#xD;&#xA;# or measured_things$status = as.factor(measured_things$animal)&#xD;&#xA;&#xD;&#xA;ggplot(measured_things,  aes(x=length,  fill=status)) + geom_bar()&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;Which works beautifully! Seems like `aes(fill=...)` and `aes(colour=...)` could very well force conversion to factor,  but there might be other use-cases I'm not aware of,  but at least the error message could be more helpful.&#xD;&#xA;" />
      <Message Id="15419622" ParentId="785" UserId="463252" Date="03/25/2013 19:51:06" Content="That is a bad error message,  but the problem is not what you think it is. First,  `animal` is numeric,  not integer (there is a distinction in R); you get the same error if you set `animal=2.5` in chicks.&#xD;&#xA;&#xD;&#xA;In general,  `fill` and `colour` can be mapped to continuous variables,  so always forcing to a factor (that is discrete) variable is not a good idea. It might be inside a `geom_bar()`/`stat_bin()`,  but I'm not sure of the implications of that.&#xD;&#xA;&#xD;&#xA;You already found one work-around (paraphrased):&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(measured_things,  aes(x=length,  fill=factor(animal))) + geom_bar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Here is another one&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(measured_things,  aes(x=length,  group=animal,  fill=animal)) + geom_bar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;## Problem (conceptually)&#xD;&#xA;&#xD;&#xA;Mapping a continuous variable to an aesthetic after it has been processed through a stat is not well defined. Each piece of data in the stat results is an aggregation of information from the original data,  and it is not clear how to make an aggregated fill or colour aesthetic.&#xD;&#xA;&#xD;&#xA;A discrete aesthetic is not a problem; the behavior there is to perform the aggregation on each subset of the discrete variable(s) separately. Then this constant (within a subset) aesthetic can be applied to all points of the aggregation (of that subset). That is why explicitly setting `group=animal` works; it defines the subsets. By default,  `group` is the interaction of all discrete variables,  but in the example there are no discrete variables,  so there is only one group.&#xD;&#xA;&#xD;&#xA;The error happens because the code does not detect this ill-defined condition and passes data down to ever-lower functions until something can't handle what it is given and the error is thrown then.&#xD;&#xA;&#xD;&#xA;## Problem (technically)&#xD;&#xA;&#xD;&#xA;Splitting up the plotting steps&#xD;&#xA;```r-lang&#xD;&#xA;p &lt;- ggplot(measured_things,  aes(x=length,  fill=animal)) + geom_bar()&#xD;&#xA;pb &lt;- ggplot_build(p)&#xD;&#xA;pg &lt;- ggplot_gtable(pb)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The error is thrown by &#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;  label_pos &lt;- unit(tic_pos.c,  &quot;mm&quot;)&#xD;&#xA;```&#xD;&#xA;in `guide_gengrob.colorbar` in `guide-colorbar.r`. `tic_pos.c` in the call is `numeric(0)`. This is because &#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;&gt; guide$key&#xD;&#xA;[ 1 ] fill   .label .value&#xD;&#xA;&lt;0 rows&gt; (or 0-length row.names)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Which happens because the the scale is &quot;empty&quot;,  so `scale_breaks` returns `numeric(0)` in `guide_train.colorbar` in `guide_colorbar.r`. That happens because there is no `fill` in the data and so `scale$range$range` is `NULL`.&#xD;&#xA;&#xD;&#xA;Which leads to another &quot;workaround&quot; : &#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(measured_things,  aes(x=length,  fill=animal)) + stat_bin() +&#xD;&#xA;  scale_fill_continuous(limits=c(1,  2))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;which shows that `fill` isn't doing anything.  Note that legend guides get this right:&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(measured_things,  aes(x=length,  fill=animal)) + stat_bin() +&#xD;&#xA;  scale_fill_continuous(guide=guide_legend())&#xD;&#xA;```&#xD;&#xA;gives a plot without any legend (or any effect of `fill`).&#xD;&#xA;&#xD;&#xA;I think this is because of&#xD;&#xA;```r-lang&#xD;&#xA;  if (empty(key) || all(is.na(breaks))) return(NULL)&#xD;&#xA;```&#xD;&#xA;in `guide_train.legend` in `guide-legend.r`. Something similar should be in `guide_train.colorbar`.&#xD;&#xA;&#xD;&#xA;I'm going to let someone else who is more familiar with the inner workings of guides to implement this so that it doesn't break anything else." />
      <Message Id="35944491" ParentId="785" UserId="4196" Date="02/24/2014 21:58:28" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="786" Title="documentation formatting issue on website">
    <Messages>
      <Message Id="0" ParentId="786" UserId="3956910" Date="03/24/2013 16:16:30" Content="http://docs.ggplot2.org/current/translate_qplot_ggplot.html&#xD;&#xA;has pretty much lost all of its' formatting and just wraps continuously." />
      <Message Id="15420292" ParentId="786" UserId="463252" Date="03/25/2013 19:57:40" Content="Maybe because there is no executable R code? Is there a reason all the code is commented out? I can understand wrapping it in `\donttest` or `\dontrun`,  but not commenting it out.&#xD;&#xA;&#xD;&#xA;Also,  this isn't new. It has been that way in previous releases:&#xD;&#xA;&#xD;&#xA;http://docs.ggplot2.org/0.9.3/translate_qplot_ggplot.html&#xD;&#xA;http://docs.ggplot2.org/0.9.2.1/translate_qplot_ggplot.html&#xD;&#xA;" />
      <Message Id="35947750" ParentId="786" UserId="4196" Date="02/24/2014 22:27:24" Content="Moved to https://github.com/hadley/staticdocs/issues/55" />
    </Messages>
  </Topic>
  <Topic Id="787" Title="Two geom_bar() and wrong order of factor variable">
    <Messages>
      <Message Id="0" ParentId="787" UserId="3464669" Date="03/25/2013 21:47:07" Content="I have problem with correct order of factor variable while ploting bars in ggplot2. I am using two geom_bars with subsets of original dataset (variable g with two levels 'A' and 'B').&#xD;&#xA;&#xD;&#xA;How can I preserve original order of factor variable? There is no problem when my var is numeric,  but let assume that x should be factor.&#xD;&#xA;&#xD;&#xA;Here is my code:&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;dane&lt;-data.frame(x=1:10, y=seq(-5, 4), g=rep(c('A', 'B'), each=5))&#xD;&#xA;dane$x&lt;-as.factor(dane$x)&#xD;&#xA;&#xD;&#xA;  ggplot(data=dane, aes(x=x, y=y, fill=g)) + &#xD;&#xA;    geom_bar(subset=.(g=='A'), stat='identity') +&#xD;&#xA;    geom_bar(subset=.(g=='B'), stat='identity')&#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;and a result&#xD;&#xA;&#xD;&#xA;![ wrong_order ](https://f.cloud.github.com/assets/3464669/300341/d93f4764-9594-11e2-9b93-8e8ebf5559c0.jpeg)&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="788" Title="Plot legend not displaying colors in graphics window and jpg export (pdf export is fine)">
    <Messages>
      <Message Id="0" ParentId="788" UserId="1598473" Date="03/26/2013 10:29:55" Content="A problem appeared recently (perhaps since my upgrade to ggplot2 version 0.9.3.1). When I run the command  &#xD;&#xA;&#xD;&#xA;ggplot(data.frame(x=rnorm(100),  y=runif(100),  c=rbinom(100,  size=3,  prob=c(1/3)))) + geom_line(aes(x=x,  y=y,  group=c,  color=c))&#xD;&#xA;&#xD;&#xA;the legend displayed in the graphics window within the R environment is missing the color scale (see attached screenshot). &#xD;&#xA;&#xD;&#xA;![ bug_lines ](https://f.cloud.github.com/assets/1598473/302232/d3fa812c-95ff-11e2-8db3-bead8b8ac64d.JPG)&#xD;&#xA;&#xD;&#xA;The problem persists when I export to JPEG (see below),  but oddly,  if I export to PDF (not attached due to github limitation),  the legend looks fine.&#xD;&#xA;&#xD;&#xA;![ export_lines ](https://f.cloud.github.com/assets/1598473/302214/7b156c48-95ff-11e2-909c-d02d796e3225.jpeg)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Version information:&#xD;&#xA;platform       i386-w64-mingw32             &#xD;&#xA;arch           i386                         &#xD;&#xA;os             mingw32                      &#xD;&#xA;system         i386,  mingw32                &#xD;&#xA;status                                      &#xD;&#xA;major          2                            &#xD;&#xA;minor          15.2                         &#xD;&#xA;year           2012                         &#xD;&#xA;month          10                           &#xD;&#xA;day            26                           &#xD;&#xA;svn rev        61015                        &#xD;&#xA;language       R                            &#xD;&#xA;version.string R version 2.15.2 (2012-10-26)&#xD;&#xA;nickname       Trick or Treat     &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="15468527" ParentId="788" UserId="86978" Date="03/26/2013 16:19:11" Content="Did you restart R after upgrading ggplot2? Sometimes if you try to reload the upgraded package without restarting R,  it can do odd things like this." />
      <Message Id="15514933" ParentId="788" UserId="1598473" Date="03/27/2013 10:08:46" Content="Yes,  I restarted R and even rebooted,  but the behavior persists." />
      <Message Id="15601001" ParentId="788" UserId="86978" Date="03/28/2013 17:08:12" Content="Can you include the output of `sessionInfo()`? That will help to diagnose the problem." />
      <Message Id="15766955" ParentId="788" UserId="1598473" Date="04/02/2013 10:10:50" Content="```r&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: i386-w64-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United Kingdom.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United Kingdom.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United Kingdom.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                           &#xD;&#xA;[ 5 ] LC_TIME=English_United Kingdom.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1   dichromat_2.0-0    digest_0.6.2       grid_2.15.2       &#xD;&#xA; [ 5 ] gtable_0.1.2       labeling_0.1       MASS_7.3-23        munsell_0.4       &#xD;&#xA; [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2   &#xD;&#xA;```" />
      <Message Id="15784139" ParentId="788" UserId="463252" Date="04/02/2013 15:56:27" Content="It works for me (I get a color bar on the on-screen graph):&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: i386-w64-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1   dichromat_2.0-0    digest_0.6.3       grid_2.15.2       &#xD;&#xA; [ 5 ] gtable_0.1.2       labeling_0.1       MASS_7.3-23        munsell_0.4       &#xD;&#xA; [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2     &#xD;&#xA;&gt; win.version()&#xD;&#xA;[ 1 ] &quot;Windows 7 x64 (build 7601) Service Pack 1&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This matches your session info except for locale (any maybe Window's version). When I change the locale,  I still see a color bar on screen.&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 2.15.2 (2012-10-26)&#xD;&#xA;Platform: i386-w64-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United Kingdom.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United Kingdom.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United Kingdom.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                           &#xD;&#xA;[ 5 ] LC_TIME=English_United Kingdom.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-1   dichromat_2.0-0    digest_0.6.3       grid_2.15.2       &#xD;&#xA; [ 5 ] gtable_0.1.2       labeling_0.1       MASS_7.3-23        munsell_0.4       &#xD;&#xA; [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2      tools_2.15.2      &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I don't know why it is not working for you.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="15801266" ParentId="788" UserId="1598473" Date="04/02/2013 20:43:21" Content="My version is &quot;Windows XP (build 2600) Service Pack 3&quot;" />
      <Message Id="35944647" ParentId="788" UserId="4196" Date="02/24/2014 21:59:50" Content="If we can't reproduce it,  we can't fix it. Sorry :(" />
    </Messages>
  </Topic>
  <Topic Id="789" Title="trouble with unit arithmetics">
    <Messages>
      <Message Id="0" ParentId="789" UserId="238047" Date="03/26/2013 12:15:54" Content="Setting the margin using unit arithmetics fails&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;&#xD;&#xA;```splus&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;grid&quot;)&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(mpg,  aes(displ,  hwy)) + geom_point()&#xD;&#xA;&#xD;&#xA;margin1 &lt;-&#xD;&#xA;  unit(c(0.5,  1,  0.5,  1), &#xD;&#xA;       c(&quot;lines&quot;,  &quot;lines&quot;,  &quot;lines&quot;,  &quot;strwidth&quot;), &#xD;&#xA;       data=list(NULL,  NULL,  NULL,  &quot;uplrp&quot;))&#xD;&#xA;&#xD;&#xA;margin2 &lt;-&#xD;&#xA;  unit(c(0,  0,  0,  1), &#xD;&#xA;       c(&quot;lines&quot;,  &quot;lines&quot;,  &quot;lines&quot;,  &quot;strwidth&quot;), &#xD;&#xA;       data=list(NULL,  NULL,  NULL,  &quot;1.00&quot;))&#xD;&#xA;&#xD;&#xA;margin3 &lt;- margin1-margin2&#xD;&#xA;&#xD;&#xA;margin3                                ## valid&#xD;&#xA;&#xD;&#xA;p + theme(plot.margin=margin1)         ## works&#xD;&#xA;p + theme(plot.margin=margin2)         ## works&#xD;&#xA;p + theme(plot.margin=margin3)         ## does not work&#xD;&#xA;```" />
      <Message Id="15492668" ParentId="789" UserId="238047" Date="03/26/2013 22:23:02" Content="I got an Email from Paul Murrel:&#xD;&#xA;&#xD;&#xA;&gt; that is happening because add_theme() tries to do the following to margin3 (where 'y' is margin3) ...&#xD;&#xA;&gt; &#xD;&#xA;&gt;             idx &lt;- !vapply(y,  is.null,  logical(1))&#xD;&#xA;&gt;             idx &lt;- names(idx[ idx ])&#xD;&#xA;&gt;             x[ idx ] &lt;- y[ idx ]&#xD;&#xA;&gt; &#xD;&#xA;&gt; ... which is not a sensible thing to do with a unit arithmetic object. I would argue that this is a problem with add_theme() trying to do something very generic with the low-level structure of an object that it does not understand and should not be poking around in.  That block of code should probably be a generic function,  for which it may be necessary to write a 'unit' method. " />
      <Message Id="35944668" ParentId="789" UserId="4196" Date="02/24/2014 21:59:58" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="790" Title="Plotting vectors using facets. Wrong margins">
    <Messages>
      <Message Id="0" ParentId="790" UserId="3376382" Date="04/01/2013 03:52:00" Content="I found a strange bug in plotting vectors using facets. &#xD;&#xA;&#xD;&#xA;    Test1 = seq(1:10)&#xD;&#xA;    Test2 = rep(c(1, 2),  5)&#xD;&#xA;    Test3 = rep(1:5, 2)&#xD;&#xA;    qplot(rep(1, 10), Test1,  facets=Test2~Test3) ## this one gives a wrong plot.&#xD;&#xA;&#xD;&#xA;The right margin is wrong. &#xD;&#xA;&#xD;&#xA;After making data.frame out of the same vectors and specifying data explicitly,  the plot is correct. &#xD;&#xA; &#xD;&#xA;    test.data &lt;- data.frame(Test1,  Test2,  Test3)&#xD;&#xA;    qplot(rep(1, 10), Test1,  data=test.data,  facets=Test2~Test3)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Here is the version information. &#xD;&#xA;&#xD;&#xA;&gt; &#xD;&#xA;Package: ggplot2&#xD;&#xA;Type: Package&#xD;&#xA;Title: An implementation of the Grammar of Graphics&#xD;&#xA;Version: 0.9.3.1&#xD;&#xA;Packaged: 2013-03-01 17:44:46 UTC; ubuntu&#xD;&#xA;NeedsCompilation: no&#xD;&#xA;Repository: CRAN&#xD;&#xA;Date/Publication: 2013-03-02 15:56:56&#xD;&#xA;Built: R 2.15.2; ; 2013-04-01 03:15:46 UTC; unix&#xD;&#xA;" />
      <Message Id="15780910" ParentId="790" UserId="463252" Date="04/02/2013 15:09:21" Content="I can confirm this bug.&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;Test1 = seq(1:10)&#xD;&#xA;Test2 = rep(c(1, 2),  5)&#xD;&#xA;Test3 = rep(1:5, 2)&#xD;&#xA;p.wrong &lt;- qplot(rep(1, 10), Test1,  facets=Test2~Test3)&#xD;&#xA;&#xD;&#xA;test.data &lt;- data.frame(Test1,  Test2,  Test3)&#xD;&#xA;p.right &lt;- qplot(rep(1, 10), Test1,  data=test.data,  facets=Test2~Test3)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The first (wrong) version is&#xD;&#xA;&#xD;&#xA;![ p wrong ](https://f.cloud.github.com/assets/463252/328909/f514e8f0-9ba6-11e2-9f71-d6aaa3d55ab6.png)&#xD;&#xA;&#xD;&#xA;and the data of `ggplot_build` shows the `y`'s have not been aligned wit their facets.&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;&gt; ggplot_build(p.wrong)$data[ [ 1 ] ]&#xD;&#xA;   x  y PANEL group&#xD;&#xA;1  1  1     1     1&#xD;&#xA;2  1  2     2     2&#xD;&#xA;3  1  3     3     3&#xD;&#xA;4  1  4     4     4&#xD;&#xA;5  1  5     5     5&#xD;&#xA;6  1  6     6     6&#xD;&#xA;7  1  7     7     7&#xD;&#xA;8  1  8     8     8&#xD;&#xA;9  1  9     9     9&#xD;&#xA;10 1 10    10    10&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The second (right) image is&#xD;&#xA;&#xD;&#xA;![ p right ](https://f.cloud.github.com/assets/463252/328921/2c862f56-9ba7-11e2-9e48-1dc6427add55.png)&#xD;&#xA;&#xD;&#xA;with a correct data in the build&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;&gt; ggplot_build(p.right)$data[ [ 1 ] ]&#xD;&#xA;   x  y PANEL group&#xD;&#xA;1  1  1     1     1&#xD;&#xA;2  1  7     2     2&#xD;&#xA;3  1  3     3     3&#xD;&#xA;4  1  9     4     4&#xD;&#xA;5  1  5     5     5&#xD;&#xA;6  1  6     6     6&#xD;&#xA;7  1  2     7     7&#xD;&#xA;8  1  8     8     8&#xD;&#xA;9  1  4     9     9&#xD;&#xA;10 1 10    10    10&#xD;&#xA;```" />
      <Message Id="15785298" ParentId="790" UserId="4196" Date="04/02/2013 16:13:55" Content="There's a reason you always want to use data frames with facets,  and I'm surprised this example doesn't fail with an error (as it should)" />
    </Messages>
  </Topic>
  <Topic Id="791" Title="Better error message for plots (or facets with free scales) with all missing values.">
    <Messages>
      <Message Id="0" ParentId="791" UserId="828195" Date="04/02/2013 20:54:58" Content="This bit me in a large, faceted plot where it wasn't entirely obvious what was going on:&#xD;&#xA;```&#xD;&#xA;d &lt;- data.frame(x = 1:5,  y = as.double(NA))&#xD;&#xA;ggplot(data = d,  aes(x,  y)) + geom_point()&#xD;&#xA;Error in seq.default(from = best$lmin,  to = best$lmax,  by = best$lstep) : &#xD;&#xA;  'from' must be of length 1&#xD;&#xA;```&#xD;&#xA;This is more like what caught me:&#xD;&#xA;```&#xD;&#xA;d &lt;- expand.grid(x = 1:5,  f = letters[ 1:5 ])&#xD;&#xA;d$y &lt;- rnorm(25)&#xD;&#xA;is.na(d$y) &lt;- d$f == 'a'&#xD;&#xA;ggplot(data = d,  aes(x,  y)) + geom_point() + facet_wrap(~ f,  scales = 'free_y')&#xD;&#xA;```&#xD;&#xA;Is it possible to catch this error?" />
      <Message Id="34102211" ParentId="791" UserId="3003461" Date="02/04/2014 20:18:36" Content="I've encountered the same issue in a large dataset with faceted plots after melting the dataframe. Is there any workaround?" />
      <Message Id="35944683" ParentId="791" UserId="4196" Date="02/24/2014 22:00:09" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="792" Title="fix typo in geom_point docs">
    <Messages>
      <Message Id="0" ParentId="792" UserId="1406263" Date="04/03/2013 21:49:44" Content="" />
      <Message Id="15967557" ParentId="792" UserId="86978" Date="04/05/2013 16:53:26" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="793" Title="stat_contour with geom=&quot;polygon&quot; broken">
    <Messages>
      <Message Id="0" ParentId="793" UserId="1406263" Date="04/04/2013 04:55:43" Content="```&#xD;&#xA;library(reshape2)&#xD;&#xA;volcano3d &lt;- melt(volcano)&#xD;&#xA;names(volcano3d) &lt;- c(&quot;x&quot;,  &quot;y&quot;,  &quot;z&quot;)&#xD;&#xA;# Basic plot&#xD;&#xA;v &lt;- ggplot(volcano3d,  aes(x,  y,  z = z))&#xD;&#xA;v + stat_contour(geom=&quot;polygon&quot;,  aes(fill=..level..))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;gives `Warning message:&#xD;&#xA;NAs introduced by coercion` and a blank plot.&#xD;&#xA;&#xD;&#xA;Note that it is also broken on the documentation website http://docs.ggplot2.org/0.9.3/stat_contour.html" />
      <Message Id="15880425" ParentId="793" UserId="86978" Date="04/04/2013 05:23:23" Content="I believe this was fixed in 0.9.3.1." />
      <Message Id="16004936" ParentId="793" UserId="1406263" Date="04/06/2013 22:00:48" Content="Indeed it was. Thanks." />
    </Messages>
  </Topic>
  <Topic Id="794" Title="geom_raster(interpolate=TRUE)">
    <Messages>
      <Message Id="0" ParentId="794" UserId="1406263" Date="04/06/2013 22:10:32" Content="This (from the docs) works in qplot style:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;    pp &lt;- function (n, r=4) { &#xD;&#xA;      x &lt;- seq(-r*pi,  r*pi,  len=n)&#xD;&#xA;      df &lt;- expand.grid(x=x,  y=x)&#xD;&#xA;      df$r &lt;- sqrt(df$x^2 + df$y^2)&#xD;&#xA;      df$z &lt;- cos(df$r^2)*exp(-df$r/6)&#xD;&#xA;      df&#xD;&#xA;     }&#xD;&#xA;qplot(x,  y,  data = pp(20),  fill = z,  geom = &quot;raster&quot;,  interpolate = TRUE)&#xD;&#xA;```&#xD;&#xA;However using `interpolate=TRUE` in ggplot style does not produce an interpolated image:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(pp(20)) + aes(x,  y,  fill=z) + geom_raster(interpolate=TRUE)&#xD;&#xA;```" />
      <Message Id="16005817" ParentId="794" UserId="1406263" Date="04/06/2013 23:08:26" Content="A workaround:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(pp(20)) + aes(x,  y,  fill=z) + layer(geom=&quot;raster&quot;,  geom_params=list(interpolate=TRUE))&#xD;&#xA;```" />
      <Message Id="35944697" ParentId="794" UserId="4196" Date="02/24/2014 22:00:16" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="795" Title="geom_area gives odd results for data with duplicated x values">
    <Messages>
      <Message Id="0" ParentId="795" UserId="2557767" Date="04/07/2013 16:33:50" Content="Call this file `dat.csv`.&#xD;&#xA;&#xD;&#xA;&quot;x&quot;, &quot;y&quot;&#xD;&#xA;0.1, 0.9&#xD;&#xA;0.2, 0.8&#xD;&#xA;0.3, 0.8&#xD;&#xA;0.3, 0.8&#xD;&#xA;0.4, 0.7&#xD;&#xA;0.5, 0.8&#xD;&#xA;0.6, 0.8&#xD;&#xA;0.7, 0.8&#xD;&#xA;0.8, 0.75&#xD;&#xA;0.8, 0.76&#xD;&#xA;0.9, 0.8&#xD;&#xA;1.0, 0.7&#xD;&#xA;&#xD;&#xA;Then&#xD;&#xA;&#xD;&#xA;    #!/usr/bin/Rscript&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    stat = read.csv(&quot;dat.csv&quot;)&#xD;&#xA;    png(file = &quot;graph.png&quot;)&#xD;&#xA;    stat = ggplot() + geom_area(data=stat,  aes(x,  y))&#xD;&#xA;    print(stat)&#xD;&#xA;    dev.off()&#xD;&#xA;&#xD;&#xA;gives a plot that is a little curious. See displayed graph. The&#xD;&#xA;problem is that the x value 0.3 is duplicated. This might be&#xD;&#xA;considered an error,  but could be handled more&#xD;&#xA;gracefully. Additionally,  I would like to make a plea for points like&#xD;&#xA;(0.8, 0.75) and (0.8, 0.76) to be dealt with in a reasonable way. Such&#xD;&#xA;values can easily be produced as a result of rounding errors or&#xD;&#xA;simulations that are not using enough precision. I suspect that&#xD;&#xA;whatever geom_area would do with (0.8, 0.75) &amp; (0.8, 0.76) is masked by&#xD;&#xA;the duplicate x value problem.&#xD;&#xA;&#xD;&#xA;Tested on Debian squeeze with R 2.15.3 and 0.9.3.1.&#xD;&#xA;&#xD;&#xA;![ graph ](https://f.cloud.github.com/assets/2557767/349008/65b80dde-9f9f-11e2-8e53-48af90d6b1a2.png)" />
      <Message Id="16018494" ParentId="795" UserId="86978" Date="04/07/2013 16:50:37" Content="Cleaned-up example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dat &lt;- read.csv(header=T,  text='&#xD;&#xA;x, y&#xD;&#xA;0.1, 0.9&#xD;&#xA;0.2, 0.8&#xD;&#xA;0.3, 0.8&#xD;&#xA;0.3, 0.8&#xD;&#xA;0.4, 0.7&#xD;&#xA;0.5, 0.8&#xD;&#xA;0.6, 0.8&#xD;&#xA;0.7, 0.8&#xD;&#xA;0.8, 0.75&#xD;&#xA;0.8, 0.76&#xD;&#xA;0.9, 0.8&#xD;&#xA;1.0, 0.7&#xD;&#xA;')&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;# Stacked&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_area()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think the problem is being caused by `position=&quot;stack&quot;`. This makes it look as expected:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_area(position=&quot;identity&quot;)&#xD;&#xA;```" />
      <Message Id="16019463" ParentId="795" UserId="2557767" Date="04/07/2013 17:40:16" Content="Hi Chang,  &#xD;&#xA;&#xD;&#xA;You're right. That does fix the problem. I should have looked again at the documentation for `geom_area`. So,  I guess this is user errror. However. the document is a little sketchy. For example,  for the page for geom_area,  e.g. [ Area Plot ](http://docs.ggplot2.org/current/geom_area.html),  it is not clear what the different options for position are, &#xD;&#xA;nor are there any examples given." />
      <Message Id="17805895" ParentId="795" UserId="2557767" Date="05/13/2013 11:25:27" Content="Shall I close this?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="796" Title="Installation of the devel version of ggplot2 in 3.0.0">
    <Messages>
      <Message Id="0" ParentId="796" UserId="949275" Date="04/12/2013 00:31:45" Content="I tried to install the devel version of ggplot2 under 3.0.0 (Win 7 64-bit) but got repeated failures until I installed the devel versions of gtable,  scales and plyr first. The initial error message was of the form&#xD;&#xA;&#xD;&#xA;library(devtools)&#xD;&#xA;dev_mode()&#xD;&#xA;install_github(&quot;ggplot2&quot;)&#xD;&#xA;&lt;snip&gt;&#xD;&#xA;Error : package 'gtable' was built before R 3.0.0: please re-install it&#xD;&#xA;&#xD;&#xA;This is not a true statement; gtable was rebuilt under R 3.0.0 on my system and in fact was reinstalled (not updated) before a restart,  but the error persisted until it dawned on me to install the gtable package (devel version) from Github. Then I got an error about scales not being built before 3.0.0; again,  not true,  but it clarified the problem for me. After installing all three devel versions of these packages,  the devel version of ggplot2 installed successfully.&#xD;&#xA;&#xD;&#xA;Request: Please update the error message to indicate that the development version of packages gtable and scales (+ plyr? - I just installed it to be on the safe side) must be installed first from Github. Thanks." />
      <Message Id="17130234" ParentId="796" UserId="2698296" Date="04/28/2013 07:50:05" Content="try about &#xD;&#xA;update.packages(checkBuilt = TRUE,  ask = FALSE)" />
      <Message Id="35944816" ParentId="796" UserId="4196" Date="02/24/2014 22:01:22" Content="Should be ok now." />
    </Messages>
  </Topic>
  <Topic Id="797" Title="date ticks bug for small ranges">
    <Messages>
      <Message Id="0" ParentId="797" UserId="216319" Date="04/14/2013 23:26:05" Content="   x &lt;- as.Date(Sys.time()) + 1:3&#xD;&#xA;   y &lt;- c(1, 2, 3)&#xD;&#xA;   qplot(x, y,  geom=&quot;bar&quot;,  stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;![ plot ](http://i.imgur.com/9gjM4Ob.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;	R version 3.0.0 (2013-04-03)&#xD;&#xA;	Platform: i686-pc-linux-gnu (32-bit)&#xD;&#xA;&#xD;&#xA;	locale:&#xD;&#xA;	 [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA;	 [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA;	 [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA;	 [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xD;&#xA;	 [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;	[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;	attached base packages:&#xD;&#xA;	[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;	other attached packages:&#xD;&#xA;	[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;	loaded via a namespace (and not attached):&#xD;&#xA;	 [ 1 ] colorspace_1.2-1   dichromat_2.0-0    digest_0.6.3       grid_3.0.0        &#xD;&#xA;	 [ 5 ] gtable_0.1.2       labeling_0.1       MASS_7.3-26        munsell_0.4       &#xD;&#xA;	 [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;	[ 13 ] scales_0.2.3       stringr_0.6.2     &#xD;&#xA;" />
      <Message Id="35944829" ParentId="797" UserId="4196" Date="02/24/2014 22:01:30" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="798" Title="Themes Wiki Page needs update">
    <Messages>
      <Message Id="0" ParentId="798" UserId="421859" Date="04/19/2013 06:26:08" Content="The wiki shows that you can create your own theme,  like this: &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;my_theme &lt;- function(base_size = 12) {  &#xD;&#xA;   structure(list(... # list of options...&#xD;&#xA;    ),  class=&quot;options&quot;)&#xD;&#xA; } &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But this doesn't actually work. Reviewing the structure of `theme_get()` shows that a theme has two attributes. `class=c(&quot;theme&quot;, &quot;gg&quot;)` and `complete = TRUE`. &#xD;&#xA;&#xD;&#xA;I would update it myself but I can't seem to find anything on this classing or what TRUE or FALSE would do.&#xD;&#xA;" />
      <Message Id="22718647" ParentId="798" UserId="871533" Date="08/15/2013 18:10:58" Content="Agree: https://github.com/hadley/ggplot2/wiki/Themes uses deprecated calls yet is very high on the list of results when you search..." />
      <Message Id="35944876" ParentId="798" UserId="4196" Date="02/24/2014 22:01:55" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35963181" ParentId="798" UserId="421859" Date="02/25/2014 01:02:21" Content="FYI: This is a request for documentation on an existing,  undocumented,  feature. " />
      <Message Id="35965827" ParentId="798" UserId="4196" Date="02/25/2014 01:43:47" Content="I'll delete the wiki page and I'm working on a themes vignette" />
      <Message Id="35965993" ParentId="798" UserId="421859" Date="02/25/2014 01:46:41" Content="That's great news. Looking forward to it." />
      <Message Id="36025556" ParentId="798" UserId="4196" Date="02/25/2014 16:22:44" Content="Closed in 9b8dc050450bc1a0c9911c1f361058ec583b79e1" />
      <Message Id="36025556" ParentId="798" UserId="4196" Date="02/25/2014 16:22:44" Content="Closed in 9b8dc050450bc1a0c9911c1f361058ec583b79e1" />
      <Message Id="36029848" ParentId="798" UserId="4196" Date="02/25/2014 16:56:55" Content="See http://docs.ggplot2.org/dev/vignettes/themes.html" />
      <Message Id="36036478" ParentId="798" UserId="421859" Date="02/25/2014 17:48:27" Content="I didn't see any explicit usage based examples of the following: &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;theme_set()&#xD;&#xA;theme_get()&#xD;&#xA;theme_update()&#xD;&#xA;```" />
      <Message Id="36036688" ParentId="798" UserId="421859" Date="02/25/2014 17:50:09" Content="That is an excellent description. I see that I've been doing things wrong for a while now. One thing that I think might be missing is that it doesn't show how to use theme_set,  theme_get or theme_update in an explicit fashion. " />
      <Message Id="36036885" ParentId="798" UserId="4196" Date="02/25/2014 17:51:52" Content="Pull requests are welcomed ;)  For Rmarkdown,  it's pretty easy to contribute - just follow go to https://github.com/hadley/ggplot2/edit/master/vignettes/themes.Rmd and make some the changes." />
    </Messages>
  </Topic>
  <Topic Id="799" Title="update_geom_defaults() doesn't respect both spellings of colour / color">
    <Messages>
      <Message Id="0" ParentId="799" UserId="421859" Date="04/21/2013 00:10:04" Content="```&#xD;&#xA;update_geom_defaults(&quot;bar&quot;,    list(color = ...)) # this doesn't work&#xD;&#xA;update_geom_defaults(&quot;bar&quot;,    list(colour = ...)) # this does (not that I mind,  as a Canadian!)&#xD;&#xA;```" />
      <Message Id="22468280" ParentId="799" UserId="4465050" Date="08/12/2013 00:12:37" Content="list(col = ...) does not work either." />
      <Message Id="35944884" ParentId="799" UserId="4196" Date="02/24/2014 22:02:00" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="800" Title="Make it possible to wrap geom and scale defaults in theme definitions">
    <Messages>
      <Message Id="0" ParentId="800" UserId="421859" Date="04/21/2013 06:48:51" Content="This isn't an issue,  this is more of a question about the paradigm being created for overall theme management. &#xD;&#xA;&#xD;&#xA;It would be nice if one could wrap geom and scale defaults in theme definitions. As it is now,  one can define a theme for most attributes associated with the plot. &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;theme_example &lt;- function(base_size = 12) {  &#xD;&#xA;   structure(list(&#xD;&#xA;      ...&#xD;&#xA;   ),  class=c(&quot;theme&quot;, &quot;gg&quot;),  complete=TRUE/FALSE)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;However,  defaults for scale and geom are instantiated seperately. &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;update_geom_defaults(&quot;geom&quot;,  list(...))&#xD;&#xA;scale_colour_discrete &lt;- function(...) scale_colour_brewer(...,  palette=&quot;Dark2&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This instantiation forces the user to remember to add the theme elements,  and forces the user to repeat themselves by writing out the defaults over and over for each use case (think reporting via knitr). &#xD;&#xA;&#xD;&#xA;Perhaps there's a better way to manage this process that I'm not seeing? &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35944896" ParentId="800" UserId="4196" Date="02/24/2014 22:02:05" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="801" Title="Checking for sensible nrow,  ncol in facet_wrap">
    <Messages>
      <Message Id="0" ParentId="801" UserId="197589" Date="04/22/2013 21:17:10" Content="The `nrow` and `ncol` arguments to `facet_wrap` only make sense as positive integers,  but `ggplot2` curerntly does not check their values when the plot variable is assigned.  For example&#xD;&#xA;&#xD;&#xA;    p1 &lt;- ggplot(CO2,  aes(conc,  uptake)) + geom_point() + facet_wrap(~ Type,  nrow = 0)&#xD;&#xA;&#xD;&#xA;is allowed,  an even&#xD;&#xA;&#xD;&#xA;    p2 &lt;- ggplot(CO2,  aes(conc,  uptake)) + geom_point() + facet_wrap(~ Type,  nrow = -2)&#xD;&#xA;&#xD;&#xA;It is only when these plots come to be printed that the problem manifests.&#xD;&#xA;&#xD;&#xA;I suggest adding a check that `nrow` and `ncol` are positive integers into the `facet_wrap` function." />
      <Message Id="35944907" ParentId="801" UserId="4196" Date="02/24/2014 22:02:09" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="802" Title="stat_density linetype not in legend">
    <Messages>
      <Message Id="0" ParentId="802" UserId="104748" Date="04/24/2013 14:45:54" Content="```&#xD;&#xA;library(ggplot2)&#xD;&#xA;df &lt;- data.frame(line=c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;),  col=sample(c(&quot;E&quot;, &quot;F&quot;)),  count=rnorm(100))&#xD;&#xA;ggplot(df,  aes(x=count)) + stat_density(position=&quot;identity&quot;,  aes(linetype=line, colour=col), fill=NA)&#xD;&#xA;```&#xD;&#xA;the line type legend show empty boxes" />
      <Message Id="20508560" ParentId="802" UserId="1741643" Date="07/05/2013 09:20:24" Content="Can replicate with 0.9.3.1.&#xD;&#xA;&#xD;&#xA;![ screenshot from 2013-07-05 11 15 41 ](https://f.cloud.github.com/assets/1741643/752838/7ca14322-e553-11e2-9049-da0a687dc370.png)&#xD;&#xA;&#xD;&#xA;The problem is that both `linetype` and `colour` are specified in the aesthetics. The `colour` legend is drawn,  the `linetype` legend seems to use the default `colour`,  which is `NA` for `stat_density`:&#xD;&#xA;&#xD;&#xA;`ggplot(df,  aes(x=count)) + stat_density(position=&quot;identity&quot;,  aes(linetype=line), fill=NA)`&#xD;&#xA;&#xD;&#xA;![ screenshot from 2013-07-05 11 19 05 ](https://f.cloud.github.com/assets/1741643/752853/f70b941e-e553-11e2-8ce3-4406e8a5ccfb.png)&#xD;&#xA;&#xD;&#xA;Legends for linetype should use the color of the theme,  not the default color of the geometry." />
      <Message Id="20523939" ParentId="802" UserId="463252" Date="07/05/2013 15:15:15" Content="A workaround would be&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;ggplot(df,  aes(x=count)) + &#xD;&#xA;  stat_density(position=&quot;identity&quot;,  aes(linetype=line, colour=col), fill=NA) +&#xD;&#xA;  scale_linetype_discrete(guide=guide_legend(override.aes=aes(colour=&quot;black&quot;)))&#xD;&#xA;```&#xD;&#xA;![ tmp ](https://f.cloud.github.com/assets/463252/754332/a18b10be-e585-11e2-9367-bbd6a11e72c5.png)&#xD;&#xA;" />
      <Message Id="20535173" ParentId="802" UserId="1741643" Date="07/05/2013 19:27:17" Content="Thanks for reminding me of `override.aes`. But isn't this a glitch in ggplot? What would be the correct way to fix it?" />
      <Message Id="20540970" ParentId="802" UserId="463252" Date="07/05/2013 22:06:16" Content="I didn't mean to imply that the current behavior is optimal; I just wanted to give a workaround,  not a fix (because I could do that off the top of my head,  where a true fix would be a lot harder).&#xD;&#xA;&#xD;&#xA;I think your assessment&#xD;&#xA;&#xD;&#xA;&gt; the `linetype` legend seems to use the default `colour`,  which is `NA` for `stat_density`&#xD;&#xA;&#xD;&#xA;is probably right. A simple fix may be that legends should make sure that they don't use `NA` for any of their aesthetics if it would be need to be non-NA to be seen. There s a question as to where to get a global default from,  then. But I don't know if that would break something else; the logic (or really,  where the logic/assumptions broke down) would have to be understood first to give a full fix.&#xD;&#xA;" />
      <Message Id="35944929" ParentId="802" UserId="4196" Date="02/24/2014 22:02:22" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="803" Title="Quick approximation for map projections">
    <Messages>
      <Message Id="0" ParentId="803" UserId="18445" Date="04/29/2013 06:57:55" Content="Instead of reprojecting everything,  we just set the aspect ratio of the plot&#xA;to the ratio between the length of one degree of lat over one degree of lon." />
      <Message Id="35944967" ParentId="803" UserId="4196" Date="02/24/2014 22:02:43" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="804" Title="[ wish ] legend.position to take +/- Inf values for placement inside panel">
    <Messages>
      <Message Id="0" ParentId="804" UserId="18970" Date="05/06/2013 14:02:34" Content="Geoms already accept `+/- Inf` as a shortcut to specify the edge of the plotting panel,  but positioning the legend in the corners of the plotting panel requires a lot of guesswork,  as the coordinates have to be given as proportions of the full drawing area (npc).&#xD;&#xA;&#xD;&#xA;I suggest that `theme(legend.position = c(+Inf,  -Inf))` places the legend in the bottom-right corner of the plotting panel. With facetting it is a bit more tricky,  maybe either a warning with sensible default position,  and/or selecting which panel to draw the legend in (not so well-defined for facet_wrap).&#xD;&#xA;" />
      <Message Id="35944987" ParentId="804" UserId="4196" Date="02/24/2014 22:02:53" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="805" Title="Better documentation for qplot">
    <Messages>
      <Message Id="0" ParentId="805" UserId="4196" Date="05/06/2013 17:32:54" Content="Including common aesthetics like colour and color.&#xD;&#xA;&#xD;&#xA;And fix examples to cover more common use cases.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35945010" ParentId="805" UserId="4196" Date="02/24/2014 22:03:01" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="806" Title="Improvements to black and white themes">
    <Messages>
      <Message Id="0" ParentId="806" UserId="18445" Date="05/07/2013 11:33:21" Content="" />
      <Message Id="20507434" ParentId="806" UserId="1741643" Date="07/05/2013 08:52:41" Content="Why not keep the name of `theme_bw` and call the new theme `theme_linedraw` or `theme_black` instead?" />
      <Message Id="35945095" ParentId="806" UserId="4196" Date="02/24/2014 22:03:37" Content="Unfortunately that change would break existing code so isn't suitable for inclusion in a very mature package like ggplot2.  If you gave them both new names,  I'd reconsider. If so,  please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?" />
    </Messages>
  </Topic>
  <Topic Id="807" Title="Package hexbin not properly imported">
    <Messages>
      <Message Id="0" ParentId="807" UserId="571752" Date="05/08/2013 17:17:01" Content="When I use geom_hex,  I am getting an error that is traced to hexGrob in geom-hex.r. &#xD;&#xA;&#xD;&#xA;    Error during wrapup: object 'hexcoords' not found&#xD;&#xA;&#xD;&#xA;This error does not occur if I have loaded the package `hexbin`,  so I think that `hexbin` isn't properly imported.  I don't see it in the NAMESPACE file." />
      <Message Id="35945109" ParentId="807" UserId="4196" Date="02/24/2014 22:03:43" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="808" Title="[ feature request ] Less strict check on element_xxx class for user-customised elements">
    <Messages>
      <Message Id="0" ParentId="808" UserId="18970" Date="05/10/2013 22:37:38" Content="Periodically people have requested using a [ different type of axis label ](http://stackoverflow.com/questions/14070953/photo-alignment-with-graph-in-r/14078391#14078391),  e.g. an image,  or [ a facet title that spans multiple lines with expressions ](http://stackoverflow.com/a/16491363/471093),  etc. In all these cases,  a possible solution is to replace the default theme element (text,  in both of these cases),  with a completely different beast of a grob. Lattice allows such unpredictable changes to the default functions,  but ggplot2 has internal checks for the class of objects that can be displayed,  making the operation very difficult. &#xD;&#xA;&#xD;&#xA;I suggest that such changes should be a bit easier if ggplot2 wasn't so strict on checking the class of theme elements." />
      <Message Id="35945822" ParentId="808" UserId="4196" Date="02/24/2014 22:10:11" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="809" Title="Extra blank page produced when using gtable functions">
    <Messages>
      <Message Id="0" ParentId="809" UserId="2557767" Date="05/13/2013 11:22:56" Content="In the following code,  the line starting with `gtable_filter` creates an extra blank page if uncommented.&#xD;&#xA;Since I'm only calling print on `stat`,  I don't see any reason for this.&#xD;&#xA;Workarounds/corrections appreciated.&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(gtable)&#xD;&#xA;    pdf(file = &quot;PLOT.pdf&quot;,  width = 5.5,  height = 2.7)&#xD;&#xA;    stat = qplot(Sepal.Length,  Petal.Length,  data = iris,  color = Species)&#xD;&#xA;    ## The following line creates an extra blank page if it is uncommented.&#xD;&#xA;    ## dataleg &lt;- gtable_filter(ggplot_gtable(ggplot_build(stat)),  &quot;guide-box&quot;)&#xD;&#xA;    print(stat)&#xD;&#xA;    dev.off()" />
      <Message Id="19165201" ParentId="809" UserId="2557767" Date="06/09/2013 12:18:55" Content="Ok,  this can be simplified to &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;stat = qplot(Sepal.Length,  Petal.Length,  data = iris,  color = Species)&#xD;&#xA;ggplot_gtable(ggplot_build(stat))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I don't see any good reason why this code brings up a blank display.&#xD;&#xA;&#xD;&#xA;I'll hazard a guess this has something to do with the code style of&#xD;&#xA;returning an argument by calling it. The problem is that just calling an&#xD;&#xA;graphical object in R can have effect of opening a display and writing to it.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="19171270" ParentId="809" UserId="2557767" Date="06/09/2013 18:56:33" Content="I added a Stack Overflow question about this - [ Why does this R ggplot2 code bring up a blank display device? ](http://stackoverflow.com/q/17012518/350713). In particular,  DWin commented&#xD;&#xA;&#xD;&#xA;&gt;Does not happen on OSX: 10.7.5 /R: 3.0.1/ggplot2_0.9.3.1 when called from the GUI 1.60 (6475),  but it does happen &gt;when called within an R session started in Terminal.app.&#xD;&#xA;&#xD;&#xA;On further testing,  my guess about return arguments seems to be false. I think it is something else." />
      <Message Id="19172594" ParentId="809" UserId="140350" Date="06/09/2013 20:10:46" Content="I'm on OSX 10.8.3,  R 3.0.1,  R.gui 1.61 (6492) and ggplot2 0.9.3.1 and the blank page appears for me in both R.app and command line R. The venn diagram of everyone's observations over on SO must point to the answer somehow. Thanks Faheem for pursuing these issues.&#xD;&#xA;&#xD;&#xA;On Jun 9,  2013,  at 2:56 PM,  fmitha &lt;notifications@github.com&gt; wrote:&#xD;&#xA;&#xD;&#xA;&gt; I added a Stack Overflow question about this - Why does this R ggplot2 code bring up a blank display device?. In particular,  DWin commented&#xD;&#xA;&gt; &#xD;&#xA;&gt; Does not happen on OSX: 10.7.5 /R: 3.0.1/ggplot2_0.9.3.1 when called from the GUI 1.60 (6475),  but it does happen &gt;when called within an R session started in Terminal.app.&#xD;&#xA;&gt; &#xD;&#xA;&gt; On further testing,  my guess about return arguments seems to be false. I think it is something else.&#xD;&#xA;&gt; &#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub.&#xD;&#xA;&gt; " />
      <Message Id="19173112" ParentId="809" UserId="2557767" Date="06/09/2013 20:37:23" Content="@baptiste answered my SO question as follows:&#xD;&#xA;&#xD;&#xA;&gt;Some grid grobs have units that can only be resolved at drawing time,  that is to say once a device window is open. This &gt;is the case of text grobs,  for instance,  as their size can depend (in the most general case) of the cex and fontsize &gt;arguments of the parent(s) viewports (which can be nested,  etc.)&#xD;&#xA;&#xD;&#xA;&gt;library(grid)&#xD;&#xA;&gt;widthDetails(textGrob(&quot;hi&quot;))&#xD;&#xA;&gt;The current version of ggplot2 appears to use widthDetails in the code to build the legend grobs (guides_build &gt;function). It is conceivable that this could be replaced by grobWidth,  unless the grob size is too convoluted.&#xD;&#xA;&#xD;&#xA;This looks like what is happening. I'd welcome comments from the developers as to whether it is necessary to open the device in this case. If so,  then it is not a bug,  but is still annoying." />
      <Message Id="19187079" ParentId="809" UserId="2557767" Date="06/10/2013 08:48:47" Content="Another answer by DWin to the SO question suggests that using a null device may be a workaround. I copy his answer below. Comments?&#xD;&#xA;&#xD;&#xA;#########################################################################################&#xD;&#xA;&#xD;&#xA;I wonder if it is related to this thread from 3 years ago on R-Help with this workaround from @G.Grothendieck (copied material follows)&#xD;&#xA;&#xD;&#xA;https://stat.ethz.ch/pipermail/r-help/2010-December/263754.html&#xD;&#xA;&#xD;&#xA;    library(lattice)&#xD;&#xA;    library(zoo)&#xD;&#xA;&#xD;&#xA;    df &lt;- data.frame(y = matrix(rnorm(24),  nrow = 6),  x = 1:6)&#xD;&#xA;    xyplot(zoo(df[ 1:4 ],  df$x),  type = &quot;p&quot;)&#xD;&#xA;&#xD;&#xA;    plot.object &lt;- xyplot(zoo(df[ 1:4 ],  df$x),  type = &quot;p&quot;) &#xD;&#xA;    # problem: a Quartz device is opened (on Mac OS X 10.6)&#xD;&#xA;&#xD;&#xA;Grothendieck wrote in response:&#xD;&#xA;&#xD;&#xA;&gt;This also opens up a window on Windows. It occurs within lattice when lattice issues a trellis.par.get . A workaround would be to open a device directed to null. On Windows this would work. I assume if you use &quot;/dev/null&quot; it would work on your machine.&#xD;&#xA;&#xD;&#xA;    png(&quot;NUL&quot;)&#xD;&#xA;    plot.object &lt;- ...&#xD;&#xA;    dev.off()" />
      <Message Id="19518995" ParentId="809" UserId="18970" Date="06/16/2013 20:59:25" Content="i don't think dev/null should be used; it's an ugly workaround that shouldn't be necessary. It's worth trying replacing widthDetails etc. by grobWidth in the guides code first,  as I think these don't need to open a dummy device and should do the job just fine." />
      <Message Id="19536596" ParentId="809" UserId="2557767" Date="06/17/2013 10:17:41" Content="I'm adding a message from Paul Murrell here.&#xD;&#xA;&#xD;&#xA;On 06/10/13 21:48,  Faheem Mitha wrote:                                                                                  &#xD;&#xA;&gt;                                                                                                                       &#xD;&#xA;&gt; Dear Dr. Murrell,                                                                                                      &#xD;&#xA;&gt;                                                                                                                       &#xD;&#xA;&gt; I wondered if you would care to comment on the following ggplot2 issue.                                               &#xD;&#xA;&gt; https://github.com/hadley/ggplot2/issues/809                                                                          &#xD;&#xA;&gt;                                                                                                                       &#xD;&#xA;&gt; This is about ggplot2 code opening a blank display device.                                                            &#xD;&#xA;&gt;                                                                                                                       &#xD;&#xA;&gt; I posted about this to Stack Overflow,  see                                                                            &#xD;&#xA;&gt; http://stackoverflow.com/q/17012518/350713                                                                            &#xD;&#xA;&gt;                                                                                                                       &#xD;&#xA;&gt; Baptiste wrote (see http://stackoverflow.com/a/17013882/350713) that                                                  &#xD;&#xA;&gt; this was caused by widthDetails in the grid package being called by                                                   &#xD;&#xA;&gt; ggplot2. It is difficult to check this directly,  but it seems like a                                                  &#xD;&#xA;&gt; convincing explanation.                                                                                               &#xD;&#xA;                                                                                                                        &#xD;&#xA;This is correct.  guide_gengrob.legend() in guide-legend.r in 'ggplot2' contains the line ...                           &#xD;&#xA;                                                                                                                        &#xD;&#xA;hgap &lt;- c(convertWidth(unit(0.3,  &quot;lines&quot;),  &quot;mm&quot;))                                                                       &#xD;&#xA;                                                                                                                        &#xD;&#xA;... which requires a device to know how big a &quot;line&quot; is (based on the device font size).                                &#xD;&#xA;                                                                                                                        &#xD;&#xA;It looks like that function is converting all sorts of things to &quot;mm&quot; to arrange the components of a legend,  which      &#xD;&#xA;is probably to simplify the calculations;  you would need to check with the 'ggplot2' authors.                          &#xD;&#xA;                                                                                                                        &#xD;&#xA;NOTE that it is unlikely that that is the only place that this happens,  it is probably just the first place,  so         &#xD;&#xA;&quot;fixing&quot; that one line is probably not going to remove the problem.                                                     &#xD;&#xA;                                                                                                                        &#xD;&#xA;&gt; DWin also wrote that possibly one can choose to open a null device,                                                    &#xD;&#xA;&gt; which does not bring up a window.                                                                                     &#xD;&#xA;                                                                                                                        &#xD;&#xA;Someone on one of the threads mentioned a pdf(file=NULL) device;  that is probably the option with the smallest         &#xD;&#xA;footprint.&#xD;&#xA;&#xD;&#xA; An important point is that it looks like the 'ggplot2' code that builds a &quot;ggplotGrob&quot; is effectively building a        &#xD;&#xA;grob for the current graphics device.  This means that you cannot build a generic ggplotGrob that can be used in any    &#xD;&#xA;situation;  you have to build the grob on the device (and in the context) where you are going to use the ggplotGrob.    &#xD;&#xA;                                                                                                                        &#xD;&#xA;Does that help?                                                                                                         &#xD;&#xA;                                                                                                                        &#xD;&#xA;Paul                                                                                                                    &#xD;&#xA;                                                                                                                        &#xD;&#xA;p.s. Feel free to quote any of that on GitHub or SO if you want to.                                                                                                         " />
      <Message Id="35945133" ParentId="809" UserId="4196" Date="02/24/2014 22:03:56" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="810" Title="Position offset">
    <Messages>
      <Message Id="0" ParentId="810" UserId="2002771" Date="05/15/2013 05:42:43" Content="I wanted to position geom_text inbetween the two extremes of a boolean valued axis. Now I can do this with position = position_offset(0, -.5). I'm not sure if there is already a way to accomplish the same thing with existing ggplot2 features." />
      <Message Id="35945177" ParentId="810" UserId="4196" Date="02/24/2014 22:04:20" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="811" Title="[ request ] Nuanced drop = TRUE for geom_freqpoly">
    <Messages>
      <Message Id="0" ParentId="811" UserId="4441865" Date="05/15/2013 21:56:05" Content="For a density plot,  it would be nice to be able to drop bins with count of zero,  but keep the zeros at the edges (or in the middle) of the distribution. Compare these plots:&#xD;&#xA;![ dropfalse ](https://f.cloud.github.com/assets/4441865/509645/0347404c-bdaa-11e2-97c0-946bc12d2d32.png)&#xD;&#xA;I would like to remove that ugly zero line... but this is what I get with drop = TRUE&#xD;&#xA;![ droptrue ](https://f.cloud.github.com/assets/4441865/509646/050a75de-bdaa-11e2-9612-c93ca054f981.png)&#xD;&#xA;&#xD;&#xA;The zero bin in the middle of the participant distribution creates a misleading figure,  and it would be nice for the distribution edges to go to zero as well." />
      <Message Id="24413350" ParentId="811" UserId="4441865" Date="09/13/2013 18:06:49" Content="I changed the title because this isn't really a feature request,  as the affected plots are incorrect." />
      <Message Id="27920747" ParentId="811" UserId="4441865" Date="11/06/2013 22:33:37" Content="Strange,  I never meant to close this,  just happened by and noticed it was closed..." />
      <Message Id="35945308" ParentId="811" UserId="4196" Date="02/24/2014 22:05:33" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35945907" ParentId="811" UserId="4441865" Date="02/24/2014 22:10:49" Content="That's fair,  but shouldn't this be left open in the meantime,  since it is an open bug? I mean,  it might be fairly rare for users to run into it but to the extent that the GitHub Issues page is a &quot;known bugs&quot; list it could prove helpful for other users to see it here.&#xD;&#xA;&#xD;&#xA;I see now that you're going through and culling bug reports that you're not able to address,  and of course whatever policy you want to take is up to you,  but that really seems counterproductive for an open-source project and sort of defeats the purpose of an Issues page." />
      <Message Id="35948544" ParentId="811" UserId="4196" Date="02/24/2014 22:34:47" Content="Unfortunately we just don't have the brain space to manage a list of open bugs that we're never going to fix.  i.e. this is declaring github issue bankruptcy.  All the issues will still be available via google etc." />
    </Messages>
  </Topic>
  <Topic Id="812" Title="Allow to reverse the order of colours in a brewer palette">
    <Messages>
      <Message Id="0" ParentId="812" UserId="18445" Date="05/16/2013 15:47:20" Content="Use the same argument that scale_*_hue uses: direction" />
      <Message Id="18009828" ParentId="812" UserId="18445" Date="05/16/2013 15:48:17" Content="Requires a change in scales,  in pull request 36 https://github.com/hadley/scales/pull/36" />
      <Message Id="18010352" ParentId="812" UserId="18445" Date="05/16/2013 15:56:26" Content="Even if color brewer scales are meant to be discrete,  sometimes they can be used to denote ordered factors (such as abundance classes,  etc.). In that case,  many brewer palettes go in the &quot;wrong&quot; direction,  associating warm colours with small values. For example:&#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;library(ggplot2)&#xD;&#xA;set.seed(123)&#xD;&#xA;d &lt;- data.frame(x=runif(100),  y=runif(100),  z=factor(round(runif(10)*5)))&#xD;&#xA;p &lt;- ggplot(d) + geom_point(aes(x,  y,  colour=z))&#xD;&#xA;p + scale_color_brewer(palette=&quot;Spectral&quot;)&#xD;&#xA;````&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/513545/0b2544b6-be41-11e2-8a2a-652872de07e7.png)&#xD;&#xA;&#xD;&#xA;Now compare with&#xD;&#xA;```&#xD;&#xA;p + scale_color_brewer(palette=&quot;Spectral&quot;,  direction=-1)&#xD;&#xA;````&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/513547/12ab6878-be41-11e2-85ea-5b4ec1388761.png)&#xD;&#xA;" />
      <Message Id="35945465" ParentId="812" UserId="4196" Date="02/24/2014 22:06:53" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="813" Title="qplot does not facet factor correctly if it is passed without data argument">
    <Messages>
      <Message Id="0" ParentId="813" UserId="4449995" Date="05/16/2013 17:55:27" Content="I don't think this is a problem with faceting,  it is a problem with the way `qplot` builds the data from the environment if you don't pass it as a parameter. &#xD;&#xA;x &lt;- c(0,  0,  1,  1)&#xD;&#xA;y &lt;- c(0,  1,  0,  1)&#xD;&#xA;f1 &lt;- c(&quot;a&quot;,  &quot;a&quot;,  &quot;b&quot;,  &quot;b&quot;)&#xD;&#xA;f2 &lt;- c(&quot;c&quot;,  &quot;d&quot;,  &quot;c&quot;,  &quot;d&quot;)&#xD;&#xA;F1 &lt;- factor(f1)&#xD;&#xA;F2 &lt;- factor(f2)&#xD;&#xA;F11 &lt;- factor(f1,  levels = c(&quot;b&quot;,  &quot;a&quot;))&#xD;&#xA;F22 &lt;- factor(f2,  levels = c(&quot;d&quot;,  &quot;c&quot;))&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(x,  y,  F1,  F2,  F11,  F22)&#xD;&#xA;&#xD;&#xA;qplot(x,  y,  facets = F1 ~ F2) # correct&#xD;&#xA;ggplot(df,  aes(x,  y)) + geom_point(color = &quot;red&quot;,  size = 4) + facet_grid(F1 ~ F2) # correct&#xD;&#xA;qplot(x,  y,  facets = F11 ~ F22) # wrong&#xD;&#xA;ggplot(df,  aes(x,  y)) + geom_point(color = &quot;blue&quot;,  size = 4) + facet_grid(F11 ~ F22) # correct&#xD;&#xA;qplot(x,  y,  facets = F11 ~ F22,  data = df) # correct&#xD;&#xA;" />
      <Message Id="35945485" ParentId="813" UserId="4196" Date="02/24/2014 22:07:00" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="814" Title="Breaks misalignment with scale_x_date">
    <Messages>
      <Message Id="0" ParentId="814" UserId="1530030" Date="05/23/2013 13:56:03" Content="I'm seeing a misalignment between the major and minor breaks when they use different units.&#xD;&#xA;&#xD;&#xA;    df=data.frame(Date=seq(from=as.Date(&quot;2008-12-15&quot;),  &#xD;&#xA;                         to=as.Date(&quot;2013-04-30&quot;),  by=&quot;day&quot;))&#xD;&#xA;    df$y=rnorm(nrow(df))&#xD;&#xA;&#xD;&#xA;    ggplot(df) +&#xD;&#xA;      geom_path(aes(x=Date,  y=y)) +&#xD;&#xA;      scale_x_date(expand=c(0,  0),  breaks=date_breaks(&quot;1 year&quot;),  &#xD;&#xA;                   labels=date_format(&quot;%Y&quot;), &#xD;&#xA;                   minor_breaks=date_breaks(&quot;3 months&quot;))&#xD;&#xA;&#xD;&#xA;If everything is defined using the same units,  the breaks are aligned as expected,  but in this example,  the axis label marks the end,  instead of beginning of the period.&#xD;&#xA;&#xD;&#xA;    ggplot(df) +&#xD;&#xA;      geom_path(aes(x=Date,  y=y)) +&#xD;&#xA;      scale_x_date(expand=c(0,  0),  breaks=date_breaks(&quot;12 months&quot;),  &#xD;&#xA;                   labels=date_format(&quot;%Y&quot;), &#xD;&#xA;                   minor_breaks=date_breaks(&quot;3 months&quot;))" />
      <Message Id="35945489" ParentId="814" UserId="4196" Date="02/24/2014 22:07:04" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="815" Title="Matching arrow sizes when using geom_segment and arrow()">
    <Messages>
      <Message Id="0" ParentId="815" UserId="806435" Date="06/01/2013 18:35:47" Content="Thanks for all the great work on ggplot2!&#xD;&#xA;&#xD;&#xA;Arguably a trivial issue (or feature request).&#xD;&#xA;&#xD;&#xA;When using geom_segment,  I can't get the arrow head size to match segment width.&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/16874922/creating-arrow-head-matching-size-or-lwd-in-ggplot2?noredirect=1#comment24345435_16874922&#xD;&#xA;&#xD;&#xA;Thanks again" />
      <Message Id="35945492" ParentId="815" UserId="4196" Date="02/24/2014 22:07:08" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="816" Title="`stat_contour` shouldn't return any break if `binwidth &gt;&gt; range(data$z)`">
    <Messages>
      <Message Id="0" ParentId="816" UserId="18970" Date="06/04/2013 11:04:05" Content="Consider the following code, &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;b = data.frame(energy = rep(c(1, 2), 5),  &#xD;&#xA;               R = rep(c(1-1e-10,  1),  each=5),  &#xD;&#xA;               N = c(55,  55,  65,  65,  75,  75,  85,  85,  95,  95))&#xD;&#xA;&#xD;&#xA;ggplot(b)+ &#xD;&#xA;  geom_line(aes(energy,  N,  z=R),  binwidth=1, &#xD;&#xA;            alpha=0.5,  stat=&quot;contour&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I suggest that there shouldn't be any level line in this plot because the z data is practically constant across the panel,  and showing a level line suggests that there is some variation commensurate with the chosen binwidth. For more context,  see the SO question:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/16863647/stat-contour-binwidth-oddity&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35945512" ParentId="816" UserId="4196" Date="02/24/2014 22:07:16" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947320" ParentId="816" UserId="18970" Date="02/24/2014 22:23:47" Content="i don't understand the concept of closing issues for the sake of closing them. That means they will be lost forever,  because no-one will know from the list which are were really addressed and which weren't. I've been receiving quite a few similar emails today,  there's no way I could possibly find the skills and energy to submit a pull request for each of the bugs / feature requests I've reported in the past. I wish I hadn't wasted my time submitting them." />
      <Message Id="35949082" ParentId="816" UserId="4196" Date="02/24/2014 22:39:43" Content="Unfortunately I don't see any better way of dealing with this problem. We've effectively had to declare issue bankruptcy - there were so many open issues that there was no way we could ever tackle them  all. This way we can start with a clean slate going forward,  and actually fix some bugs,  rather than being parallelised by the sheer quantity of the problem. I realise it's frustrating,  but I think it's better to be honest about the chances of these bugs getting fixed (effectively 0) rather than giving you false hope.&#xD;&#xA;&#xD;&#xA;And reporting issues was not a waste time - they're not gone forever,  as they're still available via search (and google). " />
    </Messages>
  </Topic>
  <Topic Id="817" Title="multiple calls to annotation_custom fail in certain cases">
    <Messages>
      <Message Id="0" ParentId="817" UserId="2557767" Date="06/10/2013 11:24:25" Content="I'm copying the example from Sandy Musgrove in&#xD;&#xA;http://stackoverflow.com/a/13327793/350713&#xD;&#xA;&#xD;&#xA;In the following code,  two calls to `annotation_custom` result in the object `plotNew`.&#xD;&#xA;But the two legends that should show up in that plot don't,  &#xD;&#xA;(We can call up the display by simply typing `plotNew`.)&#xD;&#xA;Only the first added shows up,  namely `leg2`.&#xD;&#xA;However,  in the case of `plotNew2`,  both circles added via `annotation_custom` show up.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(gridExtra)&#xD;&#xA;library(gtable)&#xD;&#xA;&#xD;&#xA;##Some data&#xD;&#xA;df &lt;- data.frame(&#xD;&#xA;  x = 1:10, &#xD;&#xA;  y = 1:10, &#xD;&#xA;  colour = factor(sample(1:3,  10,  replace = TRUE)), &#xD;&#xA;  size = factor(sample(1:3,  10,  replace = TRUE)))&#xD;&#xA;&#xD;&#xA;### Step 1&#xD;&#xA;# Draw a plot with the colour legend&#xD;&#xA;(p1 &lt;- ggplot(data = df,  aes(x=x,  y=y)) +&#xD;&#xA;   geom_point(aes(colour = colour)) +&#xD;&#xA;   theme_bw() +&#xD;&#xA;   theme(legend.position = &quot;top&quot;))&#xD;&#xA;&#xD;&#xA;## Extract the colour legend - leg1&#xD;&#xA;leg1 &lt;- gtable_filter(ggplot_gtable(ggplot_build(p1)),  &quot;guide-box&quot;) &#xD;&#xA;&#xD;&#xA;## Step 2&#xD;&#xA;## Draw a plot with the size legend&#xD;&#xA;(p2 &lt;- ggplot(data = df,  aes(x=x,  y=y)) +&#xD;&#xA;   geom_point(aes(size = size)) +&#xD;&#xA;   theme_bw())&#xD;&#xA;&#xD;&#xA;## Extract the size legend - leg2&#xD;&#xA;leg2 &lt;- gtable_filter(ggplot_gtable(ggplot_build(p2)),  &quot;guide-box&quot;) &#xD;&#xA;&#xD;&#xA;## Step 3&#xD;&#xA;## Draw a plot with no legends - plot&#xD;&#xA;(plot &lt;- ggplot(data = df,  aes(x=x,  y=y)) +&#xD;&#xA;   geom_point(aes(size = size,  colour = colour)) +&#xD;&#xA;   theme_bw() +&#xD;&#xA;   theme(legend.position = &quot;none&quot;))&#xD;&#xA;&#xD;&#xA;plotNew &lt;- plot + &#xD;&#xA;  annotation_custom(grob = leg2,  xmin = 7,  xmax = 10,  ymin = 0,  ymax = 4) +&#xD;&#xA;  annotation_custom(grob = leg1,  xmin = 2.5,  xmax = 5,  ymin = 7.5,  ymax = 10)&#xD;&#xA;&#xD;&#xA;plotNew2 &lt;- plot +&#xD;&#xA;  annotation_custom(circleGrob()) + annotation_custom(circleGrob(x=0.2,  y=0.2,  r=0.2))&#xD;&#xA;```" />
      <Message Id="19212390" ParentId="817" UserId="2557767" Date="06/10/2013 17:02:10" Content="Something seems to go wrong with `ggplot_build` here. Define&#xD;&#xA;&#xD;&#xA;    pbuild = ggplot_build(plotNew)&#xD;&#xA;&#xD;&#xA;Then,  &#xD;&#xA;&#xD;&#xA;     str(pbuild$plot$layers)&#xD;&#xA;&#xD;&#xA;gives an error. The printout ends with&#xD;&#xA;&#xD;&#xA;     $ :proto object &#xD;&#xA;    Error in object[ [ i ] ] : subscript out of bounds&#xD;&#xA;&#xD;&#xA;I haven't been able to isolate exactly where the problem is. &#xD;&#xA;It looks like the error is with one of components of the `pbuild$plot$layers`&#xD;&#xA;list,  but printing them individually,  i.e. `str(pbuild$plot$layers[ [ i ] ])` for `i=1,  2,  3`,  gives no errors.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="19217129" ParentId="817" UserId="2557767" Date="06/10/2013 18:26:55" Content="I think the problem is here.&#xD;&#xA;&#xD;&#xA;    &gt; str(pbuild$plot$layers[ [ 3 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ],  max.level=0)&#xD;&#xA;    List of 11&#xD;&#xA;     - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;gtable&quot; &quot;grob&quot; &quot;gDesc&quot;&#xD;&#xA;&#xD;&#xA;    grid.draw(pbuild$plot$layers[ [ 3 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ])&#xD;&#xA;&#xD;&#xA;shows that it is the legend.&#xD;&#xA;&#xD;&#xA;We also get&#xD;&#xA;&#xD;&#xA;    &gt; pbuild$plot$layers[ [ 3 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ]&#xD;&#xA;    TableGrob (4 x 15) &quot;layout&quot; :  11 grobs&#xD;&#xA;        z         cells        name                             grob&#xD;&#xA;    1   1 ( 1- 4,  1-15)  background rect[ legend.background.rect.550 ]&#xD;&#xA;    2   2 ( 2- 3,  2- 2)       title       text[ guide.title.text.533 ]&#xD;&#xA;    3   3 ( 2- 2,  4- 4)  key-1-3-bg        rect[ legend.key.rect.541 ]&#xD;&#xA;    4   4 ( 2- 2,  4- 4)   key-1-3-1          points[ GRID.points.542 ]&#xD;&#xA;    5   5 ( 2- 2,  8- 8)  key-1-7-bg        rect[ legend.key.rect.544 ]&#xD;&#xA;    6   6 ( 2- 2,  8- 8)   key-1-7-1          points[ GRID.points.545 ]&#xD;&#xA;    7   7 ( 2- 2, 12-12) key-1-11-bg        rect[ legend.key.rect.547 ]&#xD;&#xA;    8   8 ( 2- 2, 12-12)  key-1-11-1          points[ GRID.points.548 ]&#xD;&#xA;    9   9 ( 2- 2,  6- 6)   label-1-5       text[ guide.label.text.535 ]&#xD;&#xA;    10 10 ( 2- 2, 10-10)   label-1-9       text[ guide.label.text.537 ]&#xD;&#xA;    11 11 ( 2- 2, 14-14)  label-1-13       text[ guide.label.text.539 ]&#xD;&#xA;&#xD;&#xA;but trying to access the 11th component gives:&#xD;&#xA;&#xD;&#xA;    &gt; pbuild$plot$layers[ [ 3 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ]&#xD;&#xA;    Error in pbuild$plot$layers[ [ 3 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ] : &#xD;&#xA;      subscript out of bounds&#xD;&#xA;&#xD;&#xA;So this object reports itself as a list of 11 components,  but only has 10 components.&#xD;&#xA;&#xD;&#xA;Also the above remarks apply to&#xD;&#xA;&#xD;&#xA;    pbuild$plot$layers[ [ 2 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ]&#xD;&#xA;&#xD;&#xA;which corresponds to the other legend." />
      <Message Id="19225082" ParentId="817" UserId="2557767" Date="06/10/2013 20:44:42" Content="Ok,  it looks like the problem is already present earlier. Let us call&#xD;&#xA;&#xD;&#xA;    plotNew &lt;- plot + annotation_custom(grob = leg2,  xmin = 7,  xmax = 10,  ymin = 0,  ymax = 4)&#xD;&#xA;&#xD;&#xA;where plot is defined as in STEP 3 in the first post.&#xD;&#xA;&#xD;&#xA;Then&#xD;&#xA;&#xD;&#xA;    str(plotNew$layers[ [ 2 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ])&#xD;&#xA;&#xD;&#xA;gives an error,  and as above&#xD;&#xA;&#xD;&#xA;    &gt; str(plotNew$layers[ [ 2 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ],  max.level=0)&#xD;&#xA;    List of 11&#xD;&#xA;&#xD;&#xA;but as before there is no 11th component.&#xD;&#xA;&#xD;&#xA;    &gt; plotNew$layers[ [ 2 ] ]$geom_params$grb$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ]&#xD;&#xA;    Error in plotNew$layers[ [ 2 ] ]$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ] : &#xD;&#xA;      subscript out of bounds" />
      <Message Id="19229276" ParentId="817" UserId="2557767" Date="06/10/2013 21:57:18" Content="It looks like this problem is already in the annotation_custom component. Define&#xD;&#xA;&#xD;&#xA;     A =  annotation_custom(grob = leg2,  xmin = 7,  xmax = 10,  ymin = 0,  ymax = 4)&#xD;&#xA;&#xD;&#xA;Then&#xD;&#xA;&#xD;&#xA;    &gt; str(A$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ],  max.level=0)&#xD;&#xA;    List of 11&#xD;&#xA;     - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;gtable&quot; &quot;grob&quot; &quot;gDesc&quot;&#xD;&#xA;&#xD;&#xA;    &gt; A$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ]&#xD;&#xA;    Error in A$geom_params$grob$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ] : &#xD;&#xA;      subscript out of bounds&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="19230475" ParentId="817" UserId="2557767" Date="06/10/2013 22:23:26" Content="This can be traced back to the original legend grob object `leg2` extracted from the plot `p2`.&#xD;&#xA;&#xD;&#xA;    &gt; str(leg2$grobs[ [ 1 ] ]$grobs[ [ 1 ] ],  max.level=0)&#xD;&#xA;    List of 11&#xD;&#xA;     - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;gtable&quot; &quot;grob&quot; &quot;gDesc&quot;&#xD;&#xA;&#xD;&#xA;    &gt; leg2$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ]&#xD;&#xA;    Error in leg2$grobs[ [ 1 ] ]$grobs[ [ 1 ] ][ [ 11 ] ] : subscript out of bounds&#xD;&#xA;&#xD;&#xA;The same apply to `leg1`,  of course. Since `gtable_filter` does the&#xD;&#xA;extraction,  maybe the error is there.&#xD;&#xA;" />
      <Message Id="19315882" ParentId="817" UserId="2557767" Date="06/12/2013 09:50:20" Content="It looks like this problem precedes `gtable_filter`. If we define&#xD;&#xA;&#xD;&#xA;    gp2 = ggplot_gtable(ggplot_build(p2))&#xD;&#xA;&#xD;&#xA;Then calling either&#xD;&#xA;&#xD;&#xA;    str(gp2)&#xD;&#xA;&#xD;&#xA;    or&#xD;&#xA;&#xD;&#xA;    str(gp2$grobs[ [ 8 ] ]$grobs[ [ 1 ] ])&#xD;&#xA;&#xD;&#xA;ends with ` $ NA:Error in object[ [ i ] ] : subscript out of bounds`&#xD;&#xA;and as before&#xD;&#xA;&#xD;&#xA;    &gt; str(gp2$grobs[ [ 8 ] ]$grobs[ [ 1 ] ],  max.level=0)&#xD;&#xA;    List of 11&#xD;&#xA;     - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;gtable&quot; &quot;grob&quot; &quot;gDesc&quot;&#xD;&#xA;    &gt; gp2$grobs[ [ 8 ] ]$grobs[ [ 1 ] ][ [ 11 ] ]&#xD;&#xA;    Error in gp2$grobs[ [ 8 ] ]$grobs[ [ 1 ] ][ [ 11 ] ] : subscript out of bounds" />
      <Message Id="19353248" ParentId="817" UserId="2557767" Date="06/12/2013 20:28:10" Content="Narrowing this down a bit more. The culprit seems to be `gtable_add_grob`.&#xD;&#xA;It it is called in `ggplot_gtable` for the `position == &quot;right&quot;` case as follows:&#xD;&#xA;&#xD;&#xA;      plot_table &lt;- gtable_add_grob(plot_table,  legend_box,  clip = &quot;off&quot;, &#xD;&#xA;          t = panel_dim$t,  b = panel_dim$b,  l = -1,  r = -1,  name = &quot;guide-box&quot;)&#xD;&#xA;&#xD;&#xA;My debug strategy is to add `print(str(plot_table$grobs))` whenever plot_table changes.&#xD;&#xA;The first of these invocations to crash with the &quot;out of bounds&quot; error is after the `gtable_add_grob` line above.&#xD;&#xA;" />
      <Message Id="19500183" ParentId="817" UserId="2557767" Date="06/15/2013 17:32:44" Content="I think I see where this happens. First,  the call stack.&#xD;&#xA;&#xD;&#xA;    ggplot_gtable (in &quot;plot-render.r&quot;)&#xD;&#xA;    -&gt; build_guides here: &#xD;&#xA;        build_guides(plot$scales,  plot$layers,  plot$mapping,  position,  theme,  plot$guides,  plot$labels)&#xD;&#xA;&#xD;&#xA;    build_guides (in &quot;guides-.r&quot;)&#xD;&#xA;    -&gt; guides_gengrob here: ggrobs &lt;- guides_gengrob(gdefs,  theme)&#xD;&#xA;&#xD;&#xA;guide_gengrob is a wrapper.&#xD;&#xA;&#xD;&#xA;In &quot;guides-.r&quot; we have&#xD;&#xA;&#xD;&#xA;    guide_gengrob &lt;- function(...) UseMethod(&quot;guide_gengrob&quot;)&#xD;&#xA;&#xD;&#xA;so calls&#xD;&#xA;&#xD;&#xA;    guide_gengrob (in &quot;guides-.r&quot;) -&gt; guide_gengrob.legend (in&#xD;&#xA;    &quot;guide-legend.r)&#xD;&#xA;&#xD;&#xA;guide_gengrob.legend (in &quot;guide-legend.r) -&gt; gtable_add_grob&#xD;&#xA;here: gt &lt;- gtable_add_grob(gt,  grob.labels, ...&#xD;&#xA;&#xD;&#xA;In&#xD;&#xA;&#xD;&#xA;gtable_add_grob (in &quot;add-grob.r&quot; (gtable package))&#xD;&#xA;&#xD;&#xA;the problem happens with x after running the lines&#xD;&#xA;&#xD;&#xA;    x$grobs &lt;- c(x$grobs,  grobs)&#xD;&#xA;&#xD;&#xA;and&#xD;&#xA;&#xD;&#xA;    x$layout &lt;- rbind(x$layout,  layout)&#xD;&#xA;&#xD;&#xA;If we dump the `x` before these lines,  as well as the corresponding&#xD;&#xA;`grobs` and `layout`,  then one can reproduce this problem.&#xD;&#xA;&#xD;&#xA;I've included details on reproduction,  as well as a dump of `x`, &#xD;&#xA;`grobs` and `layout` here.&#xD;&#xA;&#xD;&#xA;https://bitbucket.org/faheem/github-ggplot2-817&#xD;&#xA;&#xD;&#xA;The current README for this is included below. Summary: loading&#xD;&#xA;ggplot2 makes str give an error for reasons that are not obvious.&#xD;&#xA;&#xD;&#xA;#####################################################################&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;SUMMARY: loading the ggplot2 package produces errors with str which&#xD;&#xA;are not present otherwise.&#xD;&#xA;&#xD;&#xA;To reproduce this bug,  do the following.&#xD;&#xA;&#xD;&#xA;Start R. Then&#xD;&#xA;&#xD;&#xA;    &gt; ls()&#xD;&#xA;    character(0)&#xD;&#xA;    &gt; load(&quot;addgrob.asc.save&quot;)&#xD;&#xA;    &gt; ls()&#xD;&#xA;    [ 1 ] &quot;grobs&quot;  &quot;layout&quot; &quot;x&quot;&#xD;&#xA;&#xD;&#xA;    &gt; str(x,  max.level=1)&#xD;&#xA;    List of 10&#xD;&#xA;     $ grobs   :List of 8&#xD;&#xA;     $ layout  :'data.frame':       8 obs. of  7 variables:&#xD;&#xA;       $ widths  :Class 'unit'  atomic [ 1:6 ] 1.5 6.096 0.762 1.961 0 ...&#xD;&#xA;      .. ..- attr(*,  &quot;unit&quot;)= chr &quot;mm&quot;&#xD;&#xA;      .. ..- attr(*,  &quot;valid.unit&quot;)= int 7&#xD;&#xA;     $ heights :Class 'unit'  atomic [ 1:7 ] 1.5 2.53 1.52 6.1 6.1 ...&#xD;&#xA;      .. ..- attr(*,  &quot;unit&quot;)= chr &quot;mm&quot;&#xD;&#xA;      .. ..- attr(*,  &quot;valid.unit&quot;)= int 7&#xD;&#xA;     $ respect : logi FALSE&#xD;&#xA;     $ rownames: NULL&#xD;&#xA;     $ colnames: NULL&#xD;&#xA;     $ name    : chr &quot;layout&quot;&#xD;&#xA;     $ gp      : NULL&#xD;&#xA;     $ vp      : NULL&#xD;&#xA;     - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;gtable&quot; &quot;grob&quot; &quot;gDesc&quot;&#xD;&#xA;&#xD;&#xA;    &gt; x$grobs &lt;- c(x$grobs,  grobs)&#xD;&#xA;    &gt; x$layout &lt;- rbind(x$layout,  layout)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;   &gt; str(x,  max.level=1)&#xD;&#xA;    List of 10&#xD;&#xA;     $ grobs   :List of 11&#xD;&#xA;     $ layout  :'data.frame':       11 obs. of  7 variables:&#xD;&#xA;       $ widths  :Class 'unit'  atomic [ 1:6 ] 1.5 6.096 0.762 1.961 0 ...&#xD;&#xA;      .. ..- attr(*,  &quot;unit&quot;)= chr &quot;mm&quot;&#xD;&#xA;      .. ..- attr(*,  &quot;valid.unit&quot;)= int 7&#xD;&#xA;     $ heights :Class 'unit'  atomic [ 1:7 ] 1.5 2.53 1.52 6.1 6.1 ...&#xD;&#xA;      .. ..- attr(*,  &quot;unit&quot;)= chr &quot;mm&quot;&#xD;&#xA;      .. ..- attr(*,  &quot;valid.unit&quot;)= int 7&#xD;&#xA;     $ respect : logi FALSE&#xD;&#xA;     $ rownames: NULL&#xD;&#xA;     $ colnames: NULL&#xD;&#xA;     $ name    : chr &quot;layout&quot;&#xD;&#xA;     $ gp      : NULL&#xD;&#xA;     $ vp      : NULL&#xD;&#xA;     - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;gtable&quot; &quot;grob&quot; &quot;gDesc&quot;&#xD;&#xA;&#xD;&#xA;    &gt; library(ggplot2)&#xD;&#xA;&#xD;&#xA;    &gt; str(x,  max.level=1)&#xD;&#xA;    List of 11&#xD;&#xA;     $ grobs   :List of 11&#xD;&#xA;     $ layout  :'data.frame':       11 obs. of  7 variables:&#xD;&#xA;       $ widths  :Class 'unit'  atomic [ 1:6 ] 1.5 6.096 0.762 1.961 0 ...&#xD;&#xA;      .. ..- attr(*,  &quot;unit&quot;)= chr &quot;mm&quot;&#xD;&#xA;      .. ..- attr(*,  &quot;valid.unit&quot;)= int 7&#xD;&#xA;     $ heights :Class 'unit'  atomic [ 1:7 ] 1.5 2.53 1.52 6.1 6.1 ...&#xD;&#xA;      .. ..- attr(*,  &quot;unit&quot;)= chr &quot;mm&quot;&#xD;&#xA;      .. ..- attr(*,  &quot;valid.unit&quot;)= int 7&#xD;&#xA;     $ respect : logi FALSE&#xD;&#xA;     $ rownames: NULL&#xD;&#xA;     $ colnames: NULL&#xD;&#xA;     $ name    : chr &quot;layout&quot;&#xD;&#xA;     $ gp      : NULL&#xD;&#xA;     $ vp      : NULL&#xD;&#xA;     $ NA:Error in object[ [ i ] ] : subscript out of bounds" />
      <Message Id="19513572" ParentId="817" UserId="2557767" Date="06/16/2013 15:11:47" Content="I posted a Stack Overflow question: [ calling `str` on a object errors out if the ggplot2 package is loaded ](http://stackoverflow.com/q/17127339/350713)." />
      <Message Id="19519782" ParentId="817" UserId="2557767" Date="06/16/2013 21:46:28" Content="On the assumption that this is a different problem from the topic of this issue, &#xD;&#xA;I have now created a separate issue for it - https://github.com/hadley/ggplot2/issues/820" />
      <Message Id="21337560" ParentId="817" UserId="18970" Date="07/22/2013 11:12:22" Content="regarding the original issue,  I've rediscovered it on Stack Overflow: http://stackoverflow.com/a/17785797/471093&#xD;&#xA;&#xD;&#xA;&quot;Interestingly&quot;,  what the grobs are seems to affect the behaviour of `annotation_custom`; for instance adding two ggplotGrob fails (only one appears),  but wrapping them in a gTree works. Weird stuff." />
      <Message Id="35945536" ParentId="817" UserId="4196" Date="02/24/2014 22:07:30" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947418" ParentId="817" UserId="2557767" Date="02/24/2014 22:24:41" Content="I don't understand why you are closing this issue when the bug is not fixed." />
    </Messages>
  </Topic>
  <Topic Id="818" Title="Adapt to device pointsize by default">
    <Messages>
      <Message Id="0" ParentId="818" UserId="1120448" Date="06/12/2013 16:22:50" Content="Until recently,  ggplot2 and Lattice were not adjusting automatically to the output device pointsize. Deepayan Sarkar has committed a fix for this in Lattice,  so I think ggplot2 could probably use a similar solution.&#xD;&#xA;&#xD;&#xA;Details of the problem and possible fixes are on the R-help thread:&#xD;&#xA;https://stat.ethz.ch/pipermail/r-help/2013-May/353856.html&#xD;&#xA;https://stat.ethz.ch/pipermail/r-help/2013-June/354717.html" />
      <Message Id="35945596" ParentId="818" UserId="4196" Date="02/24/2014 22:08:03" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="819" Title="missing `guide.margin`(s) theme parameter">
    <Messages>
      <Message Id="0" ParentId="819" UserId="18970" Date="06/12/2013 21:00:21" Content="I believe the theme parameters are not fully covering the parameters for guides. In this [ SO question ](http://stackoverflow.com/questions/17073772/ggplot2-legend-on-top-and-margin),  I discovered an extra margin that is being [ set to a default value ](https://github.com/hadley/ggplot2/blob/master/R/guides-.r#L228) and cannot be specified in `theme()`." />
      <Message Id="19356634" ParentId="819" UserId="3259333" Date="06/12/2013 21:25:02" Content="Just making sure I get updates ..." />
      <Message Id="19381219" ParentId="819" UserId="2246807" Date="06/13/2013 09:29:54" Content="Seems like this extra margin is added to the `guides` grob within the `guide-box` grob. This gives the `guides` grob layout three width and height elements even if it only contains one grob.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;leg$grobs[ [ 1 ] ]$heights&#xD;&#xA;# [ 1 ] 0.5lines                                                                     &#xD;&#xA;# [ 2 ] sum(1.5mm,  2.63333333333333mm,  1.52926814814815mm,  6.11707259259259mm,  1.5mm)&#xD;&#xA;# [ 3 ] 0.5lines&#xD;&#xA;leg$grobs[ [ 1 ] ]$layout&#xD;&#xA;# t l b r z clip   name&#xD;&#xA;# 1 2 2 2 2 1  off guides&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This seems wrong to me. Would a solution be to not add those two `0.5lines` but add them to the default `legend.margin` instead to not mess with the current defaults?" />
      <Message Id="19383766" ParentId="819" UserId="18970" Date="06/13/2013 10:31:05" Content="what's wrong with adding that guide.margin parameter to theme_grey() etc.&#xD;&#xA;with default value 0.5 line? It sounds like a more minimal change to make&#xD;&#xA;(provided one understands the themes system,  which I don't).&#xD;&#xA;&#xD;&#xA;b.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;On 13 June 2013 06:30,  Johan Tolö &lt;notifications@github.com&gt; wrote:&#xD;&#xA;&#xD;&#xA;&gt; Seems like this extra margin is added to the guides grob within the&#xD;&#xA;&gt; guide-box grob. This gives the guides grob layout three width and height&#xD;&#xA;&gt; elements even if it only contains one grob.&#xD;&#xA;&gt;&#xD;&#xA;&gt; leg$grobs[ [ 1 ] ]$heights# [ 1 ] 0.5lines                                                                     # [ 2 ] sum(1.5mm,  2.63333333333333mm,  1.52926814814815mm,  6.11707259259259mm,  1.5mm)# [ 3 ] 0.5linesleg$grobs[ [ 1 ] ]$layout# t l b r z clip   name# 1 2 2 2 2 1  off guides&#xD;&#xA;&gt;&#xD;&#xA;&gt; This seems wrong to me. Would a solution be to not add those two 0.5linesbut add them to the default&#xD;&#xA;&gt; legend.margin instead to not mess with the current defaults?&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/819#issuecomment-19381219&gt;&#xD;&#xA;&gt; .&#xD;&#xA;&gt;" />
      <Message Id="35945606" ParentId="819" UserId="4196" Date="02/24/2014 22:08:10" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35945606" ParentId="819" UserId="4196" Date="02/24/2014 22:08:10" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="820" Title="The str function fails with error on ggplot2 objects">
    <Messages>
      <Message Id="0" ParentId="820" UserId="2557767" Date="06/16/2013 21:41:21" Content="When trying to debug https://github.com/hadley/ggplot2/issues/817 I noticed in some cases&#xD;&#xA;that str gives an error when run on certain ggplot2 objects. &#xD;&#xA;My feeling is that this is a separate issue from 817,  so I'm creating a different issue for it.&#xD;&#xA;For example&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;df &lt;- data.frame(&#xD;&#xA;  x = 1:10, &#xD;&#xA;  y = 1:10, &#xD;&#xA;  colour = factor(sample(1:3,  10,  replace = TRUE)), &#xD;&#xA;  size = factor(sample(1:3,  10,  replace = TRUE)))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(data = df,  aes(x=x,  y=y)) +&#xD;&#xA;  geom_point(aes(size = size)) +&#xD;&#xA;  theme_bw()&#xD;&#xA;pg = ggplot_gtable(ggplot_build(p2))&#xD;&#xA;str(pg)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The output ends with &#xD;&#xA;&#xD;&#xA;$ NA:Error in object[ [ i ] ] : subscript out of bounds&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;See also the Stack Overflow question [ calling `str` on a object errors out if the ggplot2 package is loaded ](http://stackoverflow.com/q/17127339/350713),   This has a different example by DWin,  see http://stackoverflow.com/a/17128951/350713&#xD;&#xA;" />
      <Message Id="35945622" ParentId="820" UserId="4196" Date="02/24/2014 22:08:22" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="821" Title="geom_polygon crashes on windows">
    <Messages>
      <Message Id="0" ParentId="821" UserId="30309" Date="06/18/2013 20:14:50" Content="Under R 3.0.1,  ggplot2 0.9.3.1 running the following code completely crashes console R or Rstudio on Windows 7 for me:&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    datapoly &lt;- data.frame(x=c(0, 0, 1, 1),  &#xD;&#xA;                           y=c(0, 1, 1, 0),  &#xD;&#xA;                           group=1,  &#xD;&#xA;                           value=0.02,  &#xD;&#xA;                           value2=0.02793)&#xD;&#xA;    p &lt;- ggplot(datapoly,  aes(x=x,  y=y,  group=group))&#xD;&#xA;    # this plots without error&#xD;&#xA;    p + geom_polygon(aes(fill=value))&#xD;&#xA;    # but this crashes R&#xD;&#xA;    p + geom_polygon(aes(fill=value2))&#xD;&#xA;&#xD;&#xA;![ plot_ok ](https://f.cloud.github.com/assets/30309/671118/653c1d7c-d853-11e2-899d-0fe620a42d06.png)&#xD;&#xA;&#xD;&#xA;![ plot_crash ](https://f.cloud.github.com/assets/30309/671119/6ff1d784-d853-11e2-8706-3a2e726080c9.png)&#xD;&#xA;&#xD;&#xA;Interestingly,  the same code run under Linux (Ubuntu 13.04),  R 3.0.1 from command line,  ggplot2 0.9.3.1,  does not crash at all,  but no legend is produced for either plot:&#xD;&#xA;&#xD;&#xA;![ linux_plot ](https://f.cloud.github.com/assets/30309/671124/91c883f8-d853-11e2-949b-662fa5b4fde8.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    " />
      <Message Id="35945658" ParentId="821" UserId="4196" Date="02/24/2014 22:08:48" Content="Unfortunately I'd say that bug is in R,  not ggplot2,  so we can't do much about it." />
    </Messages>
  </Topic>
  <Topic Id="822" Title="Message breaks the compilation process with latex after knitting">
    <Messages>
      <Message Id="0" ParentId="822" UserId="1726483" Date="06/20/2013 12:02:15" Content="This message seems to be neither an error nor a real warning that could be suppressed by the knitr chunk options and not even in R directly with `suppressWarnings(expr)`. It goes directly into my tex file when I knit and pdflatex complains about some additional characters.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA; gg_dep(&quot;0.9.2&quot;,  paste(sep = &quot;\n&quot;, &#xD;&#xA;        &quot;Mapping a variable to y and also using stat=\&quot;bin\&quot;.&quot;, &#xD;&#xA;        &quot; With stat=\&quot;bin\&quot;,  it will attempt to set the y value to the count of cases in each group.&quot;, &#xD;&#xA;        &quot; This can result in unexpected behavior and will not be allowed in a future version of ggplot2.&quot;, &#xD;&#xA;        &quot; If you want y to represent counts of cases,  use stat=\&quot;bin\&quot; and don't map a variable to y.&quot;, &#xD;&#xA;        &quot; If you want y to represent values in the data,  use stat=\&quot;identity\&quot;.&quot;, &#xD;&#xA;        &quot; See ?geom_bar for examples.&quot;))&#xD;&#xA;     }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="19750695" ParentId="822" UserId="4196" Date="06/20/2013 13:02:33" Content="It's a message. Use suppressMessages to suppress it,  or read the message and fix your code." />
      <Message Id="19767134" ParentId="822" UserId="463252" Date="06/20/2013 17:06:25" Content="Since it is a message,  you can use the `kntir` chunk option `message=FALSE` to hide it (rather than manually wrapping it in `suppressMessages()`)." />
      <Message Id="19768438" ParentId="822" UserId="1726483" Date="06/20/2013 17:27:46" Content="Thanks for the hint to the knitr options since the wrapping in `suppressMessages()` did not work. " />
      <Message Id="19769384" ParentId="822" UserId="4196" Date="06/20/2013 17:41:26" Content="But please do fix your ggplot2 code as this will definitely break in a future version." />
      <Message Id="19774304" ParentId="822" UserId="1726483" Date="06/20/2013 18:39:53" Content="Sure I will do that if I have a bit more time to play around and find out how I ge tthe same result with the fixed code. Thanks." />
      <Message Id="19776508" ParentId="822" UserId="86978" Date="06/20/2013 19:15:42" Content="You're doing something like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) + geom_histogram()&#xD;&#xA;&#xD;&#xA; probably just need to do something like `geom_bar(stat = &quot;bin&quot;)` instead of `geom_bar()`" />
    </Messages>
  </Topic>
  <Topic Id="823" Title="Fix for last small segment in polar coordinate munching being dropped">
    <Messages>
      <Message Id="0" ParentId="823" UserId="463252" Date="06/21/2013 20:32:50" Content="Per the message on the ggplot list: https://groups.google.com/d/msg/ggplot2/WaDVT99x5LM/CVEd4Yl7pQUJ,  this fixes the problems that that post exposed." />
      <Message Id="35945673" ParentId="823" UserId="4196" Date="02/24/2014 22:08:58" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="824" Title="Strange scale_x_datetime offset">
    <Messages>
      <Message Id="0" ParentId="824" UserId="4513747" Date="06/27/2013 15:20:23" Content="I often plot data from a data frame that has both a POSIXct and a&#xD;&#xA;numeric column.  The following code creates such a data frame and plots&#xD;&#xA;the data:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;require(ggplot2)&#xD;&#xA;require(scales)&#xD;&#xA;require(lubridate)&#xD;&#xA;timelist &lt;- ymd_hm(c(&quot;2013-05-01 12:00&quot;, &quot;2013-05-02 18:00&quot;, &quot;2013-05-03 06:00&quot;), tz=&quot;America/Los_Angeles&quot;)&#xD;&#xA;sampleDF &lt;- data.frame(time = timelist,  values = c(3, 4, 2))&#xD;&#xA;qplot(time,  values,  data = sampleDF)+scale_x_datetime(minor_breaks=date_breaks(&quot;6 hour&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;When I run the code above,  I get a plot with the three points at the&#xD;&#xA;right times,  but the minor break lines are offset apparently by 3 hours&#xD;&#xA;from the axis.  I expected the minor breaks to coincide with the major&#xD;&#xA;breaks.  That is,  I expected minor breaks at 0:00,  6:00,  12:00,  18:00, &#xD;&#xA;...,  with major breaks as scales chose,  but I get minor breaks at 3:00, &#xD;&#xA;9:00,  ....&#xD;&#xA;&#xD;&#xA;My time zone is &quot;America/Los_Angeles&quot;,  but I get the same result when I&#xD;&#xA;use &quot;UTC&quot; for the data instead.  &#xD;&#xA;&#xD;&#xA;There was a discussion about this at https://groups.google.com/forum/#!topic/ggplot2/Kvdx70hF51A.  While Brian Waismeyer's solution seems to work,  it seems more than a bit unintuitive and thus out of character for ggplot2 and a bit fidgety.  &#xD;&#xA;" />
      <Message Id="35945698" ParentId="824" UserId="4196" Date="02/24/2014 22:09:09" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="825" Title="geom_dotplot is not working with qplot.">
    <Messages>
      <Message Id="0" ParentId="825" UserId="1006144" Date="06/27/2013 21:07:58" Content="This produces a nice dot plot:&#xD;&#xA;``` s&#xD;&#xA;ggplot(mtcars,  aes(x = mpg)) + geom_dotplot()&#xD;&#xA;## stat_bindot: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;```&#xD;&#xA;Using qplot I get the following error and no plot:&#xD;&#xA;&#xD;&#xA;``` s&#xD;&#xA;qplot(mpg,  data=mtcars,  geom=&quot;dotplot&quot;)&#xD;&#xA;## stat_bindot: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;## Error in if (params$stackdir == &quot;up&quot;) {  : argument is of length zero&#xD;&#xA;```&#xD;&#xA;If it's not supposed to work then I'm sorry for wasting your time,  but usually it is possible to transition between `ggplot` and `qplot` in this way in qqplot2...&#xD;&#xA;``` s&#xD;&#xA;sessionInfo()&#xD;&#xA;## R version 3.0.1 (2013-05-16)&#xD;&#xA;## Platform: i686-pc-linux-gnu (32-bit)&#xD;&#xA;&#xD;&#xA;## locale:&#xD;&#xA;##  [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA;##  [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C                 LC_NAME=C                 &#xD;&#xA;##  [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;## attached base packages:&#xD;&#xA;## [ 1 ] graphics  grDevices utils     datasets  stats     methods   base     &#xD;&#xA;&#xD;&#xA;## other attached packages:&#xD;&#xA;## [ 1 ] boot_1.3-9      reshape_0.8.4   plyr_1.8        stringr_0.6.2   lattice_0.20-15 ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;## loaded via a namespace (and not attached):&#xD;&#xA;## [ 1 ] colorspace_1.2-2   dichromat_2.0-0    digest_0.6.3       grid_3.0.1         gtable_0.1.2      &#xD;&#xA;##  [ 6 ] labeling_0.1       MASS_7.3-26        munsell_0.4        proto_0.3-10       RColorBrewer_1.0-5&#xD;&#xA;## [ 11 ] reshape2_1.2.2     scales_0.2.3       tools_3.0.1 " />
      <Message Id="35945732" ParentId="825" UserId="4196" Date="02/24/2014 22:09:27" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="826" Title="In stat_summary_hex and stat_binhex,  hexagons overlap when z values are factors ">
    <Messages>
      <Message Id="0" ParentId="826" UserId="2592761" Date="06/28/2013 22:26:54" Content="In the data set below,  thing1 is numeric,  and thing2 is a factor (but otherwise identical to thing1). For simplicity,  the summary function is just the max value in the bin. When the z element is a factor,  the hexagons overlap. &#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(hexbin)&#xD;&#xA;    DF=data.frame(xpos=rnorm(1000), &#xD;&#xA;                  ypos=rnorm(1000), &#xD;&#xA;                  thing1=rep(1:9, length.out=100), &#xD;&#xA;                  thing2=as.factor(rep(1:9, length.out=100)))&#xD;&#xA;    ggplot(DF,  aes(x=xpos,  y=ypos,  z=thing1)) +  &#xD;&#xA;      stat_summary_hex(fun=function(x){ x[ which.max(x) ] })&#xD;&#xA;    ggplot(DF,  aes(x=xpos,  y=ypos,  z=thing2)) +  &#xD;&#xA;      stat_summary_hex(fun=function(x){ x[ which.max(x) ] })&#xD;&#xA;&#xD;&#xA;![ thing1 ][ 1 ]&#xD;&#xA;![ thing2 ][ 2 ]&#xD;&#xA;&#xD;&#xA;This also occurs with `ggplot(DF,  aes(x=xpos,  y=ypos,  z=thing2)) + stat_binhex()`.&#xD;&#xA;&#xD;&#xA;This is [ cross posted ][ 3 ] on stackoverflow.com.&#xD;&#xA;&#xD;&#xA;  [ 1 ]: http://i.stack.imgur.com/lbZzU.png&#xD;&#xA;  [ 2 ]: http://i.stack.imgur.com/CV8BN.png&#xD;&#xA;  [ 3 ]: http://stackoverflow.com/questions/17373751/in-stat-summary-hex-why-do-hexagons-overlap-if-z-is-a-factor" />
      <Message Id="35945837" ParentId="826" UserId="4196" Date="02/24/2014 22:10:20" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="827" Title="clipping of objects in ggplot using zoom limits">
    <Messages>
      <Message Id="0" ParentId="827" UserId="804405" Date="06/29/2013 00:30:46" Content="Example follows of the bug that occurs when overplotting qmap with a SpatialPolygons* object that extend beyond the zoom limit of the map. &#xD;&#xA;&#xD;&#xA;I think the same issue was noted last year in stack overflow: http://stackoverflow.com/questions/13469566/polygons-nicely-cropping-ggplot2-ggmap-at-different-zoom-levels &#xD;&#xA;&#xD;&#xA;I'm wondering if a built-in fix is in the pipeline?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;# reproducible example of issue when overplotting qmap with a&#xD;&#xA;# SpatialPolygons* object that extends beyond the edge of the map &#xD;&#xA;&#xD;&#xA;library(ggmap)&#xD;&#xA;library(grid)&#xD;&#xA;library(sp)&#xD;&#xA;&#xD;&#xA;# function to create a SpatialPointsDataFrame (with dummy data)&#xD;&#xA;# that represents a single box polygon centered around 'coordinate', &#xD;&#xA;# with box sides of length 'size'&#xD;&#xA;pt2box &lt;- function(coordinate,  size) { &#xD;&#xA;    lowerleft &lt;- coordinate-(size/2)&#xD;&#xA;    coords &lt;- rbind(&#xD;&#xA;        lowerleft, &#xD;&#xA;        lowerleft + c(0,  size), &#xD;&#xA;        lowerleft + size, &#xD;&#xA;        lowerleft + c(size,  0), &#xD;&#xA;        lowerleft&#xD;&#xA;    )&#xD;&#xA;    SpatialPolygonsDataFrame(&#xD;&#xA;        SpatialPolygons(list(&#xD;&#xA;            Polygons(list(&#xD;&#xA;                Polygon(coords)&#xD;&#xA;            ),  1)&#xD;&#xA;        )&#xD;&#xA;    ),  data.frame(x=1))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;# grab Google map of the region around Baylor University&#xD;&#xA;baylor &lt;- qmap(&quot;baylor university&quot;,  zoom=8)&#xD;&#xA;&#xD;&#xA;# lat/lon for city of austin&#xD;&#xA;austin &lt;- c(-97.7428,  30.2669)&#xD;&#xA;&#xD;&#xA;# this works -- box fits on plot&#xD;&#xA;baylor + geom_polygon(aes(x=long,  y=lat),  fill=NA,  colour=&quot;black&quot;, &#xD;&#xA;    data=pt2box(austin,  0.4))&#xD;&#xA;# this doesn't -- box doesn't fit on plot&#xD;&#xA;baylor + geom_polygon(aes(x=long,  y=lat),  fill=NA,  colour=&quot;black&quot;, &#xD;&#xA;    data=pt2box(austin,  0.5))&#xD;&#xA;```" />
      <Message Id="35945868" ParentId="827" UserId="4196" Date="02/24/2014 22:10:34" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="828" Title="Add a new continuous colour/fill scale using colorbrewer colours -- rebased to current master">
    <Messages>
      <Message Id="0" ParentId="828" UserId="1741643" Date="07/02/2013 15:37:19" Content="This is a version of #439 that applies cleanly to the current version of hadley/ggplot2 ." />
    </Messages>
  </Topic>
  <Topic Id="829" Title="?theme legend.position doesn't document option &quot;none&quot;">
    <Messages>
      <Message Id="0" ParentId="829" UserId="514696" Date="07/05/2013 03:18:18" Content="In `?theme`,  the information for `legend.position` states&#xD;&#xA;&#xD;&#xA;&gt; the position of legends. (&quot;left&quot;,  &quot;right&quot;,  &quot;bottom&quot;,  &quot;top&quot;,  or two-element numeric vector)&#xD;&#xA;&#xD;&#xA;The option `&quot;none&quot;` is missing from that list. The use of `legend.position = &quot;none&quot;` *is* documented in the examples,  but it should be listed as an available option." />
      <Message Id="35945888" ParentId="829" UserId="4196" Date="02/24/2014 22:10:44" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="830" Title="Allow to reverse the order of colours in a brewer palette,  including continuous Brewer scale (&quot;distiller&quot;)">
    <Messages>
      <Message Id="0" ParentId="830" UserId="1741643" Date="07/05/2013 20:03:53" Content="This pull request includes both #812 and #828. Functionality by @jiho,  I have updated the documentation with the most recent `roxygen2` from klutometis/roxygen." />
      <Message Id="35945940" ParentId="830" UserId="4196" Date="02/24/2014 22:11:06" Content="I'd rather pull these in one at a time. Big PRs are much harder to process." />
    </Messages>
  </Topic>
  <Topic Id="831" Title="Trivial documentation fix">
    <Messages>
      <Message Id="0" ParentId="831" UserId="1741643" Date="07/05/2013 20:31:02" Content="Fixes #829" />
      <Message Id="35946024" ParentId="831" UserId="4196" Date="02/24/2014 22:11:47" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="832" Title="Some Rd files outdated">
    <Messages>
      <Message Id="0" ParentId="832" UserId="1741643" Date="07/05/2013 20:34:18" Content="Some `.Rd` files change when calling `roxygenize('.')`. Fixing this will simplify adding documentation." />
    </Messages>
  </Topic>
  <Topic Id="833" Title="Synchronize all .Rd files with current source code">
    <Messages>
      <Message Id="0" ParentId="833" UserId="1741643" Date="07/05/2013 20:38:02" Content="fixes #832" />
      <Message Id="29856253" ParentId="833" UserId="1741643" Date="12/04/2013 23:17:01" Content="Obsolete given the recent changes in `roxygen2`." />
    </Messages>
  </Topic>
  <Topic Id="834" Title="Any identifier with two pairs of consecutive dots is interpreted as calculated aesthetics">
    <Messages>
      <Message Id="0" ParentId="834" UserId="1741643" Date="07/06/2013 20:10:38" Content="Failing:&#xD;&#xA;&#xD;&#xA;    ggplot() + geom_histogram(aes(x=runif(1000),  y=xxx..density..yyy))&#xD;&#xA;    ## stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;    ## Error in eval(expr,  envir,  enclos) : object 'xxxdensityyyy' not found&#xD;&#xA;&#xD;&#xA;Succeeding:&#xD;&#xA;&#xD;&#xA;    ggplot() + geom_histogram(aes(x=runif(1000),  y=d..ensit..y))&#xD;&#xA;&#xD;&#xA;Not a real problem,  but one with a trivial fix. My favorite :-)" />
      <Message Id="35946061" ParentId="834" UserId="4196" Date="02/24/2014 22:12:07" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="835" Title="Patch the regular expression">
    <Messages>
      <Message Id="0" ParentId="835" UserId="1741643" Date="07/06/2013 20:22:33" Content="that is used for matching columns that refer to calculated aesthetics (e.g.,  `..count..`)&#xD;&#xA;&#xD;&#xA;fixes #834" />
      <Message Id="35946067" ParentId="835" UserId="4196" Date="02/24/2014 22:12:11" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="836" Title="cant install ggplot2 on R 3.0.1">
    <Messages>
      <Message Id="0" ParentId="836" UserId="1296108" Date="07/06/2013 20:29:53" Content="I failed to install ggplot2 in R 3.0.1 with the command install.packages(&quot;ggplot2&quot;). I am on ubuntu 12.04&#xD;&#xA;&#xD;&#xA;Below is the command and the output,  right after is verion info&#xD;&#xA;```&#xD;&#xA;&gt; install.packages(&quot;ggplot2&quot;)&#xD;&#xA;Installing package into ‘/home/theofilos/R/x86_64-pc-linux-gnu-library/3.0’&#xD;&#xA;(as ‘lib’ is unspecified)&#xD;&#xA;--- Please select a CRAN mirror for use in this session ---&#xD;&#xA;also installing the dependencies ‘colorspace’,  ‘stringr’,  ‘RColorBrewer’,  ‘dichromat’,  ‘munsell’,  ‘labeling’,  ‘plyr’,  ‘digest’,  ‘gtable’,  ‘reshape2’,  ‘scales’,  ‘proto’&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/colorspace_1.2-2.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 242576 bytes (236 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 236 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/stringr_0.6.2.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 20636 bytes (20 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 20 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/RColorBrewer_1.0-5.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 10656 bytes (10 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 10 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/dichromat_2.0-0.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 84320 bytes (82 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 82 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/munsell_0.4.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 87713 bytes (85 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 85 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/labeling_0.2.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 9998 bytes&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 9998 bytes&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/plyr_1.8.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 384462 bytes (375 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 375 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/digest_0.6.3.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 80083 bytes (78 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 78 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/gtable_0.1.2.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 19667 bytes (19 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 19 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/reshape2_1.2.2.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 27220 bytes (26 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 26 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/scales_0.2.3.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 39429 bytes (38 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 38 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/proto_0.3-10.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 530758 bytes (518 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 518 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/ggplot2_0.9.3.1.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 2330942 bytes (2.2 Mb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 2.2 Mb&#xD;&#xA;&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;&#xD;&#xA;The downloaded source packages are in&#xD;&#xA;	‘/tmp/Rtmp8xo9uY/downloaded_packages’&#xD;&#xA;There were 13 warnings (use warnings() to see them)&#xD;&#xA;&gt; version&#xD;&#xA;               _                           &#xD;&#xA;platform       x86_64-pc-linux-gnu         &#xD;&#xA;arch           x86_64                      &#xD;&#xA;os             linux-gnu                   &#xD;&#xA;system         x86_64,  linux-gnu           &#xD;&#xA;status                                     &#xD;&#xA;major          3                           &#xD;&#xA;minor          0.1                         &#xD;&#xA;year           2013                        &#xD;&#xA;month          05                          &#xD;&#xA;day            16                          &#xD;&#xA;svn rev        62743                       &#xD;&#xA;language       R                           &#xD;&#xA;version.string R version 3.0.1 (2013-05-16)&#xD;&#xA;nickname       Good Sport          &#xD;&#xA;```        &#xD;&#xA;" />
      <Message Id="20560649" ParentId="836" UserId="1741643" Date="07/06/2013 20:39:41" Content="When I tried this on my machine with an empty user library (Ubuntu 13.04),  two more dependencies were installed: `lattice` and `MASS`. Could you try installing these packages from CRAN into your user library?&#xD;&#xA;&#xD;&#xA;Also,  could you try installing in an R session started with `R --vanilla`?" />
      <Message Id="20560731" ParentId="836" UserId="1296108" Date="07/06/2013 20:45:45" Content="```&#xD;&#xA;&gt; install.packages(&quot;lattice&quot;)&#xD;&#xA;Installing package into ‘/home/theofilos/R/x86_64-pc-linux-gnu-library/3.0’&#xD;&#xA;(as ‘lib’ is unspecified)&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/lattice_0.20-15.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 368791 bytes (360 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 360 Kb&#xD;&#xA;&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;&#xD;&#xA;The downloaded source packages are in&#xD;&#xA;	‘/tmp/Rtmp8xo9uY/downloaded_packages’&#xD;&#xA;Warning message:&#xD;&#xA;In install.packages(&quot;lattice&quot;) :&#xD;&#xA;  installation of package ‘lattice’ had non-zero exit status&#xD;&#xA;&gt; install.packages(&quot;MASS&quot;)&#xD;&#xA;Installing package into ‘/home/theofilos/R/x86_64-pc-linux-gnu-library/3.0’&#xD;&#xA;(as ‘lib’ is unspecified)&#xD;&#xA;trying URL 'http://dirichlet.mat.puc.cl/src/contrib/MASS_7.3-27.tar.gz'&#xD;&#xA;Content type 'application/x-gzip' length 481959 bytes (470 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 470 Kb&#xD;&#xA;&#xD;&#xA;Error in library(ggplot2) : there is no package called ‘ggplot2’&#xD;&#xA;Calls: .First -&gt; library&#xD;&#xA;Execution halted&#xD;&#xA;&#xD;&#xA;The downloaded source packages are in&#xD;&#xA;	‘/tmp/Rtmp8xo9uY/downloaded_packages’&#xD;&#xA;Warning message:&#xD;&#xA;In install.packages(&quot;MASS&quot;) :&#xD;&#xA;  installation of package ‘MASS’ had non-zero exit status&#xD;&#xA;```" />
      <Message Id="20560769" ParentId="836" UserId="1296108" Date="07/06/2013 20:48:29" Content="with R --vanilla,  it works" />
      <Message Id="20560798" ParentId="836" UserId="1741643" Date="07/06/2013 20:50:33" Content="Then it's not a ggplot2 issue. Take a look at the startup files mentioned here: http://stat.ethz.ch/R-manual/R-patched/library/base/html/Startup.html. Perhaps `.Renviron` or `.Rprofile` in your home?" />
      <Message Id="20561377" ParentId="836" UserId="1296108" Date="07/06/2013 21:27:32" Content="No Renviron.&#xD;&#xA;&#xD;&#xA;.RProfile:&#xD;&#xA;```&#xD;&#xA;.First &lt;- function(){ &#xD;&#xA;library(ggplot2)&#xD;&#xA;cat(&quot;\nWelcome at&quot;,  date(),  &quot;\nLoaded ggplot package\n&quot;)&#xD;&#xA; &#xD;&#xA; }&#xD;&#xA; &#xD;&#xA;.Last &lt;- function(){ &#xD;&#xA; cat(&quot;\nGoodbye at &quot;,  date(),  &quot;\n&quot;)&#xD;&#xA; }&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="837" Title="clean up the data objects in examples?">
    <Messages>
      <Message Id="0" ParentId="837" UserId="163582" Date="07/08/2013 20:29:41" Content="e.g. a new data object `movies` was created in the example of `geom_histogram`,  and it can cause problems if we continue to run the examples of `geom_violin`:&#xD;&#xA;&#xD;&#xA;```s&#xD;&#xA;library(ggplot2)&#xD;&#xA;example('geom_histogram',  ask = FALSE)&#xD;&#xA;example('geom_violin',  ask = FALSE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;gm_vln&gt; m &lt;- ggplot(movies,  aes(y = votes,  x = rating, &#xD;&#xA;gm_vln+    group = round_any(rating,  0.5)))&#xD;&#xA;&#xD;&#xA;gm_vln&gt; m + geom_violin()&#xD;&#xA;Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 3L) : &#xD;&#xA;  replacement has 1 row,  data has 0&#xD;&#xA;&#xD;&#xA;gm_vln&gt; m + geom_violin() + scale_y_log10()&#xD;&#xA;Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 3L) : &#xD;&#xA;  replacement has 1 row,  data has 0&#xD;&#xA;&#xD;&#xA;gm_vln&gt; m + geom_violin() + coord_trans(y = &quot;log10&quot;)&#xD;&#xA;Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 3L) : &#xD;&#xA;  replacement has 1 row,  data has 0&#xD;&#xA;Error in log(x,  base) : non-numeric argument to mathematical function&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It seems the first three errors were in `try()`,  so there is no way to trace them back; it might be an environment/variable scope problem. I do not know." />
      <Message Id="23088541" ParentId="837" UserId="1160090" Date="08/22/2013 13:11:17" Content="I've been having this issue with geom_violin and I can't figure it out.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(aes(x = title,  y = percent_watched),  data = df) +&#xD;&#xA;+ geom_violin()&#xD;&#xA;Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 5L) : &#xD;&#xA;  replacement has 1 row,  data has 0&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Where `title` is a factor of strings and `percent_watched` is a num." />
      <Message Id="23172691" ParentId="837" UserId="4196" Date="08/23/2013 15:53:14" Content="@cpeter9 I don't think that's related to this issue - please ask about on the mailing list,  or file a separate issue with a reproducible example." />
      <Message Id="24665080" ParentId="837" UserId="3991279" Date="09/18/2013 13:48:39" Content="@statwonk I am having the same issue. Did you find a solution?" />
      <Message Id="24665767" ParentId="837" UserId="4196" Date="09/18/2013 13:58:30" Content="@statwonk @sah9b That's not related to this issue - please ask about on the mailing list,  or file a separate issue with a reproducible example." />
      <Message Id="35938038" ParentId="837" UserId="4196" Date="02/24/2014 21:11:13" Content="That sounds like a great feature,  but unfortunately we don't currently have the development bandwidth to support it. If you'd like to submit a pull request that implements this feature,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="838" Title="faceting with a variable named ROW or COL results in an error">
    <Messages>
      <Message Id="0" ParentId="838" UserId="463252" Date="07/09/2013 23:36:53" Content="Attempting to facet with a variable named `ROW` or `COL` results in a cryptic error.&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(data=transform(mtcars,  ROW=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~ROW)&#xD;&#xA;```&#xD;&#xA;gives&#xD;&#xA;```&#xD;&#xA;Error in scale_apply(layer_data,  x_vars,  scale_train,  SCALE_X,  panel$x_scales) : &#xD;&#xA;  &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The problem is that the `panels` data.frame contains two instances of `ROW` and when the `PANEL` column is added to `data`,  it get the wrong one at https://github.com/hadley/ggplot2/blob/master/R/facet-locate.r#L76. &#xD;&#xA;&#xD;&#xA;The problem is not limited to `ROW`. The same (or the same with additional warnings) error happens for any variable which has the same name as one of the internal `panels` columns:&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(data=transform(mtcars,  ROW=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~ROW)&#xD;&#xA;ggplot(data=transform(mtcars,  COL=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~COL)&#xD;&#xA;ggplot(data=transform(mtcars,  PANEL=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~PANEL)&#xD;&#xA;ggplot(data=transform(mtcars,  SCALE_X=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~SCALE_X)&#xD;&#xA;ggplot(data=transform(mtcars,  SCALE_Y=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~SCALE_Y)&#xD;&#xA;ggplot(data=transform(mtcars,  AXIS_X=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~AXIS_X)&#xD;&#xA;ggplot(data=transform(mtcars,  AXIS_Y=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_wrap(~AXIS_Y)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It also is not limited to `facet_wrap`; `facet_grid` has the same issues:&#xD;&#xA;&#xD;&#xA;```r-lang&#xD;&#xA;ggplot(data=transform(mtcars,  ROW=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_grid(~ROW)&#xD;&#xA;ggplot(data=transform(mtcars,  ROW=am),  aes(wt,  mpg)) +&#xD;&#xA;  geom_blank() +&#xD;&#xA;  facet_grid(ROW~.)&#xD;&#xA;```" />
      <Message Id="35946082" ParentId="838" UserId="4196" Date="02/24/2014 22:12:19" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="839" Title="Specify different horizontal and vertical gap between facets">
    <Messages>
      <Message Id="0" ParentId="839" UserId="1741643" Date="07/11/2013 14:00:45" Content="Reason: Labels on x axis between neighboring facets are sometimes overlapping. Possible solution: Add horizontal (but no vertical) gap between facets.&#xD;&#xA;&#xD;&#xA;Implementation: Add and use new `panel.margin.x` and `panel.margin.y` themes" />
    </Messages>
  </Topic>
  <Topic Id="840" Title="Specify different horizontal and vertical margins for facets">
    <Messages>
      <Message Id="0" ParentId="840" UserId="1741643" Date="07/12/2013 00:17:46" Content="A straightforward extension. Includes an outstanding update of the .Rd files in the first two commits (i.e.,  #833),  a minor bugfix (8e61554),  the implementation with documentation (0001ce5) and an update of the .Rd files with the current changes (f11a4ba). Fixes #839.&#xD;&#xA;&#xD;&#xA;No test has been added yet. This code works for me." />
      <Message Id="30418154" ParentId="840" UserId="1741643" Date="12/12/2013 12:56:09" Content="@hadley: Do you plan to devote some time for maintenance in the foreseeable future? I find myself adding more and more features to a private development branch,  some of them are conflicting." />
      <Message Id="30431217" ParentId="840" UserId="4196" Date="12/12/2013 15:23:20" Content="Hopefully we'll do something next year,  but the testing burden for ggplot2 is getting very onerous. Even fixing bugs potentially breaks people's existing graphics code :/" />
      <Message Id="35946239" ParentId="840" UserId="4196" Date="02/24/2014 22:13:38" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="35954231" ParentId="840" UserId="1741643" Date="02/24/2014 23:35:43" Content="BTW,  this fixes #678." />
    </Messages>
  </Topic>
  <Topic Id="841" Title="Create ggsave-latex.R">
    <Messages>
      <Message Id="0" ParentId="841" UserId="446636" Date="07/15/2013 09:58:06" Content="This function makes it easier the use ggplot figures in a LaTeX environment by creating the required LaTeX and saving the figure in one line of code. The function uses ggsave to write the figure to the disc and print the LaTeX code to the screen." />
      <Message Id="35946264" ParentId="841" UserId="4196" Date="02/24/2014 22:13:51" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="842" Title="Add merge capability for scales">
    <Messages>
      <Message Id="0" ParentId="842" UserId="39680" Date="07/20/2013 22:50:33" Content="If a specific scale is already present,  the new scale will be merged&#xD;&#xA;with the current one instead of completely overriding it&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;ggplot(data.frame(x=1:12, y=rnorm(12, 50), groups=rep(LETTERS[ 1:3 ], each=4)), aes(x, y, group=groups)) + geom_line() + scale_y_continuous(expand=c(0, 0)) + scale_y_continuous(breaks=c(50))&#xD;&#xA;&#xD;&#xA;This makes it easier to create functions returning full-blown ggplots that you can still manipulate with known scale*-functions" />
      <Message Id="21304136" ParentId="842" UserId="4196" Date="07/21/2013 02:47:27" Content="Hi Thomas, &#xD;&#xA;&#xD;&#xA;Thanks for the contribution.  However,  this behaviour is so entrenched in ggplot2,  I'm not sure it's now possible to fix it. I think you've also missed an important case which is when you add a different _type_ of scale,  and it doesn't make sense to attempt to merge the two together.&#xD;&#xA;&#xD;&#xA;Hadley" />
      <Message Id="21308012" ParentId="842" UserId="39680" Date="07/21/2013 10:27:40" Content="Hi Hadley, &#xD;&#xA;&#xD;&#xA;thanks for the feedback. I just added a test for merging 2 scale_x_continuous,  2 scale_y_continuous and 2 scale_colour_manual in a single plot and that seems to be working too.&#xD;&#xA;are you generally opposed to let users 'update' a scale or is it the way i accomplish it? &#xD;&#xA;&#xD;&#xA;thomas" />
      <Message Id="21309029" ParentId="842" UserId="4196" Date="07/21/2013 12:08:20" Content="What happens if you add a continuous scale and then a discrete scale?" />
      <Message Id="21310123" ParentId="842" UserId="39680" Date="07/21/2013 13:35:56" Content="It now replaces the continuous scale with the discrete and gives a message (first of the three messages):&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; df = data.frame(x=1:9, y=(1:9)^2, z=rep(LETTERS[ 1:3 ], each=3))&#xD;&#xA;&gt; ggplot(df, aes(x, y, group=z, color=z)) + geom_line() + scale_x_discrete() + scale_x_continuous(breaks=c(8.5)) + scale_x_continuous(breaks=c(9.5)) + scale_color_brewer() + scale_color_manual(&quot;g&quot;, values=c(&quot;RED&quot;, &quot;BLUE&quot;, &quot;black&quot;))&#xD;&#xA;&#xD;&#xA;Scale for 'x' is present but of type 'discrete'. The scale is replaced by a scale of type 'continuous'.&#xD;&#xA;Scale for 'x' is already present. Adding another scale for 'x',  which will be merged with the existing scale.&#xD;&#xA;Scale for 'colour' is already present. Adding another scale for 'colour',  which will be merged with the existing scale.&#xD;&#xA;```" />
      <Message Id="21637915" ParentId="842" UserId="4196" Date="07/26/2013 18:06:24" Content="Hmm,  thanks.  I'll think about it in more depth when I'm next working on ggplot2." />
    </Messages>
  </Topic>
  <Topic Id="843" Title="Bars start at 1 in log scale">
    <Messages>
      <Message Id="0" ParentId="843" UserId="5058965" Date="07/22/2013 13:26:05" Content="Test cases:&#xD;&#xA;&#xD;&#xA;    qplot(c(1,  2),  c(1,  -1),  geom = &quot;bar&quot;,  stat = &quot;identity&quot;)&#xD;&#xA;    qplot(c(1,  2),  c(10,  0.1),  geom = &quot;bar&quot;,  stat = &quot;identity&quot;) + scale_y_log10()&#xD;&#xA;&#xD;&#xA;In the first case,  the zero value may be considered as a reference value,  however,  in the second case,  I would have expected the bar to go from below to 0.1 (rather than from 0.1 to 1). A solution would be to make the reference adjustable. Another would be to change the computation of the min value in the case of log scale by changing geom-bar.r from&#xD;&#xA;&#xD;&#xA;    ymin = pmin(y,  0),  ymax = pmax(y,  0), &#xD;&#xA;&#xD;&#xA;to&#xD;&#xA;&#xD;&#xA;    ymin = min(y),  ymax = pmax(y), &#xD;&#xA;&#xD;&#xA;Furthermore,  in both cases (negative values or values lower than 1 in log scale) the following warning messages is produced even though not stacking is actually performed:&#xD;&#xA;&#xD;&#xA;    Stacking not well defined when ymin != 0" />
      <Message Id="35946277" ParentId="843" UserId="4196" Date="02/24/2014 22:14:00" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35988387" ParentId="843" UserId="5058965" Date="02/25/2014 09:13:06" Content="I looked in the code at the time I posted this issue,  but was not able to fully understand the code. I may take a look to your book &quot;Advanced R programming&quot; that I discovered only recently. Feel free to point me any other useful resource." />
      <Message Id="36004286" ParentId="843" UserId="4196" Date="02/25/2014 12:56:05" Content="Unfortunately this is a challenging problem to fix because it involves the interaction of a geom and a scale. " />
    </Messages>
  </Topic>
  <Topic Id="844" Title="Delete space between panels in theme_bw()">
    <Messages>
      <Message Id="0" ParentId="844" UserId="932850" Date="07/29/2013 07:37:52" Content="The current behavior of theme_bw() takes the same panel.margin=unit(0.25, &quot;lines&quot;) as theme_grey(). This setting makes sense for theme_grey() since you need white space as a border to distinguish the different panels. However,  theme_bw() uses a grey line for the panel border,  yielding the white space un-necessary. In fact,  as shown below on page 63 of Envisioning Information by Edward Tufte,  the &quot;grid boxes&quot; or space between panels,  are a bad design (top). A better design is grey boxes around each panel with no white space between them (bottom).&#xD;&#xA;&#xD;&#xA;![ thick-facets-are-bad ](https://f.cloud.github.com/assets/932850/870117/ce885c36-f820-11e2-9852-7719686c54a1.png)&#xD;&#xA;&#xD;&#xA;On the left: the current default output when using theme_bw() in ggplot2. On the right: the same plot with theme_bw() after applying my patch,  which changes only one line of code.&#xD;&#xA;&#xD;&#xA;![ space-nospace ](https://f.cloud.github.com/assets/932850/870110/7068ffac-f820-11e2-894c-e8440d87c151.png)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35946323" ParentId="844" UserId="4196" Date="02/24/2014 22:14:32" Content="Unfortunately that change would break existing code so isn't suitable for inclusion in a very mature package like ggplot2.&#xD;&#xA;" />
      <Message Id="35948337" ParentId="844" UserId="932850" Date="02/24/2014 22:32:31" Content="Out of curiousity,  what existing code would this change break?&#xA;&#xA;&#xA;On Mon,  Feb 24,  2014 at 5:14 PM,  Hadley Wickham &lt;notifications@github.com&gt;wrote:&#xA;&#xA;&gt; Closed #844 &lt;https://github.com/hadley/ggplot2/pull/844&gt;.&#xA;&gt;&#xA;&gt; --&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/pull/844&gt;&#xA;&gt; .&#xA;&gt;" />
      <Message Id="35949340" ParentId="844" UserId="4196" Date="02/24/2014 22:42:28" Content="Sorry,  that was a standard copy-and-paste. The problem is that while I agree that your change does improve the appearance of this plot in this case,  many people have come to expect that gap. ggplot2 is now so commonly used that even minor changes have big consequences." />
    </Messages>
  </Topic>
  <Topic Id="845" Title="Improve error message for try_require (missing only)">
    <Messages>
      <Message Id="0" ParentId="845" UserId="23257" Date="07/30/2013 08:22:36" Content="Only note packages which failed to load rather than all&#xD;&#xA;packages passed to the function." />
      <Message Id="35946406" ParentId="845" UserId="4196" Date="02/24/2014 22:15:18" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="846" Title="Potential bug in geom_ribbon when we request log y axis and we setup limits">
    <Messages>
      <Message Id="0" ParentId="846" UserId="5131281" Date="07/31/2013 17:31:57" Content="# Generate data&#xD;&#xA;PKDATA &lt;- data.frame ( TIME= 0:12,  PK = 500*exp(-0.693*0:12) ,  LOW= 0.1*500*exp(-0.693*0:12), UP=10*500*exp(-0.693*0:12))&#xD;&#xA;m &lt;- ggplot(PKDATA ,  aes(y = PK ,  x = TIME))&#xD;&#xA;m  + geom_ribbon(aes(ymin=LOW,  ymax=UP) )+ geom_point(col=&quot;red&quot;)&#xD;&#xA;m  + geom_ribbon(aes(ymin=LOW,  ymax=UP) )+ geom_point(col=&quot;red&quot;)+ scale_y_log10()&#xD;&#xA;&#xD;&#xA;# does not work if we request limits&#xD;&#xA;m  + geom_ribbon(aes(ymin=LOW,  ymax=UP) )+ geom_point(col=&quot;red&quot;)+ scale_y_log10(limits = c(1, 10000))&#xD;&#xA;&#xD;&#xA;#does not work if we request limits&#xD;&#xA;m  + geom_ribbon(aes(ymin=LOW,  ymax=UP) )+ geom_point(col=&quot;red&quot;)+ &#xD;&#xA;scale_y_continuous(limits=c(1, 10000), breaks=c(1, 10, 100, 1000, 10000) )+  coord_trans(y=&quot;log&quot;)&#xD;&#xA;&#xD;&#xA;#works if we remove the limits&#xD;&#xA;m  + geom_ribbon(aes(ymin=LOW,  ymax=UP) )+ geom_point(col=&quot;red&quot;)+ &#xD;&#xA;scale_y_continuous(breaks=c(1, 10, 100, 1000, 10000) )+  coord_trans(y=&quot;log&quot;)&#xD;&#xA;&#xD;&#xA;# again when we request limits the ribbon get cut !&#xD;&#xA;m  + geom_ribbon(aes(ymin=LOW,  ymax=UP) )+ geom_point(col=&quot;red&quot;)+&#xD;&#xA;  scale_y_continuous(trans = &quot;log10&quot;, limits=c(0.1, 10000))&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35946593" ParentId="846" UserId="4196" Date="02/24/2014 22:16:52" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="847" Title="Update scale-continuous.r">
    <Messages>
      <Message Id="0" ParentId="847" UserId="463252" Date="08/02/2013 17:48:39" Content="Fixing typo as reported in Documentation feedback [ #1162 ]" />
      <Message Id="35946610" ParentId="847" UserId="4196" Date="02/24/2014 22:17:03" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="848" Title="Allow stat_function to have different x values  (range) than the baseplot">
    <Messages>
      <Message Id="0" ParentId="848" UserId="402025" Date="08/05/2013 04:49:27" Content="&#xD;&#xA;The documentation `stat_function`  states that it recognizes only the `y` aesthetic. &#xD;&#xA;&#xD;&#xA;I'd love it if `stat_function` respected the `x` aesthetic,  or had a `range` or limits argument.&#xD;&#xA;&#xD;&#xA;For example if I wanted to plot the pdf for the Normal distribution and then shade the area above a certain point,  it would be lovely if the following worked....&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(data = NULL) +&#xD;&#xA;   stat_function(mapping = aes(x = c(-3, 3)),  fun = dnorm) +&#xD;&#xA;    stat_function(mapping = aes(x = 1.96, 3),  fun = dnorm,  geom='area')&#xD;&#xA;```" />
      <Message Id="35946642" ParentId="848" UserId="4196" Date="02/24/2014 22:17:21" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="849" Title="Possible issue with floating point precision and facetted tile plot">
    <Messages>
      <Message Id="0" ParentId="849" UserId="379357" Date="08/10/2013 17:59:05" Content="I created [ a full example on StackOverflow ](http://stackoverflow.com/questions/18157975/combine-geom-tile-and-facet-grid-facet-wrap-and-remove-space-between-tiles-gg/18164691#18164691) demonstrating my experience (the answer (user name *Hendy*) I posted contains it).&#xD;&#xA;&#xD;&#xA;The gist:&#xD;&#xA;&#xD;&#xA;- I created a linear model with `fit &lt;- lm(x ~ y,  ...)` with four inputs (`x`s) and one response&#xD;&#xA;- I created a new set of data to generated a facetted tile plot of each combination of two `x`s vs. response (`fill = z`) over a range of values,  holding the other two variables not pictured in each tile plot at constant values when using `predict()` to generate the data set. This was done with `lapply` and `expand.grid`.&#xD;&#xA;- I used the following to create my tile plot:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;head(plot_data)&#xD;&#xA;           x y var1 var2     resp&#xD;&#xA;1 -3.0000000 0   x1   x2 69.05287&#xD;&#xA;2 -2.3333333 0   x1   x2 70.37217&#xD;&#xA;3 -1.6666667 0   x1   x2 71.69147&#xD;&#xA;&#xD;&#xA;tail(plot_data)&#xD;&#xA;           x y var1 var2      resp&#xD;&#xA;595 11.66667 7   x3   x4  92.37510&#xD;&#xA;596 13.33333 7   x3   x4  99.02534&#xD;&#xA;597 15.00000 7   x3   x4 105.67558&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;My ggplot call was like so&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(plot_data,  aes(x = x,  y = y)) + geom_tile(aes(fill = resp))&#xD;&#xA;p &lt;- p + facet_wrap(var2 ~ var1,  scales = &quot;free&quot;,  ncol = 3)&#xD;&#xA;```&#xD;&#xA;I got a blank plot as a result.&#xD;&#xA;&#xD;&#xA;![ blank plot ](http://i.stack.imgur.com/zqcQD.png)&#xD;&#xA;&#xD;&#xA;If I round `plot_data$x` and `plot_data$y`,  it works (though I also ended up having to create `height` and `width` values using `ddply` for each unique combination of `var1` and `var2` in order to get the tiles to fill the space... but that's a separate issue):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;plot_data_round &lt;- plot_data&#xD;&#xA;plot_data_round[ ,  c(&quot;x&quot;,  &quot;y&quot;) ] &lt;- round(plot_data_round[ ,  c(&quot;x&quot;,  &quot;y&quot;) ],  5)&#xD;&#xA;&#xD;&#xA;# same plot call as above&#xD;&#xA;p &lt;- ggplot(plot_data_round,  aes(x = x,  y = y,  z = resp))&#xD;&#xA;p &lt;- p + geom_tile(aes(fill = resp))&#xD;&#xA;p &lt;- p + facet_wrap(var2 ~ var1,  scales = &quot;free&quot;,  ncol = 3) + theme_bw()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot fills in some tiles ](http://i.stack.imgur.com/YBKZi.png)&#xD;&#xA;&#xD;&#xA;Why would the output of my `expand.grid` call not create a plot,  but rounding those vectors would?&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&#xD;&#xA;P.S. If you need the full code here,  I am happy to provide it. Since I already copied it elsewhere,  I figured linking to the SO post would be sufficient." />
      <Message Id="35946674" ParentId="849" UserId="4196" Date="02/24/2014 22:17:39" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="850" Title="Label alignment in legend only affects first element">
    <Messages>
      <Message Id="0" ParentId="850" UserId="394973" Date="08/21/2013 14:22:45" Content="Start with a simple boxplot and attempt to adjust the alignment of the legend text relative to the boxplot element. Only the first element in the legend is affected by the translation. Also,  happens with other geom_s (_tile,  _point,  _line). &#xD;&#xA;```r&#xD;&#xA;p&lt;-ggplot(data=PlantGrowth,  aes(x=group,  y=weight,  fill=group)) + geom_boxplot()&#xD;&#xA;&#xD;&#xA;p+scale_fill_discrete(guide = guide_legend(label.hjust=-5))&#xD;&#xA;```&#xD;&#xA;![ plantgrowth ](https://f.cloud.github.com/assets/394973/1001548/91a42cec-0a6c-11e3-95c2-c1c6783b0ab7.jpg)" />
      <Message Id="35946719" ParentId="850" UserId="4196" Date="02/24/2014 22:18:02" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="851" Title="consistent names between gtable layout and grobs">
    <Messages>
      <Message Id="0" ParentId="851" UserId="18970" Date="08/22/2013 15:15:36" Content="Currently the gtable uses slightly different names in the gtable's layout name column (&quot;panel-1&quot;,  &quot;strip_t-1&quot;,  etc.) and in the grob names (&quot;panel1&quot;,  &quot;strip_t.1&quot; respectively) . This complicates automatic editing of the gtable,  as I discovered in this example:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/a/18338240/471093&#xD;&#xA;&#xD;&#xA;it would be nice to have matching names in both." />
      <Message Id="35946724" ParentId="851" UserId="4196" Date="02/24/2014 22:18:05" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="852" Title="Fix doc typo (&quot;contiuous&quot;).">
    <Messages>
      <Message Id="0" ParentId="852" UserId="1345526" Date="09/01/2013 14:25:56" Content="" />
    </Messages>
  </Topic>
  <Topic Id="853" Title="geom_hline/vline no support for na.rm">
    <Messages>
      <Message Id="0" ParentId="853" UserId="141005" Date="09/01/2013 17:06:59" Content="geom_hline and geom_vline are based on geom_segment and thus will generate the annoying &quot;Removed N rows containing missing values (geom_segment)&quot; warning when there are NAs in the data set. Please update geom_hline and geom_vline to pass on the na.rm argument to GeomSegment$draw()" />
      <Message Id="35946750" ParentId="853" UserId="4196" Date="02/24/2014 22:18:20" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="854" Title="color paler and paler and paler,  although the code is the same">
    <Messages>
      <Message Id="0" ParentId="854" UserId="4466543" Date="09/04/2013 06:09:21" Content="I don't know whether this a bug due to the scales package,  or to the ggplot2 package,  or to something else. I run four consecutive times the same code (only the data change),  and  the green shaded area in the rendering becomes paler and paler,  &#xD;&#xA;You can use the standalone code below,  or the RMarkdown version available at https://gist.github.com/stla/6412117,  whose html rendering can be viewed at http://pagist.github.io/?6412077&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;ddat &lt;- structure(list(product = structure(c(4L,  5L,  6L,  2L,  7L,  8L, &#xD;&#xA;9L,  1L,  3L,  4L,  5L,  6L,  2L,  7L,  8L,  9L,  1L,  3L,  4L,  5L,  6L,  2L, &#xD;&#xA;7L,  8L,  9L,  1L,  3L,  4L,  5L,  6L,  2L,  7L,  8L,  1L,  3L,  4L,  5L,  6L, &#xD;&#xA;2L,  1L,  3L,  2L,  1L,  3L,  2L,  1L,  2L,  1L,  1L),  .Label = c(&quot;A&quot;, &#xD;&#xA;&quot;B&quot;,  &quot;C&quot;,  &quot;D&quot;,  &quot;E&quot;,  &quot;F&quot;,  &quot;G&quot;,  &quot;H&quot;,  &quot;I&quot;),  class = &quot;factor&quot;), &#xD;&#xA;variable = structure(c(1L, &#xD;&#xA;1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L, &#xD;&#xA;2L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  4L,  4L,  4L,  4L,  4L,  4L, &#xD;&#xA;4L,  4L,  5L,  5L,  5L,  5L,  5L,  5L,  6L,  6L,  6L,  7L,  7L,  8L,  8L,  9L&#xD;&#xA;),  .Label = c(&quot;Release&quot;,  &quot;Ref.1&quot;,  &quot;Ref.2&quot;,  &quot;Ref.3&quot;,  &quot;Ref.4&quot;, &#xD;&#xA;&quot;Ref.5&quot;,  &quot;Ref.6&quot;,  &quot;Ref.7&quot;,  &quot;Ref.8&quot;),  class = &quot;factor&quot;),  value = c(6, &#xD;&#xA;9,  6,  6,  8,  5,  5,  7,  10,  6,  5,  6,  4,  2,  3,  6,  7,  2,  4,  6,  7, &#xD;&#xA;5,  7,  8,  8,  8,  8,  6,  2,  7,  8,  7,  4,  3,  2,  8,  4,  8,  6,  8,  7,  4, &#xD;&#xA;3,  8,  7,  5,  7,  6,  9),  data = c(&quot;Release&quot;,  &quot;Release&quot;,  &quot;Release&quot;, &#xD;&#xA;&quot;Release&quot;,  &quot;Release&quot;,  &quot;Release&quot;,  &quot;Release&quot;,  &quot;Release&quot;,  &quot;Release&quot;, &#xD;&#xA;&quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;, &#xD;&#xA;&quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;, &#xD;&#xA;&quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;, &#xD;&#xA;&quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;, &#xD;&#xA;&quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;,  &quot;Ref&quot;)),  .Names = c(&quot;product&quot;,  &quot;variable&quot;, &#xD;&#xA;&quot;value&quot;,  &quot;data&quot;),  row.names = c(1L,  2L,  3L,  4L,  5L,  6L,  7L,  8L, &#xD;&#xA;9L,  10L,  11L,  12L,  13L,  14L,  15L,  16L,  17L,  18L,  19L,  20L,  21L, &#xD;&#xA;22L,  23L,  24L,  25L,  26L,  27L,  28L,  29L,  30L,  31L,  32L,  33L,  35L, &#xD;&#xA;36L,  37L,  38L,  39L,  40L,  44L,  45L,  49L,  53L,  54L,  58L,  62L,  67L, &#xD;&#xA;71L,  80L),  class = &quot;data.frame&quot;)&#xD;&#xA;&#xD;&#xA;test &lt;- function(i) { &#xD;&#xA;  products &lt;- levels(ddat$product)&#xD;&#xA;  produ &lt;- products[ i ]&#xD;&#xA;  dd &lt;- droplevels(subset(ddat,  subset= product==produ))&#xD;&#xA;  n &lt;- length(dd$variable)&#xD;&#xA;  ggplot(dd,  aes(x=variable,  y=value,  color=data)) +&#xD;&#xA;    geom_point(alpha=0.95,  size=4) +&#xD;&#xA;    theme_bw() +&#xD;&#xA;    ggtitle(produ) +&#xD;&#xA;    geom_rect(xmin = 0.5,  xmax = n+0.5,  ymin = 3,  ymax = 7, &#xD;&#xA;              fill = 'green',  alpha = 0.02,  show_guide=FALSE,  colour=NA) +&#xD;&#xA;    ylim(c(0, 12))&#xD;&#xA; }&#xD;&#xA;png()&#xD;&#xA;for(i in 1:4) print(test(i))&#xD;&#xA;dev.off()&#xD;&#xA;```" />
      <Message Id="23783470" ParentId="854" UserId="4196" Date="09/04/2013 11:52:56" Content="Hint: you are drawing multiple rectangles." />
      <Message Id="23784072" ParentId="854" UserId="4466543" Date="09/04/2013 12:04:47" Content="Thanks for the hint,  and sorry for having disturbed you for a programming error :-( &#xD;&#xA;It works fine like this: &#xD;&#xA;```&#xD;&#xA;test &lt;- function(i) { &#xD;&#xA;  products &lt;- levels(ddat$product)&#xD;&#xA;  produ &lt;- products[ i ]&#xD;&#xA;  dd &lt;- droplevels(subset(ddat,  subset= product==produ))&#xD;&#xA;  n &lt;- length(dd$variable)&#xD;&#xA;  ggplot() +&#xD;&#xA;    geom_point(aes(x=variable,  y=value,  color=data),  data=dd,  alpha=0.95,  size=4) +&#xD;&#xA;    theme_bw() +&#xD;&#xA;    ggtitle(produ) +&#xD;&#xA;    geom_rect(aes(xmin = 0.5,  xmax = n+0.5,  ymin = 3,  ymax = 7), &#xD;&#xA;              fill = 'green',  alpha = 0.2,  show_guide=FALSE,  colour=NA) +&#xD;&#xA;    ylim(c(0, 12))&#xD;&#xA; }&#xD;&#xA;png()&#xD;&#xA;for(i in 1:4) print(test(i))&#xD;&#xA;dev.off()&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="855" Title="path/line segments disappears when using coord_map">
    <Messages>
      <Message Id="0" ParentId="855" UserId="1662852" Date="09/10/2013 15:26:27" Content="When plotting one segment long paths and using coord_map (with defaults) the line does not appear in the map,  here is an example&#xD;&#xA;```&#xD;&#xA;require(ggplot2)&#xD;&#xA;#path does not appear&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+coord_map()+xlim(-50, 50)+ylim(-50, 50)+geom_path(data=data.frame(x=40:41,  y=41:40),  aes(x=x, y=y))&#xD;&#xA;#also line does not work&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+coord_map()+xlim(-50, 50)+ylim(-50, 50)+geom_line(data=data.frame(x=40:41,  y=41:40),  aes(x=x, y=y))&#xD;&#xA;#points does work&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+coord_map()+xlim(-50, 50)+ylim(-50, 50)+geom_point(data=data.frame(x=40:41,  y=41:40),  aes(x=x, y=y))&#xD;&#xA;#also one segment of the path is not there (it should be a wiggle)&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+coord_map()+xlim(-50, 50)+ylim(-50, 50)+geom_path(data=data.frame(x=c(40:41, 40),  y=42:40),  aes(x=x, y=y))&#xD;&#xA;#while points does fine again&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+coord_map()+xlim(-50, 50)+ylim(-50, 50)+geom_point(data=data.frame(x=c(40:41, 40),  y=42:40),  aes(x=x, y=y))&#xD;&#xA;#with default coord system and equal coords every thing is fine&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+xlim(-50, 50)+ylim(-50, 50)+geom_path(data=data.frame(x=40:41,  y=41:40),  aes(x=x, y=y))&#xD;&#xA;qplot(1:10, 1:10)+geom_point()+coord_equal()+xlim(-50, 50)+ylim(-50, 50)+geom_path(data=data.frame(x=40:41,  y=41:40),  aes(x=x, y=y))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Hope this is clear otherwise let me know&#xD;&#xA;My system:&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.0.1 (2013-05-16)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=C                 LC_NAME=C                 &#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] mapproj_1.2-1   maps_2.3-3      ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-2   dichromat_2.0-0    digest_0.6.3       grid_3.0.1        &#xD;&#xA; [ 5 ] gtable_0.1.2       labeling_0.2       MASS_7.3-29        munsell_0.4.2     &#xD;&#xA; [ 9 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2&#xD;&#xA;```" />
      <Message Id="35946757" ParentId="855" UserId="4196" Date="02/24/2014 22:18:24" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="856" Title="Improve error message 'ggplot2 doesn't know how to deal with data of class X'">
    <Messages>
      <Message Id="0" ParentId="856" UserId="1192371" Date="09/11/2013 01:15:00" Content="Could this error message save a heap of confusion (as evidenced by a google search of it) if the message instead read something like:&#xD;&#xA;'ggplot2 only deals with data of class datra.frame (X provided)'?" />
      <Message Id="24422043" ParentId="856" UserId="463252" Date="09/13/2013 20:25:31" Content="Except that is doesn't. Or rather,  ggplot can deal with data of any type assuming that there is a `fortify` method defined that converts the data into a `data.frame` that ggplot can handle.  Both `ggplot` and `fortify` are generic functions. If `ggplot` is passed anything other than a `data.frame`,  it falls through to `ggplot.default` which is&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot.default &lt;- function(data = NULL,  mapping = aes(),  ...) { &#xD;&#xA;  ggplot.data.frame(fortify(data,  ...),  mapping)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;`fortify` has many methods defined in `ggplot` (and additional methods in other packages):&#xD;&#xA;```&#xD;&#xA;&gt; methods(&quot;fortify&quot;)&#xD;&#xA; [ 1 ] fortify.cld*                      fortify.confint.glht*            &#xD;&#xA; [ 3 ] fortify.data.frame*               fortify.default*                 &#xD;&#xA; [ 5 ] fortify.glht*                     fortify.Line*                    &#xD;&#xA; [ 7 ] fortify.Lines*                    fortify.lm*                      &#xD;&#xA; [ 9 ] fortify.map*                      fortify.NULL*                    &#xD;&#xA;[ 11 ] fortify.Polygon*                  fortify.Polygons*                &#xD;&#xA;[ 13 ] fortify.SpatialLinesDataFrame*    fortify.SpatialPolygons*         &#xD;&#xA;[ 15 ] fortify.SpatialPolygonsDataFrame* fortify.summary.glht*            &#xD;&#xA;```&#xD;&#xA;If none of the specific methods are appropriate,  then `fortify.default` is called which is&#xD;&#xA;```&#xD;&#xA;fortify.default &lt;- function(model,  data,  ...) { &#xD;&#xA;  stop(&quot;ggplot2 doesn't know how to deal with data of class &quot;,  class(model),  call. = FALSE)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;and is the source of the error you see.&#xD;&#xA;&#xD;&#xA;I suppose `fortify.default` could try calling `as.data.frame(model)`,  but if there is no appropriate method,  you fall to `as.data.frame.default`&#xD;&#xA;```&#xD;&#xA;&gt; as.data.frame.default&#xD;&#xA;function (x,  ...) &#xD;&#xA;stop(gettextf(&quot;cannot coerce class \&quot;%s\&quot; to a data.frame&quot;,  deparse(class(x))),  &#xD;&#xA;    domain = NA)&#xD;&#xA;&lt;bytecode: 0x000000000dcd0028&gt;&#xD;&#xA;&lt;environment: namespace:base&gt;&#xD;&#xA;```&#xD;&#xA;which is arguably a less helpful error message.&#xD;&#xA;&#xD;&#xA;That said,  the error message could be better. I'd recommend&#xD;&#xA;&#xD;&#xA;&gt; ggplot2 does not know how to coerce data of class X into a data.frame that it can work with&#xD;&#xA;&#xD;&#xA;I don't know that mentioning `fortify` here would be useful. And even this phrasing could be improved." />
    </Messages>
  </Topic>
  <Topic Id="857" Title="Two legend bugs">
    <Messages>
      <Message Id="0" ParentId="857" UserId="932850" Date="09/12/2013 10:31:14" Content="```s&#xD;&#xA;## BUG 1: the fill legend should use shape=21 so that I can see color&#xD;&#xA;## differences in the legend and decode the fill aesthetic.&#xD;&#xA;df &lt;- data.frame(x=1:3, y=1:3, &#xD;&#xA;                 fill=c(&quot;B&quot;, &quot;R&quot;, &quot;R&quot;), &#xD;&#xA;                 shape=c(&quot;circle&quot;, &quot;circle&quot;, &quot;cross&quot;))&#xD;&#xA;p &lt;- ggplot(df)+&#xD;&#xA;  geom_point(aes(x,  y,  fill=fill,  shape=shape))+&#xD;&#xA;  scale_shape_manual(values=c(circle=21, cross=13))+&#xD;&#xA;  scale_fill_manual(values=c(B=&quot;blue&quot;, R=&quot;red&quot;))&#xD;&#xA;print(p)&#xD;&#xA;&#xD;&#xA;## BUG 2: previous problem,  plus too many items in the shape legend.&#xD;&#xA;df &lt;- data.frame(x=1:3, y=1:3, fill=factor(c(1, 2, 2)), shape=c(21, 21, 13))&#xD;&#xA;p &lt;- ggplot(df)+&#xD;&#xA;  geom_point(aes(x,  y,  fill=fill,  shape=shape))+&#xD;&#xA;  scale_shape_identity(guide=&quot;legend&quot;)+&#xD;&#xA;  scale_fill_identity(guide=&quot;legend&quot;)&#xD;&#xA;print(p)&#xD;&#xA;```" />
      <Message Id="24420989" ParentId="857" UserId="463252" Date="09/13/2013 20:08:23" Content="Here are workarounds for these two issues (I'm not saying they aren't bugs,  just that there exists a way to get what you want):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(df)+&#xD;&#xA;  geom_point(aes(x,  y,  fill=fill,  shape=shape))+&#xD;&#xA;  scale_shape_manual(values=c(circle=21, cross=13))+&#xD;&#xA;  scale_fill_manual(values=c(B=&quot;blue&quot;, R=&quot;red&quot;),  &#xD;&#xA;                    guide=guide_legend(override.aes=aes(shape=21)))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(df)+&#xD;&#xA;  geom_point(aes(x,  y,  fill=fill,  shape=shape))+&#xD;&#xA;  scale_shape_identity(guide=&quot;legend&quot;,  breaks=c(13, 21))+&#xD;&#xA;  scale_fill_identity(guide=&quot;legend&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;(bearing in mind that `df` is different for the two examples)." />
      <Message Id="35946786" ParentId="857" UserId="4196" Date="02/24/2014 22:18:40" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="858" Title="Having a color gradient with a sudden change in it.">
    <Messages>
      <Message Id="0" ParentId="858" UserId="4490535" Date="09/13/2013 15:06:50" Content="It would be great to have the possibility to create color gradients with a sudden change of the color in it. I'm thinking of a temperature heat map like the one below but having the option to make the change between positive and negative value easy spottable. For example: Yellow-red gradient for positive values and cyan-purple gradient for negative values. Also see http://stackoverflow.com/questions/18700938/ggplot2-positive-and-negative-values-different-color-gradient.&#xD;&#xA;&#xD;&#xA;![ rplot02 ](https://f.cloud.github.com/assets/4490535/1139148/51580e26-1c85-11e3-95ab-e479302fb8f8.png)&#xD;&#xA;&#xD;&#xA;Image: Temperature on Weissfluhjoch (2700 m) in Switzerland during winter 2012/2013 in °C." />
      <Message Id="35946813" ParentId="858" UserId="4196" Date="02/24/2014 22:18:53" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35946820" ParentId="858" UserId="4196" Date="02/24/2014 22:18:57" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="859" Title="annotate(&quot;segment&quot;,  ...) doesn't work with dates on x-axis">
    <Messages>
      <Message Id="0" ParentId="859" UserId="3650" Date="09/16/2013 20:09:37" Content="How to reproduce:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(data.table)&#xD;&#xA;library(lubridate)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;# Prepare some random data&#xD;&#xA;set.seed(1234)&#xD;&#xA;dt &lt;- data.table(x = rnorm(365*5),  d = seq(ymd(20130101),  ymd(20131231),  by = 86400))&#xD;&#xA;dt.m &lt;- dt[ ,  list(total = sum(x)),  by = list(month = floor_date(d,  &quot;month&quot;)) ]&#xD;&#xA;# Create a basic scatterplot chart&#xD;&#xA;p &lt;- qplot(month,  total,  data = dt.m)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This works:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;# Both of these work as expected and produce the same result&#xD;&#xA;p + geom_segment(x = as.numeric(ymd(20130401)),  xend = as.numeric(ymd(20130701)),  &#xD;&#xA;  y = -10,  yend = 10)&#xD;&#xA;p + geom_segment(aes(x = ymd(20130401),  xend = ymd(20130701),  &#xD;&#xA;  y = -10,  yend = 10))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;but this doesn't:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; p + annotate(&quot;segment&quot;,  x = as.numeric(ymd(20130401)),  xend = as.numeric(ymd(20130701)),  &#xD;&#xA;  y = -10,  yend = 10)&#xD;&#xA;Error: Invalid input: time_trans works with objects of class POSIXct only&#xD;&#xA;&#xD;&#xA;&gt; p + annotate(&quot;segment&quot;,  x = ymd(20130401),  xend = ymd(20130701),  &#xD;&#xA;  y = -10,  yend = 10)&#xD;&#xA;Error in Ops.POSIXt((x - from[ 1 ]),  diff(from)) : &#xD;&#xA;  '/' not defined for &quot;POSIXt&quot; objects &#xD;&#xA;&#xD;&#xA;&gt; p + annotate(&quot;segment&quot;,  aes(x = ymd(20130401),  xend = ymd(20130701),  &#xD;&#xA;  y = -10,  yend = 10))&#xD;&#xA;Error in as.data.frame.default(x[ [ i ] ],  optional = TRUE,  stringsAsFactors = stringsAsFactors) : &#xD;&#xA;  cannot coerce class &quot;&quot;uneval&quot;&quot; to a data.frame&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I have also posted a question to SO - there may be some additional details there. http://stackoverflow.com/questions/18796386/how-to-use-ggplot2s-annotate-with-dates-in-x-axis" />
      <Message Id="24542602" ParentId="859" UserId="463252" Date="09/16/2013 20:39:35" Content="A simplified test case which eliminates the dependence on `data.table` and `lubridate` (just to make sure that neither is the source of the problem):&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;dt &lt;- &#xD;&#xA;structure(list(month = structure(c(1356998400,  1359676800,  1362096000,  &#xD;&#xA;1364774400,  1367366400,  1370044800,  1372636800,  1375315200,  1377993600,  &#xD;&#xA;1380585600,  1383264000,  1385856000),  tzone = &quot;UTC&quot;,  class = c(&quot;POSIXct&quot;,  &#xD;&#xA;&quot;POSIXt&quot;)),  total = c(-5.4586134857604,  -13.7043187714622,  3.25254944094792,  &#xD;&#xA;-10.3260511491301,  6.44178978776937,  2.46127352381964,  -1.98673390397442,  &#xD;&#xA;-16.3227453308624,  11.7148615457185,  -2.23934628094151,  5.5084335509504,  &#xD;&#xA;-10.7700077344507)),  row.names = c(NA,  -12L),  class = &quot;data.frame&quot;,  .Names = c(&quot;month&quot;,  &#xD;&#xA;&quot;total&quot;))&#xD;&#xA;&#xD;&#xA;p &lt;- qplot(month,  total,  data = dt)&#xD;&#xA;&#xD;&#xA;p + geom_segment(x = as.numeric(as.POSIXct(&quot;2013-04-01&quot;)), &#xD;&#xA;                 xend = as.numeric(as.POSIXct(&quot;2013-07-01&quot;)), &#xD;&#xA;                 y = -10, &#xD;&#xA;                 yend = 10)&#xD;&#xA;&#xD;&#xA;p + geom_segment(aes(x = as.POSIXct(&quot;2013-04-01&quot;), &#xD;&#xA;                     xend = as.POSIXct(&quot;2013-07-01&quot;), &#xD;&#xA;                     y = -10, &#xD;&#xA;                     yend = 10))&#xD;&#xA;&#xD;&#xA;p + annotate(&quot;segment&quot;, &#xD;&#xA;             x = as.numeric(as.POSIXct(&quot;2013-04-01&quot;)), &#xD;&#xA;             xend = as.numeric(as.POSIXct(&quot;2013-07-01&quot;)), &#xD;&#xA;             y = -10, &#xD;&#xA;             yend = 10)&#xD;&#xA;# Error: Invalid input: time_trans works with objects of class POSIXct only&#xD;&#xA;&#xD;&#xA;p + annotate(&quot;segment&quot;, &#xD;&#xA;             x = as.POSIXct(&quot;2013-04-01&quot;), &#xD;&#xA;             xend = as.POSIXct(&quot;2013-07-01&quot;), &#xD;&#xA;             y = -10, &#xD;&#xA;             yend = 10)&#xD;&#xA;# Error in Ops.POSIXt((x - from[ 1 ]),  diff(from)) : &#xD;&#xA;#   '/' not defined for &quot;POSIXt&quot; objects&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I did not include the version with `annotate` and `aes` because that is not how `annotate is meant to be called,  so an error there is not surprising." />
      <Message Id="35946891" ParentId="859" UserId="4196" Date="02/24/2014 22:19:48" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="51950848" ParentId="859" UserId="2766399" Date="08/12/2014 17:52:21" Content="Tried to install the latest development version from github install_github(&quot;hadley/ggplot2&quot;),  but this problem still persists." />
      <Message Id="53450592" ParentId="859" UserId="463252" Date="08/26/2014 16:40:02" Content="The patch for this was resubmitted as #950,  but that has not been merged into the master branch yet." />
    </Messages>
  </Topic>
  <Topic Id="860" Title="Add xend,  yend to position for annotate.">
    <Messages>
      <Message Id="0" ParentId="860" UserId="463252" Date="09/16/2013 20:41:49" Content="Fixes #859." />
      <Message Id="35946911" ParentId="860" UserId="4196" Date="02/24/2014 22:19:58" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="861" Title="geom boxplot and outlier.colour: outlier.color is ignored">
    <Messages>
      <Message Id="0" ParentId="861" UserId="140350" Date="09/19/2013 18:50:05" Content="Mundane,  I know...&#xD;&#xA;&#xD;&#xA;In 0.9.3.1 you must use `outlier.colour` and not `outlier.color` with geom boxplot.  I don't see that this has been reported before." />
      <Message Id="35946922" ParentId="861" UserId="4196" Date="02/24/2014 22:20:06" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="862" Title="Please fix stat_bin documentation: default is `right = FALSE`,  not vice versa">
    <Messages>
      <Message Id="0" ParentId="862" UserId="379357" Date="09/29/2013 23:33:15" Content="From [ the documentation for stat_bin ](http://docs.ggplot2.org/current/stat_bin.html):&#xD;&#xA;&#xD;&#xA;    simple &lt;- data.frame(x = rep(1:10,  each = 2))&#xD;&#xA;    base &lt;- ggplot(simple,  aes(x))&#xD;&#xA;    # By default,  right = TRUE,  and intervals are of the form (a,  b ]&#xD;&#xA;    base + stat_bin(binwidth = 1,  drop = FALSE,  right = TRUE,  col = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;But try this out:&#xD;&#xA;&#xD;&#xA;    simple &lt;- data.frame(x = rep(1:10,  each = 2))&#xD;&#xA;    ggplot(simple,  aes(x)) + geom_histogram(binwidth = 1,  col = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;![ 2013-09-29_182806 ](https://f.cloud.github.com/assets/379357/1234155/d03f1730-295e-11e3-804c-55daf479554d.png)&#xD;&#xA;&#xD;&#xA;    ggplot(simple,  aes(x)) + geom_histogram(right = F,  binwidth = 1,  col = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;![ 2013-09-29_182806 ](https://f.cloud.github.com/assets/379357/1234155/d03f1730-295e-11e3-804c-55daf479554d.png)&#xD;&#xA;&#xD;&#xA;    ggplot(simple,  aes(x)) + geom_histogram(right = T,  binwidth = 1,  col = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;![ 2013-09-29_182927 ](https://f.cloud.github.com/assets/379357/1234157/fffc6068-295e-11e3-84c6-bb938b1047d8.png)&#xD;&#xA;&#xD;&#xA;So... no option is the same as explicitly setting `right = F`,  and `right = T` obviously looks different than the other two. The argument summary at the top of the page actually has it right,  but I was looking at the example to get more clarification on what it did -- caused me quite a lot of confusion lately!" />
      <Message Id="25379297" ParentId="862" UserId="86978" Date="09/30/2013 16:32:35" Content="Fixed in 66b81e9307793029f6083fc6108592786a564b09. Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="863" Title="add parameter whisker.hline to geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="863" UserId="5180786" Date="09/30/2013 09:16:23" Content="If whisker.hline =TRUE a horizontal line at the end of the whisker with length equal to the width of the box" />
      <Message Id="35946994" ParentId="863" UserId="4196" Date="02/24/2014 22:20:40" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="864" Title="geom_tile fill aesthetic crash depending on data value (perhaps Windows specific?)">
    <Messages>
      <Message Id="0" ParentId="864" UserId="5622221" Date="10/06/2013 11:43:42" Content="Hi&#xD;&#xA;&#xD;&#xA;Encountered an issue that causes an 'crash':&#xD;&#xA;&#xD;&#xA;The following code works fine:&#xD;&#xA;&#xD;&#xA;b &lt;- data.frame(x=rep(100L, 10),  y=as.factor(1L:10L),  f=rep(100, 10))&#xD;&#xA;ggplot(b) +&#xD;&#xA;  geom_tile(aes(y=y,  x=x,  fill=f))&#xD;&#xA;&#xD;&#xA;but,  simply changing the values of f to 125 as follows causes an application failure:&#xD;&#xA;&#xD;&#xA;b &lt;- data.frame(x=rep(100L, 10),  y=as.factor(1L:10L),  f=rep(125, 10))&#xD;&#xA;ggplot(b) +&#xD;&#xA;  geom_tile(aes(y=y,  x=x,  fill=f))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.0.2 (2013-09-25)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-3   dichromat_2.0-0    digest_0.6.3       grid_3.0.2         gtable_0.1.2       labeling_0.2      &#xD;&#xA; [ 7 ] MASS_7.3-29        munsell_0.4.2      plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2      tools_3.0.2  &#xD;&#xA;&#xD;&#xA;attempt by reproduce on Linux (see https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9dzDcTT7mgg) appears to suggest this could be a Windows specific issue?&#xD;&#xA;&#xD;&#xA;Regards,  and thanks&#xD;&#xA;&#xD;&#xA;Simon" />
      <Message Id="25827633" ParentId="864" UserId="463252" Date="10/07/2013 17:23:14" Content="As mentioned in the linked thread,  this seems to be the same issue discussed in https://groups.google.com/d/msg/ggplot2/qqF-k0na9aw/rNG5mpvKntwJ. &#xD;&#xA;&#xD;&#xA;I can not find the thread on r-devel about the bug mentioned in the above thread. Also,  r bug tracker is down at the moment so I can't check if there was a submitted bug. Finally,  I did not see an entry in the NEWS file of R-devel (http://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html) about this,  so it may not yet be fixed in R. If anyone can provide links to the things I couldn't find,  I'd appreciate it." />
      <Message Id="35947073" ParentId="864" UserId="4196" Date="02/24/2014 22:21:29" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="865" Title="qplot is missing a default aesthetics set for geom_dotplot">
    <Messages>
      <Message Id="0" ParentId="865" UserId="216319" Date="10/07/2013 19:29:38" Content="See also [ this SO topic ](http://stackoverflow.com/questions/19231655/using-qplot-to-make-a-dotplot/19232538?noredirect=1#19232538)&#xD;&#xA;&#xD;&#xA;Would be nice to be able to do:&#xD;&#xA;&#xD;&#xA;    x &lt;- rnorm(100)&#xD;&#xA;    qplot(x,  geom=&quot;dotplot&quot;)" />
      <Message Id="35947085" ParentId="865" UserId="4196" Date="02/24/2014 22:21:36" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947085" ParentId="865" UserId="4196" Date="02/24/2014 22:21:36" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="866" Title="Values higher than limit value are interpreted as lower values.">
    <Messages>
      <Message Id="0" ParentId="866" UserId="806435" Date="10/17/2013 12:46:13" Content="This may be by design,  but if limits are set on a scale,  values above the limit value are assigned a lower value,  causing potential erroneous interpretation.  I would recommend flooring values above limits to the highest value within limits.&#xD;&#xA;&#xD;&#xA;    test &lt;- data.frame(x=c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;), y=c(&quot;B&quot;, &quot;B&quot;, &quot;B&quot;),  value=c(0, 1, 2))&#xD;&#xA;    qplot(data=test,  x=x, y=y, fill=value, geom=&quot;tile&quot;)+scale_fill_gradient(low=&quot;white&quot;,  high=&quot;black&quot;,  limits=c(0,  1))&#xD;&#xA;&#xD;&#xA;![ rplot ](https://f.cloud.github.com/assets/806435/1351626/f3ee4150-3729-11e3-9eef-ce6b98c5cbc5.jpeg)&#xD;&#xA;" />
      <Message Id="26500997" ParentId="866" UserId="4196" Date="10/17/2013 12:48:32" Content="I think this is related to NA and the values they are given and the fact you have a gray scale" />
      <Message Id="26533903" ParentId="866" UserId="463252" Date="10/17/2013 18:19:04" Content="The values outside the limits are set to `NA` and color that `NA` is rendered in is defined by the `na.value` argument to `scale_fill_gradient` which,  by default,  is `&quot;grey50&quot;`. In this case,  that is not a good default because `&quot;grey50&quot;` falls within (along) the color scale and so looks like it represents a value other than `NA`. &#xD;&#xA;&#xD;&#xA;Compare this example where the default `NA` value is outside the scale colors:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(data=test,  x=x, y=y, fill=value, geom=&quot;tile&quot;) +&#xD;&#xA; scale_fill_gradient(low=&quot;green&quot;,  high=&quot;red&quot;,  limits=c(0,  1))&#xD;&#xA;```&#xD;&#xA;![ tmp ](https://f.cloud.github.com/assets/463252/1354603/86932f20-3757-11e3-8fcc-ed9877c65faa.png)&#xD;&#xA;&#xD;&#xA;And this one where the the `na.value` is set to something that doesn't fall in the scales range:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;qplot(data=test,  x=x, y=y, fill=value, geom=&quot;tile&quot;) +&#xD;&#xA; scale_fill_gradient(low=&quot;white&quot;,  high=&quot;black&quot;,  limits=c(0,  1),  na.value=&quot;red&quot;)&#xD;&#xA;```&#xD;&#xA;![ tmp ](https://f.cloud.github.com/assets/463252/1354616/cbd73e32-3757-11e3-82bf-b9386cffb4e2.png)&#xD;&#xA;&#xD;&#xA;If,  rather than dropping values outside of the range,  you want them to be set to the limits of the range,  you need the `squish` option of the `oob` argument to scales:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(&quot;scales&quot;)&#xD;&#xA;qplot(data=test,  x=x, y=y, fill=value, geom=&quot;tile&quot;) +&#xD;&#xA; scale_fill_gradient(low=&quot;white&quot;,  high=&quot;black&quot;,  limits=c(0,  1),  oob=squish)&#xD;&#xA;```&#xD;&#xA;![ tmp ](https://f.cloud.github.com/assets/463252/1354659/6cc3c2ac-3758-11e3-82e1-3a48d812effd.png)&#xD;&#xA;&#xD;&#xA;So this is all working as intended and the functionality you desire is available with the option `oob=squish` given to a scale." />
      <Message Id="26541915" ParentId="866" UserId="4196" Date="10/17/2013 19:33:12" Content="Thanks for the detailed explanation @BrianDiggs !" />
    </Messages>
  </Topic>
  <Topic Id="867" Title="error in violin when same values present more than 2 times">
    <Messages>
      <Message Id="0" ParentId="867" UserId="5766900" Date="10/24/2013 15:59:08" Content="Hello, &#xD;&#xA;&#xD;&#xA;I have find a surprising error when data things with violin graph. When I have the same values repeated more than two times the computation of the violin fails.&#xD;&#xA;&#xD;&#xA;Here is an example:&#xD;&#xA;```&#xD;&#xA;$ cat temp.csv&#xD;&#xA;&quot;iteration&quot;, &quot;median&quot;&#xD;&#xA;1, 1.0&#xD;&#xA;1, 1.0&#xD;&#xA;1, 1.0&#xD;&#xA;$ R&#xD;&#xA;&gt; library(&quot;ggplot2&quot;)&#xD;&#xA;&gt; temp &lt;- read.csv(file=&quot;test.csv&quot;, head=TRUE, sep=&quot;, &quot;)&#xD;&#xA;&gt; ggplot(temp,  aes(factor(iteration),  as.numeric(median))) + geom_violin()&#xD;&#xA;Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 3L) :&#xD;&#xA;  replacement has 1 rows,  data has 0&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;However there is no problem with the following example:&#xD;&#xA;```&#xD;&#xA;$ cat temp.csv&#xD;&#xA;&quot;iteration&quot;, &quot;median&quot;&#xD;&#xA;1, 1.0&#xD;&#xA;1, 1.0&#xD;&#xA;1, 1.1&#xD;&#xA;$ R&#xD;&#xA;&gt; library(&quot;ggplot2&quot;)&#xD;&#xA;&gt; temp &lt;- read.csv(file=&quot;test.csv&quot;, head=TRUE, sep=&quot;, &quot;)&#xD;&#xA;&gt; ggplot(temp,  aes(factor(iteration),  as.numeric(median))) + geom_violin()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I have look around in the issues and on google and I didn't find someone with a similar problem. Did I miss something ? &#xD;&#xA;&#xD;&#xA;Jean-Marc" />
      <Message Id="29643544" ParentId="867" UserId="73663" Date="12/02/2013 18:25:40" Content="Someone found a similar issue a couple weeks ago: https://groups.google.com/forum/#!topic/ggplot2/mvsFDJhPcNE" />
      <Message Id="29713163" ParentId="867" UserId="5766900" Date="12/03/2013 14:25:33" Content="Good to know I'm not alone :)&#xD;&#xA;I have post there my little solution to the problem." />
      <Message Id="29743269" ParentId="867" UserId="73663" Date="12/03/2013 19:35:41" Content="I ended up adding a tiny bit of random noise to any values that were identical (in my case,  I had a bunch of repeated 1s):&#xD;&#xA;&#xD;&#xA;    # Add a tiny bit of noise for geom_violin&#xD;&#xA;    too.perfect &lt;- which(plot.data$pct_fulfilled == 1)&#xD;&#xA;    noise &lt;- rnorm(length(too.perfect))/100000&#xD;&#xA;    plot.data[ too.perfect, 'pct_fulfilled' ] &lt;- plot.data[ too.perfect, 'pct_fulfilled' ] - noise" />
      <Message Id="35947095" ParentId="867" UserId="4196" Date="02/24/2014 22:21:41" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="868" Title="Add parameter varwidth to geom_boxplot.">
    <Messages>
      <Message Id="0" ParentId="868" UserId="1840074" Date="10/24/2013 21:52:46" Content="Added an option to create boxplots of widths proportional to the square-roots of the number of observations they represent. It resembles the 'varwidth' parameter to graphics::boxplot. &#xD;&#xA;&#xD;&#xA;Note that the implementation poses slight overhead to calculate_groups() in Stat,  as I compute the maximum group size there.&#xD;&#xA;&#xD;&#xA;I tested the implementation extensively. It seems to work well with all geom_boxplot examples as well as when creating boxplots implicitly using stat_boxplot.&#xD;&#xA;&#xD;&#xA;Note that using varwidth=TRUE results in warnings of 'position_dodge requires constant width: output may be incorrect'. This poses a real problem (only) in the case of breaking groups further by another factor as e.g. in &#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(factor(cyl),  mpg))&#xD;&#xA;p + geom_boxplot(aes(fill = factor(vs)), varwidth=TRUE)&#xD;&#xA;```&#xD;&#xA;where boxplots in single group are not put side by side,  but on top of each other,  in contrast to the case of not using varwidth:&#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(factor(cyl),  mpg))&#xD;&#xA;p + geom_boxplot(aes(fill = factor(vs)))&#xD;&#xA;```&#xD;&#xA;However,  IMHO this is not a big deal.&#xD;&#xA;" />
      <Message Id="31395392" ParentId="868" UserId="1840074" Date="12/31/2013 13:55:13" Content="I found a better solution. I will commit it soon." />
    </Messages>
  </Topic>
  <Topic Id="869" Title="LICENSE?">
    <Messages>
      <Message Id="0" ParentId="869" UserId="2328656" Date="10/26/2013 22:01:52" Content="include COPYING file for GPLv2" />
      <Message Id="27178606" ParentId="869" UserId="1741643" Date="10/27/2013 20:37:06" Content="This is from [ the guide ](http://cran.r-project.org/doc/manuals/R-exts.html#Licensing):&#xD;&#xA;&#xD;&#xA;&gt; Whereas you should feel free to include a license file in your *source* distribution,  please do not arrange to *install* yet another copy of the GNU `COPYING` or `COPYING.LIB` files but refer to the copies on http://www.R-project.org/Licenses/ and included in the R distribution (in directory `share/licenses`)." />
      <Message Id="27178971" ParentId="869" UserId="2328656" Date="10/27/2013 20:55:09" Content="&gt; refer to the copies on http://www.R-project.org/Licenses/&#xD;&#xA;&#xD;&#xA;Since GPL permits attribution by link,  it might make the most sense to include a note in the README (a License section with a link to http://www.r-project.org/Licenses/GPL-2)." />
      <Message Id="35915461" ParentId="869" UserId="4196" Date="02/24/2014 18:03:02" Content="ggplot2 currently complies with R licensing policies,  even though these are different to those used by other programming language communities." />
    </Messages>
  </Topic>
  <Topic Id="870" Title="Border spacing depends on zooming vs. subsetting">
    <Messages>
      <Message Id="0" ParentId="870" UserId="1747945" Date="10/28/2013 16:33:56" Content="The spacing around the borders of ggplots depend on whether you are using `ylim` or `coord_cartesian`. If you are plotting a single plot,  this difference is negligible. However,  when faceting plots,  the differences become noticeable because the labels overlap each other. &#xD;&#xA;&#xD;&#xA;I understand the difference in subsetting vs. zooming using `ylim` vs. `coord_cartesian`,  respectively,  but at the end of the day all you are doing in either case is changing the range of an axis. I think you should expect the same plot output regardless of whether you are subsetting or zooming. &#xD;&#xA;&#xD;&#xA;Currently,  `coord_cartesian` causes the labels to overlap,  while `ylim` looks ok.&#xD;&#xA;&#xD;&#xA;For example, &#xD;&#xA;```&#xD;&#xA;library(ggplot2) &#xD;&#xA;# Data to plot&#xD;&#xA;df &lt;- data.frame(A = 1:6,  B = 1:6,  F = rep(c(&quot;H&quot;,  &quot;L&quot;),  times = 3))&#xD;&#xA;# Default case. The axis labels for the H and L facets 2 and 6,  respectively,  do not overlap.&#xD;&#xA;p &lt;- ggplot(df,  aes(x = A,  y = B)) + geom_point() + facet_grid(F ~ .)&#xD;&#xA;# Using ylim,  things continue to look good. There is a bit of spacing below the 0 in H and 5 and L &#xD;&#xA;# so that they don't overlap.&#xD;&#xA;p + ylim(0,  5)&#xD;&#xA;# But I don't want to subset the data,  I want to zoom in. In this example it does not matter,  but &#xD;&#xA;# my real data is much different. To do this I need to use coord_cartesian...&#xD;&#xA;p + coord_cartesian(ylim = c(0,  5))&#xD;&#xA;# As you can see,  none of that nice spacing between the values and the border exist anymore so the 0 and 5 &#xD;&#xA;# sit directly on top of each other. &#xD;&#xA;# The best solution has been to edit the panel margins directly&#xD;&#xA;p + coord_cartesian(ylim = c(0,  5)) + theme(panel.margin = grid::unit(0.6,  &quot;cm&quot;))&#xD;&#xA;# But this still does not have the same,  &quot;nice&quot; spacing that of neither the default &#xD;&#xA;# plots nor the subsetted ylim plots.&#xD;&#xA;``` " />
      <Message Id="35947105" ParentId="870" UserId="4196" Date="02/24/2014 22:21:47" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="871" Title="Automatic setting of breaks with probit scale">
    <Messages>
      <Message Id="0" ParentId="871" UserId="1741643" Date="11/05/2013 08:39:57" Content="Automatic setting of breaks fails with probit scale if there are values&#xD;&#xA;too close to 0 or 1.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Bug&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(c(0.25,  8),  c(0.03,  0.95),  data = soilSample) + scale_y_continuous(trans = &quot;probit&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;## Error: 'from' cannot be NA,  NaN or infinite&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Data-dependent: y values further away from 0 or 1 don't trigger it&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(c(0.25,  8),  c(0.3,  0.7),  data = soilSample) + scale_y_continuous(trans = &quot;probit&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-3 ](http://i.imgur.com/fF3Hcu5.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Workaround: Set explicit breaks&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(c(0.25,  8),  c(0.03,  0.95),  data = soilSample) + scale_y_continuous(trans = &quot;probit&quot;,  &#xD;&#xA;    breaks = seq(0.2,  0.8,  0.2))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-4 ](http://i.imgur.com/3aFoe1r.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Bug with explicit breaks&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;qplot(c(0.25,  8),  c(0.03,  0.95),  data = soilSample) + scale_y_continuous(trans = &quot;probit&quot;,  &#xD;&#xA;    breaks = seq(0,  1,  0.2))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;## Error: 'from' cannot be NA,  NaN or infinite&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;See also https://github.com/yihui/tikzDevice/commit/9f381e693d857c468921d892641f0387761f9078&#xD;&#xA;" />
      <Message Id="35947112" ParentId="871" UserId="4196" Date="02/24/2014 22:21:52" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="872" Title="enable continuous integration via craigcitro/r-travis">
    <Messages>
      <Message Id="0" ParentId="872" UserId="1741643" Date="11/07/2013 14:21:01" Content="- install binary R packages where available&#xA;- supply .gitignore" />
      <Message Id="30435766" ParentId="872" UserId="1741643" Date="12/12/2013 16:09:38" Content="@hadley: This might help addressing the issues raised [ in your earlier comment ](https://github.com/hadley/ggplot2/pull/840#issuecomment-30431217). Let me know if I can help by enhancing this PR.&#xD;&#xA;&#xD;&#xA;All in all,  I think people will accept visual changes if they are documented appropriately. `tikzDevice` has visual integration tests that compare results at the pixel level. I see `save_vtest` in your code,  and the `vtest` package. What do I need to do to activate the visual tests? What is so onerous about them (or about testing `ggplot2` in general)?&#xD;&#xA;&#xD;&#xA;I haven't looked into `vtest` yet,  but I would compare images at the following levels:&#xD;&#xA;&#xD;&#xA;- PDF output,  to check that results are identical&#xD;&#xA;- Output of `tikzDevice`,  to check if individual grobs have moved/changed&#xD;&#xA;- PNG output,  to see how severe the change is visually&#xD;&#xA;&#xD;&#xA;GitHub has a nice GUI for comparing images." />
    </Messages>
  </Topic>
  <Topic Id="873" Title="make %+% generic">
    <Messages>
      <Message Id="0" ParentId="873" UserId="5950242" Date="11/15/2013 18:23:10" Content="Binary function %+% is implicitly generic,  as it supports two classes.  Formal generic would increase compatibility with package metrumrg,  which defines a generic and several methods.  Perhaps ....&#xD;&#xA;&#xD;&#xA;`%+%` &lt;- function (e1,  e2) UseMethod('%+%')&#xD;&#xA;&#xD;&#xA;`%+%.theme` &lt;- function(e1,  e2){ &#xD;&#xA;  e2name &lt;- deparse(substitute(e2))&#xD;&#xA;  add_theme(e1,  e2,  e2name)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;`%+%.ggplot` &lt;- function(e1,  e2){ &#xD;&#xA;  e2name &lt;- deparse(substitute(e2))&#xD;&#xA;  add_ggplot(e1,  e2,  e2name)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;Thanks!&#xD;&#xA;" />
      <Message Id="29329604" ParentId="873" UserId="86978" Date="11/26/2013 20:14:55" Content="Hm,  this could work,  if `+.gg` is also defined like so:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;`+.gg` &lt;- function(e1,  e2) { &#xD;&#xA;  e1 %+% e2&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Without `+.gg` defined like this you have to use `%+%`,  instead of the plain `+`.&#xD;&#xA;" />
      <Message Id="29339781" ParentId="873" UserId="5950242" Date="11/26/2013 22:07:32" Content="No objections!  `+` is already generic,  so it is pretty safe to define class-specific methods for it.  Any support for a generic `%+%` is appreciated.  metrumrg currently defines `%+%` generically ... happy to coordinate on a single definition so that users of both packages face no real masking consequences with respect to use in the global environment. " />
      <Message Id="29340444" ParentId="873" UserId="86978" Date="11/26/2013 22:15:13" Content="@hadley,  can you remind me why we need the `%+%` operator? The only thing that comes to mind for me is when you add new data to an existing plot object." />
      <Message Id="35947121" ParentId="873" UserId="4196" Date="02/24/2014 22:21:56" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947121" ParentId="873" UserId="4196" Date="02/24/2014 22:21:56" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="874" Title="Possible bug in geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="874" UserId="2790723" Date="11/18/2013 17:46:55" Content="I have found for a particular set of data that using ggplot2 to make a boxplot gives results which are inconsistent with both quantiles and the base R boxplot function. I think that for these data the quantiles plotted by ggplot2 should match the quantiles from the quantile function.&#xD;&#xA;&#xD;&#xA;Reproducible example:&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;x&lt;- c(4L,  2L,  3L,  2L,  3L,  1L,  2L,  28L,  4L,  1L,  1L,  2L,  2L,  4L,  2L,  &#xD;&#xA;      2L,  1L,  1L,  2L,  7L,  17L,  8L,  5L,  4L,  1L,  3L,  1L,  8L,  4L,  2L,  &#xD;&#xA;      1L,  3L,  1L,  8L,  2L,  1L,  2L,  2L,  3L,  3L,  9L,  17L,  44L,  6L,  1L,  &#xD;&#xA;      1L,  10L,  6L,  5L,  1L,  30L,  2L,  18L,  19L,  6L,  3L,  65L,  6L,  33L,  &#xD;&#xA;      4L,  2L,  1L,  4L,  8L,  1L,  13L,  2L,  4L,  7L,  1L,  2L,  7L,  5L,  12L,  &#xD;&#xA;      23L,  8L,  2L,  35L,  41L,  126L,  40L,  41L,  126L,  41L,  3L,  125L,  58L,  &#xD;&#xA;      41L,  102L,  7L,  30L,  23L,  18L,  26L,  2L,  1L,  10L,  2L,  2L,  2L)&#xD;&#xA;quantile(x)&#xD;&#xA;boxplot(x,  ylim=c(1, 25))&#xD;&#xA;qplot(1,  x,  geom=&quot;boxplot&quot;) +ylim(c(0, 25))&#xD;&#xA;ggplot(data.frame(x=x,  y=1),  aes(x=y,  y=x)) + geom_boxplot() +ylim(c(1, 25))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Session Info&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.0.2 (2013-09-25)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C            LC_COLLATE=C         LC_MONETARY=C        LC_MESSAGES=C       &#xD;&#xA; [ 7 ] LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C         LC_TELEPHONE=C       LC_MEASUREMENT=C     LC_IDENTIFICATION=C &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] splines   stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] doBy_4.5-9       MASS_7.3-29      multcomp_1.3-1   TH.data_1.0-2    survival_2.37-4  mvtnorm_0.9-9996 ggplot2_0.9.3.1 &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] RColorBrewer_1.0-5 colorspace_1.2-4   dichromat_2.0-0    digest_0.6.3       grid_3.0.2         gtable_0.1.2       labeling_0.2      &#xD;&#xA; [ 8 ] lattice_0.20-24    munsell_0.4.2      plyr_1.8           proto_0.3-10       reshape2_1.2.2     sandwich_2.3-0     scales_0.2.3      &#xD;&#xA;[ 15 ] stringr_0.6.2      tools_3.0.2        zoo_1.7-10  &#xD;&#xA;```&#xD;&#xA;quantile function output&#xD;&#xA;```&#xD;&#xA;&gt; quantile(x)&#xD;&#xA;  0%  25%  50%  75% 100% &#xD;&#xA;   1    2    4   14  126 &#xD;&#xA;```&#xD;&#xA;![ boxplot ](https://f.cloud.github.com/assets/2790723/1565096/3116ad16-5079-11e3-84df-b8fbd4165b49.png)&#xD;&#xA;![ ggplot ](https://f.cloud.github.com/assets/2790723/1565097/311a8710-5079-11e3-8fa1-749d06270d29.png)" />
      <Message Id="28723145" ParentId="874" UserId="86978" Date="11/18/2013 18:17:22" Content="That's the expected behavior when you use `ylim` - data outside the limits is dropped. See this for information on how to limit range without dropping data:&#xD;&#xA;http://www.cookbook-r.com/Graphs/Axes_(ggplot2)/#setting-range-and-reversing-direction-of-an-axis" />
      <Message Id="28730353" ParentId="874" UserId="2790723" Date="11/18/2013 19:38:40" Content="Got it thank you.  Somehow I missed this in my search of possible sources of this problem.  Thank you for your time." />
    </Messages>
  </Topic>
  <Topic Id="875" Title="support for dplyr">
    <Messages>
      <Message Id="0" ParentId="875" UserId="1537140" Date="11/21/2013 15:04:01" Content="support ```tbl``` objects from package ```dplyr``` and use ```filter```,  ```group_by```,  etc. &#xD;&#xA;&#xD;&#xA;High performance ggplot directly on database tables! :-)&#xD;&#xA;" />
      <Message Id="35947155" ParentId="875" UserId="4196" Date="02/24/2014 22:22:13" Content="This is unlikely to ever happen in ggplot2,  but will definitely happen in ggvis :)" />
    </Messages>
  </Topic>
  <Topic Id="876" Title="qplot newly hangs on mis-specified commands">
    <Messages>
      <Message Id="0" ParentId="876" UserId="831109" Date="11/21/2013 20:34:24" Content="Hi, &#xD;&#xA;&#xD;&#xA;this command on a dataset with 450k rows and 66 columns.&#xD;&#xA;&#xD;&#xA;    &gt; qplot(bdate_Father, age,  data=rpqa)&#xD;&#xA;    Error in eval(expr,  envir,  enclos) : object 'bdate_Father' not found&#xD;&#xA;&#xD;&#xA;led to 3 minutes of 100% CPU usage,  fans on full power etc. This was after the error message was displayed (though that was a little delayed too). I've had this behaviour a couple of times recently with ggplot2.&#xD;&#xA;&#xD;&#xA;I then executed traceback,  it got this far and then started printing lots and lots of data into console (100% CPU,  fans on full power etc.). I think it was the data for some layers. I had to interrupt it.&#xD;&#xA;&#xD;&#xA;Anyway,  I think this is new and obviously qplot should just check whether the variable exists and error out,  not do whatever it is doing.&#xD;&#xA;&#xD;&#xA;Hope this is enough to reproduce the problem,  but probably not,  so please tell me what else might help :smile: &#xD;&#xA;&#xD;&#xA;	&gt; traceback()&#xD;&#xA;	16: eval(expr,  envir,  enclos)&#xD;&#xA;	15: FUN(X[ [ 1L ] ],  ...)&#xD;&#xA;	14: lapply(exprs,  eval,  envir = envir,  enclos = enclos)&#xD;&#xA;	13: eval.quoted(aesthetics,  data,  plot$plot_env)&#xD;&#xA;	12: lapply(x,  f)&#xD;&#xA;	11: unlist(lapply(x,  f))&#xD;&#xA;	10: Filter(Negate(is.null),  l)&#xD;&#xA;	9: compact(eval.quoted(aesthetics,  data,  plot$plot_env))&#xD;&#xA;	8: get(x,  envir = this,  inherits = inh)(this,  ...)&#xD;&#xA;	7: p$compute_aesthetics(d,  plot)&#xD;&#xA;	6: f(d = data[ [ i ] ],  p = layers[ [ i ] ])&#xD;&#xA;	5: dlapply(function(d,  p) p$compute_aesthetics(d,  plot))&#xD;&#xA;	4: ggplot_build(x)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;	&gt; sessionInfo()&#xD;&#xA;	R version 3.0.1 (2013-05-16)&#xD;&#xA;	Platform: x86_64-apple-darwin10.8.0 (64-bit)&#xD;&#xA;&#xD;&#xA;	locale:&#xD;&#xA;	[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;	attached base packages:&#xD;&#xA;	[ 1 ] splines   stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;	other attached packages:&#xD;&#xA;	 [ 1 ] mgcv_1.7-27       nlme_3.1-111      multcomp_1.3-0    mvtnorm_0.9-9996  coefplot2_0.1.3.2 coda_0.16-1      &#xD;&#xA;	 [ 7 ] lme4_1.0-5        Matrix_1.0-14     lattice_0.20-23   knitr_1.5         plyr_1.8          reshape2_1.2.2   &#xD;&#xA;	[ 13 ] stringr_0.6.2     lubridate_1.3.0   ggplot2_0.9.3.1   QuantPsyc_1.5     MASS_7.3-29       boot_1.3-9       &#xD;&#xA;	[ 19 ] psych_1.3.10      car_2.0-19        Hmisc_3.12-2      Formula_1.1-1     survival_2.37-4   foreign_0.8-56   &#xD;&#xA;&#xD;&#xA;	loaded via a namespace (and not attached):&#xD;&#xA;	 [ 1 ] cluster_1.14.4     colorspace_1.2-4   dichromat_2.0-0    digest_0.6.3       evaluate_0.5.1     formatR_0.9       &#xD;&#xA;	 [ 7 ] grid_3.0.1         gtable_0.1.2       labeling_0.2       memoise_0.1        minqa_1.2.1        munsell_0.4.2     &#xD;&#xA;	[ 13 ] nnet_7.3-7         proto_0.3-10       RColorBrewer_1.0-5 reshape_0.8.4      rpart_4.1-3        sandwich_2.3-0    &#xD;&#xA;	[ 19 ] scales_0.2.3       tools_3.0.1        zoo_1.7-10        " />
      <Message Id="29021469" ParentId="876" UserId="4196" Date="11/21/2013 20:35:27" Content="Unfortunately this is a long-standing problem with ggplot2 and large datasets,  that we haven't been able to figure out." />
      <Message Id="29022575" ParentId="876" UserId="831109" Date="11/21/2013 20:46:52" Content="Oh,  sorry,  didn't see that (really,  Google was all like &quot;heck no ggplot2 doesn't hang,  it's probably your fault&quot; and I still find no reference to this issue now). &#xD;&#xA;&#xD;&#xA;Isn't there a &quot;dumb&quot; solution like extra,  earlier checks for existing variable names? I realise there's a lot of special cases and `..density..` and what not,  but it could be made conditional on a large data frame size and overridden with an argument where needed. &#xD;&#xA;&#xD;&#xA;I know this probably is against programmer pride and I can't imagine I had an idea that you didn't come up with,   just saying this because this drives me up the walls,  one typo and it's either force quit and lose my workspace or dry my hair with a 1000$ fan." />
      <Message Id="29024866" ParentId="876" UserId="4196" Date="11/21/2013 21:11:29" Content="That wouldn't help - the thing that's slow is generating and storing the traceback,  which as you've seen is huge (and I don't know why). It would still be slow regardless of when you threw the error." />
      <Message Id="29027644" ParentId="876" UserId="831109" Date="11/21/2013 21:45:16" Content="Do you mind elaborating? I understand that I simply do not have the in-depth understanding of tracebacks,  which I hope to gain by impertinently continuing to ask.&#xD;&#xA;Why wouldn't a better version of the below function do the job? Will the tracebacks start including the qplot portion once I allow for variable names to be passed in context instead of as strings? I guess,  because more flexible approaches I tried,  led to hangs..&#xD;&#xA;&#xD;&#xA;    grrplot = function(x,  df)&#xD;&#xA;    { 	&#xD;&#xA;        if(exists(as.character(substitute(x)), where=df)) qplot(df[ , x ])&#xD;&#xA;        else stop(&quot;missing var&quot;)&#xD;&#xA;     }&#xD;&#xA;    grrplot(&quot;birthdate_Father&quot;,  rpqa) # doesn't take ages." />
      <Message Id="29028438" ParentId="876" UserId="86978" Date="11/21/2013 21:54:35" Content="That will work if you're passing in a data frame and mapping a variable directly to an aesthetic,  but those two things aren't always true; the input can sometimes be a different type of object,  and you might want to map an expression (not just a single variable) to an aesthetic." />
      <Message Id="29029725" ParentId="876" UserId="831109" Date="11/21/2013 22:10:45" Content="Yes,  of course there's all sorts of complicated things one might do. &#xD;&#xA;I was thinking along the lines of there probably is some dumb heuristic which will prevent 90% of errors (because most of the time people just plot a couple of variables) and still lead to hangs in the other 10% of cases. &#xD;&#xA;But I haven't even been able to do this using expressions instead of strings,  so either you're right or I'm too bad at R to do it and you don't consider such a heuristic an acceptable patch." />
      <Message Id="35947177" ParentId="876" UserId="4196" Date="02/24/2014 22:22:24" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947177" ParentId="876" UserId="4196" Date="02/24/2014 22:22:24" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35949008" ParentId="876" UserId="831109" Date="02/24/2014 22:39:06" Content="Unfortunately don't know how,  but in the meantime I'll condition myself to avoid typos when plotting large df using electroshocks :wink: ." />
    </Messages>
  </Topic>
  <Topic Id="877" Title="[ geom_boxplot + scale_date ] Problem with default scale limits when plotting boxplot of a Date variable">
    <Messages>
      <Message Id="0" ParentId="877" UserId="5382593" Date="11/22/2013 12:44:04" Content="When plotting the boxplot of a Date variable,  by default,  the limits of the axis seem to be set as the limits of the whiskers which prevents the outliers to be shown.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Example and output:&#xD;&#xA;&#xD;&#xA;require(ggplot2)&#xD;&#xA;p_date &lt;- ggplot(df,  aes(x = fact,  y = as.Date(date))) +&#xD;&#xA;  geom_boxplot() +&#xD;&#xA;  labs(title = &quot;class: Date\n(outliers not shown)&quot;)&#xD;&#xA;p_numeric &lt;- ggplot(df,  aes(x = fact,  y = as.numeric(date))) +&#xD;&#xA;  geom_boxplot() +&#xD;&#xA;  labs(title = &quot; class: numeric\n(outliers shown as expected)&quot;)&#xD;&#xA;p_integer &lt;- ggplot(df,  aes(x = fact,  y = as.integer(date))) +&#xD;&#xA;  geom_boxplot() +&#xD;&#xA;  labs(title = &quot; class: integer\n(outliers shown as expected)&quot;)&#xD;&#xA;p_date_limits &lt;- ggplot(df,  aes(x = fact,  y = as.Date(date))) +&#xD;&#xA;  geom_boxplot() +&#xD;&#xA;  scale_y_date(limits = c(min(df$date),  max(df$date))) +&#xD;&#xA;  labs(title = &quot;class: Date. Scale limits adjusted.\n(outliers shown as expected)&quot;)&#xD;&#xA;require(gridExtra)&#xD;&#xA;grid.arrange(p_date,  p_integer,  p_numeric,  p_date_limits,  nrow = 2,  ncol = 2)&#xD;&#xA;&#xD;&#xA;![ ggplot2_bug_report_example ](https://f.cloud.github.com/assets/5382593/1600554/45f342a6-5373-11e3-8781-4fe9f5fd7e9a.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;R session information&#xD;&#xA;&#xD;&#xA;R version 3.0.1 (2013-05-16)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=Swedish_Sweden.1252  LC_CTYPE=Swedish_Sweden.1252    LC_MONETARY=Swedish_Sweden.1252 LC_NUMERIC=C                   &#xD;&#xA;[ 5 ] LC_TIME=Swedish_Sweden.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] gridExtra_0.9.1 ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] colorspace_1.2-3   dichromat_2.0-0    digest_0.6.3       gtable_0.1.2       labeling_0.2       MASS_7.3-26        munsell_0.4.2     &#xD;&#xA; [ 8 ] plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2     scales_0.2.3       stringr_0.6.2      tools_3.0.1 &#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35947210" ParentId="877" UserId="4196" Date="02/24/2014 22:22:47" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="878" Title="Feature/stat_ellipse">
    <Messages>
      <Message Id="0" ParentId="878" UserId="178755" Date="12/02/2013 14:07:13" Content="Following up on people saying they like `stat_ellipse`,  (http://stackoverflow.com/questions/2397097/how-can-a-data-ellipse-be-superimposed-on-a-ggplot2-scatterplot and http://stats.stackexchange.com/questions/38117/getting-different-results-when-plotting-95-ci-ellipses-with-ggplot-or-the-ellip) here I've properly implemented and documented it for incorporation into the main package. &#xD;&#xA;&#xD;&#xA;It seems to be operating properly,  and it passes `R CMD check`." />
      <Message Id="35947219" ParentId="878" UserId="4196" Date="02/24/2014 22:22:57" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="879" Title="fortify problem with sp namespace">
    <Messages>
      <Message Id="0" ParentId="879" UserId="23257" Date="12/03/2013 06:02:19" Content="This may be a bit obscure,  but I have found a problem using `fortify` for a `SpatialPolygonsDataFrame` when `sp` has not been loaded. While that may seem an unlikely scenario,  it came up for me when trying to plot map data which loaded from files created using `save`. Here is an artificial reproducible example of the error&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;bx &lt;- rgeos::readWKT(&quot;POLYGON ((112.5 -44,  112.5 -9,  154 -9,  154 -44,  + 112.5 -44))&quot;)&#xD;&#xA;bx &lt;- as(bx,  &quot;SpatialPolygonsDataFrame&quot;)&#xD;&#xA;fortify(bx,  region=&quot;dummy&quot;)&#xD;&#xA;# Error in fortify.SpatialPolygonsDataFrame(bx,  region = &quot;dummy&quot;) : &#xD;&#xA;#  could not find function &quot;polygons&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If I run `library(sp)` first the error goes away,  but should `fortify` use `sp::polygons` rather than `polygons` to avoid the error altogether?" />
      <Message Id="35947247" ParentId="879" UserId="4196" Date="02/24/2014 22:23:10" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35997632" ParentId="879" UserId="23257" Date="02/25/2014 11:17:36" Content="Pull request submitted." />
    </Messages>
  </Topic>
  <Topic Id="880" Title="`theme`: panel.background does not inherit from rect">
    <Messages>
      <Message Id="0" ParentId="880" UserId="123968" Date="12/07/2013 00:01:15" Content="It seems that the theme attribute`panel.background` doesn't inherit from `rect`,  or at least the following code isn't behaving as I'd expect it to.  Given that the top level `rect` command is set and `complete = TRUE`,  I expect the background of the entire plot to have the same color as `fill`.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;theme_allblank &lt;- function(fill = &quot;white&quot;) { &#xD;&#xA;    base_size &lt;- 10&#xD;&#xA;    theme(line = element_blank(), &#xD;&#xA;          text = element_blank(), &#xD;&#xA;          rect = element_rect(fill = fill,  size = base_size,  colour = NA,  linetype = 0), &#xD;&#xA;          complete = TRUE)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;However,  in this the `panel.background` fill is a different color.&#xD;&#xA;```r&#xD;&#xA;(ggplot(mtcars,  aes(wt,  mpg)) + geom_point() + theme_allblank(&quot;blue&quot;))&#xD;&#xA;```" />
      <Message Id="35947259" ParentId="880" UserId="4196" Date="02/24/2014 22:23:16" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="881" Title="annotation_logticks() and coord_flip() don't seem to get along">
    <Messages>
      <Message Id="0" ParentId="881" UserId="2318953" Date="12/09/2013 06:40:22" Content="`annotation_logticks()` and `coord_flip()` appear to be mutually incompatible. For instance: &#xD;&#xA;&#xD;&#xA;    ggplot(mtcars,  aes(x=mpg,  y=disp)) + &#xD;&#xA;      geom_line() + &#xD;&#xA;      annotation_logticks() +&#xD;&#xA;      coord_flip()&#xD;&#xA;&#xD;&#xA;yields `Error in unit(yticks$y,  &quot;native&quot;) : 'x' and 'units' must have length &gt; 0`. This plot works fine if either `annotation_logticks()` or `coord_flip()` is removed." />
      <Message Id="35947268" ParentId="881" UserId="4196" Date="02/24/2014 22:23:20" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="882" Title="fix bug :annotation_logticks() and coord_flip() are mutulaly excluded">
    <Messages>
      <Message Id="0" ParentId="882" UserId="1834695" Date="12/09/2013 09:41:04" Content="this commit fix bug : annotation_logticks() and coord_flip() are mutually excluded &#xD;&#xA;&#xD;&#xA;see : https://github.com/hadley/ggplot2/issues/881" />
      <Message Id="35947338" ParentId="882" UserId="4196" Date="02/24/2014 22:23:58" Content="I'd rather not add this sort of special case,  since then you really need similar fixes for `coord_polar()` etc.  I'd happily accept a pull request that added an error message though." />
    </Messages>
  </Topic>
  <Topic Id="883" Title="Fix vertical justification for rotated text">
    <Messages>
      <Message Id="0" ParentId="883" UserId="1741643" Date="12/10/2013 01:00:59" Content="The computation for `x` (or `y`) values based on `vjust` values does not work correctly for all cases. I have shown an example before and after applying this change.&#xD;&#xA;&#xD;&#xA;# Before&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Everything looks good by default&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;## Loading required package: methods&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(grid)&#xD;&#xA;&#xD;&#xA;(p &lt;- qplot(diamonds$cut,  binwidth=0.5) + theme_bw(24) +&#xD;&#xA;   theme(axis.text.x=element_text(vjust=0.5)))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-2 ](http://i.imgur.com/wJvs0Zw.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Now play with the justification:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;(p0 &lt;- p + theme(axis.title=element_text(vjust=0)))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-3 ](http://i.imgur.com/ohnnAKt.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;And the other extreme:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;(p1 &lt;- p + theme(axis.title=element_text(vjust=1)))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-4 ](http://i.imgur.com/GU9x5al.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Top-down:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p0 + theme(axis.title.x=element_text(angle=180),  axis.title.y=element_text(angle=270))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-5 ](http://i.imgur.com/DkidGOH.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Top-down,  `vjust==1`:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p1 + theme(axis.title.x=element_text(angle=180),  axis.title.y=element_text(angle=270))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-6 ](http://i.imgur.com/4zvJ5q3.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;This is inconsistent.&#xD;&#xA;&#xD;&#xA;# After&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Everything looks good by default&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;## Loading required package: methods&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(grid)&#xD;&#xA;&#xD;&#xA;(p &lt;- qplot(diamonds$cut,  binwidth=0.5) + theme_bw(24) +&#xD;&#xA;   theme(axis.text.x=element_text(vjust=0.5)))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-2 ](http://i.imgur.com/dN2C9qS.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Now play with the justification:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;(p0 &lt;- p + theme(axis.title=element_text(vjust=0)))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-3 ](http://i.imgur.com/1iy0nOP.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;And the other extreme:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;(p1 &lt;- p + theme(axis.title=element_text(vjust=1)))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-4 ](http://i.imgur.com/q1rmbyL.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Top-down:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p0 + theme(axis.title.x=element_text(angle=180),  axis.title.y=element_text(angle=270))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-5 ](http://i.imgur.com/5ota9WS.png) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Top-down,  `vjust==1`:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;p1 + theme(axis.title.x=element_text(angle=180),  axis.title.y=element_text(angle=270))&#xD;&#xA;showViewport()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ plot of chunk unnamed-chunk-6 ](http://i.imgur.com/1uDspyf.png) &#xD;&#xA;&#xD;&#xA;# Source&#xD;&#xA;&#xD;&#xA;```s&#xD;&#xA;#-echo=F&#xD;&#xA;library(knitr)&#xD;&#xA;opts_chunk$set(fig.height=4)&#xD;&#xA;opts_knit$set(upload.fun = imgur_upload)&#xD;&#xA;&#xD;&#xA;#' Everything looks good by default&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(grid)&#xD;&#xA;&#xD;&#xA;(p &lt;- qplot(diamonds$cut,  binwidth=0.5) + theme_bw(24) +&#xD;&#xA;   theme(axis.text.x=element_text(vjust=0.5)))&#xD;&#xA;showViewport()&#xD;&#xA;&#xD;&#xA;#' Now play with the justification:&#xD;&#xA;(p0 &lt;- p + theme(axis.title=element_text(vjust=0)))&#xD;&#xA;showViewport()&#xD;&#xA;&#xD;&#xA;#' And the other extreme:&#xD;&#xA;(p1 &lt;- p + theme(axis.title=element_text(vjust=1)))&#xD;&#xA;showViewport()&#xD;&#xA;&#xD;&#xA;#' Top-down:&#xD;&#xA;p0 + theme(axis.title.x=element_text(angle=180),  axis.title.y=element_text(angle=270))&#xD;&#xA;showViewport()&#xD;&#xA;&#xD;&#xA;#' Top-down,  `vjust==1`:&#xD;&#xA;p1 + theme(axis.title.x=element_text(angle=180),  axis.title.y=element_text(angle=270))&#xD;&#xA;showViewport()&#xD;&#xA;&#xD;&#xA;#' This is inconsistent.&#xD;&#xA;```" />
      <Message Id="35947376" ParentId="883" UserId="4196" Date="02/24/2014 22:24:23" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="36011649" ParentId="883" UserId="1741643" Date="02/25/2014 14:24:18" Content="Force-pushed to the same. Could you please re-open and merge this pull request?" />
      <Message Id="36012781" ParentId="883" UserId="4196" Date="02/25/2014 14:34:29" Content="Actually could you please resubmit the PR? Then travis will get run." />
    </Messages>
  </Topic>
  <Topic Id="884" Title="annotate() doesn't transform xend/yend">
    <Messages>
      <Message Id="0" ParentId="884" UserId="348591" Date="12/10/2013 17:26:51" Content="The following code is supposed to draw vertical and horizontal red annotation lines:&#xD;&#xA;```R&#xD;&#xA;ggplot( data.frame( x = rlnorm( 100,  -4 ),  y = rlnorm( 100,  -4 ) ), &#xD;&#xA;        aes( x = x,  y = y ) ) +&#xD;&#xA;    geom_point() +&#xD;&#xA;    annotate( 'segment',  x = 0,  xend = 1,  y = 1E-2,  yend = 1E-2,  color = &quot;red&quot;,  type = 2 ) +&#xD;&#xA;    annotate( 'segment',  y = 0,  yend = 1,  x = 1E-2,  xend = 1E-2,  color = &quot;red&quot;,  type = 2 ) +&#xD;&#xA;    scale_x_log10() + scale_y_log10()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;However,  the drawn lines are skewed. It's fixed when the log10() transformation is explicitly applied to xend/yend,  i.e.&#xD;&#xA;```R&#xD;&#xA;...&#xD;&#xA;    annotate( 'segment',  x = 0,  xend = log10(1),  y = 1E-2,  yend = log10(1E-2),  color = &quot;red&quot;,  type = 2 ) +&#xD;&#xA;    annotate( 'segment',  y = 0,  yend = log10(1),  x = 1E-2,  xend = log10(1E-2),  color = &quot;red&quot;,  type = 2 ) +&#xD;&#xA;...&#xD;&#xA;```" />
      <Message Id="31343819" ParentId="884" UserId="348591" Date="12/30/2013 12:28:23" Content="Also,  xend/yend are not considered for the calculation of plot bounds,  whereas x and y are" />
      <Message Id="35947393" ParentId="884" UserId="4196" Date="02/24/2014 22:24:31" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947393" ParentId="884" UserId="4196" Date="02/24/2014 22:24:31" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="885" Title="geom_text captions are useless for scatter plots">
    <Messages>
      <Message Id="0" ParentId="885" UserId="1150955" Date="12/10/2013 21:06:08" Content="I love ggplot2,  but,  my god,  it has terrible captioning options.&#xD;&#xA;&#xD;&#xA;Take a look at the manual page for geom_text:&#xD;&#xA;&#xD;&#xA;http://docs.ggplot2.org/current/geom_text.html&#xD;&#xA;&#xD;&#xA;Not one of the examples that actually uses geom_text is legible. They are in fact uniformly *terrible*. &#xD;&#xA;&#xD;&#xA;The problem isn't the manual; the problem is with geom_text,  which does not have anything like a reliable means of positioning the labels next to (rather that on) data points. &#xD;&#xA;&#xD;&#xA;Even something that would reliably let you position the text at a fixed number of units above or to the side of the datapoint would be better than what exists now. Obviously something that positioned them in a non-overlapping way would be ideal,  but that's no doubt a lot of work. &#xD;&#xA;&#xD;&#xA;Monkeying with the position tag produces nothing any more legible from what I have been able to produce or find online.&#xD;&#xA;&#xD;&#xA;Surely just making a reliable offset for geom_text should be feasible? This strikes me as so patently obvious that I'm kind of surprised that it has never been done,  especially when even the manual makes it clear that geom_text is woefully unacceptable in its current form. " />
      <Message Id="30269195" ParentId="885" UserId="86978" Date="12/10/2013 21:22:46" Content="Checkout the `hjust` and `vjust` arguments. You can also add a little to the x and y to offset them a little more:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(mtcars,  aes(x=wt,  y=mpg)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_text(aes(label=disp,  x=wt+0.02,  y=mpg+0.1),  hjust=0,  vjust=0,  size=4)&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="886" Title="Default legend shapes when mapping to fill">
    <Messages>
      <Message Id="0" ParentId="886" UserId="6173497" Date="12/12/2013 21:48:54" Content="When I map fill to a variable,  the legend uses a default shape that has no fill (shape = 1,  I think). Reproducible example is copied below. I would suggest that in these situations,  the legend should default to a shape that has a fill (e.g.,  shape=21). &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;mydf&lt;-data.frame(Type=rep(c(&quot;Type A&quot;, &quot;Type B&quot;),  each =50), &#xD;&#xA;                 Style=c(&quot;Style 1&quot;,  &quot;Style 2&quot;), &#xD;&#xA;                 Var1=runif(100), &#xD;&#xA;                 Var2=runif(100))&#xD;&#xA;&#xD;&#xA;ggplot(data=mydf,  aes(x=Var1,  y=Var2,  fill=Style))+&#xD;&#xA;  geom_point()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35947410" ParentId="886" UserId="4196" Date="02/24/2014 22:24:38" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="887" Title="polygon edge not found">
    <Messages>
      <Message Id="0" ParentId="887" UserId="1193302" Date="12/13/2013 15:18:48" Content="I have recently started getting this error when trying to use ggplot2 with Cairo.&#xD;&#xA;```&#xD;&#xA;CairoPNG(&quot;plot.png&quot;,  580,  256)&#xD;&#xA;qplot(data=data,  x=weight,  y=force)&#xD;&#xA;&#xD;&#xA;Error in grid.Call(L_textBounds,  as.graphicsAnnot(x$label),  x$x,  x$y,   : &#xD;&#xA;  polygon edge not found&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I can't really give a reproducible example,  because the problem did not occur in the past. here is the sessionInfo() output:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;R version 3.0.2 (2013-09-25)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_Canada.1252  LC_CTYPE=English_Canada.1252    LC_MONETARY=English_Canada.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                    LC_TIME=English_Canada.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1 Cairo_1.5-3    &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4   dichromat_2.0-0    digest_0.6.4       grid_3.0.2         gtable_0.1.2       labeling_0.2      &#xD;&#xA; [ 7 ] MASS_7.3-29        munsell_0.4.2      plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2    &#xD;&#xA;[ 13 ] scales_0.2.3       stringr_0.6.2      tools_3.0.2   &#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="30517219" ParentId="887" UserId="86978" Date="12/13/2013 15:27:30" Content="My guess is that this is related to a bug that we've encountered in Cairo 1.5-3: rstudio/shiny#323.&#xD;&#xA;&#xD;&#xA;I suggest trying `Cairo` with the `dpi` argument set:&#xD;&#xA;```&#xD;&#xA;Cairo(type = 'png',  file = 'out.png',  dpi=72)&#xD;&#xA;```" />
      <Message Id="30543380" ParentId="887" UserId="1193302" Date="12/13/2013 21:03:13" Content="That works! Thanks a lot." />
      <Message Id="30548138" ParentId="887" UserId="86978" Date="12/13/2013 22:15:27" Content="Great!" />
    </Messages>
  </Topic>
  <Topic Id="888" Title="ggplot2 icon">
    <Messages>
      <Message Id="0" ParentId="888" UserId="1763278" Date="12/17/2013 20:42:15" Content="I'm making a presentation and tried to find an icon that represents ggplot2.  Nothing that I can find.  So I made my own.  Thought I'd share but suggest there should be a ggplot2 icon made in ggplot2.  I kept the trademark ggplot2 background.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(grid); library(ggplot2)&#xD;&#xA;dat &lt;- data.frame(x = seq(0,  1,  by = .1),  &#xD;&#xA;    y = c(-.1,  .29,  .23,  .47,  .3,  .8,  .7,  .9,  .85,  1,  1))&#xD;&#xA;&#xD;&#xA;png(&quot;ggplot.png&quot;,  width = 400,  height = 150)&#xD;&#xA;ggplot(dat,  aes(x=x,  y=y)) + geom_path(size=2,  alpha=.1) +&#xD;&#xA;    annotate(&quot;text&quot;,  x = .5,  y = .5,  label = &quot;ggplot2&quot;,  size=34) +&#xD;&#xA;    theme(axis.text = element_blank(), &#xD;&#xA;        axis.ticks = element_blank(),  &#xD;&#xA;        axis.title = element_blank(), &#xD;&#xA;        panel.border = element_rect(color = &quot;black&quot;,  fill = NA), &#xD;&#xA;        plot.margin = unit(c(1,  1,  0,  0),  &quot;lines&quot;)) +&#xD;&#xA;    ylim(-.2,  1)&#xD;&#xA;dev.off()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ ggplot ](https://f.cloud.github.com/assets/1763278/1767955/b12f5c84-675b-11e3-84a2-b9c164e31991.png)&#xD;&#xA;" />
      <Message Id="30801307" ParentId="888" UserId="227097" Date="12/17/2013 23:10:41" Content="I think that's nice.&#xD;&#xA;Can you make another version of &quot;Powered by ggplot2&quot; and &quot;visualized by&#xD;&#xA;ggplot2&quot;?&#xD;&#xA;https://www.google.co.jp/search?q=logo+%22powered+by%22&amp;safe=off&amp;espv=210&amp;es_sm=91&amp;tbm=isch&amp;tbo=u&amp;source=univ&amp;sa=X&amp;ei=XtmwUsypMI-lkgX8lYHABw&amp;ved=0CC4QsAQ&amp;biw=1380&amp;bih=802&#xD;&#xA;&#xD;&#xA;cheers, &#xD;&#xA;&#xD;&#xA;kohske&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;2013/12/18 Tyler Rinker &lt;notifications@github.com&gt;&#xD;&#xA;&#xD;&#xA;&gt; I'm making a presentation and tried to find an icon that represents&#xD;&#xA;&gt; ggplot2. Nothing that I can find. So I made my own. Thought I'd share but&#xD;&#xA;&gt; suggest there should be a ggplot2 icon made in ggplot2. I kept the&#xD;&#xA;&gt; trademark ggplot2 background.&#xD;&#xA;&gt;&#xD;&#xA;&gt; library(grid); library(ggplot2)&#xD;&#xA;&gt; dat &lt;- data.frame(x = seq(0,  1,  by = .1), &#xD;&#xA;&gt;     y = c(-.1,  .29,  .23,  .47,  .3,  .8,  .7,  .9,  .85,  1,  1))&#xD;&#xA;&gt;&#xD;&#xA;&gt; png(&quot;ggplot.png&quot;,  width = 400,  height = 150)&#xD;&#xA;&gt; ggplot(dat,  aes(x=x,  y=y)) + geom_path(size=2,  alpha=.1) +&#xD;&#xA;&gt;     annotate(&quot;text&quot;,  x = .5,  y = .5,  label = &quot;ggplot2&quot;,  size=34) +&#xD;&#xA;&gt;     theme(axis.text = element_blank(), &#xD;&#xA;&gt;         axis.ticks = element_blank(), &#xD;&#xA;&gt;         axis.title = element_blank(), &#xD;&#xA;&gt;         panel.border = element_rect(color = &quot;black&quot;,  fill = NA), &#xD;&#xA;&gt;         plot.margin = unit(c(1,  1,  0,  0),  &quot;lines&quot;)) +&#xD;&#xA;&gt;     ylim(-.2,  1)&#xD;&#xA;&gt; dev.off()&#xD;&#xA;&gt;&#xD;&#xA;&gt; [ image: ggplot ]&lt;https://f.cloud.github.com/assets/1763278/1767955/b12f5c84-675b-11e3-84a2-b9c164e31991.png&gt;&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub&lt;https://github.com/hadley/ggplot2/issues/888&gt;&#xD;&#xA;&gt; .&#xD;&#xA;&gt;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;-- &#xD;&#xA;Kohske Takahashi &lt;takahashi.kohske@gmail.com&gt;&#xD;&#xA;&#xD;&#xA;Assistant Professor, &#xD;&#xA;Research Center for Advanced Science and Technology, &#xD;&#xA;The University of  Tokyo,  Japan.&#xD;&#xA;http://www.fennel.rcast.u-tokyo.ac.jp/profilee_ktakahashi.html" />
      <Message Id="30802073" ParentId="888" UserId="1763278" Date="12/17/2013 23:22:45" Content="Sure why not?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(grid); library(ggplot2)&#xD;&#xA;dat &lt;- data.frame(x = seq(0,  1,  by = .1),  &#xD;&#xA;    y = c(-.1,  .29,  .23,  .47,  .3,  .8,  .7,  .9,  .85,  1,  1))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_path(size=2,  alpha=.1) +&#xD;&#xA;    annotate(&quot;text&quot;,  x = .5,  y = .5,  label = &quot;ggplot2&quot;,  size=34) +&#xD;&#xA;    theme(axis.text = element_blank(), &#xD;&#xA;        axis.ticks = element_blank(),  &#xD;&#xA;        axis.title = element_blank(), &#xD;&#xA;        panel.border = element_rect(color = &quot;grey80&quot;,  fill = NA), &#xD;&#xA;        plot.margin = unit(c(1,  1,  0,  0),  &quot;lines&quot;)) +&#xD;&#xA;    ylim(-.2,  1)&#xD;&#xA;&#xD;&#xA;png(&quot;ggplot2.png&quot;,  width = 400,  height = 150)&#xD;&#xA;p &#xD;&#xA;dev.off()&#xD;&#xA;&#xD;&#xA;png(&quot;power_by_ggplot2.png&quot;,  width = 400,  height = 150)&#xD;&#xA;p +  &#xD;&#xA;annotate(&quot;text&quot;,  x = .225,  y = .9,  label = &quot;Powered by&quot;,  &#xD;&#xA;    size= 7,  color=&quot;grey50&quot;)&#xD;&#xA;dev.off()&#xD;&#xA;&#xD;&#xA;png(&quot;visualized_by_ggplot2.png&quot;,  width = 400,  height = 150)&#xD;&#xA;p +  &#xD;&#xA;annotate(&quot;text&quot;,  x = .225,  y = .9,  label = &quot;Visualized by&quot;,  &#xD;&#xA;    size= 7,  color=&quot;grey50&quot;)&#xD;&#xA;dev.off()&#xD;&#xA;```&#xD;&#xA;![ power_by_ggplot2 ](https://f.cloud.github.com/assets/1763278/1769417/1b8c67a0-6772-11e3-875e-19ab6b8b9f5e.png)&#xD;&#xA;![ visualized_by_ggplot2 ](https://f.cloud.github.com/assets/1763278/1769416/1b8a1d7e-6772-11e3-8c34-f0714c7c58ed.png)&#xD;&#xA;" />
      <Message Id="30810292" ParentId="888" UserId="1509626" Date="12/18/2013 02:03:54" Content="See,  what's great about this,  is anyone can create the graphic using `ggplot2` itself." />
      <Message Id="30848182" ParentId="888" UserId="607974" Date="12/18/2013 15:02:55" Content="If you replace ```dat$y``` with a rescaled ```cumsum(rnorm(11))```,  you can get a randomized trendline every time you plot it,  giving ```ggplot2``` a [ generative logo ](https://www.pinterest.com/sproutcreative/generative-design/)...&#xD;&#xA;```&#xD;&#xA;library(grid); library(ggplot2)&#xD;&#xA;dat &lt;- data.frame(x = seq(0,  1,  by = .1),  &#xD;&#xA;                  y = cumsum(rnorm(11)))&#xD;&#xA;&#xD;&#xA;dat$y &lt;- (dat$y - min(dat$y)) / (max(dat$y) - min(dat$y))&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(dat,  aes(x=x,  y=y)) + geom_path(size=2,  alpha=.1) +&#xD;&#xA;  annotate(&quot;text&quot;,  x = .5,  y = .5,  label = &quot;ggplot2&quot;,  size=34) +&#xD;&#xA;  theme(axis.text = element_blank(), &#xD;&#xA;        axis.ticks = element_blank(),  &#xD;&#xA;        axis.title = element_blank(), &#xD;&#xA;        panel.border = element_rect(color = &quot;grey80&quot;,  fill = NA), &#xD;&#xA;        plot.margin = unit(c(1,  1,  0,  0),  &quot;lines&quot;)) +&#xD;&#xA;  ylim(0,  1) + xlim(0,  1) + scale_x_continuous(expand = c(0,  0))&#xD;&#xA;&#xD;&#xA;p +  annotate(&quot;text&quot;,  x = .225,  y = .9,  label = &quot;Powered by&quot;,  &#xD;&#xA;           size= 7,  color=&quot;grey50&quot;)&#xD;&#xA;```" />
      <Message Id="35947488" ParentId="888" UserId="4196" Date="02/24/2014 22:25:16" Content="I like it - especially @dsparks generative logo idea. Does someone want to put together a pull request?" />
      <Message Id="35947488" ParentId="888" UserId="4196" Date="02/24/2014 22:25:16" Content="I like it - especially @dsparks generative logo idea. Does someone want to put together a pull request?" />
      <Message Id="36082558" ParentId="888" UserId="227097" Date="02/26/2014 01:52:11" Content="I wrote some code and here is examples. &#xD;&#xA;http://rpubs.com/kohske/13676&#xD;&#xA;&#xD;&#xA;If this is your favorite,  I'll send PR.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="36142114" ParentId="888" UserId="4196" Date="02/26/2014 16:08:51" Content="I like it!" />
      <Message Id="111518150" ParentId="888" UserId="4196" Date="06/12/2015 14:55:42" Content="Still interested in this PR?" />
    </Messages>
  </Topic>
  <Topic Id="889" Title="Update geom-segment.r">
    <Messages>
      <Message Id="0" ParentId="889" UserId="1282581" Date="12/18/2013 15:10:37" Content="Added linejoin argument. http://stackoverflow.com/a/20661508/1156245 illustrates a benefit of this.  Not sure however which default value is however." />
      <Message Id="35947508" ParentId="889" UserId="4196" Date="02/24/2014 22:25:24" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="890" Title="Add a new &quot;just touching&quot; position option for geom_bar">
    <Messages>
      <Message Id="0" ParentId="890" UserId="1825120" Date="12/20/2013 11:26:54" Content="geom_bar does not handle variable width bars well. If they are wide they overlap; if they are thin,  large gaps are left between them. This is rarely useful. Instead,  a &quot;just touching&quot; option allows for neat 'horizontal' stacking of the bars. This can be done using cumsums (see here http://stackoverflow.com/questions/20688376/how-to-make-variable-bar-widths-in-ggplot2-not-overlap-or-gap/20690333?noredirect=1#comment30993310_20690333 ) &#xD;&#xA;&#xD;&#xA;x &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)&#xD;&#xA;w &lt;- c(1.2,  1.3,  4) # variable widths&#xD;&#xA;y &lt;- c(9,  10,  6) # variable heights&#xD;&#xA;&#xD;&#xA;pos &lt;- 0.5 * (cumsum(w) + cumsum(c(0,  w[ -length(w) ])))&#xD;&#xA;&#xD;&#xA;ggplot() + &#xD;&#xA;geom_bar(aes(x = pos,  y = y,  width = w,  fill=x),  stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;My request is that a new position option (1ouching) should be created,  such that the following code would result in the same plot as above:&#xD;&#xA;&#xD;&#xA;ggplot() + &#xD;&#xA;geom_bar(aes(x = x,  y = y,  width = w,  fill=x),  stat=&quot;identity&quot;,  position = &quot;touching&quot;)&#xD;&#xA;&#xD;&#xA;in addition,  the function position_touching(gapwidth = 0) could be used to set the width of the gaps in a consistent way. Just ideas,  that I'm actually up for trying to implement if someone gives me an idea of where to start. Sure this would be of use if it ever gets implemented. Thanks!&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35947535" ParentId="890" UserId="4196" Date="02/24/2014 22:25:36" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="36227634" ParentId="890" UserId="1825120" Date="02/27/2014 10:13:00" Content="Hi Hadley,  your response sound sensible to me. I would like to try to work on a fix just for fun :)&#xD;&#xA;Please could you provide an initial pointer about where to start - imagine it involved cloning the latest version of the ggplot2 master branch from you and fiddling with the geom-bar.R file https://github.com/hadley/ggplot2/blob/master/R/geom-bar-.r right? Imagine I need to do some prelim. homework before any progress is made so let me know of background material to read too - will read up on this as a minimum http://cran.r-project.org/doc/contrib/Leisch-CreatingPackages.pdf but more guidance always helpful. Thanks! &#xD;&#xA;&#xD;&#xA;Robin" />
    </Messages>
  </Topic>
  <Topic Id="891" Title="confusing error message for facet_wrap()">
    <Messages>
      <Message Id="0" ParentId="891" UserId="2318953" Date="12/23/2013 19:24:53" Content="`facet_wrap()` throws a confusing error message when `scales=&quot;free&quot;` and one of the factor levels contains only `NA`. For instance:&#xD;&#xA;&#xD;&#xA;    d &lt;- data.frame(x=gl(2,  1,  4),  y=c(1,  2,  NA,  NA),  f=gl(2,  2,  4))&#xD;&#xA;    ggplot(d,  aes(x,  y)) +&#xD;&#xA;      geom_point() +&#xD;&#xA;      facet_wrap(~f,  scale=&quot;free&quot;)&#xD;&#xA;&#xD;&#xA;throws the error message: &#xD;&#xA;&#xD;&#xA;    Error in seq.default(from = best$lmin,  to = best$lmax,  by = best$lstep) : &#xD;&#xA;      'from' must be of length 1 &#xD;&#xA;&#xD;&#xA;This is pretty hard to diagnose. It would be helpful if this error were trapped by `facet_wrap` &amp; a more explicit error message were provided." />
      <Message Id="35947634" ParentId="891" UserId="4196" Date="02/24/2014 22:26:26" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="892" Title="Should axis.ticks = element_blank() and axis.ticks.margin = element_blank() imply axis.ticks.length = unit(0,  &quot;unit&quot;)?">
    <Messages>
      <Message Id="0" ParentId="892" UserId="379357" Date="12/28/2013 19:12:33" Content="I was trying to remove all margins from a plot and was hung up on why I couldn't get the left and bottom sides to completely fill the plot space. I was focusing on anything related to removing text and margins from the [ theme documentation ](http://docs.ggplot2.org/current/theme.html).&#xD;&#xA;&#xD;&#xA;My first attempts:&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;plot &lt;- data.frame(x = 1:10)&#xD;&#xA;plot$y &lt;- plot$x^2&#xD;&#xA;    &#xD;&#xA;p &lt;- ggplot(plot,  aes(x = x,  y = y)) + geom_point()&#xD;&#xA;p &lt;- p + scale_x_continuous(expand = c(0,  0))&#xD;&#xA;p &lt;- p + scale_y_continuous(expand = c(0,  0))&#xD;&#xA;p &lt;- p + theme(axis.text = element_blank(),  axis.ticks = element_blank(), &#xD;&#xA;               plot.margin = unit(c(0,  0,  0,  0),  &quot;cm&quot;),  axis.title = element_blank(), &#xD;&#xA;               axis.ticks.margin = unit(0,  &quot;cm&quot;))&#xD;&#xA;p &lt;- p + labs(x = NULL,  y = NULL)&#xD;&#xA;p&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;That gets really close,  but I stumbled on [ a related SO question ](http://stackoverflow.com/questions/17786197/plot-margins-in-ggplot2) and in using trial and error on some of the options,  figured out that I need to set `axis.ticks.length = unit(0,  &quot;cm&quot;)` as well,  which completely removes the margins.&#xD;&#xA;&#xD;&#xA;Might be a nuance,  but if someone sets the ticks and tick labels to blank elements,  why is there still a margin for non-existent tick lengths?&#xD;&#xA;&#xD;&#xA;Feel free to disregards; just wanted to at least make note of the situation in case there was any interest in this scenario." />
      <Message Id="35947626" ParentId="892" UserId="4196" Date="02/24/2014 22:26:22" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="893" Title="To remove plot margins,  why are both axis.title = element_blank() and labs(x = NULL,  y = NULL) required?">
    <Messages>
      <Message Id="0" ParentId="893" UserId="379357" Date="12/28/2013 19:17:59" Content="In trying to remove all borders from a plot,  I applied all relevant [ theme options ](http://docs.ggplot2.org/current/theme.html) that seemed pertinent. It took stumbling on [ a related SO question ](http://stackoverflow.com/questions/17786197/plot-margins-in-ggplot2) to find that in addition to `theme(axis.title = element_blank())`,  I also need to pass `labs(x = NULL,  y = NULL)` to my plot.&#xD;&#xA;&#xD;&#xA;If one has set the titles to blank elements,  why must they also be set to `NULL`?&#xD;&#xA;&#xD;&#xA;P.S. As an aside,  why does `labs(x = NULL,  y = NULL)` work,  but not `scale_x_continuous(NULL)`? They seem to do the same thing when passing strings,  so if I really want axis text removed,  it would be nice to be able to pass `NULL` for the title along with other `scale_continuous` options (`limits = c()`,  etc.) vs. having to add a completely separate `labs()` command to do this." />
      <Message Id="35947605" ParentId="893" UserId="4196" Date="02/24/2014 22:26:15" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="894" Title="inconsistent geom_polygon behavior (Windows vs. OS X)">
    <Messages>
      <Message Id="0" ParentId="894" UserId="1222726" Date="01/02/2014 19:36:01" Content="Maybe I should have opened this as a bug report here rather than as a question on Stack Overflow?&#xD;&#xA;&#xD;&#xA;Anyway,  I don't know if it's a bug or what,  but this question describes the inconsistent behavior: http://stackoverflow.com/questions/20736972/inconsistent-geom-polygon-behavior-windows-vs-os-x" />
      <Message Id="35947767" ParentId="894" UserId="4196" Date="02/24/2014 22:27:31" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="895" Title="geom_h/vline draws incomplete or no lines with coord_trans()">
    <Messages>
      <Message Id="0" ParentId="895" UserId="1406263" Date="01/12/2014 08:56:25" Content="The hline is drawn incompletely:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(x = wt,  y=mpg)) + geom_point()&#xD;&#xA;p + geom_hline(yintercept=20) + coord_trans(xtrans=&quot;sqrt&quot;)&#xD;&#xA;p + geom_vline(xintercept=3) + coord_trans(ytrans=&quot;reciprocal&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ hline ](https://f.cloud.github.com/assets/1406263/1895853/1b00aba8-7b67-11e3-8bca-f0dc72c133e9.png)&#xD;&#xA;" />
      <Message Id="35947792" ParentId="895" UserId="4196" Date="02/24/2014 22:27:46" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="35947792" ParentId="895" UserId="4196" Date="02/24/2014 22:27:46" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="896" Title="Feature request: change colour of tick mark in guide_colourbar">
    <Messages>
      <Message Id="0" ParentId="896" UserId="1872825" Date="01/13/2014 21:51:15" Content="Hi, &#xD;&#xA;I would like to submit a FR to be able to change the colour of tick marks in the guide_colourbar legend. This is most useful if you have a colour gradient that passes through or includes white,  e.g.&#xD;&#xA;&#xD;&#xA;	#  Data&#xD;&#xA;	require(ggplot2)&#xD;&#xA;	require(grid)&#xD;&#xA;	n &lt;- 100&#xD;&#xA;	x &lt;- y &lt;- seq(-4*pi,  4*pi,  len=n)&#xD;&#xA;	r &lt;- cos( sqrt( outer(x^2,  y^2,  &quot;+&quot;) ) ^ 2 )&#xD;&#xA;	df &lt;- data.frame( x = rep( x ,  each = n) ,  y = rep( y ,  times = n ) ,  val = c(r) )&#xD;&#xA;&#xD;&#xA;	#  Plot&#xD;&#xA;	ggplot( df ,  aes( x ,  y ,  fill = val ) )+&#xD;&#xA;	  geom_raster()+&#xD;&#xA;	  scale_fill_gradient( low = &quot;#FFFFFF&quot; ,  high = &quot;#de2d26&quot; )+&#xD;&#xA;	  guides( fill = guide_colourbar( barheight = unit( 3 ,  &quot;in&quot; ) ) )+&#xD;&#xA;	  theme_bw()+&#xD;&#xA;	  theme( line = element_line( colour = &quot;#0000FF&quot; ) )&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/1872825/1905291/7ef18bc4-7c9c-11e3-8d8d-275d69fffea8.png)&#xD;&#xA;&#xD;&#xA;In fact,  it would be good to be able to specify the `lwd` in addition. The relevant code base is [ here ](https://github.com/hadley/ggplot2/blob/master/R/guide-colorbar.r#L336).&#xD;&#xA;&#xD;&#xA;I originally [ posted this as a question ](http://stackoverflow.com/q/21088480/1478381) on Stack Overflow which was answered with a temporary workaround.&#xD;&#xA;&#xD;&#xA;Thanks, &#xD;&#xA;&#xD;&#xA;Simon" />
      <Message Id="35947814" ParentId="896" UserId="4196" Date="02/24/2014 22:27:57" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="897" Title="Gradient Fill within a bar of a bar graph">
    <Messages>
      <Message Id="0" ParentId="897" UserId="1479597" Date="01/14/2014 22:12:30" Content="Hello All, &#xD;&#xA;&#xD;&#xA;I'm a newb when it comes to ggplot.  I'm looking at behavior of different groups of people (called Clusters in this data set) and their preference for the type of browser they use. I want to create a bar graph that shows the percentage of each cluster that is using each type of browser.&#xD;&#xA;&#xD;&#xA;Here is some code to generate a similar dataset (please ignore that the percentages for each cluster will not add up to 1):&#xD;&#xA;&#xD;&#xA;browserNames &lt;- c(&quot;microsoft&quot;, &quot;mozilla&quot;, &quot;google&quot;)&#xD;&#xA;clusterNames &lt;- c(&quot;Cluster 1&quot;, &quot;Cluster 2&quot;, &quot;Cluster 3&quot;)&#xD;&#xA;percentages &lt;- runif(n=length(browserNames)*length(clusterNames), min=0, max=1)&#xD;&#xA;&#xD;&#xA;myData&lt;-as.data.frame(list(browserNames=rep(browserNames, 3), &#xD;&#xA;                           clusterNames=rep(clusterNames, each=3), &#xD;&#xA;                           percentages=percentages))&#xD;&#xA;&#xD;&#xA;Here's the code I've been able to come up with so far to get the graph I desire:&#xD;&#xA;&#xD;&#xA;ggplot(myData,  aes(x=browserNames,  y=percentages,  fill=factor(clusterNames))) +&#xD;&#xA;    geom_bar(stat=&quot;identity&quot;, position=&quot;dodge&quot;) +&#xD;&#xA;    scale_y_continuous(name=&quot;Percent Weight&quot;,  labels=percent)&#xD;&#xA;&#xD;&#xA;I want the fill for each cluster to be a gradient fill with high and low values that I determine. So,  in this example,  I would like to be able to set 3 high and low values for each cluster that is represented.&#xD;&#xA;&#xD;&#xA;I've had trouble with the different scale_fill commands,  and I'm new enough to ggplot that I am pretty sure I'm probably just doing it wrong. Here's a picture of what I'm looking for:&#xD;&#xA;![ gradientexample ](https://f.cloud.github.com/assets/1479597/1915499/702007ac-7d68-11e3-8f6b-54913e94b48f.jpg)&#xD;&#xA;&#xD;&#xA;Any Ideas?&#xD;&#xA;" />
      <Message Id="32316855" ParentId="897" UserId="4196" Date="01/14/2014 22:54:45" Content="Please send this sort of question to the ggplot2 mailing list." />
    </Messages>
  </Topic>
  <Topic Id="898" Title="Accept different quantile types in stat_boxplot">
    <Messages>
      <Message Id="0" ParentId="898" UserId="1372890" Date="01/17/2014 03:46:11" Content="(*Spun off from #108*)&#xD;&#xA;&#xD;&#xA;This is so trivial,  I'm reluctant to bring it up.  But it seems like it would require  a small change,  and could avoid unnecessary debates if ggplot uses the best way to calculate the hinges of a boxplot.&#xD;&#xA;&#xD;&#xA;R's `quantile()` function currently supports [ 9 variations ](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/quantile.html).  In [ `stat_boxplot()` ](https://github.com/hadley/ggplot2/blob/c181c8ce5c0b95149b98a861810120f5696e212c/R/stat-boxplot.r#L51),  could the following line be adapted to accept a parameter value from 1 to 9?  &#xD;&#xA;```&#xD;&#xA; } else { &#xD;&#xA;   stats &lt;- as.numeric(quantile(y,  qs))&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I don't understand all the internal functions of ggplot2,  so I don't know if there would be downstream problems.  In #108,  it was mentioned that it's not easy to allow the user to specify `fivenum()` instead of `quantile()`.  Hopefully this won't be as difficult,  since it's the same function,  and only an optional parameter changes.&#xD;&#xA;&#xD;&#xA;The [ `quantile()` ](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/quantile.html) documentation apparently concedes that its default isn't the recommendation of people who have thought about the differences. I guess they kept it way for backward compatibility.  Notice the authors of the function are Ivan Frohne and Rob J **Hyndman**.&#xD;&#xA;&gt; Further details are provided in **Hyndman** and Fan (1996) who recommended type 8. The default method is type 7,  as used by S and by R &lt; 2.0.0." />
      <Message Id="32578985" ParentId="898" UserId="1372890" Date="01/17/2014 04:13:54" Content="Here's my current use case,  if it helps describe a situation where someone might care enough to change the default quantile function.&#xD;&#xA;&#xD;&#xA;I'm helping two authors (@deshea &amp; @LTOOTH) create graphs for their next Intro Stat textbook.  Most the data has only a few records,  which is probably the only time these quantile approaches show any visible differences.&#xD;&#xA;&#xD;&#xA;I have some concern that the our ggplot2 boxplots look slightly different from the boxplots produced by the book's equations (which follow Tukey).  ...and that acknowledging the existence of different boxplot equations would be an unhelpful distraction for the undergrads (especially in Chapter 3; BTW I'm not even convinced that Tukey's has the best properties).&#xD;&#xA;&#xD;&#xA;Writing `stat_boxplot(type=5)` would accommodate this (At least I think type 5 the same as Tukey's).&#xD;&#xA;&#xD;&#xA;The deadline is soon,  and for the sake of the chapter,  I'm just going to fork ggplot2 and hardcode the parameter quantile call.  I'm just wondering if accepting different types would be a useful addition to ggplot2.  Tell me if you don't think there will be downstream problems,  and I'm happy to add that new parameter to the signature of `stat_boxplot()` and submit a pull request." />
      <Message Id="34094240" ParentId="898" UserId="3592346" Date="02/04/2014 19:01:21" Content="As you have noted,  rewriting `geom_box` is quite extensive. And mind you,  that R's builtin boxplot does not allow for specifying the quantile type.&#xD;&#xA;However,  instead of hardcoding your corrections,  Hadly has been so kind to provide us a mean to plug in our own statistics: `stat_summary`.&#xD;&#xA;I have made a small muck-up:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(factor(cyl),  mpg))&#xD;&#xA;sd.box &lt;- function(d) { &#xD;&#xA;return(data.frame(ymin=min(d),  ymax=max(d),  upper=mean(d)+sd(d),  lower=mean(d)-sd(d),  middle=mean(d)))&#xD;&#xA; }&#xD;&#xA;p + stat_summary(fun.data=sd.box,  geom='boxplot')&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ stat_summary ](https://f.cloud.github.com/assets/3592346/2079780/97f9e2a4-8dce-11e3-9a5c-51a969684e9a.png)&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="899" Title="Accesing a variable in aes in ggplot">
    <Messages>
      <Message Id="0" ParentId="899" UserId="2590865" Date="01/20/2014 09:41:33" Content="I have a sample data below &#xD;&#xA;data &lt;- data.frame(yr =c(1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2009, 2010, 2011, 2012),  ntemp =c(11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 12, 23))&#xD;&#xA;&#xD;&#xA;When I try running this function&#xD;&#xA;FUN&lt;-function(data,  fun.y, yr){ &#xD;&#xA;  fun.data &lt;- data&#xD;&#xA;  &#xD;&#xA;  ggplot(fun.data, aes(yr, fun.y)   )+geom_point()+scale_y_continuous(fun.y)    &#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;FUN( data, &quot;ntemp&quot;,  yr)&#xD;&#xA;&#xD;&#xA;I get an Error in eval(expr,  envir,  enclos) : object 'fun.y' not found" />
      <Message Id="32954127" ParentId="899" UserId="140350" Date="01/21/2014 19:32:30" Content="I believe you need to use `aes_string` inside the function. See http://docs.ggplot2.org/0.9.3.1/aes_string.html as well as stackoverflow.com and the archives of the ggplot2 google group." />
    </Messages>
  </Topic>
  <Topic Id="900" Title="Add parameter &quot;varwidth&quot; to geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="900" UserId="1840074" Date="01/21/2014 09:14:54" Content="stat-boxplot and geom-boxplot enriched in order to display boxplots of width proportional to the square root of the number of observations,  possibly weighted" />
      <Message Id="35947844" ParentId="900" UserId="4196" Date="02/24/2014 22:28:11" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="901" Title="facet_wrap errors">
    <Messages>
      <Message Id="0" ParentId="901" UserId="500140" Date="01/27/2014 15:16:10" Content="Hi, &#xD;&#xA;&#xD;&#xA;Maybe I'm missing something important but this code (from example) doesn't work&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;d &lt;- ggplot(diamonds,  aes(carat,  price,  fill = ..density..)) +&#xD;&#xA;  xlim(0,  2) + stat_binhex(na.rm = TRUE) + theme(aspect.ratio = 1)&#xD;&#xA;d + facet_wrap(~ color)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I have the following error&#xD;&#xA;```{ r }&#xD;&#xA;Error in dims[ [ type ] ] : subscript out of bounds&#xD;&#xA;```&#xD;&#xA;But `facet_grid` works fine.&#xD;&#xA;&#xD;&#xA;Here's my session Info&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;R version 3.0.2 Patched (2014-01-18 r64825)&#xD;&#xA;Platform: x86_64-unknown-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA; [ 3 ] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=en_US.UTF-8       LC_NAME=C                 &#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets &#xD;&#xA;[ 7 ] methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] scales_0.2.3    hexbin_1.26.3   lattice_0.20-24&#xD;&#xA;[ 4 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4   dichromat_2.0-0    digest_0.6.4      &#xD;&#xA; [ 4 ] gtable_0.1.2       labeling_0.2       MASS_7.3-29       &#xD;&#xA; [ 7 ] munsell_0.4.2      plyr_1.8.0.99      proto_0.3-10      &#xD;&#xA;[ 10 ] RColorBrewer_1.0-5 Rcpp_0.10.6        reshape2_1.2.2    &#xD;&#xA;[ 13 ] stringr_0.6.2 &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Thanks&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="902" Title="adding offset argument to stat_bin()">
    <Messages>
      <Message Id="0" ParentId="902" UserId="722231" Date="01/31/2014 00:35:09" Content="I've added an `offset` argument to `stat_bin()` so that one can change shift the bins left or right without having to specify all the breaks.  Currently,  this only affects things when both `breaks` and `origin` are NULL,  but one could imagine expanding the use case.&#xD;&#xA;&#xD;&#xA;As is,  it is now simple to choose a width and control the centers/edges of bins without needing to query the data and create breaks manually.   For example,  to get bins centered on integers,  use &#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;binwidth = 1,  offset=0.5&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I have not added any examples,  but the offset argument is documented in the usage section." />
      <Message Id="35947861" ParentId="902" UserId="4196" Date="02/24/2014 22:28:18" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="903" Title=" scale_fill_gradient fails on  empty data frame">
    <Messages>
      <Message Id="0" ParentId="903" UserId="6027299" Date="02/01/2014 16:39:48" Content="First of all - thanks for your wonderful tool - really brilliant!&#xD;&#xA;&#xD;&#xA;I may have found a small problem with the handling of empty data frames in scale_fill_gradient.  Here small test case for ggplot2 9.3.1.99 / R 3.0.2,  either &#xD;&#xA;OSX 10.9.1  or RH  6:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;data &lt;- data.frame(x=rnorm(1000), y= rnorm(1000))&#xD;&#xA;&#xD;&#xA;# this works as expected&#xD;&#xA;ggplot(data,  aes(x,  y)) + &#xD;&#xA;  stat_bin2d( aes(fill=..count..)) + &#xD;&#xA;  scale_fill_gradient(low=&quot;green&quot;,  high=&quot;red&quot;) &#xD;&#xA;&#xD;&#xA;# this one does not - instead of doing an empty plot it stops with&#xD;&#xA;# Error in unit(tic_pos.c,  &quot;mm&quot;) : 'x' and 'units' must have length &gt; 0&#xD;&#xA;empty.df &lt;- subset(data,  x&gt; 1e9)&#xD;&#xA;ggplot(empty.df,  aes(x,  y)) + &#xD;&#xA;  stat_bin2d( aes(fill=..count..)) + &#xD;&#xA;  scale_fill_gradient(low=&quot;green&quot;,  high=&quot;red&quot;) &#xD;&#xA;```&#xD;&#xA;I'm using this fragment in a function from inside other expressions to build up more complex plots,  so currently I need to workaround with &#xD;&#xA;```&#xD;&#xA;ggplot ( &lt;stuff&gt;) + &#xD;&#xA;  (if (!empty(data)) scale_fill_gradient(low=&quot;green&quot;,  high=&quot;red&quot;)  else geom_blank() ) +&#xD;&#xA;   &lt;more ggplot stuff&gt; +  &#xD;&#xA;```&#xD;&#xA;This works,  but is a bit awkward.&#xD;&#xA;&#xD;&#xA; Cheers,  Dirk&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35947876" ParentId="903" UserId="4196" Date="02/24/2014 22:28:27" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="904" Title="Added two functions,  labeller and label_wrap_gen.">
    <Messages>
      <Message Id="0" ParentId="904" UserId="3592346" Date="02/04/2014 14:02:34" Content="These two functions aid when labelling facets. labeller allows for&#xD;&#xA;providing multiple named vectors and/or methods to change the labels for&#xD;&#xA;each margin. label_wrap_gen allows labels to be word wrapped." />
      <Message Id="35947920" ParentId="904" UserId="4196" Date="02/24/2014 22:28:44" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="905" Title="Friendly error messages when drawing out of bound">
    <Messages>
      <Message Id="0" ParentId="905" UserId="157832" Date="02/18/2014 17:50:49" Content="When drawing out side of the x limit,  you will see a unhelpful warning. For example:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- qplot(seq(5),  seq(5))&#xD;&#xA;p + annotate(&quot;text&quot;,  x = -1,  y = 1,  label = &quot;OK&quot;) + scale_x_continuous(limits = c(1,  5))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Error message is:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error in unit(x,  default.units) : 'x' and 'units' must have length &gt; 0&#xD;&#xA;In addition: Warning message:&#xD;&#xA;Removed 1 rows containing missing values (geom_text). &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The current error message *Error in unit(x,  default.units) : 'x' and 'units' must have length &gt; 0* is not helpful for ggplot2 users.&#xD;&#xA;Is there a way in ggplot2 to remind users that the annotation text is out of the bound?&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="35838693" ParentId="905" UserId="472045" Date="02/23/2014 18:28:35" Content="I second this request. I just spent a good half-hour figuring out that the error was because my function was sometimes drawing geom_text() outside of some bounds." />
      <Message Id="35947930" ParentId="905" UserId="4196" Date="02/24/2014 22:28:51" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="906" Title="Crash if lower &gt; upper in limits argument of scale_colour_continuous">
    <Messages>
      <Message Id="0" ParentId="906" UserId="4941031" Date="02/21/2014 10:37:42" Content="```r&#xD;&#xA;ggplot(data.frame(x=1:2,  y=2:1,  col=1:2),  aes(x=x,  y=y,  col=col)) + &#xD;&#xA;    geom_point() + &#xD;&#xA;    scale_colour_continuous(limits=c(1,  -1))&#xD;&#xA;```&#xD;&#xA;Does not affect scale_x_continuous,  scale_y_continuous.&#xD;&#xA;Affects scale_fill_continuous (confirmed with geom_tile)." />
      <Message Id="35947938" ParentId="906" UserId="4196" Date="02/24/2014 22:28:54" Content="This sounds like a great feature/horrible bug,  but unfortunately we don't currently have the development bandwidth to support it/fix it. If you'd like to submit a pull request that implements this feature/fixes this bug,  please follow the instructions in the development vignette.&#xD;&#xA;" />
      <Message Id="40364569" ParentId="906" UserId="4941031" Date="04/14/2014 13:24:32" Content="Hi Hadley, &#xD;&#xA;I've played around the issue a bit. I might have got on the right track. If I ever manage to come up with a solution,  how would you like it to react on such code? Options are: 1) throw an error; 2) draw something (empty plot like scale_colour_continuous does?),  throw a warning; 3) draw something,  do not throw any warning/error; 4) anything else? " />
      <Message Id="40364674" ParentId="906" UserId="4196" Date="04/14/2014 13:25:30" Content="Throw an error - hear it's pretty clear than the user has accidentally constructed a bad input." />
      <Message Id="40365334" ParentId="906" UserId="4941031" Date="04/14/2014 13:32:05" Content="Okay,  good. Would you like to do the same with other scale_ functions (the ones that do not crash the session)? " />
      <Message Id="40365899" ParentId="906" UserId="4196" Date="04/14/2014 13:38:01" Content="Yes!" />
    </Messages>
  </Topic>
  <Topic Id="907" Title="fixes #837: remove the movies object">
    <Messages>
      <Message Id="0" ParentId="907" UserId="163582" Date="02/24/2014 22:12:17" Content=" so that geom_violin() examples work after geom_histogram()" />
      <Message Id="35947957" ParentId="907" UserId="4196" Date="02/24/2014 22:29:07" Content="Could you please rebase/merge against master,  re-document with the development version of roxygen2 (`install_github(&quot;klutometis/roxygen`) and resubmit?&#xD;&#xA;" />
      <Message Id="35950145" ParentId="907" UserId="163582" Date="02/24/2014 22:50:09" Content="Hmm... That is exactly what I did." />
      <Message Id="35950299" ParentId="907" UserId="4196" Date="02/24/2014 22:51:32" Content="In that case I must have accidentally closed during my frenzy." />
      <Message Id="35950307" ParentId="907" UserId="4196" Date="02/24/2014 22:51:37" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="908" Title="One limit">
    <Messages>
      <Message Id="0" ParentId="908" UserId="205275" Date="02/24/2014 22:27:15" Content="This is a up to date rebase of #684,  it addresses issue #557." />
      <Message Id="35948280" ParentId="908" UserId="4196" Date="02/24/2014 22:31:54" Content="Thanks! You can be the first to try out my new PR checklist:&#xD;&#xA;&#xD;&#xA;Can you please :&#xD;&#xA;&#xD;&#xA;* [   ] Motivate the change in one paragraph,  and include it in NEWS. &#xD;&#xA;      Reference this issue number and thank yourself.&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="36028435" ParentId="908" UserId="205275" Date="02/25/2014 16:45:18" Content="I added info in news and updated some documentation.  I am not sure this needs a graphic example,  but if you think it should have one I can create one." />
      <Message Id="36043389" ParentId="908" UserId="205275" Date="02/25/2014 18:51:59" Content="Not sure if you get notified if I just add a commit so I wanted to comment and let you know I fixed the news issue you mentioned." />
      <Message Id="36043760" ParentId="908" UserId="4196" Date="02/25/2014 18:55:16" Content="Thanks (I'm not). It looks good to go - can you please rebase/merge (probably just a conflict from NEWS) and then I'll accept." />
      <Message Id="36045428" ParentId="908" UserId="205275" Date="02/25/2014 19:10:10" Content="Done,  let me know if everything looks good!" />
      <Message Id="36047601" ParentId="908" UserId="4196" Date="02/25/2014 19:29:11" Content="Looks like https://travis-ci.org/hadley/ggplot2/builds/19600088 failed - can you take a look please?" />
      <Message Id="36050893" ParentId="908" UserId="205275" Date="02/25/2014 19:58:35" Content="The error was occurring because the lower bound in the example was excluding all the points in the dataset so there was no way to calculate the upper bound.  I fixed the example,  I don't know if we should do something to address this error however..." />
      <Message Id="36052139" ParentId="908" UserId="4196" Date="02/25/2014 20:09:47" Content="I'd be happy to accept a pull request that gave a better error message in that case :)" />
      <Message Id="38926080" ParentId="908" UserId="2370091" Date="03/28/2014 14:43:22" Content="@jimhester How difficult do you think it is to implement this for the x/ylim for coord_cartesian? I'm no R expert and want to know whether its worth the trouble digging into it." />
      <Message Id="38933371" ParentId="908" UserId="205275" Date="03/28/2014 15:41:58" Content="@cmorty It is definitely possible and would be useful.  As to how hard it would be to implement it should be a fairly small change once you find the proper place to make the change.  Finding that place might be challenging however,  I would start with trying it out,  when it errors use `traceback()` to see where it breaks." />
    </Messages>
  </Topic>
  <Topic Id="909" Title="Position offset">
    <Messages>
      <Message Id="0" ParentId="909" UserId="2002771" Date="02/25/2014 01:42:46" Content="I'm not sure how to document width and height. Maybe you can fix up my descriptions. I added a nice example though." />
      <Message Id="37586567" ParentId="909" UserId="4196" Date="03/13/2014 21:03:43" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [   ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add test,  if bug in non-graphical function&#xD;&#xA;* [   ] Add visual test,  if bug in graphical function&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="38583813" ParentId="909" UserId="4196" Date="03/25/2014 16:05:37" Content="If you can make the suggested changes this week,  you contribution will make it into the next version of ggplot2." />
      <Message Id="38723216" ParentId="909" UserId="2002771" Date="03/26/2014 18:41:59" Content="Well,  this is closer. Can you take another look?" />
      <Message Id="38725421" ParentId="909" UserId="4196" Date="03/26/2014 19:00:55" Content="It's better,  but I still can't tell exactly what it does. Can you expand on the NEWS item and simplify the example?" />
      <Message Id="38727911" ParentId="909" UserId="2002771" Date="03/26/2014 19:22:56" Content="I don't know what it does either. Does it change the origin of categorical axes?&#xD;&#xA;&#xD;&#xA;I like the original example,  but I added a really simpler one first. Do you think I need an even simpler one?" />
      <Message Id="38854725" ParentId="909" UserId="2002771" Date="03/27/2014 20:13:37" Content="Ah ha,  this works:&#xD;&#xA;&#xD;&#xA;  geom_text(data=bin.correct,  aes(x=at, y=1.5, label=pct),  color=&quot;blue&quot;,  angle=90) +&#xD;&#xA;&#xD;&#xA;So I guess we don't need position_offset after all!" />
      <Message Id="41044561" ParentId="909" UserId="4196" Date="04/22/2014 14:16:44" Content="Ok,  thanks anyway!&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="910" Title="Feature/stefanedwards labeller">
    <Messages>
      <Message Id="0" ParentId="910" UserId="3592346" Date="02/25/2014 09:05:07" Content="Resubmitting #904:&#xD;&#xA;These two functions aid when labelling facets. labeller allows for&#xD;&#xA;providing multiple named vectors and/or methods to change the labels for&#xD;&#xA;each margin. label_wrap_gen allows labels to be word wrapped." />
      <Message Id="36013974" ParentId="910" UserId="4196" Date="02/25/2014 14:44:36" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parenthesis,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [   ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Update documentation and re-run roxygen2&#xD;&#xA;* [ x ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="38583832" ParentId="910" UserId="4196" Date="03/25/2014 16:05:45" Content="If you can make the suggested changes this week,  you contribution will make it into the next version of ggplot2." />
      <Message Id="38892360" ParentId="910" UserId="3592346" Date="03/28/2014 06:35:46" Content="Do I need to do something else? I've uploaded my changes." />
      <Message Id="38914006" ParentId="910" UserId="4196" Date="03/28/2014 12:33:29" Content="Added a few more comments. All needs a paragraph in NEWS.  Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="911" Title="Fix fortify-spatial namespace issue (#879)">
    <Messages>
      <Message Id="0" ParentId="911" UserId="23257" Date="02/25/2014 11:17:18" Content="Fixes fortify error when sp namespace is not loaded.&#xD;&#xA;https://github.com/hadley/ggplot2/issues/879" />
      <Message Id="36004408" ParentId="911" UserId="4196" Date="02/25/2014 12:57:59" Content="In what scenario would `sp()` not be loaded?" />
      <Message Id="36116904" ParentId="911" UserId="23257" Date="02/26/2014 11:45:47" Content="Here's the example from the original issue:&#xD;&#xA;&#xD;&#xA;    bx &lt;- rgeos::readWKT(&quot;POLYGON ((112.5 -44,  112.5 -9,  154 -9,  154 -44,  + 112.5 -44))&quot;)&#xD;&#xA;    bx &lt;- as(bx,  &quot;SpatialPolygonsDataFrame&quot;)&#xD;&#xA;    fortify(bx,  region=&quot;dummy&quot;)&#xD;&#xA;    # Error in fortify.SpatialPolygonsDataFrame(bx,  region = &quot;dummy&quot;) : &#xD;&#xA;    #  could not find function &quot;polygons&quot;&#xD;&#xA;&#xD;&#xA;A more serious example is in the [ rmapaus ](https://github.com/seancarmody/rmapaus) package I have been working on,  where I want to load map data and the use `ggplot2` to plot it. I would prefer to stick to Imports rather than Depends,  which I understand to be [ better practice ](http://stackoverflow.com/questions/8637993/better-explanation-of-when-to-use-imports-depends)." />
      <Message Id="36170849" ParentId="911" UserId="4196" Date="02/26/2014 20:11:43" Content="Got it.  Could you please add a short explanatory note to NEWS?" />
      <Message Id="36232002" ParentId="911" UserId="23257" Date="02/27/2014 11:15:53" Content="Done." />
    </Messages>
  </Topic>
  <Topic Id="912" Title="Fix for issue #825 so that dotplot now works with qplot.">
    <Messages>
      <Message Id="0" ParentId="912" UserId="1006144" Date="02/25/2014 12:57:39" Content="This is a fix for issue #825.&#xD;&#xA;&#xD;&#xA;It seems that when a dotplot is created using `geom_dotplot` a couple of parameters (binaxis,  stackdir,  stackgroups,  etc.) are assigned default values. When a dotplot is created using  `qplot(mpg,  data=mtcars,  geom=&quot;dotplot&quot;)` these params are not defined. The `reparameterise` function of GeomDotplot expect some of these params to be defined thus dotplot does not work with qplot.&#xD;&#xA;&#xD;&#xA;The easy fix for this for `reparameterise` to check if these params are defined and if not use defaults. I've implemented these checks and have used the same defaults as used in the `geom_dotplot` function. Using this fix &#xD;&#xA;&#xD;&#xA;`qplot(mpg,  data=mtcars,  geom=&quot;dotplot&quot;)`&#xD;&#xA;&#xD;&#xA;does not result in an error and gives the same output as&#xD;&#xA;&#xD;&#xA;`ggplot(mtcars,  aes(x = mpg)) + geom_dotplot()`&#xD;&#xA;&#xD;&#xA;https://github.com/hadley/ggplot2/issues/825" />
      <Message Id="36004637" ParentId="912" UserId="4196" Date="02/25/2014 13:00:43" Content="Thanks! Can you please complete the rest of this checklist:&#xD;&#xA;&#xD;&#xA;* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      Reference this issue and thank yourself.&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;* [   ] Update documentation and re-run roxygen2&#xD;&#xA;&#xD;&#xA;@wch does this seem reasonable?" />
      <Message Id="36006475" ParentId="912" UserId="1006144" Date="02/25/2014 13:24:44" Content="Yo, &#xD;&#xA;&#xD;&#xA;I've added a row to NEWS and rewritten the patch to use %||% . No minimal example since its no graphical feature,  I guess. No new documentation either...&#xD;&#xA;&#xD;&#xA;Cheers!" />
      <Message Id="36013034" ParentId="912" UserId="4196" Date="02/25/2014 14:36:55" Content="Can you make it `@rasmusab` in the NEWS? I think an example in `qplot()` would be nice." />
      <Message Id="36022624" ParentId="912" UserId="1006144" Date="02/25/2014 15:57:28" Content="I've added an example both to the qplot and the geom_dotplot documentation and changed the NEWS. Was this how you meant?" />
      <Message Id="36068066" ParentId="912" UserId="1006144" Date="02/25/2014 22:41:34" Content="My bad. Fixed!" />
      <Message Id="36068414" ParentId="912" UserId="4196" Date="02/25/2014 22:45:10" Content="And now,  can you please merge/rebase so I can cleanly merge? (It's probably just a conflict in NEWS). Thanks!" />
      <Message Id="36070965" ParentId="912" UserId="1006144" Date="02/25/2014 23:12:16" Content="And now I messed it up,  sorry. I'll try to sort it out..." />
      <Message Id="36072599" ParentId="912" UserId="1006144" Date="02/25/2014 23:30:58" Content="Like this?" />
      <Message Id="36141377" ParentId="912" UserId="4196" Date="02/26/2014 16:02:37" Content="Perfect - thanks!" />
      <Message Id="36141567" ParentId="912" UserId="1006144" Date="02/26/2014 16:04:01" Content=" : )" />
    </Messages>
  </Topic>
  <Topic Id="913" Title="Avoid merge conflicts in NEWS file">
    <Messages>
      <Message Id="0" ParentId="913" UserId="1741643" Date="02/25/2014 14:10:29" Content="by using the `union` merge strategy.&#xA;&#xA;This will simplify life for contributors. Unfortunately,  GitHub does not seem to support this for browser-based merging,  but merges on the command line will not suffer from merge conflicts in `NEWS` anymore.&#xA;&#xA;See also http://krlmlr.github.io/using-gitattributes-to-avoid-merge-conflicts/." />
      <Message Id="36012726" ParentId="913" UserId="4196" Date="02/25/2014 14:33:56" Content="Cool - thanks!" />
      <Message Id="36018561" ParentId="913" UserId="1741643" Date="02/25/2014 15:24:30" Content="If new items are added to the top of the `NEWS` file,  the order of the fixes seems to remain consistent." />
      <Message Id="36071245" ParentId="913" UserId="1741643" Date="02/25/2014 23:15:29" Content="Also,  please consider using&#xD;&#xA;&#xD;&#xA;    hub merge PULLREQ_URL&#xD;&#xA;&#xD;&#xA;on the command line in favor of the &quot;Merge&quot; button at GitHub; the former will take advantage of the new `.gitattributes` merge setting,  avoiding the extra roundtrip required just to resolve the non-conflict in `NEWS`. From the docs:&#xD;&#xA;&#xD;&#xA;&gt; `git merge PULLREQ-URL`&#xD;&#xA;&gt; Merge the pull request with a commit message that includes the pull request ID and title,  similar to the GitHub Merge Button." />
      <Message Id="36071624" ParentId="913" UserId="4196" Date="02/25/2014 23:19:37" Content="Ok,  I'll give that a go next time." />
    </Messages>
  </Topic>
  <Topic Id="914" Title="New themes panel.margin.x and panel.margin.y">
    <Messages>
      <Message Id="0" ParentId="914" UserId="1741643" Date="02/25/2014 14:33:33" Content="Re-issue of #840." />
      <Message Id="36013744" ParentId="914" UserId="4196" Date="02/25/2014 14:42:39" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parenthesis,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [   ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="36014144" ParentId="914" UserId="1741643" Date="02/25/2014 14:46:16" Content="Do you want a separate pull request for the mini-fix?" />
      <Message Id="36014637" ParentId="914" UserId="4196" Date="02/25/2014 14:50:12" Content="I'll do it." />
      <Message Id="36014883" ParentId="914" UserId="1741643" Date="02/25/2014 14:52:29" Content="If you could cherry-pick it,  this pull request still would be valid." />
      <Message Id="36014984" ParentId="914" UserId="4196" Date="02/25/2014 14:53:29" Content="I don't think we need to bother for this problem,  but in the future,  it really helps if I can accept a pull request as is,  without having to use the command line. That's the point I'm trying to get to with travis,  testthat,  vtest etc." />
      <Message Id="37587562" ParentId="914" UserId="4196" Date="03/13/2014 21:13:12" Content="Can you please remind me the easiest way to merge this with git/hub?" />
      <Message Id="37587757" ParentId="914" UserId="1741643" Date="03/13/2014 21:15:21" Content="I think it was `hub merge https://github.com/hadley/ggplot2/pull/914`. Merging instructions also come with each pull request e-mail,  but the former *might* also close the pull request on GitHub (never used it myself).&#xD;&#xA;&#xD;&#xA;I'd still like to add a visual test,  could you please point me at documentation?" />
      <Message Id="37589492" ParentId="914" UserId="4196" Date="03/13/2014 21:31:58" Content="Ok,  let wait until next week then." />
      <Message Id="38583500" ParentId="914" UserId="4196" Date="03/25/2014 16:03:33" Content="Decided to merge before new visual tests - I think that's going to have to wait a while." />
    </Messages>
  </Topic>
  <Topic Id="915" Title="fix vertical justification for rotated text">
    <Messages>
      <Message Id="0" ParentId="915" UserId="1741643" Date="02/25/2014 14:37:22" Content="Per request,  re-issue of #883." />
      <Message Id="36013501" ParentId="915" UserId="4196" Date="02/25/2014 14:40:32" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parenthesis,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add test,  if bug in non-graphical function&#xD;&#xA;* [   ] Add visual test,  if bug in graphical function&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="36014101" ParentId="915" UserId="1741643" Date="02/25/2014 14:45:50" Content="Thanks. I'll supply a visual test once it's documented. Are the docs online already?&#xD;&#xA;&#xD;&#xA;Re-running `roxygen2` is not necessary here. I'll update `NEWS`." />
      <Message Id="37587688" ParentId="915" UserId="4196" Date="03/13/2014 21:14:33" Content="I've been working on https://github.com/hadley/rifftron - will try to switch over next to that next week." />
      <Message Id="38583657" ParentId="915" UserId="4196" Date="03/25/2014 16:04:39" Content="In the absence of visual tests,  would you mind adding a before and after picture to this thread?  Will this affect existing code?" />
      <Message Id="38610588" ParentId="915" UserId="1741643" Date="03/25/2014 19:38:00" Content="I have posted &quot;before&quot; and &quot;after&quot; images [ here ](https://github.com/hadley/ggplot2/pull/883#issue-24006072). Did you have something else in mind? (I could copy the comment here,  if it helps.)&#xD;&#xA;&#xD;&#xA;Existing code that tweaked the positioning to work around this behavior might now produce plots that look worse than before,  but I haven't checked. Other than that,  I think plot quality will improve. Of course,  this change doesn't touch rotations that are not multiples of 90° -- these would have to be looked at separately,  but I'd expect them to be used much less frequently." />
      <Message Id="38611739" ParentId="915" UserId="4196" Date="03/25/2014 19:48:35" Content="Oh that's perfect. I think it's a minor break to backward compatibility in return for a decent improvement in the defaults.&#xD;&#xA;&#xD;&#xA;But can you please expand the note in the news to point out that this will affect existing plots and what you need to do about it (i.e. probably just remove your custom vjust settings). " />
      <Message Id="38634119" ParentId="915" UserId="1741643" Date="03/25/2014 23:27:51" Content="Oh,  I think the default looked good before. Things used to look odd only if `vjust` had a non-standard value (other than 0.5,  since then `vj == 1 - vj`),  but `vjust` is now interpreted correctly in all cases. I have enhanced the note in `NEWS`,  it's perhaps too verbose now." />
      <Message Id="38703863" ParentId="915" UserId="4196" Date="03/26/2014 16:13:09" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="916" Title="Roxygenize">
    <Messages>
      <Message Id="0" ParentId="916" UserId="1741643" Date="02/25/2014 14:51:13" Content="Fix spurious difference between `.r` and `.Rd` files." />
      <Message Id="36014857" ParentId="916" UserId="4196" Date="02/25/2014 14:52:13" Content="I beat you to it ;)" />
    </Messages>
  </Topic>
  <Topic Id="917" Title="when testing if an identifier refers to a calculated aesthetic,  check the whole identifier,  not a substring">
    <Messages>
      <Message Id="0" ParentId="917" UserId="1741643" Date="02/25/2014 14:55:17" Content="Reissue of #835." />
      <Message Id="36016272" ParentId="917" UserId="4196" Date="02/25/2014 15:04:51" Content="* [ x ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parenthesis,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Add test,  if bug in non-graphical function&#xD;&#xA;&#xD;&#xA;For the NEWS item,  I think you can rewrite to: &quot;Previously `aes()` incorrectly treated variables like `a..x..b` as a calculated aesthetic`.  Would you mind adding a test?&#xD;&#xA;" />
      <Message Id="36018030" ParentId="917" UserId="1741643" Date="02/25/2014 15:20:02" Content="Added test,  updated `NEWS`,  force-pushed. The test for the first commit is supposed to fail." />
      <Message Id="36019779" ParentId="917" UserId="4196" Date="02/25/2014 15:34:02" Content="Thanks!" />
      <Message Id="38322266" ParentId="917" UserId="4196" Date="03/21/2014 20:45:50" Content="@krlmlr  Could you please take at the check failures in https://github.com/wch/ggplot2-checkresults/blob/master/r-release/00check-summary.txt ?" />
      <Message Id="38323230" ParentId="917" UserId="86978" Date="03/21/2014 20:57:00" Content="This probably isn't the source of this problem,  but it does look like a bug. The regex should have have `a-zA-Z` instead of `a-zA-z`. The latter includes a bunch of characters between the upper and lower case letters: http://www.ascii-code.com/" />
      <Message Id="38364938" ParentId="917" UserId="1741643" Date="03/22/2014 21:37:27" Content="Thanks for catching the regex glitch,  this was a copy-paste error. Harmless,  but should be tested for and fixed anyway.&#xD;&#xA;&#xD;&#xA;I can bisect to search for a commit that introduces the error. It's only running `R CMD check` on the CRAN versions of the affected packages,  right?" />
      <Message Id="38365479" ParentId="917" UserId="4196" Date="03/22/2014 21:58:00" Content="Right. I can't how see your change would have broken this but it seems the most likely hypothesis. " />
      <Message Id="38370738" ParentId="917" UserId="1741643" Date="03/23/2014 02:03:58" Content="The `bbmle` package passes checks if I remove `^` and `$` from the regular expression. It seems that the regular expression should also match substrings. I think it's possible to obtain the desired behavior with the help of lookarounds,  but I wonder if it's really worth it." />
    </Messages>
  </Topic>
  <Topic Id="918" Title="add &quot;none&quot; to documentation of theme() for parameter legend.position">
    <Messages>
      <Message Id="0" ParentId="918" UserId="1741643" Date="02/25/2014 15:00:44" Content="Reissue of #831." />
      <Message Id="36016463" ParentId="918" UserId="4196" Date="02/25/2014 15:06:31" Content="* [   ] Motivate the change in one paragraph,  and include if affects code,  &#xD;&#xA;      include it in NEWS. In parenthesis,  reference your github user name and &#xD;&#xA;      the issue,  `(@hadley,  #1234)`&#xD;&#xA;* [   ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [   ] Update documentation and re-run roxygen2&#xD;&#xA;&#xD;&#xA;You don't need to change the NEWS here,  but generally I think it's only worthwhile to list major documentation changes." />
    </Messages>
  </Topic>
  <Topic Id="919" Title="remove_geom: a function to remove layers from a ggplot2 object">
    <Messages>
      <Message Id="0" ParentId="919" UserId="702394" Date="02/25/2014 17:20:08" Content="Remove layers from a ggplot2 object." />
      <Message Id="36034566" ParentId="919" UserId="702394" Date="02/25/2014 17:31:14" Content="Previously #745 " />
      <Message Id="36038118" ParentId="919" UserId="702394" Date="02/25/2014 18:03:01" Content="Merged in set-geom-params feature." />
      <Message Id="36039116" ParentId="919" UserId="4196" Date="02/25/2014 18:12:31" Content="* [ x ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [ x ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="38583787" ParentId="919" UserId="4196" Date="03/25/2014 16:05:27" Content="If you can make the suggested changes this week,  you contribution will make it into the next version of ggplot2." />
      <Message Id="38623591" ParentId="919" UserId="702394" Date="03/25/2014 21:32:02" Content="Thanks. I'll find some time to work on it." />
      <Message Id="111271954" ParentId="919" UserId="4196" Date="06/11/2015 20:38:03" Content="Unfortunately I've now completely gone off this idea - I'd rather people modified their code than modified their plots in this way." />
    </Messages>
  </Topic>
  <Topic Id="920" Title="set_geom_params: set a geom's parameters for an existing ggplot2 object">
    <Messages>
      <Message Id="0" ParentId="920" UserId="702394" Date="02/25/2014 17:29:36" Content="" />
      <Message Id="36034530" ParentId="920" UserId="702394" Date="02/25/2014 17:30:56" Content="Previously #750 " />
      <Message Id="36036938" ParentId="920" UserId="4196" Date="02/25/2014 17:52:21" Content="Would you mind combining with #919?" />
      <Message Id="36038171" ParentId="920" UserId="702394" Date="02/25/2014 18:03:28" Content="@hadley done. Closing this pull request." />
    </Messages>
  </Topic>
  <Topic Id="921" Title="First stub of a length scale">
    <Messages>
      <Message Id="0" ParentId="921" UserId="18445" Date="02/27/2014 16:37:00" Content="It can be used whenever fixed segment lengths are drawn. Examples are given &#xA;with geom_rug but it could also be used with a segment geom that would be &#xA;defined in terms of angle and length rather than in terms of beginning and end &#xA;coords.&#xA;&#xA;The remaining issue is the legend,  which currently just draws segments. It &#xA;should draw segments of lengths identical to the main plot but since the two &#xA;viewports (main plot and legend) do not have the same reference,  it is hard.&#xA;&#xA;Edit on 2014-02-27: rebased on head + latest version of roxygen" />
      <Message Id="37587976" ParentId="921" UserId="4196" Date="03/13/2014 21:17:35" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [ x ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="37810306" ParentId="921" UserId="18445" Date="03/17/2014 12:37:46" Content="BTW,  I'm not sure this one is ready to be pulled just yet. It is actually not functional since the legend does not work. Pull it only if you think it will get it more attention and might interest somebody in looking into this legend issue." />
      <Message Id="111271807" ParentId="921" UserId="4196" Date="06/11/2015 20:37:18" Content="Still interested in this?" />
      <Message Id="111287763" ParentId="921" UserId="18445" Date="06/11/2015 22:00:13" Content="Yes I would love to be able to plot arrow fields in ggplot using this but I have no idea how to fix the legend part." />
      <Message Id="113156127" ParentId="921" UserId="4196" Date="06/18/2015 13:30:12" Content="Ah,  ok - I think it's fundamentally impossible to draw a legend here because the length is measured in npc,  not a physical unit. Legends map elements in the data space to things in physical-graphics space,  so a legend here doesn't really make sense. (This is basically the same problem as having text automatically expand the axes).&#xD;&#xA;&#xD;&#xA;You could make this work by making the legend scale use physical coordinates (e.g. cm). The obvious disadvantage of this is that the appearance of the plot is not longer independent of its physical size (or even aspect ratio!). But I think this is a sacrifice you have to make if you want a legend.&#xD;&#xA;&#xD;&#xA;I'll leave it up to you to either close the PR or modify it to use the cm unit (or ask for more clarification if my explanation doesn't make sense)" />
    </Messages>
  </Topic>
  <Topic Id="922" Title="Quick approximation for map projections">
    <Messages>
      <Message Id="0" ParentId="922" UserId="18445" Date="02/27/2014 16:42:24" Content="Instead of reprojecting everything,  we just set the aspect ratio of the plot&#xA;to the ratio between the length of one degree of lat over one degree of lon.&#xA;&#xA;Edit on 2014-02-27: rebased on head + latest version of roxygen" />
      <Message Id="36271311" ParentId="922" UserId="18445" Date="02/27/2014 18:01:50" Content="Now passes `devtools::check()`. Should have tested before,  sorry. So you prefer one commit?" />
      <Message Id="37588200" ParentId="922" UserId="4196" Date="03/13/2014 21:19:35" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [   ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="38328631" ParentId="922" UserId="18445" Date="03/21/2014 21:55:11" Content="BTW,  this one is ready to be pulled I think.&#xD;&#xA;&#xD;&#xA;Examples:&#xD;&#xA;`coord_map`&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2488335/49d46cfa-b143-11e3-84c7-eab033caaf4e.png)&#xD;&#xA;`coord_quickmap`&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2488337/57e88510-b143-11e3-994a-e7ff4188110c.png)&#xD;&#xA;&#xD;&#xA;If there is one thing left I'd like to change it would be the suppress the minor grid as in `coord_map` but I have no idea how to do this from within a coord function." />
      <Message Id="38329184" ParentId="922" UserId="4196" Date="03/21/2014 22:02:14" Content="I wonder if it's worth noting that it's hard to see the difference between the two plots of NZ not because it's at a moderate latitude,  but because the base file is already very detailed.&#xD;&#xA;&#xD;&#xA;It might be worth plotting a rectangle bounding NZ to more clearly show the difference." />
      <Message Id="38366177" ParentId="922" UserId="18445" Date="03/22/2014 22:27:33" Content="I'm not sure it's about the details,  it's really about the latitude and the extent of the region.&#xD;&#xA;&#xD;&#xA;Here is the code with a bounding box:&#xD;&#xA;```&#xD;&#xA;if (require(&quot;maps&quot;)) { &#xD;&#xA;# Create a lat-long dataframe from the maps package&#xD;&#xA;nz &lt;- map_data(&quot;nz&quot;)&#xD;&#xA;# Compute the bounding box&#xD;&#xA;nz_bb &lt;- nz[ chull(nz[ , c(&quot;long&quot;, &quot;lat&quot;) ]),  ]&#xD;&#xA;# Prepare a plot of the map&#xD;&#xA;nzmap &lt;- ggplot(nz,  aes(x = long,  y = lat)) +&#xD;&#xA;  geom_polygon(data = nz_bb) + &#xD;&#xA;  geom_polygon(aes(group = group),  fill = &quot;white&quot;,  colour = &quot;black&quot;)&#xD;&#xA;&#xD;&#xA;# Plot it in cartesian coordinates&#xD;&#xA;nzmap&#xD;&#xA;# With correct mercator projection&#xD;&#xA;nzmap + coord_map()&#xD;&#xA;# With the aspect ratio approximation&#xD;&#xA;nzmap + coord_quickmap()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;`coord_map`&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2492080/060dc470-b211-11e3-91b4-652386573db3.png)&#xD;&#xA;`coord_quickmap`&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2492081/0fefcf9c-b211-11e3-9c70-bb14464696e7.png)&#xD;&#xA;" />
      <Message Id="38373720" ParentId="922" UserId="4196" Date="03/23/2014 04:29:53" Content="I meant a rectangular bb so that you could see the difference. NZ might be a bad example but it'd be nice to have one" />
      <Message Id="38501744" ParentId="922" UserId="18445" Date="03/24/2014 21:12:36" Content="The difference is actually fairly small for anything under moderate latitudes. Even for the full US it's noticeable only for the northern states (that actually makes the functionality *more* appealing!). I guess it would show for northern canada or russia but this data is not in `maps` so it is difficult to make a self contained example." />
      <Message Id="38502024" ParentId="922" UserId="18445" Date="03/24/2014 21:15:03" Content="Example:&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2505420/5557594a-b399-11e3-94bd-0728e9630dd5.png)&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2505422/58a101e6-b399-11e3-9e45-05c0d992aeba.png)&#xD;&#xA;" />
      <Message Id="38502548" ParentId="922" UserId="18445" Date="03/24/2014 21:19:47" Content="Would that be better?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;northern &lt;- map_data(&quot;world&quot;)&#xD;&#xA;northern &lt;- northern[ northern$lat &gt; 50 &amp; northern$lat &lt; 80,  ]&#xD;&#xA;northernmap &lt;- ggplot(northern,  aes(x = long,  y = lat,  group = group)) +&#xD;&#xA;  geom_path()&#xD;&#xA;northernmap + ggtitle(&quot;raw&quot;)&#xD;&#xA;northernmap + coord_map() + ggtitle(&quot;coord_map&quot;)&#xD;&#xA;northernmap + coord_quickmap() + ggtitle(&quot;coord_quickmap&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2505482/f1988f40-b399-11e3-99e3-8ffcc71903e6.png)&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2505484/f64d1ace-b399-11e3-8579-e7b5f8dce21d.png)&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2505486/fa1b8e7e-b399-11e3-9531-860f8d1b3ff8.png)&#xD;&#xA;&#xD;&#xA;But `coord_map` has problems here..." />
      <Message Id="38582770" ParentId="922" UserId="4196" Date="03/25/2014 15:58:58" Content="Yeah,  doesn't seem to be an easy way to generate a nice example,  so lets not worry about it." />
      <Message Id="38633683" ParentId="922" UserId="18445" Date="03/25/2014 23:21:45" Content="Great. Thanks for merging it! It'll be useful to be able to use this one for one class in which we produce a lot of tiled maps which `coord_map` made very long to plot and with (very thin but noticeable) white space showing between the tiles." />
    </Messages>
  </Topic>
  <Topic Id="923" Title="New themes that do not overwrite existing ones">
    <Messages>
      <Message Id="0" ParentId="923" UserId="18445" Date="02/27/2014 17:27:04" Content="" />
      <Message Id="37588313" ParentId="923" UserId="4196" Date="03/13/2014 21:20:38" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="37588354" ParentId="923" UserId="4196" Date="03/13/2014 21:21:04" Content="Maybe all themes should be documented in one file?  Or at least have `@family theme`. Would you mind adding that?" />
      <Message Id="37810192" ParentId="923" UserId="18445" Date="03/17/2014 12:36:01" Content="I also think all themes should be documented in one place. It'll be easier to show the differences. I could do it but I don't want to do it in this PR (I don't think it's the place). Once you've pulled this I'll start a new branch off master and do it there,  if that's OK for you." />
      <Message Id="37818932" ParentId="923" UserId="4196" Date="03/17/2014 14:09:13" Content="Makes sense. I'll merge this after you've made the requested small changes." />
      <Message Id="37868269" ParentId="923" UserId="18445" Date="03/17/2014 20:50:12" Content="I thought I pushed before writing my last comment but it wasn't the case. The small fixes are now online." />
      <Message Id="37875425" ParentId="923" UserId="4196" Date="03/17/2014 21:50:24" Content="Thanks!" />
      <Message Id="37887935" ParentId="923" UserId="18445" Date="03/18/2014 00:31:42" Content="Here is the new one: #933 ;)" />
    </Messages>
  </Topic>
  <Topic Id="924" Title="Allow to reverse the order of colours in a brewer palette">
    <Messages>
      <Message Id="0" ParentId="924" UserId="18445" Date="02/27/2014 17:29:09" Content="Use the same argument that scale_*_hue uses: direction" />
      <Message Id="36269600" ParentId="924" UserId="18445" Date="02/27/2014 17:46:50" Content="I kept the pull-request separated but I am not sure how this one will interact with #925. Please pull the other first,  because it is larger. I will rebase this one if necessary." />
      <Message Id="36271165" ParentId="924" UserId="18445" Date="02/27/2014 18:00:38" Content="The CI fails because it requires an updated version of scales which has the direction argument in brewer_pal" />
      <Message Id="37811755" ParentId="924" UserId="18445" Date="03/17/2014 12:56:20" Content="NB: an example in #925 uses this functionality. It won't fail but the output would be the same. This does not have to be pulled first but it would be best to pull the two together." />
      <Message Id="37813393" ParentId="924" UserId="18445" Date="03/17/2014 13:15:52" Content="EDIT later today: actually it's using `trans = &quot;reverse&quot;`,  not `direction` so it's fine. Still the two are touching the same file and will surely conflict. Pull one and I'll rebase the other afterwards. This one is simpler so I would pull #925 first and I'll rebase this one afterwards (I'll probably alter the example to use `direction` too." />
      <Message Id="38298125" ParentId="924" UserId="18445" Date="03/21/2014 17:01:36" Content="Rebased on master and acknowledge the existence of `scale_*_distiller` now. Should be ready to pull (but the corresponding PR in scales https://github.com/hadley/scales/pull/36 should be pulled simultaneously)." />
      <Message Id="38298479" ParentId="924" UserId="18445" Date="03/21/2014 17:04:49" Content="Forgot the NEWS,  *now* it's ready to be pulled ;)" />
      <Message Id="38306443" ParentId="924" UserId="4196" Date="03/21/2014 18:17:17" Content="I might keep this on the shelf for now,  because I'd rather not have to also release scales." />
      <Message Id="46326550" ParentId="924" UserId="18445" Date="06/17/2014 15:54:43" Content="Any chance of including this here and in scales,  now that a new version of ggplot2 is out,  so that it would make it with the next version of ggplot2 + scales? Most diverging palettes of colorbrewer as useless without it because they associate warm colours to low numbers.&#xD;&#xA;&#xD;&#xA;Thanks in advance." />
      <Message Id="111271746" ParentId="924" UserId="4196" Date="06/11/2015 20:37:04" Content="Can you please merge/rebase?  If it still needs the dev version of scales,  can you please update the DESCRIPTION?" />
      <Message Id="111302679" ParentId="924" UserId="18445" Date="06/11/2015 23:07:06" Content="Ideally,  I would need you to pull #1076 first. Then I'll rebase (or more probably just completely rewrite) this on top of it. The changes in `scales` are minimal (https://github.com/hadley/scales/pull/36) but should be released in order for this to not depend on a dev version of scales,  which is probably unsuitable.&#xD;&#xA;&#xD;&#xA;Do you plan on releasing scales also?" />
      <Message Id="111308452" ParentId="924" UserId="4196" Date="06/11/2015 23:49:35" Content="I'm planning on releasing scales tomorrow. " />
      <Message Id="113156232" ParentId="924" UserId="4196" Date="06/18/2015 13:30:46" Content="Can you please finish this off now that scales is out? You'll need to add an explicit version requirement in the DESCRIPTION" />
      <Message Id="113170636" ParentId="924" UserId="18445" Date="06/18/2015 14:18:23" Content="#1139 replaces this one (much simpler thanks to the change in scales and branches from a recent master)" />
    </Messages>
  </Topic>
  <Topic Id="925" Title="Rebased version of continuous brewer color scales">
    <Messages>
      <Message Id="0" ParentId="925" UserId="18445" Date="02/27/2014 17:45:09" Content="" />
      <Message Id="37588556" ParentId="925" UserId="4196" Date="03/13/2014 21:23:02" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [ x ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="37588637" ParentId="925" UserId="4196" Date="03/13/2014 21:23:44" Content="I should say,  by and large all these pull requests look great - thanks!  And please let me know what you think of the new process." />
      <Message Id="37812777" ParentId="925" UserId="18445" Date="03/17/2014 13:08:05" Content="You're welcome. I think the new process is good. It's a bit more work for submitters of course but ensures better quality in the final code. It really makes it necessary to have a feature branche per pull-request though. You may want to emphasise this even more in the wiki/doc.&#xD;&#xA;&#xD;&#xA;I like the checklist! Is that automated?" />
      <Message Id="38293009" ParentId="925" UserId="4196" Date="03/21/2014 16:16:36" Content="It's not automated,  it just reminds me the things that I need to check.&#xD;&#xA;&#xD;&#xA;Have you seen the new development vignette? It tries to lay out the best practices,  like using a branch per request." />
      <Message Id="38295841" ParentId="925" UserId="18445" Date="03/21/2014 16:41:21" Content="I don't remember seeing the vignette,  just some indication on the wiki. The vignette is indeed ~ how I do it and it works great.&#xD;&#xA;Maybe the info there https://github.com/hadley/ggplot2/wiki/Improving-the-ggplot2-documentation#a-bigger-commitment should just point to that." />
    </Messages>
  </Topic>
  <Topic Id="926" Title="Feature/stat ellipse">
    <Messages>
      <Message Id="0" ParentId="926" UserId="178755" Date="02/27/2014 18:03:10" Content="Basically #878,  but merged commits from master." />
      <Message Id="37589029" ParentId="926" UserId="4196" Date="03/13/2014 21:27:29" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [   ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="37700346" ParentId="926" UserId="178755" Date="03/14/2014 21:50:02" Content="I think I've hit the major points.&#xD;&#xA;- Added a brief paragraph to NEWS&#xD;&#xA;- Cleaned up the style&#xD;&#xA;- Rolled back the changes to `.Rbuildignore`&#xD;&#xA;- Refactored code so that the ellipse calculation is done by a separate function,  `calculate_ellipse()`.&#xD;&#xA;- Included reference to the `car` package." />
      <Message Id="37761367" ParentId="926" UserId="4196" Date="03/16/2014 16:17:14" Content="Looks good - thanks!" />
      <Message Id="37761367" ParentId="926" UserId="4196" Date="03/16/2014 16:17:14" Content="Looks good - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="927" Title="Add parameter &quot;varwidth&quot; to geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="927" UserId="1840074" Date="02/27/2014 19:49:45" Content="Resubmitting #900 (after rebasing against master and re-documenting with the development &#xD;&#xA;version of roxygen2 (4.0.0)).&#xD;&#xA;&#xD;&#xA;Summary: stat-boxplot and geom-boxplot enriched in order to enable displaying boxplots of width proportional to the square root of the number of observations,  possibly weighted." />
      <Message Id="37589289" ParentId="927" UserId="4196" Date="03/13/2014 21:29:53" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add test,  if bug in non-graphical function&#xD;&#xA;* [   ] Add visual test,  if bug in graphical function&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="38583856" ParentId="927" UserId="4196" Date="03/25/2014 16:05:56" Content="If you can make the suggested changes this week,  you contribution will make it into the next version of ggplot2." />
      <Message Id="38621495" ParentId="927" UserId="1840074" Date="03/25/2014 21:13:00" Content="Thanks! &#xD;&#xA;Hopefully,  I addressed all your suggestions." />
      <Message Id="38705044" ParentId="927" UserId="4196" Date="03/26/2014 16:21:42" Content="Thanks,  it's now in." />
    </Messages>
  </Topic>
  <Topic Id="928" Title="Try out difftron for visual diffs">
    <Messages>
      <Message Id="0" ParentId="928" UserId="4196" Date="03/04/2014 17:52:38" Content="https://difftron.com/" />
    </Messages>
  </Topic>
  <Topic Id="929" Title="stat_summary fun.data">
    <Messages>
      <Message Id="0" ParentId="929" UserId="398411" Date="03/06/2014 05:02:45" Content="I'm confused about how `stat_summary` is supposed to work. The documentation claims that a data frame is passed as input,  and it's expected to return a data frame. However,  when I write my own and print the contents of the input parameter,  I get just the `y` vector:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;test &lt;- function(y) {  print(y)  }&#xD;&#xA;ggplot(...)+stat_summary(fun.data=test,  geom=&quot;text&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;This made more sense when I looked here: https://github.com/hadley/ggplot2/blob/master/R/stat-summary.r#L128 and saw that it was just passing `df$y`.&#xD;&#xA;&#xD;&#xA;Am I missing something? What is the correct way to use `fun.data`?&#xD;&#xA;&#xD;&#xA;Thanks." />
      <Message Id="41044450" ParentId="929" UserId="4196" Date="04/22/2014 14:15:45" Content="I think the documentation is wrong - the function only gets a single vector,  but it can _return_ a data frame. " />
      <Message Id="41211327" ParentId="929" UserId="398411" Date="04/23/2014 20:36:24" Content="Okay thanks for the clarification. It would be more useful (for my use case) to receive the full data frame. But perhaps a new interface that doesn't break existing uses." />
    </Messages>
  </Topic>
  <Topic Id="930" Title="Error when transforming a scale gives and infinite value">
    <Messages>
      <Message Id="0" ParentId="930" UserId="18445" Date="03/07/2014 10:53:53" Content="Example with `log10` and `limits=c(0, 1)`&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;set.seed(12)&#xD;&#xA;d &lt;- data.frame(x=runif(4),  y=runif(4))&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(trans=&quot;log10&quot;)&#xD;&#xA;&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(trans=&quot;log10&quot;,  limits=c(0, 1))&#xD;&#xA;# Error in seq.default(min,  max,  by = by) : &#xD;&#xA;#   'from' cannot be NA,  NaN or infinite&#xD;&#xA;traceback()&#xD;&#xA;# 18: stop(&quot;'from' cannot be NA,  NaN or infinite&quot;)&#xD;&#xA;# 17: seq.default(min,  max,  by = by)&#xD;&#xA;# 16: seq(min,  max,  by = by)&#xD;&#xA;# 15: scale$trans$breaks(limits)&#xD;&#xA;# 14: scale_breaks.continuous(scale,  range)&#xD;&#xA;# 13: scale_breaks(scale,  range)&#xD;&#xA;# 12: scale_break_info.continuous(scale,  range)&#xD;&#xA;# 11: scale_break_info(scale,  range)&#xD;&#xA;# 10: train_cartesian(scales$x,  coord$limits$x,  &quot;x&quot;)&#xD;&#xA;# 9: coord_train.cartesian(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;# 8: coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;# 7: (function (ix,  iy) &#xD;&#xA;#    { &#xD;&#xA;#        coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;#     })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA;# 6: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA;# 5: Map(compute_range,  panel$layout$SCALE_X,  panel$layout$SCALE_Y)&#xD;&#xA;# 4: train_ranges(panel,  plot$coordinates)&#xD;&#xA;# 3: ggplot_build(x)&#xD;&#xA;# 2: print.ggplot(list(data = list(x = c(0.11024801642634,  0.979492706246674,  &#xD;&#xA;#    0.341501814313233,  0.146122828824446),  y = c(0.0155730706173927,  &#xD;&#xA;#    0.201998081523925,  0.279258469119668,  0.828579724766314)),  layers = list(&#xD;&#xA;#        &lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  mapping = list(),  &#xD;&#xA;#        theme = list(),  coordinates = list(limits = list(x = NULL,  &#xD;&#xA;#            y = NULL)),  facet = list(shrink = TRUE),  plot_env = &lt;environment&gt;,  &#xD;&#xA;#        labels = list(x = &quot;x&quot;,  y = &quot;y&quot;)))&#xD;&#xA;# 1: print(list(data = list(x = c(0.11024801642634,  0.979492706246674,  &#xD;&#xA;#    0.341501814313233,  0.146122828824446),  y = c(0.0155730706173927,  &#xD;&#xA;#    0.201998081523925,  0.279258469119668,  0.828579724766314)),  layers = list(&#xD;&#xA;#        &lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  mapping = list(),  &#xD;&#xA;#        theme = list(),  coordinates = list(limits = list(x = NULL,  &#xD;&#xA;#            y = NULL)),  facet = list(shrink = TRUE),  plot_env = &lt;environment&gt;,  &#xD;&#xA;#        labels = list(x = &quot;x&quot;,  y = &quot;y&quot;)))&#xD;&#xA;&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) +&#xD;&#xA;  scale_x_continuous(trans=&quot;log10&quot;,  limits=c(0.001, 1))&#xD;&#xA;# -&gt; works&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Of course,  the same happens when supplying `-Inf` with no transformation (but that's less likely to happen)&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(limits=c(-Inf, 1))&#xD;&#xA;# Error in seq.default(from = best$lmin,  to = best$lmax,  by = best$lstep) : &#xD;&#xA;#   'from' must be of length 1&#xD;&#xA;traceback()&#xD;&#xA;# 19: stop(&quot;'from' must be of length 1&quot;)&#xD;&#xA;# 18: seq.default(from = best$lmin,  to = best$lmax,  by = best$lstep)&#xD;&#xA;# 17: seq(from = best$lmin,  to = best$lmax,  by = best$lstep)&#xD;&#xA;# 16: extended(min(x),  max(x),  n,  only.loose = FALSE,  ...)&#xD;&#xA;# 15: scale$trans$breaks(limits)&#xD;&#xA;# 14: scale_breaks.continuous(scale,  range)&#xD;&#xA;# 13: scale_breaks(scale,  range)&#xD;&#xA;# 12: scale_break_info.continuous(scale,  range)&#xD;&#xA;# 11: scale_break_info(scale,  range)&#xD;&#xA;# 10: train_cartesian(scales$x,  coord$limits$x,  &quot;x&quot;)&#xD;&#xA;# 9: coord_train.cartesian(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;One used to be able to specify a non-valid limit (NA,  Inf,  ...) and that would me &quot;No limit on that side,  just use the data&quot; (I think). This was practical (and would probably solve that bug). In the code,  I see a warning about providing NA to breaks and labels but nothing for limits. And indeed:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(limits=c(NA, 1))&#xD;&#xA;# Error in if (zero_range(range)) {  : missing value where TRUE/FALSE needed&#xD;&#xA;&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(limits=c(NULL, 1))&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(trans=&quot;log10&quot;,  limits=c(NULL, 1))&#xD;&#xA;# -&gt; works but no point on the plot anymore&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The bug is also there when the transformation of breaks gives `Inf`&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(d) + geom_point(aes(x,  y)) + scale_x_continuous(trans=&quot;log10&quot;,  breaks=c(0, 0.5,  1))&#xD;&#xA;# Error in seq.default(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ]) : &#xD;&#xA;#   'from' cannot be NA,  NaN or infinite&#xD;&#xA;traceback()&#xD;&#xA;# 20: stop(&quot;'from' cannot be NA,  NaN or infinite&quot;)&#xD;&#xA;# 19: seq.default(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ])&#xD;&#xA;# 18: (function (...) &#xD;&#xA;#     UseMethod(&quot;seq&quot;))(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ])&#xD;&#xA;# 17: mapply(seq,  b[ -length(b) ],  b[ -1 ],  length = n + 1,  SIMPLIFY = FALSE)&#xD;&#xA;# 16: unlist(mapply(seq,  b[ -length(b) ],  b[ -1 ],  length = n + 1,  SIMPLIFY = FALSE))&#xD;&#xA;# 15: unique(unlist(mapply(seq,  b[ -length(b) ],  b[ -1 ],  length = n + &#xD;&#xA;#         1,  SIMPLIFY = FALSE)))&#xD;&#xA;# 14: scale_breaks_minor.continuous(scale,  b = major,  limits = range)&#xD;&#xA;# 13: scale_breaks_minor(scale,  b = major,  limits = range)&#xD;&#xA;# 12: scale_break_info.continuous(scale,  range)&#xD;&#xA;# 11: scale_break_info(scale,  range)&#xD;&#xA;# 10: train_cartesian(scales$x,  coord$limits$x,  &quot;x&quot;)&#xD;&#xA;# 9: coord_train.cartesian(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;...&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I've looked into it but I cannot figure how to fix it. I am not even sure wether that should be dealt with within `ggplot2` or `scales`.&#xD;&#xA;&#xD;&#xA;Ideally,  getting Inf,  NA or NULL as one of the limit should fall back to computing the limit with the usual algorithm on that side (i.e. min or max + expand factor)." />
      <Message Id="43619963" ParentId="930" UserId="1115020" Date="05/20/2014 12:41:20" Content="I believe the following code fails because of the same problem.&#xD;&#xA;```&#xD;&#xA;&gt; ggplot(aes(x=x, y=y),  data=data.frame(x=0:5,  y=0:5)) + scale_x_log10() + geom_point()&#xD;&#xA;&gt; ggplot(aes(x=x, y=y),  data=data.frame(x=0:5,  y=0:5)) + scale_x_log10() + geom_point() + geom_smooth()&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;Error in seq.default(range[ 1 ],  range[ 2 ],  length = n) : &#xD;&#xA;  'from' cannot be NA,  NaN or infinite&#xD;&#xA;```&#xD;&#xA;First plot is fine; second fails." />
    </Messages>
  </Topic>
  <Topic Id="931" Title="Added links to element_* under @seealso.">
    <Messages>
      <Message Id="0" ParentId="931" UserId="3592346" Date="03/11/2014 13:29:25" Content="For improved navigation in help,  I have added links to element_line,  element_rect and element_text to the @seealso section.&#xD;&#xA;I also added element_blank for completeness." />
      <Message Id="37589382" ParentId="931" UserId="4196" Date="03/13/2014 21:30:55" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="932" Title="Add position_jitterdodge">
    <Messages>
      <Message Id="0" ParentId="932" UserId="1976582" Date="03/12/2014 16:50:51" Content="Hi Hadley, &#xD;&#xA;&#xD;&#xA;See some of my comments inline -- I need your input to tidy things up." />
      <Message Id="37589841" ParentId="932" UserId="4196" Date="03/13/2014 21:35:21" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [   ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [ x ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="37589896" ParentId="932" UserId="4196" Date="03/13/2014 21:35:57" Content="Worth reviewing interaction with #927" />
      <Message Id="38580715" ParentId="932" UserId="4196" Date="03/25/2014 15:46:01" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="933" Title="Document all themes together">
    <Messages>
      <Message Id="0" ParentId="933" UserId="18445" Date="03/18/2014 00:27:11" Content="Add a slightly more detailed description of the themes and a few words&#xA;about their intent. Add examples to ease comparison." />
      <Message Id="37887682" ParentId="933" UserId="18445" Date="03/18/2014 00:27:58" Content="I'm not sure about the documentation of the &quot;intent&quot; of each theme. Please feel free to ask for any change." />
      <Message Id="37887748" ParentId="933" UserId="18445" Date="03/18/2014 00:28:58" Content="Also,  shouldn't `theme_minimal` have no grid lines either? (it is what I would expect from a theme with no &quot;background annotations&quot;)." />
      <Message Id="37887869" ParentId="933" UserId="18445" Date="03/18/2014 00:30:55" Content="Finally,  I really find the facet strips in `theme_bw` and `theme_minimal` quite inelegant,  not fitting with the rest of ggplot. The examples make that clearer. Couldn't that,  at least,  be &quot;fixed&quot; by removing either the fill or the outline depending on the theme?" />
      <Message Id="37928875" ParentId="933" UserId="4196" Date="03/18/2014 12:55:08" Content="This looks like it would be a perfect use case for the new `@describeIn` tag. e.g. in `theme_grey()`,  put `#' @describeIn ggtheme The signature ggplot2 theme with a grey background ...`" />
      <Message Id="37928921" ParentId="933" UserId="4196" Date="03/18/2014 12:55:36" Content="I'm happy for tweaks to `theme_bw()` and `theme_minimal()` but they'll need to be carefully thought out to avoid breaking existing expectation." />
      <Message Id="38293709" ParentId="933" UserId="18445" Date="03/21/2014 16:22:28" Content="The documentation is now done.&#xD;&#xA;I've put the tweaks to themes in a separate pull-request #934 ." />
      <Message Id="38294001" ParentId="933" UserId="4196" Date="03/21/2014 16:24:48" Content="Thanks!" />
      <Message Id="38294001" ParentId="933" UserId="4196" Date="03/21/2014 16:24:48" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="934" Title="Small (but important) improvement to some themes">
    <Messages>
      <Message Id="0" ParentId="934" UserId="18445" Date="03/21/2014 16:16:56" Content="" />
      <Message Id="38293847" ParentId="934" UserId="18445" Date="03/21/2014 16:23:26" Content="Cosmetic tweaks to `theme_bw()` and `theme_classic()`.&#xD;&#xA;&#xD;&#xA;I haven't removed the grid in `theme_minimal()` as initially planned because it might break people expectation too much..." />
      <Message Id="38295996" ParentId="934" UserId="18445" Date="03/21/2014 16:42:39" Content="No idea why it is closed... Reopening" />
      <Message Id="38296181" ParentId="934" UserId="4196" Date="03/21/2014 16:44:11" Content="Would you mind generating a couple of before and after shots for me?" />
      <Message Id="38298907" ParentId="934" UserId="18445" Date="03/21/2014 17:08:54" Content="Before&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2485617/3b187c88-b11b-11e3-9e9d-615d3ac896ec.png)&#xD;&#xA;After&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2485629/66189f30-b11b-11e3-8646-7a6e6be9f6f7.png)&#xD;&#xA;&#xD;&#xA;Before&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2485620/49ec8ae2-b11b-11e3-9654-1ea976b4713d.png)&#xD;&#xA;After&#xD;&#xA;![ image ](https://f.cloud.github.com/assets/18445/2485626/61304018-b11b-11e3-9247-ba19fe9d47ac.png)&#xD;&#xA;" />
      <Message Id="38299377" ParentId="934" UserId="4196" Date="03/21/2014 17:13:19" Content="Can you mention this PR number in the news? " />
      <Message Id="38299900" ParentId="934" UserId="18445" Date="03/21/2014 17:18:09" Content="Done&#xD;&#xA;&#xD;&#xA;PS: The copy-from-R-graphic-window and paste-inside-github functionality is fantastic!" />
    </Messages>
  </Topic>
  <Topic Id="935" Title="fix detection if an aesthetic is calculated">
    <Messages>
      <Message Id="0" ParentId="935" UserId="1741643" Date="03/23/2014 23:15:50" Content="- variables can also appear as part of an expression&#xD;&#xA;    - detection of identifier limits is performed using lookarounds and Perl&#xD;&#xA;      regular expressions&#xD;&#xA;- fix glitch in character range&#xD;&#xA;- remove unneeded local variable&#xD;&#xA;- add test&#xD;&#xA;&#xD;&#xA;Improves #917." />
    </Messages>
  </Topic>
  <Topic Id="936" Title="Update save.r">
    <Messages>
      <Message Id="0" ParentId="936" UserId="50784" Date="03/24/2014 20:35:51" Content="The parameter is called &quot;filename&quot;,  but the examples use &quot;file&quot;." />
      <Message Id="38580445" ParentId="936" UserId="4196" Date="03/25/2014 15:44:08" Content="Since `filename` is the first argument,  I think it would be better style to drop the name altogether." />
      <Message Id="38631095" ParentId="936" UserId="50784" Date="03/25/2014 22:48:02" Content="I just made that change,  and also made the parameter order in the examples the same as the function definition.  " />
      <Message Id="38704227" ParentId="936" UserId="4196" Date="03/26/2014 16:15:47" Content="Thanks!" />
      <Message Id="38710644" ParentId="936" UserId="50784" Date="03/26/2014 17:05:09" Content="Neat!  I've been using ggplot2 for over a year and really enjoy it.  It never occured to me that I might one day make a contribution to it." />
    </Messages>
  </Topic>
  <Topic Id="937" Title="stat_ingroup">
    <Messages>
      <Message Id="0" ParentId="937" UserId="1847158" Date="03/28/2014 22:58:36" Content="I've long wanted something that yields proportions by group,  e.g. http://stackoverflow.com/questions/17655648/how-can-i-plot-the-relative-proportions-of-two-groups-using-a-fill-aesthetic-in.   As far as I can tell this option still is not easily available.  It seems like a sensible enough plot to make when exploring the data,  and unfortunately people seem very prone to stumbling into a solution that looks sort-kinda right,  but isn't (e.g. http://stackoverflow.com/questions/17368223/ggplot2-multi-group-histogram-with-in-group-proportions-rather-than-frequency and http://stackoverflow.com/questions/22181132/normalizing-y-axis-in-histograms-in-r-ggplot-to-proportion-by-group).&#xD;&#xA;&#xD;&#xA;I think the result I'm talking about can be achieved by simply changing&#xD;&#xA;```&#xD;&#xA;results &lt;- data.frame(count = as.numeric(tapply(weight,  bins,  &#xD;&#xA;        sum,  na.rm = TRUE)),  x = x,  width = width)&#xD;&#xA;```&#xD;&#xA;in ggplot2:::bin with...&#xD;&#xA;```&#xD;&#xA;count &lt;- as.numeric(tapply(weight,  bins,  sum,  na.rm=TRUE))&#xD;&#xA;results &lt;- data.frame(&#xD;&#xA;   count = count, &#xD;&#xA;   groupsum= sum(count), &#xD;&#xA;   groupprop=sumcount/sum(count)), &#xD;&#xA;   x = x, &#xD;&#xA;   width = width&#xD;&#xA;)&#xD;&#xA;```" />
      <Message Id="38977401" ParentId="937" UserId="1847158" Date="03/28/2014 23:10:35" Content="I see that the width parameter will get passed through and adjust the binwidth to yield a right result (with a graphical side-effect),  but the binwidth argument itself in geom_bar with stat=&quot;bin&quot; seems silently ineffectual.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="41044259" ParentId="937" UserId="4196" Date="04/22/2014 14:14:07" Content="I think it's better to do this sort of manipulation outside of ggplot2. Otherwise it's hard to tell if ggplot2 has made a mistake." />
    </Messages>
  </Topic>
  <Topic Id="938" Title="do not stop for non-standard theme options">
    <Messages>
      <Message Id="0" ParentId="938" UserId="932850" Date="03/31/2014 19:37:57" Content="as of ggplot2-0.9.3.1,  I get an error when I use non-standard theme options e.g.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; theme(animint.width=500)&#xD;&#xA;Error in (function (el,  elname)  : &#xD;&#xA;  &quot;animint.width&quot; is not a valid theme element name.&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;For animint it would be nice to define some plot-specific info in the ggplot theme... could you please accept and save non-standard theme options?" />
      <Message Id="41044072" ParentId="938" UserId="4196" Date="04/22/2014 14:12:46" Content="The downside of doing this is that we wouldn't be able to throw informative errors when the user mispelled a theme name,  or provided an incorrect element type." />
      <Message Id="41047208" ParentId="938" UserId="932850" Date="04/22/2014 14:36:51" Content="That makes sense. It is always nice to have informative error messages.&#xD;&#xA;&#xD;&#xA;Another option is to keep theme() the same as it is now,  and use another function to declare non-standard theme options,  e.g.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; theme_animint(width=500)&#xD;&#xA;List of 1&#xD;&#xA; $ animint.width: num 500&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;novalidate&quot; &quot;theme&quot; &quot;gg&quot;&#xD;&#xA; - attr(*,  &quot;complete&quot;)= logi FALSE&#xD;&#xA;&gt; ggplot()+theme_animint(width=500)&#xD;&#xA;Error in (function (el,  elname)  : &#xD;&#xA;  &quot;animint.width&quot; is not a valid theme element name.&#xD;&#xA;&gt; traceback()&#xD;&#xA;8: stop(&quot;\&quot;&quot;,  elname,  &quot;\&quot; is not a valid theme element name.&quot;)&#xD;&#xA;7: (function (el,  elname) &#xD;&#xA;   { &#xD;&#xA;       eldef &lt;- .element_tree[ [ elname ] ]&#xD;&#xA;       if (is.null(eldef)) { &#xD;&#xA;           stop(&quot;\&quot;&quot;,  elname,  &quot;\&quot; is not a valid theme element name.&quot;)&#xD;&#xA;        }&#xD;&#xA;       if (is.null(el)) &#xD;&#xA;           return()&#xD;&#xA;       if (eldef$class == &quot;character&quot;) { &#xD;&#xA;           if (!is.character(el) &amp;&amp; !is.numeric(el)) &#xD;&#xA;               stop(&quot;Element &quot;,  elname,  &quot; must be a string or numeric vector.&quot;)&#xD;&#xA;        }&#xD;&#xA;       else if (!inherits(el,  eldef$class) &amp;&amp; !inherits(el,  &quot;element_blank&quot;)) { &#xD;&#xA;           stop(&quot;Element &quot;,  elname,  &quot; must be a &quot;,  eldef$class,  &#xD;&#xA;               &quot; object.&quot;)&#xD;&#xA;        }&#xD;&#xA;       invisible()&#xD;&#xA;    })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA;6: mapply(validate_element,  elements,  names(elements))&#xD;&#xA;5: (function (...,  complete = FALSE) &#xD;&#xA;   { &#xD;&#xA;       elements &lt;- list(...)&#xD;&#xA;       mapply(validate_element,  elements,  names(elements))&#xD;&#xA;       structure(elements,  class = c(&quot;theme&quot;,  &quot;gg&quot;),  complete = complete)&#xD;&#xA;    })(animint.width = NULL,  complete = FALSE)&#xD;&#xA;4: do.call(theme,  c(oldtheme,  complete = isTRUE(attr(oldtheme,  &quot;complete&quot;))))&#xD;&#xA;3: update_theme(p$theme,  object)&#xD;&#xA;2: add_ggplot(e1,  e2,  e2name)&#xD;&#xA;1: `+.gg`(ggplot(),  theme_animint(width = 500))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;https://github.com/tdhock/animint/blob/master/R/theme.R&#xD;&#xA;&#xD;&#xA;The theme_animint function is defined without using validate_element,  which I thought would bypass the theme element name checking. Instead,  I noticed that validate_element is still called,  when the theme element is added to the ggplot. I defined a custom &quot;novalidate&quot; class for these theme elements. Could you please not call validate_element for theme elements with the &quot;novalidate&quot; class?&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; inherits(theme_animint(width=500),  &quot;novalidate&quot;)&#xD;&#xA;[ 1 ] TRUE&#xD;&#xA;&gt; inherits(theme(panel.margin=grid::unit(0, &quot;cm&quot;)),  &quot;novalidate&quot;)&#xD;&#xA;[ 1 ] FALSE&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="939" Title="file extension parameter for ggsave() to allow device specification for files without extension">
    <Messages>
      <Message Id="0" ParentId="939" UserId="5498966" Date="04/07/2014 00:32:18" Content="Thank you for the fantastic ggplots package!&#xD;&#xA;  &#xD;&#xA;This is a suggested implementation for specifying a file extension in ```ggsave``` to allow device matching (pdf,  png,  jpg,  etc.) for filenames without extension. The suggestion is motivated by the problem of using ggsave in a shinyApp for letting the user download a plot (for example addressed on StackOverflow here: http://stackoverflow.com/questions/14810409/save-plots-made-in-a-shiny-app). Because the shiny server provides a temporary file without extension,  ggsave can't match to any of the internally defined device functions. I'm not aware of a currently available solution to this problem and although there are several work-arounds,  I like the simplicity of ggsave and wanted to suggest this solution (not sure if it's the best way to do it,  but it's the most elegant I could think of). This would allow use of ```ggsave``` for a shinyApp ```downloadHandler``` like so:&#xD;&#xA;  &#xD;&#xA;  ```coffee&#xD;&#xA;# In ui.R:&#xD;&#xA;downloadLink('downloadPlot',  'Download')&#xD;&#xA;&#xD;&#xA;# In server.R:&#xD;&#xA;output$downloadPlot &lt;- downloadHandler(&#xD;&#xA;  filename = &quot;myplot.pdf&quot;, &#xD;&#xA;  content = function(file) { &#xD;&#xA;    ggsave(file,  plot = qplot(speed,  dist,  data = cars),  ext = &quot;pdf&quot;)&#xD;&#xA;   }&#xD;&#xA;)&#xD;&#xA;```&#xD;&#xA;I'm relatively new to GitHub and this is my second contribution to someone else's project,  please forgive if I'm missing some specific conventions or etiquette about forking/pull requests.&#xD;&#xA;&#xD;&#xA;Sebastian&#xD;&#xA;" />
      <Message Id="39802368" ParentId="939" UserId="463252" Date="04/08/2014 01:18:15" Content="What advantage does this approach have over passing this information as the `device` argument?&#xD;&#xA;&#xD;&#xA;    ggsave(file,  plot = qplot(speed,  dist,  data=cars),  device = pdf)" />
      <Message Id="39807370" ParentId="939" UserId="5498966" Date="04/08/2014 03:03:02" Content="Hi Brian, &#xD;&#xA;I agree,  that would be great if it worked that way but it doesn't have the desired effect. ggsave will call the passed in pdf function directly rather than the wrapper defined within ggsave. This works out okay for pdf because the only parameter ggsave sets with the wrapper is ```version = &quot;1.4&quot;``` (my bad for poor choice of pdf in the sample code,  sorry). When you try the same with png or jpeg you run into trouble because now the ggsave wrapper does more:&#xD;&#xA;&#xD;&#xA;    ggsave(file,  plot = qplot(speed,  dist,  data=cars),  device = png)&#xD;&#xA;&#xD;&#xA;will save a png with tiny width and height because the default units are &quot;px&quot; and ggsave passes the parameters in inches. Instead,  a workaround requires specifying these parameters (```res``` and ```units```) in a separate wrapper (verbatim from ggsave):&#xD;&#xA;&#xD;&#xA;    png &lt;- function(...,  width,  height) { &#xD;&#xA;         grDevices::png(...,   width=width,  height=height,  res = 300,  units = &quot;in&quot;)&#xD;&#xA;     }&#xD;&#xA;    ggsave(file,  plot = qplot(speed,  dist,  data=cars),  device = png)&#xD;&#xA;&#xD;&#xA;This works just fine and I'm using this approach myself but it's not very intuitive. I'm happy to keep using this workaround but wanted to suggest the above solution in case you guys would be interested in a more intuitive implementation.&#xD;&#xA;&#xD;&#xA;Another way of doing it without introducing any extra parameters would be by allowing ```device = 'character'``` ('pdf',  'png',  'jpg',  etc.) in addition to ```device = function(...) {  }``` and simply adding this code block in ggsave:&#xD;&#xA;&#xD;&#xA;     if (is.character(device)) { &#xD;&#xA;          device &lt;- match.fun(device)&#xD;&#xA;      }&#xD;&#xA;&#xD;&#xA;which would make this work directly:&#xD;&#xA;&#xD;&#xA;    ggsave(file,  plot = qplot(speed,  dist,  data=cars),  device = 'png')&#xD;&#xA;&#xD;&#xA;What do you think? " />
      <Message Id="40416946" ParentId="939" UserId="463252" Date="04/14/2014 20:55:14" Content="Thanks for the explanation; you are right that passing the device function misses the `ggsave` defaults that get set when the device is set via the defaults based on filename extension. I like the idea of allowing `device` to be a character argument which is then matched to the (internal,  first) device functions better than the approach of adding a new parameter. But you can also wait to hear the opinion of an actual maintainer before making that change." />
      <Message Id="41043863" ParentId="939" UserId="4196" Date="04/22/2014 14:11:00" Content="* [   ] Motivate the change in one paragraph,  and include it in NEWS.&#xD;&#xA;      In parentheses,  reference your github user name and this issue:&#xD;&#xA;      `(@hadley,  #1234)`&#xD;&#xA;* [ x ] Check pull request only includes relevant changes.&#xD;&#xA;* [ x ] Use the [ official style ](http://adv-r.had.co.nz/Style.html).&#xD;&#xA;* [ x ] Update documentation and re-run roxygen2&#xD;&#xA;* [   ] Add minimal example,  if new graphical feature&#xD;&#xA;" />
      <Message Id="41043897" ParentId="939" UserId="4196" Date="04/22/2014 14:11:18" Content="Looks good. Can you please do the last two things listed above?" />
      <Message Id="41048565" ParentId="939" UserId="5498966" Date="04/22/2014 14:46:49" Content="Thanks Hadley,  can you clarify real quick if you prefer the implementation discussed with Brian above allowing ```device``` as a character argument (that can be matched against the internally defined device functions) rather than the new file extension parameter?&#xD;&#xA;&#xD;&#xA;I'm happy to implement the latter and file as a separate pull request (+NEWS) or stick with the current and include it in NEWS. Let me know,  thanks." />
      <Message Id="41049136" ParentId="939" UserId="4196" Date="04/22/2014 14:51:03" Content="Ok,  yeah,  I'd prefer `match.fun(device)`" />
      <Message Id="41245198" ParentId="939" UserId="5498966" Date="04/24/2014 05:58:12" Content="Sounds good,  I implemented it with ```match.fun(device)``` instead,  added an example in ```@examples``` and a line in the NEWS. Please let me know if there's anything else missing.&#xD;&#xA;&#xD;&#xA;Update: the Travis CI build is failing but it appears to be because of a syntax error elsewhere,  not in this pull request (see #949 for reference)" />
      <Message Id="43965738" ParentId="939" UserId="3012597" Date="05/23/2014 02:29:56" Content="I'm not really sure how to resubmit this pull request for Travis CI,  but it should build fine now. #949 fixed the error." />
      <Message Id="44610501" ParentId="939" UserId="5498966" Date="05/30/2014 03:04:10" Content="Yeah,  I didn't know how to do that (resubmit the request for Travis),  it builds just fine for me with #949 fixed. I'm happy to resubmit but the only way I can think of doing that is closing this pull request and creating a new one - is that the recommended approach?" />
      <Message Id="44717706" ParentId="939" UserId="463252" Date="05/31/2014 04:30:03" Content="According to this: http://stackoverflow.com/q/17606874/892313 it should be possible to trigger a new attempt at the build. But maybe Hadley (or one of the repo owners) has to do it because I don't see the triggering icon there." />
      <Message Id="54218186" ParentId="939" UserId="5498966" Date="09/02/2014 21:09:58" Content="Just a quick follow-up,  I think this feature could still be very useful to users judging from the traffic that the original post on stack overflow still receives ([ save-plots-made-in-a-shiny-app ](http://stackoverflow.com/questions/14810409/save-plots-made-in-a-shiny-app)).&#xD;&#xA;&#xD;&#xA;As far as I can tell,  all that's missing is a [ retriggering ](http://stackoverflow.com/questions/17606874/trigger-a-travis-ci-rebuild-without-pushing-a-commit) of the Travis CI build [ here ](https://travis-ci.org/hadley/ggplot2/builds/23649368) by a repo owner. @hadley could you help out with this? &#xD;&#xA;&#xD;&#xA;Alternatively,  I'm happy to close this pull request and create a new one for this feature if that's easier,  let me know." />
      <Message Id="111271629" ParentId="939" UserId="4196" Date="06/11/2015 20:36:19" Content="Just update this PR by merging/rebasing against master,  and re-pushing the branch to github." />
      <Message Id="113156342" ParentId="939" UserId="4196" Date="06/18/2015 13:31:06" Content="Are you still interested in this PR?" />
      <Message Id="113356529" ParentId="939" UserId="5498966" Date="06/19/2015 03:23:35" Content="Okay,  should be all ready to go now (including the requested .call = FALSE addition and some commit cleanup). Thanks for the reminder msg,  missed last week's while traveling. And thanks a lot for the rebasing hint to retrigger Travis CI build,  that's exactly what I was missing - learned something new again." />
      <Message Id="113468013" ParentId="939" UserId="4196" Date="06/19/2015 10:40:40" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="940" Title="`stat_function` catches errors without rethrowing">
    <Messages>
      <Message Id="0" ParentId="940" UserId="1149353" Date="04/09/2014 02:43:09" Content="If an error occurs in a function called by `stat_function` the error is written to the screen but no error is thrown in the sense that R continues along and there is no `.Traceback` or `last.dump` (if the option is set).&#xD;&#xA;&#xD;&#xA;A small example is below&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;reg_fn &lt;- function(argument) { &#xD;&#xA;        argmuent^2&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;plot_ &lt;- ggplot(data.frame(x = rnorm(10),  y = rnorm(10)),  aes(x,  y)) + geom_point() + stat_function(fun = reg_fn)&#xD;&#xA;print(plot_)&#xD;&#xA;&#xD;&#xA;print('we kept going')&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;which produces the output&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; source('example.R')&#xD;&#xA;Error in (function (argument)  : object 'argmuent' not found&#xD;&#xA;[ 1 ] &quot;we kept going&quot;&#xD;&#xA;&gt; &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Should an error be thrown?" />
      <Message Id="41043701" ParentId="940" UserId="4196" Date="04/22/2014 14:09:37" Content="This is a deliberate design decision so that stats can fail in some facets,  but work in others. It does making debugging a pain though :/" />
      <Message Id="41045472" ParentId="940" UserId="1149353" Date="04/22/2014 14:23:39" Content="OK,  thanks for the explanation. I suppose I could catch the output and parse for &quot;Error&quot;." />
    </Messages>
  </Topic>
  <Topic Id="941" Title="Documentation doesn't display \item correctly (at least in Value subsection)">
    <Messages>
      <Message Id="0" ParentId="941" UserId="416374" Date="04/12/2014 05:10:42" Content="See http://docs.ggplot2.org/current/stat_bin.html for example. In Value subsection of that page the text is currently as follows:&#xD;&#xA;&#xD;&#xA;New data frame with additional columns: countnumber of points in bin densitydensity of points in bin,  scaled to integrate to 1 ncountcount,  scaled to maximum of 1 ndensitydensity,  scaled to maximum of 1&#xD;&#xA;&#xD;&#xA;Clearly it should start something like this instead:&#xD;&#xA;&#xD;&#xA;New data frame with additional columns: &#xD;&#xA;* count: number of points in bin&#xD;&#xA;* density: density of points in bin,  scaled to integrate to 1 &#xD;&#xA;etc...." />
      <Message Id="41207056" ParentId="941" UserId="4196" Date="04/23/2014 19:57:18" Content="That's a duplicate of https://github.com/hadley/staticdocs/issues/54. I can't see an obvious way to fix it,  so it won't make it in for 1.0.0." />
    </Messages>
  </Topic>
  <Topic Id="942" Title="Documentation link to date_breaks is broken">
    <Messages>
      <Message Id="0" ParentId="942" UserId="379357" Date="04/13/2014 15:00:55" Content="Not sure this was the proper place to report,  but the fix should be easy.&#xD;&#xA;&#xD;&#xA;On the documentation for [ scale_x_datetime ](http://docs.ggplot2.org/0.9.3.1/scale_datetime.html),  the `breaks` documentation is like so:&#xD;&#xA;&#xD;&#xA;&gt;**breaks**&#xD;&#xA;A vector of breaks,  a function that given the scale limits returns a vector of breaks,  or a character vector,  specifying the width between breaks. For more information about the first two,  see continuous_scale,  for more information about the last,  see [ date_breaks ](http://www.inside-r.org/r-doc/scales/date_breaks)`.&#xD;&#xA;&#xD;&#xA;I think inside-r has redone their URL scheme,  so the link for `date_breaks` is dead.&#xD;&#xA;&#xD;&#xA;It should point [ here ](http://www.inside-r.org/packages/cran/ggplot2/docs/date_breaks) (at least,  it appears that's the analogous site on inside-r).&#xD;&#xA;&#xD;&#xA;---&#xD;&#xA;&#xD;&#xA;As an aside,  this still seems to be an issue since inside-r features the 0.8.9 documentation,  and I'm using time data so I thought to myself,  &quot;I wonder if there's an equivalent,  like `time_breaks`?&quot; Guess what,  [ there is ](http://www.inside-r.org/packages/cran/ggplot2/docs/time_breaks),  or at least used to be,  but it's not featured in the [ 0.9.3 documentation on CRAN ](http://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf).&#xD;&#xA;&#xD;&#xA;And as a last aside,  why does the `ggplot2` documentation feature *usage* information for `date_break`,  but never actually give any formal documentation of what the argument(s) need to be? Clicking the hyperref in the PDF for `date_breaks` with in a browser or the downloaded file just takes me to the top of the file." />
      <Message Id="41206380" ParentId="942" UserId="4196" Date="04/23/2014 19:51:19" Content="Should be fixed in the next release. There aren't really any arguments to `date_breaks` since the whole point is that it picks the breaks automatically without any user intervention." />
      <Message Id="41207143" ParentId="942" UserId="379357" Date="04/23/2014 19:58:04" Content="Thanks for fixing. Correct in that it mostly picks the right breaks,  but sometimes you want,  say,  5 minute breaks,  not 15 minute breaks as picked automatically. That's what I meant.&#xD;&#xA;&#xD;&#xA;I also found out that `date_breaks()` takes pretty much any time unit argument; I thought `date_breaks()` was for things like days,  weeks,  months,  etc. and `time_breaks()` was for hours,  minutes,  and seconds. Turns out `date_breaks()` takes all of them,  so I'm a happy camper on both fronts :)" />
      <Message Id="41210499" ParentId="942" UserId="4196" Date="04/23/2014 20:28:40" Content="Hmmm,  weird,  the documentation from inside-r isn't actually right. `?scales::date_breaks` is somewhat more informative." />
      <Message Id="41236423" ParentId="942" UserId="379357" Date="04/24/2014 02:19:47" Content="Completely agree. I guess I should start using actual R help instead of always googling for the answer..." />
    </Messages>
  </Topic>
  <Topic Id="943" Title="Empty raster">
    <Messages>
      <Message Id="0" ParentId="943" UserId="723099" Date="04/14/2014 01:00:05" Content="When I try to do&#xD;&#xA;&#xD;&#xA;ggplot(data.frame(x=c(1, 2), y=c(1, 2), z=c(1.5, 1.5)), aes(x=x, y=y, color=z)) +&#xD;&#xA;geom_point()&#xD;&#xA;&#xD;&#xA;I get the error &quot;Error in grid.Call.graphics(L_raster,  x$raster,  x$x,  x$y,  x$width,  x$height,  : Empty raster&quot;&#xD;&#xA;&#xD;&#xA;I described this issue in a little more detail here http://stackoverflow.com/questions/23003527/weird-ggplot2-error-empty-raster" />
      <Message Id="61328464" ParentId="943" UserId="241185" Date="10/31/2014 20:44:31" Content="Here is another case which triggers the same error:&#xD;&#xA;&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: x86_64-redhat-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;d &lt;- data.frame(x=1,  y=10,  z=260)&#xD;&#xA;ggplot(d,  aes(x,  y)) + geom_tile(aes(fill=z)) ## Works properly&#xD;&#xA; &#xD;&#xA;d &lt;- data.frame(x=1,  y=10,  z=261)&#xD;&#xA;ggplot(d,  aes(x,  y)) + geom_tile(aes(fill=z))&#xD;&#xA;Error in grid.Call.graphics(L_raster,  x$raster,  x$x,  x$y,  x$width,  x$height,   : &#xD;&#xA;  Empty raster&#xD;&#xA;```" />
      <Message Id="88230708" ParentId="943" UserId="1741643" Date="03/31/2015 20:11:38" Content="According to the stack trace,  this is probably a `grid` issue,  and `ggplot2` hardly can do anything about it:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA; 1: print(list(data = list(x = 1,  y = 10,  z = 261),  layers = list(&lt;envi&#xD;&#xA; 2: print(list(data = list(x = 1,  y = 10,  z = 261),  layers = list(&lt;envi&#xD;&#xA; 3: print.ggplot(list(data = list(x = 1,  y = 10,  z = 261),  layers = lis&#xD;&#xA; 4: grid.draw(gtable)&#xD;&#xA; 5: grid.draw.gtable(gtable)&#xD;&#xA; 6: grid.draw(gt)&#xD;&#xA; 7: grid.draw.gTree(gt)&#xD;&#xA; 8: recordGraphics(drawGTree(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA; 9: drawGTree(x)&#xD;&#xA;10: grid.draw(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;11: grid.draw.gTableChild(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;12: NextMethod()&#xD;&#xA;13: grid.draw.gtable(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;14: grid.draw(gt)&#xD;&#xA;15: grid.draw.gTableChild(gt)&#xD;&#xA;16: NextMethod()&#xD;&#xA;17: grid.draw.gTree(gt)&#xD;&#xA;18: recordGraphics(drawGTree(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA;19: drawGTree(x)&#xD;&#xA;20: grid.draw(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;21: grid.draw.gTableChild(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;22: NextMethod()&#xD;&#xA;23: grid.draw.gtable(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;24: grid.draw(gt)&#xD;&#xA;25: grid.draw.gTableChild(gt)&#xD;&#xA;26: NextMethod()&#xD;&#xA;27: grid.draw.gTree(gt)&#xD;&#xA;28: recordGraphics(drawGTree(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA;29: drawGTree(x)&#xD;&#xA;30: grid.draw(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;31: grid.draw.gTableChild(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;32: NextMethod()&#xD;&#xA;33: grid.draw.grob(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;34: recordGraphics(drawGrob(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA;35: drawGrob(x)&#xD;&#xA;36: drawDetails(x,  recording = FALSE)&#xD;&#xA;37: drawDetails.rastergrob(x,  recording = FALSE)&#xD;&#xA;38: grid.Call.graphics(L_raster,  x$raster,  x$x,  x$y,  x$width,  x$height, &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The function `grid.Call.graphics` is part of the `grid` namespace and simply calls a C implementation where the error probably occurs." />
      <Message Id="88230708" ParentId="943" UserId="1741643" Date="03/31/2015 20:11:38" Content="According to the stack trace,  this is probably a `grid` issue,  and `ggplot2` hardly can do anything about it:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA; 1: print(list(data = list(x = 1,  y = 10,  z = 261),  layers = list(&lt;envi&#xD;&#xA; 2: print(list(data = list(x = 1,  y = 10,  z = 261),  layers = list(&lt;envi&#xD;&#xA; 3: print.ggplot(list(data = list(x = 1,  y = 10,  z = 261),  layers = lis&#xD;&#xA; 4: grid.draw(gtable)&#xD;&#xA; 5: grid.draw.gtable(gtable)&#xD;&#xA; 6: grid.draw(gt)&#xD;&#xA; 7: grid.draw.gTree(gt)&#xD;&#xA; 8: recordGraphics(drawGTree(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA; 9: drawGTree(x)&#xD;&#xA;10: grid.draw(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;11: grid.draw.gTableChild(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;12: NextMethod()&#xD;&#xA;13: grid.draw.gtable(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;14: grid.draw(gt)&#xD;&#xA;15: grid.draw.gTableChild(gt)&#xD;&#xA;16: NextMethod()&#xD;&#xA;17: grid.draw.gTree(gt)&#xD;&#xA;18: recordGraphics(drawGTree(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA;19: drawGTree(x)&#xD;&#xA;20: grid.draw(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;21: grid.draw.gTableChild(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;22: NextMethod()&#xD;&#xA;23: grid.draw.gtable(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;24: grid.draw(gt)&#xD;&#xA;25: grid.draw.gTableChild(gt)&#xD;&#xA;26: NextMethod()&#xD;&#xA;27: grid.draw.gTree(gt)&#xD;&#xA;28: recordGraphics(drawGTree(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA;29: drawGTree(x)&#xD;&#xA;30: grid.draw(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;31: grid.draw.gTableChild(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;32: NextMethod()&#xD;&#xA;33: grid.draw.grob(x$children[ [ i ] ],  recording = FALSE)&#xD;&#xA;34: recordGraphics(drawGrob(x),  list(x = x),  getNamespace(&quot;grid&quot;))&#xD;&#xA;35: drawGrob(x)&#xD;&#xA;36: drawDetails(x,  recording = FALSE)&#xD;&#xA;37: drawDetails.rastergrob(x,  recording = FALSE)&#xD;&#xA;38: grid.Call.graphics(L_raster,  x$raster,  x$x,  x$y,  x$width,  x$height, &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The function `grid.Call.graphics` is part of the `grid` namespace and simply calls a C implementation where the error probably occurs." />
      <Message Id="88246225" ParentId="943" UserId="1741643" Date="03/31/2015 21:04:12" Content="I stand corrected,  it seems to be a `ggplot2` issue after all. It looks like the color scale is not drawn correctly when the continuous scale uses only one color. The code below works:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d &lt;- data.frame(x=1,  y=10,  z=260)&#xD;&#xA;ggplot(d,  aes(x,  y)) + geom_tile(aes(fill=z)) + scale_fill_continuous(guide=FALSE)&#xD;&#xA;d &lt;- data.frame(x=1,  y=10,  z=261)&#xD;&#xA;ggplot(d,  aes(x,  y)) + geom_tile(aes(fill=z)) + scale_fill_continuous(guide=FALSE)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="944" Title="Limiting axis range should not drop data">
    <Messages>
      <Message Id="0" ParentId="944" UserId="459632" Date="04/14/2014 12:22:25" Content="If you use e.g. `ylim` to limit the displayed range of the y-axis of your plot,  then the points not shown are not included in the summary statistics.&#xD;&#xA;&#xD;&#xA;See for example [ this SO question ](http://stackoverflow.com/questions/2626236/changing-ylim-axis-limits-drops-data-falling-outside-range-how-can-this-be-pr).&#xD;&#xA;&#xD;&#xA;Can't this be changed for the default behavior of the probably widely used `xlim` and `ylim` commands? This appears to be very dangerous.&#xD;&#xA;&#xD;&#xA;There are some warnings given,  but I have to be honest in that I simply ignored them. And I suppose that is what most people will do." />
      <Message Id="40360885" ParentId="944" UserId="4196" Date="04/14/2014 12:39:30" Content="This is by design,  and there's no way to change it now. If you don't want to exclude the data,  use `coord_cartesian()`. " />
      <Message Id="60239848" ParentId="944" UserId="167164" Date="10/23/2014 13:41:06" Content="I spent a whole day tracking down a 'bug' in my code that didn't exist when I accidentally forgot to unset limits on a graph. Perhaps the warnings could be a bit more explcit? At the moment,  they just say &quot;missing values&quot; : &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;R&gt; ggplot(iris,  aes(x=Species,  y=Petal.Length)) + geom_point(stat='summary',  fun.y=mean) + scale_y_continuous(limits=c(3, 4))&#xD;&#xA;Warning message:&#xD;&#xA;Removed 134 rows containing missing values (stat_summary). &#xD;&#xA;R&gt; warnings()&#xD;&#xA;Warning message:&#xD;&#xA;Removed 134 rows containing missing values (stat_summary).&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Could the warnings be changed to &quot;values were removed due to axis limits&quot;,  or something meaningful like that?" />
      <Message Id="60364713" ParentId="944" UserId="459632" Date="10/24/2014 09:31:28" Content="As I see it,  the `remove_missing` function that produces these warnings is called from many different places,  though most of them are summary functions (but some are geoms). I expect that for most of the summary function calls,  the missing values will result in unintended results on the plot. I don't know whether the consequences for the `geom` calls are as severe.&#xD;&#xA;&#xD;&#xA;I also suggest to create a more intriguing error message. The message could be changed for all cases within `remove_missing` (not much work). But then it should be checked whether the potentially save occurrences happen often. If this is the case,  it will happen again that people start to ignore the warning. Then one has to invest a bit more time to change the warning message only for the dangerous cases.&#xD;&#xA;&#xD;&#xA;I suggest this issue is reopened,  so the warning message will eventually be fixed.&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="945" Title="Fix dep=T in devtools::install_deps instruction">
    <Messages>
      <Message Id="0" ParentId="945" UserId="4941031" Date="04/16/2014 08:00:19" Content="`deps = T` changed to `dep = T`,  fixing &quot;unused argument&quot; error. The full parameter name with the default value is `dependencies = NA`,  according to the documentation." />
      <Message Id="40736469" ParentId="945" UserId="4196" Date="04/17/2014 16:55:18" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="946" Title="let geom_boxplot use the default colour,  shape and size of geom_point">
    <Messages>
      <Message Id="0" ParentId="946" UserId="446636" Date="04/17/2014 08:03:24" Content="Solves https://github.com/hadley/ggplot2/issues/757" />
    </Messages>
  </Topic>
  <Topic Id="947" Title="it's not possible to adjust axis limits for individual panels of facet_grid">
    <Messages>
      <Message Id="0" ParentId="947" UserId="3008025" Date="04/22/2014 09:42:59" Content="" />
      <Message Id="41043299" ParentId="947" UserId="4196" Date="04/22/2014 14:06:17" Content="Yes,  and unfortunately it probably will never be possible because it's a complicated problem." />
    </Messages>
  </Topic>
  <Topic Id="948" Title="Decrease vignette sizes">
    <Messages>
      <Message Id="0" ParentId="948" UserId="4196" Date="04/22/2014 14:54:20" Content="" />
    </Messages>
  </Topic>
  <Topic Id="949" Title="small syntax error fix in labeller examples">
    <Messages>
      <Message Id="0" ParentId="949" UserId="5498966" Date="04/24/2014 06:46:55" Content="this might not be worth a pull request but there's a little bit of syntax trouble in an example in the recent merge for the new labeller function that seems to make the Travis CI build fail,  i just stumbled across it trying to figure out if anything in my own pull request was the issue and figured it would be a quick merge if wanted" />
      <Message Id="41270266" ParentId="949" UserId="4196" Date="04/24/2014 11:41:01" Content="Thanks! (I also fixed on the ggplot2-1.0-rc branch)" />
    </Messages>
  </Topic>
  <Topic Id="950" Title="Fixes #859,  update of #860">
    <Messages>
      <Message Id="0" ParentId="950" UserId="463252" Date="04/24/2014 19:22:02" Content="Fixes bug where `xend` and `yend` were not passed along&#xD;&#xA;as coordinates for transformation within `annotate`. This&#xD;&#xA;led to the end of segments not appearing in the correct&#xD;&#xA;location when a transformation was involved with one of the&#xD;&#xA;coordinate scales." />
      <Message Id="111270653" ParentId="950" UserId="4196" Date="06/11/2015 20:32:38" Content="Similarly,  could you please merge/rebase for NEWS? (it's safest to always put new NEWS items at the top)" />
      <Message Id="113156633" ParentId="950" UserId="4196" Date="06/18/2015 13:31:41" Content="Are you still interested in this?" />
      <Message Id="113242951" ParentId="950" UserId="463252" Date="06/18/2015 18:10:33" Content="I am still interested in this. I'll work on it this weekend." />
      <Message Id="114376933" ParentId="950" UserId="463252" Date="06/23/2015 06:33:34" Content="Comments addressed." />
      <Message Id="114468788" ParentId="950" UserId="4196" Date="06/23/2015 12:08:54" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="951" Title="Fix typo as reported in Documentation Feedback 1162">
    <Messages>
      <Message Id="0" ParentId="951" UserId="463252" Date="04/24/2014 19:32:18" Content="Resubmission of #847" />
      <Message Id="111270536" ParentId="951" UserId="4196" Date="06/11/2015 20:31:58" Content="Fixed in like 3 other PRs :/" />
    </Messages>
  </Topic>
  <Topic Id="952" Title="Resubmission of #823">
    <Messages>
      <Message Id="0" ParentId="952" UserId="463252" Date="04/24/2014 19:53:18" Content="Resubmission of #823 " />
      <Message Id="111270495" ParentId="952" UserId="4196" Date="06/11/2015 20:31:46" Content="Could you please merge/rebase,  checking the position of the NEWS bullet?" />
      <Message Id="113157451" ParentId="952" UserId="4196" Date="06/18/2015 13:33:13" Content="Merged by hand - thanks!" />
      <Message Id="113243061" ParentId="952" UserId="463252" Date="06/18/2015 18:11:04" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="953" Title="theme(validate=FALSE) means do not validate_element">
    <Messages>
      <Message Id="0" ParentId="953" UserId="932850" Date="04/25/2014 21:20:10" Content="This allows support for non-standard theme options,  which would close&#xD;&#xA;&#xD;&#xA;https://github.com/hadley/ggplot2/issues/938" />
      <Message Id="88231684" ParentId="953" UserId="932850" Date="03/31/2015 20:17:07" Content="@wch @hadley can you please take a look at merging this? It is causing us problems in animint.&#xD;&#xA;&#xD;&#xA;https://github.com/tdhock/animint/issues/29" />
      <Message Id="88967994" ParentId="953" UserId="86978" Date="04/02/2015 16:34:04" Content="I'm a bit reluctant to add an option like this... Could you implement the animint theme options by attaching them as an attribute to the ggplot object? Getting that to play well with the `+` operator may be tricky though.&#xD;&#xA;" />
      <Message Id="94803178" ParentId="953" UserId="932850" Date="04/21/2015 13:58:45" Content="Dear @wch,  thanks for considering my PR,  and thanks for your concerns.&#xD;&#xA;&#xD;&#xA;Can you please clarify why exactly you are reluctant to add such an option? It seems to me that it is completely backwards compatible with existing ggplots. I even added some unit tests in test-theme.R to make sure that validate=FALSE is respected.&#xD;&#xA;&#xD;&#xA;I haven't had time to try implementing it as an attribute of the ggplot object,  but thanks for the suggestion." />
      <Message Id="94804410" ParentId="953" UserId="939480" Date="04/21/2015 14:01:03" Content="I would like this merge to go through. I am implementing animint in three R-packages and I need the custom theme functions." />
      <Message Id="111270357" ParentId="953" UserId="4196" Date="06/11/2015 20:31:01" Content="Can you please post a clean PR for review? (i.e. unmodified readme &amp; [ house style ](http://r-pkgs.had.co.nz/r.html#style))" />
      <Message Id="111279735" ParentId="953" UserId="932850" Date="06/11/2015 21:17:52" Content="Please review #1121 which includes an unmodified readme and spaces before and after = and + operators." />
    </Messages>
  </Topic>
  <Topic Id="954" Title="Errors in some examples">
    <Messages>
      <Message Id="0" ParentId="954" UserId="163582" Date="04/26/2014 03:31:21" Content="e.g. if you run `geom_errorbar` examples, &#xD;&#xA;&#xD;&#xA;```s&#xD;&#xA;example('geom_errorbar',  package='ggplot2',  ask=FALSE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;you will see errors like&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; p + geom_bar(position=dodge) + geom_errorbar(limits,  position=dodge,  width=0.25)&#xD;&#xA;Error : Mapping a variable to y and also using stat=&quot;bin&quot;.&#xD;&#xA;  With stat=&quot;bin&quot;,  it will attempt to set the y value to the count of cases in each group.&#xD;&#xA;  This can result in unexpected behavior and will not be allowed in a future version of ggplot2.&#xD;&#xA;  If you want y to represent counts of cases,  use stat=&quot;bin&quot; and don't map a variable to y.&#xD;&#xA;  If you want y to represent values in the data,  use stat=&quot;identity&quot;.&#xD;&#xA;  See ?geom_bar for examples. (Defunct; last used in version 0.9.2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;There are a couple more examples like this in the package. It seems they are not normal R errors,  so they are not caught by R CMD check,  but I guess you can see them in `ggplot2.Rcheck/ggplot2-Ex.Rout`." />
      <Message Id="111591788" ParentId="954" UserId="4196" Date="06/12/2015 19:12:29" Content="Let me know if you spot any more of these." />
    </Messages>
  </Topic>
  <Topic Id="955" Title="Throw error if lower &gt; upper in cont scales. Fixes #906">
    <Messages>
      <Message Id="0" ParentId="955" UserId="4941031" Date="04/28/2014 13:07:10" Content="" />
      <Message Id="43728146" ParentId="955" UserId="4941031" Date="05/21/2014 08:35:36" Content="I've noticed that build fails. Unfortunately,  I cannot resolve this myself and need help.&#xD;&#xA;First,  I've added a test that should pass with correct parameters and fail with wrong ones. The test runs fine with `devtools::test()`. However,  `devtools::check()` seems to build `ggplot2-Ex.R` with my test included,  and it fails at &quot;checking examples&quot; section.&#xD;&#xA;I'd like to fix that by e.g. excluding my test from examples,  but I have no idea how to accomplish that. " />
    </Messages>
  </Topic>
  <Topic Id="956" Title="Reversed date axis has no breaks,  no grid lines">
    <Messages>
      <Message Id="0" ParentId="956" UserId="599454" Date="04/28/2014 20:29:11" Content="I am reversing a data axis by specifying the limits backwards,  i.e. giving the larger value first. Perhaps that is the wrong way to reverse a data axis?&#xD;&#xA;&#xD;&#xA;In any case,  here's a demo of the problem.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;jDat &lt;- c(      &quot;Date,  Holiday&quot;, &#xD;&#xA;          &quot;2014-01-01,  New Year's Day&quot;, &#xD;&#xA;          &quot;2014-02-02,  Groundhog Day&quot;, &#xD;&#xA;          &quot;2014-07-04,  Independence Day&quot;, &#xD;&#xA;          &quot;2014-10-31,  Halloween&quot;, &#xD;&#xA;          &quot;2014-12-31,  New Year's Eve&quot;)&#xD;&#xA;jDat &lt;- read.csv(textConnection(jDat),  colClasses = c(Date = &quot;Date&quot;))&#xD;&#xA;p &lt;- ggplot(jDat,  aes(x = 0,  y = Date)) + geom_text(aes(label = Holiday),  size = 4)&#xD;&#xA;p&#xD;&#xA;p + scale_y_date(limits = c(min(jDat$Date),  max(jDat$Date))) # same result as p&#xD;&#xA;```&#xD;&#xA;![ good-date-axis ](https://cloud.githubusercontent.com/assets/599454/2822518/a0091a10-cf13-11e3-8061-ccba2c2552a6.png)&#xD;&#xA;&#xD;&#xA;Now I reverse the y axis.&#xD;&#xA;```&#xD;&#xA;p + scale_y_date(limits = c(max(jDat$Date),  min(jDat$Date)))&#xD;&#xA;```&#xD;&#xA;![ bad-date-axis ](https://cloud.githubusercontent.com/assets/599454/2822520/b0997f50-cf13-11e3-9c26-7ac60691eaf1.png)&#xD;&#xA;" />
      <Message Id="72302991" ParentId="956" UserId="10781688" Date="01/31/2015 03:46:22" Content="Yes,  reversed limits don't work in ggplot as they do in base graphics.  The &quot;solution&quot; to this for numbers is to use `scale_y_reverse` or `scale_y_continuous(...trans=&quot;reverse&quot;)`.  This evidently does not work for dates as the latter complains about trans being defined twice (I assume what happens is that `scale_y_date` decays to a transformed `scale_y_continuous`).  The former fails with ``Error in `-.Date`(x) : unary - is not defined for &quot;Date&quot; objects``,  indicating that the function is transforming data,  not plot coordinates (which superficially seems like a mistake).&#xD;&#xA;&#xD;&#xA;So the bug you've reported is,  as I understand it,  not actually a bug: it's expected to not work.  Unfortunately,  the correct way of doing things also doesn't work.  You might be able to work around this by converting dates to timestamps (seconds since the epoch or similar) and defining your own labels,  but I would caution against investing too much time in such a solution with ggplot as reversed axes basically do not work with it: I have a list of a half-dozen bugs I found in my first few hours with ggplot that I will file as soon as I have time.  This will unfortunately be sometime after I redo what I am working on in base graphics,  as I have now hit too many dead ends in ggplot,  and neither stackoverflow nor my own ingenuity seems able to rescue me.&#xD;&#xA;&#xD;&#xA;The above is of course based on my very limited understanding of ggplot,  and I write it only because I saw your bug whilst looking for my own and there has been no other response; and I believe it to be correct.  I will be happy to submit to the guidance of anyone who knows better." />
      <Message Id="72408161" ParentId="956" UserId="463252" Date="02/02/2015 05:29:04" Content="There is a related question on StackOverflow: http://stackoverflow.com/q/11053899/892313 and two blog posts I wrote http://ggplot2.tumblr.com/post/25938265813/defining-a-new-transformation-for-ggplot2-scales and http://ggplot2.tumblr.com/post/29433173749/defining-a-new-transformation-for-ggplot2-scales that address how to make a new scale transformation like reversed Date. You can't just string two scales together,  you have to make a single encompassing transformation." />
      <Message Id="72413267" ParentId="956" UserId="599454" Date="02/02/2015 06:51:15" Content="Hi @hhecht and @BrianDiggs, &#xD;&#xA;&#xD;&#xA;Thanks for your information. This issue is something of a distant memory for me and I am certainly happy if the judgment of you and @hadley is that my problem is one of user error. If that's the case,  then just close it. I'm not actively struggling with whatever I was trying to do above." />
      <Message Id="111544761" ParentId="956" UserId="4196" Date="06/12/2015 16:25:09" Content="Seems to work now." />
    </Messages>
  </Topic>
  <Topic Id="957" Title="Error that seems misleading when using geom_line(stat=&quot;density&quot;) without enough data">
    <Messages>
      <Message Id="0" ParentId="957" UserId="2288213" Date="04/30/2014 13:51:42" Content="Hello, &#xD;&#xA;&#xD;&#xA;In a regular EDA of a specific type of results,  I found an error using ggplot() + geom_line(stat=&quot;density&quot;). At first I was confused by the error because the plot was working for other data sets. Tracing things,  I realized that the real problem was because there was not enough data to calculate the density.&#xD;&#xA;&#xD;&#xA;I'll change my EDA analysis so this doesn't happen again (attempting to plot without enough data),  but it'd be nice if the ggplot2 error was more informative.&#xD;&#xA;&#xD;&#xA;Here's a small reproducible example:&#xD;&#xA;&#xD;&#xA;```S&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; df &lt;- data.frame(width = c(2806,  320,  287,  132,  214,  202,  235,  266,  156,  210),  &#xD;&#xA;    seqnames=factor(c(&quot;chr20&quot;,  &quot;chr1&quot;,  &quot;chr6&quot;,  &quot;chr16&quot;,  &quot;chr17&quot;,  &quot;chr4&quot;,  &quot;chr1&quot;,  &quot;chr19&quot;,  &quot;chrX&quot;,  &quot;chr17&quot;)))&#xD;&#xA;&gt; ggplot(df,  aes(x=log10(width),  colour=seqnames)) + geom_line(stat=&quot;density&quot;)&#xD;&#xA;Error in exists(name,  env) : argument &quot;env&quot; is missing,  with no default&#xD;&#xA;&gt; traceback()&#xD;&#xA;6: exists(name,  env)&#xD;&#xA;5: find_global(scale_name,  env)&#xD;&#xA;4: scales_add_missing(plot,  c(&quot;x&quot;,  &quot;y&quot;))&#xD;&#xA;3: ggplot_build(x)&#xD;&#xA;2: print.ggplot(list(data = list(width = c(2806,  320,  287,  132,  &#xD;&#xA;   214,  202,  235,  266,  156,  210),  seqnames = c(5L,  1L,  7L,  2L,  3L,  &#xD;&#xA;   6L,  1L,  4L,  8L,  3L)),  layers = list(&lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  &#xD;&#xA;       mapping = list(x = log10(width),  colour = seqnames),  theme = list(),  &#xD;&#xA;       coordinates = list(limits = list(x = NULL,  y = NULL)),  facet = list(&#xD;&#xA;           shrink = TRUE),  plot_env = &lt;environment&gt;,  labels = list(&#xD;&#xA;           x = &quot;log10(width)&quot;,  colour = &quot;seqnames&quot;,  y = &quot;density&quot;,  &#xD;&#xA;           fill = &quot;NA&quot;)))&#xD;&#xA;1: print(list(data = list(width = c(2806,  320,  287,  132,  214,  202,  &#xD;&#xA;   235,  266,  156,  210),  seqnames = c(5L,  1L,  7L,  2L,  3L,  6L,  1L,  &#xD;&#xA;   4L,  8L,  3L)),  layers = list(&lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  &#xD;&#xA;       mapping = list(x = log10(width),  colour = seqnames),  theme = list(),  &#xD;&#xA;       coordinates = list(limits = list(x = NULL,  y = NULL)),  facet = list(&#xD;&#xA;           shrink = TRUE),  plot_env = &lt;environment&gt;,  labels = list(&#xD;&#xA;           x = &quot;log10(width)&quot;,  colour = &quot;seqnames&quot;,  y = &quot;density&quot;,  &#xD;&#xA;           fill = &quot;NA&quot;)))&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.0 (2014-04-10)&#xD;&#xA;Platform: x86_64-apple-darwin10.8.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_0.9.3.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 digest_0.6.4     grid_3.1.0       gtable_0.1.2    &#xD;&#xA; [ 5 ] MASS_7.3-32      munsell_0.4.2    plyr_1.8.1       proto_0.3-10    &#xD;&#xA; [ 9 ] Rcpp_0.11.1      reshape2_1.4     scales_0.2.4     stringr_0.6.2   &#xD;&#xA;&gt; &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Thanks for the great package!" />
      <Message Id="111543996" ParentId="957" UserId="4196" Date="06/12/2015 16:24:22" Content="I think I fixed this incidentally in d58b00a58691e1b3753525759535d8abe942e304" />
      <Message Id="111574802" ParentId="957" UserId="2288213" Date="06/12/2015 17:55:03" Content="Awesome! You did fix it as shown below.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; df &lt;- data.frame(width = c(2806,  320,  287,  132,  214,  202,  235,  266,  156,  210),  &#xD;&#xA;+     seqnames=factor(c(&quot;chr20&quot;,  &quot;chr1&quot;,  &quot;chr6&quot;,  &quot;chr16&quot;,  &quot;chr17&quot;,  &quot;chr4&quot;,  &quot;chr1&quot;,  &quot;chr19&quot;,  &quot;chrX&quot;,  &quot;chr17&quot;)))&#xD;&#xA;&gt; df&#xD;&#xA;   width seqnames&#xD;&#xA;1   2806    chr20&#xD;&#xA;2    320     chr1&#xD;&#xA;3    287     chr6&#xD;&#xA;4    132    chr16&#xD;&#xA;5    214    chr17&#xD;&#xA;6    202     chr4&#xD;&#xA;7    235     chr1&#xD;&#xA;8    266    chr19&#xD;&#xA;9    156     chrX&#xD;&#xA;10   210    chr17&#xD;&#xA;&gt; png('test_ggplot.png') &#xD;&#xA;&gt; ggplot(df,  aes(x=log10(width),  colour=seqnames)) + geom_line(stat=&quot;density&quot;)&#xD;&#xA;&gt; dev.off()&#xD;&#xA;null device &#xD;&#xA;          1 &#xD;&#xA;&gt; devtools::session_info()&#xD;&#xA;Session info -------------------------------------------------------------------------------------------------------------&#xD;&#xA; setting  value                                      &#xD;&#xA; version  R version 3.2.0 Patched (2015-05-18 r68382)&#xD;&#xA; system   x86_64,  darwin10.8.0                       &#xD;&#xA; ui       AQUA                                       &#xD;&#xA; language (EN)                                       &#xD;&#xA; collate  en_US.UTF-8                                &#xD;&#xA; tz       America/New_York                           &#xD;&#xA;&#xD;&#xA;Packages -----------------------------------------------------------------------------------------------------------------&#xD;&#xA; package    * version    date       source                         &#xD;&#xA; bitops       1.0-6      2013-08-17 CRAN (R 3.2.0)                 &#xD;&#xA; colorspace   1.2-6      2015-03-11 CRAN (R 3.2.0)                 &#xD;&#xA; devtools     1.8.0      2015-05-09 CRAN (R 3.2.0)                 &#xD;&#xA; digest       0.6.8      2014-12-31 CRAN (R 3.2.0)                 &#xD;&#xA; ggplot2    * 1.0.1.9000 2015-06-12 Github (hadley/ggplot2@3b6a126)&#xD;&#xA; git2r        0.10.1     2015-05-07 CRAN (R 3.2.0)                 &#xD;&#xA; gtable       0.1.2      2012-12-05 CRAN (R 3.2.0)                 &#xD;&#xA; labeling     0.3        2014-08-23 CRAN (R 3.2.0)                 &#xD;&#xA; magrittr     1.5        2014-11-22 CRAN (R 3.2.0)                 &#xD;&#xA; MASS         7.3-40     2015-03-21 CRAN (R 3.2.0)                 &#xD;&#xA; memoise      0.2.1      2014-04-22 CRAN (R 3.2.0)                 &#xD;&#xA; munsell      0.4.2      2013-07-11 CRAN (R 3.2.0)                 &#xD;&#xA; plyr         1.8.2      2015-04-21 CRAN (R 3.2.0)                 &#xD;&#xA; proto        0.3-10     2012-12-22 CRAN (R 3.2.0)                 &#xD;&#xA; Rcpp         0.11.6     2015-05-01 CRAN (R 3.2.0)                 &#xD;&#xA; RCurl        1.95-4.6   2015-04-24 CRAN (R 3.2.0)                 &#xD;&#xA; reshape2     1.4.1      2014-12-06 CRAN (R 3.2.0)                 &#xD;&#xA; rversions    1.0.0      2015-04-22 CRAN (R 3.2.0)                 &#xD;&#xA; scales       0.2.4      2014-04-22 CRAN (R 3.2.0)                 &#xD;&#xA; stringi      0.4-1      2014-12-14 CRAN (R 3.2.0)                 &#xD;&#xA; stringr      1.0.0      2015-04-30 CRAN (R 3.2.0)                 &#xD;&#xA; XML          3.98-1.2   2015-05-31 CRAN (R 3.2.0)                 &#xD;&#xA;&gt; &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ test_ggplot ](https://cloud.githubusercontent.com/assets/2288213/8136148/4177a298-110a-11e5-9c98-2fb3d7200daf.png)" />
    </Messages>
  </Topic>
  <Topic Id="958" Title="geom_bar.Rd: Fix typo">
    <Messages>
      <Message Id="0" ParentId="958" UserId="1140359" Date="05/01/2014 19:51:41" Content="" />
      <Message Id="42074113" ParentId="958" UserId="463252" Date="05/02/2014 20:12:21" Content="Needs to be fixed at the source: https://github.com/hadley/ggplot2/blob/master/R/geom-bar-.r#L40&#xD;&#xA;&#xD;&#xA;Checked in Rd files are generated by roxygen." />
      <Message Id="42098269" ParentId="958" UserId="1140359" Date="05/03/2014 07:08:46" Content="Ah,  right. Sent another pull request. Thanks." />
    </Messages>
  </Topic>
  <Topic Id="959" Title="geom-bar-.r: Fix typo">
    <Messages>
      <Message Id="0" ParentId="959" UserId="1140359" Date="05/03/2014 07:07:56" Content="" />
      <Message Id="111269845" ParentId="959" UserId="4196" Date="06/11/2015 20:29:28" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="960" Title="Corrected field name: colour =&gt; color">
    <Messages>
      <Message Id="0" ParentId="960" UserId="2107580" Date="05/05/2014 05:54:58" Content="" />
      <Message Id="111269741" ParentId="960" UserId="4196" Date="06/11/2015 20:29:17" Content="Thanks - also spotted and fixed myself." />
    </Messages>
  </Topic>
  <Topic Id="961" Title="tickmark/break calculations with exp_trans,  probability_trans fail often">
    <Messages>
      <Message Id="0" ParentId="961" UserId="998541" Date="05/05/2014 12:53:55" Content="Some ranges seem to break the calculation of the breaks/tickmarks for these transformed axes:&#xD;&#xA;It works for `y &lt;- 1:3`,  ` y &lt;- (-10):-7`,  e.g.,  but I haven't found an example with more than 4 values that worked ... ?!?&#xD;&#xA;```&#xD;&#xA;&gt; d &lt;- data.frame(x=1:10,  y=1:10) &#xD;&#xA;&gt; ggplot(aes(x=x,  y=y),  data=d) + geom_point() + &#xD;&#xA;+     scale_y_continuous(trans=exp_trans()) &#xD;&#xA;Error in if (zero_range(as.numeric(limits))) {  : &#xD;&#xA;  missing value where TRUE/FALSE needed&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In scale$trans$inv(limits) : NaNs produced&#xD;&#xA;14: scale_breaks.continuous(scale,  range)&#xD;&#xA;13: scale_breaks(scale,  range)&#xD;&#xA;12: scale_break_info.continuous(scale,  range)&#xD;&#xA;11: scale_break_info(scale,  range)&#xD;&#xA;10: train_cartesian(scales$y,  coord$limits$y,  &quot;y&quot;)&#xD;&#xA;9: coord_train.cartesian(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;8: coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;7: (function (ix,  iy) &#xD;&#xA;   { &#xD;&#xA;       coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;    })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA;6: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA;5: Map(compute_range,  panel$layout$SCALE_X,  panel$layout$SCALE_Y)&#xD;&#xA;4: train_ranges(panel,  plot$coordinates)&#xD;&#xA;3: ggplot_build(x)&#xD;&#xA;[ ... ]&#xD;&#xA;```&#xD;&#xA;Same for logit and probability trans:&#xD;&#xA;```&#xD;&#xA;&gt; x &lt;- data.frame(x=1:10,  y=1:10); ggplot(aes(x=x,  y=y),  data=x) + &#xD;&#xA;+     geom_point() + scale_y_continuous(trans=logit_trans()) &#xD;&#xA;Error in seq.default(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ]) : &#xD;&#xA;  'from' cannot be NA,  NaN or infinite&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In qfun(x,  ...) : NaNs produced&#xD;&#xA;14: scale_breaks.continuous(scale,  range)&#xD;&#xA;13: scale_breaks(scale,  range)&#xD;&#xA;12: scale_break_info.continuous(scale,  range)&#xD;&#xA;11: scale_break_info(scale,  range)&#xD;&#xA;10: train_cartesian(scales$y,  coord$limits$y,  &quot;y&quot;)&#xD;&#xA;9: coord_train.cartesian(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;8: coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;7: (function (ix,  iy) &#xD;&#xA;   { &#xD;&#xA;       coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;    })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA;6: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA;5: Map(compute_range,  panel$layout$SCALE_X,  panel$layout$SCALE_Y)&#xD;&#xA;4: train_ranges(panel,  plot$coordinates)&#xD;&#xA;3: ggplot_build(x)&#xD;&#xA;&#xD;&#xA;[ ... ]&#xD;&#xA;&#xD;&#xA;&gt; ggplot(aes(x=x,  y=y),  data=x) + geom_point() + &#xD;&#xA;+     scale_y_continuous(trans=probability_trans(&quot;norm&quot;)) &#xD;&#xA;Error in seq.default(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ]) : &#xD;&#xA;  'from' cannot be NA,  NaN or infinite&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In qfun(x,  ...) : NaNs produced&#xD;&#xA;20: stop(&quot;'from' cannot be NA,  NaN or infinite&quot;)&#xD;&#xA;19: seq.default(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ])&#xD;&#xA;18: (function (...) &#xD;&#xA;    UseMethod(&quot;seq&quot;))(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ],  length = dots[ [ 3L ] ][ [ 1L ] ])&#xD;&#xA;17: mapply(seq,  b[ -length(b) ],  b[ -1 ],  length = n + 1,  SIMPLIFY = FALSE)&#xD;&#xA;16: unlist(mapply(seq,  b[ -length(b) ],  b[ -1 ],  length = n + 1,  SIMPLIFY = FALSE))&#xD;&#xA;15: unique(unlist(mapply(seq,  b[ -length(b) ],  b[ -1 ],  length = n + &#xD;&#xA;        1,  SIMPLIFY = FALSE)))&#xD;&#xA;14: scale_breaks_minor.continuous(scale,  b = major,  limits = range)&#xD;&#xA;13: scale_breaks_minor(scale,  b = major,  limits = range)&#xD;&#xA;12: scale_break_info.continuous(scale,  range)&#xD;&#xA;11: scale_break_info(scale,  range)&#xD;&#xA;10: train_cartesian(scales$y,  coord$limits$y,  &quot;y&quot;)&#xD;&#xA;9: coord_train.cartesian(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;8: coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;7: (function (ix,  iy) &#xD;&#xA;   { &#xD;&#xA;       coord_train(coord,  list(x = panel$x_scales[ [ ix ] ],  y = panel$y_scales[ [ iy ] ]))&#xD;&#xA;    })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA;6: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA;5: Map(compute_range,  panel$layout$SCALE_X,  panel$layout$SCALE_Y)&#xD;&#xA;4: train_ranges(panel,  plot$coordinates)&#xD;&#xA;[ ... ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.0.2 (2013-09-25)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       &#xD;&#xA; [ 4 ] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=en_US.UTF-8       LC_NAME=C                  LC_ADDRESS=C              &#xD;&#xA;[ 10 ] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] grid      stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA; [ 1 ] Matrix_1.1-3      zoo_1.7-10        dplyr_0.1.2.0.99  mgcv_1.7-29       nlme_3.1-111     &#xD;&#xA; [ 6 ] plyr_1.8          gridExtra_0.9.1   lubridate_1.3.0   reshape2_1.2.2    refundDevel_0.3-0&#xD;&#xA;[ 11 ] devtools_1.5      scales_0.2.4      ggplot2_0.9.3.1  &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] assertthat_0.1      boot_1.3-9          colorspace_1.2-2    digest_0.6.3       &#xD;&#xA; [ 5 ] evaluate_0.5.1      fda_2.3.6           gamm4_0.2-0         glmnet_1.9-3       &#xD;&#xA; [ 9 ] gtable_0.1.2        httr_0.2            labeling_0.2        lattice_0.20-24    &#xD;&#xA;[ 13 ] lme4_1.1-5          magic_1.5-4         MASS_7.3-27         matrixStats_0.8.5  &#xD;&#xA;[ 17 ] memoise_0.1         minqa_1.2.3         munsell_0.4.2       parallel_3.0.2     &#xD;&#xA;[ 21 ] proto_0.3-10        Rcpp_0.11.0         RcppEigen_0.3.2.0.3 RCurl_1.95-4.1     &#xD;&#xA;[ 25 ] RLRsim_2.1-4        R.methodsS3_1.5.2   splines_3.0.2       stringr_0.6.2      &#xD;&#xA;[ 29 ] tools_3.0.2         wavethresh_4.6.6    whisker_0.3-2      &#xD;&#xA;```" />
      <Message Id="111543385" ParentId="961" UserId="4196" Date="06/12/2015 16:23:20" Content="Could you please file in the scales repo? No need to add the traceback and session info." />
    </Messages>
  </Topic>
  <Topic Id="962" Title="Added sanitise_dim function for Issue #801">
    <Messages>
      <Message Id="0" ParentId="962" UserId="197589" Date="05/11/2014 08:50:57" Content="As discussed in issue [ #801 ](https://github.com/hadley/ggplot2/issues/801),  `facet_wrap` doesn't properly check the `nrow` and `ncol` arguments,  particularly negative values.&#xD;&#xA;&#xD;&#xA;I've added a `sanitise_dim` function (plus some tests) to deal with this.&#xD;&#xA;" />
      <Message Id="111701675" ParentId="962" UserId="197589" Date="06/13/2015 11:41:20" Content="`sanitise_dim` roxygen comments are now @noRd,  I've removed  half the unit tests,  and both the code and tests are now in the house style." />
      <Message Id="113160561" ParentId="962" UserId="4196" Date="06/18/2015 13:40:23" Content="Fixed by hand. Thanks for the patch!" />
    </Messages>
  </Topic>
  <Topic Id="963" Title="Bug with coord_map and world map">
    <Messages>
      <Message Id="0" ParentId="963" UserId="3227753" Date="05/14/2014 13:34:37" Content="Have you seen that there is a bug when using `coord_map` with a world map ? &#xD;&#xA;The first picture is drawn using coord map &#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(maps) &#xD;&#xA;    world &lt;- map_data(&quot;world&quot;)&#xD;&#xA;    ggplot() + geom_map( data=world,  aes(x=long,  y=lat,  group = group,  map_id = region), colour=&quot;white&quot;,  fill=&quot;grey10&quot;,  map = world ) + coord_map()&#xD;&#xA;&#xD;&#xA;![ ggmap3 ](https://cloud.githubusercontent.com/assets/3227753/2971608/39da794a-db6c-11e3-93c8-9d8d8015c544.png)&#xD;&#xA;&#xD;&#xA;The second is done without coord_map and is correct even if the projection is not optimal : &#xD;&#xA;&#xD;&#xA;    ggplot() + geom_map( data=world,  aes(x=long,  y=lat,  group = group,  map_id = region), colour=&quot;white&quot;,  fill=&quot;grey10&quot;,  map = world )  &#xD;&#xA;&#xD;&#xA;![ ggmap4 ](https://cloud.githubusercontent.com/assets/3227753/2971609/39dbbef4-db6c-11e3-98db-30300d2a3c04.png)&#xD;&#xA;&#xD;&#xA;Here is my [ gist ](https://gist.github.com/blaquans/057d9a250f3088d1cc89) " />
      <Message Id="91351501" ParentId="963" UserId="1260667" Date="04/09/2015 20:44:26" Content="yeah I see this too. I was just coming to report it. You can get a workaround by specifying the `xlim` and `ylim`:&#xD;&#xA;&#xD;&#xA;```[ r ]&#xD;&#xA;ggplot() + &#xD;&#xA;  geom_map( data=world,  &#xD;&#xA;            aes(x=long,  y=lat,  group = group,  map_id = region), &#xD;&#xA;            colour=&quot;white&quot;,  fill=&quot;grey10&quot;,  map = world ) +&#xD;&#xA;   coord_map(xlim=c(-180, 180))&#xD;&#xA;```&#xD;&#xA;that gets rid of the nasty line but greenland and antarctica are still off. I don't know how to fix that one although I would play around a bit with the the `orientation` parameter&#xD;&#xA;![ screen shot 2015-04-09 at 4 29 05 pm ](https://cloud.githubusercontent.com/assets/1260667/7076183/a1929776-ded5-11e4-9cb7-c8bf69cb27e6.PNG)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="112212086" ParentId="963" UserId="4196" Date="06/15/2015 21:05:27" Content="This is a problem with the underlying data. Will hopefully have recommendation for better data sources soon." />
    </Messages>
  </Topic>
  <Topic Id="964" Title="Fixed typo in `geom_density2d` roxygen2 Description">
    <Messages>
      <Message Id="0" ParentId="964" UserId="841437" Date="05/17/2014 19:48:55" Content="&quot;estimatation&quot; --&gt; &quot;estimation&quot;&#xD;&#xA;&#xD;&#xA;Only fixed the roxygen header. Would need to rebuild the doc itself." />
      <Message Id="111267971" ParentId="964" UserId="4196" Date="06/11/2015 20:26:37" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="965" Title="Throw error if lower &gt; upper in cont scales. Fixes #906">
    <Messages>
      <Message Id="0" ParentId="965" UserId="4941031" Date="05/21/2014 09:55:59" Content="" />
      <Message Id="43736476" ParentId="965" UserId="4941031" Date="05/21/2014 10:04:27" Content="With the latest fix build passes fine,  yay!" />
      <Message Id="111267818" ParentId="965" UserId="4196" Date="06/11/2015 20:26:26" Content="I agree that this is probably nicer,  but the additional logic around reverse scales is really icky." />
      <Message Id="111284705" ParentId="965" UserId="4941031" Date="06/11/2015 21:41:45" Content="Should I try coming up with some other workaround or we leave it as it is? FWIW,  there's an issue discussion here (https://github.com/hadley/ggplot2/issues/906). Though the MWE there no longer causes a crash,  just an &quot;empty raster&quot; error." />
      <Message Id="111286966" ParentId="965" UserId="4196" Date="06/11/2015 21:55:37" Content="BTW the MWE now works" />
      <Message Id="111975694" ParentId="965" UserId="4941031" Date="06/15/2015 08:26:16" Content="Ah,  great,  I'm deleting the branch then. Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="966" Title="Setting variable to NULL within `aes_string()`">
    <Messages>
      <Message Id="0" ParentId="966" UserId="1372890" Date="05/21/2014 17:01:58" Content="I'm wondering if a recent commit (possibly 7fdb328e73a3bfa60e6dd294468fa9566ceb6820) changed the way `aes_string()` responds when a variable is set to NULL.  &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;rm(list=ls(all=TRUE)) called by knitr,  because it's above the first chunk.&#xD;&#xA;require(ggplot2)&#xD;&#xA;require(datasets)&#xD;&#xA;&#xD;&#xA;#Create a simple dataset for the line&#xD;&#xA;dsLine &lt;- mtcars[  c(&quot;mpg&quot;,  &quot;wt&quot;) ]&#xD;&#xA;&#xD;&#xA;#Create a dataset for the ribbon and REMOVE the y variable&#xD;&#xA;dsRibbon &lt;- dsLine&#xD;&#xA;dsRibbon$upper &lt;- dsRibbon$wt + .5&#xD;&#xA;dsRibbon$lower &lt;- dsRibbon$wt - .5&#xD;&#xA;dsRibbon$waylower &lt;- dsRibbon$wt - 10&#xD;&#xA;&#xD;&#xA;dsRibbon$wt &lt;- NULL&#xD;&#xA;&#xD;&#xA;(g &lt;- ggplot(dsLine,  aes_string(x=&quot;mpg&quot;,  y=&quot;wt&quot;)) + geom_line())&#xD;&#xA;```&#xD;&#xA;Setting y to NULL works with `aes` (unlike `aes_string` below).&#xD;&#xA;```&#xD;&#xA;g + geom_ribbon(mapping=aes(y=NULL,  ymin=lower,  ymax=upper),  data=dsRibbon,  alpha=.1)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1372890/3043493/381e1922-e107-11e3-84d1-fd9c19e089c5.png)&#xD;&#xA;&#xD;&#xA;This still looks for 'wt',  even though y is set to NULL.&#xD;&#xA;```&#xD;&#xA;#   The error is &quot;Error in eval(expr,  envir,  enclos) : object 'wt' not found&quot;&#xD;&#xA;g + geom_ribbon(mapping=aes_string(y=NULL,  ymin=&quot;lower&quot;,  ymax=&quot;upper&quot;),  data=dsRibbon,  alpha=.1)&#xD;&#xA;```&#xD;&#xA;This looks for `wt`,  even though the the geom_ribbon doesn't need it. (Am I correct that y isn't needed?)&#xD;&#xA;```&#xD;&#xA;#   The error is &quot;Error in eval(expr,  envir,  enclos) : object 'wt' not found&quot;&#xD;&#xA;g + geom_ribbon(mapping=aes_string(ymin=&quot;lower&quot;,  ymax=&quot;upper&quot;),  data=dsRibbon,  alpha=.1)&#xD;&#xA;```&#xD;&#xA;This changes y to some variable that is present in the dataset,  but not used by geom_ribbon. This produces the intended graph.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;g + geom_ribbon(mapping=aes_string(y=&quot;lower&quot;,  ymin=&quot;lower&quot;,  ymax=&quot;upper&quot;),  data=dsRibbon,  alpha=.1)&#xD;&#xA;```&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1372890/3043546/9bf87ffa-e107-11e3-90b2-67db62a2594c.png)&#xD;&#xA;&#xD;&#xA;This changes y to some variable that is present in the dataset,  but not used by geom_ribbon. However the low value still affects the y coordinates.&#xD;&#xA;```&#xD;&#xA;g + geom_ribbon(mapping=aes_string(y=&quot;waylower&quot;,  ymin=&quot;lower&quot;,  ymax=&quot;upper&quot;),  data=dsRibbon,  alpha=.1)&#xD;&#xA;```&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1372890/3043540/9456e7d2-e107-11e3-805b-8213bef748af.png)&#xD;&#xA;&#xD;&#xA;(Brian Ripley was kind enough to point this out to me this morning that my [ Wats ](https://github.com/wibeasley/Wats) package will break with ggplot2 1.0.0.  I'm sorry for that I didn't notice from your April ggplot2 1.0 RC announcement that my package was causing  a trouble maker.)" />
      <Message Id="43790197" ParentId="966" UserId="1372890" Date="05/21/2014 17:41:47" Content="If it helps,  here is:&#xD;&#xA; 1. an [ Rpubs ](http://rpubs.com/wibeasley/17463) document that reproduces the sequence above.&#xD;&#xA; 1. @hadley 's [ Reverse Dependencies check ](https://github.com/wch/checkresults/blob/master/ggplot2/r-release/00check-summary.txt#L1861-L1898) that identified that a change/problem occurred." />
    </Messages>
  </Topic>
  <Topic Id="967" Title="geom_hex fails when filled with a continuous variable">
    <Messages>
      <Message Id="0" ParentId="967" UserId="197589" Date="05/22/2014 11:46:03" Content="To reproduce,  try:&#xD;&#xA;&#xD;&#xA;    d &lt;- ggplot(diamonds,  aes(carat,  price))&#xD;&#xA;    d + geom_hex(aes(fill = depth))&#xD;&#xA;    ## Error in unit(tic_pos.c,  &quot;mm&quot;) : 'x' and 'units' must have length &gt; 0&#xD;&#xA;&#xD;&#xA;Here's the stack trace using `options(error = recover)`:&#xD;&#xA;&#xD;&#xA;    1: print(list(data = list(carat = c(0.23,  0.21,  0.23,  0.29,  0.31,  0.24,  0.24,  &#xD;&#xA;    2: print.ggplot(list(data = list(carat = c(0.23,  0.21,  0.23,  0.29,  0.31,  0.24, &#xD;&#xA;    3: plot-render.r#185: ggplot_gtable(data)&#xD;&#xA;    4: plot-render.r#82: build_guides(plot$scales,  plot$layers,  plot$mapping,  posi&#xD;&#xA;    5: guides-.r#129: guides_gengrob(gdefs,  theme)&#xD;&#xA;    6: guides-.r#220: lapply(gdefs,  guide_gengrob,  theme)&#xD;&#xA;    7: FUN(X[ [ 1 ] ],  ...)&#xD;&#xA;    8: guides-.r#291: guide_gengrob.colorbar(X[ [ 1 ] ],  ...)&#xD;&#xA;    9: guide-colorbar.r#265: unit(tic_pos.c,  &quot;mm&quot;)" />
      <Message Id="112077815" ParentId="967" UserId="4196" Date="06/15/2015 13:49:38" Content="This no longer fails - it probably doesn't do what you want,  but makes sense as a consequence of the default grouping rules,  and the inability to stack/dodge hexagons." />
    </Messages>
  </Topic>
  <Topic Id="968" Title="Fix for bad URL in qplot docs">
    <Messages>
      <Message Id="0" ParentId="968" UserId="10200" Date="05/24/2014 19:31:43" Content="The URL for the sample chapter on the qplot function in both the R docs and the man docs were pointing to an old,  no longer available URL. I've updated the documentation to point to the latest URL.&#xD;&#xA;" />
      <Message Id="111267498" ParentId="968" UserId="4196" Date="06/11/2015 20:25:26" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="969" Title="Coord expand">
    <Messages>
      <Message Id="0" ParentId="969" UserId="4465050" Date="06/01/2014 11:23:57" Content="The difference between setting the limits through a coordinate system or via a scale is central to ggplot but the two procedures are not consistent with each other. Compared to scales,  the coord functions lack an expand argument. More importantly,  they do not apply the default expansion and the same plot will look different in function of which method was used to set limits.&#xD;&#xA;&#xD;&#xA;This pull request implements `xexpand` and `yexpand` arguments for coord functions,  with the same default expansion as for the scales.&#xD;&#xA;&#xD;&#xA;Since setting the limits through coord is symmetric to setting the limits with scales,  it should happen in the same place in the code. Furthermore,  this allows to know if the scale is continuous or discrete thanks to the scale object being passed along. To make this possible,  I changed the coord object to reflect the scale object structure. Coord objects now contains two lists named `x` and `y`,  each containing `expand` and limits. In order to make the difference between passing the whole coord object and passing the x or y component,  I added a dot to `coord`. When a function receives a `.coord`,  we know it is the x or y component of a coord object.&#xD;&#xA;&#xD;&#xA;One difficulty that I encountered while checking that everything was ok,  is that coord_polar does not have the x and y components. And it needs special treatment for the default expansion,  which depends on theta being equal to &quot;x&quot; or &quot;y&quot;.  My solution was to add x and y objects,  containing theta,  with class set to &quot;polar&quot; so that `coord_expand_defaults` dispatches correctly the .coord object to `coord_expand_defaults.polar`." />
      <Message Id="111267283" ParentId="969" UserId="4196" Date="06/11/2015 20:24:56" Content="I'm extremely nervous about introducing a change like this. Even if the behaviour is (arguably) better,  it's going to affect a huge amount of existing code." />
      <Message Id="111704976" ParentId="969" UserId="4465050" Date="06/13/2015 12:15:50" Content="@hadley &#xD;&#xA;yes I guess it's better to have the default behaviour to be just as before and optionally expand the coords,  so that the change won't affect existing code?&#xD;&#xA;&#xD;&#xA;there is actually a bad bug in this patch (IIRC,  the regular expand system for scales does not work correctly). I'll probably have to find another implementation approach,  but I'm not sure I'll have enough time to work on this until the end of June :/&#xD;&#xA;&#xD;&#xA;Are you planning to release soon?" />
      <Message Id="111759844" ParentId="969" UserId="4465050" Date="06/13/2015 23:20:21" Content="actually it was an easy fix,  so it should be good now. The visual tests pass." />
      <Message Id="112076938" ParentId="969" UserId="4196" Date="06/15/2015 13:47:06" Content="This is somewhat embarrassing to ask,  but how did you run the visual tests? I've forgotten how :/" />
      <Message Id="112080019" ParentId="969" UserId="4465050" Date="06/15/2015 13:58:13" Content="the instructions are hidden in Winston's wiki ;)&#xD;&#xA;https://github.com/wch/ggplot2/wiki&#xD;&#xA;&#xD;&#xA;apparently he wrote some tools to automatically diff the images,  but I didn't run them because they rely on git commits and the test results are gitignored. I think they should be included in the repo,  and maybe automatically checked by travis if the diffing is reliable enough." />
    </Messages>
  </Topic>
  <Topic Id="970" Title="check.class argument to ggsave">
    <Messages>
      <Message Id="0" ParentId="970" UserId="18970" Date="06/02/2014 23:34:55" Content="optional by-pass of ggsave checks that an object of class ggplot is being recorded. &#xD;&#xA;In addition,  a grid.draw method is defined,  rather than calling print()&#xD;&#xA;directly,  to allow other grobs such as modified gtables to be saved to a device with the same convenience." />
      <Message Id="111266567" ParentId="970" UserId="4196" Date="06/11/2015 20:23:09" Content="Hmmm,  I don't really like adding an additional argument. Any thoughts on alternative ways to check if it's saveable? Maybe we could have?&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;is_gridable &lt;- function(x) UseMethod(&quot;is_gridable&quot;)&#xD;&#xA;is_gridable.ggplot &lt;- function(x) TRUE&#xD;&#xA;is_gridable.grob &lt;- function(x) TRUE&#xD;&#xA;is_gridable.default &lt;- function(x) FALSE&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;?" />
      <Message Id="113173063" ParentId="970" UserId="4196" Date="06/18/2015 14:29:14" Content="Done in 7387d39a" />
      <Message Id="113663641" ParentId="970" UserId="18970" Date="06/19/2015 22:45:05" Content="Thanks! Any particular reason to have grid.draw.ggplot() calling print.ggplot(),  and not the opposite? &#xD;&#xA;" />
      <Message Id="113704133" ParentId="970" UserId="4196" Date="06/20/2015 03:47:16" Content="You're the one who wrote that ;) it probably should be the other way around but it required a bit too much thinking" />
    </Messages>
  </Topic>
  <Topic Id="971" Title="scales=&quot;free&quot; on facet_grid no longer has any effect on `y` axis">
    <Messages>
      <Message Id="0" ParentId="971" UserId="222586" Date="06/04/2014 22:33:59" Content="Since version 2.1.0.0 or so,  `scales=&quot;free&quot;` argument has no effect on `y` axis scaling.  I try the example from the documentation: &#xD;&#xA;&#xD;&#xA;```s&#xD;&#xA;mt &lt;- ggplot(mtcars,  aes(mpg,  wt,  colour = factor(cyl))) + geom_point()&#xD;&#xA;mt + facet_grid(. ~ cyl,  scales = &quot;free&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and I get: &#xD;&#xA;&#xD;&#xA;![ notfree ](https://cloud.githubusercontent.com/assets/222586/3180935/22055af6-ec38-11e3-9a27-31ce6243c5a4.png)&#xD;&#xA;&#xD;&#xA;```s&#xD;&#xA;sessionInfo()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;R version 3.1.0 (2014-04-10)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              &#xD;&#xA; [ 3 ] LC_TIME=C                  LC_COLLATE=C              &#xD;&#xA; [ 5 ] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=en_US.UTF-8       LC_NAME=C                 &#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C            &#xD;&#xA;[ 11 ] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices datasets  utils     methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0 knitr_1.6     devtools_1.5 &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] MASS_7.3-33       RCurl_1.95-4.1    Rcpp_0.11.1       colorspace_1.2-4 &#xD;&#xA; [ 5 ] digest_0.6.4      evaluate_0.5.5    formatR_0.10      grid_3.1.0       &#xD;&#xA; [ 9 ] gtable_0.1.2      httr_0.3          memoise_0.2.1     munsell_0.4.2    &#xD;&#xA;[ 13 ] parallel_3.1.0    plyr_1.8.1        proto_0.3-10      reshape2_1.4.0.99&#xD;&#xA;[ 17 ] scales_0.2.4      stringr_0.6.2     tools_3.1.0       whisker_0.3-2    &#xD;&#xA;```" />
      <Message Id="45165767" ParentId="971" UserId="222586" Date="06/04/2014 23:37:27" Content="(p.s. in this minimal example from the docs one could obviously facet_wrap if one wanted unique y axes,  or facet_grid with `mt + facet_grid(cyl ~ .,  scales = &quot;free&quot;)`.  My own use case has two variables to facet over and they should be represented with different y-scales,  which used to work before I upgraded ggplot.  (I'm having trouble downgrading to an earlier version due incompatible dependencies)&#xD;&#xA;" />
      <Message Id="45178650" ParentId="971" UserId="222586" Date="06/05/2014 03:56:21" Content="Thanks to some input on the ggplot2 mailing list I realize that the problem is that the definition of &quot;free_y&quot; has been redefined to mean only free between rows,  not free across columns.  While that's a sensible option,  I think some cases still deserve the original definition of &quot;free_y&quot; on all y axes. (see [ ggplot2 thread ](https://groups.google.com/d/msg/ggplot2/tAgULTbWe4k/SoEzV7rGfbwJ) for an example,  and again apologies for cross-posting).  " />
      <Message Id="111592054" ParentId="971" UserId="4196" Date="06/12/2015 19:14:04" Content="Did free y scales ever work like this? I think you want `facet_wrap()`." />
      <Message Id="111592538" ParentId="971" UserId="222586" Date="06/12/2015 19:15:51" Content="I think so too :-). thanks,  I shoulda closed this a while ago." />
    </Messages>
  </Topic>
  <Topic Id="972" Title="geom_violin throws error on data with zero variance">
    <Messages>
      <Message Id="0" ParentId="972" UserId="4941031" Date="06/10/2014 06:10:45" Content="As described [ here ](http://stackoverflow.com/questions/24129772/ggplot2-geom-violin-with-0-variance),  the following code  &#xD;&#xA;&#xD;&#xA;````&#xD;&#xA;dff=data.frame(x=factor(rep(1:2,  each=100)),  y=c(rnorm(100),  rep(0, 100)))&#xD;&#xA;ggplot(dff, aes(x=x, y=y)) + geom_violin()&#xD;&#xA;````&#xD;&#xA;terminates with&#xD;&#xA;````&#xD;&#xA;Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 100L) : &#xD;&#xA;  replacement has 1 row,  data has 0&#xD;&#xA;````&#xD;&#xA;It would be relatively easy to alter this behaviour and draw something instead,  either a single line or nothing at all." />
      <Message Id="111521343" ParentId="972" UserId="4196" Date="06/12/2015 15:09:49" Content="Even more minimal reprex&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dff &lt;- data.frame(x = factor(rep(1,  10)),  y = rep(0,  10))&#xD;&#xA;ggplot(dff,  aes(x,  y)) + geom_violin()&#xD;&#xA;```" />
      <Message Id="111523913" ParentId="972" UserId="4196" Date="06/12/2015 15:17:55" Content="Hmmmm,  the problem is actually the trimming. This code works just fine:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;dff &lt;- data.frame(x = factor(rep(1,  10)),  y = rep(0,  10))&#xD;&#xA;ggplot(dff,  aes(x,  y)) + geom_violin(trim = FALSE)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I think the easiest fix is to do the same thing that `geom_density()` does" />
      <Message Id="111975341" ParentId="972" UserId="4941031" Date="06/15/2015 08:23:37" Content="I've checked the fix,  works perfectly,  thanks!" />
    </Messages>
  </Topic>
  <Topic Id="973" Title="Error in stat_density example text">
    <Messages>
      <Message Id="0" ParentId="973" UserId="187033" Date="06/11/2014 12:00:23" Content="https://github.com/hadley/ggplot2/blob/master/R/stat-density.r#L53 says it will create a volcano plot but it is actually closer to a violin plot.&#xD;&#xA;https://www.google.com/search?q=volcano+plot&amp;tbm=isch" />
      <Message Id="111520961" ParentId="973" UserId="4196" Date="06/12/2015 15:08:24" Content="Agreed - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="974" Title="Facet titles">
    <Messages>
      <Message Id="0" ParentId="974" UserId="4465050" Date="06/15/2014 08:24:17" Content="This implements a `switch_strips` argument to `facet_wrap` and `facet_grid`,  which can be set to `x`,  `y` or `both` (the latter only for grids). This allows to display the facet strips near the axes. They then act as axes subtitles. The padding between the switched strips and their corresponding axes can be adjusted through a new theme setting.&#xD;&#xA;&#xD;&#xA;Displaying the facet titles near the axes especially makes sense when the facet title directly characterize a change in the axis (for example,  a transformation,  a different measure,  etc). This should be typically used in conjunction with a theme without boxes around the strips. I go over this in the updated documentation.&#xD;&#xA;&#xD;&#xA;A grid facetting with strips switched to both axes:&#xD;&#xA;![ facet1 ](https://cloud.githubusercontent.com/assets/4465050/3280482/1c1e20c4-f466-11e3-8718-a9dcbd88b551.png)&#xD;&#xA;&#xD;&#xA;A wrap facetting with free scales and strips switched to the x axis:&#xD;&#xA;![ facet2 ](https://cloud.githubusercontent.com/assets/4465050/3280481/1c1dcd0e-f466-11e3-9ae3-403ca7b3d9a3.png)&#xD;&#xA;" />
      <Message Id="111265558" ParentId="974" UserId="4196" Date="06/11/2015 20:20:44" Content="I like the idea. Can you please re-document and merge/rebase so I can do a review on cleaner code? (A bit of commit squashing wouldn't hurt either)" />
      <Message Id="111741774" ParentId="974" UserId="4465050" Date="06/13/2015 19:18:31" Content="Here you go." />
      <Message Id="113206445" ParentId="974" UserId="4196" Date="06/18/2015 16:17:20" Content="Overall,  looks good.  A few minor nit-picks inline." />
      <Message Id="113219529" ParentId="974" UserId="4465050" Date="06/18/2015 16:57:08" Content="voilà" />
      <Message Id="113253805" ParentId="974" UserId="4196" Date="06/18/2015 18:41:57" Content="Thanks! People are really going to like this feature" />
    </Messages>
  </Topic>
  <Topic Id="975" Title="Add new function geom_curve">
    <Messages>
      <Message Id="0" ParentId="975" UserId="7384126" Date="06/16/2014 10:17:09" Content="geom_curve adds curved lines to a plot,  similar to geom_segment adding straight lines.  " />
      <Message Id="96176883" ParentId="975" UserId="7384126" Date="04/25/2015 11:19:37" Content="updated it and created new pull request" />
    </Messages>
  </Topic>
  <Topic Id="976" Title="New theme_void(),  completely empty">
    <Messages>
      <Message Id="0" ParentId="976" UserId="18445" Date="06/17/2014 15:48:47" Content="" />
      <Message Id="111264860" ParentId="976" UserId="4196" Date="06/11/2015 20:19:28" Content="Can you please merge/rebase?" />
      <Message Id="111265135" ParentId="976" UserId="4196" Date="06/11/2015 20:19:53" Content="(BTW I'm going to be working on ggplot2 + the book for the next two weeks,  so now is a good time if there's other stuff you'd like to submit)" />
      <Message Id="111291468" ParentId="976" UserId="18445" Date="06/11/2015 22:15:15" Content="Rebased on current master and fix the NEWS bullet (put outside of release and remove extraneous piece that were committed by mistake)" />
      <Message Id="111291530" ParentId="976" UserId="18445" Date="06/11/2015 22:15:41" Content="Had to force push so the original comments here seem to be gone." />
      <Message Id="111478474" ParentId="976" UserId="4196" Date="06/12/2015 12:42:05" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="977" Title="Is it possible to change the default color for points using the theme() function ?">
    <Messages>
      <Message Id="0" ParentId="977" UserId="3227753" Date="06/23/2014 10:37:15" Content="The `theme()` function makes it easy to change the defaults for lines,  texts and background but I don't know how to change the defaults for points. Is it possible to change the default color of points ?" />
      <Message Id="46837841" ParentId="977" UserId="1741643" Date="06/23/2014 12:27:23" Content="Have you seen `update_geom_defaults()`?" />
    </Messages>
  </Topic>
  <Topic Id="978" Title="Would it be possible to add notes to a ggplot graph ?">
    <Messages>
      <Message Id="0" ParentId="978" UserId="3227753" Date="06/23/2014 10:59:35" Content="Very often,  we need to add a small text at the bottom of a graph to give the sources,  the field and other notes explaining how to read the graph. Would it be possible to create to add the field &quot;notes&quot; in the `labs()` function or a new function `notes()` which would make it easy to add some notes at the bottom of a graph. I know that there is a very complex solution using grid and gridExtra ([ link ](http://stackoverflow.com/questions/10014187/displaying-text-below-the-plot-generated-by-ggplot2)) butI think we need a simple solution." />
      <Message Id="46830935" ParentId="978" UserId="3592346" Date="06/23/2014 11:09:36" Content="There are several simple solutions.&#xA;&#xA;You can use the annotate-functions in ggplot2 to add text annotations to&#xA;the plots. If you desire some annotations beneath the plot,  as displayed in&#xA;the link,  I would imagine a solution with grid.array and any text-grob&#xA;producing functions. Although they sound like advanced solutions,  these are&#xA;very simple functions.&#xA;&#xA;Another solution would be to use Sweave or knitr to produce reports and add&#xA;additional information and references,  or just a caption. It relies on a&#xA;combination of R and LaTeX.&#xA;This solution has an added benefit of a fully functioning system for&#xA;formatting,  making references.&#xA;&#xA;I however find the question a bit troublesome,  as to which situations is it&#xA;necessary to produce a more lengthier caption within a plot,  that cannot be&#xA;sent as ordinary text alongside the image?" />
      <Message Id="46832213" ParentId="978" UserId="3227753" Date="06/23/2014 11:27:13" Content="I often draw graphs and show them to my colleagues without writing a full report using LaTeX. It can also be useful to share a graph on social networks such as twitter.&#xD;&#xA;&#xD;&#xA;To my knowledge,  `annotation()` only allows to add some text inside the plot,  not at the bottom. " />
      <Message Id="55830532" ParentId="978" UserId="295428" Date="09/16/2014 23:46:27" Content="Completely agree,  blaquans.  Same goes for ubiquitous `.csv` files - they should all list sources and methods used to produce them in comments.&#xD;&#xA;This is the heart of reproducible science and it's a shame this question is not being asked by every competent researcher.&#xD;&#xA;&#xD;&#xA;`grid.text()` is probably going to be the way forward for now.  Perhaps is is possible to manipulate metadata in PDFs through the pdf driver in `ggsave()`&#xD;&#xA;" />
      <Message Id="55862177" ParentId="978" UserId="3592346" Date="09/17/2014 08:11:04" Content="There's an awful lot of metadata going into a single plot,  if you want to describe datasources etc. &#xD;&#xA;&#xD;&#xA;Look instead into Sweave or knitr - it will produce a pdf (or other formats),  where you have a lot of tools to describe the datasource,  to include the actual code that transformed the data and which variables are plotted.&#xD;&#xA;Instead of sending a single plot,  send the pdf-report describing what they think is going on." />
      <Message Id="111520748" ParentId="978" UserId="4196" Date="06/12/2015 15:07:39" Content="I'm with @stefanedwards on this one." />
      <Message Id="111702230" ParentId="978" UserId="7840510" Date="06/13/2015 12:00:26" Content="With classic graphics and lattice it's very easy to add a note using `sub=` but it is quite awkward with ggplot2.   In fact,  it is such a pain that whenever I have such a need I typically use classic or lattice graphics instead.   From my own experience this is important and frequently needed and so I wanted to add my voice in favor of adding this." />
      <Message Id="117641734" ParentId="978" UserId="7840510" Date="07/01/2015 12:33:20" Content="Version 0.5.0 of the cowplot package (on CRAN) handles subtitles using the `add_sub` function." />
      <Message Id="117734191" ParentId="978" UserId="3227753" Date="07/01/2015 16:17:17" Content="@ ggrothendieck thanks" />
    </Messages>
  </Topic>
  <Topic Id="979" Title="Documentation for geom_boxplot">
    <Messages>
      <Message Id="0" ParentId="979" UserId="1090101" Date="06/26/2014 01:45:16" Content="Nitpicking: From the documentation of geom_boxplot in ggplot2 0.9.3.1:&#xD;&#xA;&#xD;&#xA;&quot;The upper and lower &quot;hinges&quot; correspond to the first and third quartiles (the 25th and 75th percentiles).&quot;&#xD;&#xA;&#xD;&#xA;Shouldn't it be &quot;The lower and upper &quot;hinges&quot; correspond...&quot;?" />
    </Messages>
  </Topic>
  <Topic Id="980" Title="sqrt_trans,  scale limit expansion,  and missing breaks">
    <Messages>
      <Message Id="0" ParentId="980" UserId="463252" Date="06/26/2014 18:22:03" Content="Prompted by a posting on the mailing list (https://groups.google.com/d/topic/ggplot2/IUje5H0jwm4).&#xD;&#xA;&#xD;&#xA;# Summary&#xD;&#xA;&#xD;&#xA;Specific problem: Breaks near 0 are not displayed when the square root transformation is applied to a scale.&#xD;&#xA;&#xD;&#xA;General problem: Scale expansion in transformed coordinate space can lead to values which are not meaningfully (or correctly) invertable to data space leading to improperly excluded breaks.&#xD;&#xA;&#xD;&#xA;# Reproducible example:&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;scales&quot;)&#xD;&#xA;&#xD;&#xA;DF &lt;- data.frame(x = seq(0, 1, by=0.1), &#xD;&#xA;                 y = seq(0, 1, by=0.1))&#xD;&#xA;&#xD;&#xA;ggplot(DF,  aes(x=x,  y=y)) + &#xD;&#xA;  geom_point() + &#xD;&#xA;  scale_x_sqrt() +&#xD;&#xA;  scale_y_continuous()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;# Expected result&#xD;&#xA;&#xD;&#xA;A plot with breaks labeled at 0,  0.25,  0.50,  0.75,  and 1.00&#xD;&#xA;&#xD;&#xA;# Actual results&#xD;&#xA;&#xD;&#xA;![ Actual results ](https://cloud.githubusercontent.com/assets/463252/3401986/6130d7b2-fd56-11e3-8b1f-8c62e15899fd.png)&#xD;&#xA;&#xD;&#xA;Note that there is no 0 break on the x-axis.&#xD;&#xA;&#xD;&#xA;# Discussion&#xD;&#xA;&#xD;&#xA;The error occurs because when the limits (in coordinate space) are expanded,  there are negative values which,  when transformed back to data space,  give the incorrect limits from which breaks are determined (or at least limited). Stepping through the effective steps that occur for getting the breaks shows:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;st &lt;- sqrt_trans()&#xD;&#xA;(x&lt;-st$transform(c(0, 1)))&#xD;&#xA;## [ 1 ] 0 1&#xD;&#xA;(x&lt;-expand_range(x,  0.05,  0))&#xD;&#xA;## [ 1 ] -0.05  1.05&#xD;&#xA;(limits&lt;-st$inverse(x))&#xD;&#xA;## [ 1 ] 0.0025 1.1025&#xD;&#xA;(breaks&lt;-st$breaks(limits))&#xD;&#xA;## [ 1 ] 0.00 0.25 0.50 0.75 1.00&#xD;&#xA;st$trans(breaks)&#xD;&#xA;## [ 1 ] 0.0000 0.5000 0.7071 0.8660 1.0000&#xD;&#xA;st$trans(limits)&#xD;&#xA;## [ 1 ] 0.05 1.05&#xD;&#xA;censor(st$trans(breaks),  st$trans(limits))&#xD;&#xA;## [ 1 ]     NA 0.5000 0.7071 0.8660 1.0000&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;The real problem is that the result of the `expand_range` call lies outside the domain of the transformation. How should extra-domain values be treated? &#xD;&#xA;&#xD;&#xA;# Workarounds&#xD;&#xA;&#xD;&#xA;## Don't square negative values&#xD;&#xA;&#xD;&#xA;One solution to this problem is an alternative transformation,  one that does not invert negative values. A transformation should be one-to-one (within its domain) and `sqrt_trans` is,  but it happily will run the inverse on negative values which can not occur if everything is constrained within the domain. A simple approach is to just map all negative values to 0&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;mysqrt_trans &lt;- function() { &#xD;&#xA;  trans_new(&quot;mysqrt&quot;,  &#xD;&#xA;            transform = base::sqrt, &#xD;&#xA;            inverse = function(x) ifelse(x&lt;0,  0,  x^2), &#xD;&#xA;            domain = c(0,  Inf))&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;## Squish range before inverting&#xD;&#xA;&#xD;&#xA;If we assume that all transformations are monotonic (I'm not sure if ggplot2/scales assume transformations are monotonic or just one-to-one; I can not come up with a useful transformation which is not,  though I can create a pathological one.),  then it is reasonable to squish any values outside the range (not domain) of the transformation. Bringing them back to the nearest extreme should be sufficient. Therefore a more general approach for an inverse would be&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;mysqrt_trans &lt;- function() { &#xD;&#xA;  domain &lt;- c(0,  Inf)&#xD;&#xA;  transform &lt;- base::sqrt&#xD;&#xA;  range &lt;- transform(domain)&#xD;&#xA;  trans_new(&quot;mysqrt&quot;,  &#xD;&#xA;            transform = transform, &#xD;&#xA;            inverse = function(x) squish(x,  range=range)^2, &#xD;&#xA;            domain = domain)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;## Squish to range whenever values are extended&#xD;&#xA;&#xD;&#xA;This approach makes it the responsibility of the code which manipulates transformed (coordinate space) values to squish those to the appropriate range if there is any chance that that range is violated. If monotonicity is assumed,  I think any interpolations should be safe,  but any operation which can result in a value more extreme than the existing most extreme values would need to be squished. If this approach is taken,  it would be worth adding an additional component `range` to the `trans` which is just the result of `transform(domain)`.&#xD;&#xA;&#xD;&#xA;The transformation,  then,  could have its inverse just assume that the data is in the range or it can check that before proceeding (just as now transform may or may not check domain before proceeding). Ideally,  the transformation should throw an error if either `transform` is called with values outside `domain` or `inverse` is called with values outside `range` and this would help pick out places where calling code is not behaving appropriately." />
      <Message Id="51468622" ParentId="980" UserId="3333348" Date="08/07/2014 13:09:05" Content="I agree the need to have a fully labelled scale. Not sure I understand the workarounds nor any would display the origin,  ie zero.&#xD;&#xA;It would be great that ticks are equally spaced in the display; currently ticks seem to be linearly spaced in the original scale." />
      <Message Id="111520286" ParentId="980" UserId="4196" Date="06/12/2015 15:05:58" Content="This seems like it's a problem that the scales package should be solving? Do you agree?" />
      <Message Id="113247570" ParentId="980" UserId="463252" Date="06/18/2015 18:21:48" Content="It should partially be dealt with by scales,  but I'm not sure it can completely be handled there. The square root transformation makes a good example as it is only defined for non-negative values. The original problem could be solved by the &quot;Squish range before inverting&quot; option above,  which does take place entirely in scales. However,  there is a side effect in doing that. The axis can then never go below zero. That includes any absolute padding that ggplot would want to add beyond the limits of the scale (there could never be space between the 0 on one axis and the other axis). I think most of the work should be in scales,  but then some thinking about exactly how expand interacts with transformations,  especially when taken beyond the domain/range,  needs to be made. I have not thought all the way through that." />
      <Message Id="113494785" ParentId="980" UserId="4196" Date="06/19/2015 12:12:25" Content="Another idea occurred to me - why not make the transformation `sign(x) * sqrt(abs(x))`? It seems like a useful generalisation,  and is a simple solution to this problem (which I think will be tricky to solve generally)" />
      <Message Id="113552880" ParentId="980" UserId="463252" Date="06/19/2015 15:42:22" Content="That would work for this particular case. Basically,  taking a transformation that is $[ 0, Inf ] \to [ 0, Inf ]$ and replacing it with one that is $[ -Inf, Inf ] \to [ -Inf, Inf ]$ that is identical where they overlap and similar/&quot;smooth&quot; at 0. But it won't solve the problem for any other transformation with an edge (e.g. log,  arcsin) that have no generalization across the boundary. This change also runs the risk of taking,  returning,  and plotting negative values where that is not expected." />
    </Messages>
  </Topic>
  <Topic Id="981" Title="Can more ggplot2 demo or example be provided?">
    <Messages>
      <Message Id="0" ParentId="981" UserId="6078409" Date="06/29/2014 12:42:26" Content="If R code file can be provided,  then my attention will be focused on modifying the R file to fit my practical situations on the basis of understanding of your book,   but now my extra task is to type all the code written in your book. &#xD;&#xA;&#xD;&#xA;According to my experience,  there are many books with code in Python,  such as &lt;&lt;Pyomo - Optimization Modeling in Python&gt;&gt;,  the code,  especially the demo code or example code are shared.  There is also a plenty of demo code for  python library matplotlib in the website http://matplotlib.org/examples/animation/basic_example.html which can copied and pasted into python compiler and be run easily. Under the installed folder of matplotlib,  there is also many example python code(although not so many as that on the website).  So I think python is more easy to learn than R to some extent. &#xD;&#xA;&#xD;&#xA;I've searched ggplot2 website in the  github,  but I failed to find no example about demo of ggplot2,  such as that in the additional file(which was collected from the web) which will be posted below." />
      <Message Id="47453553" ParentId="981" UserId="6078409" Date="06/29/2014 12:42:51" Content="# ggplot2（四）工具箱（1）常见图形&#xD;&#xA;&#xD;&#xA;# ggplot2包工具主要是指几何图形(geom)和统计变换(stat)，&#xD;&#xA;# 通过这两个参数的设置可以完成我们需要的图形制作。&#xD;&#xA;# 作图过程中我们必须意识到每个图层（layer）的目的和作用：&#xD;&#xA;# 展示数据、展示数据的描述性统计概况、添加额外元数据(metadata)，&#xD;&#xA;# geom和stat是ggplot2图层的最重要的部分。&#xD;&#xA;# 有关这两个选项更详尽的情况可以参考ggplot在线帮助文档，&#xD;&#xA;# 下面就通过几类统计图形的制作来介绍geom和stat。 &#xD;&#xA;# #1常见图形 面积区域图、条形图、直线、散点、多边形、拼图等都是&#xD;&#xA;# 一些基本图形，是x、y两个坐标轴方向上的图形。&#xD;&#xA;# geom_area()、geom_bar、geom_line、geom_poin、geom_polygon、&#xD;&#xA;# geom_tile等命令可以分别作出上述图形。&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;df = data.frame(x = c(3,  1,  5),  y = c(2,  4,  6),  label = c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;))&#xD;&#xA;&#xD;&#xA;p = ggplot(df,  aes(x,  y,  label = label)) + xlab(NULL) + ylab(NULL)&#xD;&#xA;&#xD;&#xA;p + geom_point() + ggtitle(&quot;geom_point&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_bar(stat = &quot;identity&quot;) + ggtitle(&quot;geom_bar(stat=\'identity\')&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_line() + ggtitle(&quot;geom_line&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_area() + ggtitle(&quot;geom_area&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_path() + ggtitle(&quot;geom_path&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_text() + ggtitle(&quot;geom_text&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_tile() + ggtitle(&quot;geom_tile&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;p + geom_polygon() + ggtitle(&quot;geom_polygon&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;#2分布图Distribution&#xD;&#xA;&#xD;&#xA;# 2.1对于单个连续变量 可以用直方图展示其分布；如果比较多组变量的分布，&#xD;&#xA;# 可以通过设置facets=.~var完成；频数多边形可以设置geom=&quot;freqpoly&quot;;&#xD;&#xA;# 条件密度图形可以设置position=&quot;fill&quot;, 例如：&#xD;&#xA;&#xD;&#xA;depth_dist = ggplot(diamonds,  aes(depth)) + xlim(58,  68)&#xD;&#xA;&#xD;&#xA;depth_dist + geom_histogram(aes(y = ..density..),  binwidth = 0.1) + facet_grid(cut ~ .)&#xD;&#xA;&#xD;&#xA;## Warning: position_stack requires constant width: output may be incorrect&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;depth_dist + geom_histogram(aes(fill = cut),  binwidth = 0.1,  position = &quot;fill&quot;)&#xD;&#xA;&#xD;&#xA;## Warning: position_fill requires constant width: output may be incorrect&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;depth_dist + geom_freqpoly(aes(y = ..density..,  colour = cut),  binwidth = 0.1)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 2 rows containing missing values (geom_path).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# 2.2 盒装图 ，如果在代码中使用stat_bin设置，就会自动生成&quot;计数&quot;（count）&#xD;&#xA;# 和&quot;密度&quot;(density)两个变量，通常都会默认使用count进行作图, &#xD;&#xA;# 如果进行相对比较可以考虑使用density进行作图。&#xD;&#xA;# 很多分布图都同时涉及geom和density，需要分别设置。 &#xD;&#xA;# 盒装图是个例外，geom_boxplot已经整合了其自身的geom和stat值&#xD;&#xA;# , 即geom_boxplot=stat_boxplot+geom_boxplot。&#xD;&#xA;# 下面的例子分别说明了分类变量是离散变量和连续变量的盒装图情况：&#xD;&#xA;&#xD;&#xA;library(reshape)&#xD;&#xA;&#xD;&#xA;## Loading required package: plyr&#xD;&#xA;&#xD;&#xA;## Attaching package: 'reshape'&#xD;&#xA;&#xD;&#xA;## The following object is masked from 'package:plyr':&#xD;&#xA;&#xD;&#xA;##&#xD;&#xA;&#xD;&#xA;## rename,  round_any&#xD;&#xA;&#xD;&#xA;qplot(cut,  depth,  data = diamonds,  geom = &quot;boxplot&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;qplot(carat,  depth,  data = diamonds,  geom = &quot;boxplot&quot;,  group = round_any(carat, &#xD;&#xA;                                                                         &#xD;&#xA;                                                                         0.1,  floor),  xlim = c(0,  3))&#xD;&#xA;&#xD;&#xA;## Warning: position_dodge requires constant width: output may be incorrect&#xD;&#xA;&#xD;&#xA;## Warning: Removed 2 rows containing missing values (geom_segment).&#xD;&#xA;&#xD;&#xA;## Warning: Removed 1 rows containing missing values (geom_segment).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# 2.3颤栗图（jitter) ，离散分布中对离散变量增加噪声的振动（颤栗？）图：&#xD;&#xA;geom_jitter=position_jitter+geom_point&#xD;&#xA;&#xD;&#xA;qplot(class,  cty,  data = mpg,  geom = &quot;jitter&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;qplot(class,  drv,  data = mpg,  geom = &quot;jitter&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# 2.4连续平滑密度图形，geom_density 在画密度分布图形时，当其是平滑、连续、无限的&#xD;&#xA;# ，我们可以利用调整参数来矫正。密度分布&#xD;&#xA;geom_denstiy=stat_density+geom_area&#xD;&#xA;&#xD;&#xA;qplot(depth,  data = diamonds,  geom = &quot;density&quot;,  xlim = c(54,  70))&#xD;&#xA;&#xD;&#xA;## Warning: Removed 38 rows containing non-finite values (stat_density).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d = qplot(depth,  data = diamonds,  geom = &quot;density&quot;,  xlim = c(54,  70),  fill = cut)&#xD;&#xA;&#xD;&#xA;d + scale_fill_hue(h = c(0,  360) + 15)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 37 rows containing non-finite values (stat_density).&#xD;&#xA;&#xD;&#xA;## Warning: Removed 1 rows containing non-finite values (stat_density).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;#3重叠处理Overplotting&#xD;&#xA;&#xD;&#xA;# 当数据很大的时候，散点图中的点会出现相互重叠的现象(overplotting)，&#xD;&#xA;# 这样图形就不能真实的反映数据信息。Overploting主要有以下几种情况：&#xD;&#xA;# 3.1少量的重叠 可以选择让散点更小，或者使用空心符号，例如：&#xD;&#xA;&#xD;&#xA;df &lt;- data.frame(x = rnorm(2000),  y = rnorm(2000))&#xD;&#xA;&#xD;&#xA;norm &lt;- ggplot(df,  aes(x,  y))&#xD;&#xA;&#xD;&#xA;norm + geom_point()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;norm + geom_point(shape = 1)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;norm + geom_point(shape = &quot;.&quot;) # 像素设置&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# 3.2大数据且较多的重叠&#xD;&#xA;# &#xD;&#xA;# 可以使用透明混合处理(alpha blending), R软件中，&#xD;&#xA;# 最低的透明度可以设置为1/256, 但这种方法对于重叠严重的效果不明显。例如：&#xD;&#xA;&#xD;&#xA;norm + geom_point(colour = &quot;black&quot;,  alpha = 1/2)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;norm + geom_point(colour = &quot;black&quot;,  alpha = 1/5)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;norm + geom_point(colour = &quot;black&quot;,  alpha = 1/10)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# 3.3 离散变量&#xD;&#xA;# &#xD;&#xA;# 可以通过随机的使散点振动jitter来减轻重叠，这种方法与透明混合处理相结合会更有效。例如：&#xD;&#xA;&#xD;&#xA;td &lt;- ggplot(diamonds,  aes(table,  depth)) + xlim(50,  70) + ylim(50,  70)&#xD;&#xA;&#xD;&#xA;td + geom_point()&#xD;&#xA;&#xD;&#xA;## Warning: Removed 36 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;td + geom_jitter()&#xD;&#xA;&#xD;&#xA;## Warning: Removed 44 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;jit &lt;- position_jitter(width = 0.5)&#xD;&#xA;&#xD;&#xA;td + geom_jitter(position = jit)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 45 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;td + geom_jitter(position = jit,  colour = &quot;black&quot;,  alpha = 1/10)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 43 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;td + geom_jitter(position = jit,  colour = &quot;black&quot;,  alpha = 1/50)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 42 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;td + geom_jitter(position = jit,  colour = &quot;black&quot;,  alpha = 1/200)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 40 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;3.4 散点分组计数作图（适用于二维密度估计问题） &#xD;&#xA;&#xD;&#xA;将图形分成血多小块(bin)或者六边形(hexbin)，可以通过bins=, binwidth控制小块(bin)的数量和尺寸。例如：&#xD;&#xA;&#xD;&#xA;d &lt;- ggplot(diamonds,  aes(carat,  price)) + xlim(1,  3) + theme(legend.position = &quot;none&quot;)&#xD;&#xA;&#xD;&#xA;d + stat_bin2d()&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_bin2d(bins = 10)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_bin2d(binwidth = c(0.02,  200))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_binhex()&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing missing values (stat_hexbin).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_binhex(bins = 10)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing missing values (stat_hexbin).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_binhex(binwidth = c(0.02,  200))&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing missing values (stat_hexbin).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;3.5 使用stat_density2d直接估计二维密度 &#xD;&#xA;&#xD;&#xA;在散点图上覆盖轮廓图，或者使用色彩拼图来展示二维密度，抑或按尺寸比例作密度图。例如：&#xD;&#xA;&#xD;&#xA;d &lt;- ggplot(diamonds,  aes(carat,  price)) + xlim(1,  3) + theme(legend.position = &quot;none&quot;)&#xD;&#xA;&#xD;&#xA;d + geom_point() + geom_density2d()&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing non-finite values (stat_density2d).&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing missing values (geom_point).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_density2d(geom = &quot;point&quot;,  aes(size = ..density..),  contour = F) + scale_size_area(max_size = 20)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing non-finite values (stat_density2d).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d + stat_density2d(geom = &quot;tile&quot;,  aes(fill = ..density..),  contour = F)&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing non-finite values (stat_density2d).&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;last_plot() + scale_fill_gradient(limits = c(1e-05,  8e-04))&#xD;&#xA;&#xD;&#xA;## Warning: Removed 34912 rows containing non-finite values (stat_density2d)." />
      <Message Id="47557591" ParentId="981" UserId="4196" Date="06/30/2014 17:04:32" Content="See http://ggplot2.org/book/" />
      <Message Id="47592285" ParentId="981" UserId="86978" Date="06/30/2014 21:52:50" Content="Also:&#xD;&#xA;http://docs.ggplot2.org/current/&#xD;&#xA;http://www.cookbook-r.com/Graphs/" />
    </Messages>
  </Topic>
  <Topic Id="982" Title="Rebased and redocumented version of PR #744">
    <Messages>
      <Message Id="0" ParentId="982" UserId="79913" Date="07/01/2014 17:46:26" Content="" />
      <Message Id="53452114" ParentId="982" UserId="79913" Date="08/26/2014 16:50:37" Content="Ping?&#xD;&#xA;&#xD;&#xA;The Travis failure is a test infrastructure/configuration issue,  not something introduced by this PR." />
      <Message Id="111264549" ParentId="982" UserId="4196" Date="06/11/2015 20:18:57" Content="Thanks! Ended up tweaking the test a bit to make it simpler." />
      <Message Id="111282732" ParentId="982" UserId="79913" Date="06/11/2015 21:30:24" Content="Thank you!" />
    </Messages>
  </Topic>
  <Topic Id="983" Title="Edit warning message to reflect intuitive use">
    <Messages>
      <Message Id="0" ParentId="983" UserId="2227806" Date="07/09/2014 18:49:15" Content="Stacking works fine and as expected whenever `ymin` values are greater than or equal to 0.&#xD;&#xA;And stacking does not really make sense if `ymin &lt; 0`,  indeed." />
      <Message Id="111262758" ParentId="983" UserId="4196" Date="06/11/2015 20:10:27" Content="Can you provide some evidence to back up that statement?" />
      <Message Id="111278272" ParentId="983" UserId="4196" Date="06/11/2015 21:09:44" Content="This does not look correct to me:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x = 1,  y = c(1,  3))&#xD;&#xA;&#xD;&#xA;ggplot(df,  aes(x,  ymin = y,  y = y + 0.5,  ymax = y + 1,  group = y))  +&#xD;&#xA;  geom_errorbar(position = &quot;stack&quot;)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="984" Title="allow ggplot_build to return an additional value: the processed data as ...">
    <Messages>
      <Message Id="0" ParentId="984" UserId="7672485" Date="07/09/2014 20:05:47" Content="...it is prior to calling calculate_stats,  to get info about each individual data point (e.g. which panel is it on?)" />
      <Message Id="111261807" ParentId="984" UserId="4196" Date="06/11/2015 20:06:55" Content="I'd rather always do this than have an additional option.  But why do you need it?" />
    </Messages>
  </Topic>
  <Topic Id="985" Title="size in geom_point using variable with all but 1 as NAs">
    <Messages>
      <Message Id="0" ParentId="985" UserId="1029847" Date="07/10/2014 08:54:29" Content="When passing a variable in the data.frame to the size argument in geom_point,  if the column to be all but one as NA,  all values get plotted equally,  i.e. NAs are not dropped. If two non-NA values exist,  the plot looks as expected.&#xD;&#xA;&#xD;&#xA;Wanted to know if it is an unavoidable consequence of how size is calculated,  or really a bug. It the later I could try finding/fixing it.&#xD;&#xA;&#xD;&#xA;  df &lt;- data.frame(year=rep(10:14,  each=3),  age=1:3,  data=runif(15))&#xD;&#xA;&#xD;&#xA;  # points sized as expected&#xD;&#xA;  ggplot(df,  aes(year,  age)) + geom_point(aes(size=data))&#xD;&#xA;  &#xD;&#xA;  # convert all values but 2 into NAs&#xD;&#xA;  df$data[ 1:13 ] &lt;- NA&#xD;&#xA;  # 2 points sized and shown&#xD;&#xA;  ggplot(df,  aes(year,  age)) + geom_point(aes(size=data),  na.rm=TRUE)&#xD;&#xA;&#xD;&#xA;  # convert all but one value into NA&#xD;&#xA;  df$data[ 1:14 ] &lt;- NA&#xD;&#xA;&#xD;&#xA;  # plot shows equal-sized dots for all datapoints&#xD;&#xA;  ggplot(df,  aes(year,  age)) + geom_point(aes(size=data),  na.rm=TRUE)&#xD;&#xA;&#xD;&#xA;I tried with different names for the data column,  but it made no difference. Tested in both ggplot2 1.0.0 from CRAN and 1.0.0.99 from github.&#xD;&#xA;&#xD;&#xA;Thanks" />
      <Message Id="111519974" ParentId="985" UserId="4196" Date="06/12/2015 15:04:34" Content="That is a strange one. I'll take a look. Even more minimal reprex:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x = rep(1:2,  each = 2),  y = rep(1:2,  2),  z = c(1,  NA,  NA,  NA))&#xD;&#xA;ggplot(df,  aes(x,  y,  size = z)) + geom_point()&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="986" Title="Segfault in annotate when using wrong positioning aesthetics">
    <Messages>
      <Message Id="0" ParentId="986" UserId="6433981" Date="07/15/2014 18:52:56" Content="When using `&lt;annotate&gt;` the positioning aesthetics change depending on they type of annotation. The listed options include x,  y,  yend,  xend,  ymin,  ymax,  xmin and xmax. &#xD;&#xA;&#xD;&#xA;Unless you have memorized which aesthetic goes with which annotation geom you'll get a segfault if you chose the wrong one. &#xD;&#xA;&#xD;&#xA; `&lt;annotate&gt;` should check that the supplied aesthetics match those required by the chosen geom and issue an error if they do not.&#xD;&#xA;&#xD;&#xA;I have encountered this problem on Mac OS X Mavericks with R 3.1.0 Mavericks and ggplot2 1.0.0. I imagine this problem is cross platform." />
      <Message Id="49214296" ParentId="986" UserId="463252" Date="07/16/2014 19:25:54" Content="I have not been able to reproduce this. Can you give example code which causes the segfault? For me,  the following codes&#xD;&#xA;```{ r }&#xD;&#xA;ggplot() +&#xD;&#xA;    annotate(&quot;hex&quot;,  x = 1,  label=&quot;free&quot;)&#xD;&#xA;ggplot() +&#xD;&#xA;    annotate(&quot;point&quot;,  xend = 4,  xmin = 2,  xmax = 5)&#xD;&#xA;ggplot() +&#xD;&#xA;    annotate(&quot;line&quot;,  xmin = 2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;all give&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error in exists(name,  envir = env,  mode = mode) : &#xD;&#xA;  argument &quot;env&quot; is missing,  with no default&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;With other mixtures of aesthetics set in the `annotate` call,  I can get different (and more informative) error message,  but I have not been able to create a segfault.&#xD;&#xA;&#xD;&#xA;My environment is different than yours (Windows,  R-3.1.1,  ggplot2 1.0.0) so I don't know if it is due to the environment or whether I just have not stumbled on the combination of aesthetics you saw the crash with.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: i386-w64-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 compiler_3.1.1   digest_0.6.4     grid_3.1.1      &#xD;&#xA; [ 5 ] gtable_0.1.2     labeling_0.2     MASS_7.3-33      munsell_0.4.2   &#xD;&#xA; [ 9 ] plyr_1.8.1       proto_0.3-10     Rcpp_0.11.2      reshape2_1.4    &#xD;&#xA;[ 13 ] scales_0.2.4     stringr_0.6.2    tools_3.1.1     &#xD;&#xA;```&#xD;&#xA;as well as&#xD;&#xA;```&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;```" />
      <Message Id="49221702" ParentId="986" UserId="6433981" Date="07/16/2014 20:25:35" Content="Hi Brian, &#xD;&#xA;I can reproduce a segfault every single time using this code:&#xD;&#xA;ggplot() + &#xD;&#xA;	annotate('point',  x = 1,  xend = 1,  ymax = 5)&#xD;&#xA;&#xD;&#xA;Here’s my session info:&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.0 (2014-04-10)&#xD;&#xA;Platform: x86_64-apple-darwin13.1.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] graphics  grDevices utils     datasets  stats     methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 data.table_1.9.2 digest_0.6.4     grid_3.1.0      &#xD;&#xA; [ 5 ] gtable_0.1.2     MASS_7.3-31      munsell_0.4.2    plyr_1.8.1      &#xD;&#xA; [ 9 ] proto_0.3-10     Rcpp_0.11.1      reshape2_1.4     scales_0.2.4    &#xD;&#xA;[ 13 ] stringr_0.6.2    tools_3.1.0    &#xD;&#xA;&#xD;&#xA;And the message:&#xD;&#xA;&#xD;&#xA; *** caught segfault ***&#xD;&#xA;address 0x0,  cause 'unknown'&#xD;&#xA;&#xD;&#xA;Traceback:&#xD;&#xA; 1: .Call(&quot;plyr_loop_apply&quot;,  PACKAGE = &quot;plyr&quot;,  n,  f)&#xD;&#xA; 2: loop_apply(n,  do.ply)&#xD;&#xA; 3: llply(.data = pieces,  .fun = .fun,  ...,  .progress = .progress,      .inform = .inform,  .parallel = .parallel,  .paropts = .paropts)&#xD;&#xA; 4: dlply(layer_data,  &quot;PANEL&quot;,  function(df) {     panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)    layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],  cs = plot$coord) },  .drop = FALSE)&#xD;&#xA; 5: (function (layer,  layer_data) {     if (nrow(layer_data) == 0)         return()    dlply(layer_data,  &quot;PANEL&quot;,  function(df) {         panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)        layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],              cs = plot$coord)     },  .drop = FALSE) })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA; 6: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA; 7: Map(build_grob,  plot$layer,  data)&#xD;&#xA; 8: ggplot_gtable(data)&#xD;&#xA; 9: print.ggplot(list(data = list(),  layers = list(&lt;environment&gt;),      scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  mapping = list(),      theme = list(),  coordinates = list(limits = list(x = NULL,          y = NULL)),  facet = list(shrink = TRUE),  plot_env = &lt;environment&gt;,      labels = list(x = &quot;x&quot;,  ymax = &quot;ymax&quot;)))&#xD;&#xA;10: print(list(data = list(),  layers = list(&lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,      mapping = list(),  theme = list(),  coordinates = list(limits = list(        x = NULL,  y = NULL)),  facet = list(shrink = TRUE),  plot_env = &lt;environment&gt;,      labels = list(x = &quot;x&quot;,  ymax = &quot;ymax&quot;)))&#xD;&#xA;&#xD;&#xA;On July 16,  2014 at 2:26:02 PM,  Brian Diggs (notifications@github.com) wrote:&#xD;&#xA;&#xD;&#xA;I have not been able to reproduce this. Can you give example code which causes the segfault? For me,  the following codes&#xD;&#xA;&#xD;&#xA;ggplot() +&#xD;&#xA;    annotate(&quot;hex&quot;,  x = 1,  label=&quot;free&quot;)&#xD;&#xA;ggplot() +&#xD;&#xA;    annotate(&quot;point&quot;,  xend = 4,  xmin = 2,  xmax = 5)&#xD;&#xA;ggplot() +&#xD;&#xA;    annotate(&quot;line&quot;,  xmin = 2)&#xD;&#xA;all give&#xD;&#xA;&#xD;&#xA;Error in exists(name,  envir = env,  mode = mode) :  &#xD;&#xA;  argument &quot;env&quot; is missing,  with no default&#xD;&#xA;&#xD;&#xA;With other mixtures of aesthetics set in the annotate call,  I can get different (and more informative) error message,  but I have not been able to create a segfault.&#xD;&#xA;&#xD;&#xA;My environment is different than yours (Windows,  R-3.1.1,  ggplot2 1.0.0) so I don't know if it is due to the environment or whether I just have not stumbled on the combination of aesthetics you saw the crash with.&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: i386-w64-mingw32/i386 (32-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252  &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252    &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                           &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252     &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base      &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 compiler_3.1.1   digest_0.6.4     grid_3.1.1       &#xD;&#xA; [ 5 ] gtable_0.1.2     labeling_0.2     MASS_7.3-33      munsell_0.4.2    &#xD;&#xA; [ 9 ] plyr_1.8.1       proto_0.3-10     Rcpp_0.11.2      reshape2_1.4     &#xD;&#xA;[ 13 ] scales_0.2.4     stringr_0.6.2    tools_3.1.1      &#xD;&#xA;&#xD;&#xA;as well as&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;&#xD;&#xA;—&#xD;&#xA;Reply to this email directly or view it on GitHub." />
      <Message Id="49223667" ParentId="986" UserId="463252" Date="07/16/2014 20:40:41" Content="Thanks for the reproducible example. And the traceback should be helpful as well.&#xD;&#xA;I am unable to get a segfault with your example on Windows (either R 3.1.0 or R 3.1.1). What I do get is&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Error: geom_point requires the following missing aesthetics: y&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I'll have to test it on a mac. " />
      <Message Id="49225293" ParentId="986" UserId="86978" Date="07/16/2014 20:52:43" Content="I haven't been able to reproduce it on my Mac. It gives an error but not a segfault for me.&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.0 (2014-04-10)&#xD;&#xA;Platform: x86_64-apple-darwin13.1.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 digest_0.6.4     grid_3.1.0       gtable_0.1.2    &#xD;&#xA; [ 5 ] MASS_7.3-31      munsell_0.4.2    plyr_1.8.1       proto_0.3-10    &#xD;&#xA; [ 9 ] Rcpp_0.11.1      reshape2_1.2.2   scales_0.2.4.99  stringr_0.6.2   &#xD;&#xA;&gt; ggplot() + &#xD;&#xA;+ annotate('point',  x = 1,  xend = 1,  ymax = 5)&#xD;&#xA;Error: geom_point requires the following missing aesthetics: y&#xD;&#xA;```" />
      <Message Id="49226327" ParentId="986" UserId="6433981" Date="07/16/2014 21:00:37" Content="Hi Winston and Brian, &#xD;&#xA;Winston,  I noticed you’re using reshape2_1.2.2 and I’m on reshape2_1.4,  maybe that has something to do with it? Although Brian is also using reshape2_1.4 on Windows 32.&#xD;&#xA;&#xD;&#xA;Let me know if there’s anything else I can do to track this down. It’s a very frustrating problem to have R go down on me while plotting!&#xD;&#xA;&#xD;&#xA;Joey&#xD;&#xA;&#xD;&#xA;On July 16,  2014 at 3:52:50 PM,  Winston Chang (notifications@github.com) wrote:&#xD;&#xA;&#xD;&#xA;I haven't been able to reproduce it on my Mac. It gives an error but not a segfault for me.&#xD;&#xA;&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.0 (2014-04-10)&#xD;&#xA;Platform: x86_64-apple-darwin13.1.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base      &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 digest_0.6.4     grid_3.1.0       gtable_0.1.2     &#xD;&#xA; [ 5 ] MASS_7.3-31      munsell_0.4.2    plyr_1.8.1       proto_0.3-10     &#xD;&#xA; [ 9 ] Rcpp_0.11.1      reshape2_1.2.2   scales_0.2.4.99  stringr_0.6.2    &#xD;&#xA;&gt; ggplot() +  &#xD;&#xA;+ annotate('point',  x = 1,  xend = 1,  ymax = 5)&#xD;&#xA;Error: geom_point requires the following missing aesthetics: y&#xD;&#xA;&#xD;&#xA;—&#xD;&#xA;Reply to this email directly or view it on GitHub." />
      <Message Id="49227084" ParentId="986" UserId="86978" Date="07/16/2014 21:06:19" Content="I updated to 1.4 and still don't have the problem. Perhaps you should try reinstalling all the listed packages? plyr seems like a good one to start with." />
      <Message Id="49227572" ParentId="986" UserId="463252" Date="07/16/2014 21:10:16" Content="The other thing I can think of (and that doesn't show up readily) is Mavericks vs. Snow Leopard builds of R. Which one do you have installed? Perchance,  did you install the Mavericks build when you previously had a Snow Leopard build? If so,  all packages need to be reinstalled because there are subtle incompatibilities that may show up like this (a segfault)." />
      <Message Id="49308852" ParentId="986" UserId="6433981" Date="07/17/2014 13:51:32" Content="Hello, &#xD;&#xA;I am running the Mavericks build. I did install only Mavericks builds of the packages though. I just removed ggplot2 and all of the packages loaded via namespace (except Rcpp) and reinstalled from source. I now get the following friendly error instead of a segfault. &#xD;&#xA;Error: geom_point requires the following missing aesthetics: y&#xD;&#xA;&#xD;&#xA;I’m not sure which package was the culprit,  but thanks for the tip.&#xD;&#xA;&#xD;&#xA;On July 16,  2014 at 4:10:23 PM,  Brian Diggs (notifications@github.com) wrote:&#xD;&#xA;&#xD;&#xA;The other thing I can think of (and that doesn't show up readily) is Mavericks vs. Snow Leopard builds of R. Which one do you have installed? Perchance,  did you install the Mavericks build when you previously had a Snow Leopard build? If so,  all packages need to be reinstalled because there are subtle incompatibilities that may show up like this (a segfault).&#xD;&#xA;&#xD;&#xA;—&#xD;&#xA;Reply to this email directly or view it on GitHub." />
    </Messages>
  </Topic>
  <Topic Id="987" Title="Error in histograms. The computation of intensity is wrong when distributions have small standard deviation">
    <Messages>
      <Message Id="0" ParentId="987" UserId="5766900" Date="07/16/2014 08:21:29" Content="Hello, &#xD;&#xA;&#xD;&#xA;I have stumble on an error when displaying histograms where the data have small standard deviation. When choosing to display the density instead of the count on the y axis,  the values are just wrong on the y axis.&#xD;&#xA;&#xD;&#xA;Here is a minimal code triggering the error:&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;dist1 &lt;- data.frame(length = rnorm(100000,  6,  0.01))&#xD;&#xA;dist2 &lt;- data.frame(length = rnorm(50000,  7,  0.01))&#xD;&#xA;#Now,  combine your two dataframes into one.  First make a new column in each.&#xD;&#xA;dist1$name &lt;- 'dist1'&#xD;&#xA;dist2$name &lt;- 'dist2'&#xD;&#xA;#and combine into your new data frame&#xD;&#xA;dataTest &lt;- rbind(dist1,  dist2)&#xD;&#xA;#display&#xD;&#xA;ggplot(dataTest,  aes(length,  fill = name)) + geom_histogram(alpha = 0.5,  aes(y = ..density..),  position = 'identity')&#xD;&#xA;" />
      <Message Id="49216842" ParentId="987" UserId="463252" Date="07/16/2014 19:46:54" Content="What is &quot;just wrong&quot; about them? The area under (each colored) density curve is 1. (Or,  discrete analogy,  the sum of the density times the bin width is 1 for each group/color.) The densities are all proportional to the counts in the bins (again,  within each group). If it helps in understanding or explaining,  you can look at&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(dataTest,  aes(length,  fill = name)) + geom_histogram(alpha = 0.5,  aes(y = ..density..),  position = 'identity')&#xD;&#xA;ggplot_build(p)$data[ [ 1 ] ]&#xD;&#xA;```&#xD;&#xA;If anything there is wrong,  which value is it and what should that value be? (For reproducibility,  I also recommend setting the random see before generating the data.)" />
      <Message Id="49230710" ParentId="987" UserId="5766900" Date="07/16/2014 21:35:36" Content="Ok,  the mistake was mine,  sorry. Thank you for your answer. I was expecting to actually see the ratio between the number of counts and total number of samples. This was a misunderstanding on my side of what the density is plotting.&#xD;&#xA;&#xD;&#xA;This displays the information I was expecting to see:&#xD;&#xA;&#xD;&#xA;` ggplot(dataTest,  aes(length,  fill = name)) + stat_bin(aes(y=..count../sum(..count..))) `&#xD;&#xA; " />
    </Messages>
  </Topic>
  <Topic Id="988" Title="Facet background colour mapping?">
    <Messages>
      <Message Id="0" ParentId="988" UserId="167164" Date="07/18/2014 05:50:43" Content="It would be nice to be able to change the facet background fill colour depending on the facet,  in a similar way to other categorical variable mappings.&#xD;&#xA;&#xD;&#xA;An example use-case: I have a dataset of hydrological data that has measurements at 20 different sites. Each site can be categorised into different vegetation types (e.g. savannah,  conifer,  rainforest,  etc.). I have a plot of some of the data,  facetted by site. I would like to change the background colour to match the vegetation type (light pastels,  with various hues) to allow easier distinction between the site types,  to aid in pattern detection. so: &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;site_types &lt;- c(site1='rainforest',  site2='evergreen',  ...)&#xD;&#xA;&#xD;&#xA;veg_colours &lt;- c(rainforest='lightgreen',  savannah='tan',  ...)&#xD;&#xA;&#xD;&#xA;ggplot(df,  aes(x=var1,  y=var2)) + facet_wrap(facets=c(site),  nrow=5,  aes(background=site_types[ site ])) +&#xD;&#xA;  scale_facet_background(values=veg_colours)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Not sure if that would be the way to implement it. &#xD;&#xA;&#xD;&#xA;If something like this isn't practical to implement,  is there any way to implement something like this manually?" />
      <Message Id="49609421" ParentId="988" UserId="4196" Date="07/21/2014 14:06:58" Content="Just use a `geom_rect()`" />
    </Messages>
  </Topic>
  <Topic Id="989" Title="Geom not exported?">
    <Messages>
      <Message Id="0" ParentId="989" UserId="5950242" Date="07/18/2014 17:00:59" Content="Hi! &#xD;&#xA;&#xD;&#xA;Thanks for the help at https://github.com/hadley/ggplot2/wiki/Creating-a-new-geom . &#xD;&#xA;&#xD;&#xA;The link to sample code breaks,  so I harvested code from the page and added `ggplot(data=data.frame(x=5, y=5, angle=pi/6, length=0.2), mapping=aes(x=x, y=y, angle=angle, length=length)) + layer(geom='field')`.&#xD;&#xA;&#xD;&#xA;I had to change `Geom` to `ggplot2:::Geom` apparently because Geom is not exported.  Will that survive modern CRAN check?  Also,  my example above gives `Error: attempt to apply non-function`. It would be very useful to author new geoms for use with particular data types.  Thanks in advance for any comments." />
      <Message Id="111701206" ParentId="989" UserId="4465050" Date="06/13/2015 11:26:16" Content="@hadley &#xD;&#xA;The other proto objects `Stat` and `Position` should be exported too as they can be useful to extend ggplot.&#xD;&#xA;&#xD;&#xA;Here is an example where I derived from `Stat`: http://stackoverflow.com/questions/10071944/ggplot2-geom-point-with-binned-x-axis-for-binary-data/24995101#24995101" />
      <Message Id="111704898" ParentId="989" UserId="4196" Date="06/13/2015 12:13:29" Content="I was just waiting for someone to ask for them ;)" />
    </Messages>
  </Topic>
  <Topic Id="990" Title="rqss in stat_quantile ignore the quantile with large number of values">
    <Messages>
      <Message Id="0" ParentId="990" UserId="5058965" Date="07/21/2014 15:20:26" Content="When dealing with a large number of values (more than 1e4),  then the rqss method seems to discard the quantile parameter. Here is a minimal example (with a non-linear relationship):&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    X &lt;- runif(1e4)&#xD;&#xA;    V &lt;- data.frame(x=X,  y=log(X+runif(length(X))))&#xD;&#xA;    p &lt;- ggplot(data = V,  aes(x=x,  y=y))&#xD;&#xA;    p + stat_quantile(quantiles = c(0.05,  0.95),  method = &quot;rqss&quot;)&#xD;&#xA;&#xD;&#xA;Instead of doing the quantile regression for 0.05,  it may do it for 0.5. This occurs at least half the time (decreasing the number of values reduces the frequency of this problem).&#xD;&#xA;&#xD;&#xA;This problem disappear when using the rq method." />
      <Message Id="111275674" ParentId="990" UserId="4196" Date="06/11/2015 20:58:18" Content="Seems like a bug in `rqss`?  " />
    </Messages>
  </Topic>
  <Topic Id="991" Title="Problem with position_jitterdodge">
    <Messages>
      <Message Id="0" ParentId="991" UserId="8241361" Date="07/23/2014 02:42:45" Content="Has anyone else seen the following error:&#xD;&#xA;&#xD;&#xA;Error in do.call(&quot;layer&quot;,  list(mapping = mapping,  data = data,  stat = stat,   : &#xD;&#xA;  could not find function &quot;position_jitterdodge&quot;&#xD;&#xA;&#xD;&#xA;It has something to do with a library not being loaded in the background I believe,  had fixed it about month ago,  but it has reared its ugly head again!&#xD;&#xA;&#xD;&#xA;set.seed(12345)&#xD;&#xA;hillest&lt;-c(rep(1.1, 100*4*3)+rnorm(100*4*3, sd=0.2), &#xD;&#xA;       rep(1.9, 100*4*3)+rnorm(100*4*3, sd=0.2))&#xD;&#xA;rep&lt;-rep(1:100, 4*3*2)&#xD;&#xA;process&lt;-rep(rep(c(&quot;Process 1&quot;, &quot;Process 2&quot;, &quot;Process 3&quot;, &quot;Process 4&quot;), each=100), 3*2)&#xD;&#xA;memorypar&lt;-rep(rep(c(&quot;0.1&quot;, &quot;0.2&quot;, &quot;0.3&quot;), each=4*100), 2)&#xD;&#xA;tailindex&lt;-rep(c(&quot;1.1&quot;, &quot;1.9&quot;), each=3*4*100)&#xD;&#xA;ex5&lt;-data.frame(hillest=hillest, rep=rep, process=process, memorypar=memorypar,  tailindex=tailindex)&#xD;&#xA;stat_sum_df &lt;- function(fun,  geom=&quot;crossbar&quot;,  ...) { stat_summary(fun.data=fun,  geom=geom,  ...)  }&#xD;&#xA;&#xD;&#xA;dodge &lt;- position_dodge(width=0.9) &#xD;&#xA;ggplot(ex5, aes(x=tailindex , y=hillest, color=memorypar, fill=memorypar))  + &#xD;&#xA;      facet_wrap(~process, nrow=2) + &#xD;&#xA;      geom_point(position=position_jitterdodge(dodge.width=0.9)) +&#xD;&#xA;      geom_boxplot(fill=&quot;white&quot;, outlier.colour = NA,  &#xD;&#xA;                        position = position_dodge(width=0.9))&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.0.2 (2013-09-25)&#xD;&#xA;Platform: x86_64-apple-darwin10.8.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA; [ 1 ] parallel  splines   datasets  utils     graphics  grDevices grid      stats     methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA; [ 1 ] ggplot2_0.9.3.1    reshape_0.8.5      pROC_1.5.4         plyr_1.8           doBy_4.5-6        &#xD;&#xA; [ 6 ] multcomp_1.2-18    mvtnorm_0.9-9994   lme4_1.0-5         Matrix_1.1-0       epitools_0.5-7    &#xD;&#xA;[ 11 ] epicalc_2.15.1.0   nnet_7.3-7         foreign_0.8-55     gbm_2.1            survival_2.37-7   &#xD;&#xA;[ 16 ] rpart_4.1-3        randomForest_4.6-7 limma_3.16.8       lattice_0.20-23    psych_1.3.10.12   &#xD;&#xA;[ 21 ] gregmisc_2.1.5     gplots_2.11.0.1    MASS_7.3-29        KernSmooth_2.23-10 caTools_1.14      &#xD;&#xA;[ 26 ] gtools_2.7.1       gmodels_2.15.4     gdata_2.12.0.2    &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] bitops_1.0-5        BradleyTerry2_1.0-5 brglm_0.5-9         car_2.0-18          codetools_0.2-8    &#xD;&#xA; [ 6 ] colorspace_1.2-2    dichromat_2.0-0     digest_0.6.3        foreach_1.4.1       gtable_0.1.2       &#xD;&#xA;[ 11 ] iterators_1.0.6     labeling_0.1        minqa_1.2.1         munsell_0.4         nlme_3.1-111       &#xD;&#xA;[ 16 ] proto_0.3-10        RColorBrewer_1.0-5  reshape2_1.2.2      scales_0.2.3        stringr_0.6.2      &#xD;&#xA;[ 21 ] tools_3.0.2        " />
      <Message Id="49828327" ParentId="991" UserId="8241361" Date="07/23/2014 03:10:46" Content="OK,  found I had to detach the old ggplot2 and install the new ggplot2 1.0. now works" />
    </Messages>
  </Topic>
  <Topic Id="992" Title="geom_boxplot with continuous x and without group aesthetics">
    <Messages>
      <Message Id="0" ParentId="992" UserId="1741643" Date="08/05/2014 20:31:35" Content="```&#xD;&#xA;d &lt;- data.frame(x=rep(1:10,  100),  y=runif(1000))&#xD;&#xA;ggplot(d) + geom_boxplot(aes(x=x,  y=y))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;will happily produce a single box,  while the intention is probably to produce the output of this code:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;d &lt;- data.frame(x=rep(1:10,  100),  y=runif(1000))&#xD;&#xA;ggplot(d) + geom_boxplot(aes(x=x,  y=y,  group=x))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Would a warning be appropriate here -- if `x` is continuous and the `group` aesthetics is missing?" />
      <Message Id="111277299" ParentId="992" UserId="4196" Date="06/11/2015 21:05:02" Content="Maaaaybe,  but I like that there's currently one unifying principle for grouping (i.e. all discrete variable for a group).  But if you feel strongly about,  I'd review a PR to add a warning." />
    </Messages>
  </Topic>
  <Topic Id="993" Title="New theme option to put panel/grid on top of data">
    <Messages>
      <Message Id="0" ParentId="993" UserId="571752" Date="08/06/2014 02:46:43" Content="A new theme option,  `panel.ontop`,  places the background objects (panel,  gridlines),  on *top* of the&#xD;&#xA;data in the plot if set to `TRUE`.  This allows one to place gridlines over the data.  One would typically also include a blank or transparent panel in the theme.&#xD;&#xA;&#xD;&#xA;This is implemented by changes in facet_panels.* functions,  changing the ordering of layers depending on the value of `theme$panel.ontop`.  `add_theme` was also changed to allow for logical theme elements.&#xD;&#xA;&#xD;&#xA;This is a simple implementation.  A more advanced one would allow gridlines to be placed on top of data while keeping the panel below data.&#xD;&#xA;&#xD;&#xA;Updated `theme()` documentation included via roxygen 4.0.1.&#xD;&#xA;&#xD;&#xA;Tests passed with the following exception. which I believe is unrelated:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Stats : .Error in predLoess(y,  x,  newx,  s,  weights,  pars$robust,  pars$span,  pars$degree,   : &#xD;&#xA;  NA/NaN/Inf in foreign function call (arg 5)&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In max(panels$ROW) : no non-missing arguments to max; returning -Inf&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Fixes #551&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="111261440" ParentId="993" UserId="4196" Date="06/11/2015 20:06:04" Content="Looks good. Could you please&#xD;&#xA;&#xD;&#xA;* [   ] merge/rebase (paying particular attention to NEWS)&#xD;&#xA;* [   ] re-roxygenise&#xD;&#xA;* [   ] add a compelling example somewhere?" />
      <Message Id="113205563" ParentId="993" UserId="4196" Date="06/18/2015 16:13:08" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="994" Title="ggplot - geom_step error">
    <Messages>
      <Message Id="0" ParentId="994" UserId="8388961" Date="08/07/2014 21:46:02" Content="I am trying to plot a graph of 3 observations (infusion rate,  sedation level,  tolerance level) as a function of time. &#xD;&#xA;My data frame looked some thing like this:&#xD;&#xA;&#xD;&#xA;![ capture ](https://cloud.githubusercontent.com/assets/8388961/3849702/0bd77fea-1e7c-11e4-88ba-77c774579854.JPG)&#xD;&#xA;&#xD;&#xA;So,  far I can plot scatter plot and line with this code:&#xD;&#xA;&#xD;&#xA; p &lt;- ggplot(data,  aes(group = Subtype,  colour = Subtype)) + facet_wrap(~ Pt_ID,  ncol = 6) + geom_point(aes(Time,  Observation)) + geom_point(aes(Time,  Rate),  colour = &quot;pink&quot;) + geom_line(aes(Time,  Rate)) + geom_line(aes(Time,  Observation))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;However the graph is not what I wanted,  I need to get a step plot.&#xD;&#xA;&#xD;&#xA;But when I use geom_step function with this code:&#xD;&#xA;&#xD;&#xA; p &lt;- ggplot(data,  aes(group = Subtype,  colour = Subtype)) + facet_wrap(~ Pt_ID,  ncol = 6) + geom_step(aes(Time,  Observation)) + geom_step(aes(Time,  Rate),  colour=&quot;pink&quot;)&#xD;&#xA;&#xD;&#xA;I received this error message:&#xD;&#xA;&#xD;&#xA;Error in grid.Call.graphics(L_lines,  x$x,  x$y,  index,  x$arrow) : invalid line type&#xD;&#xA;&#xD;&#xA;I am rather new with R. If anyone can tell me what is wrong with my code or any suggestions,  I'd really really appreciate it.&#xD;&#xA;" />
      <Message Id="111518972" ParentId="994" UserId="4196" Date="06/12/2015 14:59:37" Content="Please include a minimal reproducible example,  and reopen." />
    </Messages>
  </Topic>
  <Topic Id="995" Title="Added ..Name to each prototype so that str.proto() can show the names correctly">
    <Messages>
      <Message Id="0" ParentId="995" UserId="1018252" Date="08/08/2014 03:54:43" Content="Added ..Name to each prototype so that str.proto() can show the names correctly. For example,  the following is what the output should look like using this commit.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&gt; library(proto)&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; p=ggplot(&#xD;&#xA;+   data=data.frame(x = rep(1:10,  each = 2))&#xD;&#xA;+   ,  mapping=aes(x)&#xD;&#xA;+   ) + stat_bin(binwidth = 1)&#xD;&#xA;&gt; str(ggplot_build(p))&#xD;&#xA;List of 3&#xD;&#xA; $ data :List of 1&#xD;&#xA;  ..$ :'data.frame':	11 obs. of  12 variables:&#xD;&#xA;  .. ..$ y       : num [ 1:11 ] 0 2 2 2 2 2 2 2 2 2 ...&#xD;&#xA;  .. ..$ count   : num [ 1:11 ] 0 2 2 2 2 2 2 2 2 2 ...&#xD;&#xA;  .. ..$ x       : num [ 1:11 ] 0.5 1.5 2.5 3.5 4.5 5.5 6.5 7.5 8.5 9.5 ...&#xD;&#xA;  .. ..$ ndensity: num [ 1:11 ] 0 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA;  .. ..$ ncount  : num [ 1:11 ] 0 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA;  .. ..$ density : num [ 1:11 ] 0 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 ...&#xD;&#xA;  .. ..$ PANEL   : int [ 1:11 ] 1 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA;  .. ..$ group   : int [ 1:11 ] 1 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA;  .. ..$ ymin    : num [ 1:11 ] 0 0 0 0 0 0 0 0 0 0 ...&#xD;&#xA;  .. ..$ ymax    : num [ 1:11 ] 0 2 2 2 2 2 2 2 2 2 ...&#xD;&#xA;  .. ..$ xmin    : num [ 1:11 ] 0 1 2 3 4 5 6 7 8 9 ...&#xD;&#xA;  .. ..$ xmax    : num [ 1:11 ] 1 2 3 4 5 6 7 8 9 10 ...&#xD;&#xA; $ panel:List of 5&#xD;&#xA;  ..$ layout  :'data.frame':	1 obs. of  5 variables:&#xD;&#xA;  .. ..$ PANEL  : int 1&#xD;&#xA;  .. ..$ ROW    : int 1&#xD;&#xA;  .. ..$ COL    : int 1&#xD;&#xA;  .. ..$ SCALE_X: int 1&#xD;&#xA;  .. ..$ SCALE_Y: int 1&#xD;&#xA;  ..$ shrink  : logi TRUE&#xD;&#xA;  ..$ x_scales:List of 1&#xD;&#xA;  .. ..$ :List of 17&#xD;&#xA;  .. .. ..$ call        : language continuous_scale(aesthetics = c(&quot;x&quot;,  &quot;xmin&quot;,  &quot;xmax&quot;,  &quot;xend&quot;,  &quot;xintercept&quot;),  scale_name = &quot;position_c&quot;,       palette = identity,  expand = expand,  guide = &quot;none&quot;)&#xD;&#xA;  .. .. ..$ aesthetics  : chr [ 1:5 ] &quot;x&quot; &quot;xmin&quot; &quot;xmax&quot; &quot;xend&quot; ...&#xD;&#xA;  .. .. ..$ scale_name  : chr &quot;position_c&quot;&#xD;&#xA;  .. .. ..$ palette     :function (x)  &#xD;&#xA;  .. .. ..$ range       :Reference class 'Continuous' [ package &quot;scales&quot; ] with 1 fields&#xD;&#xA;  .. .. .. ..$ range: num [ 1:2 ] 0 11&#xD;&#xA;  .. .. .. ..and 15 methods,  of which 3 are possibly relevant:&#xD;&#xA;  .. .. .. ..  initialize,  reset,  train&#xD;&#xA;  .. .. ..$ limits      : NULL&#xD;&#xA;  .. .. ..$ trans       :List of 6&#xD;&#xA;  .. .. .. ..$ name     : chr &quot;identity&quot;&#xD;&#xA;  .. .. .. ..$ transform:function (x)  &#xD;&#xA;  .. .. .. ..$ inverse  :function (x)  &#xD;&#xA;  .. .. .. ..$ breaks   :function (x)  &#xD;&#xA;  .. .. .. ..$ format   :function (x)  &#xD;&#xA;  .. .. .. ..$ domain   : num [ 1:2 ] -Inf Inf&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;trans&quot;&#xD;&#xA;  .. .. ..$ na.value    : num NA&#xD;&#xA;  .. .. ..$ expand      : list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ rescaler    :function (x,  to = c(0,  1),  from = range(x,  na.rm = TRUE))  &#xD;&#xA;  .. .. ..$ oob         :function (x,  range = c(0,  1),  only.finite = TRUE)  &#xD;&#xA;  .. .. ..$ name        : NULL&#xD;&#xA;  .. .. ..$ breaks      : list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ minor_breaks: list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ labels      : list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ legend      : NULL&#xD;&#xA;  .. .. ..$ guide       : chr &quot;none&quot;&#xD;&#xA;  .. .. ..- attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;position_c&quot; &quot;continuous&quot; &quot;scale&quot;&#xD;&#xA;  ..$ y_scales:List of 1&#xD;&#xA;  .. ..$ :List of 17&#xD;&#xA;  .. .. ..$ call        : language continuous_scale(aesthetics = c(&quot;y&quot;,  &quot;ymin&quot;,  &quot;ymax&quot;,  &quot;yend&quot;,  &quot;yintercept&quot;,  &quot;ymin_final&quot;,  &quot;ymax_final&quot;),       scale_name = &quot;position_c&quot;,  palette = identity,  expand = expand,  guide = &quot;none&quot;)&#xD;&#xA;  .. .. ..$ aesthetics  : chr [ 1:7 ] &quot;y&quot; &quot;ymin&quot; &quot;ymax&quot; &quot;yend&quot; ...&#xD;&#xA;  .. .. ..$ scale_name  : chr &quot;position_c&quot;&#xD;&#xA;  .. .. ..$ palette     :function (x)  &#xD;&#xA;  .. .. ..$ range       :Reference class 'Continuous' [ package &quot;scales&quot; ] with 1 fields&#xD;&#xA;  .. .. .. ..$ range: num [ 1:2 ] 0 2&#xD;&#xA;  .. .. .. ..and 15 methods,  of which 3 are possibly relevant:&#xD;&#xA;  .. .. .. ..  initialize,  reset,  train&#xD;&#xA;  .. .. ..$ limits      : NULL&#xD;&#xA;  .. .. ..$ trans       :List of 6&#xD;&#xA;  .. .. .. ..$ name     : chr &quot;identity&quot;&#xD;&#xA;  .. .. .. ..$ transform:function (x)  &#xD;&#xA;  .. .. .. ..$ inverse  :function (x)  &#xD;&#xA;  .. .. .. ..$ breaks   :function (x)  &#xD;&#xA;  .. .. .. ..$ format   :function (x)  &#xD;&#xA;  .. .. .. ..$ domain   : num [ 1:2 ] -Inf Inf&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;trans&quot;&#xD;&#xA;  .. .. ..$ na.value    : num NA&#xD;&#xA;  .. .. ..$ expand      : list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ rescaler    :function (x,  to = c(0,  1),  from = range(x,  na.rm = TRUE))  &#xD;&#xA;  .. .. ..$ oob         :function (x,  range = c(0,  1),  only.finite = TRUE)  &#xD;&#xA;  .. .. ..$ name        : NULL&#xD;&#xA;  .. .. ..$ breaks      : list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ minor_breaks: list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ labels      : list()&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. ..$ legend      : NULL&#xD;&#xA;  .. .. ..$ guide       : chr &quot;none&quot;&#xD;&#xA;  .. .. ..- attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;position_c&quot; &quot;continuous&quot; &quot;scale&quot;&#xD;&#xA;  ..$ ranges  :List of 1&#xD;&#xA;  .. ..$ :List of 12&#xD;&#xA;  .. .. ..$ x.range       : num [ 1:2 ] -0.55 11.55&#xD;&#xA;  .. .. ..$ x.labels      : chr [ 1:4 ] &quot;0&quot; &quot;3&quot; &quot;6&quot; &quot;9&quot;&#xD;&#xA;  .. .. ..$ x.major       : num [ 1:4 ] 0.0455 0.2934 0.5413 0.7893&#xD;&#xA;  .. .. ..$ x.minor       : num [ 1:8 ] 0.0455 0.1694 0.2934 0.4174 0.5413 ...&#xD;&#xA;  .. .. ..$ x.major_source: num [ 1:4 ] 0 3 6 9&#xD;&#xA;  .. .. ..$ x.minor_source: num [ 1:8 ] 0 1.5 3 4.5 6 7.5 9 10.5&#xD;&#xA;  .. .. ..$ y.range       : num [ 1:2 ] -0.1 2.1&#xD;&#xA;  .. .. ..$ y.labels      : chr [ 1:5 ] &quot;0.0&quot; &quot;0.5&quot; &quot;1.0&quot; &quot;1.5&quot; ...&#xD;&#xA;  .. .. ..$ y.major       : num [ 1:5 ] 0.0455 0.2727 0.5 0.7273 0.9545&#xD;&#xA;  .. .. ..$ y.minor       : num [ 1:9 ] 0.0455 0.1591 0.2727 0.3864 0.5 ...&#xD;&#xA;  .. .. ..$ y.major_source: num [ 1:5 ] 0 0.5 1 1.5 2&#xD;&#xA;  .. .. ..$ y.minor_source: num [ 1:9 ] 0 0.25 0.5 0.75 1 1.25 1.5 1.75 2&#xD;&#xA;  ..- attr(*,  &quot;class&quot;)= chr &quot;panel&quot;&#xD;&#xA; $ plot :List of 9&#xD;&#xA;  ..$ data       :'data.frame':	20 obs. of  1 variable:&#xD;&#xA;  .. ..$ x: int [ 1:20 ] 1 1 2 2 3 3 4 4 5 5 ...&#xD;&#xA;  ..$ layers     :List of 1&#xD;&#xA;  .. ..$ :proto object &#xD;&#xA; .. .. .. $ geom_params: Named list() &#xD;&#xA; .. .. .. $ mapping    : NULL &#xD;&#xA; .. .. .. $ stat_params:List of 6 &#xD;&#xA; .. .. ..  ..$ width   : num 0.9 &#xD;&#xA; .. .. ..  ..$ drop    : logi FALSE &#xD;&#xA; .. .. ..  ..$ right   : logi FALSE &#xD;&#xA; .. .. ..  ..$ binwidth: num 1 &#xD;&#xA; .. .. ..  ..$ origin  : NULL &#xD;&#xA; .. .. ..  ..$ breaks  : NULL &#xD;&#xA; .. .. .. $ stat       :proto StatBin  &#xD;&#xA; .. .. .. .. $ calculate_groups:function (.,  data,  ...)    &#xD;&#xA; .. .. .. .. $ objname         : chr &quot;bin&quot;  &#xD;&#xA; .. .. .. .. $ default_aes     :function (.)    &#xD;&#xA; .. .. .. .. $ default_geom    :function (.)    &#xD;&#xA; .. .. .. .. $ calculate       :function (.,  data,  scales,  binwidth = NULL,  origin = NULL,  breaks = NULL,  width = 0.9,  drop = FALSE,    &#xD;&#xA;    right = FALSE,  ...)    &#xD;&#xA; .. .. .. .. $ required_aes    : chr &quot;x&quot;  &#xD;&#xA; .. .. .. .. $ informed        : logi FALSE  &#xD;&#xA; .. .. ..  ..parent: proto Stat  &#xD;&#xA; .. .. .. .. .. $ class           :function (.)    &#xD;&#xA; .. .. .. .. .. $ parameters      :function (.)    &#xD;&#xA; .. .. .. .. .. $ calculate_groups:function (.,  data,  scales,  ...)    &#xD;&#xA; .. .. .. .. .. $ aesthetics      : list()  &#xD;&#xA; .. .. .. .. .. $ retransform     : logi TRUE  &#xD;&#xA; .. .. .. .. .. $ objname         : chr &quot;&quot;  &#xD;&#xA; .. .. .. .. .. $ pprint          :function (.,  newline = TRUE)    &#xD;&#xA; .. .. .. .. .. $ default_aes     :function (.)    &#xD;&#xA; .. .. .. .. .. $ desc            : chr &quot;&quot;  &#xD;&#xA; .. .. .. .. .. $ default_geom    :function (.)    &#xD;&#xA; .. .. .. .. .. $ calculate       :function (.,  data,  scales,  ...)    &#xD;&#xA; .. .. .. .. .. $ default_pos     :function (.)    &#xD;&#xA; .. .. .. .. .. $ required_aes    : NULL  &#xD;&#xA; .. .. .. .. .. $ new             :function (.,  mapping = aes(),  data = NULL,  geom = NULL,  position = NULL,  ...)    &#xD;&#xA; .. .. .. .. .. parent: proto TopLevel  &#xD;&#xA; .. .. .. .. .. .. $ bolus   :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ my_names:function (.)    &#xD;&#xA; .. .. .. .. .. .. $ params  :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ find_all:function (.,  only.documented = FALSE)    &#xD;&#xA; .. .. .. .. .. .. $ hash    :function (.,  ...)    &#xD;&#xA; .. .. .. .. .. .. $ myName  :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ find    :function (.,  name)    &#xD;&#xA; .. .. .. .. .. .. $ my_name :function (.,  prefix = TRUE)    &#xD;&#xA; .. .. .. .. .. .. $ settings:function (.)    &#xD;&#xA; .. .. .. $ inherit.aes: logi TRUE &#xD;&#xA; .. .. .. $ geom       :proto GeomBar  &#xD;&#xA; .. .. .. .. $ default_stat  :function (.)    &#xD;&#xA; .. .. .. .. $ reparameterise:function (.,  df,  params)    &#xD;&#xA; .. .. .. .. $ objname       : chr &quot;bar&quot;  &#xD;&#xA; .. .. .. .. $ default_aes   :function (.)    &#xD;&#xA; .. .. .. .. $ draw_groups   :function (.,  data,  scales,  coordinates,  ...)    &#xD;&#xA; .. .. .. .. $ guide_geom    :function (.)    &#xD;&#xA; .. .. .. .. $ default_pos   :function (.)    &#xD;&#xA; .. .. .. .. $ required_aes  : chr &quot;x&quot;  &#xD;&#xA; .. .. ..  ..parent: proto Geom  &#xD;&#xA; .. .. .. .. .. $ draw          :function (...)    &#xD;&#xA; .. .. .. .. .. $ class         :function (.)    &#xD;&#xA; .. .. .. .. .. $ parameters    :function (.)    &#xD;&#xA; .. .. .. .. .. $ reparameterise:function (.,  data,  params)    &#xD;&#xA; .. .. .. .. .. $ pprint        :function (.,  newline = TRUE)    &#xD;&#xA; .. .. .. .. .. $ default_aes   :function (.)    &#xD;&#xA; .. .. .. .. .. $ draw_groups   :function (.,  data,  scales,  coordinates,  ...)    &#xD;&#xA; .. .. .. .. .. $ guide_geom    :function (.)    &#xD;&#xA; .. .. .. .. .. $ default_pos   :function (.)    &#xD;&#xA; .. .. .. .. .. $ required_aes  : NULL  &#xD;&#xA; .. .. .. .. .. $ new           :function (.,  mapping = NULL,  data = NULL,  stat = NULL,  position = NULL,  ...)    &#xD;&#xA; .. .. .. .. .. parent: proto TopLevel  &#xD;&#xA; .. .. .. .. .. .. $ bolus   :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ my_names:function (.)    &#xD;&#xA; .. .. .. .. .. .. $ params  :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ find_all:function (.,  only.documented = FALSE)    &#xD;&#xA; .. .. .. .. .. .. $ hash    :function (.,  ...)    &#xD;&#xA; .. .. .. .. .. .. $ myName  :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ find    :function (.,  name)    &#xD;&#xA; .. .. .. .. .. .. $ my_name :function (.,  prefix = TRUE)    &#xD;&#xA; .. .. .. .. .. .. $ settings:function (.)    &#xD;&#xA; .. .. .. $ position   :proto object  &#xD;&#xA; .. .. .. .. $ width : NULL  &#xD;&#xA; .. .. .. .. $ height: NULL  &#xD;&#xA; .. .. ..  ..parent: proto PositionStack  &#xD;&#xA; .. .. .. .. .. $ adjust :function (.,  data)    &#xD;&#xA; .. .. .. .. .. $ objname: chr &quot;stack&quot;  &#xD;&#xA; .. .. .. .. .. parent: proto Position  &#xD;&#xA; .. .. .. .. .. .. $ adjust    :function (.,  data,  scales,  ...)    &#xD;&#xA; .. .. .. .. .. .. $ class     :function (.)    &#xD;&#xA; .. .. .. .. .. .. $ parameters:function (.)    &#xD;&#xA; .. .. .. .. .. .. $ width     : NULL  &#xD;&#xA; .. .. .. .. .. .. $ pprint    :function (.,  newline = TRUE)    &#xD;&#xA; .. .. .. .. .. .. $ height    : NULL  &#xD;&#xA; .. .. .. .. .. .. $ new       :function (.,  width = NULL,  height = NULL)    &#xD;&#xA; .. .. .. .. .. .. parent: proto TopLevel  &#xD;&#xA; .. .. .. .. .. .. .. $ bolus   :function (.)    &#xD;&#xA; .. .. .. .. .. .. .. $ my_names:function (.)    &#xD;&#xA; .. .. .. .. .. .. .. $ params  :function (.)    &#xD;&#xA; .. .. .. .. .. .. .. $ find_all:function (.,  only.documented = FALSE)    &#xD;&#xA; .. .. .. .. .. .. .. $ hash    :function (.,  ...)    &#xD;&#xA; .. .. .. .. .. .. .. $ myName  :function (.)    &#xD;&#xA; .. .. .. .. .. .. .. $ find    :function (.,  name)    &#xD;&#xA; .. .. .. .. .. .. .. $ my_name :function (.,  prefix = TRUE)    &#xD;&#xA; .. .. .. .. .. .. .. $ settings:function (.)    &#xD;&#xA; .. .. .. $ subset     : NULL &#xD;&#xA; .. .. .. $ data       : list() &#xD;&#xA; .. .. ..  ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot; &#xD;&#xA; .. .. .. $ show_guide : logi NA &#xD;&#xA;  ..$ scales     :Reference class 'Scales' [ package &quot;ggplot2&quot; ] with 1 fields&#xD;&#xA;  .. ..$ scales:List of 2&#xD;&#xA;  .. .. ..$ :List of 17&#xD;&#xA;  .. .. .. ..$ call        : language continuous_scale(aesthetics = c(&quot;x&quot;,  &quot;xmin&quot;,  &quot;xmax&quot;,  &quot;xend&quot;,  &quot;xintercept&quot;),  scale_name = &quot;position_c&quot;,       palette = identity,  expand = expand,  guide = &quot;none&quot;)&#xD;&#xA;  .. .. .. ..$ aesthetics  : chr [ 1:5 ] &quot;x&quot; &quot;xmin&quot; &quot;xmax&quot; &quot;xend&quot; ...&#xD;&#xA;  .. .. .. ..$ scale_name  : chr &quot;position_c&quot;&#xD;&#xA;  .. .. .. ..$ palette     :function (x)  &#xD;&#xA;  .. .. .. ..$ range       :Reference class 'Continuous' [ package &quot;scales&quot; ] with 1 fields&#xD;&#xA;  .. .. .. .. ..$ range: NULL&#xD;&#xA;  .. .. .. .. ..and 15 methods,  of which 3 are possibly relevant:&#xD;&#xA;  .. .. .. .. ..  initialize,  reset,  train&#xD;&#xA;  .. .. .. ..$ limits      : NULL&#xD;&#xA;  .. .. .. ..$ trans       :List of 6&#xD;&#xA;  .. .. .. .. ..$ name     : chr &quot;identity&quot;&#xD;&#xA;  .. .. .. .. ..$ transform:function (x)  &#xD;&#xA;  .. .. .. .. ..$ inverse  :function (x)  &#xD;&#xA;  .. .. .. .. ..$ breaks   :function (x)  &#xD;&#xA;  .. .. .. .. ..$ format   :function (x)  &#xD;&#xA;  .. .. .. .. ..$ domain   : num [ 1:2 ] -Inf Inf&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;trans&quot;&#xD;&#xA;  .. .. .. ..$ na.value    : num NA&#xD;&#xA;  .. .. .. ..$ expand      : list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ rescaler    :function (x,  to = c(0,  1),  from = range(x,  na.rm = TRUE))  &#xD;&#xA;  .. .. .. ..$ oob         :function (x,  range = c(0,  1),  only.finite = TRUE)  &#xD;&#xA;  .. .. .. ..$ name        : NULL&#xD;&#xA;  .. .. .. ..$ breaks      : list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ minor_breaks: list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ labels      : list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ legend      : NULL&#xD;&#xA;  .. .. .. ..$ guide       : chr &quot;none&quot;&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;position_c&quot; &quot;continuous&quot; &quot;scale&quot;&#xD;&#xA;  .. .. ..$ :List of 17&#xD;&#xA;  .. .. .. ..$ call        : language continuous_scale(aesthetics = c(&quot;y&quot;,  &quot;ymin&quot;,  &quot;ymax&quot;,  &quot;yend&quot;,  &quot;yintercept&quot;,  &quot;ymin_final&quot;,  &quot;ymax_final&quot;),       scale_name = &quot;position_c&quot;,  palette = identity,  expand = expand,  guide = &quot;none&quot;)&#xD;&#xA;  .. .. .. ..$ aesthetics  : chr [ 1:7 ] &quot;y&quot; &quot;ymin&quot; &quot;ymax&quot; &quot;yend&quot; ...&#xD;&#xA;  .. .. .. ..$ scale_name  : chr &quot;position_c&quot;&#xD;&#xA;  .. .. .. ..$ palette     :function (x)  &#xD;&#xA;  .. .. .. ..$ range       :Reference class 'Continuous' [ package &quot;scales&quot; ] with 1 fields&#xD;&#xA;  .. .. .. .. ..$ range: NULL&#xD;&#xA;  .. .. .. .. ..and 15 methods,  of which 3 are possibly relevant:&#xD;&#xA;  .. .. .. .. ..  initialize,  reset,  train&#xD;&#xA;  .. .. .. ..$ limits      : NULL&#xD;&#xA;  .. .. .. ..$ trans       :List of 6&#xD;&#xA;  .. .. .. .. ..$ name     : chr &quot;identity&quot;&#xD;&#xA;  .. .. .. .. ..$ transform:function (x)  &#xD;&#xA;  .. .. .. .. ..$ inverse  :function (x)  &#xD;&#xA;  .. .. .. .. ..$ breaks   :function (x)  &#xD;&#xA;  .. .. .. .. ..$ format   :function (x)  &#xD;&#xA;  .. .. .. .. ..$ domain   : num [ 1:2 ] -Inf Inf&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;trans&quot;&#xD;&#xA;  .. .. .. ..$ na.value    : num NA&#xD;&#xA;  .. .. .. ..$ expand      : list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ rescaler    :function (x,  to = c(0,  1),  from = range(x,  na.rm = TRUE))  &#xD;&#xA;  .. .. .. ..$ oob         :function (x,  range = c(0,  1),  only.finite = TRUE)  &#xD;&#xA;  .. .. .. ..$ name        : NULL&#xD;&#xA;  .. .. .. ..$ breaks      : list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ minor_breaks: list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ labels      : list()&#xD;&#xA;  .. .. .. .. ..- attr(*,  &quot;class&quot;)= chr &quot;waiver&quot;&#xD;&#xA;  .. .. .. ..$ legend      : NULL&#xD;&#xA;  .. .. .. ..$ guide       : chr &quot;none&quot;&#xD;&#xA;  .. .. .. ..- attr(*,  &quot;class&quot;)= chr [ 1:3 ] &quot;position_c&quot; &quot;continuous&quot; &quot;scale&quot;&#xD;&#xA;  .. ..and 21 methods,  of which 9 are possibly relevant:&#xD;&#xA;  .. ..  add,  clone,  find,  get_scales,  has_scale,  initialize,  input,  n,  non_position_scales&#xD;&#xA;  ..$ mapping    :List of 1&#xD;&#xA;  .. ..$ x: symbol x&#xD;&#xA;  ..$ theme      : list()&#xD;&#xA;  ..$ coordinates:List of 1&#xD;&#xA;  .. ..$ limits:List of 2&#xD;&#xA;  .. .. ..$ x: NULL&#xD;&#xA;  .. .. ..$ y: NULL&#xD;&#xA;  .. ..- attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;cartesian&quot; &quot;coord&quot;&#xD;&#xA;  ..$ facet      :List of 1&#xD;&#xA;  .. ..$ shrink: logi TRUE&#xD;&#xA;  .. ..- attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;null&quot; &quot;facet&quot;&#xD;&#xA;  ..$ plot_env   :&lt;environment: R_GlobalEnv&gt; &#xD;&#xA;  ..$ labels     :List of 2&#xD;&#xA;  .. ..$ x: chr &quot;x&quot;&#xD;&#xA;  .. ..$ y: chr &quot;count&quot;&#xD;&#xA;  ..- attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;gg&quot; &quot;ggplot&quot;&#xD;&#xA;&gt; &#xD;&#xA;```" />
      <Message Id="111260426" ParentId="995" UserId="4196" Date="06/11/2015 20:03:59" Content="Maybe the default constructor could set ..Name from objname?" />
      <Message Id="112931874" ParentId="995" UserId="1018252" Date="06/17/2015 20:09:55" Content="This could be a solution.&#xD;&#xA;&gt; Maybe the default constructor could set ..Name from objname?&#xD;&#xA;" />
      <Message Id="113173324" ParentId="995" UserId="4196" Date="06/18/2015 14:30:25" Content="Actually - I'd rather fix this in proto. If you're still interested,  could you please submit a PR at https://github.com/hadley/proto&#xD;&#xA;&#xD;&#xA;(But we're seriously considering switching from proto to R6,  so it might be worth holding off a couple of weeks)" />
    </Messages>
  </Topic>
  <Topic Id="996" Title="Memory overflow with scale_x_discrete()">
    <Messages>
      <Message Id="0" ParentId="996" UserId="7937389" Date="08/08/2014 18:22:51" Content="I have a simple situation where using scale_x_discrete will cause R to eat CPU and memory until it's killed.  I'm pretty sure it's a bug.  The command is at the bottom.&#xD;&#xA;&#xD;&#xA;    &gt; require(ggplot2)&#xD;&#xA;    Loading required package: ggplot2&#xD;&#xA;    &gt; sessionInfo()&#xD;&#xA;    R version 3.1.1 (2014-07-10)&#xD;&#xA;    Platform: x86_64-apple-darwin13.1.0 (64-bit)&#xD;&#xA;    &#xD;&#xA;    locale:&#xD;&#xA;    [ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;    &#xD;&#xA;    attached base packages:&#xD;&#xA;    [ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;    &#xD;&#xA;    other attached packages:&#xD;&#xA;    [ 1 ] ggplot2_1.0.0&#xD;&#xA;    &#xD;&#xA;    loaded via a namespace (and not attached):&#xD;&#xA;     [ 1 ] colorspace_1.2-4 digest_0.6.4     grid_3.1.1       gtable_0.1.2     MASS_7.3-33      munsell_0.4.2    plyr_1.8.1      &#xD;&#xA;     [ 8 ] proto_0.3-10     Rcpp_0.11.2      reshape2_1.4     scales_0.2.4     stringr_0.6.2    tools_3.1.1     &#xD;&#xA;    &gt; ggplot(data.frame(rate=rgamma(1000,  shape=.3,  scale=50000))) + geom_bar(stat=&quot;bin&quot;,  aes(rate*8),  breaks=10^(3:6)) + scale_x_discrete()&#xD;&#xA;    ## Now R hangs forever eating more and more RAM and CPU until killed." />
      <Message Id="111275596" ParentId="996" UserId="4196" Date="06/11/2015 20:57:53" Content="This is because you're creating hundreds of thousands of labels. I'm not sure what the right thing to do here is - generally ggplot2 doesn't prevent you from making plots that take an extremely long time (and a lot of memory) to plot" />
    </Messages>
  </Topic>
  <Topic Id="997" Title="Cannot specify breaks for histogram in log scale">
    <Messages>
      <Message Id="0" ParentId="997" UserId="7937389" Date="08/08/2014 19:31:34" Content="I cannot seem to create a histogram in a log x scale while specifying breaks.&#xD;&#xA;&#xD;&#xA;This works and defaults to range/30 breaks:&#xD;&#xA;&#xD;&#xA;    ggplot(data.frame(rate=rgamma(1000,  shape=1.3,  scale=500000))) +&#xD;&#xA;    stat_bin(geom=&quot;bar&quot;,  aes(rate)) +&#xD;&#xA;    scale_x_log10(breaks=10^(2:6),  labels=format_si('bit/s')(10^(2:6)))&#xD;&#xA;&#xD;&#xA;But if I try to specify the breaks,  it fails:&#xD;&#xA;&#xD;&#xA;    ggplot(data.frame(rate=rgamma(1000,  shape=1.3,  scale=500000))) +&#xD;&#xA;    stat_bin(geom=&quot;bar&quot;,  aes(rate),  breaks=10^(2:6)) +&#xD;&#xA;    scale_x_log10(breaks=10^(2:6),  labels=format_si('bit/s')(10^(2:6)))&#xD;&#xA;&#xD;&#xA;    Error in matrix(value,  n,  p) : &#xD;&#xA;      'data' must be of a vector type,  was 'NULL'&#xD;&#xA;    In addition: Warning messages:&#xD;&#xA;    1: Removed 4 rows containing missing values (position_stack). &#xD;&#xA;    2: In min(x) : no non-missing arguments to min; returning Inf&#xD;&#xA;    3: In max(x) : no non-missing arguments to max; returning -Inf&#xD;&#xA;    4: position_stack requires constant width: output may be incorrect &#xD;&#xA;" />
      <Message Id="51650564" ParentId="997" UserId="86978" Date="08/08/2014 20:02:17" Content="You can use `stat_bin(breaks = 2:6)`." />
    </Messages>
  </Topic>
  <Topic Id="998" Title="documentation of fun.data (in stat_summary) incorrect?">
    <Messages>
      <Message Id="0" ParentId="998" UserId="722231" Date="08/13/2014 02:03:00" Content="```&#xD;&#xA;fun.data	&#xD;&#xA;Complete summary function. Should take data frame as input and return data frame as output&#xD;&#xA;```&#xD;&#xA;But I believe that `fun.data` needs to take a **vector** as input and return a data frame,  a la `mean_sd`.&#xD;&#xA;" />
      <Message Id="111275304" ParentId="998" UserId="4196" Date="06/11/2015 20:56:17" Content="Yup,  sorry,  fixed now." />
    </Messages>
  </Topic>
  <Topic Id="999" Title="Suggestion: Geom replace infix operator">
    <Messages>
      <Message Id="0" ParentId="999" UserId="1542066" Date="08/15/2014 12:04:43" Content="In ggplot2,  using the %+% infix operator makes it pretty easy to replace the underlying data on an existing ggplot. I wonder wether there is a operator (or any other method) to remove and /or replace an existing geometry from a ggplot? &#xD;&#xA;&#xD;&#xA;[ It might be complicated to remove/replace a certain geom,  esp. if there are multiple ones of the same type ]" />
      <Message Id="110936650" ParentId="999" UserId="4196" Date="06/10/2015 22:31:02" Content="I'm pretty sure this is a bad idea,  given how easy it is to modify code to avoid adding the layer in the first place." />
    </Messages>
  </Topic>
  <Topic Id="1000" Title="stat_ecdf plots extra points">
    <Messages>
      <Message Id="0" ParentId="1000" UserId="826296" Date="08/16/2014 23:39:01" Content="When I try to plot cumulative density function using `stat_ecdf` and with `geom_point`,  I see a strange behavior: two extra points are added to my numbers,  one before everything,  and another one after everything else. This kind of make sense if the default `geom_step` was used for plotting,  but with `geom_point`,  this is very confusing if not outright wrong. A bug I think. &#xD;&#xA;&#xD;&#xA;Here is an example:&#xD;&#xA;&#xD;&#xA;    qplot(a, data=data.frame(a=1:10), stat=&quot;ecdf&quot;, geom=&quot;point&quot;)&#xD;&#xA;&#xD;&#xA;which produces:&#xD;&#xA;&#xD;&#xA;![ ecdf plot with one point extra point at zero and one at one ][ 1 ]&#xD;&#xA;&#xD;&#xA;Note the extra points at 0 and at 10. &#xD;&#xA;&#xD;&#xA;Here is my R session info:&#xD;&#xA;&#xD;&#xA;    &gt; sessionInfo()&#xD;&#xA;    R version 3.1.1 (2014-07-10)&#xD;&#xA;    Platform: x86_64-apple-darwin13.1.0 (64-bit)&#xD;&#xA;    ... &#xD;&#xA;    attached base packages:&#xD;&#xA;    [ 1 ] stats     graphics  grDevices utils     datasets  methods   base&#xD;&#xA;    other attached packages:&#xD;&#xA;    [ 1 ] scales_0.2.4  ggplot2_1.0.0&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;  [ 1 ]: http://i.stack.imgur.com/2QMTv.jpg" />
      <Message Id="111274841" ParentId="1000" UserId="4196" Date="06/11/2015 20:53:55" Content="I'd be happy to review a pull request to fix this." />
    </Messages>
  </Topic>
  <Topic Id="1001" Title="scale_colour_manual fails when named character is passed to values">
    <Messages>
      <Message Id="0" ParentId="1001" UserId="1666657" Date="08/20/2014 09:37:22" Content="I tried to pass a subset of a matrix with named dimensions to the values argument of scale_colour_manual,  but no colours appeared in the relevant elements,  not even defaults - instead the elements disappeared. Confusingly,  passing elements of the same matrix as an argument to theme() has the expected (normal) effect.&#xD;&#xA;&#xD;&#xA;Here is a reproducible example of the problem:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(pbtools)&#xD;&#xA;&#xD;&#xA;colourmatrix &lt;- structure(c(&quot;#f79646&quot;,  &quot;#4f81bd&quot;,  &quot;#f9b074&quot;,  &quot;#7ba0cd&quot;), &#xD;&#xA;                          .Dim = c(2L, 2L), &#xD;&#xA;                          .Dimnames = list(NULL,  c(&quot;&quot;,  &quot;coltint&quot;)))&#xD;&#xA;&#xD;&#xA;# Doesn't work - no error,  no colour in the scale,  but works in theme&#xD;&#xA;qplot(mtcars$mpg,  mtcars$cyl,  colour=factor(mtcars$vs)) +&#xD;&#xA;  scale_colour_manual(values=c(colourmatrix[ 1, 1 ], colourmatrix[ 2, 1 ])) +&#xD;&#xA;  theme(plot.background=element_rect(fill=colourmatrix[ 2, 1 ]))&#xD;&#xA;&#xD;&#xA;# Works&#xD;&#xA;qplot(mtcars$mpg,  mtcars$cyl,  colour=factor(mtcars$vs)) +&#xD;&#xA;  scale_colour_manual(values=c(colourmatrix[ 1, 1 ][ [ 1 ] ], colourmatrix[ 2, 1 ][ [ 1 ] ])) +&#xD;&#xA;  theme(plot.background=element_rect(fill=colourmatrix[ 2, 1 ]))&#xD;&#xA;&#xD;&#xA;# Works&#xD;&#xA;qplot(mtcars$mpg,  mtcars$cyl,  colour=factor(mtcars$vs)) +&#xD;&#xA;  scale_colour_manual(values=c(colourmatrix[ c(1, 2), 1 ])) +&#xD;&#xA;  theme(plot.background=element_rect(fill=colourmatrix[ 2, 1 ]))&#xD;&#xA;&#xD;&#xA;# Works when names are removed&#xD;&#xA;dimnames(colourmatrix) &lt;- NULL&#xD;&#xA;qplot(mtcars$mpg,  mtcars$cyl,  colour=factor(mtcars$vs)) +&#xD;&#xA;  scale_colour_manual(values=c(colourmatrix[ 1, 1 ], colourmatrix[ 2, 1 ])) +&#xD;&#xA;  theme(plot.background=element_rect(fill=colourmatrix[ 2, 1 ]))&#xD;&#xA;```" />
      <Message Id="111518895" ParentId="1001" UserId="4196" Date="06/12/2015 14:59:19" Content="The basic issue is `names(c(colourmatrix[ 1, 1 ], colourmatrix[ 2, 1 ]))`  - this this ends up going down the path that uses named vectors. Using `colourmatrix[ ,  1 ]` is an easy fix." />
    </Messages>
  </Topic>
  <Topic Id="1002" Title="created fortify.glm">
    <Messages>
      <Message Id="0" ParentId="1002" UserId="411740" Date="08/31/2014 23:36:35" Content="I created `fortify.glm` because at present `glm` models are handled by `fortify.lm`. This doesn't allow to change the `.fitted` values from `link` (the default),  to `response` or `terms`." />
      <Message Id="111260291" ParentId="1002" UserId="4196" Date="06/11/2015 20:03:19" Content="I've really gone off fortify in favour of the broom package." />
    </Messages>
  </Topic>
  <Topic Id="1003" Title="scatterplots of categorical variables cause 'row names were found from a short variable' warning">
    <Messages>
      <Message Id="0" ParentId="1003" UserId="197589" Date="09/02/2014 08:55:31" Content="Scatterplots of categorical variable cause a warning about short variable names being discarded to be thrown.  For example, &#xD;&#xA;&#xD;&#xA;    ggplot(mpg,  aes(manufacturer,  hwy)) + geom_point()&#xD;&#xA;    ## Warning message:&#xD;&#xA;    ## In data.frame(x = c(1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,   :&#xD;&#xA;    ##   row names were found from a short variable and have been discarded&#xD;&#xA;&#xD;&#xA;By setting `options(warn = 2)`,  we can see the traceback of where the problem occurs:&#xD;&#xA;&#xD;&#xA;    traceback(max.lines = 1)&#xD;&#xA;    ## 11: stop(list(message = &quot;(converted from warning) row names were found from a short variable and have been discarded&quot;,  &#xD;&#xA;    ##     ##   ...&#xD;&#xA;    ## 10: .Call(&quot;plyr_loop_apply&quot;,  PACKAGE = &quot;plyr&quot;,  n,  f)&#xD;&#xA;    ## 9: loop_apply(n,  do.ply)&#xD;&#xA;    ## 8: llply(.data = pieces,  .fun = .fun,  ...,  .progress = .progress,  &#xD;&#xA;    ##     ##  ...&#xD;&#xA;    ## 7: dlply(layer_data,  &quot;PANEL&quot;,  function(df) { &#xD;&#xA;    ##     ##  ...&#xD;&#xA;    ## 6: (function (layer,  layer_data) &#xD;&#xA;    ##     ##  ...&#xD;&#xA;    ## 5: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA;    ## 4: Map(build_grob,  plot$layer,  data)&#xD;&#xA;    ## 3: ggplot_gtable(data)&#xD;&#xA;    ## 2: print.ggplot(list(data = list(manufacturer = c(1L,  1L,  1L,  1L,  &#xD;&#xA;    ##     ##  ...&#xD;&#xA;    ## 1: print(list(data = list(manufacturer = c(1L,  1L,  1L,  1L,  1L,  1L,  &#xD;&#xA;    ##     ##  ...&#xD;&#xA;&#xD;&#xA;In general,  this problem is caused by a short named column when creating a data frame.  For example, &#xD;&#xA;&#xD;&#xA;    data.frame(x = c(a = 1,  b = 2),  y = 1:4)&#xD;&#xA;" />
      <Message Id="111276845" ParentId="1003" UserId="4196" Date="06/11/2015 21:02:41" Content="I can't reproduce this warning any more." />
    </Messages>
  </Topic>
  <Topic Id="1004" Title="'guides' documentation,  possible improvement in last example">
    <Messages>
      <Message Id="0" ParentId="1004" UserId="3583910" Date="09/02/2014 12:29:01" Content="In the last example in `?guides` and http://docs.ggplot2.org/0.9.3.1/guides.html,  the `aes`thetics used in the `qplot` call are `size`,  `colour` and `shape` (`size = hwy,  colour = cyl,  shape = drv`). However,  in `guides`,  `shape` is not mentioned,  but instead the unused aesthetic `alpha` appears. I suggest that `alpha` is replaced by `shape`." />
      <Message Id="111598256" ParentId="1004" UserId="4196" Date="06/12/2015 19:49:49" Content="Good catch - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1005" Title="`geom_bar()` broken when `stat=&quot;identity&quot;`">
    <Messages>
      <Message Id="0" ParentId="1005" UserId="650866" Date="09/05/2014 16:26:19" Content="With ggplot2 version 1.0.0,  I have:&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;dataf &lt;- read.table(textConnection(&quot;   A   B&#xD;&#xA;1      Aligned 10075311&#xD;&#xA;2    Unaligned   915250&#xD;&#xA;3      Aligned 11259625&#xD;&#xA;4    Unaligned   736716&#xD;&#xA;5      Aligned  9826630&#xD;&#xA;6    Unaligned  1591678&#xD;&#xA;&quot;),  header=TRUE)&#xD;&#xA;p &lt;- ggplot(dataf) + &#xD;&#xA;        geom_bar(aes(x=B,  fill=A), &#xD;&#xA;                          stat=&quot;identity&quot;)&#xD;&#xA;print(p)&#xD;&#xA;```&#xD;&#xA;results in&#xD;&#xA;```&#xD;&#xA;Error in exists(name,  envir = env,  mode = mode) : &#xD;&#xA;  argument &quot;env&quot; is missing,  with no default&#xD;&#xA;```&#xD;&#xA;l" />
      <Message Id="54650089" ParentId="1005" UserId="3333348" Date="09/05/2014 16:41:18" Content="Hi Laurent, &#xD;&#xA;&#xD;&#xA;Not sure which result you expect,  but the following code is working. I moved the aes and called the index column I.&#xD;&#xA;&#xD;&#xA;Cheers from Marseille.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;library(ggplot2)&#xD;&#xA;dataf &lt;- read.table(textConnection(&quot;I   A   B&#xD;&#xA;1      Aligned 10075311&#xD;&#xA;2    Unaligned   915250&#xD;&#xA;3      Aligned 11259625&#xD;&#xA;4    Unaligned   736716&#xD;&#xA;5      Aligned  9826630&#xD;&#xA;6    Unaligned  1591678&#xD;&#xA;&quot;),  header=TRUE)&#xD;&#xA;&#xD;&#xA;ggplot(dataf,  aes(x=A,  , y=B,  fill=A)) + &#xD;&#xA;  geom_bar(stat=&quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;ggplot(dataf,  aes(x=I,  , y=B,  fill=A)) + &#xD;&#xA;  geom_bar(stat=&quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;From the examples&#xD;&#xA;```&#xD;&#xA;# When the data contains y values in a column,  use stat=&quot;identity&quot;&#xD;&#xA;library(plyr)&#xD;&#xA;# Calculate the mean mpg for each level of cyl&#xD;&#xA;mm &lt;- ddply(mtcars,  &quot;cyl&quot;,  summarise,  mmpg = mean(mpg))&#xD;&#xA;ggplot(mm,  aes(x = factor(cyl),  y = mmpg)) + geom_bar(stat = &quot;identity&quot;)&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="54653336" ParentId="1005" UserId="650866" Date="09/05/2014 17:07:42" Content="Ah... Thanks.&#xD;&#xA;&#xD;&#xA;I was believing that geom_bar would just understand that there would be one bar per row in the table ( `ggplot2::qplot()` seems to do it ).&#xD;&#xA; &#xD;&#xA;The error message lead me to trace what is happening and there seem to be a glitch in the code anyway (call to function without `env` defined).&#xD;&#xA;&#xD;&#xA;In the meantime,  defining a mapping for both `x` and `y` does solve my problem." />
      <Message Id="77795658" ParentId="1005" UserId="7588956" Date="03/09/2015 03:34:45" Content="http://stackoverflow.com/questions/25824383/plot-vector-of-y-values-in-ggplot" />
    </Messages>
  </Topic>
  <Topic Id="1006" Title="None of the plotting functions work for me">
    <Messages>
      <Message Id="0" ParentId="1006" UserId="7991750" Date="09/06/2014 00:20:41" Content="I am getting a caught segfault error every time I try to run any plotting functions from this package (1.0.0). I have tried this with qplot,  geom_dotplot,  geom_histogram,  etc. Data from the package (e.g. diamonds or economics) work just fine.&#xD;&#xA;&#xD;&#xA;I get the same error with the standard R GUI,  RStudio,  and when using R from the command line. The command brings up the default graphic device (Quartz for R GUI and command line),  but also the terminal error.&#xD;&#xA;&#xD;&#xA;The following code gives the error:&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;qplot(1:10)&#xD;&#xA;&#xD;&#xA;*** caught segfault ***&#xD;&#xA;address 0x18,  cause 'memory not mapped'&#xD;&#xA;&#xD;&#xA;Traceback:&#xD;&#xA; 1: .Call(&quot;plyr_split_indices&quot;,  PACKAGE = &quot;plyr&quot;,  group,  n)&#xD;&#xA; 2: split_indices(scale_id,  n)&#xD;&#xA; 3: scale_apply(layer_data,  x_vars,  scale_train,  SCALE_X,  panel$x_scales)&#xD;&#xA; 4: train_position(panel,  data,  scale_x(),  scale_y())&#xD;&#xA; 5: ggplot_build(x)&#xD;&#xA; 6: print.ggplot(list(data = list(),  layers = list(&lt;environment&gt;),      scales = &lt;S4 object of class &quot;Scales&quot;&gt;,  mapping = list(x = 1:3),      theme = list(),  coordinates = list(limits = list(x = NULL,          y = NULL)),  facet = list(shrink = TRUE),  plot_env = &lt;environment&gt;,      labels = list(x = &quot;1:3&quot;,  y = &quot;count&quot;)))&#xD;&#xA; 7: print(list(data = list(),  layers = list(&lt;environment&gt;),  scales = &lt;S4 object of class &quot;Scales&quot;&gt;,      mapping = list(x = 1:3),  theme = list(),  coordinates = list(        limits = list(x = NULL,  y = NULL)),  facet = list(shrink = TRUE),      plot_env = &lt;environment&gt;,  labels = list(x = &quot;1:3&quot;,  y = &quot;count&quot;)))&#xD;&#xA;&#xD;&#xA;Possible actions:&#xD;&#xA;&#xD;&#xA; 1: abort (with core dump,  if enabled)&#xD;&#xA; 2: normal R exit&#xD;&#xA; 3: exit R without saving workspace&#xD;&#xA; 4: exit R saving workspace&#xD;&#xA;Here is my session info:&#xD;&#xA;&#xD;&#xA;R version 3.1.1 (2014-07-10)&#xD;&#xA;Platform: x86_64-apple-darwin13.1.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] graphics  grDevices utils     datasets  stats     methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0 marelac_2.1.3 seacarb_3.0   shape_1.4.1   beepr_1.1     birk_1.1     &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA;[ 1 ] audio_0.1-5      colorspace_1.2-4 digest_0.6.4     grid_3.1.1       gtable_0.1.2    &#xD;&#xA;[ 6 ] MASS_7.3-34      munsell_0.4.2    plyr_1.8.1       proto_0.3-10     Rcpp_0.11.2     &#xD;&#xA;[ 11 ] reshape2_1.4     scales_0.2.4     stringr_0.6.2    tools_3.1.1&#xD;&#xA;&#xD;&#xA;I've gathered from others that this is a memory issue of some sort,  but this error occurs even when I have over 2 GB of free RAM.&#xD;&#xA;&#xD;&#xA;Here's the info from the bug_report function:&#xD;&#xA;&#xD;&#xA;Package: ggplot2&#xD;&#xA; Version: 1.0.0&#xD;&#xA; Maintainer: Hadley Wickham &lt;h.wickham@gmail.com&gt;&#xD;&#xA; Built: R 3.1.0; ; 2014-05-23 05:09:04 UTC; unix&#xD;&#xA;&#xD;&#xA;R Version:&#xD;&#xA; platform = x86_64-apple-darwin13.1.0&#xD;&#xA; arch = x86_64&#xD;&#xA; os = darwin13.1.0&#xD;&#xA; system = x86_64,  darwin13.1.0&#xD;&#xA; status = &#xD;&#xA; major = 3&#xD;&#xA; minor = 1.1&#xD;&#xA; year = 2014&#xD;&#xA; month = 07&#xD;&#xA; day = 10&#xD;&#xA; svn rev = 66115&#xD;&#xA; language = R&#xD;&#xA; version.string = R version 3.1.1 (2014-07-10)&#xD;&#xA; nickname = Sock it to Me&#xD;&#xA;&#xD;&#xA;GUI:&#xD;&#xA; R-GUI 1.65 (6784)&#xD;&#xA;&#xD;&#xA;Locale:&#xD;&#xA; en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;Search Path:&#xD;&#xA; .GlobalEnv,  tools:RGUI,  package:stats,  package:graphics,  package:grDevices,  package:utils,  package:datasets,  package:methods,  Autoloads,  package:base&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Others have tried to help on StackOverflow.  You can see there what has already been tried:&#xD;&#xA;http://stackoverflow.com/questions/25672974/caught-segfault-error-in-r" />
      <Message Id="54768629" ParentId="1006" UserId="4196" Date="09/08/2014 01:32:14" Content="Typically the fix in this case is to delete all installed packages and start afresh." />
    </Messages>
  </Topic>
  <Topic Id="1007" Title="Fixed typo in the documentation">
    <Messages>
      <Message Id="0" ParentId="1007" UserId="1426041" Date="09/11/2014 01:37:11" Content="There were typos in `stat_summary2d` and `stat_summary_hex` roxygen2 title tags,  misspelling function *funciton*. " />
      <Message Id="111260250" ParentId="1007" UserId="4196" Date="06/11/2015 20:03:06" Content="Fixed elsewhen - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1008" Title="Add a fortify method for x, y, z type lists">
    <Messages>
      <Message Id="0" ParentId="1008" UserId="18445" Date="09/11/2014 10:22:45" Content="Those lists are standard but do not have a specific class. There is no way to&#xA;make have this method be called on these lists only but great care is taken to&#xA;check that the list is indeed well formed before proceeding with the&#xA;conversion.&#xA;&#xA;Many functions producing 2D results (interpolation,  re-griding of spatial&#xA;data,  heatmaps,  etc.) produce such x,  y,  z lists because they are directly&#xA;plot-able with image() or persp(). This method makes it easy to use ggplot&#xA;straight on the output of such functions." />
      <Message Id="55245932" ParentId="1008" UserId="18445" Date="09/11/2014 10:25:21" Content="I realise this functionality might be controversial (many lists will not fit this pattern yet the method will be called on those too). Yet I think the benefits would overcome the cost,  particularly because the error messages when calling this method on a non-xyz list should be clear." />
      <Message Id="111260205" ParentId="1008" UserId="4196" Date="06/11/2015 20:02:51" Content="I've really gone off fortify as a method - I think broom handles most cases better." />
      <Message Id="111298585" ParentId="1008" UserId="18445" Date="06/11/2015 22:52:17" Content="Did not know about broom. Looks great! What becomes of `autoplot` then? Do you expect it to depend on broom and call the appropriate `augment` method?" />
      <Message Id="111306639" ParentId="1008" UserId="18445" Date="06/11/2015 23:34:05" Content="Submitted as https://github.com/dgrtwo/broom/pull/56" />
    </Messages>
  </Topic>
  <Topic Id="1009" Title="Option to ensure all the geoms are within plot canvas">
    <Messages>
      <Message Id="0" ParentId="1009" UserId="213894" Date="09/14/2014 13:19:17" Content="It is quite common for scatterplot labels to be truncated:&#xD;&#xA;http://stackoverflow.com/questions/17241182/how-to-make-geom-text-plot-within-the-canvass-bounds&#xD;&#xA;&#xD;&#xA;It looks like all the &quot;solutions&quot; involving `strwidth(,  units=&quot;inches&quot;)` and `strwidth(,  units=&quot;figure&quot;)` do not apply for different zoom levels.&#xD;&#xA;&#xD;&#xA;Even examples of `geom_text` (http://docs.ggplot2.org/current/geom_text.html) fail to make labels fit into the canvas.&#xD;&#xA;&#xD;&#xA;Can you please create an option to fit geoms into the canvas and/or a way to calculate label width?" />
      <Message Id="111275144" ParentId="1009" UserId="4196" Date="06/11/2015 20:55:27" Content="Unfortunately it's extremely difficult to do this due to the interaction between data space and plot space." />
    </Messages>
  </Topic>
  <Topic Id="1010" Title="typo in help for scale_continuous">
    <Messages>
      <Message Id="0" ParentId="1010" UserId="205275" Date="09/17/2014 17:16:19" Content="missing an s for the scales package.&#xD;&#xA;&#xD;&#xA;I did not rebuild the documentation,  this fix won't go into effect until then." />
      <Message Id="111259972" ParentId="1010" UserId="4196" Date="06/11/2015 20:01:43" Content="Fixed elsewhen - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1011" Title="stat_function to compute function on data not aesthetic scale">
    <Messages>
      <Message Id="0" ParentId="1011" UserId="463252" Date="09/17/2014 23:25:46" Content="`stat_function` currently computes the function with the transformed&#xD;&#xA;(not original data) values. This causes the values to be wrong if&#xD;&#xA;a different scale,  other than continuous,  is used.&#xD;&#xA;&#xD;&#xA;See http://stackoverflow.com/q/9382032/892313 for an example&#xD;&#xA;of this." />
      <Message Id="111259926" ParentId="1011" UserId="4196" Date="06/11/2015 20:01:29" Content="Could you please also &#xD;&#xA;&#xD;&#xA;* [   ] add a bullet to NEWS&#xD;&#xA;* [   ] merge/rebase" />
      <Message Id="113243328" ParentId="1011" UserId="463252" Date="06/18/2015 18:12:25" Content="I'll work on it this weekend." />
      <Message Id="115120981" ParentId="1011" UserId="463252" Date="06/25/2015 06:18:27" Content="Comments addressed." />
    </Messages>
  </Topic>
  <Topic Id="1012" Title="scale_colour_log10?">
    <Messages>
      <Message Id="0" ParentId="1012" UserId="167164" Date="09/23/2014 03:22:58" Content="Would it be possible to have these scales?&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;scale_colour_log10       scale_colour_reverse     scale_colour_sqrt&#xD;&#xA;scale_color_log10       scale_color_reverse     scale_color_sqrt&#xD;&#xA;scale_fill_log10       scale_fill_reverse     scale_fill_sqrt&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;They can be pretty useful when using oddly distributed continuous data on colour scales." />
      <Message Id="56482040" ParentId="1012" UserId="3333348" Date="09/23/2014 06:51:22" Content="My 2 cents opinion: such functions are clearly interestering in the &#xD;&#xA;cases where the axes are log10,  sqrt... transformed.&#xD;&#xA;&#xD;&#xA;naught101 wrote on 23/09/14 05:23:&#xD;&#xA;&gt;&#xD;&#xA;&gt; Would it be possible to have these scales?&#xD;&#xA;&gt;&#xD;&#xA;&gt; |scale_colour_log10       scale_colour_reverse     scale_colour_sqrt&#xD;&#xA;&gt; scale_color_log10       scale_color_reverse     scale_color_sqrt&#xD;&#xA;&gt; scale_fill_log10       scale_fill_reverse     scale_fill_sqrt&#xD;&#xA;&gt; |&#xD;&#xA;&gt;&#xD;&#xA;&gt; They can be pretty useful when using oddly distributed continuous data &#xD;&#xA;&gt; on colour scales.&#xD;&#xA;&gt;&#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub &#xD;&#xA;&gt; &lt;https://github.com/hadley/ggplot2/issues/1012&gt;.&#xD;&#xA;&gt;" />
      <Message Id="56536148" ParentId="1012" UserId="463252" Date="09/23/2014 15:17:12" Content="The `scale_*_log10`,  `scale_*_reverse`,  and `scale_*_sqrt` are just convenience functions for continuous scales with pre-specified transformations. &#xD;&#xA;&#xD;&#xA;From https://github.com/hadley/ggplot2/blob/master/R/scale-continuous.r#L93,  for example, &#xD;&#xA;```{ r }&#xD;&#xA;scale_x_log10 &lt;- function(...) { &#xD;&#xA;    scale_x_continuous(...,  trans = log10_trans())&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;So you can either just specify the transformation in a `scale_colour_continuous` call&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;scales&quot;)&#xD;&#xA;&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(wt,  mpg,  colour=cyl)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_line()&#xD;&#xA;&#xD;&#xA;p + scale_colour_continuous(trans=log10_trans())&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;or define those functions yourself&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;scale_colour_log10 &lt;- function(...) { &#xD;&#xA;  scale_colour_continuous(...,  trans = log10_trans())&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;scale_colour_reverse&lt;- function(...) { &#xD;&#xA;  scale_colour_continuous(...,  trans = reverse_trans())&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;scale_colour_sqrt&lt;- function(...) { &#xD;&#xA;  scale_colour_continuous(...,  trans = sqrt_trans())&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I doubt there is much interest in adding these convenience functions into the main code base. But they are simple enough that you can include them in yours.&#xD;&#xA;" />
      <Message Id="111275034" ParentId="1012" UserId="4196" Date="06/11/2015 20:54:55" Content="Thanks for capturing my thoughts exactly @BrianDiggs !" />
      <Message Id="112762582" ParentId="1012" UserId="167164" Date="06/17/2015 11:40:57" Content="fair enough,  thanks :)" />
    </Messages>
  </Topic>
  <Topic Id="1013" Title="How to modify lines within the legend">
    <Messages>
      <Message Id="0" ParentId="1013" UserId="8241361" Date="09/23/2014 05:35:35" Content="Can anyone tell me how to edit the size of the lines in the legend. I have an ROC plot,  with three lines for three different models. I have the main ROC lines nice and thick,  but I have not been able to change the size of the lines in the legend. There seems to be nothing here (http://docs.ggplot2.org/current/theme.html) where I can add in a call to element_line to increase the size of the lines in the legend. An intuitive way to do it would be to create a call to the following:&#xD;&#xA;legend_lines = element_line(size=5, &quot;cm&quot;)&#xD;&#xA;But I cannot find anything similar" />
      <Message Id="111595110" ParentId="1013" UserId="4196" Date="06/12/2015 19:29:31" Content="See `guide_legend()` and the `override.aes` option" />
    </Messages>
  </Topic>
  <Topic Id="1014" Title="Why does Jitterdodge require fill to be set?">
    <Messages>
      <Message Id="0" ParentId="1014" UserId="3788377" Date="09/28/2014 13:02:06" Content="I am plotting multiple &lt;b&gt;geom_pointrange&lt;/b&gt; geometries each with different shapes that I am going to use in a legend. Because the values often overlap I want to jitterdodge them. Strangely position_jitterdodge requires the fill attribute and thus adds another unnecessary legend to my plot (that I have to disable manually afterwards via &lt;b&gt;scale_fill_discrete(guide=&quot;none&quot;)&lt;/b&gt; )&#xD;&#xA;&#xD;&#xA;So if you try to add a pointrange similar to this command (sorry for not providing a FRE):&#xD;&#xA;&gt;p + geom_pointrange(data = data, aes(ymax=upper_est, ymin=lower_est, shape=Grouping, group=Grouping), color=&quot;black&quot;, size=1.2, position=position_jitterdodge(dodge.width = .5) )&#xD;&#xA;&#xD;&#xA;The above command does not work unless I set &lt;b&gt;fill&lt;/b&gt; in the aesthetics. I see no reason why it should be set?&#xD;&#xA;What is the reason for &lt;b&gt;position_jitterdodge&lt;/b&gt; to require the fill attribute set in the first place?" />
      <Message Id="111274921" ParentId="1014" UserId="4196" Date="06/11/2015 20:54:17" Content="Could you please provide a minimal reprex?" />
    </Messages>
  </Topic>
  <Topic Id="1015" Title="ggsave Error For Some Grobs">
    <Messages>
      <Message Id="0" ParentId="1015" UserId="631218" Date="10/03/2014 00:00:20" Content="&gt; class(wholePlot)&#xD;&#xA;[ 1 ] &quot;arrange&quot; &quot;gTree&quot;   &quot;grob&quot;    &quot;gDesc&quot; &#xD;&#xA;&gt; ggsave(&quot;wholePlot.png&quot;,  wholePlot)&#xD;&#xA;Error in ggsave(&quot;wholePlot.png&quot;,  wholePlot) :&#xD;&#xA;  plot should be a ggplot2 plot&#xD;&#xA;&#xD;&#xA;It sometimes works for some grobs and not others. Can it be made wholly compatible for the next release ?&#xD;&#xA;&#xD;&#xA;The workaround&#xD;&#xA;&#xD;&#xA;&gt; ggsave &lt;- ggplot2::ggsave; body(ggsave) &lt;- body(ggplot2::ggsave)[ -2 ];&#xD;&#xA;&#xD;&#xA;works,  but it'd be good for users to have reproducible workflows,  rather than modifying package code in their script.  The object is available [ here ](https://groups.google.com/group/ggplot2/attach/ae0fed199bef73f6/wholePlot.obj?part=0.1&amp;authuser=0).&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="111594989" ParentId="1015" UserId="4196" Date="06/12/2015 19:28:48" Content="Please provide a minimal reproducible example and re-open." />
      <Message Id="111898391" ParentId="1015" UserId="631218" Date="06/15/2015 02:00:19" Content="An example which can be simply copied and pasted into R is :&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(gridExtra)&#xD;&#xA;    library(gtable)&#xD;&#xA;&#xD;&#xA;    firstGrob &lt;- ggplot_gtable(ggplot_build(qplot(1:10,  1:10)))&#xD;&#xA;    sencondGrob &lt;- ggplot_gtable(ggplot_build(qplot(1:10,  10:1)))&#xD;&#xA;&#xD;&#xA;    plotTable &lt;- gtable(unit(8,  &quot;cm&quot;),  unit.c(unit(5,  &quot;cm&quot;),  unit(5,  &quot;cm&quot;)))&#xD;&#xA;    plotTable &lt;- gtable_add_grob(plotTable,  firstGrob,  1,  1)&#xD;&#xA;    plotTable &lt;- gtable_add_grob(plotTable,  sencondGrob,  2,  1)&#xD;&#xA;&#xD;&#xA;    wholePlot &lt;- arrangeGrob(plotTable,  main = textGrob(&quot;Scatterplots&quot;))&#xD;&#xA;    print(wholePlot)&#xD;&#xA;    class(wholePlot)&#xD;&#xA;    ggsave(&quot;scatter.png&quot;,  wholePlot)  # Error about incorrect class of object." />
      <Message Id="112399704" ParentId="1015" UserId="4196" Date="06/16/2015 11:58:12" Content="Well,  `wholePlot` isn't a ggplot2 object,  so I don't think that's ever worked. But see #970 " />
    </Messages>
  </Topic>
  <Topic Id="1016" Title="Jitter for binary data">
    <Messages>
      <Message Id="0" ParentId="1016" UserId="4465050" Date="10/03/2014 16:30:01" Content="This is a new position proto for binary data. It bounds the jittering inside the data range,  which produces nicer logistic regression plots.&#xD;&#xA;&#xD;&#xA;![ rplot2 ](https://cloud.githubusercontent.com/assets/4465050/4509665/d84209ec-4b22-11e4-810f-a684b1819960.png)&#xD;&#xA;" />
      <Message Id="111259756" ParentId="1016" UserId="4196" Date="06/11/2015 20:00:38" Content="Could you please also merge/rebase?" />
      <Message Id="111700843" ParentId="1016" UserId="4465050" Date="06/13/2015 11:17:10" Content="@hadley done.&#xD;&#xA;&#xD;&#xA;I also added an alias `geom_injitter()` in the last commit. If you don't like it,  I'll delete the commit,  otherwise I'll document the alias and squash it." />
      <Message Id="111704867" ParentId="1016" UserId="4196" Date="06/13/2015 12:12:15" Content="Now jitterin sounds better to me. Maybe just add a Boolean flag to geom jitter? I don't think it needs its own geom. " />
      <Message Id="111706101" ParentId="1016" UserId="4465050" Date="06/13/2015 12:23:13" Content="&gt; Now jitterin sounds better to me.&#xD;&#xA;&#xD;&#xA;Or does it sound like the American version of jittering? ;)&#xD;&#xA;&#xD;&#xA;&gt; Maybe just add a Boolean flag to geom jitter? I don't think it needs its own geom.&#xD;&#xA;&#xD;&#xA;or allow `position` to take `jitterin` when `width` or `height` are specified,  as in the last commit? Then I just need to delete the new alias and it's good to go." />
      <Message Id="111706169" ParentId="1016" UserId="4465050" Date="06/13/2015 12:26:03" Content="by the way,  I have an old almost finished branch where I implement all missing horizontal version of positions and geoms. I was stuck on a very weird #rstats bug in one of the new geoms but now that I've read `adv-r` I might be able to figure it out if you're interested in a PR ;)" />
      <Message Id="112040802" ParentId="1016" UserId="4196" Date="06/15/2015 12:16:38" Content="I'd prefer the boolean argument" />
      <Message Id="112087163" ParentId="1016" UserId="4465050" Date="06/15/2015 14:20:54" Content="here you go" />
      <Message Id="113205349" ParentId="1016" UserId="4196" Date="06/18/2015 16:12:07" Content="Now I'm thinking it would be better to add hjust/vjust arguments to `position_jitter` like the new support in `geom_text()` - they can be set to left/top,  middle/center, bottom/right,  inward and outward.&#xD;&#xA;&#xD;&#xA;Sorry I keep moving the goal posts - let me know if you're too frustrated and I'll do it myself." />
      <Message Id="113212488" ParentId="1016" UserId="4465050" Date="06/18/2015 16:36:53" Content="but we'd only have middle/center and inward right?" />
      <Message Id="113251630" ParentId="1016" UserId="4196" Date="06/18/2015 18:31:55" Content="I'd implement them all just for completeness. left/center/right would apply to horizontal jittering.  outward is rarely useful,  but it seems asymmetric to have inward but not outward" />
      <Message Id="113259761" ParentId="1016" UserId="4196" Date="06/18/2015 19:05:14" Content="Actually,  let me just do it once the conversion to R6 is complete. I think the correct way forward is now clear to me,  and I can modify `position_jitter()` quickly. " />
    </Messages>
  </Topic>
  <Topic Id="1017" Title="Default to guide=colourbar for distiller scales">
    <Messages>
      <Message Id="0" ParentId="1017" UserId="18445" Date="10/05/2014 22:12:02" Content="" />
      <Message Id="111258868" ParentId="1017" UserId="4196" Date="06/11/2015 19:55:59" Content="Closing this one since it's a small change and contained in #1076." />
    </Messages>
  </Topic>
  <Topic Id="1018" Title="Dark theme">
    <Messages>
      <Message Id="0" ParentId="1018" UserId="18445" Date="10/05/2014 22:39:08" Content="" />
      <Message Id="111258781" ParentId="1018" UserId="4196" Date="06/11/2015 19:55:34" Content="Thanks!&#xD;&#xA;&#xD;&#xA;In the future,  can you make sure the news bullet is the first one? (Not under any headings) That makes sure it ends up in the right place even if it takes me a while to merge" />
    </Messages>
  </Topic>
  <Topic Id="1019" Title="ggplot2_gtable Unexpectedly Opens New Graphics Device">
    <Messages>
      <Message Id="0" ParentId="1019" UserId="631218" Date="10/07/2014 05:01:01" Content="[ Download classesPlot ](https://groups.google.com/group/ggplot2/attach/f749f60a8b5ab721/classesPlot.obj?part=0.1&amp;authuser=0)&#xD;&#xA;&#xD;&#xA;    load(&quot;classesPlot.obj&quot;)&#xD;&#xA;    requireNamespace(&quot;ggplot2&quot;)&#xD;&#xA;    requireNamespace(&quot;grid&quot;)&#xD;&#xA;    requireNamespace(&quot;gridExtra&quot;)&#xD;&#xA;&#xD;&#xA;    classGrob &lt;- ggplot2::ggplot_gtable(ggplot2::ggplot_build(classesPlot))&#xD;&#xA;&#xD;&#xA;opens a window with a blank plotting area titled&#xD;&#xA;&#xD;&#xA;R Graphics: Device 2 (ACTIVE)&#xD;&#xA;&#xD;&#xA;However,  the documentation for ggplot_gtable has&#xD;&#xA;&#xD;&#xA;Value : a gtable object&#xD;&#xA;&#xD;&#xA;    &gt; class(classGrob)&#xD;&#xA;    [ 1 ] &quot;gtable&quot; &quot;grob&quot;   &quot;gDesc&quot;&#xD;&#xA;&#xD;&#xA;That's true,  but why is there a new device opened as a side effect ? It is not documented and it is unwanted." />
      <Message Id="111594930" ParentId="1019" UserId="4196" Date="06/12/2015 19:28:27" Content="I think this was a side-effect of a ggplot2 dependency that has since been fixed." />
    </Messages>
  </Topic>
  <Topic Id="1020" Title="geom_boxplot() + scale_y_log10()   bug">
    <Messages>
      <Message Id="0" ParentId="1020" UserId="1291741" Date="10/13/2014 05:35:21" Content="This bug cost me a full day of working.&#xD;&#xA;&#xD;&#xA;Some sample of working code&#xD;&#xA;&#xD;&#xA;abc &lt;- adply(matrix(rnorm(100,  mean = 20,  sd = 5),  ncol = 5),  2,  quantile,  c(0,  .25,  .5,  .75,  1))&#xD;&#xA;abc$X1  &lt;- NULL&#xD;&#xA;abc$X1  &lt;- c(1:5)&#xD;&#xA;abc[ 6,   ]  &lt;- c(10,  18,  20,  25,  1000,  6)&#xD;&#xA;&#xD;&#xA;# working code&#xD;&#xA;b &lt;- ggplot(abc,  aes(group=X1,  x = X1,  ymin = `0%`,  lower = `25%`,  middle = `50%`,  upper = `75%`,  ymax = `100%`))&#xD;&#xA; b + geom_boxplot(stat = &quot;identity&quot;,  aes(fill=X1)) + coord_trans(y=&quot;log10&quot;)&#xD;&#xA;&#xD;&#xA;This all ok. Picture is ok. &#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1291741/4609305/f83d7504-529a-11e4-8e58-2c60ba747d98.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# broken code&#xD;&#xA;b &lt;- ggplot(abc,  aes(group=X1,  x = X1,  ymin = `0%`,  lower = `25%`,  middle = `50%`,  upper = `75%`,  ymax = `100%`))&#xD;&#xA;d &lt;- b + geom_boxplot(stat = &quot;identity&quot;) + scale_y_log10()&#xD;&#xA;&#xD;&#xA;ggplot makes ranges of y axe as  c(0.8490745,  3.1024250). &#xD;&#xA;max value from abc is 1000 = 10^3. &#xD;&#xA;y range upper bound = 10^3 + small margin. So it is log scale.&#xD;&#xA;BUT when data is plotted ggplot uses absolute values of abc data not log values.&#xD;&#xA;So we have wrong picture &#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1291741/4609312/0cc97400-529b-11e4-9691-13d369b2e647.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;Problem like this was discussed here &#xD;&#xA;https://github.com/hadley/ggplot2/issues/274&#xD;&#xA;http://stackoverflow.com/questions/9502003/ggplot-scale-y-log10-issue&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1021" Title="geom_boxplot() + coord_trans(ytrans = &quot;log10&quot;) BUG">
    <Messages>
      <Message Id="0" ParentId="1021" UserId="1291741" Date="10/13/2014 09:28:24" Content="# Descripion&#xD;&#xA;I'm trying to display financial data in the form of boxplot. Found that in certain situations the lower shadow is absent. It depends on the data itself.&#xD;&#xA;&#xD;&#xA;# No shadow&#xD;&#xA;xData &lt;- data.frame(17.31,  17.7,  17.8,  17.9,  18.7,   1)&#xD;&#xA;names(xData)  &lt;- c(&quot;0%&quot;,  &quot;25%&quot;,  &quot;50%&quot;,  &quot;75%&quot;,  &quot;100%&quot;,  &quot;X1&quot;)&#xD;&#xA;d &lt;- ggplot(xData,  aes(group=X1,  x = X1,  ymin = `0%`,  lower = `25%`,  middle = `50%`,  upper = `75%`,  ymax = `100%`)) + geom_boxplot(stat = &quot;identity&quot;) + coord_trans(ytrans = &quot;log10&quot;)&#xD;&#xA;d&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1291741/4611468/014858ba-52bb-11e4-892f-1edbe99e28db.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# Has shadow&#xD;&#xA;&#xD;&#xA;Now,  replace 17.31 to 17.30  &#xD;&#xA;&#xD;&#xA;xData &lt;- data.frame(17.30,  17.7,  17.8,  17.9,  18.7,   1)&#xD;&#xA;names(xData)  &lt;- c(&quot;0%&quot;,  &quot;25%&quot;,  &quot;50%&quot;,  &quot;75%&quot;,  &quot;100%&quot;,  &quot;X1&quot;)&#xD;&#xA;d &lt;- ggplot(xData,  aes(group=X1,  x = X1,  ymin = `0%`,  lower = `25%`,  middle = `50%`,  upper = `75%`,  ymax = `100%`)) + geom_boxplot(stat = &quot;identity&quot;) + coord_trans(ytrans = &quot;log10&quot;)&#xD;&#xA;d&#xD;&#xA;&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/1291741/4611464/f68f0c98-52ba-11e4-882c-43dd9c806a9c.png)&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1022" Title="Smallest points are removed from plot">
    <Messages>
      <Message Id="0" ParentId="1022" UserId="1282581" Date="10/16/2014 11:29:56" Content="This [ stackoverflow question ](http://stackoverflow.com/questions/26402336/ggplot-fails-to-plot-smallest-points?noredirect=1#comment41454360_26402336) gives detail.&#xD;&#xA;&#xD;&#xA;The smallest points are lost from the plot when data ranges across several orders of magnitude and scale_size_area is being used,  I think due to rounding to zero somewhere.  The example demonstrates (look for the 10 point):&#xD;&#xA;&#xD;&#xA;`d = data.frame(x=1:4,  y=rep(1, 4),  v=10^(1:4))`&#xD;&#xA;`ggplot(d,  aes(x,  y,  size=v)) + geom_point() + geom_text(aes(label = v),  size=2,  col='red') +`&#xD;&#xA;`   scale_size_area(max_size = 200) + theme(legend.position = &quot;none&quot;)`&#xD;&#xA;&#xD;&#xA;Mostly not a problem,  but can be for some plots - [ this map of commuter patterns ](https://dl.dropboxusercontent.com/u/46043231/docs/city_interaction.pdf) loses points in neighbouring cities (white labels show where points should be)." />
      <Message Id="59527226" ParentId="1022" UserId="1282581" Date="10/17/2014 15:11:07" Content="Wonder if it has something to do with the `waiver` function,  called by `continuous_scale` in `scale_size_area`.." />
      <Message Id="59531719" ParentId="1022" UserId="1282581" Date="10/17/2014 15:40:04" Content="Possibly,  but counting against a rendering issue the problem reproduces in Mac and Windows.  It also happens when the ‘max_size’ argument is increased experimentally to giant proportions." />
      <Message Id="111598075" ParentId="1022" UserId="4196" Date="06/12/2015 19:48:26" Content="Ah good point,  thanks!&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;d &lt;- data.frame(x = 1:4,  y = rep(1,  4),  v = 10 ^ (1:4))&#xD;&#xA;ggplot(d,  aes(x,  y,  size=v)) + &#xD;&#xA;  geom_point(alpha = 1/3) + &#xD;&#xA;  geom_text(aes(label = v),  size = 8,  col = &quot;red&quot;) +&#xD;&#xA;  scale_size_area(max_size = 500) + &#xD;&#xA;  theme(legend.position = &quot;none&quot;) +&#xD;&#xA;  xlim(0,  5)&#xD;&#xA;&#xD;&#xA;last_plot() %+% d[ 1:3,   ]&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Looks like the rounding is happening somewhere else" />
    </Messages>
  </Topic>
  <Topic Id="1023" Title="thicker lines in bottom and right side ">
    <Messages>
      <Message Id="0" ParentId="1023" UserId="4413228" Date="10/21/2014 16:46:07" Content="Unequal panel border size: https://github.com/hadley/ggplot2/issues/670&#xD;&#xA;I these two days have also met this question  problem!&#xD;&#xA;How did you solve the problem?  Can you please share?" />
      <Message Id="59963444" ParentId="1023" UserId="4413228" Date="10/21/2014 17:18:28" Content="Is there a  possible solution to this problem ? I have to save figures as SVG format." />
      <Message Id="111274741" ParentId="1023" UserId="4196" Date="06/11/2015 20:53:24" Content="I think it's to do with the way that the plot is clipped and the way that lines are drawn.  The plot is clipped hard on the bottom-left,  but not on the top-right,  so possibly half the line is getting clipped.  Unfortunately I don't see any easy fix for this." />
      <Message Id="111274741" ParentId="1023" UserId="4196" Date="06/11/2015 20:53:24" Content="I think it's to do with the way that the plot is clipped and the way that lines are drawn.  The plot is clipped hard on the bottom-left,  but not on the top-right,  so possibly half the line is getting clipped.  Unfortunately I don't see any easy fix for this." />
      <Message Id="117442535" ParentId="1023" UserId="4413228" Date="07/01/2015 05:44:37" Content="O,  thank you!" />
    </Messages>
  </Topic>
  <Topic Id="1024" Title="Fortify for Raster* objects">
    <Messages>
      <Message Id="0" ParentId="1024" UserId="1650314" Date="10/29/2014 18:10:03" Content="Hi, &#xD;&#xA;&#xD;&#xA;I'd like to suggest to expand the functionality of fortify to Raster* objects from the raster package. Since rasters are often very large (&gt;memory) they should be subsampled for efficient plotting. This is implemented in the raster package for calls to raster::plot but it would be nice to have a fortify method for use with ggplot2. &#xD;&#xA;&#xD;&#xA;There are three classes RasterLayer,  RasterBrick and RasterStack which can all be subsampled in the same way using a regular grid.The maximal number of pixels to plot can be specified and defaults to 500000.&#xD;&#xA;&#xD;&#xA;Fortify returns a data.frame with pixel coordinates and corresponding raster values intended for use with geom_raster.&#xD;&#xA;&#xD;&#xA;What do you think?&#xD;&#xA;Benjamin" />
      <Message Id="111258465" ParentId="1024" UserId="4196" Date="06/11/2015 19:53:58" Content="I'm not planning on adding any more fortify methods,  since I think broom has done a better job of providing diverse methods.&#xD;&#xA;&#xD;&#xA;I'd be interested to see what an equivalent of `geom_map()` would look like though." />
      <Message Id="112062747" ParentId="1024" UserId="1650314" Date="06/15/2015 13:03:56" Content="ok,  thanks for letting me know. I wasn't aware of the broom package. &#xD;&#xA;&#xD;&#xA;Are you planning to deprecate the fortify methods in the future? &#xD;&#xA;I'm planning to ship the suggested fortify method with my RStoolbox package for now,  but might as well name it differently if fortify doesn't have a future." />
      <Message Id="112082415" ParentId="1024" UserId="4196" Date="06/15/2015 14:09:16" Content="No plans to deprecate" />
    </Messages>
  </Topic>
  <Topic Id="1025" Title="qplot with facets gives &quot;object not found&quot; error">
    <Messages>
      <Message Id="0" ParentId="1025" UserId="8077160" Date="11/08/2014 23:56:23" Content="I've gotten an &quot;object not found&quot; error when doing a qplot with facets.  Rather than give my example,  I'll refer you to the qplot documentation,  which produces the same error twice: http://docs.ggplot2.org/current/qplot.html&#xD;&#xA;(just search for &quot;error&quot; on the page)" />
      <Message Id="111274571" ParentId="1025" UserId="4196" Date="06/11/2015 20:52:26" Content="Seem to work fine in the dev version." />
    </Messages>
  </Topic>
  <Topic Id="1026" Title="Error importing ggplot in IPython">
    <Messages>
      <Message Id="0" ParentId="1026" UserId="5940636" Date="11/12/2014 19:20:15" Content="I am using Ipython version 2.3 on a Mac OSX 10.10.  While trying to import ggplot into Ipython notebook I received the following error message:&#xD;&#xA;_______________________________________________________________________&#xD;&#xA;ImportError                               Traceback (most recent call last)&#xD;&#xA;&lt;ipython-input-1-1140326dc452&gt; in &lt;module&gt;()&#xD;&#xA;----&gt; 1 import ggplot&#xD;&#xA;&#xD;&#xA;/Library/Python/2.7/site-packages/ggplot/__init__.py in &lt;module&gt;()&#xD;&#xA;     12 _set_mpl_backend()&#xD;&#xA;     13 &#xD;&#xA;---&gt; 14 from .ggplot import *&#xD;&#xA;     15 from .exampledata import *&#xD;&#xA;&#xD;&#xA;/Library/Python/2.7/site-packages/ggplot/ggplot.py in &lt;module&gt;()&#xD;&#xA;      9 from .components import aes&#xD;&#xA;     10 from .components.legend import draw_legend&#xD;&#xA;---&gt; 11 from .geoms import *&#xD;&#xA;     12 from .scales import *&#xD;&#xA;     13 from .themes import *&#xD;&#xA;&#xD;&#xA;/Library/Python/2.7/site-packages/ggplot/geoms/__init__.py in &lt;module&gt;()&#xD;&#xA;     17 # stats&#xD;&#xA;     18 from .stat_bin2d import stat_bin2d&#xD;&#xA;---&gt; 19 from .stat_smooth import stat_smooth&#xD;&#xA;     20 # misc&#xD;&#xA;     21 from .facet_grid import facet_grid&#xD;&#xA;&#xD;&#xA;/Library/Python/2.7/site-packages/ggplot/geoms/stat_smooth.py in &lt;module&gt;()&#xD;&#xA;      4 import pandas as pd&#xD;&#xA;      5 import numpy as np&#xD;&#xA;----&gt; 6 from ggplot.components import smoothers&#xD;&#xA;      7 &#xD;&#xA;      8 class stat_smooth(geom):&#xD;&#xA;&#xD;&#xA;/Library/Python/2.7/site-packages/ggplot/components/smoothers.py in &lt;module&gt;()&#xD;&#xA;      2 from pandas.lib import Timestamp&#xD;&#xA;      3 import pandas as pd&#xD;&#xA;----&gt; 4 import statsmodels.api as sm&#xD;&#xA;      5 from statsmodels.nonparametric.smoothers_lowess import lowess as smlowess&#xD;&#xA;      6 from statsmodels.sandbox.regression.predstd import wls_prediction_std&#xD;&#xA;&#xD;&#xA;ImportError: No module named statsmodels.api&#xD;&#xA;&#xD;&#xA;______________________________________________________________________________&#xD;&#xA;&#xD;&#xA;Special notice should be taken of the statement,  &quot;No module named statsmodels.api&quot; when in fact I run:&#xD;&#xA;&#xD;&#xA;sudo pip install statsmodels --upgrade&#xD;&#xA;Password:&#xD;&#xA;Requirement already up-to-date: statsmodels in /Library/Python/2.7/site-packages/statsmodels-0.6.0-py2.7-macosx-10.8-x86_64.egg&#xD;&#xA;Cleaning up...&#xD;&#xA;&#xD;&#xA;So it appears I have statsmodels installed,  but ggplot doesn't access it.  I would be pleased if someone could help me sort this out." />
      <Message Id="62777504" ParentId="1026" UserId="4196" Date="11/12/2014 19:24:55" Content="I think you want the _other_ ggplot." />
      <Message Id="62777660" ParentId="1026" UserId="5940636" Date="11/12/2014 19:25:55" Content="Sorry&#xD;&#xA;&#xD;&#xA;You’re right.&#xD;&#xA;&#xD;&#xA;Kyle Litz&#xD;&#xA;bigoilny@icloud.com&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; On Nov 12,  2014,  at 2:25 PM,  Hadley Wickham &lt;notifications@github.com&gt; wrote:&#xD;&#xA;&gt; &#xD;&#xA;&gt; Closed #1026 &lt;https://github.com/hadley/ggplot2/issues/1026&gt;.&#xD;&#xA;&gt; &#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub &lt;https://github.com/hadley/ggplot2/issues/1026#event-192247088&gt;.&#xD;&#xA;&gt; " />
      <Message Id="62781987" ParentId="1026" UserId="5940636" Date="11/12/2014 19:52:13" Content="Can you do me a favor and delete my email address in my reply that appears on github on this issue?  I corrected that in my signature.&#xD;&#xA;&#xD;&#xA;Regards, &#xD;&#xA;&#xD;&#xA;Kyle Litz&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt; On Nov 12,  2014,  at 2:25 PM,  Hadley Wickham &lt;notifications@github.com&gt; wrote:&#xD;&#xA;&gt; &#xD;&#xA;&gt; Closed #1026 &lt;https://github.com/hadley/ggplot2/issues/1026&gt;.&#xD;&#xA;&gt; &#xD;&#xA;&gt; —&#xD;&#xA;&gt; Reply to this email directly or view it on GitHub &lt;https://github.com/hadley/ggplot2/issues/1026#event-192247088&gt;.&#xD;&#xA;&gt; " />
      <Message Id="62782281" ParentId="1026" UserId="4196" Date="11/12/2014 19:53:59" Content="Sure" />
    </Messages>
  </Topic>
  <Topic Id="1027" Title="Change default guide_legend to reverse=TRUE">
    <Messages>
      <Message Id="0" ParentId="1027" UserId="715090" Date="11/18/2014 16:55:24" Content="A common complaint of new ggplot users is that the stacking order of bar plots is different in the main plot and the legend (see,  for example,  http://learnr.wordpress.com/2010/03/23/ggplot2-changing-the-default-order-of-legend-labels-and-stacking-of-data/).  &#xD;&#xA;&#xD;&#xA;The `guide_legend(reverse=TRUE)` option enables users to change this behaviour but it would be nice if this was the default behaviour.  Aligned ordering is both the default in other plotting packages (e.g. Excel),  is more intuitive,  and makes it easier to interpret figures printed in black and white (because,  like it or not,  too many shades of grey will be used from time to time)." />
      <Message Id="63512592" ParentId="1027" UserId="4196" Date="11/18/2014 17:44:06" Content="Bar charts are not the only use for fill colour,  and the reversed order doesn't make sense then (e.g. for choropleth maps)" />
      <Message Id="63520410" ParentId="1027" UserId="715090" Date="11/18/2014 18:31:42" Content="I don't understand how `geom_bar` relates to `geom_polygon` or `geom_path` for a map,  and the order issue is also a problem with the colour scale.  The only case in the [ docs ](http://docs.ggplot2.org/0.9.3.1/geom_bar.html) where the current ordering makes sense to me is with `position='dodge'` and the consequences of changing the default seem minor in this case (i.e. comparing vertical ordering to horizontal is less jarring than vertical and reverse vertical).&#xD;&#xA;&#xD;&#xA;I'm sure this has been well-thought through but the underlying logic isn't clear.  Perhaps it's the impact that a change in `guide_legend` would have on other geoms?  A short note in the docs for `geom_bar` or `position_stack` on this point would help." />
    </Messages>
  </Topic>
  <Topic Id="1028" Title="GGplot error?">
    <Messages>
      <Message Id="0" ParentId="1028" UserId="9856381" Date="11/20/2014 02:58:12" Content="I'm trying to create a graph in r ggplot and control the colours it is using but I can't figure out how?&#xD;&#xA;&#xD;&#xA;Below is code for graph:&#xD;&#xA;ggplot(dataSE,  aes(x=Year,  y=logTotalAbun,  colour=Veg, ))+geom_errorbar(aes(ymin=logTotalAbun-se,  ymax=logTotalAbun+se),  width=.1,  position=pd)+geom_line()+geom_point()&#xD;&#xA;&#xD;&#xA;But How do I change the default colours of the lines in produces?&#xD;&#xA;Any help would be much appreciated.&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="63768031" ParentId="1028" UserId="3333348" Date="11/20/2014 06:50:59" Content="Search for theme.&#xA;&#xA;On 20-11-2014 03:58,  Stype36 wrote:&#xA;&gt; I'm trying to create a graph in r ggplot and control the colours it is&#xA;&gt; using but I can't figure out how?&#xA;&gt; &#xA;&gt; Below is code for graph:&#xA;&gt;  ggplot(dataSE,  aes(x=Year,  y=logTotalAbun, &#xA;&gt; colour=Veg, ))+geom_errorbar(aes(ymin=logTotalAbun-se, &#xA;&gt; ymax=logTotalAbun+se),  width=.1,  position=pd)+geom_line()+geom_point()&#xA;&gt; &#xA;&gt; &#xA;&gt; But How do I change the default colours of the lines in produces?&#xA;&gt;  Any help would be much appreciated.&#xA;&gt; &#xA;&gt; --&#xA;&gt; Reply to this email directly or view it on GitHub [ 1 ].&#xA;&gt; &#xA;&gt; 	*&#xA;&gt; &#xA;&gt; Links:&#xA;&gt; ------&#xA;&gt; [ 1 ] https://github.com/hadley/ggplot2/issues/1028" />
      <Message Id="63800817" ParentId="1028" UserId="4196" Date="11/20/2014 12:28:16" Content="If you have questions about using ggplot2,  please use the ggplot2 mailing list or stackoverflow." />
    </Messages>
  </Topic>
  <Topic Id="1029" Title="Documentation trans argument in continuous_scale">
    <Messages>
      <Message Id="0" ParentId="1029" UserId="3583910" Date="11/20/2014 13:01:31" Content="In `?scale_x_continuous` `trans` is mentioned in the **Arguments** section,  and it is referred to `continuous_scale` for more details. However,  in `?continuous_scale` there are no details to be found - `trans` only appears in **Usage** (`trans = &quot;identity&quot;`). Back in `?scale_x_continuous`,  a few 'shortcuts' are mentioned (`scale_y_log10`,  `scale_y_sqrt`,  `scale_y_reverse`) and there is a pointer to `?scale::trans_new` (shouldn't it be `scales`,  with an 's'?),  but examples of `trans` itself and valid transformer names,  such as those in Table 6.2 in the ggplot book,  are lacking. Even in the book it says &quot;Table 6.2 list some of the more common transformers&quot;,  which I interpret as there are even more,  potentially useful,  transformers.&#xD;&#xA;&#xD;&#xA;I believe it would be nice with an exhaustive table of valid `trans`former names in the help text." />
      <Message Id="74898909" ParentId="1029" UserId="3333348" Date="02/18/2015 16:47:11" Content="In relation to the trans argument,  the minor_breaks argument should be documented to have a different behavior from breaks when a transformation is given: values given to minor_breaks should be transformed whereas untransformed values are given to breaks." />
      <Message Id="111142689" ParentId="1029" UserId="4196" Date="06/11/2015 13:52:44" Content="I've completely overhauled both the function specification and the documentation. This should be much better now :)" />
    </Messages>
  </Topic>
  <Topic Id="1031" Title="TikZ device doesn't use LaTeX-aware label metrics with facets">
    <Messages>
      <Message Id="0" ParentId="1031" UserId="77855" Date="12/03/2014 00:54:12" Content="When plotting with facets it seems the label width is not computed using the LaTeX-aware method,  resulting in extraneous whitespace. Here's a knitr document showing the problem:&#xD;&#xA;```&#xD;&#xA;\documentclass{ article }&#xD;&#xA;\begin{ document }&#xD;&#xA;&lt;&lt;dev='tikz',  echo=F,  fig.height=1.5&gt;&gt;=&#xD;&#xA;library(ggplot2)&#xD;&#xA;mylabel &lt;- function() { &#xD;&#xA;  function(xs) {  sprintf(&quot;\\ensuremath{ %g }&quot;, xs)  }&#xD;&#xA; }&#xD;&#xA;data &lt;- data.frame(x=c(1, 10),  y=c(1, 10),  kind=c(&quot;a&quot;, &quot;a&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(data, aes(x=x, y=y)) + geom_point() +&#xD;&#xA;  scale_y_continuous(labels=mylabel())&#xD;&#xA;@&#xD;&#xA;&#xD;&#xA;&lt;&lt;dev='tikz',  echo=F,  fig.height=1.5&gt;&gt;=&#xD;&#xA;ggplot(data, aes(x=x, y=y)) + geom_point() +&#xD;&#xA;  scale_y_continuous(labels=mylabel()) +&#xD;&#xA;  facet_grid(~ kind)&#xD;&#xA;@&#xD;&#xA;&#xD;&#xA;&lt;&lt;echo=F,  fig.height=1.5&gt;&gt;=&#xD;&#xA;ggplot(data, aes(x=x, y=y)) + geom_point() +&#xD;&#xA;  scale_y_continuous(labels=mylabel())&#xD;&#xA;@&#xD;&#xA;\end{ document }&#xD;&#xA;```&#xD;&#xA;Output:&#xD;&#xA;![ screen shot 2014-12-03 at 00 49 22 ](https://cloud.githubusercontent.com/assets/77855/5273947/4d580258-7a86-11e4-9f8a-ba2610e63789.png)&#xD;&#xA;&#xD;&#xA;Expected: the label metrics in the second plot to be the same as the ones in the first (both using `dev=tikz`) not as the third (which is not using a TeX-aware dev)" />
      <Message Id="111140930" ParentId="1031" UserId="4196" Date="06/11/2015 13:47:06" Content="I don't think this is a ggplot2 bug - I have no idea how the TikZ device generates label metrics" />
    </Messages>
  </Topic>
  <Topic Id="1032" Title="strange behavior in lapply">
    <Messages>
      <Message Id="0" ParentId="1032" UserId="4466543" Date="12/03/2014 10:28:26" Content="Hello,  I don't know whether this is a bug:&#xD;&#xA;```&#xD;&#xA;&gt; test &lt;- lapply(1:2,  function(i){  ggplot() + geom_point(data=data.frame(),  mapping=aes(x=1:4, y=i)) })&#xD;&#xA;&gt; test[ [ 1 ] ]&#xD;&#xA;Error in eval(expr,  envir,  enclos) : object 'i' not found&#xD;&#xA;```&#xD;&#xA;and if I do &#xD;&#xA;```&#xD;&#xA;test &lt;- lapply(1:2,  function(i){  a &lt;- i; ggplot() + geom_point(data=data.frame(),  mapping=aes(x=1:4, y=a)) })&#xD;&#xA;```&#xD;&#xA;then `test[ [ 1 ] ]` is the same as `test[ [ 2 ] ]`. &#xD;&#xA;" />
      <Message Id="65406794" ParentId="1032" UserId="4196" Date="12/03/2014 13:33:43" Content="This is an unfortunate consequence of the way ggplot2 does NSE" />
    </Messages>
  </Topic>
  <Topic Id="1033" Title="Fixes micro typo">
    <Messages>
      <Message Id="0" ParentId="1033" UserId="2601674" Date="12/04/2014 09:43:32" Content="" />
      <Message Id="111258269" ParentId="1033" UserId="4196" Date="06/11/2015 19:52:57" Content="Thanks! I merged another PR that fixed it before I got to yours :/" />
    </Messages>
  </Topic>
  <Topic Id="1034" Title="layer.r: added missing error message newline/spacer">
    <Messages>
      <Message Id="0" ParentId="1034" UserId="3781869" Date="12/09/2014 20:43:44" Content="Problem: 'stop' does not separate elements in the dots argument,  therefore the error message (R/layer.r line 160f) is clumped:&#xD;&#xA;Reproducible example:&#xD;&#xA;&#xD;&#xA;f &lt;- function (a) ggplot(data.frame(x=rnorm(10), y=1:10),  aes_q(x=quote(x), y=quote(y), color=a)) + geom_point()&#xD;&#xA;f(1) # runs fine&#xD;&#xA;f(1:3) # returns the error message:&#xD;&#xA;Error: Aesthetics must either be length one,  or the same length as the dataProblems:1:3&#xD;&#xA;&#xD;&#xA;The fix would result in&#xD;&#xA;...&#xD;&#xA;f(1:3)&#xD;&#xA;Error: Aesthetics must either be length one,  or the same length as the data&#xD;&#xA;Problems: 1:3&#xD;&#xA;" />
      <Message Id="66354532" ParentId="1034" UserId="4196" Date="12/09/2014 20:46:20" Content="Maybe also a full stop after data?" />
      <Message Id="66354785" ParentId="1034" UserId="3781869" Date="12/09/2014 20:48:02" Content="in progress" />
      <Message Id="111258086" ParentId="1034" UserId="4196" Date="06/11/2015 19:52:13" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1035" Title="path + polar coord + single value = error">
    <Messages>
      <Message Id="0" ParentId="1035" UserId="9638446" Date="12/10/2014 11:22:43" Content="Hi, &#xD;&#xA;&#xD;&#xA;I've detected an unexpected behavior. I've briefly browsed the issues and don't think it was reported yet. Please excuse me it was. Here is how to reproduce it:&#xD;&#xA;&#xD;&#xA;```´{ r }&#xD;&#xA;d &lt;- expand.grid(sectors = 1:2,  facets = 1:2 )&#xD;&#xA;d$value &lt;- c(5, 6, 7,  NA)&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;g &lt;- ggplot(d,  aes(x=sectors)) + geom_path(stat='identity',  aes(y=value,  group=1)) + facet_wrap( ~ facets)&#xD;&#xA;&#xD;&#xA;#ok&#xD;&#xA;g&#xD;&#xA;#crash&#xD;&#xA;g + coord_polar()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I understand that **polar** plots must be used with *extreme* precautions but I though that this bug looks simple enough to be reported :)&#xD;&#xA;&#xD;&#xA;ggplot rules!&#xD;&#xA;&#xD;&#xA;François" />
      <Message Id="66536328" ParentId="1035" UserId="463252" Date="12/10/2014 22:27:50" Content="With your example,  I didn't get a crash,  but I did get&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; g + coord_polar()&#xD;&#xA;Error: replacement has 1 row,  data has 0&#xD;&#xA;In addition: Warning message:&#xD;&#xA;Removed 1 rows containing missing values (geom_path). &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It does seem like a bug. " />
      <Message Id="66587146" ParentId="1035" UserId="9638446" Date="12/11/2014 08:31:39" Content="No,  it doesn't properly &quot;crash&quot;.&#xD;&#xA;But when executed by Shiny,  it kills the application :(" />
      <Message Id="66601380" ParentId="1035" UserId="3333348" Date="12/11/2014 10:42:26" Content="An error stops further execution.&#xD;&#xA;&#xD;&#xA;IMHO it is a border effect bug.  The polar code has certainly not been tested in that particular case where no path could be displayed. Adding a point to each path leads to &quot;no crash&quot; ;-)&#xD;&#xA;```&#xD;&#xA;d &lt;- expand.grid(sectors = 1:3,  facets = 1:2 )&#xD;&#xA;d$value &lt;- c(2, 3, 5, 6, 7,  NA)&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;g &lt;- ggplot(d,  aes(x=sectors)) + &#xD;&#xA;geom_path(stat='identity',  aes(y=value,  group=1)) + &#xD;&#xA;facet_wrap( ~ facets)&#xD;&#xA;&#xD;&#xA;#ok&#xD;&#xA;g&#xD;&#xA;# NO MORE crash&#xD;&#xA;g + coord_polar()&#xD;&#xA;```" />
      <Message Id="66611056" ParentId="1035" UserId="9638446" Date="12/11/2014 12:17:18" Content="@SamGG changing data is cheating :D&#xD;&#xA;&#xD;&#xA;Other option is to remove a point ! it doesn't produce error when there is no point:&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;d &lt;- expand.grid(sectors = 1:2,  facets = 1:2 )&#xD;&#xA;d$value &lt;- c(5, 6, NA,  NA)&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;g &lt;- ggplot(d,  aes(x=sectors)) + geom_path(stat='identity',  aes(y=value,  group=1)) + facet_wrap( ~ facets)&#xD;&#xA;&#xD;&#xA;#ok&#xD;&#xA;g&#xD;&#xA;#error&#xD;&#xA;g + coord_polar() &#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I will post something on Shiny g-group to understand why this error stops Shiny,  not others." />
    </Messages>
  </Topic>
  <Topic Id="1036" Title="Supported weighted hexbin plots">
    <Messages>
      <Message Id="0" ParentId="1036" UserId="1721963" Date="12/16/2014 16:24:03" Content="This amendment allows stat_binhex to support weighted data by getting the assignment of input points to hexagons out of the hexbin function,  and then gluing that to an input weight vector to find a weighted sum for each hexagon." />
      <Message Id="111257858" ParentId="1036" UserId="4196" Date="06/11/2015 19:51:00" Content="Looks good.  Could you please:&#xD;&#xA;&#xD;&#xA;1. [   ] Respond to the changes described above&#xD;&#xA;1. [   ] Add a bullet to NEWS&#xD;&#xA;1. [   ] Add a unit test" />
      <Message Id="113173482" ParentId="1036" UserId="4196" Date="06/18/2015 14:31:13" Content="If you're interested in working on this please ping me,  and I'll reopen (I'm closing to make it easier for me to manage the release)" />
      <Message Id="117681314" ParentId="1036" UserId="1721963" Date="07/01/2015 13:45:39" Content="I will do these things; I am not entirely sure how to do a unit test for this,  but I will dig around and see what the standard is - cheers." />
    </Messages>
  </Topic>
  <Topic Id="1037" Title="&quot;inherit from&quot; statement in documentation incorrect">
    <Messages>
      <Message Id="0" ParentId="1037" UserId="3807850" Date="01/02/2015 19:10:52" Content="The documentation (http://docs.ggplot2.org/0.9.3.1/theme.html) claims:&#xD;&#xA;axis.text 	tick labels along axes (element_text; inherits from text)&#xD;&#xA;axis.text.x 	x axis tick labels (element_text; inherits from axis.text)&#xD;&#xA;axis.text.y 	y axis tick labels (element_text; inherits from axis.text)&#xD;&#xA;&#xD;&#xA;If I understand the meaning of &quot;inherit from&quot;,  setting a colour for text should also set the colour for axis.text,  but it doesn't.&#xD;&#xA;&#xD;&#xA;ggplot(data = mtcars,  aes(x = mpg,  y = wt)) + geom_line() + &#xD;&#xA;    theme(text = element_text(size = 20,  colour = &quot;red&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(data = mtcars,  aes(x = mpg,  y = wt)) + geom_line() + &#xD;&#xA;    theme(text = element_text(size = 20,  colour = &quot;red&quot;)) +&#xD;&#xA;    theme(axis.text = element_text(size = 20,  colour = &quot;red&quot;))&#xD;&#xA;&#xD;&#xA;ggplot(data = mtcars,  aes(x = mpg,  y = wt)) + geom_line() + &#xD;&#xA;    theme(text = element_text(size = 20,  colour = &quot;red&quot;)) +&#xD;&#xA;    theme(axis.text.x = element_text(size = 20,  colour = &quot;red&quot;))&#xD;&#xA;" />
      <Message Id="68620394" ParentId="1037" UserId="463252" Date="01/04/2015 04:13:26" Content="The default theme has various things set which you must also consider. In particular&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; theme_grey()$axis.text&#xD;&#xA;List of 8&#xD;&#xA; $ family    : NULL&#xD;&#xA; $ face      : NULL&#xD;&#xA; $ colour    : chr &quot;grey50&quot;&#xD;&#xA; $ size      :Class 'rel'  num 0.8&#xD;&#xA; $ hjust     : NULL&#xD;&#xA; $ vjust     : NULL&#xD;&#xA; $ angle     : NULL&#xD;&#xA; $ lineheight: NULL&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;element_text&quot; &quot;element&quot;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;That is,  unless otherwise specified,  `axis.text` has a color set which takes precedence over the inheritance. &#xD;&#xA;&#xD;&#xA;Compare that with a theme that does not specify a color at that level&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(data = mtcars,  aes(x = mpg,  y = wt)) + &#xD;&#xA;geom_line() +&#xD;&#xA;theme_minimal() +&#xD;&#xA;theme(text = element_text(size = 20,  colour = &quot;red&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;and you can see that the theme allows inheritance here.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; theme_minimal()$axis.text&#xD;&#xA;List of 8&#xD;&#xA; $ family    : NULL&#xD;&#xA; $ face      : NULL&#xD;&#xA; $ colour    : NULL&#xD;&#xA; $ size      :Class 'rel'  num 0.8&#xD;&#xA; $ hjust     : NULL&#xD;&#xA; $ vjust     : NULL&#xD;&#xA; $ angle     : NULL&#xD;&#xA; $ lineheight: NULL&#xD;&#xA; - attr(*,  &quot;class&quot;)= chr [ 1:2 ] &quot;element_text&quot; &quot;element&quot;&#xD;&#xA;```" />
      <Message Id="68629915" ParentId="1037" UserId="3807850" Date="01/04/2015 11:40:10" Content="Thanks for the feedback Brian. I see what's going on. Perhaps the doc could explain this just as you did above. It's not your everyday meaning of 'inherit': I would have thought that most users who read the doc would expect that setting a color for 'text' would also set a color for 'axis.text' and children. However,  admittedly,  most users wouldn't have read the doc ;-)" />
    </Messages>
  </Topic>
  <Topic Id="1038" Title="labs() does not take argument null">
    <Messages>
      <Message Id="0" ParentId="1038" UserId="3807850" Date="01/06/2015 07:47:56" Content="More like a comment rather than an &quot;issue&quot; : &#xD;&#xA;&#xD;&#xA;qplot(x = rnorm(1),  y = seq(0,  1,  length = 10)) + xlab(NULL) + ylab( NULL)   # okay&#xD;&#xA;&#xD;&#xA;qplot(x = rnorm(1),  y = seq(0,  1,  length = 10)) + labs(x=NULL,  y= NULL)  # okay&#xD;&#xA;&#xD;&#xA;qplot(x = rnorm(1),  y = seq(0,  1,  length = 10)) + labs(NULL)   # unexpected&#xD;&#xA;" />
      <Message Id="70959403" ParentId="1038" UserId="631218" Date="01/22/2015 02:00:20" Content="You're using it incorrectly. You have to name the axes.&#xD;&#xA;&#xD;&#xA;    qplot(x = rnorm(1),  y = seq(0,  1,  length = 10)) + labs(x = NULL,  y = NULL)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="70981725" ParentId="1038" UserId="3807850" Date="01/22/2015 07:32:50" Content="DarioS,  thanks: my comment wast that while you can write xlab(NULL),  you cannot write labs(NULL),  as you can see the second case I listed is the one you are showing." />
      <Message Id="111141565" ParentId="1038" UserId="4196" Date="06/11/2015 13:48:37" Content="Yeah,  all arguments to `labs()` must be named" />
    </Messages>
  </Topic>
  <Topic Id="1039" Title="Buffer for text option">
    <Messages>
      <Message Id="0" ParentId="1039" UserId="1825120" Date="01/11/2015 13:14:49" Content="This is a feature request that could make labeling in complex graphics much more aesthetically pleasing: buffers - where you have an area of another colour (typically white) slightly larger than the main text behind the main text to allow the text to be read regardless of what's behind it. This is commonly used in maps,  and is implemented to very good effect in QGIS: http://manual.linfiniti.com/en/vector_classification/label_tool.html" />
      <Message Id="111146489" ParentId="1039" UserId="4196" Date="06/11/2015 14:03:51" Content="This is do-able,  but fiddly because you have to figure out the size of the text at draw time - this means effectively you have to create a custom grid grob. However,  I vaguely remember seeing that somewhere,  so I'll see it's available.&#xD;&#xA;&#xD;&#xA;It would also be useful to expose the `check.overlap` argument - it's not perfect (since you can't control what gets removed) but it might be helpful in some situations." />
      <Message Id="111152470" ParentId="1039" UserId="1825120" Date="06/11/2015 14:20:45" Content="Worth asking the QGIS guys how they do it I'd say. I'll look into it. Cheers." />
      <Message Id="112211920" ParentId="1039" UserId="4196" Date="06/15/2015 21:04:52" Content="I think the right way to tackle this is to develop a new grid grob. Here's a start from Paul Murrell:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(grid)&#xD;&#xA;&#xD;&#xA;textbg &lt;- function(t,  x,  y,  col) { &#xD;&#xA;  grid.draw(gTree(label = t,  x = x,  y = y,  col = col,  cl = &quot;textbg&quot;))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;#' @export&#xD;&#xA;makeContent.textbg &lt;- function(x,  ...) { &#xD;&#xA;  tg &lt;- textGrob(x$label,  x$x,  x$y)&#xD;&#xA;  bg &lt;- roundrectGrob(x$x,  x$y, &#xD;&#xA;    width = grobWidth(tg) + unit(2,  &quot;mm&quot;), &#xD;&#xA;    height = grobWidth(tg) + unit(2,  &quot;mm&quot;), &#xD;&#xA;    gp = gpar(&#xD;&#xA;      col = NA,  &#xD;&#xA;      fill = x$col&#xD;&#xA;    )&#xD;&#xA;  )&#xD;&#xA;  setChildren(x,  gList(bg,  tg))&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;grid.newpage()&#xD;&#xA;textbg(&quot;test&quot;,  .5,  .5,  &quot;green&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I don't have the time to develop it further at the moment." />
      <Message Id="112223394" ParentId="1039" UserId="1825120" Date="06/15/2015 22:05:30" Content="Cool.&#xD;&#xA;&#xD;&#xA;And I don't think I have the skills!&#xD;&#xA;&#xD;&#xA;Will make time to read the [ grob section ](https://github.com/hadley/ggplot2-book/blob/4f9bcdc3ba65edd7ecdbfdf14a71649c59bf400b/grid.rmd#plot-grobs-secplot-grobs) in an attempt to aquire them. Would you recommend this to go into core ggplot2 or an add-on package in the unlikely event that I can do something with this or in the likelier event that someone else can?&#xD;&#xA;&#xD;&#xA;Will be useful for ggmap.&#xD;&#xA;&#xD;&#xA;Related question: are there any elements of ggmap that need to adjust to accomodate ggplot2 1.0.0?&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1040" Title="Update NEWS">
    <Messages>
      <Message Id="0" ParentId="1040" UserId="2601674" Date="01/11/2015 18:39:17" Content="Adds a missing markdown code highlighting." />
      <Message Id="69569547" ParentId="1040" UserId="4196" Date="01/12/2015 13:31:11" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1041" Title="Need to explicitly import density() from stats?">
    <Messages>
      <Message Id="0" ParentId="1041" UserId="660288" Date="01/14/2015 18:16:21" Content="You call it here: https://github.com/hadley/ggplot2/blob/254327c99cbfe061ba6c3fcc30bbb6115768a722/R/stat-ydensity.r#L80&#xD;&#xA;&#xD;&#xA;Interestingly,  if it is not imported explicitly,  then `ggplot2` will just call the first `density` on the search path,  and if an attached package defines a `density` function,  then that one is called. I guess this is true for all functions from the base packages. (?)&#xD;&#xA;&#xD;&#xA;Willing to submit a PR if you want." />
    </Messages>
  </Topic>
  <Topic Id="1042" Title="ggplotGrob sometimes plots blank objects">
    <Messages>
      <Message Id="0" ParentId="1042" UserId="3317138" Date="01/19/2015 02:00:49" Content="If you use ggplotGrob on a simple graph with a legend,  it seems to render a blank plot. For example,  try running this code in Rstudio and you'll see a plot of a blank image be rendered:&#xD;&#xA;&#xD;&#xA;``` temp &lt;- ggplotGrob(ggplot(data.frame(x=c(1, 2)), aes(x=x, fill=factor(x)))+geom_bar())```&#xD;&#xA;&#xD;&#xA;Interestingly,  if your plot doesn't have a legend,  this doesn't seem to be the case. The following code does not render a plot:&#xD;&#xA;``` temp &lt;- ggplotGrob(ggplot(data.frame(x=c(1, 2)), aes(x=x))+geom_bar())```&#xD;&#xA;&#xD;&#xA;This is a problem for me,  since I'm running R on a server environment,  which for happens to give me this error when I ever happen to plot to the default device:&#xD;&#xA;```Error: cannot open file 'Rplots.pdf'```" />
      <Message Id="99261246" ParentId="1042" UserId="4001874" Date="05/05/2015 23:35:03" Content="I am having the same problem. It is quite concerning..." />
      <Message Id="111146625" ParentId="1042" UserId="4196" Date="06/11/2015 14:04:35" Content="Seems to be fine for me.  This may have been related to a problem in the colorSpaces (?) package that has now been fixed." />
    </Messages>
  </Topic>
  <Topic Id="1043" Title="Update stat_summary fun.data documentation">
    <Messages>
      <Message Id="0" ParentId="1043" UserId="611112" Date="01/20/2015 10:06:02" Content="In  issue #929 you mentioned that the documentation for `fun.data` in `stat_summary` is wrong because the function only gets a single vector,  but can return a data frame. You corrected this [ here ](https://github.com/hadley/ggplot2/commit/1cdf2339ca98d8732427640015f35867ae6da20d).&#xD;&#xA;&#xD;&#xA;I think the following part of the current documentation needs to be updated too:&#xD;&#xA;&#xD;&#xA;`fun.data   Complete summary function. Should take data frame as input and return data frame as output`&#xD;&#xA;&#xD;&#xA;Instead it should say:&#xD;&#xA;&#xD;&#xA;`fun.data    Complete summary function. Should take numeric vector as input and return data frame as output`" />
    </Messages>
  </Topic>
  <Topic Id="1044" Title="Custom geom with custom grob not working">
    <Messages>
      <Message Id="0" ParentId="1044" UserId="1775316" Date="01/20/2015 10:46:34" Content="This is a duplicate from google groups where my question has received no feedback.&#xD;&#xA;&#xD;&#xA;I need to create a new geom based on a custom grid grob object I have created (a special case of segmentsGrob - from now on segmentsGrob2). The new geom function works fine with segmentsGrob. segmentsGrob2 itself works fine on it's own. But combined (the new geom calling segmentsGrob2) nothing gets drawn. Examining the gTree of the panel the node that should hold the new grobs are empty (but the node exist).&#xD;&#xA;I'm lost as to where in the evaluation things mess up and would appreciate any pointers. Downright 'it's not possible' answers are also appreciated (might be ggplot2 rely on the grid namespace in a way that makes it impossible to extend it with new grobs)&#xD;&#xA;&#xD;&#xA;My current code is:&#xD;&#xA;```R&#xD;&#xA;geom_segment2 &lt;- function(mapping = NULL,  data = NULL,  stat = &quot;identity&quot;, &#xD;&#xA;                           position = &quot;identity&quot;,  arrow = NULL,  lineend = &quot;butt&quot;,  na.rm = FALSE,  startAdjust = NULL,  endAdjust = NULL,  ...) { &#xD;&#xA;    &#xD;&#xA;    GeomSegment2$new(mapping = mapping,  data = data,  stat = stat, &#xD;&#xA;                     position = position,  arrow = arrow,  lineend = lineend,  na.rm = na.rm,  startAdjust = startAdjust,  endAdjust = endAdjust,  ...)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;GeomSegment2 &lt;- proto(ggplot2:::Geom,  { &#xD;&#xA;    objname &lt;- &quot;segment2&quot;&#xD;&#xA;    &#xD;&#xA;    draw &lt;- function(.,  data,  scales,  coordinates,  arrow = NULL, &#xD;&#xA;                     lineend = &quot;butt&quot;,  na.rm = FALSE,  startAdjust = startAdjust,  endAdjust = endAdjust,  ...) { &#xD;&#xA;        &#xD;&#xA;        data &lt;- remove_missing(data,  na.rm = na.rm, &#xD;&#xA;                               c(&quot;x&quot;,  &quot;y&quot;,  &quot;xend&quot;,  &quot;yend&quot;,  &quot;linetype&quot;,  &quot;size&quot;,  &quot;shape&quot;), &#xD;&#xA;                               name = &quot;geom_segment&quot;)&#xD;&#xA;        if (empty(data)) return(zeroGrob())&#xD;&#xA;        &#xD;&#xA;        if (is.linear(coordinates)) { &#xD;&#xA;            return(with(coord_transform(coordinates,  data,  scales),  { &#xD;&#xA;                segmentsGrob2(x,  y,  xend,  yend,  default.units=&quot;native&quot;,  startAdjust=startAdjust,  endAdjust=endAdjust, &#xD;&#xA;                              gp = gpar(col=alpha(colour,  alpha),  fill = alpha(colour,  alpha), &#xD;&#xA;                                        lwd=size * .pt,  lty=linetype,  lineend = lineend), &#xD;&#xA;                                        arrow = arrow)&#xD;&#xA;             }&#xD;&#xA;            ))&#xD;&#xA;         }&#xD;&#xA;        &#xD;&#xA;        data$group &lt;- 1:nrow(data)&#xD;&#xA;        starts &lt;- subset(data,  select = c(-xend,  -yend))&#xD;&#xA;        ends &lt;- rename(subset(data,  select = c(-x,  -y)),  c(&quot;xend&quot; = &quot;x&quot;,  &quot;yend&quot; = &quot;y&quot;), &#xD;&#xA;                       warn_missing = FALSE)&#xD;&#xA;        &#xD;&#xA;        pieces &lt;- rbind(starts,  ends)&#xD;&#xA;        pieces &lt;- pieces[ order(pieces$group),  ]&#xD;&#xA;        &#xD;&#xA;        GeomPath$draw_groups(pieces,  scales,  coordinates,  arrow = arrow,  ...)&#xD;&#xA;     }&#xD;&#xA;    &#xD;&#xA;    &#xD;&#xA;    default_stat &lt;- function(.) StatIdentity&#xD;&#xA;    required_aes &lt;- c(&quot;x&quot;,  &quot;y&quot;,  &quot;xend&quot;,  &quot;yend&quot;)&#xD;&#xA;    default_aes &lt;- function(.) aes(colour=&quot;black&quot;,  size=0.5,  linetype=1,  alpha = NA)&#xD;&#xA;    guide_geom &lt;- function(.) &quot;path&quot;&#xD;&#xA; })&#xD;&#xA;segmentsGrob2 &lt;- function(x0 = unit(0,  &quot;npc&quot;),  y0 = unit(0,  &quot;npc&quot;),  x1 = unit(1,  &quot;npc&quot;),  y1 = unit(1,  &quot;npc&quot;),  &#xD;&#xA;                          startAdjust = unit(0,  'npc'),  endAdjust = unit(0,  'npc'),  default.units = &quot;npc&quot;,  &#xD;&#xA;                          arrow = NULL,  name = NULL,  gp = gpar(),  vp = NULL) { &#xD;&#xA;    if (!is.unit(x0)) &#xD;&#xA;        x0 &lt;- unit(x0,  default.units)&#xD;&#xA;    if (!is.unit(x1)) &#xD;&#xA;        x1 &lt;- unit(x1,  default.units)&#xD;&#xA;    if (!is.unit(y0)) &#xD;&#xA;        y0 &lt;- unit(y0,  default.units)&#xD;&#xA;    if (!is.unit(y1)) &#xD;&#xA;        y1 &lt;- unit(y1,  default.units)&#xD;&#xA;    grid.draw(grob(x0 = x0,  y0 = y0,  x1 = x1,  y1 = y1,  startAdjust=startAdjust,  endAdjust=endAdjust,  &#xD;&#xA;              arrow = arrow,  name=name,  gp=gp,  vp=vp,  cl=&quot;segments2&quot;))&#xD;&#xA; }&#xD;&#xA;drawDetails.segments2 &lt;- function(x,  recording=TRUE) { &#xD;&#xA;    devSize &lt;- dev.size()&#xD;&#xA;    transformation &lt;- matrix(c(devSize[ 1 ],  0,  0,  devSize[ 2 ]),  ncol=2)&#xD;&#xA;    newVec &lt;- cbind(as.numeric(x$x1)-as.numeric(x$x0),  as.numeric(x$y1)-as.numeric(x$y0)) %*% transformation&#xD;&#xA;    segAngle &lt;- atan2(newVec[ , 2 ],  newVec[ ,  1 ])&#xD;&#xA;    xAdjust &lt;- cos(segAngle)&#xD;&#xA;    yAdjust &lt;- sin(segAngle)&#xD;&#xA;    if(!is.null(x$startAdjust)) { &#xD;&#xA;        x$x0 &lt;- x$x0 + unit(as.numeric(x$startAdjust)*xAdjust,  attributes(x$startAdjust)$unit)&#xD;&#xA;        x$y0 &lt;- x$y0 + unit(as.numeric(x$startAdjust)*yAdjust,  attributes(x$startAdjust)$unit)&#xD;&#xA;     }&#xD;&#xA;    if(!is.null(x$endAdjust)) { &#xD;&#xA;        x$x1 &lt;- x$x1 - unit(as.numeric(x$endAdjust)*xAdjust,  attributes(x$endAdjust)$unit)&#xD;&#xA;        x$y1 &lt;- x$y1 - unit(as.numeric(x$endAdjust)*yAdjust,  attributes(x$endAdjust)$unit)&#xD;&#xA;     }&#xD;&#xA;    if(!is.null(x$arrow)) { &#xD;&#xA;        x$x0 &lt;- x$x0 + unit(ifelse(x$arrow$ends %in% c(1, 3),  xAdjust*(x$size * ggplot2:::.pt)/96,  0),  'inch')&#xD;&#xA;        x$y0 &lt;- x$y0 + unit(ifelse(x$arrow$ends %in% c(1, 3),  yAdjust*(x$size * ggplot2:::.pt)/96,  0),  'inch')&#xD;&#xA;        x$x1 &lt;- x$x1 - unit(ifelse(x$arrow$ends %in% c(2, 3),  xAdjust*(x$size * ggplot2:::.pt)/96,  0),  'inch')&#xD;&#xA;        x$y1 &lt;- x$y1 - unit(ifelse(x$arrow$ends %in% c(2, 3),  yAdjust*(x$size * ggplot2:::.pt)/96,  0),  'inch')&#xD;&#xA;     }&#xD;&#xA;    grid.segments(x0 = x$x0,  y0 = x$y0,  x1 = x$x1,  y1 = x$y1,  arrow = x$arrow,  name=x$name,  gp=x$gp,  vp=x$vp)&#xD;&#xA; }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;For what it's worth,  what I'm trying to do is to have a segment where the line stops a fixed length before it reaches its end point,  making it possible to position arrowheads more directly e.g. at the periphery of a circle..." />
      <Message Id="111147184" ParentId="1044" UserId="4196" Date="06/11/2015 14:07:31" Content="To debug this,  I'd recommend breaking it into a set of simple steps:&#xD;&#xA;&#xD;&#xA;1. Check that `segmentsGrob2()` by creating a simple test visualisation using grid.&#xD;&#xA;2. Simplify `GeomSegment2()` to just draw points.&#xD;&#xA;3. Combine `GeomSegment2()` with `segmentsGrob2()`&#xD;&#xA;&#xD;&#xA;Hopefully that will make it more obvious where the problem is" />
      <Message Id="111244719" ParentId="1044" UserId="1775316" Date="06/11/2015 19:10:22" Content="Thanks for taking this up - as indicated in the question (though not stated very clearly) step 1 and 2 has already been performed with no indication of problems. It is only in step 3 everything falls apart... If you say that there is nothing in particular that should prevent me from extending ggplot2 in this way I'll dig further..." />
      <Message Id="111253400" ParentId="1044" UserId="4196" Date="06/11/2015 19:27:45" Content="To be honest,  if you've got this far,  you probably know as much about adding custom grobs to ggplot2 as me! Past-me knew a lot more." />
      <Message Id="111253861" ParentId="1044" UserId="1775316" Date="06/11/2015 19:30:17" Content=" : -) Life as Chief scientist is tough" />
      <Message Id="114777497" ParentId="1044" UserId="1775316" Date="06/24/2015 08:17:31" Content="Will await the transition to R6 and try again..." />
    </Messages>
  </Topic>
  <Topic Id="1045" Title="options(OutDec= &quot;, &quot;) and aes_string()">
    <Messages>
      <Message Id="0" ParentId="1045" UserId="93231" Date="01/20/2015 19:03:43" Content="``aes_string`` is having trouble with decimal values.  Should I be calling the value inside a quote (as a character) to make it work properly?  Seems odd.&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;# works ok&#xD;&#xA;aes_string(x = 2.5)&#xD;&#xA;aes(x = 2.5)&#xD;&#xA;&#xD;&#xA;options(OutDec= &quot;, &quot;)&#xD;&#xA;&#xD;&#xA;aes(alpha = 0.4)&#xD;&#xA;# List of 1&#xD;&#xA;#  $ alpha: num 0, 4&#xD;&#xA;aes_string(alpha = 0.4)&#xD;&#xA;# Error in parse(text = x) : &lt;text&gt;:1:2: unexpected ', '&#xD;&#xA;# 1: 0, &#xD;&#xA;#      ^&#xD;&#xA;aes_string(alpha = &quot;0.4&quot;)&#xD;&#xA;# List of 1&#xD;&#xA;#  $ alpha: num 0, 4&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# wrong&#xD;&#xA;aes_string(alpha = 0, 4)&#xD;&#xA;# List of 2&#xD;&#xA;#  $ x    : num 4&#xD;&#xA;#  $ alpha: num 0&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Thank you, &#xD;&#xA;Barret" />
      <Message Id="70851342" ParentId="1045" UserId="4196" Date="01/21/2015 14:57:59" Content="Wow,  I've never seen that before! " />
    </Messages>
  </Topic>
  <Topic Id="1046" Title="cut_number Doesn't Work With Duplicated Values">
    <Messages>
      <Message Id="0" ParentId="1046" UserId="631218" Date="01/21/2015 07:00:10" Content="cut_number fails sometimes when there are duplicated values.&#xD;&#xA;&#xD;&#xA;    &gt; cut_number(rep(1:5,  2),  10,  labels = FALSE)&#xD;&#xA;    Error in cut.default(x,  breaks(x,  &quot;n&quot;,  n),  include.lowest = TRUE,  ...) : 'breaks' are not unique&#xD;&#xA;&#xD;&#xA;This limitation should at least be stated in the documentation,  but ideally changed to produce a meaningful result." />
      <Message Id="111122236" ParentId="1046" UserId="4196" Date="06/11/2015 12:51:59" Content="This is nothing to do with duplicated input - it's because you've asked for 10 bins with equal numbers of bins in them,  and there are only 5 values" />
    </Messages>
  </Topic>
  <Topic Id="1047" Title="geom_ribbon() segfaults">
    <Messages>
      <Message Id="0" ParentId="1047" UserId="70196" Date="01/22/2015 17:45:30" Content="" />
      <Message Id="71063953" ParentId="1047" UserId="86978" Date="01/22/2015 17:46:41" Content="A reproducible example would be helpful." />
      <Message Id="71064013" ParentId="1047" UserId="70196" Date="01/22/2015 17:47:05" Content="Sorry,  fat-fingered enter key... typing it in right now. " />
      <Message Id="71069460" ParentId="1047" UserId="70196" Date="01/22/2015 18:17:19" Content="I had reinstalled ggplot2 from install.packages() just in case and still got the segfault. &#xD;&#xA;&#xD;&#xA;But -- then I ran `update.packages(ask=F)` just in case it is something else ggplot2 uses,  and the issue seems to have gone away (now I get &quot;aesthetics cannot vary with ribbon&quot; as I think is intended). I'm still not sure what it was (should've kept better track of the packages) but I guess this can be closed now. Sorry for the boondoggle. &#xD;&#xA;&#xD;&#xA;For the record,  here is the traceback -- in case someone else sees this,  making sure everything (not just ggplot2) is up to date fixed it for me. &#xD;&#xA;&#xD;&#xA;```&#xD;&#xA; *** caught segfault ***&#xD;&#xA;address 0xfffffffffffffff8,  cause 'memory not mapped'&#xD;&#xA;&#xD;&#xA;Traceback:&#xD;&#xA; 1: .Call(&quot;plyr_loop_apply&quot;,  PACKAGE = &quot;plyr&quot;,  n,  f)&#xD;&#xA; 2: loop_apply(n,  do.ply)&#xD;&#xA; 3: llply(.data = pieces,  .fun = .fun,  ...,  .progress = .progress,      .inform = .inform,  .parallel = .parallel,  .paropts = .paropts)&#xD;&#xA; 4: dlply(layer_data,  &quot;PANEL&quot;,  function(df) {     panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)    layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],  cs = plot$coord) },  .drop = FALSE)&#xD;&#xA; 5: (function (layer,  layer_data) {     if (nrow(layer_data) == 0)         return()    dlply(layer_data,  &quot;PANEL&quot;,  function(df) {         panel_i &lt;- match(df$PANEL[ 1 ],  panel$layout$PANEL)        layer$make_grob(df,  scales = panel$ranges[ [ panel_i ] ],              cs = plot$coord)     },  .drop = FALSE) })(dots[ [ 1L ] ][ [ 1L ] ],  dots[ [ 2L ] ][ [ 1L ] ])&#xD;&#xA; 6: mapply(FUN = f,  ...,  SIMPLIFY = FALSE)&#xD;&#xA; 7: Map(build_grob,  plot$layer,  data)&#xD;&#xA; 8: ggplot_gtable(data)&#xD;&#xA; 9: print.ggplot(list(data = list(Sepal.Length = c(5.1,  4.....&lt;snip&gt;&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="71075969" ParentId="1047" UserId="86978" Date="01/22/2015 18:52:40" Content="No worries. Glad it's working for you now!" />
    </Messages>
  </Topic>
  <Topic Id="1048" Title="geom_vline requires converting to numeric when intercept is a POSIXct">
    <Messages>
      <Message Id="0" ParentId="1048" UserId="6182461" Date="01/24/2015 00:25:16" Content="&#xD;&#xA;Even though ggplot successfully plots points where the x-axis is a POSIXct,  calling &quot;geom_vline&quot; with the x-intercept being set to the same x values gives the error &quot;Error: Discrete value supplied to continuous scale&quot;.&#xD;&#xA;&#xD;&#xA;It seems like a bug that the code below labeled &quot;Does NOT work.&quot;  would produce this error.&#xD;&#xA;&#xD;&#xA;This issue is similar but not the quite the same as other issues I have seen in &quot;hadley / ggplot2&quot;.&#xD;&#xA;&#xD;&#xA;Thanks, &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;library(dplyr)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;xdf &lt;- data.frame(datetime = seq(as.POSIXct('2015-01-01 15:00:00'),  length.out = 5,  by = 'day'), &#xD;&#xA;                  count = 1:5)&#xD;&#xA;### Grab subset of xdf&#xD;&#xA;ydf &lt;- xdf %&gt;% filter(count &gt;= 3,  count &lt;= 4)&#xD;&#xA;&#xD;&#xA;#########################################&#xD;&#xA;### Does NOT work.&#xD;&#xA;#########################################&#xD;&#xA;ggplot(xdf,  aes(datetime,  count)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(aes(xintercept = datetime))&#xD;&#xA;# Error: Discrete value supplied to continuous scale&#xD;&#xA;&#xD;&#xA;#########################################&#xD;&#xA;### Does NOT work.&#xD;&#xA;#########################################&#xD;&#xA;ggplot(xdf,  aes(datetime,  count)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(aes(xintercept = datetime),  data = ydf)&#xD;&#xA;# Error: Discrete value supplied to continuous scale&#xD;&#xA;&#xD;&#xA;#########################################&#xD;&#xA;### Works (i.e. plots correctly)&#xD;&#xA;#########################################&#xD;&#xA;ggplot(xdf,  aes(datetime,  count)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(aes(xintercept = as.numeric(datetime)))&#xD;&#xA;### Also works.&#xD;&#xA;ggplot(xdf,  aes(datetime,  count)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  geom_vline(aes(xintercept = as.numeric(datetime)),  data = ydf)&#xD;&#xA;" />
      <Message Id="111121908" ParentId="1048" UserId="4196" Date="06/11/2015 12:50:42" Content="Yes,  unfortunately this is a known issue that is difficult to fix." />
    </Messages>
  </Topic>
  <Topic Id="1049" Title="adds flip.legend option for boxplot">
    <Messages>
      <Message Id="0" ParentId="1049" UserId="1365576" Date="01/24/2015 17:57:40" Content=" to flip the boxplot symbol in the legend. makes legend and boxplot more similar when coord_flip is used to make horizontal boxplots." />
      <Message Id="113173512" ParentId="1049" UserId="4196" Date="06/18/2015 14:31:20" Content="If you're interested in working on this please ping me,  and I'll reopen (I'm closing to make it easier for me to manage the release)" />
    </Messages>
  </Topic>
  <Topic Id="1050" Title="geom_bar(width = ) fails with datetime scales">
    <Messages>
      <Message Id="0" ParentId="1050" UserId="3522552" Date="01/28/2015 00:38:56" Content="    library(lubridate)&#xD;&#xA;    library(dplyr)&#xD;&#xA;    library(tidyr)&#xD;&#xA;    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    lakers %&gt;%&#xD;&#xA;      mutate(month = floor_date(ymd(date),  &quot;month&quot;)) %&gt;%&#xD;&#xA;      count(month) %&gt;%&#xD;&#xA;      ggplot(aes(month,  n)) + &#xD;&#xA;      geom_bar(stat = &quot;identity&quot;,  width = 1)" />
      <Message Id="71832149" ParentId="1050" UserId="4196" Date="01/28/2015 13:10:24" Content="It doesn't fail - you've just made the bars 1s wide." />
      <Message Id="71885772" ParentId="1050" UserId="3522552" Date="01/28/2015 18:16:23" Content="Whoops,  sorry." />
    </Messages>
  </Topic>
  <Topic Id="1051" Title="Documentation: link in coord_map is incorrect">
    <Messages>
      <Message Id="0" ParentId="1051" UserId="1260667" Date="01/30/2015 21:00:12" Content="The ggplot documentation for [ coord-map ](http://docs.ggplot2.org/current/coord_map.html)  links to a [ dead link ](http://www.inside-r.org/r-doc/mapproj/mapproject). The coordman source code shows:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;#' @param ... other arguments passed on to&#xD;&#xA;#'   \code{ \link[ mapproj ]{ mapproject } }&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;so I think link-generation for other packages is generating incorrect URLs.&#xD;&#xA;&#xD;&#xA;not sure where to fix this but wanted to let you know.&#xD;&#xA;&#xD;&#xA;zach cp" />
      <Message Id="73084314" ParentId="1051" UserId="5631503" Date="02/05/2015 17:06:11" Content="@zachcp @hadley The purpose of that link is to let users know of projections chord_map takes as argument. We can link that to http://cran.r-project.org/web/packages/mapproj/mapproj.pdf." />
      <Message Id="111121823" ParentId="1051" UserId="4196" Date="06/11/2015 12:50:15" Content="This is really a staticdocs problem :/" />
    </Messages>
  </Topic>
  <Topic Id="1052" Title="vline not working as annotation">
    <Messages>
      <Message Id="0" ParentId="1052" UserId="10103420" Date="02/03/2015 02:30:28" Content="Reproducible example:  &#xD;&#xA;&#xD;&#xA;data.frame(a = rnorm(1000),  b = rnorm(1000)) %&gt;% &#xD;&#xA;     ggplot(aes(x = a,  y = b)) + &#xD;&#xA;     geom_point() + &#xD;&#xA;     annotate(&quot;vline&quot;,  xintercept = 0)&#xD;&#xA;&#xD;&#xA;If you specify x instead of xintercept,  it throws an error that its missing xend.  If you specify xend,  it still throws an error that its missing xend.  " />
      <Message Id="111121666" ParentId="1052" UserId="4196" Date="06/11/2015 12:49:18" Content="Yes,  vline is a special geom that doesn't work as annotation. You can just do `+ geom_vline(xintercept = 0)`" />
    </Messages>
  </Topic>
  <Topic Id="1053" Title="typo: &quot;funciton&quot; to &quot;function&quot;">
    <Messages>
      <Message Id="0" ParentId="1053" UserId="1071322" Date="02/11/2015 21:06:45" Content="" />
      <Message Id="74598522" ParentId="1053" UserId="1071322" Date="02/17/2015 00:44:05" Content="ping :bell: " />
      <Message Id="111257094" ParentId="1053" UserId="4196" Date="06/11/2015 19:46:41" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1054" Title="Typo in diamonds.Rd">
    <Messages>
      <Message Id="0" ParentId="1054" UserId="5746456" Date="02/13/2015 13:26:04" Content="There is a typo in diamonds dataset structure description: there is no colour as written in diamonds.Rd. Dataset contains &quot;color&quot; instead." />
    </Messages>
  </Topic>
  <Topic Id="1055" Title="typo in annotate docs">
    <Messages>
      <Message Id="0" ParentId="1055" UserId="836040" Date="02/19/2015 11:57:22" Content="" />
      <Message Id="111257057" ParentId="1055" UserId="4196" Date="06/11/2015 19:46:31" Content="Thanks - but you have to make the fix in the originating R file,  since that's what the Rd files are generated from." />
      <Message Id="111298555" ParentId="1055" UserId="836040" Date="06/11/2015 22:52:02" Content="d'oh!" />
    </Messages>
  </Topic>
  <Topic Id="1056" Title="ggplot2 installation fails on R 3.0.2">
    <Messages>
      <Message Id="0" ParentId="1056" UserId="4700332" Date="02/20/2015 21:04:34" Content="Our CI server started failing all our builds today.  We were using R pegged to 3.0.2  with ggplot2.  We tracked the problem down to failing to install MASS,  a prerequisite of ggplot2.  MASS updated today to version 3.9 which now requires R 3.1.0.  (http://cran.r-project.org/web/packages/MASS/index.html) &#xD;&#xA;&#xD;&#xA;Updating our version of R fixed the problem,  but it was a very confusing issue.  " />
      <Message Id="110943227" ParentId="1056" UserId="4196" Date="06/10/2015 23:09:07" Content="Unfortunately I don't have the resource to support ggplot2 on old versions of R." />
    </Messages>
  </Topic>
  <Topic Id="1057" Title="Fixed typo in help file for scale-continuous.R">
    <Messages>
      <Message Id="0" ParentId="1057" UserId="2498638" Date="02/22/2015 10:05:01" Content="" />
      <Message Id="111256850" ParentId="1057" UserId="4196" Date="06/11/2015 19:45:24" Content="Spotted this myself and fixed it - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1058" Title="x axis labels wrong using facet_grid">
    <Messages>
      <Message Id="0" ParentId="1058" UserId="1090101" Date="02/23/2015 04:51:48" Content="Hi, &#xD;&#xA;&#xD;&#xA;I sometimes use the row names of a data frame to label the x axis of my plots. Today,  this resulted in incorrect assignments of x axis labels to the data. Code for a (hopefully) reproducible example is below. I was using `fill` and `color` for an explorative analysis of two categorical variables, &#xD;&#xA;and noticed that after adding facet_grid on a third variable,  the assignment of the x axis labels&#xD;&#xA;was off.&#xD;&#xA;&#xD;&#xA;The small table (6 x 32) can be downloaded here: https://www.dropbox.com/s/zu4i7xbg0hl64l7/ggplot2.xls?dl=0.&#xD;&#xA;The data looks like this:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;Customer | UnitA | UnitB | Category | Change | Month | CEO&#xD;&#xA;---------|-------|-------|----------|--------|-------|------&#xD;&#xA;A1	| 23668	| 402393	| high| 	6.491608782	| January	| John&#xD;&#xA;A2	| 4098	| 83704	| high	| 7.798828697	| March	| John&#xD;&#xA;A3 | 	19568	| 320138	| high	| 6.246519899	| January	| John&#xD;&#xA;...&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Now,  this works:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;df = read.delim(&quot;ggplot2.xls&quot;)&#xD;&#xA;## creating the plot based on df as is&#xD;&#xA;p = ggplot(df, &#xD;&#xA;       aes(x = Customer,  y = log2(Change), &#xD;&#xA;           fill = CEO,  color = Category)) +&#xD;&#xA;   geom_bar(stat = &quot;identity&quot;) +&#xD;&#xA;   theme(text = element_text(size = 8), &#xD;&#xA;         axis.text.x = element_text(hjust = 1,  vjust = 1,  angle = 45)) +&#xD;&#xA;   scale_color_manual(values = c(&quot;firebrick3&quot;,  &quot;darkblue&quot;)) +&#xD;&#xA;   scale_fill_manual(values = c(&quot;grey70&quot;,  &quot;grey80&quot;))&#xD;&#xA;   &#xD;&#xA;## no difference in &quot;Category&quot; between simple barplot, &#xD;&#xA;p&#xD;&#xA;## and after adding facets&#xD;&#xA;p + facet_grid(. ~ Month,  scales = &quot;free&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;See images 1 and 2.&#xD;&#xA;&#xD;&#xA;![ image1 ](https://cloud.githubusercontent.com/assets/1090101/6322840/6cc78892-baec-11e4-8dd2-fd1d122467dd.png)&#xD;&#xA;![ image2 ](https://cloud.githubusercontent.com/assets/1090101/6322842/6ccc6d94-baec-11e4-9486-004629555cbe.png)&#xD;&#xA;&#xD;&#xA;Redrawing the plot using data.frame row names to label the x axis,  everything is fine&#xD;&#xA;without adding facets (image3.png),  but &#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;rownames(df) = df$Customer&#xD;&#xA;&#xD;&#xA;p = ggplot(df, &#xD;&#xA;       aes(x = rownames(df),  y = log2(Change), &#xD;&#xA;           fill = CEO,  color = Category)) +&#xD;&#xA;   geom_bar(stat = &quot;identity&quot;) +&#xD;&#xA;   theme(text = element_text(size = 8), &#xD;&#xA;         axis.text.x = element_text(hjust = 1,  vjust = 1,  angle = 45)) +&#xD;&#xA;   scale_color_manual(values = c(&quot;firebrick3&quot;,  &quot;darkblue&quot;)) +&#xD;&#xA;   scale_fill_manual(values = c(&quot;grey70&quot;,  &quot;grey80&quot;))&#xD;&#xA;&#xD;&#xA;## simple barplot correct,  see image3.png&#xD;&#xA;p&#xD;&#xA;## now Customer and Category do not match! (image4.png)&#xD;&#xA;p + facet_grid(. ~ Month,  scales = &quot;free&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;![ image3 ](https://cloud.githubusercontent.com/assets/1090101/6322841/6ccbedba-baec-11e4-8eef-c3a4cd2af53b.png)&#xD;&#xA;![ image4 ](https://cloud.githubusercontent.com/assets/1090101/6322843/6cccd00e-baec-11e4-91a6-d4e91b433a09.png)&#xD;&#xA;&#xD;&#xA;Thanks!&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;R&gt; sessionInfo()&#xD;&#xA;R version 3.1.2 (2014-10-31)&#xD;&#xA;Platform: x86_64-apple-darwin13.4.0 (64-bit)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0  colorout_1.0-3 setwidth_1.0-3&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-4 digest_0.6.4     grid_3.1.2       gtable_0.1.2    &#xD;&#xA; [ 5 ] labeling_0.3     MASS_7.3-35      munsell_0.4.2    plyr_1.8.1      &#xD;&#xA; [ 9 ] proto_0.3-10     Rcpp_0.11.3      reshape2_1.4     scales_0.2.4    &#xD;&#xA;[ 13 ] stringr_0.6.2   &#xD;&#xA;R&gt; &#xD;&#xA;```" />
      <Message Id="75489797" ParentId="1058" UserId="1090101" Date="02/23/2015 04:59:12" Content="Sorry,  my post was truncated. The last paragraph should have been:&#xD;&#xA;&#xD;&#xA;Redrawing the plot using data.frame row names to label the x axis,  everything is fine&#xD;&#xA;without adding facets (image3.png),  but after `facet_grid` the bars previously and correctly&#xD;&#xA;assigned to A17,  A26,  A28,  and A5 are now A10,  A15,  A26,  and A28 (image4.png)!&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="115943981" ParentId="1058" UserId="1090101" Date="06/27/2015 02:56:34" Content="I still had the data from the example above. Here it is,  I hope it helps!&#xD;&#xA;&#xD;&#xA;structure(list(Customer = structure(c(1L,  12L,  23L,  26L,  27L,  &#xD;&#xA;28L,  29L,  30L,  31L,  2L,  3L,  4L,  5L,  6L,  7L,  8L,  9L,  10L,  11L,  &#xD;&#xA;13L,  14L,  15L,  16L,  17L,  18L,  19L,  20L,  21L,  22L,  24L,  25L),  .Label = c(&quot;A1&quot;,  &#xD;&#xA;&quot;A10&quot;,  &quot;A11&quot;,  &quot;A12&quot;,  &quot;A13&quot;,  &quot;A14&quot;,  &quot;A15&quot;,  &quot;A16&quot;,  &quot;A17&quot;,  &quot;A18&quot;,  &#xD;&#xA;&quot;A19&quot;,  &quot;A2&quot;,  &quot;A20&quot;,  &quot;A21&quot;,  &quot;A22&quot;,  &quot;A23&quot;,  &quot;A24&quot;,  &quot;A25&quot;,  &quot;A26&quot;,  &#xD;&#xA;&quot;A27&quot;,  &quot;A28&quot;,  &quot;A29&quot;,  &quot;A3&quot;,  &quot;A30&quot;,  &quot;A31&quot;,  &quot;A4&quot;,  &quot;A5&quot;,  &quot;A6&quot;,  &quot;A7&quot;,  &#xD;&#xA;&quot;A8&quot;,  &quot;A9&quot;),  class = &quot;factor&quot;),  UnitA = c(23668L,  4098L,  19568L,  &#xD;&#xA;16634L,  29L,  852L,  32902L,  72703L,  23687L,  7196L,  69642L,  198516L,  &#xD;&#xA;19585L,  144626L,  12124L,  13724L,  296L,  40196L,  57115L,  18148L,  &#xD;&#xA;49740L,  76445L,  44880L,  80208L,  69155L,  0L,  2243L,  6L,  13518L,  &#xD;&#xA;48524L,  30860L),  UnitB = c(402393L,  83704L,  320138L,  301919L,  &#xD;&#xA;23807L,  330522L,  736079L,  2097137L,  516717L,  217473L,  2152911L,  &#xD;&#xA;3686157L,  600019L,  2291008L,  538752L,  798983L,  33761L,  492461L,  &#xD;&#xA;559878L,  429685L,  1507116L,  2340665L,  931401L,  1069973L,  903710L,  &#xD;&#xA;153811L,  124507L,  4108L,  405623L,  963861L,  1181196L),  Category = structure(c(1L,  &#xD;&#xA;1L,  1L,  1L,  2L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L,  &#xD;&#xA;1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L,  1L,  2L,  1L,  1L,  1L),  .Label = c(&quot;high&quot;,  &#xD;&#xA;&quot;low&quot;),  class = &quot;factor&quot;),  Change = c(6.491608782,  7.798828697,  &#xD;&#xA;6.246519899,  6.930096667,  315.625,  148.1211268,  8.542089139,  &#xD;&#xA;11.01361701,  8.329196008,  11.53843588,  11.80351512,  7.089814423,  &#xD;&#xA;11.69750628,  6.048331425,  16.96733643,  22.22803183,  43.48987854,  &#xD;&#xA;4.677792041,  3.742814522,  9.040402037,  11.56904704,  11.69089853,  &#xD;&#xA;7.923930481,  5.093447038,  4.989571223,  Inf,  21.19636169,  261.4,  &#xD;&#xA;11.45690191,  7.584217425,  14.61426294),  Month = structure(c(1L,  &#xD;&#xA;3L,  1L,  1L,  3L,  1L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  1L,  2L,  2L,  &#xD;&#xA;1L,  1L,  1L,  2L,  2L,  2L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  3L),  .Label = c(&quot;January&quot;,  &#xD;&#xA;&quot;July&quot;,  &quot;March&quot;),  class = &quot;factor&quot;),  CEO = structure(c(2L,  2L,  &#xD;&#xA;2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  1L,  1L,  1L,  1L,  &#xD;&#xA;1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L),  .Label = c(&quot;Jack&quot;,  &#xD;&#xA;&quot;John&quot;),  class = &quot;factor&quot;)),  .Names = c(&quot;Customer&quot;,  &quot;UnitA&quot;,  &#xD;&#xA;&quot;UnitB&quot;,  &quot;Category&quot;,  &quot;Change&quot;,  &quot;Month&quot;,  &quot;CEO&quot;),  class = &quot;data.frame&quot;,  row.names = c(NA,  &#xD;&#xA;-31L))" />
      <Message Id="115943981" ParentId="1058" UserId="1090101" Date="06/27/2015 02:56:34" Content="I still had the data from the example above. Here it is,  I hope it helps!&#xD;&#xA;&#xD;&#xA;structure(list(Customer = structure(c(1L,  12L,  23L,  26L,  27L,  &#xD;&#xA;28L,  29L,  30L,  31L,  2L,  3L,  4L,  5L,  6L,  7L,  8L,  9L,  10L,  11L,  &#xD;&#xA;13L,  14L,  15L,  16L,  17L,  18L,  19L,  20L,  21L,  22L,  24L,  25L),  .Label = c(&quot;A1&quot;,  &#xD;&#xA;&quot;A10&quot;,  &quot;A11&quot;,  &quot;A12&quot;,  &quot;A13&quot;,  &quot;A14&quot;,  &quot;A15&quot;,  &quot;A16&quot;,  &quot;A17&quot;,  &quot;A18&quot;,  &#xD;&#xA;&quot;A19&quot;,  &quot;A2&quot;,  &quot;A20&quot;,  &quot;A21&quot;,  &quot;A22&quot;,  &quot;A23&quot;,  &quot;A24&quot;,  &quot;A25&quot;,  &quot;A26&quot;,  &#xD;&#xA;&quot;A27&quot;,  &quot;A28&quot;,  &quot;A29&quot;,  &quot;A3&quot;,  &quot;A30&quot;,  &quot;A31&quot;,  &quot;A4&quot;,  &quot;A5&quot;,  &quot;A6&quot;,  &quot;A7&quot;,  &#xD;&#xA;&quot;A8&quot;,  &quot;A9&quot;),  class = &quot;factor&quot;),  UnitA = c(23668L,  4098L,  19568L,  &#xD;&#xA;16634L,  29L,  852L,  32902L,  72703L,  23687L,  7196L,  69642L,  198516L,  &#xD;&#xA;19585L,  144626L,  12124L,  13724L,  296L,  40196L,  57115L,  18148L,  &#xD;&#xA;49740L,  76445L,  44880L,  80208L,  69155L,  0L,  2243L,  6L,  13518L,  &#xD;&#xA;48524L,  30860L),  UnitB = c(402393L,  83704L,  320138L,  301919L,  &#xD;&#xA;23807L,  330522L,  736079L,  2097137L,  516717L,  217473L,  2152911L,  &#xD;&#xA;3686157L,  600019L,  2291008L,  538752L,  798983L,  33761L,  492461L,  &#xD;&#xA;559878L,  429685L,  1507116L,  2340665L,  931401L,  1069973L,  903710L,  &#xD;&#xA;153811L,  124507L,  4108L,  405623L,  963861L,  1181196L),  Category = structure(c(1L,  &#xD;&#xA;1L,  1L,  1L,  2L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L,  &#xD;&#xA;1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  2L,  1L,  2L,  1L,  1L,  1L),  .Label = c(&quot;high&quot;,  &#xD;&#xA;&quot;low&quot;),  class = &quot;factor&quot;),  Change = c(6.491608782,  7.798828697,  &#xD;&#xA;6.246519899,  6.930096667,  315.625,  148.1211268,  8.542089139,  &#xD;&#xA;11.01361701,  8.329196008,  11.53843588,  11.80351512,  7.089814423,  &#xD;&#xA;11.69750628,  6.048331425,  16.96733643,  22.22803183,  43.48987854,  &#xD;&#xA;4.677792041,  3.742814522,  9.040402037,  11.56904704,  11.69089853,  &#xD;&#xA;7.923930481,  5.093447038,  4.989571223,  Inf,  21.19636169,  261.4,  &#xD;&#xA;11.45690191,  7.584217425,  14.61426294),  Month = structure(c(1L,  &#xD;&#xA;3L,  1L,  1L,  3L,  1L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  1L,  2L,  2L,  &#xD;&#xA;1L,  1L,  1L,  2L,  2L,  2L,  3L,  3L,  3L,  3L,  3L,  3L,  3L,  3L),  .Label = c(&quot;January&quot;,  &#xD;&#xA;&quot;July&quot;,  &quot;March&quot;),  class = &quot;factor&quot;),  CEO = structure(c(2L,  2L,  &#xD;&#xA;2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  2L,  1L,  1L,  1L,  1L,  &#xD;&#xA;1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L,  1L),  .Label = c(&quot;Jack&quot;,  &#xD;&#xA;&quot;John&quot;),  class = &quot;factor&quot;)),  .Names = c(&quot;Customer&quot;,  &quot;UnitA&quot;,  &#xD;&#xA;&quot;UnitB&quot;,  &quot;Category&quot;,  &quot;Change&quot;,  &quot;Month&quot;,  &quot;CEO&quot;),  class = &quot;data.frame&quot;,  row.names = c(NA,  &#xD;&#xA;-31L))" />
    </Messages>
  </Topic>
  <Topic Id="1059" Title="stat_bin() does not seem to work for integer data">
    <Messages>
      <Message Id="0" ParentId="1059" UserId="4742514" Date="02/24/2015 04:04:35" Content="Creating a simple data.frame with integers and binning it with stat_bin,  should bin the integers.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(xint = sample.int(10, size = 100, replace=TRUE))&#xD;&#xA;is.integer(df$xint)&#xD;&#xA;ggplot() + stat_bin(data = df, aes(x=xint), geom='line')&#xD;&#xA;```&#xD;&#xA;Code in `stat_bin.r` shows that for integers you should not get a `binwidth defaulted to range/30` msg and it should bin at:&#xD;&#xA;```R&#xD;&#xA;  if (is.integer(x)) { &#xD;&#xA;    bins &lt;- x&#xD;&#xA;    x &lt;- sort(unique(bins))&#xD;&#xA;    width &lt;- width&#xD;&#xA;```&#xD;&#xA;Don't know the root cause but it seems integer data is no longer integer by the time it gets passed to `calculate` and `bin` functions,  but shows up as an numeric.&#xD;&#xA;&#xD;&#xA;Gabe Haarsma&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="110942787" ParentId="1059" UserId="4196" Date="06/10/2015 23:07:47" Content="Yeah,  the only things that are integers at that point are factors. It's a suboptimal design,  but it's too late to change now." />
    </Messages>
  </Topic>
  <Topic Id="1060" Title="OHLC and Themes">
    <Messages>
      <Message Id="0" ParentId="1060" UserId="2324700" Date="03/02/2015 12:45:34" Content="Hello,   &#xD;&#xA;  Let me start with Thanks for ggplot.  &#xD;&#xA;&#xD;&#xA;  I am working on automating a process that will gather financial data from Yahoo! Finance and after using a series of checks will list suitable stock,  mainly as financial style charts. This is entirely for personal use,  I have no intention to turn this into a product.  &#xD;&#xA;&#xD;&#xA;  My questions/comments/request are:  &#xD;&#xA;  - I know about quantmod,  but I cannot modify or create something on top of it (without modifying quantmod itself,  which I not interested or capable of doing,  and would be beyond what I can spend in time.  &#xD;&#xA;  - Any chance to have a new chart type OHLC (Open,  High,  Low,  Close)? Normally it also comes with a pairing Candlestick chart,  which I don't care for my project.  &#xD;&#xA;  - As there is no such geom_ohlc yet :smile: ,  I am doing it all by myself,  creating it all bit-by-bit.  &#xD;&#xA;  - something generic that would be nice: be able to move the y axis to the right,  just move,  no need for a second in this case.  &#xD;&#xA;  - I am using gridExtra to have charts combined (common in these financial charts) and the scales (x) do not align perfectly.  &#xD;&#xA;  - mere for the looks,  any change to have themes plot.background and panel.background to produce a gradient fill?  &#xD;&#xA;&#xD;&#xA;Here is an example:&#xD;&#xA;![ screen shot 2015-03-02 at 23 18 44 ](https://cloud.githubusercontent.com/assets/2324700/6440599/c9f45800-c132-11e4-91b6-cc427e5182b8.png)&#xD;&#xA;&#xD;&#xA;  - To create this chart I have a function that is about 200 lines of code. A good 50 are ggplot specific,  so again,  a geom_ohlc would be great (if we could still have the ability to play with the elements);  &#xD;&#xA;  - Doing it all by hand is fine,  but I would like the y axis on the right;  &#xD;&#xA;  - I would like to be able to align the x scale. In this case it is a 1:55 for both (it is the same data.frame).  &#xD;&#xA;  - Again,  just for the looks,  a gradient for panel and plot areas would be nice.  &#xD;&#xA;&#xD;&#xA;![ screen shot 2015-03-02 at 23 28 33 ](https://cloud.githubusercontent.com/assets/2324700/6440698/eb446594-c133-11e4-96d9-ab3bbbc328a8.png)&#xD;&#xA;&#xD;&#xA;  - The panels do not align,  if the range/format of the y axis is different;  &#xD;&#xA;  - For the RSI (bottom chart) I could not make the stat_ribbon to work for the red fill under the line of 30,  so I had to create a second series changing the numbers. I am still having problems when it crosses the line of 30. &#xD;&#xA;  - There is a minor gap between the two charts,  probably gridExtra or simply the ways things are underneath.  &#xD;&#xA;&#xD;&#xA;For the top chart:&#xD;&#xA;```&#xD;&#xA;g &lt;- ggplot(Chart)&#xD;&#xA;g &lt;- g + geom_linerange(aes(x=Timeline,  ymin=Low,  ymax=High,  colour=Colour),  size=1.5) # High/Low bar&#xD;&#xA;g &lt;- g + geom_segment(aes(x=Timeline,  xend=Timeline-0.4,  y=Open,   yend=Open,   colour=Colour),  size=1.5) # Open&#xD;&#xA;g &lt;- g + geom_segment(aes(x=Timeline,  xend=Timeline+0.4,  y=Close,  yend=Close,  colour=Colour),  size=1.5) # Close&#xD;&#xA;g &lt;- g + scale_colour_manual(name=&quot;&quot;,  values=c(Down=DC,  Flat=FC,  Up=UC)) # set the colour&#xD;&#xA;g &lt;- g + theme_ohlc&#xD;&#xA;g &lt;- g + geom_line(aes(x=Timeline,  y=Trail),  colour=&quot;darkred&quot;,  size=1.3) # Trailing Stop&#xD;&#xA;g &lt;- g + geom_line(aes(x=Timeline,  y=Profit.Taker),  colour=&quot;green&quot;,  size=1.3) # Profit Taker&#xD;&#xA;# . . .&#xD;&#xA;g &lt;- g + scale_x_continuous(breaks=which(Chart$Timeline %% axis.x.interval == 0))&#xD;&#xA;g &lt;- g + theme(axis.ticks.x = element_blank(),  axis.text.x = element_blank())&#xD;&#xA;g &lt;- g + theme(plot.margin  = unit(c(1,  5,  -22,  15),  units = &quot;points&quot;))&#xD;&#xA;y.top &lt;- ggplot_build(g)$panel$ranges[ [ 1 ] ]$y.range[ 2 ] # high y limit from the chart internal structure&#xD;&#xA;g &lt;- g + annotate(&quot;text&quot;,  x = 1,  y = y.top,  label = code) # put title inside the chart&#xD;&#xA;g &lt;- g + labs(x=&quot;&quot;,  y=&quot;&quot;)   # no x,  y labels&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;For the bottom chart:&#xD;&#xA;```&#xD;&#xA;r &lt;- ggplot(Chart)&#xD;&#xA;r &lt;- r + geom_hline(aes(yintercept=70),  colour=&quot;black&quot;,  linetype=&quot;dashed&quot;,  size=0.5,  alpha=0.5) # Upper line&#xD;&#xA;r &lt;- r + geom_hline(aes(yintercept=30),  colour=&quot;black&quot;,  linetype=&quot;dashed&quot;,  size=0.5,  alpha=0.5) # Lower line&#xD;&#xA;r &lt;- r + geom_line(aes(x=Timeline,  y=RSI),  colour=&quot;red&quot;) # RSI&#xD;&#xA;r &lt;- r + geom_ribbon(aes(x=Timeline,  ymin=Cut,  ymax=30),  fill=&quot;red&quot;,  alpha=0.5)&#xD;&#xA;r &lt;- r + scale_x_continuous(breaks=which(Chart$Timeline %% axis.x.interval == 0),  &#xD;&#xA;                            labels=format(Chart$Date[ which(Chart$Timeline %% axis.x.interval == 0) ],  axis.x.format))&#xD;&#xA;r &lt;- r + scale_y_continuous(breaks=c(30,  50,  70))&#xD;&#xA;r &lt;- r + annotate(&quot;text&quot;,  x = 2,  y = 75,  label = &quot;RSI(7)&quot;) # put title inside the chart&#xD;&#xA;r &lt;- r + labs(x=&quot;&quot;,  y=&quot;&quot;)  # no x,  y labels&#xD;&#xA;r &lt;- r + theme_ohlc&#xD;&#xA;r &lt;- r + theme(plot.margin  = unit(c(0,  5,  4,  15),  units = &quot;points&quot;))&#xD;&#xA;#     ggplot_build(r)$panel$ranges[ [ 1 ] ]$x.range &lt;- ggplot_build(g)$panel$ranges[ [ 1 ] ]$x.range&#xD;&#xA;&#xD;&#xA;# charting both&#xD;&#xA;    grid.arrange(g,  r,  heights=c(0.7,  0.3))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Thanks again and regards, &#xD;&#xA;Angelo Klin&#xD;&#xA;Melbourne,  Australia&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="110942457" ParentId="1060" UserId="4196" Date="06/10/2015 23:06:53" Content="Sorry,  `geom_ohlc` is just not something I have the time to write." />
    </Messages>
  </Topic>
  <Topic Id="1061" Title="mapping slot is empty when aes(x, y) is declared in geom_polygon()">
    <Messages>
      <Message Id="0" ParentId="1061" UserId="2544688" Date="03/02/2015 21:22:13" Content="If the x and y aesthetics are defined in geom_polygon() the gg-object contains an empty mapping-slot. This creates a problem when using gglocator() from the ggmap package. In my understanding it should not make a difference if x/y aesthetics are defined in the main plot command or in the geom for this usage.&#xD;&#xA;&#xD;&#xA;See detailled example here:&#xD;&#xA;http://stackoverflow.com/questions/28754762/how-to-locate-points-on-map-from-shapefile-in-ggplot-ggmaps" />
      <Message Id="110942166" ParentId="1061" UserId="4196" Date="06/10/2015 23:06:18" Content="Could you please include a minimal reprex inline?" />
      <Message Id="111082922" ParentId="1061" UserId="2544688" Date="06/11/2015 10:45:33" Content="Thanks for looking into this! The following script should reproduce the error message.&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(maptools)&#xD;&#xA;library(ggmap)&#xD;&#xA;&#xD;&#xA;## Get shapefiles for plotting&#xD;&#xA;download.file(&quot;http://ec.europa.eu/eurostat/cache/GISCO/geodatafiles/NUTS_2010_60M_SH.zip&quot;, paste0(tempdir(), &quot;/NUTS_2010_60M_SH.zip&quot;))&#xD;&#xA;unzip(paste0(tempdir(), &quot;/NUTS_2010_60M_SH.zip&quot;), exdir=tempdir())&#xD;&#xA;eurMap &lt;- readShapePoly(fn=paste0(tempdir(), &quot;/NUTS_2010_60M_SH/Data/NUTS_RG_60M_2010&quot;))&#xD;&#xA;eurMapDf &lt;- fortify(eurMap,  region='NUTS_ID')&#xD;&#xA;&#xD;&#xA;## Create the figure&#xD;&#xA;gg &lt;- ggplot(data=eurMapDf) + geom_polygon(aes(x=long,  y=lat, group=group)) &#xD;&#xA;gg&#xD;&#xA;&#xD;&#xA;## use gglocator()&#xD;&#xA;gglocator()&#xD;&#xA;&#xD;&#xA;## &gt;  Error in `[ .data.frame`(data,  ,  deparse(mapping$x)) : &#xD;&#xA;##    undefined columns selected&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I get the coordinates when I provide the mapping to ggplot instead of geom_polygon (see below). However I think the above code should work as well,  or am I missing out on a general concept here?&#xD;&#xA;&#xD;&#xA;## Additional Info ##&#xD;&#xA;It looks like the `mapping` slot is not always defined when creating the `gg object`. I can make `gglocator()` run by explicitly setting the mapping to the variables of the `data` slot. E.g. the following works:&#xD;&#xA;    &#xD;&#xA;    &#xD;&#xA;```R&#xD;&#xA;    gg$mapping$x  &lt;- substitute(long)&#xD;&#xA;    gg$mapping$y &lt;- substitute(lat)&#xD;&#xA;    gg&#xD;&#xA;  &#xD;&#xA;    ## gglocator() works as expected&#xD;&#xA;    gglocator()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;So I guess my real question is how to ensure that `mapping` is set when calling `ggplot`. &#xD;&#xA;&#xD;&#xA;## This works ##&#xD;&#xA;All works fine when the mapping is provided in the ggplot function call and not as argument to `geom_polygon()`. E.g. &#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;    gg2 &lt;- ggplot(data=eurMapDf, aes(x=long,  y=lat, group=group)) +   geom_polygon() &#xD;&#xA;    gg2&#xD;&#xA;    &#xD;&#xA;    ## works fine now&#xD;&#xA;    gglocator()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I am not sure if there is a reason why mapping needs to be declared in the `ggplot()` call or if this is a bug. Many of the examples found around the web use the syntax I used first (or to put it differently,  the syntax I used first was copy-pasted from one of the many examples I found around the web)." />
      <Message Id="111114897" ParentId="1061" UserId="4196" Date="06/11/2015 12:26:06" Content="Sorry,  I didn't notice that this was a problem with `gglocator()` - you should file this bug at https://github.com/dkahle/ggmap" />
    </Messages>
  </Topic>
  <Topic Id="1062" Title="Order of arguments in documentation of geom_vline">
    <Messages>
      <Message Id="0" ParentId="1062" UserId="953200" Date="03/05/2015 23:18:57" Content="I was recently struggling to understand how to show a legend when using geom_vline. Despite looking at the documentation of this function several times,  I did not see the show_guide argument. &#xD;&#xA;&#xD;&#xA;I think it is perhaps hard to see because the order of the arguments in the function prototype is different than the order in the list under Arguments. &#xD;&#xA;&#xD;&#xA;Perhaps these orders could be made the same in the documentation? Or the arguments section put into alphabetical order? I notice there are a lot of questions in the google group and on stack overflow about showing legends,  which suggests the documentation might be clarified.&#xD;&#xA;&#xD;&#xA;I also notice that the 'show_guide' argument is not listed in the geom_point function (though is in its examples,  though not in the geom_hline examples). " />
      <Message Id="110942131" ParentId="1062" UserId="4196" Date="06/10/2015 23:06:04" Content="Should be fixed now." />
    </Messages>
  </Topic>
  <Topic Id="1063" Title="Something Weird Just Started Happening with tcltk">
    <Messages>
      <Message Id="0" ParentId="1063" UserId="740564" Date="03/06/2015 18:47:43" Content="For some reason I now get this warning and ggplot won't load&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;package ‘tcltk’ does not have a namespace&#xD;&#xA;```" />
      <Message Id="77613770" ParentId="1063" UserId="740564" Date="03/06/2015 18:52:30" Content="Reinstalled R and it worked what ever the problem was!" />
    </Messages>
  </Topic>
  <Topic Id="1064" Title="ggplot2 requires X11 in OSX causes R to crash when closing it">
    <Messages>
      <Message Id="0" ParentId="1064" UserId="3292149" Date="03/10/2015 10:08:11" Content="It seems loading ggplot2 1.0 causes X11 to launch in OSX Yosemite 10.10.2. Closing X11 afterwards crashes R. It is not clear to me whether this is cause by ggplot2 version 1.0 or some other interaction (i.e. The issue did not appear a few weeks ago in a computer in which I though ggplot2 was installed- but can't be completely sure). Related stackoverflow [ thread ](http://stackoverflow.com/questions/28952128/loading-ggplot2-opens-up-x11?noredirect=1#comment46168111_28952128).&#xD;&#xA;&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;Need help? Try the ggplot2 mailing list: http://groups.google.com/group/ggplot2.&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.2 (2014-10-31)&#xD;&#xA;Platform: x86_64-apple-darwin13.4.0 (64-bit)&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] C/UTF-8/C/C/C/C&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.0&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] MASS_7.3-39      Rcpp_0.11.5      colorspace_1.2-5 digest_0.6.8    &#xD;&#xA; [ 5 ] grid_3.1.2       gtable_0.1.2     munsell_0.4.2    plyr_1.8.1      &#xD;&#xA; [ 9 ] proto_0.3-10     reshape2_1.4.1   scales_0.2.4     stringr_0.6.2   &#xD;&#xA;[ 13 ] tcltk_3.1.2&#xD;&#xA;&#xD;&#xA;Closing X11 causes:&#xD;&#xA;&#xD;&#xA;&gt; XIO:  fatal IO error 35 (Resource temporarily unavailable) on X server &quot;/private/tmp/com.apple.launchd.pOwV8XJreV/org.macosforge.xquartz:0&quot;&#xD;&#xA;      after 33 requests (33 known processed) with 0 events remaining." />
      <Message Id="78037220" ParentId="1064" UserId="227097" Date="03/10/2015 11:35:15" Content="This is due to the change in colorspace package.&#xD;&#xA;The maintainers of the package are going to fix this problem." />
      <Message Id="78116685" ParentId="1064" UserId="5042744" Date="03/10/2015 18:28:02" Content="It doesn't occur with colorspace 1.2-4,  so a temporary fix might be to revert to that version." />
    </Messages>
  </Topic>
  <Topic Id="1065" Title="Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame">
    <Messages>
      <Message Id="0" ParentId="1065" UserId="646346" Date="03/11/2015 01:47:29" Content="I am using this example from:&#xD;&#xA;&#xD;&#xA;http://rstudio-pubs-static.s3.amazonaws.com/10213_8c02d102993942a88574e44abdf3a235.html&#xD;&#xA;&#xD;&#xA;# Plot with ggplot&#xD;&#xA;library(ggplot2)&#xD;&#xA;library(scales)&#xD;&#xA;# Create a categorical variable&#xD;&#xA;meuse$zinc_cat &lt;- cut(meuse$zinc,  breaks = c(0,  200,  400,  800,  1200,  2000))&#xD;&#xA;zinc.plot &lt;- ggplot(aes(x = x,  y = y),  data = meuse)  # Initialize the plot,  with data and axes.&#xD;&#xA;zinc.plot &lt;- zinc.plot + geom_point(aes(color = zinc_cat))  # Tell it to plot points,  with a colour for zinc_cat&#xD;&#xA;zinc.plot &lt;- zinc.plot + coord_equal()  #Tell it the scaling of the x and y coordinates are equal&#xD;&#xA;zinc.plot &lt;- zinc.plot + scale_color_brewer(palette = &quot;YlGnBu&quot;)&#xD;&#xA;zinc.plot  # Plot!&#xD;&#xA;~~~~~~~~~~~~~~~~&#xD;&#xA;I got this error:&#xD;&#xA;&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&#xD;&#xA;I am using Mac OS X 10.8.3,  R 3.1.2 and RStudio (0.98) and RStudio Preview (0.99)&#xD;&#xA;&#xD;&#xA;Also installing the master ggplot2 from here:&#xD;&#xA;&#xD;&#xA;~~~&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;R version 3.1.2 (2014-10-31) -- &quot;Pumpkin Helmet&quot;&#xD;&#xA;Copyright (C) 2014 The R Foundation for Statistical Computing&#xD;&#xA;Platform: x86_64-apple-darwin10.8.0 (64-bit)&#xD;&#xA;&#xD;&#xA;R is free software and comes with ABSOLUTELY NO WARRANTY.&#xD;&#xA;You are welcome to redistribute it under certain conditions.&#xD;&#xA;Type 'license()' or 'licence()' for distribution details.&#xD;&#xA;&#xD;&#xA;  Natural language support but running in an English locale&#xD;&#xA;&#xD;&#xA;R is a collaborative project with many contributors.&#xD;&#xA;Type 'contributors()' for more information and&#xD;&#xA;'citation()' on how to cite R or R packages in publications.&#xD;&#xA;&#xD;&#xA;Type 'demo()' for some demos,  'help()' for on-line help,  or&#xD;&#xA;'help.start()' for an HTML browser interface to help.&#xD;&#xA;Type 'q()' to quit R.&#xD;&#xA;&#xD;&#xA;[ Workspace loaded from ~/Documents/Work/.RData ]&#xD;&#xA;&#xD;&#xA;&gt; ?SetW&#xD;&#xA;No documentation for ‘SetW’ in specified packages and libraries:&#xD;&#xA;you could try ‘??SetW’&#xD;&#xA;&gt; ??SetW&#xD;&#xA;&gt; ?setwd&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;&gt; source('~/Documents/Work/ggplot2_with_grid_ForestValue8cc.R')&#xD;&#xA;Error in file(file,  &quot;rt&quot;) : cannot open the connection&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In file(file,  &quot;rt&quot;) :&#xD;&#xA;  cannot open file '9_HarvestArea.csv': No such file or directory&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;'data.frame':	270 obs. of  3 variables:&#xD;&#xA; $ Period  : int  1 1 1 1 1 1 2 2 2 2 ...&#xD;&#xA; $ CostItem: Factor w/ 6 levels &quot; LCOST&quot;, &quot; PCOST&quot;, ..: 5 2 1 6 4 3 5 2 1 6 ...&#xD;&#xA; $ Cost    : num  0 0 25296120 7356433 3086738 ...&#xD;&#xA;'data.frame':	270 obs. of  3 variables:&#xD;&#xA; $ Period  : int  1 1 1 1 1 1 2 2 2 2 ...&#xD;&#xA; $ CostItem: Factor w/ 6 levels &quot; LCOST&quot;, &quot; PCOST&quot;, ..: 5 2 1 6 4 3 5 2 1 6 ...&#xD;&#xA; $ Cost    : num  0 0 25296120 7356433 3086738 ...&#xD;&#xA;Scale for 'y' is already present. Adding another scale for 'y',  which will replace the existing scale.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/ggplot2_with_grid_ForestValue8c.R')&#xD;&#xA;'data.frame':	270 obs. of  3 variables:&#xD;&#xA; $ Period  : int  1 1 1 1 1 1 2 2 2 2 ...&#xD;&#xA; $ CostItem: Factor w/ 6 levels &quot; LCOST&quot;, &quot; PCOST&quot;, ..: 5 2 1 6 4 3 5 2 1 6 ...&#xD;&#xA; $ Cost    : num  0 0 25296120 7356433 3086738 ...&#xD;&#xA;'data.frame':	270 obs. of  3 variables:&#xD;&#xA; $ Period  : int  1 1 1 1 1 1 2 2 2 2 ...&#xD;&#xA; $ CostItem: Factor w/ 6 levels &quot; LCOST&quot;, &quot; PCOST&quot;, ..: 5 2 1 6 4 3 5 2 1 6 ...&#xD;&#xA; $ Cost    : num  0 0 25296120 7356433 3086738 ...&#xD;&#xA;Scale for 'y' is already present. Adding another scale for 'y',  which will replace the existing scale.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;&gt; source('~/Documents/Work/ggplot2_with_grid_ForestValue8cc.R')&#xD;&#xA;'data.frame':	270 obs. of  3 variables:&#xD;&#xA; $ Period  : int  1 1 1 1 1 1 2 2 2 2 ...&#xD;&#xA; $ CostItem: Factor w/ 6 levels &quot; LCOST&quot;, &quot; PCOST&quot;, ..: 5 2 1 6 4 3 5 2 1 6 ...&#xD;&#xA; $ Cost    : num  0 0 25296120 7356433 3086738 ...&#xD;&#xA;'data.frame':	270 obs. of  3 variables:&#xD;&#xA; $ Period  : int  1 1 1 1 1 1 2 2 2 2 ...&#xD;&#xA; $ CostItem: Factor w/ 6 levels &quot; LCOST&quot;, &quot; PCOST&quot;, ..: 5 2 1 6 4 3 5 2 1 6 ...&#xD;&#xA; $ Cost    : num  0 0 25296120 7356433 3086738 ...&#xD;&#xA;Scale for 'y' is already present. Adding another scale for 'y',  which will replace the existing scale.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;geom_smooth: method=&quot;auto&quot; and size of largest group is &lt;1000,  so using loess. Use 'method = x' to change the smoothing method.&#xD;&#xA;Error in UseMethod(&quot;depth&quot;) : &#xD;&#xA;  no applicable method for 'depth' applied to an object of class &quot;NULL&quot;&#xD;&#xA;&gt; source('~/Documents/Work/DataFrame_to_Matrix.R')&#xD;&#xA;&gt; source('~/Documents/Work/2_Spatial_mip_new_latest_4_4.R')&#xD;&#xA;Loading required package: rgdal&#xD;&#xA;Loading required package: sp&#xD;&#xA;rgdal: version: 0.9-1,  (SVN revision 518)&#xD;&#xA;Geospatial Data Abstraction Library extensions to R successfully loaded&#xD;&#xA;Loaded GDAL runtime: GDAL 1.9.2,  released 2012/10/08&#xD;&#xA;Path to GDAL shared files: /Library/Frameworks/R.framework/Versions/3.1/Resources/library/rgdal/gdal&#xD;&#xA;Loaded PROJ.4 runtime: Rel. 4.8.0,  6 March 2012,  [ PJ_VERSION: 480 ]&#xD;&#xA;Path to PROJ.4 shared files: /Library/Frameworks/R.framework/Versions/3.1/Resources/library/rgdal/proj&#xD;&#xA;Loading required package: maptools&#xD;&#xA;Checking rgeos availability: TRUE&#xD;&#xA;Loading required package: mapproj&#xD;&#xA;Loading required package: maps&#xD;&#xA;Loading required package: plyr&#xD;&#xA;Loading required package: RColorBrewer&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Case1&quot;,  layer: &quot;Case_1_mills&quot;&#xD;&#xA;with 41 features and 29 fields&#xD;&#xA;Feature type: wkbPolygon with 2 dimensions&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Case1&quot;,  layer: &quot;Lincoln_stands_m&quot;&#xD;&#xA;with 87 features and 27 fields&#xD;&#xA;Feature type: wkbPolygon with 2 dimensions&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Experimental_Krig_1.R')&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Shp&quot;,  layer: &quot;THA_Centroid&quot;&#xD;&#xA;with 1908 features and 48 fields&#xD;&#xA;Feature type: wkbPoint with 2 dimensions&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in ogrInfo(dsn = dsn,  layer = layer,  encoding = encoding,  use_iconv = use_iconv,   : &#xD;&#xA;  Cannot open file&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Case1&quot;,  layer: &quot;Case_1_mills&quot;&#xD;&#xA;with 41 features and 29 fields&#xD;&#xA;Feature type: wkbPolygon with 2 dimensions&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Experimental_Krig_1.R')&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Shp&quot;,  layer: &quot;THA_Centroid&quot;&#xD;&#xA;with 1908 features and 48 fields&#xD;&#xA;Feature type: wkbPoint with 2 dimensions&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Experimental_Krig_1.R')&#xD;&#xA;Error in getinfo.shape(filen) : Error opening SHP file&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Experimental_Krig_1.R')&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;NULL&#xD;&#xA;NULL&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Shp&quot;,  layer: &quot;THA_Centroid&quot;&#xD;&#xA;with 1908 features and 48 fields&#xD;&#xA;Feature type: wkbPoint with 2 dimensions&#xD;&#xA;NULL&#xD;&#xA;NULL&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;OGR data source with driver: ESRI Shapefile &#xD;&#xA;Source: &quot;Shp&quot;,  layer: &quot;THA_Centroid&quot;&#xD;&#xA;with 1908 features and 48 fields&#xD;&#xA;Feature type: wkbPoint with 2 dimensions&#xD;&#xA;NULL&#xD;&#xA;NULL&#xD;&#xA;&gt; pmap2&#xD;&#xA;NULL&#xD;&#xA;&gt; plot(utah)&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in file(file,  &quot;rt&quot;) : cannot open the connection&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In file(file,  &quot;rt&quot;) :&#xD;&#xA;  cannot open file '/Users/nsicad/Shp/THA_Centroid_csv.csv': No such file or directory&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in file(file,  &quot;rt&quot;) : cannot open the connection&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In file(file,  &quot;rt&quot;) :&#xD;&#xA;  cannot open file './Shp/THA_Centroid_csv.csv': No such file or directory&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in file(file,  &quot;rt&quot;) : cannot open the connection&#xD;&#xA;In addition: Warning message:&#xD;&#xA;In file(file,  &quot;rt&quot;) :&#xD;&#xA;  cannot open file '/Users/nsicad/Documents/A_Documents_16/R_Kriging/Shp/THA_Centroid_csv.csv': No such file or directory&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;NULL&#xD;&#xA;NULL&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Experimental_Krig_2.R')&#xD;&#xA;&gt; install.packages(&quot;gstat&quot;)&#xD;&#xA;also installing the dependencies ‘intervals’,  ‘spacetime’,  ‘FNN’&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/intervals_0.15.0.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 623237 bytes (608 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 608 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/spacetime_1.1-3.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 2902777 bytes (2.8 Mb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 2.8 Mb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/FNN_1.1.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 104776 bytes (102 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 102 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/gstat_1.0-21.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 2236725 bytes (2.1 Mb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 2.1 Mb&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;The downloaded binary packages are in&#xD;&#xA;	/var/folders/fx/vhfzfjq950d9d95k_xlxyft80000gn/T//Rtmp72bDxK/downloaded_packages&#xD;&#xA;&gt; ?krige&#xD;&#xA;No documentation for ‘krige’ in specified packages and libraries:&#xD;&#xA;you could try ‘??krige’&#xD;&#xA;&gt; ??krige&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;	demo(krige)&#xD;&#xA;	---- ~~~~~&#xD;&#xA;&#xD;&#xA;&gt; # $Id: krige.R, v 1.5 2007-02-27 22:09:31 edzer Exp $&#xD;&#xA;&gt; library(sp)&#xD;&#xA;&#xD;&#xA;&gt; data(meuse)&#xD;&#xA;&#xD;&#xA;&gt; coordinates(meuse) = ~x+y&#xD;&#xA;&#xD;&#xA;&gt; data(meuse.grid)&#xD;&#xA;&#xD;&#xA;&gt; gridded(meuse.grid) = ~x+y&#xD;&#xA;&#xD;&#xA;&gt; # ordinary kriging&#xD;&#xA;&gt; v &lt;- variogram(log(zinc)~1,  meuse)&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Experimental_Krig_2.R')&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in eval(expr,  envir,  enclos) : could not find function &quot;variogram&quot;&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;    np       dist     gamma dir.hor dir.ver   id&#xD;&#xA;1   57   79.29244 0.1234479       0       0 var1&#xD;&#xA;2  299  163.97367 0.2162185       0       0 var1&#xD;&#xA;3  419  267.36483 0.3027859       0       0 var1&#xD;&#xA;4  457  372.73542 0.4121448       0       0 var1&#xD;&#xA;5  547  478.47670 0.4634128       0       0 var1&#xD;&#xA;6  533  585.34058 0.5646933       0       0 var1&#xD;&#xA;7  574  693.14526 0.5689683       0       0 var1&#xD;&#xA;8  564  796.18365 0.6186769       0       0 var1&#xD;&#xA;9  589  903.14650 0.6471479       0       0 var1&#xD;&#xA;10 543 1011.29177 0.6915705       0       0 var1&#xD;&#xA;11 500 1117.86235 0.7033984       0       0 var1&#xD;&#xA;12 477 1221.32810 0.6038770       0       0 var1&#xD;&#xA;13 452 1329.16407 0.6517158       0       0 var1&#xD;&#xA;14 457 1437.25620 0.5665318       0       0 var1&#xD;&#xA;15 415 1543.20248 0.5748227       0       0 var1&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Krige_1.R')&#xD;&#xA;    np       dist     gamma dir.hor dir.ver   id&#xD;&#xA;1   57   79.29244 0.1234479       0       0 var1&#xD;&#xA;2  299  163.97367 0.2162185       0       0 var1&#xD;&#xA;3  419  267.36483 0.3027859       0       0 var1&#xD;&#xA;4  457  372.73542 0.4121448       0       0 var1&#xD;&#xA;5  547  478.47670 0.4634128       0       0 var1&#xD;&#xA;6  533  585.34058 0.5646933       0       0 var1&#xD;&#xA;7  574  693.14526 0.5689683       0       0 var1&#xD;&#xA;8  564  796.18365 0.6186769       0       0 var1&#xD;&#xA;9  589  903.14650 0.6471479       0       0 var1&#xD;&#xA;10 543 1011.29177 0.6915705       0       0 var1&#xD;&#xA;11 500 1117.86235 0.7033984       0       0 var1&#xD;&#xA;12 477 1221.32810 0.6038770       0       0 var1&#xD;&#xA;13 452 1329.16407 0.6517158       0       0 var1&#xD;&#xA;14 457 1437.25620 0.5665318       0       0 var1&#xD;&#xA;15 415 1543.20248 0.5748227       0       0 var1&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Krige_1.R')&#xD;&#xA;    np       dist     gamma dir.hor dir.ver   id&#xD;&#xA;1   57   79.29244 0.1234479       0       0 var1&#xD;&#xA;2  299  163.97367 0.2162185       0       0 var1&#xD;&#xA;3  419  267.36483 0.3027859       0       0 var1&#xD;&#xA;4  457  372.73542 0.4121448       0       0 var1&#xD;&#xA;5  547  478.47670 0.4634128       0       0 var1&#xD;&#xA;6  533  585.34058 0.5646933       0       0 var1&#xD;&#xA;7  574  693.14526 0.5689683       0       0 var1&#xD;&#xA;8  564  796.18365 0.6186769       0       0 var1&#xD;&#xA;9  589  903.14650 0.6471479       0       0 var1&#xD;&#xA;10 543 1011.29177 0.6915705       0       0 var1&#xD;&#xA;11 500 1117.86235 0.7033984       0       0 var1&#xD;&#xA;12 477 1221.32810 0.6038770       0       0 var1&#xD;&#xA;13 452 1329.16407 0.6517158       0       0 var1&#xD;&#xA;14 457 1437.25620 0.5665318       0       0 var1&#xD;&#xA;15 415 1543.20248 0.5748227       0       0 var1&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Krige_1.R')&#xD;&#xA;    np       dist     gamma dir.hor dir.ver   id&#xD;&#xA;1   57   79.29244 0.1234479       0       0 var1&#xD;&#xA;2  299  163.97367 0.2162185       0       0 var1&#xD;&#xA;3  419  267.36483 0.3027859       0       0 var1&#xD;&#xA;4  457  372.73542 0.4121448       0       0 var1&#xD;&#xA;5  547  478.47670 0.4634128       0       0 var1&#xD;&#xA;6  533  585.34058 0.5646933       0       0 var1&#xD;&#xA;7  574  693.14526 0.5689683       0       0 var1&#xD;&#xA;8  564  796.18365 0.6186769       0       0 var1&#xD;&#xA;9  589  903.14650 0.6471479       0       0 var1&#xD;&#xA;10 543 1011.29177 0.6915705       0       0 var1&#xD;&#xA;11 500 1117.86235 0.7033984       0       0 var1&#xD;&#xA;12 477 1221.32810 0.6038770       0       0 var1&#xD;&#xA;13 452 1329.16407 0.6517158       0       0 var1&#xD;&#xA;14 457 1437.25620 0.5665318       0       0 var1&#xD;&#xA;15 415 1543.20248 0.5748227       0       0 var1&#xD;&#xA;&gt; source('~/Documents/A_Documents_16/R_Kriging/Krige_1.R')&#xD;&#xA;    np       dist     gamma dir.hor dir.ver   id&#xD;&#xA;1   57   79.29244 0.1234479       0       0 var1&#xD;&#xA;2  299  163.97367 0.2162185       0       0 var1&#xD;&#xA;3  419  267.36483 0.3027859       0       0 var1&#xD;&#xA;4  457  372.73542 0.4121448       0       0 var1&#xD;&#xA;5  547  478.47670 0.4634128       0       0 var1&#xD;&#xA;6  533  585.34058 0.5646933       0       0 var1&#xD;&#xA;7  574  693.14526 0.5689683       0       0 var1&#xD;&#xA;8  564  796.18365 0.6186769       0       0 var1&#xD;&#xA;9  589  903.14650 0.6471479       0       0 var1&#xD;&#xA;10 543 1011.29177 0.6915705       0       0 var1&#xD;&#xA;11 500 1117.86235 0.7033984       0       0 var1&#xD;&#xA;12 477 1221.32810 0.6038770       0       0 var1&#xD;&#xA;13 452 1329.16407 0.6517158       0       0 var1&#xD;&#xA;14 457 1437.25620 0.5665318       0       0 var1&#xD;&#xA;15 415 1543.20248 0.5748227       0       0 var1&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in eval(expr,  envir,  enclos) : could not find function &quot;Plot&quot;&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in eval(expr,  envir,  enclos) : &#xD;&#xA;  could not find function &quot;install_github&quot;&#xD;&#xA;&gt; install_github(&quot;hadley/ggplot2&quot;)&#xD;&#xA;Error: could not find function &quot;install_github&quot;&#xD;&#xA;&gt; install.packages(&quot;hadley/ggplot2&quot;)&#xD;&#xA;Warning in install.packages :&#xD;&#xA;  package ‘hadley/ggplot2’ is not available (for R version 3.1.2)&#xD;&#xA;&gt; install.packages(&quot;~/Documents/A_Documents_16/ggplot2-master.zip&quot;,  repos = NULL)&#xD;&#xA;Error in install.packages : file ‘~/Documents/A_Documents_16/ggplot2-master.zip’ is not an OS X binary package&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;also installing the dependencies ‘httr’,  ‘RCurl’,  ‘memoise’,  ‘whisker’,  ‘rstudioapi’,  ‘roxygen2’&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/httr_0.6.1.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 367867 bytes (359 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 359 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/RCurl_1.95-4.5.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 710662 bytes (694 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 694 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/memoise_0.2.1.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 14111 bytes (13 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 13 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/whisker_0.3-2.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 47145 bytes (46 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 46 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/rstudioapi_0.2.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 21953 bytes (21 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 21 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/roxygen2_4.1.0.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 292270 bytes (285 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 285 Kb&#xD;&#xA;&#xD;&#xA;trying URL 'http://cran.rstudio.com/bin/macosx/contrib/3.1/devtools_1.7.0.tgz'&#xD;&#xA;Content type 'application/x-gzip' length 296397 bytes (289 Kb)&#xD;&#xA;opened URL&#xD;&#xA;==================================================&#xD;&#xA;downloaded 289 Kb&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;The downloaded binary packages are in&#xD;&#xA;	/var/folders/fx/vhfzfjq950d9d95k_xlxyft80000gn/T//Rtmp72bDxK/downloaded_packages&#xD;&#xA;Dev mode: ON&#xD;&#xA;Error in username %||% getOption(&quot;github.user&quot;) %||% stop(&quot;Unknown username.&quot;) : &#xD;&#xA;  Unknown username.&#xD;&#xA;d&gt; source('~/.active-rstudio-document')&#xD;&#xA;Error in username %||% getOption(&quot;github.user&quot;) %||% stop(&quot;Unknown username.&quot;) : &#xD;&#xA;  Unknown username.&#xD;&#xA;d&gt; source('~/.active-rstudio-document')&#xD;&#xA;Downloading github repo hadley/ggplot2@master&#xD;&#xA;Installing ggplot2&#xD;&#xA;'/Library/Frameworks/R.framework/Resources/bin/R' --vanilla CMD INSTALL  \&#xD;&#xA;  '/private/var/folders/fx/vhfzfjq950d9d95k_xlxyft80000gn/T/Rtmp72bDxK/devtools1285090148f/hadley-ggplot2-254327c'  \&#xD;&#xA;  --library='/Users/nsicad/R-dev' --install-tests &#xD;&#xA;&#xD;&#xA;* installing *source* package ‘ggplot2’ ...&#xD;&#xA;** R&#xD;&#xA;** data&#xD;&#xA;*** moving datasets to lazyload DB&#xD;&#xA;** inst&#xD;&#xA;** tests&#xD;&#xA;** preparing package for lazy loading&#xD;&#xA;** help&#xD;&#xA;*** installing help indices&#xD;&#xA;** building package indices&#xD;&#xA;** installing vignettes&#xD;&#xA;** testing if installed package can be loaded&#xD;&#xA;* DONE (ggplot2)&#xD;&#xA;Reloading installed ggplot2&#xD;&#xA;Dev mode: OFF&#xD;&#xA;&gt; source('~/.active-rstudio-document')&#xD;&#xA;Downloading github repo hadley/ggplot2@master&#xD;&#xA;Installing ggplot2&#xD;&#xA;'/Library/Frameworks/R.framework/Resources/bin/R' --vanilla CMD INSTALL  \&#xD;&#xA;  '/private/var/folders/fx/vhfzfjq950d9d95k_xlxyft80000gn/T/Rtmp72bDxK/devtools128266e992c/hadley-ggplot2-254327c'  \&#xD;&#xA;  --library='/Library/Frameworks/R.framework/Versions/3.1/Resources/library' --install-tests &#xD;&#xA;&#xD;&#xA;* installing *source* package ‘ggplot2’ ...&#xD;&#xA;** R&#xD;&#xA;** data&#xD;&#xA;*** moving datasets to lazyload DB&#xD;&#xA;** inst&#xD;&#xA;** tests&#xD;&#xA;** preparing package for lazy loading&#xD;&#xA;** help&#xD;&#xA;*** installing help indices&#xD;&#xA;** building package indices&#xD;&#xA;** installing vignettes&#xD;&#xA;** testing if installed package can be loaded&#xD;&#xA;* DONE (ggplot2)&#xD;&#xA;Reloading installed ggplot2&#xD;&#xA;Error: ggplot2 doesn't know how to deal with data of class SpatialPointsDataFrame&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="78250627" ParentId="1065" UserId="4196" Date="03/11/2015 12:04:20" Content="I think you should either ask the author of that page,  ask on stackoverflow,  or try the ggplot2 mailing list." />
    </Messages>
  </Topic>
  <Topic Id="1066" Title="stat_contour fill - 2 issues">
    <Messages>
      <Message Id="0" ParentId="1066" UserId="8446323" Date="03/11/2015 19:39:08" Content="Hello everyone, &#xD;&#xA;&#xD;&#xA;I have been using ggplot2  for quite sometime now it's a great library! But I am stuck on some (known from what I have searched) issues of stat_contour. &#xD;&#xA;&#xD;&#xA;1) When I set geom=&quot;polygon&quot; the levels that are not fully closed are not filled correctly.&#xD;&#xA;2) Higher levels cover/hide the lower levels.&#xD;&#xA;&#xD;&#xA;Straight to a simple example to show you what I mean:&#xD;&#xA;### Creating the data&#xD;&#xA;&gt;library(ggplot2)&#xD;&#xA;x = seq(-1,  1,  length.out = 100)&#xD;&#xA;y = x&#xD;&#xA;R = expand.grid(x,  y)&#xD;&#xA;dim(R)&#xD;&#xA;names(R) = c(&quot;x&quot;,  &quot;y&quot;)&#xD;&#xA;R$z = R$x^2 + R$y^2&#xD;&#xA;head(R)&#xD;&#xA;&#xD;&#xA;### Ploting contour&#xD;&#xA;&gt;ggplot(R,  aes(x = x,  y = y,  z = z)) + stat_contour()&#xD;&#xA;![ stat_contour1 ](https://cloud.githubusercontent.com/assets/8446323/6605024/6ad40550-c835-11e4-9528-9361885931e0.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### Ploting filled contour by setting geom=&quot;polygon&quot;&#xD;&#xA;&gt;ggplot(R,  aes(x = x,  y = y,  z = z)) + stat_contour(geom=&quot;polygon&quot;)&#xD;&#xA;![ stat_contour2 ](https://cloud.githubusercontent.com/assets/8446323/6605028/72b6195c-c835-11e4-8c19-c0faf60e9553.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### In order to see what is filled correctly and what is not&#xD;&#xA;&gt;ggplot(R,  aes(x = x,  y = y,  z = z,  fill=..level..)) +&#xD;&#xA;  stat_contour(geom=&quot;polygon&quot;) + &#xD;&#xA;  stat_contour() + &#xD;&#xA;  scale_fill_gradient(low = &quot;blue&quot;,  high = &quot;red&quot;) +&#xD;&#xA;  coord_map(xlim=c(-1, 1), ylim=c(-1, 1))&#xD;&#xA;![ stat_contour3 ](https://cloud.githubusercontent.com/assets/8446323/6605033/77587982-c835-11e4-9cde-aa6f3b24065c.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### And if we reverse the values of R$z we can display the inner/hidden levels (multiply *-1)&#xD;&#xA;&gt;ggplot(R*-1,  aes(x = x,  y = y,  z = z,  fill=..level..)) +&#xD;&#xA;  stat_contour(geom=&quot;polygon&quot;) + &#xD;&#xA;  stat_contour() + &#xD;&#xA;  scale_fill_gradient(low = &quot;blue&quot;,  high = &quot;red&quot;) +&#xD;&#xA;  coord_map(xlim=c(-1, 1), ylim=c(-1, 1))&#xD;&#xA;![ stat_contour4 ](https://cloud.githubusercontent.com/assets/8446323/6605037/7f0b83cc-c835-11e4-8c41-ef94b5d90a92.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;### The first problem is somehow fixed (not completely) by expanding my grid with the same values that has in each side. Something like this:&#xD;&#xA;&gt;R_fill &lt;- subset(R,  x==1 | x==-1 | y==1 | y==-1)&#xD;&#xA;R_fill[ R_fill$x==1,  ]$x=5&#xD;&#xA;R_fill[ R_fill$x==-1,  ]$x=-5&#xD;&#xA;R_fill[ R_fill$y==1,  ]$y=5&#xD;&#xA;R_fill[ R_fill$y==-1,  ]$y=-5&#xD;&#xA;R_fill &lt;- rbind(R_fill, R)&#xD;&#xA;ggplot(R_fill*-1,  aes(x = x,  y = y,  z = z,  fill=..level..)) +&#xD;&#xA;  stat_contour(geom=&quot;polygon&quot;) + &#xD;&#xA;  stat_contour() + &#xD;&#xA;  scale_fill_gradient(low = &quot;blue&quot;,  high = &quot;red&quot;) +&#xD;&#xA;  coord_map(xlim=c(-1, 1), ylim=c(-1, 1))&#xD;&#xA;![ stat_contour5 ](https://cloud.githubusercontent.com/assets/8446323/6605039/84390388-c835-11e4-8267-a9047de12f63.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;To sum up,  (1) every level that is higher than 1 is not filled correctly since the level line is not closed on the edges. So whenever the level is not closed,  ggplot is forcing a closure by connecting the two edges of the semi-circles. Maybe the only way to correct the above problem is to handle and plot the levels in stat_contour as polygons with certain coordination. Can I somehow obtain the exact point position that belong to each contour line? If I could then I would be able to plot them as polygons and set a certain box around the region I want to plot and &quot;close&quot; the &quot;un-closed&quot; levels in order to be filled correctly.&#xD;&#xA;&#xD;&#xA;And (2) since ggplot (to my understanding) is plotting lower to higher levels,  the lower levels are obscured. I have no idea how this could be fixed,  since some datasets contain regions of lower values around higher levels.&#xD;&#xA;&#xD;&#xA;I don't know how hard is to tackle and correct these problems since I have no experience on the ggplot code. It would be really useful if stat_contour acted as filled.contour,  since ggplot2 has some many possibilities. So I would like to hear your thoughts and your suggestions.&#xD;&#xA;&#xD;&#xA;Thank you in advance, &#xD;&#xA;Thanos" />
      <Message Id="99713723" ParentId="1066" UserId="7601097" Date="05/07/2015 04:42:32" Content="I am also hoping that stat_contour(geom=&quot;polygon&quot;) can act as filled.contour too. Hopefully this problem will be considered. " />
      <Message Id="99829411" ParentId="1066" UserId="4196" Date="05/07/2015 11:42:06" Content="Fixing this is complicated because ggplot2 uses `contourLines()`. `contourLines()` doesn't complete contour lines to the edges of the plot,  so someone either needs to rewrite the contouring algorithm from scratch to do this (hard),  or look at the output from `contourLines()` and patch it up (somewhat less hard). " />
      <Message Id="99900884" ParentId="1066" UserId="8446323" Date="05/07/2015 15:04:46" Content="Yeah it demands some serious coding to make it work without flaws. For the time being I did some easy changes in the filled.contour and I am using that. But as I said ggplot2 is more powerful. I think it would be good to have this tread in case someone in the future wants to work on that update. Thanks for the feedback,  Cheers!" />
    </Messages>
  </Topic>
  <Topic Id="1067" Title="Facetting fails with &quot;undefined columns selected&quot; error for non-standard variable names">
    <Messages>
      <Message Id="0" ParentId="1067" UserId="197589" Date="03/12/2015 13:01:06" Content="To reproduce:&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;DF &lt;- data.frame(&#xD;&#xA;  x = 1:10, &#xD;&#xA;  y = runif(10), &#xD;&#xA;  `z z` = gl(5,  2), &#xD;&#xA;  check.names = FALSE&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;ggplot(DF,  aes(x,  y)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  facet_wrap(~ `z z`)&#xD;&#xA;## Error in `[ .data.frame`(panels,  missing_facets) : &#xD;&#xA;##   undefined columns selected&#xD;&#xA;&#xD;&#xA;ggplot(DF,  aes(x,  y)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  facet_grid(`z z` ~ .)&#xD;&#xA;## Error in `[ .data.frame`(base,  names(rows)) : undefined columns selected&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="78478028" ParentId="1067" UserId="5131281" Date="03/12/2015 13:23:44" Content="you might want to have a look at: &#xD;&#xA;http://stackoverflow.com/questions/12744282/how-to-deal-with-spaces-in-column-names&#xD;&#xA;the back tick works  in aesthetics but not in facets:&#xD;&#xA;DF &lt;- data.frame(&#xD;&#xA;  x = 1:10, &#xD;&#xA;  `y y` = runif(10), &#xD;&#xA;  `z z` = gl(5,  2), &#xD;&#xA;  check.names = FALSE&#xD;&#xA;)&#xD;&#xA;ggplot(DF,  aes(x,  `y y`)) +&#xD;&#xA;  geom_point() &#xD;&#xA;" />
      <Message Id="78483861" ParentId="1067" UserId="197589" Date="03/12/2015 13:58:00" Content="Thanks Samer.&#xD;&#xA;&#xD;&#xA;It was the fact that backticks work in aesthetics that led me to believe that they should work in facets too.&#xD;&#xA;&#xD;&#xA;For the record,  using the standardised version of the column name doesn't work either.&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;ggplot(DF,  aes(x,  y)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  facet_wrap(~ z.z)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;If no proper fix is possible (that is,  making non-standard names correctly draw facets),  then It would be nice to provide a more informative error message.&#xD;&#xA;&#xD;&#xA;For example,  at the start of `facet_wrap`,  you can check for valid variable names.  If you are happy to have a dependency on `assertive`,  then this will do the trick:&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;library(assertive)&#xD;&#xA;assert_all_are_valid_variable_names(attr(terms(facets),  &quot;term.labels&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;(The case for `facet_grid` is slightly harder because `stats::terms` is silly and you have to get the LHS separately.)&#xD;&#xA;&#xD;&#xA;A note in the `?facet_wrap`/`?facet_grid` help pages might be nice too." />
    </Messages>
  </Topic>
  <Topic Id="1068" Title="Width of error bars is calculated by the number of groups and not by the `width` argument. ">
    <Messages>
      <Message Id="0" ParentId="1068" UserId="2305708" Date="03/17/2015 07:46:03" Content="When attempting to draw error bars in a plot with multiple groups,  the width of the error bar seems to be calculated dynamically from the number of groups in the plot,  e.g.:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;See [ this Stackoverflow question ](http://stackoverflow.com/questions/19420903/width-of-error-bars-in-ggplot2/29059601) for more information and illustrative graphics. " />
      <Message Id="110940627" ParentId="1068" UserId="4196" Date="06/10/2015 22:54:22" Content="Could you please include a minimal reproducible example inline?" />
    </Messages>
  </Topic>
  <Topic Id="1069" Title="Lyndon Johnson's name is misspelled in &quot;presidential&quot;">
    <Messages>
      <Message Id="0" ParentId="1069" UserId="2774211" Date="03/18/2015 13:50:38" Content="It's spelled &quot;Johson&quot;." />
    </Messages>
  </Topic>
  <Topic Id="1070" Title="Inconsistent facet labeller behaviour when using characters to facet">
    <Messages>
      <Message Id="0" ParentId="1070" UserId="167164" Date="03/19/2015 04:10:16" Content="```R&#xD;&#xA;library(data.table)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;# Labeller function&#xD;&#xA;iris_lblr &lt;- function(var,  value) { &#xD;&#xA;    labels &lt;- c('setosa'='SET',  'versicolor'='VERS',  'virginica'='VIRG')&#xD;&#xA;        if (var=='Species') { &#xD;&#xA;            return ( labels[ value ])&#xD;&#xA;         }&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;# using data.table just for ease of filtering/mutation&#xD;&#xA;dt &lt;- data.table(iris)&#xD;&#xA;&#xD;&#xA;# This plot works fine - short caps labels are applied correctly&#xD;&#xA;ggplot(dt,  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;&#xD;&#xA;# this plot also has the correct CAPS labels applied,  and the middle facet is missing&#xD;&#xA;ggplot(dt[ Species!='versicolor' ],  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;&#xD;&#xA;dt[ ,  Species:=as.character(Species) ]&#xD;&#xA;&#xD;&#xA;# This plot shows &quot;VERS&quot; where it should show &quot;VIRG&quot;. &#xD;&#xA;ggplot(dt[ Species!='versicolor' ],  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;```" />
      <Message Id="110940576" ParentId="1070" UserId="4196" Date="06/10/2015 22:54:02" Content="Could you please create a minimal reprex without data table?" />
      <Message Id="112761413" ParentId="1070" UserId="167164" Date="06/17/2015 11:33:12" Content="```{ r }&#xD;&#xA;library(dplyr)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;# Labeller function&#xD;&#xA;iris_lblr &lt;- function(var,  value) { &#xD;&#xA;    labels &lt;- c('setosa'='SET',  'versicolor'='VERS',  'virginica'='VIRG')&#xD;&#xA;    if (var=='Species') { &#xD;&#xA;        return ( labels[ value ])&#xD;&#xA;     }&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;# This plot works fine - short caps labels are applied correctly&#xD;&#xA;ggplot(iris,  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;&#xD;&#xA;# this plot also has the correct CAPS labels applied,  and the middle facet is missing&#xD;&#xA;ggplot(iris %&gt;% filter(Species!='versicolor'),  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;&#xD;&#xA;df &lt;- iris %&gt;% mutate(Species=as.character(Species))&#xD;&#xA;&#xD;&#xA;# This plot shows &quot;VERS&quot; where it should show &quot;VIRG&quot;. &#xD;&#xA;ggplot(df %&gt;% filter(Species!='versicolor'),  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;```" />
      <Message Id="112761413" ParentId="1070" UserId="167164" Date="06/17/2015 11:33:12" Content="```{ r }&#xD;&#xA;library(dplyr)&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;# Labeller function&#xD;&#xA;iris_lblr &lt;- function(var,  value) { &#xD;&#xA;    labels &lt;- c('setosa'='SET',  'versicolor'='VERS',  'virginica'='VIRG')&#xD;&#xA;    if (var=='Species') { &#xD;&#xA;        return ( labels[ value ])&#xD;&#xA;     }&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;# This plot works fine - short caps labels are applied correctly&#xD;&#xA;ggplot(iris,  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;&#xD;&#xA;# this plot also has the correct CAPS labels applied,  and the middle facet is missing&#xD;&#xA;ggplot(iris %&gt;% filter(Species!='versicolor'),  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;&#xD;&#xA;df &lt;- iris %&gt;% mutate(Species=as.character(Species))&#xD;&#xA;&#xD;&#xA;# This plot shows &quot;VERS&quot; where it should show &quot;VIRG&quot;. &#xD;&#xA;ggplot(df %&gt;% filter(Species!='versicolor'),  aes(x=Sepal.Length,  y=Petal.Length)) + geom_point() + facet_grid(.~Species,  labeller=iris_lblr)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="1071" Title="Fixed two typos in documentation">
    <Messages>
      <Message Id="0" ParentId="1071" UserId="10538357" Date="03/19/2015 22:54:41" Content="" />
      <Message Id="111256749" ParentId="1071" UserId="4196" Date="06/11/2015 19:44:52" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1072" Title="error with facet_grid(),  but it's OK for facet_wrap().">
    <Messages>
      <Message Id="0" ParentId="1072" UserId="1317927" Date="03/20/2015 09:09:34" Content="The error info are:&#xD;&#xA;```&#xD;&#xA;p &lt;- ggplot(LineData,  aes(x=Position,  y=Count)) + geom_area(fill=&quot;black&quot;)&#xD;&#xA;p + facet_wrap(~LibName)&#xD;&#xA;&#xD;&#xA;p + facet_grid(LibName ~ ID)&#xD;&#xA;Error: length(height) == 1 || length(height) == n is not TRUE&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;==&#xD;&#xA;Both facet_wrap and facet_grid are OK for default data: diamonds,  mtcars/&#xD;&#xA;&#xD;&#xA;But I can not figure out the problem of my data.frame.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;str(LineData)&#xD;&#xA;'data.frame':	1912 obs. of  6 variables:&#xD;&#xA; $ Chr     : Factor w/ 1 level &quot;H37Rv&quot; :  1 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA; $ Position: int  1313142 1313143 1313144 1313145 1313146 1313147 1313148 1313149 1313150 1313151 ...&#xD;&#xA; $ Count   : int  27 27 27 27 27 27 26 26 26 26 ...&#xD;&#xA; $ LibName : Factor w/ 4 levels &quot;1. 18-40 nt&quot;, ..: 1 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA; $ ID      : Factor w/ 1 level &quot;Seed0001_n&quot; :  1 1 1 1 1 1 1 1 1 1 ...&#xD;&#xA; $ Test    : chr  &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; ...&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="83969237" ParentId="1072" UserId="1317927" Date="03/20/2015 09:38:38" Content="It's fixed when update the ggplot2 packages to the latest develop version: `install_github(&quot;hadley/ggplot2&quot;)`&#xD;&#xA;&#xD;&#xA;I don't know why." />
      <Message Id="87980700" ParentId="1072" UserId="582444" Date="03/31/2015 07:44:09" Content="I think you should close this bug report then." />
    </Messages>
  </Topic>
  <Topic Id="1073" Title="Can't use named color vectors in scale_color/fill_manual">
    <Messages>
      <Message Id="0" ParentId="1073" UserId="509878" Date="03/21/2015 19:01:57" Content="Reproducible example (blank plot):&#xD;&#xA;&#xD;&#xA;    devtools::install_github(&quot;hrbrmstr/swatches&quot;)&#xD;&#xA;    library(swatches)&#xD;&#xA;    library(ggplot2)&#xD;&#xA;&#xD;&#xA;    keep_the_change &lt;- read_ase(system.file(&quot;palettes&quot;,  &quot;keep_the_change.ase&quot;,  &#xD;&#xA;                                            package=&quot;swatches&quot;))&#xD;&#xA;&#xD;&#xA;    gg &lt;- ggplot(mtcars,  aes(x=mpg,  y=disp))&#xD;&#xA;    gg &lt;- gg + geom_point(aes(col=factor(gear)),  size=3)&#xD;&#xA;    gg &lt;- gg + scale_color_manual(values=keep_the_change)&#xD;&#xA;    gg &lt;- gg + theme_bw()&#xD;&#xA;    gg&#xD;&#xA;&#xD;&#xA;If that's changed to `scale_color_manual(values=unname(keep_the_change))`&#xD;&#xA;&#xD;&#xA;I was going to add an `unname` into the appropriate ggplot2 color/fill scale functions and submit a PR but wanted to check here first to ensure this isn't just me missing something." />
      <Message Id="84603753" ParentId="1073" UserId="4196" Date="03/22/2015 13:04:18" Content="That's by design - it lets you match specific values to specific colours. " />
    </Messages>
  </Topic>
  <Topic Id="1074" Title="facet strings in facet_wrap?">
    <Messages>
      <Message Id="0" ParentId="1074" UserId="4317308" Date="03/25/2015 22:41:53" Content="Strings can be used for facets instead of formula objects in facet_grid() but not facet_wrap().&#xD;&#xA;&#xD;&#xA;![ screen shot 2015-03-25 at 3 40 21 pm ](https://cloud.githubusercontent.com/assets/4317308/6837050/4df217c6-d305-11e4-9170-24aeddb4fa85.png)&#xD;&#xA;&#xD;&#xA;![ screen shot 2015-03-25 at 3 41 14 pm ](https://cloud.githubusercontent.com/assets/4317308/6837077/70f3de8a-d305-11e4-8246-fecbc7c6abab.png)&#xD;&#xA;" />
      <Message Id="110940512" ParentId="1074" UserId="4196" Date="06/10/2015 22:53:36" Content="Docs updated in the dev version" />
    </Messages>
  </Topic>
  <Topic Id="1075" Title="outlier.colour is ignored in ggplot 1.0.0">
    <Messages>
      <Message Id="0" ParentId="1075" UserId="582444" Date="03/31/2015 07:39:26" Content="According to [ this Stack Overflow post ](http://stackoverflow.com/a/16035956/435093) and my own trials,  setting `outlier.colour` in box plots does not change the color of outlier points anymore — they stay black.&#xD;&#xA;&#xD;&#xA;This image suggests it was possible at an earlier version:&#xD;&#xA;&#xD;&#xA;![  ](http://i.stack.imgur.com/ajJ4y.png)&#xD;&#xA;&#xD;&#xA;... so there must've been a regression somewhere." />
      <Message Id="87987856" ParentId="1075" UserId="582444" Date="03/31/2015 08:00:32" Content="Setting&#xD;&#xA;    &#xD;&#xA;```r&#xD;&#xA;update_geom_defaults(&quot;point&quot;,  list(colour = NULL))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;did the trick in newer versions. Doesn't seem like a regression,  more like a change of the way things work w.r.t. inheritance.&#xD;&#xA;&#xD;&#xA;This can be reverted with:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;update_geom_defaults(&quot;point&quot;,  list(colour = &quot;black&quot;))&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="1076" Title="Improvements to scale_*_distiller">
    <Messages>
      <Message Id="0" ParentId="1076" UserId="18445" Date="03/31/2015 11:39:33" Content="The order of colors in particular,  and the fact that it cannot be easily&#xA;reversed (pending a change in package scales) makes scale_*_distiller&#xA;almost useless at the moment.&#xA;&#xA;These are simple fixes and should be easy to pull." />
      <Message Id="88056292" ParentId="1076" UserId="18445" Date="03/31/2015 11:45:55" Content="I realised that I already submitted the colourbar aspect as another pull-request #1017. Let me know how you want to handle those.&#xD;&#xA;" />
      <Message Id="111256724" ParentId="1076" UserId="4196" Date="06/11/2015 19:44:42" Content="Could you please merge/rebase so that it builds on travis? Otherwise looks good." />
      <Message Id="111478567" ParentId="1076" UserId="4196" Date="06/12/2015 12:42:53" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1077" Title="Create correct legend for continuous color even if there is only one color">
    <Messages>
      <Message Id="0" ParentId="1077" UserId="1741643" Date="03/31/2015 21:19:55" Content="fixes #943&#xA;&#xA;I have no idea where to plug in a test for this. Perhaps in the examples?" />
      <Message Id="111256513" ParentId="1077" UserId="4196" Date="06/11/2015 19:43:41" Content="It should probably go in the visual tests,  but they're not in very good shape right now.&#xD;&#xA;&#xD;&#xA;Would you mind merging/rebasing (mostly to trigger travis)" />
      <Message Id="111258109" ParentId="1077" UserId="1741643" Date="06/11/2015 19:52:19" Content="Done. What are the main issues,  and your further plans concerning visual testing?&#xD;&#xA;&#xD;&#xA;GitHub shows diffs for images. Travis could push back any changes detected by the visual differ. This doesn't work for pull requests,  so contributors will have to sign up for Travis to use this." />
      <Message Id="111272383" ParentId="1077" UserId="4196" Date="06/11/2015 20:40:25" Content="The main issues are I don't remember how they're supposed to work (maybe @wch does),  and they probably need to be re-thought now that we can rely on travis to automatically run the tests. It may also be able to outsource some of the diffing given that there are a growing number of &quot;visual diffs as service&quot; companies (although they're mostly aimed at web pages)" />
    </Messages>
  </Topic>
  <Topic Id="1078" Title="Reversed stacked barplot with facet_wrap">
    <Messages>
      <Message Id="0" ParentId="1078" UserId="780449" Date="04/01/2015 10:10:51" Content="Hi, &#xD;&#xA;I'm seeing a very strange error,  with all versions of ggplot2 (mac,  windows from can,  mac from github). In a faceted plot the last facet has the stacking order reversed:&#xD;&#xA;&#xD;&#xA;library(RCurl)&#xD;&#xA;table.text &lt;- getURL(&quot;https://raw.githubusercontent.com/richardbeare/ggplotissues/master/barplot_problem.csv&quot;)&#xD;&#xA;dat &lt;- read.csv(text=table.text)&#xD;&#xA;#dat &lt;- read.csv(&quot;barplot_problem.csv&quot;)&#xD;&#xA;library(ggplot2)&#xD;&#xA;ggplot(dat,  aes(x=counts.vc,  y=duration,  &#xD;&#xA;                             colour=duration.type,  fill=duration.type)) + &#xD;&#xA;  stat_summary(fun.y=mean,  geom=&quot;bar&quot;,  position=&quot;stack&quot;) + facet_wrap(~speaker)&#xD;&#xA;&#xD;&#xA;The resulting plot on my system is attached.&#xD;&#xA;&#xD;&#xA;![ s_reversed ](https://cloud.githubusercontent.com/assets/780449/6938953/80fd8d68-d8b3-11e4-8822-35a4257fd0d4.png)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="90091536" ParentId="1078" UserId="911841" Date="04/06/2015 15:00:18" Content="It's actually not ggplot,  per se,  what's going wrong is happening in some plyr functions that are used to calculate a single grouping variable. (Specifically,  `plyr::id`.) That function doesn't &quot;know&quot; anything about how the groups are supposed to be ordered,  so in some cases the somewhat convoluted arithmetic there ends up with orderings you didn't intend. The easiest fix is to explicitly specify `group = duration.type`." />
      <Message Id="90267512" ParentId="1078" UserId="780449" Date="04/06/2015 22:37:20" Content="Thanks - that seems to fix it. I thought I'd used that combination,  but obviously not." />
    </Messages>
  </Topic>
  <Topic Id="1079" Title="error bar with stacked barplot">
    <Messages>
      <Message Id="0" ParentId="1079" UserId="780449" Date="04/01/2015 10:13:53" Content="In a problem related to the data in the previous question,  behaviour when adding error bars to stacked bar plots isn't sensible - seems the mean position isn't correctly adjust by the stacking offset. Not sure if I'm doing this correctly:&#xD;&#xA;&#xD;&#xA;ibrary(RCurl)&#xD;&#xA;table.text &lt;- getURL(&quot;https://raw.githubusercontent.com/richardbeare/ggplotissues/master/barplot_problem.csv&quot;)&#xD;&#xA;dat &lt;- read.csv(text=table.text)&#xD;&#xA;#dat &lt;- read.csv(&quot;barplot_problem.csv&quot;)&#xD;&#xA;library(ggplot2)&#xD;&#xA;ggplot(dat,  aes(x=counts.vc,  y=duration,  &#xD;&#xA;                             colour=duration.type,  fill=duration.type)) + &#xD;&#xA;  stat_summary(fun.y=mean,  geom=&quot;bar&quot;,  position=&quot;stack&quot;) + &#xD;&#xA;  stat_summary(fun.data=mean_cl_normal,  geom=&quot;errorbar&quot;,  colour=&quot;black&quot;) +&#xD;&#xA;  facet_wrap(~speaker)&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="110940478" ParentId="1079" UserId="4196" Date="06/10/2015 22:53:21" Content="This s a rather confusing display - what does the error bar on the top represent? The error associated with &quot;dur.vowels&quot; or &quot;dur.vc&quot; + &quot;dur.vowels&quot;?   I don't think it's reasonable to stack error bars in general (or at least not without a lot of thought about what it means),  so you'll need to do the calculations &quot;by hand&quot;" />
      <Message Id="110947261" ParentId="1079" UserId="780449" Date="06/10/2015 23:42:31" Content="Hi, &#xD;&#xA;As it turned out,  the &quot;customer&quot; didn't want stacking after all,  so this didn't matter. However,  the idea was that the error bars would be separate for dur.vc and dur.vowels. The first bar (count.vc=0) confuses the issue because the two values are the same and the two error bars get drawn over the top of one another. For counts greater than zero,  I'd have thought it makes sense to have the error bar glued to the top of the appropriate bar component. At the moment they are getting drawn correctly for the orange,  but not being offset for the blue. Not sure if I can see a way to fix it by hand without performing all the calculations manually and creating a new dataframe. &#xD;&#xA;&#xD;&#xA;Thanks for your feedback.&#xD;&#xA;&#xD;&#xA;# version with group option added to correct colour ordering.&#xD;&#xA;library(RCurl)&#xD;&#xA;table.text &lt;- getURL(&quot;https://raw.githubusercontent.com/richardbeare/ggplotissues/master/barplot_problem.csv&quot;)&#xD;&#xA;dat &lt;- read.csv(text=table.text)&#xD;&#xA;#dat &lt;- read.csv(&quot;barplot_problem.csv&quot;)&#xD;&#xA;library(ggplot2)&#xD;&#xA;ggplot(dat,  aes(x=counts.vc,  y=duration,  group=duration.type, &#xD;&#xA;colour=duration.type,  fill=duration.type)) +&#xD;&#xA;stat_summary(fun.y=mean,  geom=&quot;bar&quot;,  position=&quot;stack&quot;) +&#xD;&#xA;stat_summary(fun.data=mean_cl_normal,  geom=&quot;errorbar&quot;,  colour=&quot;black&quot;) +&#xD;&#xA;facet_wrap(~speaker)" />
    </Messages>
  </Topic>
  <Topic Id="1080" Title="stat_km and geom_km for Kaplan-Meier Survival curves">
    <Messages>
      <Message Id="0" ParentId="1080" UserId="5464185" Date="04/02/2015 15:10:06" Content="People occasionally ask about plotting survival curves with ggplot2. While it is possible,  [ see here for some examples ](https://stackoverflow.com/search?q=%5Bggplot2%5D+survival),  it's not done in the &quot;ggplot way&quot; and people often revert to the base plot because it's so much easier (but not nearly as powerful).  &#xD;&#xA;&#xD;&#xA;I've worked a bit on adding a stat and geom for computing and plotting survival curves [ here ](https://github.com/hadley/ggplot2/compare/master...sachsmc:feature-kmcurve). I view it as along the same lines as `stat_ecdf` but for censored data. Before submitting a pull request I wanted to ask if this would be suitable for inclusion in ggplot2,  or if it would be better as a standalone package?&#xD;&#xA;&#xD;&#xA;Here's an example code and plot: &#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;df &lt;- survival::lung&#xD;&#xA;ggplot(df,  aes(x = time,  status = status,  color = factor(sex))) + geom_km()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/5464185/6966565/17a8f7ce-d928-11e4-9b02-1a517c532614.png)&#xD;&#xA;&#xD;&#xA; " />
      <Message Id="109058129" ParentId="1080" UserId="6773454" Date="06/04/2015 21:26:40" Content="It looks like `autoplot` function from package `survMisc` produces KM curves for `survfit` object in a `ggplot-way`. It also produces a table with risk set size dependency over time.&#xD;&#xA;http://www.inside-r.org/packages/cran/survMisc/docs/autoplot&#xD;&#xA;&#xD;&#xA;````{ Ruby }&#xD;&#xA;library(survMisc)&#xD;&#xA;data(kidney,  package=&quot;KMsurv&quot;)&#xD;&#xA;s1 &lt;- survfit(Surv(time=time,  event=delta) ~ type,  data=kidney)&#xD;&#xA;autoplot(s1)&#xD;&#xA;autoplot(s1,  CI=TRUE,  pval=TRUE,  plotTable=TRUE,  divideTime=5, &#xD;&#xA; legendLabs=c(&quot;surgical&quot;,  &quot;percutaneous&quot;), &#xD;&#xA; title=&quot;Time to infection following catheter placement \n&#xD;&#xA;   by type of catheter,  for dialysis patients&quot;)&#xD;&#xA;s1 &lt;- survfit(Surv(time=time,  event=delta) ~ 1,  data=kidney)&#xD;&#xA;autoplot(s1)&#xD;&#xA;data(rectum.dat,  package=&quot;km.ci&quot;)&#xD;&#xA;s1 &lt;- survfit(Surv(time,  status) ~ 1,  data=rectum.dat)&#xD;&#xA;### change confidence intervals to log Equal-Precision confidence bands&#xD;&#xA;km.ci::km.ci(s1,  method=&quot;logep&quot;)&#xD;&#xA;autoplot(s1,  bands=TRUE)&#xD;&#xA;````" />
      <Message Id="109336355" ParentId="1080" UserId="5464185" Date="06/05/2015 15:46:17" Content="@MarcinKosinski  Thanks for pointing that out,  I was not aware of that function. While this autoplot does use ggplot2 to create a survival plot,  I don't agree that it is done in the &quot;ggplot way&quot;. I.e.,  there is no support for faceting,  scale transformations,  or even themes. Furthermore,  it ignores the key concepts of the grammar of graphics,  such as aesthetic mappings,  layers,  statistical transformations,  and so on. &#xD;&#xA;&#xD;&#xA;" />
      <Message Id="110940112" ParentId="1080" UserId="4196" Date="06/10/2015 22:50:39" Content="I'd rather it go in a separate package - have you considered adding the data related parts to broom?" />
    </Messages>
  </Topic>
  <Topic Id="1081" Title="Histograms for multiple distributions in one plot">
    <Messages>
      <Message Id="0" ParentId="1081" UserId="731527" Date="04/02/2015 15:54:18" Content="I've been looking for a way to plot histograms for multiple distributions in a single plot. I've tried to use position=&quot;dodge&quot; but in case of my data it's very hard to see anything.&#xD;&#xA;&#xD;&#xA;Then I came across this SO thread: http://stackoverflow.com/questions/3541713/how-to-plot-two-histograms-together-in-r (the first couple of plots are density but the rest are actual histograms) and all solutions there are based on using transparency. It occurred to me that a more universal way to do it would be to use solid bars but for each bin,  plot the bars in the order from highest to lowest so that all of them are visible (hope this makes sense). I've had a cursory look at the ggplot code and couldn't see a simple way of implementing this that would be compatible with how things are organised. &#xD;&#xA;&#xD;&#xA;I would really appreciate any suggestions on how to get this kind of plot to work. " />
      <Message Id="110940041" ParentId="1081" UserId="4196" Date="06/10/2015 22:50:07" Content="I'd recommend using `geom_freqpoly()` instead. There's no guarantee that all of the bars will be different,  so while ordering will help,  it's not a panacea." />
    </Messages>
  </Topic>
  <Topic Id="1082" Title="Documentation tweaks">
    <Messages>
      <Message Id="0" ParentId="1082" UserId="911841" Date="04/02/2015 19:26:45" Content="Some minor changes &amp; clarifications to guides and scales. Main change is the explicit documentation of the inherit.aes,  subset and show_guide arguments for geoms,  rather than then redirecting people to layer,  which has no documentation." />
      <Message Id="111256102" ParentId="1082" UserId="4196" Date="06/11/2015 19:41:23" Content="I like the basic idea,  but I'd like to downplay `subset`,  so I'd prefer it not be included by default.  And `inherit.aes` is rather esoteric,  and shouldn't be needed by the end user,  so I'd rather keep that out too. You would mind updating with that in mind?&#xD;&#xA;&#xD;&#xA;(And also could you please squash the commits down to just one or two)" />
      <Message Id="111285320" ParentId="1082" UserId="911841" Date="06/11/2015 21:45:13" Content="Is your concern that `subset` and `inherit.aes` might go away at some point and you don't want them made &quot;official&quot;? The reason I ask is just to clarify whether you would you prefer no mention of the availability of `subset` and `inherit.aes` at all,  or whether they could be mentioned under the `...` argument but with a warning that their functionality may change or disappear in the future?" />
      <Message Id="111287054" ParentId="1082" UserId="4196" Date="06/11/2015 21:56:04" Content="They're not going to go away,  but equally I don't want people using them." />
      <Message Id="111514282" ParentId="1082" UserId="911841" Date="06/12/2015 14:36:50" Content="Ok...I hope I navigated all the git squashing correctly..." />
      <Message Id="111515882" ParentId="1082" UserId="4196" Date="06/12/2015 14:44:22" Content="Could you please use the latest version of roxygen?  Squashing looks good" />
      <Message Id="111523776" ParentId="1082" UserId="911841" Date="06/12/2015 15:17:27" Content="Sorry...so many little details to remember! :) Does that look better?" />
      <Message Id="113194749" ParentId="1082" UserId="4196" Date="06/18/2015 15:36:01" Content="Thanks - I really appreciate the improvement due to the extreme fiddliness!  Any interest in doing similar work for the scales? I'm also thinking about documenting more of the stat arguments in the corresponding geom." />
      <Message Id="113274932" ParentId="1082" UserId="911841" Date="06/18/2015 20:06:18" Content="No problem! I'd be happy to look at the scales and see what I can do. If there's anything specific bothering you about them,  that would be helpful to know..." />
      <Message Id="113286141" ParentId="1082" UserId="4196" Date="06/18/2015 20:53:16" Content="Just the same problem as the geoms - that there's a big ... full of important arguments,  and you have to go hunting around the docs to figure out the complete set of arguments that a function understands" />
    </Messages>
  </Topic>
  <Topic Id="1083" Title="Density + histogram in count : how to use variable binwidth">
    <Messages>
      <Message Id="0" ParentId="1083" UserId="10176335" Date="04/04/2015 17:18:56" Content="Hello everyone, &#xD;&#xA;&#xD;&#xA;I do not understand the issue I have in drawing an histogram stack to a density plot in count.&#xD;&#xA;&#xD;&#xA;When the binwidth is and integer,  the following code return the graph with no problem:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;m &lt;- ggplot(movies,  aes(x=rating))&#xD;&#xA;m &lt;- m + stat_bin(binwidth=0.5)&#xD;&#xA;m + stat_density(aes(y=0.5*..count..),  colour='blue',  fill=NA)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;But when I need to use a variable instead of 0.5:&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;bin &lt;- 0.5&#xD;&#xA;m &lt;- ggplot(movies,  aes(x=rating))&#xD;&#xA;m &lt;- m + stat_bin(binwidth=bin)&#xD;&#xA;m + stat_density(aes(y=bin*..count..),  colour='blue',  fill=NA)&#xD;&#xA;```&#xD;&#xA;I have an error:&#xD;&#xA;&gt; object 'bin' not found&#xD;&#xA;&#xD;&#xA;How can I solve the problem ?&#xD;&#xA;&#xD;&#xA;Thanks&#xD;&#xA;" />
      <Message Id="89629722" ParentId="1083" UserId="10176335" Date="04/04/2015 17:54:48" Content="I answer to my own question after having found this:&#xD;&#xA;http://stackoverflow.com/questions/17832608/how-to-use-earlier-declared-variables-within-aes-in-ggplot-with-special-operator&#xD;&#xA;&#xD;&#xA;The solution is quite tricky to my point of view,  variable has to be declared inside aes:&#xD;&#xA;```r&#xD;&#xA;library(ggplot2)&#xD;&#xA;bin &lt;- 0.5&#xD;&#xA;m &lt;- ggplot(movies,  aes(x=rating))&#xD;&#xA;m &lt;- m + stat_bin(binwidth=bin)&#xD;&#xA;m + stat_density(aes(bin=bin,  y=bin*..count..),  colour='blue',  fill=NA)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="1084" Title="Remove tick marks from theme_minimal">
    <Messages>
      <Message Id="0" ParentId="1084" UserId="9009228" Date="04/13/2015 11:51:06" Content="A very minor change: I've removed tick marks from ` theme_minimal() ` as I think that is more in keeping with &quot;minimalism&quot;. The black ticks seemed a little visually unnecessary. &#xD;&#xA;&#xD;&#xA;Incidentally,  removing black ticks it also aligns minimal to the default plotly theme.&#xD;&#xA;&#xD;&#xA;All good if you don't like the idea.&#xD;&#xA;&#xD;&#xA;```r &#xD;&#xA;qplot(data = mtcars,  x = mpg,  y = wt) + theme_minimal() &#xD;&#xA;```&#xD;&#xA;Before:&#xD;&#xA;![ before ](https://cloud.githubusercontent.com/assets/9009228/7114958/e478eff6-e1da-11e4-87aa-bc586ef6f158.png)&#xD;&#xA;&#xD;&#xA;After:&#xD;&#xA;![ after ](https://cloud.githubusercontent.com/assets/9009228/7114961/eaa73662-e1da-11e4-9913-f4008e215118.png)&#xD;&#xA;&#xD;&#xA;Tom" />
      <Message Id="111255717" ParentId="1084" UserId="4196" Date="06/11/2015 19:39:13" Content="I think the numbers now look a bit far away from the axis. Could you tweak that too please?&#xD;&#xA;&#xD;&#xA;Also needs a merge/rebase and a bullet point in NEWS" />
      <Message Id="113191589" ParentId="1084" UserId="4196" Date="06/18/2015 15:26:21" Content="Merged by hand - thanks for the patch!" />
    </Messages>
  </Topic>
  <Topic Id="1085" Title="Add linewidth option geom_path and geom_point.">
    <Messages>
      <Message Id="0" ParentId="1085" UserId="118235" Date="04/15/2015 08:24:32" Content="This PR adds an aesthetic option to `geom_point` and `geom_path` (and its derivatives,  such as `geom_line`) to customize the width of the lines drawn (by passing the `linewidth` property). This is implemented by simply delegating to the `lwd` option of the `grid` library." />
      <Message Id="111255514" ParentId="1085" UserId="4196" Date="06/11/2015 19:38:28" Content="Why do you need this instead of size?" />
      <Message Id="112118812" ParentId="1085" UserId="118235" Date="06/15/2015 15:56:11" Content="I didn't realize the `size` option was available for `geom_path`. What I was specifically looking for was increasing the border thickness of `geom_point` shapes 21-25,  which seems to be a common issue:&#xD;&#xA;&#xD;&#xA;* http://stackoverflow.com/questions/19506630/control-point-border-thickness-in-ggplot&#xD;&#xA;* http://stackoverflow.com/questions/17677687/change-thickness-of-a-marker-in-ggplot2&#xD;&#xA;&#xD;&#xA;I only really added the same option to `geom_path` as an afterthought. If you want,  I can resubmit the patch only for `geom_point`." />
      <Message Id="112124977" ParentId="1085" UserId="4196" Date="06/15/2015 16:18:19" Content="Ah,  got it - yes,  I'd love a PR that just modified linewidth for geom_point. Maybe call the aesthetic stroke? Or strokewidth? I think you'll also need to update `draw_legend()` and it might be worthwhile thinking about what the default scale for stroke should be." />
    </Messages>
  </Topic>
  <Topic Id="1086" Title="qplot with $ addressing of column and data argument produces wrong plot">
    <Messages>
      <Message Id="0" ParentId="1086" UserId="1662852" Date="04/20/2015 10:20:44" Content="I was building a plot using qplot where I first produced a scatter plot of the difference between two variables and later on decided to facet it. In order to do this i added the data argument to qplot. This produced the wrong plot where the point is both shown at 5 and 13 in in each fact in stead of only at 5 or 13. Admittedly it is a weird plot specification but i think it is not one that is uncommon if a plot is build gradually,  I think that some kind of warning or error would be in place.&#xD;&#xA;&#xD;&#xA;Wrong plot:&#xD;&#xA;![ rplot ](https://cloud.githubusercontent.com/assets/1662852/7228133/7b7284b4-e756-11e4-9c94-12a94e5f96c0.png)&#xD;&#xA;Right plot:&#xD;&#xA;![ rplot01 ](https://cloud.githubusercontent.com/assets/1662852/7228145/976d230e-e756-11e4-8a78-ea893be95ba5.png)&#xD;&#xA;&#xD;&#xA;The script:&#xD;&#xA;```R&#xD;&#xA;require(ggplot2)&#xD;&#xA;d&lt;-data.frame(b=gl(3, 2),  a=rep(gl(2, 1), 3))&#xD;&#xA;d&lt;-do.call('rbind', list(d)[ rep(1, 60) ])&#xD;&#xA;&#xD;&#xA;d$dd&lt;-1&#xD;&#xA;d$ee&lt;-as.numeric(d$a)*8-2&#xD;&#xA;d$t&lt;-2&#xD;&#xA;#all produce the wrong plot&#xD;&#xA;qplot(d$ee-d$dd,  d$t, data=d,  geom='point')+facet_grid(a~b)&#xD;&#xA;qplot(d$ee-d$dd,  t, data=d,  geom='point')+facet_grid(a~b)&#xD;&#xA;qplot(d$ee-d$dd,  t, data=d)+facet_grid(a~b)# wrong plot shown&#xD;&#xA;&#xD;&#xA;# right plot&#xD;&#xA;qplot(ee-dd,  d$t, data=d,  geom='point')+facet_grid(a~b)&#xD;&#xA;qplot(ee-dd,  t, data=d,  geom='point')+facet_grid(a~b)&#xD;&#xA;qplot(ee-dd,  t, data=d)+facet_grid(a~b)# right plot shown&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;d$diff&lt;-d$ee-d$dd&#xD;&#xA;qplot(diff,  d$t, data=d,  geom='point')+facet_grid(a~b)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;My system:&#xD;&#xA;```R&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.2.0 (2015-04-16)&#xD;&#xA;Platform: x86_64-pc-linux-gnu (64-bit)&#xD;&#xA;Running under: Ubuntu 14.10&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=de_DE.UTF-8       &#xD;&#xA; [ 4 ] LC_COLLATE=en_US.UTF-8     LC_MONETARY=de_DE.UTF-8    LC_MESSAGES=en_US.UTF-8   &#xD;&#xA; [ 7 ] LC_PAPER=de_DE.UTF-8       LC_NAME=C                  LC_ADDRESS=C              &#xD;&#xA;[ 10 ] LC_TELEPHONE=C             LC_MEASUREMENT=de_DE.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] labeling_0.3     MASS_7.3-40      colorspace_1.2-6 scales_0.2.4     plyr_1.8.1      &#xD;&#xA; [ 6 ] tools_3.2.0      gtable_0.1.2     reshape2_1.4.1   Rcpp_0.11.5      grid_3.2.0      &#xD;&#xA;[ 11 ] stringr_0.6.2    digest_0.6.8     proto_0.3-10     munsell_0.4.2   &#xD;&#xA;```" />
      <Message Id="110739013" ParentId="1086" UserId="4196" Date="06/10/2015 12:51:12" Content="Basically,  you just shouldn't do this - using `$` with ggplot2 is likely to end in grief (and unfortuately there's no easy way to warn about this problem automatically)" />
    </Messages>
  </Topic>
  <Topic Id="1087" Title="print(ggplot_obj) not returning a ggplot object">
    <Messages>
      <Message Id="0" ParentId="1087" UserId="1774207" Date="04/20/2015 15:41:25" Content="The documentation of `print.default` states that &#xD;&#xA;&#xD;&#xA;     'print' prints its argument and returns it _invisibly_ (via&#xD;&#xA;     'invisible(x)').&#xD;&#xA;&#xD;&#xA;Hence I expected the following to work:&#xD;&#xA;&#xD;&#xA;    plot_obj &lt;- ggplot(data = data.frame(x = 1:10,  y = 1:10),  aes(x = x,  y = y)) + geom_point()&#xD;&#xA;    plot_obj2 &lt;- print(plot_obj)&#xD;&#xA;    print(plot_obj2 + ggtitle(&quot;testplot&quot;))&#xD;&#xA;&#xD;&#xA;... but it doesn't (`Error in plot_obj2 + ggtitle(&quot;testplot&quot;) : non-numeric argument to binary operator`),  since `plot_obj2` is of class `list` and not `ggplot` (as is `plot_obj`).&#xD;&#xA;&#xD;&#xA;A quick look at [ plot-render.r ](https://github.com/hadley/ggplot2/blob/4bb9270ef4d5d5062353438fd99d17b6f6de98a2/R/plot-render.r#L179-L195) confirms that `print.ggplot(x)` does not return `x` but rather `ggplot_build(x)` (invisibly).&#xD;&#xA;&#xD;&#xA;So to summarise, &#xD;&#xA;- the behavior of `print.ggplot` is not in tune with the documentation of `print.default` and&#xD;&#xA;- it is not documented.&#xD;&#xA;&#xD;&#xA;A little bit of context on why I wanted to do this: I have various custom functions that construct ggplot objects and print them. I found it very convenient to just have `print(obj)` as the final statement in my function,  believing that this would also invisibly return the object,  s.t. I could further modify it outside of the function if necessary. Now I have to do `print(obj); invisible(obj)`.&#xD;&#xA;&#xD;&#xA;Is there a reason for this choice of implementation? If yes,  I'd think it should at least be documented." />
      <Message Id="110939874" ParentId="1087" UserId="4196" Date="06/10/2015 22:49:03" Content="@wch does the existing behaviour need to be preserved for shiny?" />
    </Messages>
  </Topic>
  <Topic Id="1088" Title="Added new function geom_curve">
    <Messages>
      <Message Id="0" ParentId="1088" UserId="7384126" Date="04/25/2015 11:12:30" Content="" />
      <Message Id="111255281" ParentId="1088" UserId="4196" Date="06/11/2015 19:38:01" Content="Overall idea looks good.&#xD;&#xA;&#xD;&#xA;Also needs a merge/rebase and a bullet point in NEWS" />
      <Message Id="111466292" ParentId="1088" UserId="7384126" Date="06/12/2015 11:47:15" Content="I hope I understood your suggestions correctly. I tried to include everything and did a merge/rebase and updated NEWS. If something still needs to be done,  just let me know." />
      <Message Id="111500124" ParentId="1088" UserId="7384126" Date="06/12/2015 13:52:37" Content="Thanks for your patience. I hope,  this time everything is OK." />
      <Message Id="111512255" ParentId="1088" UserId="4196" Date="06/12/2015 14:26:13" Content="Looks good - thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1089" Title="Fix typo in doc'n for theme()">
    <Messages>
      <Message Id="0" ParentId="1089" UserId="53972" Date="04/27/2015 11:54:20" Content=" - rectangluar -&gt; rectangular" />
      <Message Id="96672048" ParentId="1089" UserId="86978" Date="04/27/2015 14:21:07" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1090" Title="scale_x_date limits not properly subsetting data">
    <Messages>
      <Message Id="0" ParentId="1090" UserId="12107040" Date="04/27/2015 16:27:27" Content="Posted on Stack Overflow:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/29900106/ggplot2-bug-ggplot-showing-not-dropping-data-outside-limits-of-scale#29900106&#xD;&#xA;&#xD;&#xA;I am having an issue where ggplot2 is displaying data outside of the limits specified in the scale. See example below. Why am I seeing points before 2009/01/01 and after 2015/01/01 in the graph if the limits are set to these values?&#xD;&#xA;	&#xD;&#xA;	library(ggplot2)&#xD;&#xA;	library(scales)&#xD;&#xA;    set.seed(100)&#xD;&#xA;	z &lt;- seq.Date(as.Date(&quot;2008/12/1&quot;),  as.Date(&quot;2015/12/14&quot;),  &quot;day&quot;)&#xD;&#xA;	l &lt;- expand.grid(z,  c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;))&#xD;&#xA;	w &lt;- data.frame(x= l[ ,  1 ],  t = l[ ,  2 ])&#xD;&#xA;	w$val &lt;- runif(nrow(w))&#xD;&#xA;	ggplot(data=w,  aes_string(x=&quot;x&quot;,  y=&quot;val&quot;))+scale_x_date(&#xD;&#xA;	  labels = date_format(&quot;%m/%d/%Y&quot;), &#xD;&#xA;	  limits= c(as.Date(&quot;2009/1/1&quot;),  as.Date(&quot;2015/1/1&quot;)), &#xD;&#xA;	  breaks = &quot;1 year&quot;)+&#xD;&#xA;	  geom_point(aes(color = t))&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;	&#xD;&#xA;Is it possible to still leave the breaks/scale as specified but just remove the data outside the limits using ggplot/without pre-filtering the data? This seems like a bug to me. The documentation states that limits filter data. &#xD;&#xA;&#xD;&#xA;![ resulting plot ][ 1 ]&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;  [ 1 ]: http://i.stack.imgur.com/9CcnZ.png" />
      <Message Id="97042459" ParentId="1090" UserId="4196" Date="04/28/2015 12:22:05" Content="Limits are automatically expanded using the expand parameter. " />
      <Message Id="97056919" ParentId="1090" UserId="12107040" Date="04/28/2015 13:15:22" Content="Just to be clear,  the limits of the scales are controlled by the expand parameter,  but the limits of the data should not be affected. At least this is the behavior when using scale_x_continuous. Currently scale_x_date is functioning differently than scale_x_continuous.&#xD;&#xA;&#xD;&#xA;See below&#xD;&#xA;&#xD;&#xA;      library(ggplot2)&#xD;&#xA;       library(scales)&#xD;&#xA;       set.seed(100)&#xD;&#xA;        z &lt;- seq.Date(as.Date(&quot;2008/12/1&quot;),  as.Date(&quot;2015/12/14&quot;),  &quot;day&quot;)&#xD;&#xA;        l &lt;- expand.grid(z,  c(&quot;a&quot;,  &quot;b&quot;,  &quot;c&quot;))&#xD;&#xA;        w &lt;- data.frame(x= l[ ,  1 ],  t = l[ ,  2 ])&#xD;&#xA;        w$val &lt;- runif(nrow(w))&#xD;&#xA;         n &lt;- as.Date(&quot;2009/1/1&quot;)&#xD;&#xA;&#xD;&#xA;With scale_x_continuous&#xD;&#xA;&#xD;&#xA;           gplot(w, aes(as.numeric(x), val))+geom_point()+&#xD;&#xA;           scale_x_continuous(limits=c(as.numeric(n), NA))+&#xD;&#xA;           geom_vline(xintercept=as.numeric(n), colour=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;![ resulting plot ][ 1 ]&#xD;&#xA;[ 1 ]: http://i.stack.imgur.com/1heOc.png&#xD;&#xA;&#xD;&#xA;with scale_x_date&#xD;&#xA;&#xD;&#xA;       ggplot(w, aes(x, val))+geom_point()+&#xD;&#xA;       scale_x_date(limits=c(n, NA))+&#xD;&#xA;        geom_vline(xintercept=as.numeric(n), colour=&quot;red&quot;)&#xD;&#xA;&#xD;&#xA;![ resulting plot ][ 2 ]&#xD;&#xA;&#xD;&#xA;[ 2 ]: http://i.stack.imgur.com/1E6Dv.png&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="97068132" ParentId="1090" UserId="4196" Date="04/28/2015 13:41:39" Content="Oh,  hmmm,  that's a more compelling bug." />
    </Messages>
  </Topic>
  <Topic Id="1091" Title="integer64 not supported by ggplot2">
    <Messages>
      <Message Id="0" ParentId="1091" UserId="250263" Date="04/27/2015 22:43:12" Content="It seems that when using large integer values (e.g.,  int64 through the bit64 package) one has to always define the scales:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(q, aes(x=time, y=p)) + geom_line()&#xD;&#xA;Don't know how to automatically pick scale for object of type integer64. Defaulting to continuous&#xD;&#xA;Error in seq.default(from = best$lmin,  to = best$lmax,  by = best$lstep) : &#xD;&#xA;  'from' must be of length 1&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;It would be nice if ggplot would support this out of the box." />
      <Message Id="97041311" ParentId="1091" UserId="4196" Date="04/28/2015 12:18:57" Content="I'd be happy to review a PR that implemented this,  but I suspect it would be quite a lot of work.  (Also the bit64 approach is rather fragile - if any operation loses the class attribute,  you'll silently get wrong values)" />
      <Message Id="97043294" ParentId="1091" UserId="250263" Date="04/28/2015 12:24:36" Content="Ok. In case others run into the same problem. A simple workaround is the following:&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;ggplot(q, aes(x=as.integer(time), y=p)) + geom_line()&#xD;&#xA;```" />
      <Message Id="97046698" ParentId="1091" UserId="4196" Date="04/28/2015 12:33:01" Content="I don't think that will work in general unless your integers happen to all be 32-bit integers already." />
    </Messages>
  </Topic>
  <Topic Id="1092" Title="Feature/geom schematic">
    <Messages>
      <Message Id="0" ParentId="1092" UserId="9858547" Date="04/29/2015 14:13:09" Content="This commit adds a new geom,  `geom_schematic()` which follows John Tukey's recommendation for balanced schematic plots (see Tukey J. W. (1990) Data-Based Graphics: Visual Display in the Decades to Come. Statistical Science 5(3),  327-339.) This also more closely follows what `bwplot()` does in the `lattice` package and what William Cleveland uses in his book Visualizing Data.&#xD;&#xA;&#xD;&#xA;The `geom_schematic()` function started from the `geom_boxplot()` function,  and added lines at the upper and lower ends of the whiskers,  used a point for the median instead of a line. It also added the aesthetics `whiskers.linetype`,  `middle.size`,  and `middle.colour` with the default values of `dashed`,  `4`,  and `NULL`,  respectively. The default for `middle.colour` is to use the `colour` aesthetic,  but with the option of directly specifying it in the call to `geom_schematic()`. The option for notching was removed,  because I didn't think notching would work well with the median as a point.&#xD;&#xA;&#xD;&#xA;![ rplot ](https://cloud.githubusercontent.com/assets/9858547/7392808/2f81e8c0-ee58-11e4-803c-0051fec83741.png)&#xD;&#xA;" />
      <Message Id="111254404" ParentId="1092" UserId="4196" Date="06/11/2015 19:33:14" Content="This just feels a bit too specific for me - and there's quite a lot of code to implement it. I think it would be more appropriate in a separate package." />
    </Messages>
  </Topic>
  <Topic Id="1093" Title="Extent of stat_smooth() should be ignored when determining graph limits">
    <Messages>
      <Message Id="0" ParentId="1093" UserId="1227833" Date="04/29/2015 16:06:34" Content="For example,  when plotting frequency over year and the data trends upwards at the beginning,  stat_smooth() will go below 0% and the graph limits will expand accordingly,  which is bogus in this case. The workaround to explicitly set visual limits with coord_cartesian() works everywhere,  except when using facet_grid(scales = &quot;free_y&quot;).. so after giving it some thought,  IMHO stat_smooth() should always be ignored when determining the data limits. Does that make any sense to you?&#xD;&#xA;BTW,  if `coord_cartesian(ylim = c(0,  NA))` would proceed to only override the lower boundary,  that would also be a solution to this." />
      <Message Id="97484417" ParentId="1093" UserId="4196" Date="04/29/2015 16:13:29" Content="I don't think it makes sense to special-case the behaviour of one statistic - and it is reasonable to know that your smooth is giving unreasonable predictions." />
    </Messages>
  </Topic>
  <Topic Id="1094" Title="Minimum number of points for boxplots">
    <Messages>
      <Message Id="0" ParentId="1094" UserId="2385506" Date="04/30/2015 07:30:01" Content="Here is an issue I have struggled with repeatedly. When using geom_boxplot,  a boxplot is done,  irrespective of the number of data points that are available. This is especially a problem when doing boxplots across various groups (e.g. timepoints) where not always the same number of samples is available. In plotting,  all the boxplots look equivalent,  although it can easily be the case that some are only based on 2-3 points (or even 1).&#xD;&#xA;&#xD;&#xA;Therefore I have the following feature request: Add a parameter to geom_boxplot that requires a minimum number of points for the boxplot to be done. By default it can be set to 0 not to change current behavior. then&#xD;&#xA;1. If minimum number of points reached - do the boxplot as usual&#xD;&#xA;2. If minimum number of points not reached - plot the available data as points instead (with color being equal to the fill color of the boxplot).&#xD;&#xA;&#xD;&#xA;Thanks!" />
      <Message Id="110355872" ParentId="1094" UserId="4196" Date="06/09/2015 13:23:35" Content="I'd recommend doing this yourself with dplyr (or otherwise),  e.g.&#xD;&#xA;&#xD;&#xA;```{ r }&#xD;&#xA;library(dplyr)&#xD;&#xA;mpg %&gt;% group_by(cyl) %&gt;% filter(n() &gt; 5)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1095" Title="Add optimization of scatterplot point opacity level?">
    <Messages>
      <Message Id="0" ParentId="1095" UserId="3980" Date="05/02/2015 22:34:40" Content="This recent CHI'15 paper shows how people seem to prefer a &quot;Mean Opacity of Utilized Pixels&quot; (MOUP) in scatterplots of around 40% regardless of point distribution:&#xD;&#xA;&#xD;&#xA;http://autodeskresearch.com/pdf/Overplotting-authored.pdf&#xD;&#xA;&#xD;&#xA;There is also an illustrative video here:&#xD;&#xA;&#xD;&#xA;http://autodeskresearch.com/publications/overplotting&#xD;&#xA;&#xD;&#xA;Would be nice to add a way that one can automatically tune this in a ggplot2 scatterplot. Is there some simple way I can access the generated pixels and/or their opacities directly and then tune them?" />
      <Message Id="98711783" ParentId="1095" UserId="4196" Date="05/04/2015 13:54:47" Content="Unfortunately not - R's graphics system is vector based,  so it's extremely difficult to calculate this sort of metric. Thanks for the pointer to the paper!" />
    </Messages>
  </Topic>
  <Topic Id="1096" Title="Fix how geom_plot handles some aes">
    <Messages>
      <Message Id="0" ParentId="1096" UserId="1330626" Date="05/05/2015 06:17:46" Content="This commit allows geom_dotplot to display color attributes properly&#xD;&#xA;when dots are binned.  Prior to this,  if one ran a command such as:&#xD;&#xA;&#xD;&#xA;    ggplot(mtcars,  aes(x=factor(cyl),  y =mpg,  fill=factor(carb),  group=factor(cyl))) + geom_dotplot(binaxis=&quot;y&quot;,  stackdir=&quot;center&quot;)&#xD;&#xA;&#xD;&#xA;The dots would be positioned on top of each other,  because a &quot;double&#xD;&#xA;grouping&quot; was performed where both the fill and the x axis were used to&#xD;&#xA;divide groups.  This change keeps the groups appropriately separated&#xD;&#xA;when the x/y positions are being determined,  but still applies separate&#xD;&#xA;coloring to each.&#xD;&#xA;&#xD;&#xA;It does this by changing where the fill color is added to the data used&#xD;&#xA;when plotting.  Previously,  the data was condensed into bins and a&#xD;&#xA;dataframe where each row represented several dots to be plotted during&#xD;&#xA;the calculate groups step. This condendsed data was then re-expanded&#xD;&#xA;with a constant fill color added for each binned group inside the&#xD;&#xA;reparameterise method.  This commit re-expands the data into one line&#xD;&#xA;per dot in the original calculate method,  where the appropriate fill&#xD;&#xA;(or other aes) is still available and can be added back in.&#xD;&#xA;&#xD;&#xA;I verified that all the original examples for geom_dotplot still behave&#xD;&#xA;as expected,  and all tests currently pass." />
      <Message Id="98966320" ParentId="1096" UserId="1330626" Date="05/05/2015 06:24:51" Content="I gather the failed tests are independent of this PR as several previous ones seem to generate the same error." />
      <Message Id="98974968" ParentId="1096" UserId="1330626" Date="05/05/2015 06:58:15" Content="Also,  in case it is useful,  some before and after for the command:&#xD;&#xA;&#xD;&#xA;    ggplot(mtcars,  aes(x=factor(cyl),  y =mpg,  fill=factor(carb))) + geom_dotplot(binaxis=&quot;y&quot;,  stackdir=&quot;center&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;![ before ](https://cloud.githubusercontent.com/assets/1330626/7468097/16f9b476-f2b9-11e4-9282-2b377feeec89.png)&#xD;&#xA;![ after ](https://cloud.githubusercontent.com/assets/1330626/7468099/1c7cbc68-f2b9-11e4-984d-827809f1f1a3.png)&#xD;&#xA;" />
      <Message Id="111254168" ParentId="1096" UserId="4196" Date="06/11/2015 19:31:47" Content="@wch could you please review the basic strategy? &#xD;&#xA;&#xD;&#xA;@evolvedmicrobe You'll also need to match the style of the existing code,  but there's no point doing that until we're confident that the change as a whole is good to merge." />
      <Message Id="112239912" ParentId="1096" UserId="1330626" Date="06/15/2015 23:54:39" Content="@hadley @wch thanks for taking a look at this.  My hope is really just to commit something that produced the &quot;after&quot; plot rather than the &quot;before&quot; plot,  happy to make any coding style (or other) changes to get that done." />
    </Messages>
  </Topic>
  <Topic Id="1097" Title="facet_wrap can't use strings">
    <Messages>
      <Message Id="0" ParentId="1097" UserId="86978" Date="05/06/2015 15:56:55" Content="`facet_grid` can accept strings,  but `facet_wrap` can't. For example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;p &lt;- ggplot(mtcars,  aes(wt,  mpg)) + geom_point()&#xD;&#xA;&#xD;&#xA;# OK&#xD;&#xA;p + facet_grid(&quot;. ~ cyl&quot;)&#xD;&#xA;&#xD;&#xA;# Error&#xD;&#xA;p + facet_wrap(&quot;~ cyl&quot;)&#xD;&#xA;# Error in layout_base(data,  vars,  drop = drop) : &#xD;&#xA;#   At least one layer must contain all variables used for facetting &#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="1098" Title="Remove rgeos from binary installation">
    <Messages>
      <Message Id="0" ParentId="1098" UserId="205275" Date="05/07/2015 19:32:42" Content="This will hopefully fix the travis error." />
      <Message Id="99995013" ParentId="1098" UserId="4196" Date="05/07/2015 19:51:33" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1099" Title="ggplot crashing in Windows">
    <Messages>
      <Message Id="0" ParentId="1099" UserId="12306963" Date="05/08/2015 00:00:29" Content="Hi everyone, &#xD;&#xA;Whenever I try to plot using ggplot (ggplot2) it crashes R,  R studio etc. Here is a reproducible example:&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&gt;require(ggplot2)&#xD;&#xA;g = ggplot(mtcars,  aes(x = wt,  y = disp)) + geom_point()&#xD;&#xA;&gt;print(g) &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;My details are as follows:&#xD;&#xA;&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.2.0 (2015-04-16)&#xD;&#xA;Platform: x86_64-w64-mingw32/x64 (64-bit)&#xD;&#xA;Running under: Windows 7 x64 (build 7601) Service Pack 1&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] LC_COLLATE=English_United States.1252 &#xD;&#xA;[ 2 ] LC_CTYPE=English_United States.1252   &#xD;&#xA;[ 3 ] LC_MONETARY=English_United States.1252&#xD;&#xA;[ 4 ] LC_NUMERIC=C                          &#xD;&#xA;[ 5 ] LC_TIME=English_United States.1252    &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats4    stats     graphics  grDevices utils     datasets  methods  &#xD;&#xA;[ 8 ] base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.1   lattice_0.20-31 bbmle_1.0.17    nlme_3.1-120   &#xD;&#xA;[ 5 ] sciplot_1.1-0  &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] Rcpp_0.11.2       digest_0.6.8      MASS_7.3-40       grid_3.2.0       &#xD;&#xA; [ 5 ] plyr_1.8.2        gtable_0.1.2      magrittr_1.5      scales_0.2.4     &#xD;&#xA; [ 9 ] stringi_0.4-1     reshape2_1.4.1    proto_0.3-10      tools_3.2.0      &#xD;&#xA;[ 13 ] stringr_1.0.0     munsell_0.4.2     numDeriv_2014.2-1 colorspace_1.2-6 &#xD;&#xA;&gt; &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;This issue has been documented in issue #727. &#xD;&#xA;I have tried to reinstall plyr as suggested but I get an error message,  and I do not know how to install the plyr-1.8-rc sources manually (I am not an experienced programmer). I need to be able to use this package for my work,  and would greatly appreciate any help (particularly if aimed at newbies to Github!).&#xD;&#xA;&#xD;&#xA;Thank you, &#xD;&#xA;Caroline Williams &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="100222948" ParentId="1099" UserId="4196" Date="05/08/2015 12:49:33" Content="I suspect you need to reinstall Rcpp" />
      <Message Id="101058716" ParentId="1099" UserId="12306963" Date="05/11/2015 21:48:12" Content="Thank you very much hadley,  that has solved the problem! " />
    </Messages>
  </Topic>
  <Topic Id="1100" Title="Install Rexamine/stringi from GitHub for Travis">
    <Messages>
      <Message Id="0" ParentId="1100" UserId="1372890" Date="05/08/2015 12:49:11" Content="https://github.com/Rexamine/stringi/issues/155" />
      <Message Id="111253935" ParentId="1100" UserId="4196" Date="06/11/2015 19:30:38" Content="Thanks - fixed after upgrading to modern travis spec" />
    </Messages>
  </Topic>
  <Topic Id="1101" Title="suppressMessages not working with geom_histogram">
    <Messages>
      <Message Id="0" ParentId="1101" UserId="2998956" Date="05/08/2015 17:11:33" Content="library(ggplot2)&#xD;&#xA;suppressMessages( ggplot(diamonds,  aes(x = price)) + geom_histogram() )&#xD;&#xA;&#xD;&#xA;Result: &quot;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&quot;&#xD;&#xA;&#xD;&#xA;Occurs on Mac and Windows with R 3.2.0 with ggplot2 1.0.1&#xD;&#xA;Also on Windows with R 3.1.3 with ggplot2 1.0.0&#xD;&#xA;&#xD;&#xA;suppressMessages(message(&quot;test message&quot;)) does work as expected" />
      <Message Id="100353815" ParentId="1101" UserId="463252" Date="05/08/2015 20:31:31" Content="It is working as designed,  though maybe not as expected. In ggplot,  plots are created in two phases: the definition of the plot and the rendering of the plot. An expression like `ggplot(diamonds,  aes(x = price)) + geom_histogram()` defines a plot,  and that definition can be stored in an object (and further modified). However,  it is not until `print` is called on that object that the actual visual graphic is made. Making that visual includes many steps. The warning that you see is from one of those steps,  specifically the binning step. So what happened was you defined an object,  suppressed the messages associated with the creation of that object,  and then that was printed which generated the message you saw.&#xD;&#xA;&#xD;&#xA;As a further example,  consider splitting it into separate steps and also look at what happens when you change the order of the steps with an explicit `print`:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(x=price)) + geom_histogram()&#xD;&#xA;&gt; print(p)&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; suppressMessages(p &lt;- ggplot(diamonds,  aes(x=price)) + geom_histogram())&#xD;&#xA;&gt; suppressMessages(print(p))&#xD;&#xA;&gt; suppressMessages(print(ggplot(diamonds,  aes(x=price)) + geom_histogram()))&#xD;&#xA;&gt; &#xD;&#xA;``` " />
      <Message Id="100354459" ParentId="1101" UserId="4196" Date="05/08/2015 20:33:06" Content="Thanks for the explanation @BrianDiggs!" />
      <Message Id="100356179" ParentId="1101" UserId="2998956" Date="05/08/2015 20:38:35" Content="Thank you for your response and the explanation @BrianDiggs. I had tested the assign-then-print option as well but that produced the same problem. Furthermore,  all the examples provided in your reply print the 'stat_bin' message,  i.e.,  it is *not* suppressed by suppressMessages at all. See also example below:&#xD;&#xA;&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(x = price)) + geom_histogram()&#xD;&#xA;&gt; suppressMessages( print(p) )&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&#xD;&#xA;I do not recall this being an issue in the prior version of ggplot2 on my systems. Is there a way to install the pre-1.0.0 version?" />
      <Message Id="100585639" ParentId="1101" UserId="2998956" Date="05/10/2015 05:12:07" Content="Asked a student to check on his system (Windows 8.1 with R-3.1.2) and the latest ggplot2 from CRAN:&#xD;&#xA;&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(x = price)) + geom_histogram()&#xD;&#xA;&gt; suppressMessages( print(p) )&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this." />
      <Message Id="100698871" ParentId="1101" UserId="463252" Date="05/10/2015 20:46:53" Content="Hmm. That's odd. I got those results with a configuration of&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.1.3 (2015-03-09)&#xD;&#xA;Platform: x86_64-apple-darwin10.8.0 (64-bit)&#xD;&#xA;Running under: OS X 10.6.8 (Snow Leopard)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-6 digest_0.6.8     grid_3.1.3       gtable_0.1.2    &#xD;&#xA; [ 5 ] labeling_0.3     MASS_7.3-40      munsell_0.4.2    plyr_1.8.1      &#xD;&#xA; [ 9 ] proto_0.3-10     Rcpp_0.11.5      reshape2_1.4.1   scales_0.2.4    &#xD;&#xA;[ 13 ] stringr_0.6.2   &#xD;&#xA;```&#xD;&#xA;I have not yet updated to R version 3.2.0,  but my version is still ahead of yours. I really don't know what could be causing it. Perhaps someone else can test it with your exact configuration (which I do not have)." />
      <Message Id="100699802" ParentId="1101" UserId="2998956" Date="05/10/2015 20:52:22" Content="@BrianDiggs Here is my sessionInfo. I asked two students using R3.1.3 and R3.2 on Windows and they get the same result with ggplot2 1.0.1. Is there a way to re-open this issue?&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(x = price)) + geom_histogram()&#xD;&#xA;&gt; suppressMessages( print(p) )&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.2.0 (2015-04-16)&#xD;&#xA;Platform: x86_64-apple-darwin13.4.0 (64-bit)&#xD;&#xA;Running under: OS X 10.10.3 (Yosemite)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] labeling_0.3     MASS_7.3-40      colorspace_1.2-6 scales_0.2.4     magrittr_1.5     plyr_1.8.2       tools_3.2.0      gtable_0.1.2     reshape2_1.4.1   Rcpp_0.11.6      stringi_0.4-1   &#xD;&#xA;[ 12 ] grid_3.2.0       stringr_1.0.0    digest_0.6.8     proto_0.3-10     munsell_0.4.2 &#xD;&#xA;```" />
      <Message Id="100890927" ParentId="1101" UserId="4196" Date="05/11/2015 12:27:26" Content="`stat_bin()` definitely uses `message()`,  so if `suppressMessage()` doesn't work,  it's probably an R buglet." />
      <Message Id="100989161" ParentId="1101" UserId="2998956" Date="05/11/2015 17:36:48" Content="@hadley Seems like it. I installed the version 0.9.3.1 from github (nice devtools feature by the way!) and get the same result. The strange thing is that I have only seen this effect with ggplot2 plotting messages. See below. Suggestions on how to proceed?&#xD;&#xA;&#xD;&#xA;&gt; suppressMessages(library(ggplot2))&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(x = price)) + geom_histogram()&#xD;&#xA;&gt; suppressMessages( print(p) )&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; &#xD;&#xA;&gt; suppressMessages(library(dplyr))&#xD;&#xA;&gt; &#xD;&#xA;&gt; message(&quot;Test suppress&quot;)&#xD;&#xA;Test suppress&#xD;&#xA;&gt; suppressMessages(message(&quot;Test suppress&quot;))&#xD;&#xA;&gt; " />
      <Message Id="101123259" ParentId="1101" UserId="463252" Date="05/12/2015 04:06:30" Content="I've update my version of R,  and now I am seeing it as well&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; library(ggplot2)&#xD;&#xA;&gt; p &lt;- ggplot(diamonds,  aes(x=price)) + geom_histogram()&#xD;&#xA;&gt; print(p)&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; suppressMessages(p &lt;- ggplot(diamonds,  aes(x=price)) + geom_histogram())&#xD;&#xA;&gt; suppressMessages(print(p))&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; suppressMessages(print(ggplot(diamonds,  aes(x=price)) + geom_histogram()))&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; sessionInfo()&#xD;&#xA;R version 3.2.0 Patched (2015-05-08 r68348)&#xD;&#xA;Platform: x86_64-apple-darwin10.8.0 (64-bit)&#xD;&#xA;Running under: OS X 10.6.8 (Snow Leopard)&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA;[ 1 ] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.1&#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] labeling_0.3     MASS_7.3-40      colorspace_1.2-6 scales_0.2.4     magrittr_1.5     plyr_1.8.1      &#xD;&#xA; [ 7 ] tools_3.2.0      gtable_0.1.2     reshape2_1.4.1   Rcpp_0.11.5      stringi_0.4-1    grid_3.2.0      &#xD;&#xA;[ 13 ] stringr_1.0.0    digest_0.6.8     proto_0.3-10     munsell_0.4.2   &#xD;&#xA;```&#xD;&#xA;I'll try to get some time in the next few days to hunt down exactly where the bug is (in R 3.2.0,  or something which changed in R 3.2.0 which exposed a bug in ggplot2). In the meantime,  I do not have a workaround." />
      <Message Id="101913131" ParentId="1101" UserId="463252" Date="05/14/2015 05:05:59" Content="I've narrowed down the problem,  though I have not completely isolated it. However,  I do know that it is not a bug in ggplot. The problem is in `plyr:::loop_apply`. Here is some code which demonstrates that:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;proto&quot;)&#xD;&#xA;&#xD;&#xA;mg &lt;- function(i=NULL) { &#xD;&#xA;  DF &lt;- transform(mtcars,  x=mpg)&#xD;&#xA;  sb &lt;- stat_bin()&#xD;&#xA;  sb$stat$informed &lt;- FALSE&#xD;&#xA;  sb$stat$calculate(data = DF,  &#xD;&#xA;                    scales=list(x=scale_x_continuous(),  &#xD;&#xA;                                y=scale_y_continuous()))&#xD;&#xA;  invisible(NULL)&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;mg()&#xD;&#xA;suppressMessages(mg())&#xD;&#xA;plyr:::loop_apply(1,  mg)&#xD;&#xA;suppressMessages(plyr:::loop_apply(1,  mg))&#xD;&#xA;plyr:::loop_apply(1,  function(i) suppressMessages(mg(i)))&#xD;&#xA;lapply(seq_len(1),  mg)&#xD;&#xA;suppressMessages(lapply(seq_len(1),  mg))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;the output of which is&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;&gt; mg()&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;&gt; suppressMessages(mg())&#xD;&#xA;&gt; plyr:::loop_apply(1,  mg)&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;[ [ 1 ] ]&#xD;&#xA;NULL&#xD;&#xA;&#xD;&#xA;&gt; suppressMessages(plyr:::loop_apply(1,  mg))&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;[ [ 1 ] ]&#xD;&#xA;NULL&#xD;&#xA;&#xD;&#xA;&gt; plyr:::loop_apply(1,  function(i) suppressMessages(mg(i)))&#xD;&#xA;[ [ 1 ] ]&#xD;&#xA;NULL&#xD;&#xA;&#xD;&#xA;&gt; lapply(seq_len(1),  mg)&#xD;&#xA;stat_bin: binwidth defaulted to range/30. Use 'binwidth = x' to adjust this.&#xD;&#xA;[ [ 1 ] ]&#xD;&#xA;NULL&#xD;&#xA;&#xD;&#xA;&gt; suppressMessages(lapply(seq_len(1),  mg))&#xD;&#xA;[ [ 1 ] ]&#xD;&#xA;NULL&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I will shortly be filing a bug on plyr and reference this." />
      <Message Id="109355606" ParentId="1101" UserId="2998956" Date="06/05/2015 16:33:29" Content="[ This ](https://github.com/hadley/plyr/commit/3256bb524dbe04982ad54300057dd1e1bf852906) fix for [ plyr ](https://github.com/hadley/plyr/issues/256#event-323508131) resolves the ggplot2 issue I was having. Thanks @BrianDiggs and @hadley!" />
    </Messages>
  </Topic>
  <Topic Id="1102" Title="Wrap datasets in tbl_df">
    <Messages>
      <Message Id="0" ParentId="1102" UserId="4196" Date="05/11/2015 13:46:20" Content="" />
      <Message Id="112791801" ParentId="1102" UserId="4196" Date="06/17/2015 13:02:55" Content="Closed in 72122706756d1bcc3eb8f21f2c2381936f7da3d8" />
    </Messages>
  </Topic>
  <Topic Id="1103" Title="Semi-transparent borders around bars not consistent">
    <Messages>
      <Message Id="0" ParentId="1103" UserId="463252" Date="05/12/2015 03:44:00" Content="# Summary&#xD;&#xA;&#xD;&#xA;The algorithms for drawing the lines around bars in `geom_bar` assume that the color is completely opaque and can lead to different colors due to overplotting when semi-transparent.&#xD;&#xA;&#xD;&#xA;# Example&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;library(&quot;ggplot2&quot;)&#xD;&#xA;library(&quot;scales&quot;)&#xD;&#xA;ggplot(mtcars[ 1:8,  ],  aes(x = factor(carb),  y = disp)) +&#xD;&#xA;geom_bar(stat = &quot;identity&quot;,  lwd = 7,  colour = alpha(&quot;white&quot;,  0.5)) +&#xD;&#xA;theme(panel.background = element_rect(fill = &quot;lightblue&quot;))&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![  ](https://cloud.githubusercontent.com/assets/463252/7579755/bc780682-f81d-11e4-92b2-ecf9bde65461.png)&#xD;&#xA;&#xD;&#xA;The borders are 50% transparent white and absurdly large to make the effects more obvious. The borders between the stacked bars are not all the same color.&#xD;&#xA;&#xD;&#xA;# Discussion&#xD;&#xA;&#xD;&#xA;Fixing this completely would be very hard,  especially the double plotting that occurs at the corners. I submit this bug more to mark it as a known issue than to get (or submit) a fix. What I might suggest is a comment in the details section of `geom_bar` such as&#xD;&#xA;&#xD;&#xA;&gt; Borders around bars (defined by the `colour` aesthetic) are drawn assuming a completely opaque color. A semi-transparent color can be used,  but the effects will not be as expected.&#xD;&#xA;" />
      <Message Id="110383115" ParentId="1103" UserId="4196" Date="06/09/2015 14:37:13" Content="Hmmm,  I'm happy to improve the docs,  but I'm not loving that explanation - the results are exactly as I expect." />
      <Message Id="112209312" ParentId="1103" UserId="4196" Date="06/15/2015 20:57:18" Content="I'm going to close for now. Feel free to re-open (or do a PR) if you think of a good wording." />
    </Messages>
  </Topic>
  <Topic Id="1104" Title="projections of world map seem buggy">
    <Messages>
      <Message Id="0" ParentId="1104" UserId="50784" Date="05/12/2015 04:20:25" Content="Applying projections to world maps via `coord_map()` seem to result in buggy images. I am using ggplot 1.0.1 on R 3.2.0.&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;world &lt;- map_data(&quot;world&quot;)&#xD;&#xA;worldmap &lt;- ggplot(world,  aes(x=long,  y=lat,  group=group)) +&#xD;&#xA;  geom_path() +&#xD;&#xA;  scale_y_continuous(breaks=(-2:2) * 30) +&#xD;&#xA;  scale_x_continuous(breaks=(-4:4) * 45) &#xD;&#xA;&#xD;&#xA;worldmap + coord_map()&#xD;&#xA;worldmap + coord_map(&quot;sinusoidal&quot;)  &#xD;&#xA;worldmap + coord_map(&quot;cylindrical&quot;)  &#xD;&#xA;````&#xD;&#xA;&#xD;&#xA;![ ggplot-mercator ](https://cloud.githubusercontent.com/assets/50784/7580110/5b7cddb6-f823-11e4-8872-a022ca9ebe22.png)&#xD;&#xA;![ ggplot-cylindrical ](https://cloud.githubusercontent.com/assets/50784/7580105/5752dc5e-f823-11e4-886d-e3bc0c1ec0e4.png)&#xD;&#xA;![ ggplot-cylindrical ](https://cloud.githubusercontent.com/assets/50784/7580112/5fd1b7b0-f823-11e4-987a-b71cb278e028.png)&#xD;&#xA;" />
      <Message Id="101124824" ParentId="1104" UserId="50784" Date="05/12/2015 04:21:22" Content="For reference,  I first reported this on the ggplot2 mailing list: https://groups.google.com/forum/#!topic/ggplot2/eucbTNKAyYE" />
      <Message Id="111598403" ParentId="1104" UserId="4196" Date="06/12/2015 19:50:42" Content="@hrbrmstr @andysouth do either of you know the right invocation in right to break the lines that go &quot;behind&quot; the globe?" />
      <Message Id="111863470" ParentId="1104" UserId="509878" Date="06/14/2015 18:40:47" Content="Aye. I'll have time later today to show examples." />
      <Message Id="112082652" ParentId="1104" UserId="509878" Date="06/15/2015 14:10:12" Content="If you take a look at `range(world$long)` — which results in `c(-179.9572,  190.2908)` — the points &gt; 180° cause issues with the polygon rendering. Just specify the `xlim` in `coord_map` and it won't distort the polygons. You do lose a bit on the edge (read further for a different solution).&#xD;&#xA; &#xD;&#xA;    library(gridExtra)&#xD;&#xA;&#xD;&#xA;    m1 &lt;- worldmap + coord_map(xlim=c(-180, 180))&#xD;&#xA;    m2 &lt;- worldmap + coord_map(&quot;sinusoidal&quot;,  xlim=c(-180, 180))  &#xD;&#xA;    m3 &lt;- worldmap + coord_map(&quot;cylindrical&quot;,  xlim=c(-180, 180)) &#xD;&#xA;&#xD;&#xA;    grid.arrange(m1,  m2,  m3,  ncol=1)&#xD;&#xA;&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/509878/8160833/b3acafc4-1340-11e5-84b8-9bdec974e779.png)&#xD;&#xA;&#xD;&#xA;If you use a better map data source (and are willing to forsake Antarctica,  which you really should unless you absolutely need it) you can use `rgdal` to read in Natural Earth maps like this one where `range(nat_map$long)` is sanely `c(-180,  180)`&#xD;&#xA;&#xD;&#xA;    library(httr)&#xD;&#xA;    library(R.utils)&#xD;&#xA;    library(rgdal)&#xD;&#xA;&#xD;&#xA;    GET(&quot;https://github.com/nvkelso/natural-earth-vector/blob/master/geojson/ne_50m_admin_0_countries.geojson.gz?raw=true&quot;, &#xD;&#xA;        write_disk(&quot;world.gz&quot;))&#xD;&#xA;    gunzip(&quot;world.gz&quot;)&#xD;&#xA;&#xD;&#xA;    nat &lt;- readOGR(&quot;world&quot;,  &quot;OGRGeoJSON&quot;)&#xD;&#xA;    nat_map &lt;- fortify(nat)&#xD;&#xA;&#xD;&#xA;    gg &lt;- ggplot()&#xD;&#xA;    gg &lt;- gg + geom_map(data=nat_map,  map=nat_map, &#xD;&#xA;                        aes(x=long,  y=lat,  map_id=id))&#xD;&#xA;&#xD;&#xA;    g1 &lt;- gg + coord_map(ylim=c(-60,  80))&#xD;&#xA;    g2 &lt;- gg + coord_map(&quot;sinusoidal&quot;,  ylim=c(-60,  80))&#xD;&#xA;    g3 &lt;- gg + coord_map(&quot;cylindrical&quot;,  ylim=c(-60,  80))&#xD;&#xA;&#xD;&#xA;    grid.arrange(g1,  g2,  g3,  ncol=1)&#xD;&#xA;&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/509878/8161553/ed14d084-1345-11e5-971b-2479d396c7dd.png)&#xD;&#xA;&#xD;&#xA;(it's really mapproject that's causing the issues. values outside -180:180 or -80:80 cause it to produce `NA`'s IIRC)&#xD;&#xA;&#xD;&#xA;Might I offer the use of at least `rectangular` for a world map (someone really needs to add Winkel Tripel to `mapproject` since I hate projecting first then `ggplot`ing:&#xD;&#xA;&#xD;&#xA;    g + coord_map(&quot;rectangular&quot;,  lat0=0,  ylim=c(-60,  80))&#xD;&#xA;&#xD;&#xA;![ image ](https://cloud.githubusercontent.com/assets/509878/8161650/79596244-1346-11e5-84b9-e4fa76c5b29b.png)&#xD;&#xA;&#xD;&#xA;I realize you were probably just showing the other ones for example (i.e. the issue occurs across projections and it's easiest to show 0 parameter `mapproject` examples ;-))" />
      <Message Id="112143605" ParentId="1104" UserId="50784" Date="06/15/2015 17:16:15" Content="@hrbrmstr Thanks for the thorough answer. Is there any legitimate reason for a map to have longitude outside of (-180,  180)? Does it make sense for ggplot2 to emit a warning in this case?" />
      <Message Id="112153488" ParentId="1104" UserId="509878" Date="06/15/2015 17:57:39" Content="(being verbose for Google &amp; posterity)&#xD;&#xA;&#xD;&#xA;On Earth,  latitude measurements range from 90°N,  to zero at the equator,  to 90°S. Longitude expresses the distance of a point east or west,  relative to the Prime meridian which has a longitude of 0°. Places located east of Prime may have longitude angles up to 180°E; places located west of Prime may have longitudes up to 180°W.&#xD;&#xA;&#xD;&#xA;That's a long way of saying `latitude &lt;- c(-90,  90)` &amp; `longitude &lt;- c(-180,  180)`.&#xD;&#xA;&#xD;&#xA;In theory,  `coord_map` _could_ do what you're saying. Even the lat/long cartographic coordinate systems on other planets (which `ggplot` can plot!). So at least tossing a warning might be in order (again,  in `coord_map`). &#xD;&#xA;&#xD;&#xA;Interestingly enough,  when I take a look at the [ source data ](https://www.evl.uic.edu/pape/data/WDB/) for the `maps` package (which is ultimately what `map_data` is using) their latitude range is `c(-85.47028 , 83.62361)` and their longitude range is `c(-544.0886,  180.0000)` which leads me to believe some of the original data was in 0-360° measurements (at least for longitude). There are actually 1, 843 instances when the longitude value dips below 180. All those errors seem to be in `asia-cil.txt` in the original data. None of that explains how the converted data into R has the values it does.&#xD;&#xA;&#xD;&#xA;Even `world2` (another base R map source) has:&#xD;&#xA;&#xD;&#xA;    w2 &lt;- map(&quot;world2&quot;,  plot=FALSE)&#xD;&#xA;    range(w2$x,  na.rm=TRUE)&#xD;&#xA;    &#xD;&#xA;    ## [ 1 ]  -5.072266 369.988892&#xD;&#xA;&#xD;&#xA;Which is clearly outside the _&quot;This map is based on latitudes [ 0,  360)&quot;_ in the package manual.&#xD;&#xA;&#xD;&#xA;@hadley is there some r-project lore that might explain some of this?&#xD;&#xA;" />
      <Message Id="112176188" ParentId="1104" UserId="4196" Date="06/15/2015 19:06:34" Content="@hrbrmstr I think the maps package came from old S-plus code. I'd rather find better modern sources of data than try and work around problems in the maps package." />
      <Message Id="112176693" ParentId="1104" UserId="509878" Date="06/15/2015 19:08:10" Content="Agreed (hence my willingness to work on `naturalearth`).&#xA;&#xA;On Mon,  Jun 15,  2015 at 3:06 PM,  Hadley Wickham &lt;notifications@github.com&gt;&#xA;wrote:&#xA;&#xA;&gt; @hrbrmstr &lt;https://github.com/hrbrmstr&gt; I think the maps package came&#xA;&gt; from old S-plus code. I'd rather find better modern sources of data than&#xA;&gt; try and work around problems in the maps package.&#xA;&gt;&#xA;&gt; —&#xA;&gt; Reply to this email directly or view it on GitHub&#xA;&gt; &lt;https://github.com/hadley/ggplot2/issues/1104#issuecomment-112176188&gt;.&#xA;&gt;&#xA;" />
      <Message Id="112204341" ParentId="1104" UserId="4196" Date="06/15/2015 20:41:31" Content="I'm going to close this and we'll work on better data sources elsewhere" />
    </Messages>
  </Topic>
  <Topic Id="1105" Title="Error in plot of diamonds from the ggplot2-book">
    <Messages>
      <Message Id="0" ParentId="1105" UserId="856785" Date="05/13/2015 22:10:35" Content="Ran into this error running the code in the ggplot2-book&#xD;&#xA;&#xD;&#xA;&gt; library(&quot;ggplot2&quot;)&#xD;&#xA;&gt; library(&quot;dplyr&quot;)&#xD;&#xA;&#xD;&#xA;&gt;Attaching package: ‘dplyr’&#xD;&#xA;&#xD;&#xA;&gt;The following object is masked from ‘package:stats’:&#xD;&#xA;&#xD;&#xA;&gt;    filter&#xD;&#xA;&#xD;&#xA;&gt;The following objects are masked from ‘package:base’:&#xD;&#xA;&#xD;&#xA;&gt;    intersect,  setdiff,  setequal,  union&#xD;&#xA;&#xD;&#xA;&gt; depth_dist &lt;- ggplot(diamonds,  aes(depth)) + xlim(58,  68)&#xD;&#xA;&gt; depth_dist + &#xD;&#xA;&gt;+     geom_histogram(aes(y = ..density..),  binwidth = 0.1) +&#xD;&#xA;&gt;+     facet_grid(cut ~ .)&#xD;&#xA;&gt;Error: subscript out of bounds&#xD;&#xA;&gt;In addition: Warning message:&#xD;&#xA;&gt;In loop_apply(n,  do.ply) :&#xD;&#xA;&gt;  position_stack requires constant width: output may be incorrect&#xD;&#xA;&gt; devtools::session_info()&#xD;&#xA;&gt;Session info --------------------------------------------------&#xD;&#xA; &gt;setting  value                       &#xD;&#xA; &gt;version  R version 3.1.3 (2015-03-09)&#xD;&#xA; &gt;system   x86_64,  linux-gnu           &#xD;&#xA; &gt;ui       RStudio (0.98.1103)         &#xD;&#xA; &gt;language (EN)                        &#xD;&#xA; &gt;collate  en_US.UTF-8                 &#xD;&#xA;&gt; tz       America/New_York            &#xD;&#xA;&#xD;&#xA;&gt;Packages ------------------------------------------------------&#xD;&#xA; &gt;package    * version  date       source        &#xD;&#xA; &gt;assertthat   0.1      2013-12-06 CRAN (R 3.1.3)&#xD;&#xA; &gt;bitops       1.0-6    2013-08-17 CRAN (R 3.1.3)&#xD;&#xA; &gt;colorspace   1.2-6    2015-03-11 CRAN (R 3.1.3)&#xD;&#xA; &gt;DBI          0.3.1    2014-09-24 CRAN (R 3.1.3)&#xD;&#xA; &gt;devtools     1.8.0    2015-05-09 CRAN (R 3.1.3)&#xD;&#xA; &gt;digest       0.6.8    2014-12-31 CRAN (R 3.1.3)&#xD;&#xA; &gt;dplyr      * 0.4.1    2015-01-14 CRAN (R 3.1.3)&#xD;&#xA; &gt;ggplot2    * 1.0.1    2015-03-17 CRAN (R 3.1.3)&#xD;&#xA; &gt;git2r        0.10.1   2015-05-07 CRAN (R 3.1.3)&#xD;&#xA; &gt;gtable       0.1.2    2012-12-05 CRAN (R 3.1.3)&#xD;&#xA; &gt;labeling     0.3      2014-08-23 CRAN (R 3.1.3)&#xD;&#xA; &gt;magrittr     1.5      2014-11-22 CRAN (R 3.1.3)&#xD;&#xA; &gt;MASS         7.3-40   2015-03-21 CRAN (R 3.1.3)&#xD;&#xA; &gt;memoise      0.2.1    2014-04-22 CRAN (R 3.1.3)&#xD;&#xA; &gt;munsell      0.4.2    2013-07-11 CRAN (R 3.1.3)&#xD;&#xA; &gt;plyr         1.8.2    2015-04-21 CRAN (R 3.1.3)&#xD;&#xA; &gt;proto        0.3-10   2012-12-22 CRAN (R 3.1.3)&#xD;&#xA; &gt;Rcpp         0.11.6   2015-05-01 CRAN (R 3.1.3)&#xD;&#xA; &gt;RCurl        1.95-4.6 2015-04-24 CRAN (R 3.1.3)&#xD;&#xA; &gt;reshape2     1.4.1    2014-12-06 CRAN (R 3.1.3)&#xD;&#xA; &gt;rversions    1.0.0    2015-04-22 CRAN (R 3.1.3)&#xD;&#xA; &gt;scales       0.2.4    2014-04-22 CRAN (R 3.1.3)&#xD;&#xA; &gt;stringi      0.4-1    2014-12-14 CRAN (R 3.1.3)&#xD;&#xA; &gt;stringr      1.0.0    2015-04-30 CRAN (R 3.1.3)&#xD;&#xA; &gt;XML          3.98-1.1 2013-06-20 CRAN (R 3.1.3)&#xD;&#xA; &gt;yaml         2.1.13   2014-06-12 CRAN (R 3.1.3)" />
      <Message Id="102008305" ParentId="1105" UserId="4196" Date="05/14/2015 11:30:06" Content="I suspect you have an out-of-date version of a ggplot2 dependency. Could you please run `devtools::package_deps(&quot;ggplot2&quot;)` ?" />
      <Message Id="102141205" ParentId="1105" UserId="856785" Date="05/14/2015 19:14:57" Content="Interesting,  that seemed to fix it.  For future users,  I'm running a fresh install of Fedora 21 Workstation,  running the above command fixes the error.&#xD;&#xA;&#xD;&#xA;Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1106" Title="Add geom_smoothl1">
    <Messages>
      <Message Id="0" ParentId="1106" UserId="4196" Date="05/14/2015 14:18:49" Content="Using l1tf package" />
    </Messages>
  </Topic>
  <Topic Id="1107" Title="Import and re-export alpha">
    <Messages>
      <Message Id="0" ParentId="1107" UserId="4196" Date="05/15/2015 14:07:49" Content="" />
    </Messages>
  </Topic>
  <Topic Id="1108" Title="Trial run of removing/transforming qplot examples in ggplot2 documentation ">
    <Messages>
      <Message Id="0" ParentId="1108" UserId="509878" Date="05/18/2015 13:37:14" Content="Changed `qplot` examples to regular ggplot calls in the documentation of 5 source files and also made the spaces around &quot;=&quot; uniform in the examples in those files. I really thought about changing `plyr` usage into `dplyr` calls at the same time but I thought it best to keep the edits focused. If this ends up working OK,  I'll make quick work of the rest of it." />
      <Message Id="103083701" ParentId="1108" UserId="4196" Date="05/18/2015 14:46:30" Content="Looks good. This does seem like a good opportunity to clean up the style in the examples" />
      <Message Id="103084149" ParentId="1108" UserId="509878" Date="05/18/2015 14:48:40" Content="I'll make those changes to those 5 and use the style moving forward.&#xA;&#xA;On Mon,  May 18,  2015 at 10:46 AM,  Hadley Wickham &lt;notifications@github.com&gt;&#xA;wrote:&#xA;&#xA;&gt; Looks good. This does seem like a good opportunity to clean up the style&#xA;&gt; in the examples&#xA;&gt;&#xA;&gt; —&#xA;&gt; Reply to this email directly or view it on GitHub&#xA;&gt; &lt;https://github.com/hadley/ggplot2/pull/1108#issuecomment-103083701&gt;.&#xA;&gt;&#xA;" />
      <Message Id="111253865" ParentId="1108" UserId="4196" Date="06/11/2015 19:30:18" Content="Are you still interested in doing this? I'm in a good place to review and merge PRs at the moment (and should be for ~2 weeks)" />
      <Message Id="111254089" ParentId="1108" UserId="509878" Date="06/11/2015 19:31:23" Content="Roger that. I have (IIRC) 3 functions left.&#xA;&#xA;On Thu,  Jun 11,  2015 at 3:30 PM,  Hadley Wickham &lt;notifications@github.com&gt;&#xA;wrote:&#xA;&#xA;&gt; Are you still interested in doing this? I'm in a good place to review and&#xA;&gt; merge PRs at the moment (and should be for ~2 weeks)&#xA;&gt;&#xA;&gt; —&#xA;&gt; Reply to this email directly or view it on GitHub&#xA;&gt; &lt;https://github.com/hadley/ggplot2/pull/1108#issuecomment-111253865&gt;.&#xA;&gt;&#xA;" />
      <Message Id="111255464" ParentId="1108" UserId="509878" Date="06/11/2015 19:38:21" Content="There are only a couple left. I'll try to get to them today." />
    </Messages>
  </Topic>
  <Topic Id="1109" Title="Tweak position of categorical data">
    <Messages>
      <Message Id="0" ParentId="1109" UserId="1139464" Date="05/18/2015 19:13:21" Content="For the following example&#xD;&#xA;&#xD;&#xA;    x &lt;- c(1, 3, 2, 5)&#xD;&#xA;    y &lt;- c(&quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;c&quot;)&#xD;&#xA;    qplot(x,  y)&#xD;&#xA;How do I move all points a bit downward? I can use `position_jitter`,  but that's random. I think the best solution is to program a customized version of sth like `position_jitter`. However after reading source code&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/position-jitter.r&#xD;&#xA;https://github.com/hadley/ggplot2/blob/master/R/position-.r&#xD;&#xA;I am still not clear how to achieve this." />
      <Message Id="110938142" ParentId="1109" UserId="4196" Date="06/10/2015 22:41:46" Content="Maybe call it position nudge?" />
    </Messages>
  </Topic>
  <Topic Id="1110" Title="%+% only works if it's the first argument">
    <Messages>
      <Message Id="0" ParentId="1110" UserId="5630997" Date="05/22/2015 15:44:49" Content="I don't know if this a bug or a deliberate design decision,  but `%+%` only works if it's the first argument.  To show this in an example,  say I'm plotting 5 straight lines,  and then I want to omit 2 of them:&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    library(dplyr)&#xD;&#xA;    &#xD;&#xA;    # Sample data: lines&#xD;&#xA;    df &lt;- data.frame(&#xD;&#xA;        x = rep(1:20,  each = 5), &#xD;&#xA;        grouping = factor(rep(1:5,  20))&#xD;&#xA;        )&#xD;&#xA;    df &lt;- within(df,  y &lt;- x * as.numeric(grouping))&#xD;&#xA;    &#xD;&#xA;    # Plot the raw data&#xD;&#xA;    (p1 &lt;- qplot(data = df,  x = x,  y = y,  color = grouping,  geom = &quot;line&quot;))&#xD;&#xA;    &#xD;&#xA;    # Subset out 2 of the 5 lines.  This works:&#xD;&#xA;    p1 %+% filter(df,  grouping != 3,  grouping != 4) +&#xD;&#xA;      scale_color_brewer(type = &quot;div&quot;) %+%&#xD;&#xA;    &#xD;&#xA;    # But this doesn't.  Seems like this should throw an error,  at minimum&#xD;&#xA;    p1 + scale_color_brewer(type = &quot;div&quot;) %+%&#xD;&#xA;      filter(df,  grouping != 3,  grouping != 4)&#xD;&#xA;&#xD;&#xA;If this isn't a bug,  it does seem like there should at least be a warning when the user puts in a `%+%` command that ggplot ignores,  so that way I know which data the plot is using in cases where it might not be obvious.&#xD;&#xA;&#xD;&#xA;Thanks!  Please let me know if I can help in any other way." />
      <Message Id="110937859" ParentId="1110" UserId="4196" Date="06/10/2015 22:39:48" Content="This is unfortunately a consequence of operator precedence in R - you'll need to use brackets." />
    </Messages>
  </Topic>
  <Topic Id="1111" Title="add shape aes to geom_dotplot">
    <Messages>
      <Message Id="0" ParentId="1111" UserId="5372770" Date="05/27/2015 09:20:25" Content="`geom_dotplot` does not currently seem to accept the aesthetic mapping `shape = `.&#xD;&#xA;&#xD;&#xA;Would be nice to have.&#xD;&#xA;&#xD;&#xA;Also see this question on SE: http://stackoverflow.com/questions/15099430/how-to-change-shape-of-dotplot" />
      <Message Id="110937773" ParentId="1111" UserId="4196" Date="06/10/2015 22:39:13" Content="Unfortunately it's not possible to do this because the underlying drawing is done with `circleGrob()`." />
    </Messages>
  </Topic>
  <Topic Id="1112" Title="Option for symmetry in geom_violin">
    <Messages>
      <Message Id="0" ParentId="1112" UserId="3721007" Date="05/28/2015 13:36:36" Content="The beanplot package outputs a similar charts to the violin chart,  but it has the argument &quot;side&quot;  where you can choose to plot the left,  right or both sides of the density.  The geom_violin defaults to plotting a symmetric density,  and I do not believe there is an argument similar to beanplots &quot;side&quot;&#xD;&#xA;&#xD;&#xA;An example is given as the first comment on this SO question:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/26214471/how-to-make-beanplot-and-boxplot-in-the-same-chart" />
    </Messages>
  </Topic>
  <Topic Id="1113" Title="Add 3D capabilities">
    <Messages>
      <Message Id="0" ParentId="1113" UserId="291575" Date="05/29/2015 15:21:48" Content="For techniques like spectral decomposition (PCA,  diffusion maps,  …),  the actual units on the axes are less important than visual closeness and separation.&#xD;&#xA;&#xD;&#xA;A 3D→2D projection of three principal/diffusion components is therefore desirable and more useful than a plot matrix (like ggpairs)" />
      <Message Id="106849081" ParentId="1113" UserId="4196" Date="05/29/2015 15:35:50" Content="Unfortunately this is outside the scope of ggplot2" />
      <Message Id="106871364" ParentId="1113" UserId="291575" Date="05/29/2015 17:01:45" Content="and why,  if i may ask?" />
    </Messages>
  </Topic>
  <Topic Id="1114" Title="Feature/kmcurve">
    <Messages>
      <Message Id="0" ParentId="1114" UserId="5464185" Date="06/04/2015 16:30:06" Content="Fixes #1080 " />
    </Messages>
  </Topic>
  <Topic Id="1115" Title="How to draw 3D plot by only using ggplot2?">
    <Messages>
      <Message Id="0" ParentId="1115" UserId="4413228" Date="06/05/2015 15:49:18" Content="How to draw 3D plot by only using ggplot2?" />
      <Message Id="109415954" ParentId="1115" UserId="4196" Date="06/05/2015 19:38:52" Content="You can't." />
    </Messages>
  </Topic>
  <Topic Id="1116" Title="Add width and height parameters to geom_jitter">
    <Messages>
      <Message Id="0" ParentId="1116" UserId="4196" Date="06/05/2015 16:15:29" Content="To make it easier to control without using verbose position adjustment" />
    </Messages>
  </Topic>
  <Topic Id="1117" Title="ggplot doesn't show in RStudio when mixed with base plot">
    <Messages>
      <Message Id="0" ParentId="1117" UserId="1602504" Date="06/09/2015 13:21:49" Content="Submitting ggplot and base plot in a single batch (using multiple lines and ctrl + Enter or Source or within a function) causes the ggplot window to be blank.  If the theme is not modified,  the ggplot shows fine.&#xD;&#xA;&#xD;&#xA;To reproduce:&#xD;&#xA;Within R studio,  place the following code in a new file and Source it.&#xD;&#xA;```&#xD;&#xA;ggplot(cars, aes(speed, dist)) + geom_point() +&#xD;&#xA;theme(legend.title=element_blank());&#xD;&#xA;plot(cars)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Expected Results:&#xD;&#xA;Both plots show in the Plots window&#xD;&#xA;&#xD;&#xA;Actual Results:&#xD;&#xA;The second (base) plot shows,  but the first plot (ggplot) is blank.&#xD;&#xA;&#xD;&#xA;Environment:                     &#xD;&#xA;```&#xD;&#xA;platform       x86_64-apple-darwin13.4.0   &#xD;&#xA;arch           x86_64                      &#xD;&#xA;os             darwin13.4.0                &#xD;&#xA;system         x86_64,  darwin13.4.0        &#xD;&#xA;status                                     &#xD;&#xA;major          3                           &#xD;&#xA;minor          2.0                         &#xD;&#xA;year           2015                        &#xD;&#xA;month          04                          &#xD;&#xA;day            16                          &#xD;&#xA;svn rev        68180                       &#xD;&#xA;language       R                           &#xD;&#xA;version.string R version 3.2.0 (2015-04-16)&#xD;&#xA;nickname       Full of Ingredients     &#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="110381203" ParentId="1117" UserId="4196" Date="06/09/2015 14:33:59" Content="Works for me. You might need to upgrade your RStudio" />
    </Messages>
  </Topic>
  <Topic Id="1118" Title="Example of stat_bin2d with a log-scaled axis">
    <Messages>
      <Message Id="0" ParentId="1118" UserId="229502" Date="06/10/2015 15:54:35" Content="I couldn't find an example of this anywhere,  and it took me an hour to figure out,  so I thought maybe it belonged in the documentation. I'm not sure if anyone else is trying to do this,  though.&#xD;&#xA;&#xD;&#xA;Here's the image that the added example generates:&#xD;&#xA;&#xD;&#xA;![ semilog ](https://cloud.githubusercontent.com/assets/229502/8087163/5a0a3cd4-0f67-11e5-97f4-9c8bbbcf8e25.png)&#xD;&#xA;&#xD;&#xA;And here's the current help page: &lt;http://docs.ggplot2.org/current/stat_bin2d.html&gt;" />
      <Message Id="111253656" ParentId="1118" UserId="4196" Date="06/11/2015 19:29:06" Content="Why not just use `scale_y_log10()` ?" />
      <Message Id="111541355" ParentId="1118" UserId="229502" Date="06/12/2015 16:18:27" Content="You're right,  this doesn't make sense on its own.  The issue I had is that I wanted to set explicit breaks for one dimension (x axis as date binned by month),  and so I had to also set the breaks for the other dimension,  because stat_bin2d requires that both dimensions of breaks be supplied the same way.  So you have to say `stat_bin2d(breaks=list(x = xbreaks,  y = ybreaks))`.  I could have avoided the whole issue if I could have said `stat_bin2d(breaks = list(x = xbreaks,  y = NA))`,  and had it generate its default breaks for the y axis.  Maybe I should throw out this documentation patch,  and write that functionality patch instead.  (or is there some other way I should have done it?)" />
      <Message Id="111765353" ParentId="1118" UserId="229502" Date="06/14/2015 00:21:30" Content="Take a look at https://github.com/hadley/ggplot2/pull/1126 instead?" />
    </Messages>
  </Topic>
  <Topic Id="1119" Title="Position dodge does not work in geom_point">
    <Messages>
      <Message Id="0" ParentId="1119" UserId="8529410" Date="06/11/2015 10:15:32" Content="Would you mind referring to the post in StackOverflow [ here ](http://stackoverflow.com/questions/30768312/dodge-points-in-point-char-with-ggplot2/30768450#30768450)?&#xD;&#xA;&#xD;&#xA;I tried to dodge the points,  but only horizontal dodge (`position_dodge(width=1)`) works,  the vertical dodge (`position_dodge(height=1)`) does not work.&#xD;&#xA;&#xD;&#xA;Thank you." />
    </Messages>
  </Topic>
  <Topic Id="1120" Title="Consider adding nudge params to geom_text?">
    <Messages>
      <Message Id="0" ParentId="1120" UserId="4196" Date="06/11/2015 19:06:16" Content="Since they're so frequently useful. Use same strategy as `geom_jitter()`" />
      <Message Id="112209120" ParentId="1120" UserId="4196" Date="06/15/2015 20:56:52" Content="Done 6bf7366766168e7dc281c278d32f7505b979061c" />
    </Messages>
  </Topic>
  <Topic Id="1121" Title="theme(validate=FALSE) means do not validate_element (clean)">
    <Messages>
      <Message Id="0" ParentId="1121" UserId="932850" Date="06/11/2015 21:13:28" Content="This is a cleaner version of https://github.com/hadley/ggplot2/pull/953#issuecomment-111270357" />
      <Message Id="113173652" ParentId="1121" UserId="4196" Date="06/18/2015 14:32:05" Content="@wch this seems like a reasonable strategy to me. Can you please confirm?" />
    </Messages>
  </Topic>
  <Topic Id="1122" Title="Call does not interrupt gracefully">
    <Messages>
      <Message Id="0" ParentId="1122" UserId="6893840" Date="06/11/2015 23:59:07" Content="This completes my tweet (https://twitter.com/gpyahm/status/608899296071684096).&#xD;&#xA;Here I have the luxury to be more verbose.&#xD;&#xA;&#xD;&#xA;During a school project I had to work with a moderately large dataset (data.table with approx. 2 million lines) and did some moderately complicated graphics with ggplot2. As I was still learning there was some sheer amount of trial and error and I often needed to interrupt a call. Working with RStudio,  it just hang for a couple of seconds and prompt me to terminate the R Session,  which I almost always did. When I didn't,  it just kept going and I grew impatient.&#xD;&#xA;&#xD;&#xA;This is a minimal example:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;d=data.frame(a=1:10000000, b=runif(10000000))&#xD;&#xA;ggplot(data=d)+aes(x=factor(1), y=b)+geom_boxplot()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;I suspect that the call that performs the statistical computing or the grid arrangement is never interrupted. It blocks the process and,  when it's finished (if so),  only the rendering is actually aborted.&#xD;&#xA;&#xD;&#xA;My sessionInfo() for reproducibilty :&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;R version 3.1.3 (2015-03-09)&#xD;&#xA;Platform: x86_64-unknown-linux-gnu (64-bit)&#xD;&#xA;Running under: Arch Linux&#xD;&#xA;&#xD;&#xA;locale:&#xD;&#xA; [ 1 ] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    &#xD;&#xA; [ 5 ] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=en_US.UTF-8       LC_NAME=C                 &#xD;&#xA; [ 9 ] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       &#xD;&#xA;&#xD;&#xA;attached base packages:&#xD;&#xA;[ 1 ] stats     graphics  grDevices utils     datasets  methods   base     &#xD;&#xA;&#xD;&#xA;other attached packages:&#xD;&#xA;[ 1 ] ggplot2_1.0.1   rmarkdown_0.6.1 vimcom_1.2-1    devtools_1.7.0 &#xD;&#xA;&#xD;&#xA;loaded via a namespace (and not attached):&#xD;&#xA; [ 1 ] colorspace_1.2-6 digest_0.6.8     grid_3.1.3       gtable_0.1.2     htmltools_0.2.6  MASS_7.3-39     &#xD;&#xA; [ 7 ] munsell_0.4.2    plyr_1.8.1       proto_0.3-10     Rcpp_0.11.5      reshape2_1.4.1   scales_0.2.4    &#xD;&#xA;[ 13 ] stringr_0.6.2    tools_3.1.3  &#xD;&#xA;```" />
      <Message Id="111479142" ParentId="1122" UserId="4196" Date="06/12/2015 12:46:19" Content="Hmmm,  when I run that code it does take a while,  but I push escape,  I get returned to the console right away. Maybe you have an older version of rstudio?" />
    </Messages>
  </Topic>
  <Topic Id="1123" Title="Finished removing qplot">
    <Messages>
      <Message Id="0" ParentId="1123" UserId="509878" Date="06/12/2015 01:44:57" Content="The only places `qplot` remains are in:&#xD;&#xA;&#xD;&#xA;- `quick-plot.r`&#xD;&#xA;- `translate-qplot-base.r`&#xD;&#xA;- `translate-qplot-ggplot.r`&#xD;&#xA;- `translate-qplot-gpl.r`&#xD;&#xA;- `translate-qplot-lattice.r`" />
      <Message Id="111322556" ParentId="1123" UserId="509878" Date="06/12/2015 01:45:52" Content="I also tried to clean up spacing around `=` when those were noticed and there were some errors in the examples that I also fixed." />
      <Message Id="111481836" ParentId="1123" UserId="4196" Date="06/12/2015 12:53:16" Content="Thanks! This looks great. Would you mind merging/rebasing and adding a bullet to NEWS?" />
      <Message Id="111482300" ParentId="1123" UserId="509878" Date="06/12/2015 12:54:15" Content="will do.&#xA;&#xA;On Fri,  Jun 12,  2015 at 8:53 AM,  Hadley Wickham &lt;notifications@github.com&gt;&#xA;wrote:&#xA;&#xA;&gt; Thanks! This looks great. Would you mind merging/rebasing and adding a&#xA;&gt; bullet to NEWS?&#xA;&gt;&#xA;&gt; —&#xA;&gt; Reply to this email directly or view it on GitHub&#xA;&gt; &lt;https://github.com/hadley/ggplot2/pull/1123#issuecomment-111481836&gt;.&#xA;&gt;&#xA;" />
      <Message Id="111593513" ParentId="1123" UserId="4196" Date="06/12/2015 19:19:34" Content="Actually I'll merge myself since I need to make some other changes to the examples." />
      <Message Id="111594320" ParentId="1123" UserId="509878" Date="06/12/2015 19:24:34" Content="Roger that. If possible,  please keep in the change I made to the US map&#xA;plot (added an albers projection). Every new R user wanting to make a US&#xA;map uses that ggplot documentation example and produces horrible mercator&#xA;US maps from it. At least now future US maps from new R folk might use a&#xA;proper projection ;-)&#xA;&#xA;On Fri,  Jun 12,  2015 at 3:19 PM,  Hadley Wickham &lt;notifications@github.com&gt;&#xA;wrote:&#xA;&#xA;&gt; Actually I'll merge myself since I need to make some other changes to the&#xA;&gt; examples.&#xA;&gt;&#xA;&gt; —&#xA;&gt; Reply to this email directly or view it on GitHub&#xA;&gt; &lt;https://github.com/hadley/ggplot2/pull/1123#issuecomment-111593513&gt;.&#xA;&gt;&#xA;" />
      <Message Id="111594700" ParentId="1123" UserId="4196" Date="06/12/2015 19:27:04" Content="Will do! Also any interest in this? https://github.com/AndySouth/rworldmap/issues/4" />
    </Messages>
  </Topic>
  <Topic Id="1124" Title="100% CPU with scale_x_discrete versus xlab">
    <Messages>
      <Message Id="0" ParentId="1124" UserId="8357974" Date="06/12/2015 15:10:11" Content="This is a geom_point chart with about 200 points. R would run without stopping when I had on the chart:&#xD;&#xA;&#xD;&#xA;`scale_x_discrete(&quot;x label&quot;)   +   scale_y_discrete(&quot;y label&quot;)`&#xD;&#xA;&#xD;&#xA;But it finishes quickly with:&#xD;&#xA;&#xD;&#xA;`xlab(&quot;x label&quot;) +  ylab(&quot;y label&quot;)`&#xD;&#xA;" />
      <Message Id="111540593" ParentId="1124" UserId="4196" Date="06/12/2015 16:16:08" Content="Probably because it has to generate so many labels..." />
    </Messages>
  </Topic>
  <Topic Id="1125" Title="Grouping in geom_crossbar is messed up">
    <Messages>
      <Message Id="0" ParentId="1125" UserId="4196" Date="06/12/2015 20:36:07" Content="" />
    </Messages>
  </Topic>
  <Topic Id="1126" Title="Handle stat_bin2d(breaks=(x=NA, y=Something))">
    <Messages>
      <Message Id="0" ParentId="1126" UserId="229502" Date="06/14/2015 00:21:04" Content="With this change,  you can specify one set of breaks to `stat_bin2d` without setting the other.  This is particularly useful when binning by date in one dimension,  and using a transformed scale in the other dimension.  This way,  you don't have to figure out how to reconstruct the default breaks for the transformed scale.  For example:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;breaks &lt;- list( x = sort(unique(movies$year)) - 0.5,  y = NA )&#xD;&#xA;g &lt;- ggplot(movies) + aes(x = year,  y = length)&#xD;&#xA;g + stat_bin2d(breaks=breaks) + scale_y_log10()&#xD;&#xA;```" />
      <Message Id="113190551" ParentId="1126" UserId="4196" Date="06/18/2015 15:21:52" Content="Would you consider adding a couple of unit tests? I'd start with something like:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;df &lt;- data.frame(x = 1:3,  y = 1:3)&#xD;&#xA;p &lt;- ggplot(df,  aes(x,  y)) + &#xD;&#xA;  stat_bin2d()&#xD;&#xA;ggplot_build(p)$data[ [ 1 ] ]&#xD;&#xA;```" />
      <Message Id="113840144" ParentId="1126" UserId="229502" Date="06/20/2015 23:28:01" Content="Sure,  I'll write some more specific unit tests.  Actually,  just got started,  and found a bug (is.integer() doesn't work when calculating the binwidth,  data$x is 'numeric').  I'll try and fix that too." />
      <Message Id="114335909" ParentId="1126" UserId="229502" Date="06/23/2015 02:59:04" Content="Ah,  the integer/numeric thing seems to be a feature,  rather than a bug,  of R.  OK." />
      <Message Id="114609125" ParentId="1126" UserId="229502" Date="06/23/2015 19:00:22" Content="I'm going to open a separate issue for the is.integer thing." />
      <Message Id="114614099" ParentId="1126" UserId="4196" Date="06/23/2015 19:13:13" Content="I think that's by design: at this point factors are integers and everything else is numeric. It's definitely weird but it's too late to change now" />
      <Message Id="114614322" ParentId="1126" UserId="229502" Date="06/23/2015 19:14:30" Content="AH! That makes sense!  Ignore #1147 then." />
    </Messages>
  </Topic>
  <Topic Id="1127" Title="Implement `labeller` option for facet_wrap()">
    <Messages>
      <Message Id="0" ParentId="1127" UserId="4465050" Date="06/14/2015 00:46:32" Content="so I finally understood what was the concern in #656. I found a somewhat hacky solution (documented in the source code) that should nevertheless work in most cases." />
      <Message Id="113207465" ParentId="1127" UserId="4196" Date="06/18/2015 16:20:58" Content="We are going to make other API breaking changes in the next release,  so it would be ok to consider a less-hacky solution,  if you're interested." />
      <Message Id="113217936" ParentId="1127" UserId="4465050" Date="06/18/2015 16:53:14" Content="I may have time in July." />
      <Message Id="113251984" ParentId="1127" UserId="4196" Date="06/18/2015 18:33:28" Content="That should work - my crazy summer conference schedule starts on next Wednesday,  and I won't be back doing much development until July 20." />
      <Message Id="117231243" ParentId="1127" UserId="4465050" Date="06/30/2015 15:36:17" Content="@hadley Would it be ok to have multiple factors (e.g.,  `~ cyl + am`) labelled on multiple rows as in grid facetting? Currently `facet_wrap()` label them with a single row with comma separation and I think it'd be better to have the same behaviour as with grid facets. Or should we avoid making visible changes?" />
      <Message Id="117548491" ParentId="1127" UserId="4465050" Date="07/01/2015 08:56:14" Content="I'll add a parameter to the labellers to specify whether it should be one row or multiple rows. I think multiple rows is more readable but kind of ugly so it'll be nice to have the single row option for publications.&#xD;&#xA;&#xD;&#xA;Then we can either change the default of wrap to match that of grid. Or we can have the old behaviour by setting the default to this lambda: `labeller = function(labels) label_value(labels,  newline = FALSE)`." />
      <Message Id="117790965" ParentId="1127" UserId="4465050" Date="07/01/2015 18:36:40" Content="@hadley ready for review.&#xD;&#xA;&#xD;&#xA;Currently `facet_wrap()` with multiple factors will display the labels on multiple lines by default,  which introduces a slight change from previous behaviour. I can change it if you prefer.&#xD;&#xA;&#xD;&#xA;Additionally,  I think we should have a new default labeller for both wrap and grid. It would call `label_value()` in case of a single factor,  and `label_both()` in case of multiple factors. This would make ggplot facets much more readable." />
      <Message Id="117790965" ParentId="1127" UserId="4465050" Date="07/01/2015 18:36:40" Content="@hadley ready for review.&#xD;&#xA;&#xD;&#xA;Currently `facet_wrap()` with multiple factors will display the labels on multiple lines by default,  which introduces a slight change from previous behaviour. I can change it if you prefer.&#xD;&#xA;&#xD;&#xA;Additionally,  I think we should have a new default labeller for both wrap and grid. It would call `label_value()` in case of a single factor,  and `label_both()` in case of multiple factors. This would make ggplot facets much more readable." />
      <Message Id="117991994" ParentId="1127" UserId="4465050" Date="07/02/2015 10:22:05" Content="ok,  I added `label_default()` which behaves as discussed above. I made it the default. Now the following:&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(mtcars,  aes(wt,  mpg)) +&#xD;&#xA;  geom_point() +&#xD;&#xA;  facet_grid(gear ~ am + cyl)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;yields&#xD;&#xA;&#xD;&#xA;![ rplot ](https://cloud.githubusercontent.com/assets/4465050/8474972/9949fe3a-20b4-11e5-990f-298e3603fdaa.png)&#xD;&#xA;&#xD;&#xA;which is more readable because you can tell which values belong to which variable. Let me know if you'd prefer no changes in the visual defaults." />
    </Messages>
  </Topic>
  <Topic Id="1128" Title="Complete the set of horizontal Geoms,  Stats and Positions">
    <Messages>
      <Message Id="0" ParentId="1128" UserId="4465050" Date="06/14/2015 12:41:37" Content="This makes it easy to flip a layout horizontally on a layer basis as opposed to a plot basis (with `coord_flip()`). In addition to being convenient,  this allows plots that are not currently possible because `facet_wrap()` does not allow coordinates filpping,  or in situations where only some layers should be flipped." />
      <Message Id="112080180" ParentId="1128" UserId="4196" Date="06/15/2015 13:58:55" Content="I'm not entirely opposed to this idea,  but the implementation seems so inelegant.  I wonder if it would be possible to implement a `position_rotate()` that would allow you to use the existing geoms" />
      <Message Id="112081316" ParentId="1128" UserId="4465050" Date="06/15/2015 14:04:17" Content="I know... At the time I wrote this I've played around with the idea of adding an argument to geoms,  but IIRC I encountered some problems that I could not easily solve. Since ggplot is not going to evolve much (or is it?) I thought it may be ok to have all this code repetition.&#xD;&#xA;&#xD;&#xA;I don't have time to work on another solution however :/" />
      <Message Id="113189804" ParentId="1128" UserId="4196" Date="06/18/2015 15:18:42" Content="I'm going to close this for now,  as it just feels a bit too icky (plus no one else has asked for horizontal versions of those geoms).   On the plus side,  this issue was thought through much more thoroughly in ggvis,  and rotating arbitrary geoms is much much easier." />
      <Message Id="113192947" ParentId="1128" UserId="4465050" Date="06/18/2015 15:31:02" Content="well the horizontal version of linerange has been asked and is needed for coefficient plots. It's true there is no dire need to merge this since packages and users can implement their own horizontal geoms and colliders (as is currently done e.g. in https://github.com/jaredlander/coefplot/blob/master/R/dodging.r )." />
      <Message Id="113195092" ParentId="1128" UserId="4465050" Date="06/18/2015 15:36:46" Content="I merely saw this patch as an easy way to make ggplot2 'complete',  and in a way it's not ickier than `geom_errorbarh()` or `geom_vline()`/`geom_hline()` currently in the codebase ;)" />
      <Message Id="113202152" ParentId="1128" UserId="4196" Date="06/18/2015 16:01:38" Content="BTW I think we're going to resolve this problem in a more general way - I'm pretty sure we're going to switch to R6 and provide a documented way of adding additional geoms,  stats,  and position adjustments to ggplot2. Then you can make gghorizontal and we'll both be happy :)" />
      <Message Id="113205857" ParentId="1128" UserId="4465050" Date="06/18/2015 16:14:27" Content="that's good news!" />
      <Message Id="113207335" ParentId="1128" UserId="5131281" Date="06/18/2015 16:20:28" Content="![ rplot ](https://cloud.githubusercontent.com/assets/5131281/8236023/98e8c78e-15b3-11e5-8e3c-204fca3db9d1.png)&#xD;&#xA;&#xD;&#xA;There is some plots that cannot be done in ggplot especially when scales are free and when we need rotation see attached done in lattice and it keeps that scales are &quot;free&quot; in ggplot when we do rotation it will keep all levels in all panels" />
      <Message Id="113207546" ParentId="1128" UserId="5131281" Date="06/18/2015 16:21:17" Content="so I vote for having the possibility to do it ! " />
      <Message Id="113208288" ParentId="1128" UserId="4196" Date="06/18/2015 16:23:44" Content="@smouksassi stay tuned for @lionel-'s gghorizon package ;)" />
    </Messages>
  </Topic>
  <Topic Id="1129" Title="Symbol ∈ (unicode u2208) cannot be displayed in ggplot axis.text or title">
    <Messages>
      <Message Id="0" ParentId="1129" UserId="8326410" Date="06/15/2015 22:49:57" Content="However some other unicode is OK,  such as the &quot;double angle&quot; » (unicode u00BB,  using &quot;\u00BB&quot; in R).&#xD;&#xA;&#xD;&#xA;Is that I miss some component of the program?&#xD;&#xA;&#xD;&#xA;Thanks :)" />
      <Message Id="112762564" ParentId="1129" UserId="4196" Date="06/17/2015 11:40:46" Content="Please provide a reproducible example." />
      <Message Id="112766484" ParentId="1129" UserId="8326410" Date="06/17/2015 11:48:16" Content="dat &lt;- data.frame(&#xD;&#xA;  time = factor(c(&quot;Lunch&quot;, &quot;Dinner&quot;),  levels=c(&quot;Lunch&quot;, &quot;Dinner&quot;)), &#xD;&#xA;  total_bill = c(14.89,  17.23)&#xD;&#xA;)&#xD;&#xA;dat&#xD;&#xA;&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;# Figure 1.  Unrecognized symbol&#xD;&#xA;ggplot(data=dat,  aes(x=time,  y=total_bill)) + geom_bar(stat=&quot;identity&quot;) + ggtitle(&quot;\u2208&quot;)&#xD;&#xA;# Figure 2.  Good&#xD;&#xA;ggplot(data=dat,  aes(x=time,  y=total_bill)) + geom_bar(stat=&quot;identity&quot;) + ggtitle(&quot;\u00BB&quot;)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;![ fig1 ](https://cloud.githubusercontent.com/assets/8326410/8206176/3159df66-14c5-11e5-9454-66aed5f526c2.png)&#xD;&#xA;![ fig2 ](https://cloud.githubusercontent.com/assets/8326410/8206175/31589c3c-14c5-11e5-89b8-30e76c35276c.png)&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
      <Message Id="112767352" ParentId="1129" UserId="8326410" Date="06/17/2015 11:49:50" Content="Meanwhile if I type &quot;\u2208&quot; directly in the console,  it will be displayed correctly&#xD;&#xA;&#xD;&#xA;&gt; &quot;\u2208&quot;&#xD;&#xA;[ 1 ] &quot;∈&quot;&#xD;&#xA;&#xD;&#xA;Thanks!" />
      <Message Id="112768161" ParentId="1129" UserId="4196" Date="06/17/2015 11:51:08" Content="It's probably a font problem,  so there's not much I can do about it inside ggplot2. Have you looked at `showtext()`?" />
      <Message Id="112772320" ParentId="1129" UserId="8326410" Date="06/17/2015 11:58:28" Content="Looking now.  I'll post a note here if I sort this out!" />
    </Messages>
  </Topic>
  <Topic Id="1130" Title="add midpoint parameter to scale_*_gradientn">
    <Messages>
      <Message Id="0" ParentId="1130" UserId="291575" Date="06/16/2015 14:28:00" Content="there are more ways to do diverging color scales than by using three “low,  mid,  high” colors.&#xD;&#xA;&#xD;&#xA;e.g. I’d like an easy way to use the `Spectral` color brewer palette as diverging color palette." />
      <Message Id="112456513" ParentId="1130" UserId="4196" Date="06/16/2015 14:47:33" Content="See `scale_colour_distiller()`" />
    </Messages>
  </Topic>
  <Topic Id="1131" Title="vjust not working for axis.text.x">
    <Messages>
      <Message Id="0" ParentId="1131" UserId="3872815" Date="06/16/2015 15:42:13" Content="```vjust``` does not seem to work for ```axis.text.x``` if ```angle=0``` (or without ```angle```). This is a short example:&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;png(filename=&quot;without-angle.png&quot;, type=&quot;cairo&quot;,  units=&quot;in&quot;,  width=3,  height=2,  pointsize=12,  res=96)&#xD;&#xA;ggplot(ChickWeight,  aes(x=Diet)) + geom_boxplot(aes(y=weight)) + theme(axis.text.x=element_text(vjust=-100))&#xD;&#xA;dev.off()&#xD;&#xA;```&#xD;&#xA;![ without-angle ](https://cloud.githubusercontent.com/assets/3872815/8187183/ce1c2ab0-144e-11e5-8eaf-bf6c22c20aaf.png)&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;png(filename=&quot;with-angle.png&quot;, type=&quot;cairo&quot;,  units=&quot;in&quot;,  width=3,  height=2,  pointsize=12,  res=96)&#xD;&#xA;ggplot(ChickWeight,  aes(x=Diet)) + geom_boxplot(aes(y=weight)) + theme(axis.text.x=element_text(angle=1,  vjust=-50))&#xD;&#xA;dev.off()&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ with-angle ](https://cloud.githubusercontent.com/assets/3872815/8187184/ce1d373e-144e-11e5-8281-69abf8943180.png)&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1132" Title="Fix typo">
    <Messages>
      <Message Id="0" ParentId="1132" UserId="6612411" Date="06/16/2015 15:44:52" Content="Missing \ in the See Also section of ggplot_build" />
      <Message Id="112479304" ParentId="1132" UserId="4196" Date="06/16/2015 15:59:28" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1133" Title="Add stroke option to geom_point.">
    <Messages>
      <Message Id="0" ParentId="1133" UserId="118235" Date="06/16/2015 16:32:01" Content="This PR adds an aesthetic option `stroke` to `geom_point` that makes it possible to specify the stroke width of point shapes 21-25 (see #1085,  I had to resubmit because you can't force push when an issue is closed)." />
      <Message Id="113150423" ParentId="1133" UserId="4196" Date="06/18/2015 13:10:02" Content="Could you please:&#xD;&#xA;&#xD;&#xA;* re-document,  so travis passes&#xD;&#xA;* add an example of usage to `geom_point()`" />
      <Message Id="113251717" ParentId="1133" UserId="118235" Date="06/18/2015 18:32:19" Content="I've added a basic example and made sure all the checks pass without warnings now. Are there any other places where I need to update documentation as well?" />
      <Message Id="113255653" ParentId="1133" UserId="4196" Date="06/18/2015 18:49:53" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1134" Title="Fix all found instances of partial matching">
    <Messages>
      <Message Id="0" ParentId="1134" UserId="205275" Date="06/16/2015 19:59:58" Content="These were found by setting&#xD;&#xA;&#xD;&#xA;```&#xD;&#xA;options(warnPartialMatchAttr = TRUE, &#xD;&#xA;    warnPartialMatchDollar = TRUE, &#xD;&#xA;    warn = 2)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Using hadley/testthat#269 with `options(&quot;testthat.suppress&quot; = NULL)` and running&#xD;&#xA;`devtools::test()` and `vtest::vtest()` until there were no more partial&#xD;&#xA;match messages.&#xD;&#xA;&#xD;&#xA;There may still be some instances in the code base,  but I think this&#xD;&#xA;finds the vast majority." />
      <Message Id="112558600" ParentId="1134" UserId="4196" Date="06/16/2015 20:26:06" Content="Thanks!" />
    </Messages>
  </Topic>
  <Topic Id="1135" Title="Add support for character justification in geom_text">
    <Messages>
      <Message Id="0" ParentId="1135" UserId="4196" Date="06/16/2015 20:43:14" Content="Should understand: left,  right,  top,  bottom,  center,  middle,  inward and outward" />
      <Message Id="112564246" ParentId="1135" UserId="4196" Date="06/16/2015 20:45:29" Content="```R&#xD;&#xA;df &lt;- data.frame(&#xD;&#xA;  x = c(1,  1,  2,  2,  1.5),  &#xD;&#xA;  y = c(1,  2,  1,  2,  1.5), &#xD;&#xA;  text = c(&quot;bottom-left&quot;,  &quot;bottom-right&quot;,  &quot;top-left&quot;,  &quot;top-right&quot;,  &quot;center&quot;)&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;just &lt;- function(x) { &#xD;&#xA;  (sign(x - mean(x)) + 1) / 2&#xD;&#xA; }&#xD;&#xA;ggplot(df,  aes(x,  y)) + &#xD;&#xA;  geom_text(aes(label = text))&#xD;&#xA;&#xD;&#xA;ggplot(df,  aes(x,  y)) + &#xD;&#xA; geom_text(aes(label = text,  vjust = just(y),  hjust = just(x)))&#xD;&#xA;```&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1136" Title="geom_violin produces error when all values in a series are the same">
    <Messages>
      <Message Id="0" ParentId="1136" UserId="8924216" Date="06/18/2015 06:27:40" Content="Posted on StackOverflow:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/30721548/geom-violin-produces-error-when-all-values-in-a-series-are-the-same&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    d1 &lt;- data.frame(x=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;), y=c(1, 2, 2, 1, 2, 1)) # Two series of three with different values through each series&#xD;&#xA;    d2 &lt;- data.frame(x=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;), y=c(1, 2, 2, 1, 1, 1)) # Two series of three,  one series has all the same values&#xD;&#xA;    ggplot(data=d1) + geom_violin(aes(x=x, y=y))                     # This works&#xD;&#xA;    ggplot(data=d2) + geom_violin(aes(x=x, y=y))                     # This produces an error&#xD;&#xA;&#xD;&#xA;    Error message: &#xD;&#xA;    Error in `$&lt;-.data.frame`(`*tmp*`,  &quot;n&quot;,  value = 3L) : &#xD;&#xA;      replacement has 1 row,  data has 0" />
      <Message Id="113116240" ParentId="1136" UserId="4196" Date="06/18/2015 11:18:50" Content="Already fixed in the dev version." />
    </Messages>
  </Topic>
  <Topic Id="1137" Title="geom_violin produces empty plot when only two values in the series and scale count used">
    <Messages>
      <Message Id="0" ParentId="1137" UserId="8924216" Date="06/18/2015 06:33:09" Content="As posted on StackOverflow:&#xD;&#xA;&#xD;&#xA;http://stackoverflow.com/questions/30659308/violin-produces-empty-plot-when-only-two-values-in-the-series-and-scale-count-us&#xD;&#xA;&#xD;&#xA;geom_violin produces an empty plot when there are only two values in the series and scale=count used.&#xD;&#xA;&#xD;&#xA;    library(ggplot2)&#xD;&#xA;    d1 &lt;- data.frame(x=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;), y=c(1, 2, 2, 1, 2, 1)) # Two series of three with different values through each series&#xD;&#xA;    d2 &lt;- data.frame(x=c(&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;),     y=c(1, 2, 2, 1, 2))   # Two series,  one of three,  one of two with different values through each series&#xD;&#xA;    ggplot(data=d1) + geom_violin(aes(x=x, y=y))                     # This works&#xD;&#xA;    ggplot(data=d1) + geom_violin(aes(x=x, y=y),  scale=&quot;count&quot;)      # This works&#xD;&#xA;    ggplot(data=d2) + geom_violin(aes(x=x, y=y))                     # This works&#xD;&#xA;    ggplot(data=d2) + geom_violin(aes(x=x, y=y),  scale=&quot;count&quot;)      # This produces an empty plot&#xD;&#xA;" />
      <Message Id="113116602" ParentId="1137" UserId="4196" Date="06/18/2015 11:19:45" Content="Already fixed in the dev version" />
    </Messages>
  </Topic>
  <Topic Id="1138" Title="Add lims function to parallel labs">
    <Messages>
      <Message Id="0" ParentId="1138" UserId="4196" Date="06/18/2015 11:57:09" Content="Document with `expand_limits()`" />
    </Messages>
  </Topic>
  <Topic Id="1140" Title="Provide official extension mechanism">
    <Messages>
      <Message Id="0" ParentId="1140" UserId="4196" Date="06/18/2015 18:48:57" Content="* [   ] Convert from proto to R6&#xD;&#xA;* [   ] Benchmark before and after&#xD;&#xA;* [   ] Export geom,  stat &amp; position base classes&#xD;&#xA;* [   ] Determine which currently internal functions need to be documented and exported&#xD;&#xA;* [   ] Write up vignette describing how to add a new geom/stat/position" />
    </Messages>
  </Topic>
  <Topic Id="1141" Title="Add hjust &amp; vjust params to position_jitter">
    <Messages>
      <Message Id="0" ParentId="1141" UserId="4196" Date="06/18/2015 19:06:12" Content="Should take the same values as for `geom_text()`. Also make available in `geom_jitter()`.&#xD;&#xA;&#xD;&#xA;Generalisation of #1016" />
    </Messages>
  </Topic>
  <Topic Id="1142" Title="Standard unit of stroke in geom_point">
    <Messages>
      <Message Id="0" ParentId="1142" UserId="4196" Date="06/18/2015 19:55:14" Content="* Currently it's 1/96 of an inch (should be millimeters)&#xD;&#xA;* Need to think if size = total radius,  or stroke is added outside of stroke" />
    </Messages>
  </Topic>
  <Topic Id="1143" Title="Review all uses of do.call">
    <Messages>
      <Message Id="0" ParentId="1143" UserId="4196" Date="06/19/2015 18:14:50" Content="And ensure arguments are quoted if they exist in the current." />
      <Message Id="117969001" ParentId="1143" UserId="4465050" Date="07/02/2015 09:05:23" Content="Last time I checked with a recent R,  most of the performance gaps in http://rpubs.com/hadley/do-call were solved,  so quoting is not as important as before. The last remaining perf gap is when an exception is raised." />
      <Message Id="117973270" ParentId="1143" UserId="4196" Date="07/02/2015 09:20:47" Content="Yeah,  I'm most concerned about the exception problem. It used to be really annoying in practice (but I haven't been able to reproduce it,  so maybe it's not a such a problem anyway)" />
    </Messages>
  </Topic>
  <Topic Id="1144" Title="Labels ignore \t character">
    <Messages>
      <Message Id="0" ParentId="1144" UserId="11479770" Date="06/19/2015 20:52:12" Content="I originally encountered this problem when attempting to include \t in facet labels with a custom labeller,  but after posting on [ StackOverflow ](http://stackoverflow.com/questions/30923852/include-t-character-in-facet-strip-text-with-custom-labeller),  this appears to occur any time \t is included in a label.&#xD;&#xA;&#xD;&#xA;```r&#xD;&#xA;ggplot(mtcars,  aes(mpg,  cyl)) + geom_point() + labs(x = &quot;Tab\tneeded&quot;,  y = &quot;Newline\nneeded&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;![ rplot ](https://cloud.githubusercontent.com/assets/11479770/8262821/4c0826f8-168a-11e5-8426-924ed48f1216.png)&#xD;&#xA;" />
    </Messages>
  </Topic>
  <Topic Id="1145" Title="Scales should default to name = waiver()">
    <Messages>
      <Message Id="0" ParentId="1145" UserId="4196" Date="06/23/2015 13:32:32" Content="So that (e.g.) `scale_x_continuous()` suppresses the label" />
    </Messages>
  </Topic>
  <Topic Id="1146" Title="If labels set to a vector,  breaks must also be a vector">
    <Messages>
      <Message Id="0" ParentId="1146" UserId="4196" Date="06/23/2015 13:33:10" Content="To prevent the labels from mapping to the wrong breaks" />
    </Messages>
  </Topic>
  <Topic Id="1147" Title="stat_bin2d: doesn't handle integer-valued data">
    <Messages>
      <Message Id="0" ParentId="1147" UserId="229502" Date="06/23/2015 19:13:17" Content="When I make a `stat_bin2d` using integer data,  I still get the &quot;range / 30&quot; bin width.&#xD;&#xA;```r&#xD;&#xA;&gt; df &lt;- data.frame(x = 0:3,  y = 0:3)&#xD;&#xA;&gt; str(df)&#xD;&#xA;'data.frame':   4 obs. of  2 variables:&#xD;&#xA; $ x: int  0 1 2 3&#xD;&#xA; $ y: int  0 1 2 3&#xD;&#xA;&gt; g &lt;- ggplot(df,  aes(x,  y))&#xD;&#xA;&gt; g + stat_bin2d()&#xD;&#xA;```&#xD;&#xA;![ default stat_bin2d ](https://cloud.githubusercontent.com/assets/229502/8314722/570a2eca-19b9-11e5-8ae9-7d07cf9fcf95.png)&#xD;&#xA;&#xD;&#xA;However,  in [ stat-bin2d.r ](https://github.com/hadley/ggplot2/blob/v1.0.1/R/stat-bin2d.r#L66),  it looks like it is trying to handle integer data specially,  to end up with something like this:&#xD;&#xA;```r&#xD;&#xA;&gt; g + stat_bin2d(binwidth=c(1, 1),  origin=c(-0.5, -0.5))&#xD;&#xA;```&#xD;&#xA;![ explicit stat_bin2d ](https://cloud.githubusercontent.com/assets/229502/8314782/b5650d00-19b9-11e5-848a-f68de732db72.png)&#xD;&#xA;&#xD;&#xA;Maybe,  at some point,  `data$x` retained its R integer type,  but now something switches it to just numeric,  and so the `is.integer` tests fail?&#xD;&#xA;&#xD;&#xA;Here's a failing test case:&#xD;&#xA;```r&#xD;&#xA;df &lt;- data.frame(x = 0:3,  y = 0:3)&#xD;&#xA;g &lt;- ggplot(df,  aes(x,  y))&#xD;&#xA;p &lt;- ggplot_build(g + stat_bin2d())&#xD;&#xA;&#xD;&#xA;want_xbin &lt;- cut(df$x,  seq(-0.5,  4,  1))&#xD;&#xA;expect_equal(p$data[ [ 1 ] ]$xbin,  want_xbin)&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="1148" Title="Convert from proto to R6">
    <Messages>
      <Message Id="0" ParentId="1148" UserId="86978" Date="06/24/2015 16:47:27" Content="This is just the start of the conversion to R6.&#xD;&#xA;&#xD;&#xA;This example works:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;ggplot(mtcars,  aes(wt,  mpg)) + geom_text2(label=&quot;x&quot;)&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Objects like `GeomText` are instantiated at run time (in the call to `Layer$new()`),  so that if any external packages inherit from,  say,  `Geom`,  they'll inherit from the current version of ggplot2,  not whatever version they were built against.&#xD;&#xA;&#xD;&#xA;@hadley,  currently the `geom_text2` function doesn't separate the `geom_params` from other `params`,  because some of the `geom_params` include properties like `label`,  `size`,  etc. So I'm letting the `LayerR6$initialize` function sort them out,  as was done previously. I think it's a good idea to explicitly sort out the geom params from stat params in the `geom_text2` functions if we can,  but it'll require a little work.&#xD;&#xA;" />
      <Message Id="115109104" ParentId="1148" UserId="86978" Date="06/25/2015 05:28:18" Content="I've completed the conversion. All tests pass! I haven't done visual tests yet,  however.&#xD;&#xA;&#xD;&#xA;Some things to think about:&#xD;&#xA;&#xD;&#xA;* Because this code was originally designed to work with singletons (because that's how proto works),  it forces us to either (1) instantiate all the classes immediately,  or (2) instantiate them as needed. I went with (2). The drawback to (1) is that you might end up having conflicts with packages that have classes which inherit from classes in ggplot2,  if they're built against a different version of ggplot2. The drawback of (2) is that it's a little inefficient and inelegant in places,  because we end sometimes up instantiating objects just to invoke a single method from the object. It might be possible to solve this by modifying R6 to have static methods.&#xD;&#xA;* I don't like the existing print methods for stats,  geoms,  positions,  and layers. When I was working on it,  I found the default print R6 method to be more useful because it tells you what the object actually is,  instead of printing out a confusing code fragment.&#xD;&#xA;* Many of the `geom_xxx` and `stat_xxx` functions didn't have an explicit `inherit.aes` or `show_guide`; those arguments are captured in the `...` and passed to the `params` argument. But this no longer works correctly,  so I think we should be explicit about having those args (and others) in every geom and stat. There are other ways to work around it,  but I think this is the best option,  since it also means they will get documented properly.&#xD;&#xA;* It would be nice to provide cleaner separation of `geom_params`,  `stat_params`,  and `params`. There were many places I saw where the `geom_xxx` or `stat_xxx` function took params that were obviously for the stat or geom,  so we should send those on their way if needed.&#xD;&#xA;* I commented out the bolus/digest code since it didn't seem like it was doing anything,  and it used proto." />
      <Message Id="115134460" ParentId="1148" UserId="4196" Date="06/25/2015 07:13:26" Content="That all sounds reasonable. It's a bit hard to comment on such a large PR,  so maybe I'll read through it and make a separate list of thoughts (esp. since many aren't necessarily related to your changes)" />
      <Message Id="115296149" ParentId="1148" UserId="86978" Date="06/25/2015 15:36:21" Content="A few more issues I thought of:&#xD;&#xA;&#xD;&#xA;* It can be confusing when the user has to pass in a string like `stat=&quot;bin&quot;` and other times you use `&quot;StatBin`. And there's also the related `stat_bin`. It's not obvious how all these things are related. We should at the very least clarify in the docs how they're connected.&#xD;&#xA;* Similarly the `guide_geom()` method (and probably others) returns a string,  like this: `guide_geom = function() &quot;polygon&quot;`,  but it might as well return the object directly,  like `guide_geom = function() GeomPolygon`.&#xD;&#xA;* Some members are functions,  and others are non-functions,  and it's not clear to me why. For example,  in [ `Stat` ](https://github.com/wch/ggplot2/blob/01e94f2/R/stat-.r),  `default_aes` is a function,  but `required_aes` is a character vector." />
      <Message Id="115399829" ParentId="1148" UserId="86978" Date="06/25/2015 21:13:36" Content="I ran a simple benchmark comparing the CRAN version to this branch. Times are essentially the same:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;library(ggplot2)&#xD;&#xA;&#xD;&#xA;times &lt;- numeric(0)&#xD;&#xA;&#xD;&#xA;for (i in 1:20) { &#xD;&#xA;  times[ length(times) + 1 ] &lt;- system.time({ &#xD;&#xA;    print(ggplot(mtcars,  aes(wt,  mpg)) + geom_point())&#xD;&#xA;    &#xD;&#xA;    print(&#xD;&#xA;      ggplot(mtcars,  aes(wt,  mpg)) +&#xD;&#xA;        geom_point(colour=&quot;black&quot;,  size = 4.5) +&#xD;&#xA;        geom_point(colour=&quot;pink&quot;,  size = 4) +&#xD;&#xA;        geom_point(aes(shape = factor(cyl)))&#xD;&#xA;    )&#xD;&#xA;    &#xD;&#xA;    print(ggplot(mtcars,  aes(wt,  mpg,  label = rownames(mtcars))) + geom_text())&#xD;&#xA;   })&#xD;&#xA; }&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;# ggplot2 1.0.1&#xD;&#xA;mean(times)&#xD;&#xA;# [ 1 ] 0.25075&#xD;&#xA;&#xD;&#xA;# R6 version&#xD;&#xA;mean(times)&#xD;&#xA;# [ 1 ] 0.2523&#xD;&#xA;```&#xD;&#xA;" />
      <Message Id="115504906" ParentId="1148" UserId="4196" Date="06/26/2015 04:42:07" Content="* I think we should stick to using object rather than strings in the internal code.&#xD;&#xA;&#xD;&#xA;* I don't remember why some things are methods and some are fields - I think we should use functions everywhere&#xD;&#xA;&#xD;&#xA;* Yes,  it's confusing that `stat_bin()` creates a layer - at least this is a bit less confusing in the source now.&#xD;&#xA;&#xD;&#xA;* I think as many as possible of the defaults should move out of (e.g.) `StatBin` and into `stat_bin` (but I don't think that can happen with default aesthetics)&#xD;&#xA;" />
      <Message Id="117412434" ParentId="1148" UserId="86978" Date="07/01/2015 02:42:57" Content="I've improved the way that `super` works.&#xD;&#xA;&#xD;&#xA;I've also added `print` and `format` methods for proto2 objects. Proto2 objects can also now take a class. Here's the example of output when printed:&#xD;&#xA;&#xD;&#xA;``` &#xD;&#xA;&gt; C&#xD;&#xA;C &lt;proto2 object&gt;&#xD;&#xA;    getx: function&#xD;&#xA;    x: 2&#xD;&#xA;    super: B &lt;proto2 object&gt;&#xD;&#xA;&#xD;&#xA;&gt; print(C,  flat=F)&#xD;&#xA;C &lt;proto2 object&gt;&#xD;&#xA;    getx: function&#xD;&#xA;    super: B &lt;proto2 object&gt;&#xD;&#xA;        getx: function&#xD;&#xA;        x: 2&#xD;&#xA;        super: A &lt;proto2 object&gt;&#xD;&#xA;            getx: function&#xD;&#xA;            x: 1&#xD;&#xA;```" />
    </Messages>
  </Topic>
  <Topic Id="1150" Title="Some characters in boxplot values cause problems">
    <Messages>
      <Message Id="0" ParentId="1150" UserId="86978" Date="06/26/2015 01:51:51" Content="This is based on one of the examples from `aes_position`:&#xD;&#xA;&#xD;&#xA;```R&#xD;&#xA;# This is OK&#xD;&#xA;dat &lt;- data.frame(a=1,  b=2,  c=3,  d=4,  e=5)&#xD;&#xA;ggplot(dat,  aes(x = 1,  ymin = a,  lower = b,  middle = c,  upper = d,  ymax = e)) +&#xD;&#xA;  geom_boxplot(stat = &quot;identity&quot;)&#xD;&#xA;&#xD;&#xA;# Error&#xD;&#xA;dat &lt;- data.frame(a=1,  &quot;25%&quot;=2,  c=3,  d=4,  e=5)&#xD;&#xA;ggplot(dat,  aes(x = 1,  ymin = a,  lower = &quot;25%&quot;,  middle = c,  upper = d,  ymax = e)) +&#xD;&#xA;  geom_boxplot(stat = &quot;identity&quot;)&#xD;&#xA;# Error in Ops.factor(x,  from[ 1 ]) : &#xD;&#xA;#   (converted from warning) ‘-’ not meaningful for factors&#xD;&#xA;```&#xD;&#xA;&#xD;&#xA;Perhaps there was some change in plyr that caused this? At the very least the examples should be fixed." />
    </Messages>
  </Topic>
  <Topic Id="1151" Title="coord_trans: xtrans and ytrans args should be renamed x and y">
    <Messages>
      <Message Id="0" ParentId="1151" UserId="86978" Date="06/26/2015 01:55:29" Content="The examples use `x` and `y`,  (as in `plot + coord_trans(x = &quot;sqrt&quot;)`) as does probably most existing code,  but the arguments are named `xtrans` and `ytrans`. We can replace them with `x` and `y` and then deprecate `xtrans` and `ytrans`." />
    </Messages>
  </Topic>
  <Topic Id="1152" Title="Is there a way to allow scales in facet_grid to be completely &quot;free&quot;?">
    <Messages>
      <Message Id="0" ParentId="1152" UserId="5327505" Date="07/02/2015 20:39:13" Content="Suppose we have an n x m grid.&#xD;&#xA;&#xD;&#xA;Currently:&#xD;&#xA;* ``scales = free_x`` allows for m scales along the bottom,  and 1 common scale for all rows.&#xD;&#xA;* ``scales = free_y`` allows for n scales along the side,  and 1 common scale for all columns.&#xD;&#xA;* ``scales = free`` allows for n scales along the side,  and m scales along the bottom.&#xD;&#xA;&#xD;&#xA;Is there a way to have all scales free? i.e. this would result in n*m independent scales,  one for each subplot?" />
    </Messages>
  </Topic>
  <Topic Id="1153" Title="facet_grid(x ~ x) is plotting in the first column rather than the diagonal">
    <Messages>
      <Message Id="0" ParentId="1153" UserId="7278929" Date="07/03/2015 11:24:53" Content="example:&#xD;&#xA;ggplot(data.frame(a = letters[ 1:3 ],  y = rnorm(3))) + geom_point(aes(y,  y)) + facet_grid(a~a)" />
    </Messages>
  </Topic>
  <Topic Id="1154" Title="Problem with strip_dots and anonymous functions">
    <Messages>
      <Message Id="0" ParentId="1154" UserId="2175487" Date="07/03/2015 21:33:35" Content="The current code which handles anonymous functions within strip_dots (in aes_calculated.r) is broken for anonymous functions. With pairlists,  it tries to lapply each member of the pairlist to itself lapply(expr,  expr) which I think will always result in an error.&#xD;&#xA;&#xD;&#xA;Minimal reproducible example:&#xD;&#xA;&#xD;&#xA;ggplot2:::strip_dots(quote(function(x) x))&#xD;&#xA;&#xD;&#xA;I'm about to submit a pull request which fixes this issue." />
    </Messages>
  </Topic>
  <Topic Id="1155" Title="Updated aes-calculated.r for pairlists">
    <Messages>
      <Message Id="0" ParentId="1155" UserId="2175487" Date="07/03/2015 21:36:09" Content="Updated to correct code to handle formals of anonymous function and zero-length names. This fixes the issue just posted at https://github.com/hadley/ggplot2/issues/1154 and discussed on Stack Overflow at http://stackoverflow.com/questions/31212054/functions-inside-aes ." />
    </Messages>
  </Topic>
</Topics>